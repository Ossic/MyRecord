{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"Search By Image","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["*"],"orig_matches":["<all_urls>"],"orig_noframes":null,"orig_run_at":"document-start","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"setting":"s{\"site_list\":{\"Google\":\"https://www.google.com/searchbyimage?image_url={%s}\",\"Baidu\":\"https://image.baidu.com/n/pc_search?queryImageUrl={%s}&fm=result_camera&uptype=paste&drag=1\",\"Bing\":\"https://www.bing.com/images/searchbyimage?cbir=sbi&iss=sbi&imgurl={%s}\",\"TinEye\":\"https://www.tineye.com/search?url={%s}\",\"Yandex\":\"https://yandex.ru/images/search?rpt=imageview&img_url={%s}\",\"Sogou\":\"https://pic.sogou.com/ris?query={%s}&flag=1&drag=0\",\"360 ShiTu\":\"http://st.so.com/stu?imgurl={%s}\",\"SauceNAO\":\"https://saucenao.com/search.php?db=999&url={%s}\",\"IQDB\":\"https://iqdb.org/?url={%s}\",\"3D IQDB\":\"https://3d.iqdb.org/?url={%s}\",\"WhatAnime\":\"https://whatanime.ga/?url={%s}\"},\"site_option\":[\"Google\",\"Baidu\",\"Bing\",\"TinEye\",\"Yandex\",\"Sogou\",\"360 ShiTu\",\"SauceNAO\",\"IQDB\",\"3D IQDB\",\"WhatAnime\",\"WhatAnime\"],\"hot_key\":\"ctrlKey\",\"server_url\":\"//sbi.ccloli.com/img/upload.php\"}","timestamp":"n1500385701443","version":"n4"},"ts":1500385701443},"enabled":true,"position":1,"file_url":"https://greasyfork.org/scripts/2998-search-by-image/code/Search%20By%20Image.user.js","uuid":"1daa6492-f2a0-4d34-9669-333ef5e5ee4b","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIFNlYXJjaCBCeSBJbWFnZQovLyBAdmVyc2lvbiAgICAgMS41Ci8vIEBkZXNjcmlwdGlvbiBTZWFyY2ggQnkgSW1hZ2UgfCDku6Xlm77mkJzlm74KLy8gQG1hdGNoICAgICAgIDxhbGxfdXJscz4KLy8gQGluY2x1ZGUgICAgICoKLy8gQGF1dGhvciAgICAgIDg2NDkwNzYwMGNjCi8vIEBpY29uICAgICAgICBodHRwOi8vMS5ncmF2YXRhci5jb20vYXZhdGFyLzE0NzgzNGNhZjljY2IwYTY2YjI1MDVjNzUzNzQ3ODY3Ci8vIEBydW4tYXQgICAgICBkb2N1bWVudC1zdGFydAovLyBAZ3JhbnQgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICBHTV9vcGVuSW5UYWIKLy8gQGdyYW50ICAgICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQKLy8gQG5hbWVzcGFjZSAgIGh0dHA6Ly9leHQuY2Nsb2xpLmNvbQovLyA9PS9Vc2VyU2NyaXB0PT0KCgovLyDmnKzohJrmnKzln7rkuo4gR1BMdjMg5Y2P6K6u5byA5rqQIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9ncGwuaHRtbAovLyAoYykgODY0OTc2MDBjYy4gU29tZSBSaWdodHMgUmVzZXJ2ZWQuCi8vIERlZmF1bHQgc2V0dGluZzogUHJlc3MgQ3RybCBhbmQgY2xpY2sgcmlnaHQga2V5IG9uIGEgaW1hZ2UgdG8gc2VhcmNoLgoKJ3VzZSBzdHJpY3QnOwp2YXIgZGVmYXVsdF9zZXR0aW5nID0gewoJInNpdGVfbGlzdCI6IHsKCQkiR29vZ2xlIjogImh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vc2VhcmNoYnlpbWFnZT9pbWFnZV91cmw9eyVzfSIsCgkJIkJhaWR1IjogImh0dHBzOi8vaW1hZ2UuYmFpZHUuY29tL24vcGNfc2VhcmNoP3F1ZXJ5SW1hZ2VVcmw9eyVzfSZmbT1yZXN1bHRfY2FtZXJhJnVwdHlwZT1wYXN0ZSZkcmFnPTEiLAoJCSJCaW5nIjogImh0dHBzOi8vd3d3LmJpbmcuY29tL2ltYWdlcy9zZWFyY2hieWltYWdlP2NiaXI9c2JpJmlzcz1zYmkmaW1ndXJsPXslc30iLAoJCSJUaW5FeWUiOiAiaHR0cHM6Ly93d3cudGluZXllLmNvbS9zZWFyY2g/dXJsPXslc30iLAoJCS8vIkN5ZHJhbCI6ICJodHRwOi8vd3d3LmN5ZHJhbC5jb20vI3VybD17JXN9IiwKCQkiWWFuZGV4IjogImh0dHBzOi8veWFuZGV4LnJ1L2ltYWdlcy9zZWFyY2g/cnB0PWltYWdldmlldyZpbWdfdXJsPXslc30iLCAvLyBjaGFuZ2UgItCv0L3QtNC10LrRgSAoWWFuZGV4KSIgdG8gIllhbmRleCIKCQkiU29nb3UiOiAiaHR0cHM6Ly9waWMuc29nb3UuY29tL3Jpcz9xdWVyeT17JXN9JmZsYWc9MSZkcmFnPTAiLAoJCSIzNjAgU2hpVHUiOiAiaHR0cDovL3N0LnNvLmNvbS9zdHU/aW1ndXJsPXslc30iLAoJCSJTYXVjZU5BTyI6ICJodHRwczovL3NhdWNlbmFvLmNvbS9zZWFyY2gucGhwP2RiPTk5OSZ1cmw9eyVzfSIsCgkJIklRREIiOiAiaHR0cHM6Ly9pcWRiLm9yZy8/dXJsPXslc30iLAoJCSIzRCBJUURCIjogImh0dHBzOi8vM2QuaXFkYi5vcmcvP3VybD17JXN9IiwKCQkiV2hhdEFuaW1lIjogImh0dHBzOi8vd2hhdGFuaW1lLmdhLz91cmw9eyVzfSIKCX0sCgkic2l0ZV9vcHRpb24iOiBbIkdvb2dsZSIsICJCYWlkdSIsICJCaW5nIiwgIlRpbkV5ZSIsICJZYW5kZXgiLCAiU29nb3UiLCAiMzYwIFNoaVR1IiwgIlNhdWNlTkFPIiwgIklRREIiLCAiM0QgSVFEQiIsICJXaGF0QW5pbWUiXSwKCSJob3Rfa2V5IjogImN0cmxLZXkiLAoJInNlcnZlcl91cmwiOiAiLy9zYmkuY2Nsb2xpLmNvbS9pbWcvdXBsb2FkLnBocCIKfTsKCi8qdmFyIHNlcnZlcl91cmwgPSAiLy9zYmkuY2Nsb2xpLmNvbS9pbWcvdXBsb2FkLnBocCI7Ki8KLy8g6K+355u05o6l5Zyo6K6+572u6aG16L+b6KGM6K6+572u77yIRmlyZWZveCDor7flsL3ph4/pgInmi6nmlK/mjIEgaHR0cHMg55qE5pyN5Yqh5Zmo77yJCi8vIOWcsOWdgOWJjeS9v+eUqCIvLyLooajnpLrmjInnhaflvZPliY3pobXpnaLorr7lrprlhrPlrprmmK/lkKbkvb/nlKggaHR0cHMKLy8g5Zyw5Z2A5YmN5L2/55SoImh0dHA6Ly8i6KGo56S65by65Yi25L2/55SoIGh0dHAKLy8g5Zyw5Z2A5YmN5L2/55SoImh0dHBzOi8vIuihqOekuuW8uuWItuS9v+eUqCBodHRwc++8iOmcgOehruiupOacjeWKoeWZqOaUr+aMgSBzc2zvvIkKLy8g5aaC5p6c6ZyA6KaB6Ieq5bex5p626K6+5LiK5Lyg5pyN5Yqh5Zmo55qE6K+d6K+36K6/6ZeuIEdpdEh1YiDpobnnm67pobXvvIhodHRwczovL2dpdGh1Yi5jb20vY2Nsb2xpL1NlYXJjaC1CeS1JbWFnZe+8ieiOt+WPluacjeWKoeerrwovLyDlhbbku5blj6/nlKjnmoTkuIrkvKDmnI3liqHlmajlpoLkuIvvvJoKLy8gSGVyb2t1OiAvL3NlYXJjaC1ieS1pbWFnZS5oZXJva3VhcHAuY29tL2ltZy91cGxvYWQucGhwIO+8iOaUr+aMgSBodHRwc++8iQovLyBCZUdldDogaHR0cDovL2ZoMTMxMjFhLmJnZXQucnUvaW1nL3VwbG9hZC5waHAg77yI5LiN5pSv5oyBIGh0dHBz77yJCi8vIE9wZW5TaGlmdDogLy9zZWFyY2hieWltYWdlLTg2NDkwNzYwMGNjLnJoY2xvdWQuY29tL2ltZy91cGxvYWQucGhwIO+8iOaUr+aMgSBodHRwc++8iQovLyBEaWdpdGFsT2NlYW4gVlBTOiAvL3NiaS5jY2xvbGkuY29tL2ltZy91cGxvYWQucGhwIO+8iOaUr+aMgSBodHRwc++8jHRoYW5rcyB0byBSZXRha2Vy77yJCi8vIOazqOaEj++8jOmDqOWIhuacjeWKoeWZqOWPr+iDveS7heaUr+aMgSBodHRwIOWNj+iuru+8jOiLpeaCqOmAieaLqeS6hui/meS6m+acjeWKoeWZqO+8jOivt+WKoeW/heazqOaYjiAiaHR0cDovLyLvvIzkuJToi6Xmgqjkvb/nlKjnmoTmmK8gRmlyZWZveCDmtY/op4jlmajvvIzlnKggaHR0cHMg6aG16Z2i5LiL5bCG5LiN6IO95LiK5Lyg5paH5Lu25pCc57Si5pCc57Si77yI6Zmk6Z2e6K6+572uIHNlY3VyaXR5Lm1peGVkX2NvbnRlbnQuYmxvY2tfYWN0aXZlX2NvbnRlbnQg5Li6IGZhbHNl77yJCgp2YXIgc2VhcmNoX3BhbmVsID0gbnVsbDsKdmFyIHNldHRpbmcgPSBHTV9nZXRWYWx1ZSgnc2V0dGluZycpID8gSlNPTi5wYXJzZShHTV9nZXRWYWx1ZSgnc2V0dGluZycpKSA6IGRlZmF1bHRfc2V0dGluZzsKdmFyIGRpc2FibGVfY29udGV4dG1lbnUgPSBmYWxzZTsKdmFyIGltZ19zcmMgPSBudWxsOwp2YXIgZGF0YV92ZXJzaW9uID0gR01fZ2V0VmFsdWUoJ3ZlcnNpb24nLCAwKTsKdmFyIGxhc3RfdXBkYXRlID0gR01fZ2V0VmFsdWUoJ3RpbWVzdGFtcCcsIDApOwp2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CnZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwpyZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZmlsZSkgewoJdXBsb2FkX2ZpbGUodGhpcy5yZXN1bHQpOwp9OwoKdmFyIGkxOG4gPSB7CgknemgnOiB7CgkJJ3Uycyc6ICfkuIrkvKDlm77niYflubbmkJzntKInLAoJCSdkaCc6ICfmi5bmi73mlofku7boh7PmraQnLAoJCSdjYSc6ICfnoa7orqTnu4jmraLkuIrkvKDmlofku7blkJfvvJ8nLAoJCSdhJzogJ+WkmuaQnCcsCgkJJ24nOiAn5ZCN56ewJywKCQknbCc6ICflnLDlnYDvvIjlm77niYflnLDlnYDku6UgeyVzfSDku6Pmm7/vvIknLAoJCSdjcic6ICfnoa7lrprlsIbmiYDmnInorr7nva7liJ3lp4vljJbkuYjvvJ9cbijliJ3lp4vljJblsIbmuIXpmaTmiYDmnInmiYDmnInorr7nva7vvIzkuJTkuI3lj6/pgIYpJywKCQkndXMnOiAn5LiK5Lyg5a6M5oiQ77yBJywKCQkndWYnOiAn5LiK5Lyg5aSx6LSl77yBJywKCQknc2gnOiAn54Ot6ZSuJywKCQknc2EnOiAn5re75YqgJywKCQknc3InOiAn6YeN572uJywKCQknc3MnOiAn5L+d5a2YJywKCQknc2MnOiAn5Y+W5raIJwoJfSwKCSdlbic6IHsKCQkndTJzJzogJ1VwbG9hZCBpbWFnZSB0byBzZWFyY2gnLAoJCSdkaCc6ICdEcmFnIGZpbGUgdG8gaGVyZScsCgkJJ2NhJzogJ0FyZSB5b3Ugc3VyZSB0byBjYW5jZWwgdXBsb2FkaW5nPycsCgkJJ2EnOiAnQWxsJywKCQknbic6ICdOYW1lJywKCQknbCc6ICdMb2NhdGlvbiAoSW1hZ2UgVVJMIHNob3VsZCBiZSByZXBsYWNlIHdpdGggeyVzfSknLAoJCSdjcic6ICdBcmUgeW91IHN1cmUgdG8gcmVzZXQgYWxsIHByZWZlcmVuY2VzIChpcnJldmVyc2libGUpID8nLAoJCSd1cyc6ICdVcGxvYWQgZmluaXNoZWQhJywKCQkndWYnOiAnVXBsb2FkIGZhaWxlZCEnLAoJCSdzaCc6ICdIb3QgS2V5JywKCQknc2EnOiAnQWRkJywKCQknc3InOiAnUmVzZXQnLAoJCSdzcyc6ICdTYXZlJywKCQknc2MnOiAnQ2FuY2VsJwoJfQp9Owp2YXIgbGFuZyA9IGkxOG5bbmF2aWdhdG9yLmxhbmd1YWdlXSA/IG5hdmlnYXRvci5sYW5ndWFnZSA6IG5hdmlnYXRvci5sYW5ndWFnZXMgPyBuYXZpZ2F0b3IubGFuZ3VhZ2VzLmZpbHRlcihmdW5jdGlvbihlbGVtKXsKCXJldHVybiBpMThuW2VsZW1dOwp9KVswXSA6IG51bGw7CmlmIChsYW5nID09IG51bGwpIGxhbmcgPSAnZW4nOwoKaWYgKGRhdGFfdmVyc2lvbiA8IDQpIHsKCXZhciBuZXdfc2l0ZV9saXN0ID0ge307Cgl2YXIgbmV3X3NpdGVfb3B0aW9uID0gW107CgoJZm9yICh2YXIgaSBpbiBzZXR0aW5nLnNpdGVfbGlzdCkgewoJCS8vIHVzZSBmb3IgbG9vcCB0byBrZWVwIG9yZGVyLCB3aWxsIHVzZSBhcnJheSBpbiAyLngKCQlzd2l0Y2ggKGkpIHsKCQkJY2FzZSAnQmFpZHUgU2hpVHUnOgoJCQljYXNlICdCYWlkdSBJbWFnZSc6CgkJCQluZXdfc2l0ZV9saXN0WydCYWlkdSddID0gZGVmYXVsdF9zZXR0aW5nLnNpdGVfbGlzdFsnQmFpZHUnXTsKCQkJCWJyZWFrOwoKCQkJY2FzZSAnQmluZyc6CgkJCWNhc2UgJ1NvZ291JzoKCQkJCW5ld19zaXRlX2xpc3RbaV0gPSBkZWZhdWx0X3NldHRpbmcuc2l0ZV9saXN0W2ldOwoJCQkJYnJlYWs7CgkJCQoJCQlkZWZhdWx0OgoJCQkJbmV3X3NpdGVfbGlzdFtpXSA9IHNldHRpbmcuc2l0ZV9saXN0W2ldOwoJCX0KCX0KCW5ld19zaXRlX2xpc3RbJ1doYXRBbmltZSddID0gZGVmYXVsdF9zZXR0aW5nLnNpdGVfbGlzdFsnV2hhdEFuaW1lJ107CgoJZm9yICh2YXIgaSA9IDA7IGkgPCBzZXR0aW5nLnNpdGVfb3B0aW9uLmxlbmd0aDsgaSsrKSB7CgkJaWYgKChzZXR0aW5nLnNpdGVfb3B0aW9uW2ldID09PSAnQmFpZHUgU2hpVHUnIHx8IHNldHRpbmcuc2l0ZV9vcHRpb25baV0gPT09ICdCYWlkdSBJbWFnZScpICYmICEoLyw/QmFpZHUsPy8udGVzdChuZXdfc2l0ZV9vcHRpb24uam9pbignLCcpKSkpIHsKCQkJbmV3X3NpdGVfb3B0aW9uLnB1c2goJ0JhaWR1Jyk7CgkJfQoJCWVsc2UgewoJCQluZXdfc2l0ZV9vcHRpb24ucHVzaChzZXR0aW5nLnNpdGVfb3B0aW9uW2ldKTsKCQl9Cgl9CgluZXdfc2l0ZV9vcHRpb24ucHVzaCgnV2hhdEFuaW1lJyk7CgoJc2V0dGluZy5zaXRlX2xpc3QgPSBuZXdfc2l0ZV9saXN0OwoJc2V0dGluZy5zaXRlX29wdGlvbiA9IG5ld19zaXRlX29wdGlvbjsKCQoJc2V0X3NldHRpbmcoc2V0dGluZyk7CglHTV9zZXRWYWx1ZSgndmVyc2lvbicsIGRhdGFfdmVyc2lvbiA9IDQpOwp9CgppZiAoc2V0dGluZy5zZXJ2ZXJfdXJsID09IG51bGwgfHwgc2V0dGluZy5zZXJ2ZXJfdXJsID09ICcnKSB7CglzZXR0aW5nLnNlcnZlcl91cmwgPSBkZWZhdWx0X3NldHRpbmcuc2VydmVyX3VybDsKCXNldF9zZXR0aW5nKHNldHRpbmcpOwp9Cgp2YXIgc2VydmVyX3VybCA9IHNldHRpbmcuc2VydmVyX3VybDsKCmZ1bmN0aW9uIHNldF9zZXR0aW5nKGRhdGEpIHsKCUdNX3NldFZhbHVlKCdzZXR0aW5nJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwoJR01fc2V0VmFsdWUoJ3RpbWVzdGFtcCcsIG5ldyBEYXRlKCkuZ2V0VGltZSgpKTsKfQoKZnVuY3Rpb24gY3JlYXRlX3BhbmVsKCkgewoJc2VhcmNoX3BhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CglzZWFyY2hfcGFuZWwuc3R5bGUuY3NzVGV4dCA9ICd3aWR0aDogMTk4cHg7IGZvbnQtc2l6ZTogMTRweDsgdGV4dC1hbGlnbjogY2VudGVyOyBwb3NpdGlvbjogYWJzb2x1dGU7IGNvbG9yOiAjMDAwOyB6LWluZGV4OiA5OTk5OTk5OTk5OyBib3gtc2hhZG93OiAycHggMnB4IDNweCByZ2JhKDAsIDAsIDAsIDAuNSk7IGJvcmRlcjogMXB4IHNvbGlkICNDQ0M7IGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC45KTsgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDJweDsgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMnB4OyBmb250LWZhbWlseTogIkFyaWFsIjsgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsgLW1vei11c2VyLXNlbGVjdDogbm9uZTsgLW1zLXVzZXItc2VsZWN0OiBub25lOyc7Cglkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNlYXJjaF9wYW5lbCk7Cgl2YXIgc2VhcmNoX3RvcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwoJc2VhcmNoX3RvcC5zdHlsZS5jc3NUZXh0ID0gJ2hlaWdodDogMjRweDsgbGluZS1oZWlnaHQ6IDI0cHg7IGZvbnQtc2l6ZTogMTJweDsgb3ZlcmZsb3c6IGhpZGRlbjsgbWFyZ2luOiAwIGF1dG87IHBhZGRpbmc6IDAgNXB4Oyc7CglzZWFyY2hfdG9wLmNsYXNzTmFtZSA9ICdpbWFnZS1zZWFyY2gtdG9wJzsKCXNlYXJjaF90b3AuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9InNlYXJjaF90b3BfdXJsIiBzdHlsZT0ib3ZlcmZsb3c6IGhpZGRlbjsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDI0cHg7Ij48L2Rpdj48ZGl2IGNsYXNzPSJzZWFyY2hfdG9wX2ZpbGUiIHN0eWxlPSJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAyNHB4OyBsaW5lLWhlaWdodDogMjRweDsiIGRyYWdnYWJsZT0idHJ1ZSI+PGxhYmVsIGZvcj0iaW1hZ2Utc2VhcmNoLWZpbGUiPicgKyBpMThuW2xhbmddWyd1MnMnXSArICc8L2xhYmVsPjxpbnB1dCB0eXBlPSJmaWxlIiBpZD0iaW1hZ2Utc2VhcmNoLWZpbGUiIGFjY2VwdD0iaW1hZ2UvKiIgc3R5bGU9IndpZHRoOiAwcHg7IGhlaWdodDogMHB4OyBtYXgtaGVpZ2h0OiAwcHg7IG1heC13aWR0aDogMHB4OyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7Ij48L2Rpdj48ZGl2IGNsYXNzPSJzZWFyY2hfdG9wX3Byb2dyZXNzIj48cHJvZ3Jlc3Mgc3R5bGU9IndpZHRoOiAxMDAlOyBoZWlnaHQ6IDE2cHg7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IG1hcmdpbjogNHB4IDA7IiBtYXg9IjEiPjwvcHJvZ2Vyc3M+PC9kaXY+PHN0eWxlPi5pbWFnZS1zZWFyY2gtaXRlbXtjb2xvcjogIzAwMDAwMDsgdHJhbnNpdGlvbjogYWxsIDAuMnMgbGluZWFyOyAtd2Via2l0LXRyYW5zaXRpb246IGFsbCAwLjFzIGxpbmVhcjt9LmltYWdlLXNlYXJjaC1pdGVtOmhvdmVye2JhY2tncm91bmQ6ICNlZWVlZWU7fTwvc3R5bGU+JzsKCXNlYXJjaF9wYW5lbC5hcHBlbmRDaGlsZChzZWFyY2hfdG9wKTsKCXZhciBzZWFyY2hfaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwoJc2VhcmNoX2l0ZW0uc3R5bGUuY3NzVGV4dCA9ICd3aWR0aDogMTAwJTsgaGVpZ2h0OiAyNHB4OyBsaW5lLWhlaWdodDogMjRweDsgY3Vyc29yOiBwb2ludGVyOyc7CglzZWFyY2hfaXRlbS5jbGFzc05hbWUgPSAnaW1hZ2Utc2VhcmNoLWl0ZW0nOwoJZm9yICh2YXIgaSBpbiBzZXR0aW5nLnNpdGVfbGlzdCkgewoJCXZhciBzZWFyY2hfaXRlbV9jaGlsZCA9IHNlYXJjaF9pdGVtLmNsb25lTm9kZSh0cnVlKTsKCQlzZWFyY2hfaXRlbV9jaGlsZC50ZXh0Q29udGVudCA9IGk7CgkJc2VhcmNoX2l0ZW1fY2hpbGQuc2V0QXR0cmlidXRlKCdzZWFyY2gtb3B0aW9uJywgaSk7CgkJc2VhcmNoX3BhbmVsLmFwcGVuZENoaWxkKHNlYXJjaF9pdGVtX2NoaWxkKTsKCX0KCXNlYXJjaF9pdGVtLnRleHRDb250ZW50ID0gJ0FsbCc7CglzZWFyY2hfaXRlbS5zZXRBdHRyaWJ1dGUoJ3NlYXJjaC1vcHRpb24nLCAnYWxsJyk7CglzZWFyY2hfcGFuZWwuYXBwZW5kQ2hpbGQoc2VhcmNoX2l0ZW0pOwoJdmFyIHNlYXJjaF9pdGVtX3NldHRpbmcgPSBzZWFyY2hfaXRlbS5jbG9uZU5vZGUodHJ1ZSk7CglzZWFyY2hfaXRlbV9zZXR0aW5nLnRleHRDb250ZW50ID0gJ1NldHRpbmcnOwoJc2VhcmNoX2l0ZW1fc2V0dGluZy5zZXRBdHRyaWJ1dGUoJ3NlYXJjaC1vcHRpb24nLCAnc2V0dGluZycpOwoJc2VhcmNoX3BhbmVsLmFwcGVuZENoaWxkKHNlYXJjaF9pdGVtX3NldHRpbmcpOwoJc2VhcmNoX3RvcC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKVswXS5vbmNoYW5nZSA9IGZ1bmN0aW9uKCkgewoJCXJlYWRlci5yZWFkQXNEYXRhVVJMKHRoaXMuZmlsZXNbMF0pOwoJfTsKCXNlYXJjaF9wYW5lbC5vbmRyYWdlbnRlciA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQlzZWFyY2hfdG9wLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdsYWJlbCcpWzBdLnRleHRDb250ZW50ID0gaTE4bltsYW5nXVsnZGgnXTsKCX07CglzZWFyY2hfcGFuZWwub25kcmFnbGVhdmUgPSBmdW5jdGlvbihldmVudCkgewoJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJc2VhcmNoX3RvcC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbGFiZWwnKVswXS50ZXh0Q29udGVudCA9IGkxOG5bbGFuZ11bJ3UycyddOwoJfTsKCXNlYXJjaF9wYW5lbC5vbmRyYWdvdmVyID0gZnVuY3Rpb24oZXZlbnQpIHsKCQlzZWFyY2hfdG9wLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdsYWJlbCcpWzBdLnRleHRDb250ZW50ID0gaTE4bltsYW5nXVsnZGgnXTsKCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJfTsKCXNlYXJjaF9wYW5lbC5vbmRyb3AgPSBmdW5jdGlvbihldmVudCkgewoJCWV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwoJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJdmFyIGZpbGVzID0gZXZlbnQudGFyZ2V0LmZpbGVzIHx8IGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlczsKCQlpZiAoZmlsZXNbZmlsZXMubGVuZ3RoIC0gMV0udHlwZS5pbmRleE9mKCdpbWFnZScpID49IDApIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGVzW2ZpbGVzLmxlbmd0aCAtIDFdKTsKCX07CglzZWFyY2hfdG9wLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdwcm9ncmVzcycpWzBdLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKCQlpZiAoeGhyLnJlYWR5U3RhdGUgIT0gMCAmJiBjb25maXJtKGkxOG5bbGFuZ11bJ2NhJ10pID09IHRydWUpIHsKCQkJeGhyLmFib3J0KCk7CgkJCXNlYXJjaF9wYW5lbC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzZWFyY2hfdG9wX3VybCcpWzBdLnN0eWxlLm1hcmdpblRvcCA9ICctMjRweCc7CgkJfQoJfTsKCWlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSA+PSAwKSB7CgkJdmFyIHBhc3RlX25vZGVfZmlyZWZveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwoJCXBhc3RlX25vZGVfZmlyZWZveC5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScsICd0cnVlJyk7CgkJcGFzdGVfbm9kZV9maXJlZm94LmNsYXNzTmFtZSA9ICdpbWFnZS1zZWFyY2gtcGFzdGUtbm9kZS1maXJlZm94JzsKCQlwYXN0ZV9ub2RlX2ZpcmVmb3guc3R5bGUuY3NzVGV4dCA9ICd3aWR0aDogMCFpbXBvcnRhbnQ7IGhlaWdodDogMCFpbXBvcnRhbnQ7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgb3ZlcmZsb3c6IGhpZGRlbjsnOwoJCXBhc3RlX25vZGVfZmlyZWZveC5hZGRFdmVudExpc3RlbmVyKCdwYXN0ZScsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCXNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQl2YXIgX2ltYWdlcyA9IHBhc3RlX25vZGVfZmlyZWZveC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW1nJyk7CgkJCQlpZiAoX2ltYWdlcy5sZW5ndGggPiAwKSB7CgkJCQkJdmFyIF9pbWdfc3JjID0gX2ltYWdlc1tfaW1hZ2VzLmxlbmd0aCAtIDFdLnNyYzsKCQkJCQlpZiAoX2ltZ19zcmMubWF0Y2goL15kYXRhOlxzKi4qPztccypiYXNlNjQsXHMqLykpIHVwbG9hZF9maWxlKF9pbWdfc3JjKTsKCQkJCX0KCQkJfSwgNTAwKTsKCQl9LCBmYWxzZSk7CgkJc2VhcmNoX3RvcC5hcHBlbmRDaGlsZChwYXN0ZV9ub2RlX2ZpcmVmb3gpOwoJfQp9CgpmdW5jdGlvbiBjYWxsX3NldHRpbmcoKSB7Cgl2YXIgc2V0dGluZ19wYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwoJc2V0dGluZ19wYW5lbC5zdHlsZS5jc3NUZXh0ID0gJ3dpZHRoOiA1MjBweDsgZm9udC1zaXplOiAxNHB4OyBwb3NpdGlvbjogZml4ZWQ7IGNvbG9yOiAjMDAwOyB6LWluZGV4OiA5OTk5OTk5OTk5OyBib3gtc2hhZG93OiAycHggMnB4IDNweCByZ2JhKDAsIDAsIDAsIDAuNSk7IGJvcmRlcjogMXB4IHNvbGlkICNDQ0M7IGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC45KTsgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDJweDsgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMnB4OyBwYWRkaW5nOiAxMHB4OyBsZWZ0OiAwOyByaWdodDogMDsgdG9wOiAwOyBib3R0b206IDA7IG1hcmdpbjogYXV0bzsgZm9udC1mYW1pbHk6ICJBcmlhbCI7IGhlaWdodDogNDAwcHg7IG1heC1oZWlnaHQ6IDkwJTsgb3ZlcmZsb3c6IGF1dG87IHRleHQtYWxpZ246IGNlbnRlcjsgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsgLW1vei11c2VyLXNlbGVjdDogbm9uZTsgLW1zLXVzZXItc2VsZWN0OiBub25lOyc7Cglkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNldHRpbmdfcGFuZWwpOwoJdmFyIHNldHRpbmdfaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CglzZXR0aW5nX2hlYWRlci5zdHlsZS5jc3NUZXh0ID0gJ3dpZHRoOiAxMDAlOyBoZWlnaHQ6IDMycHg7IGxpbmUtaGVpZ2h0OiAzMnB4OyBmb250LXNpemU6IDE4cHg7IGxpbmUtaGVpZ2h0OiAzMnB4Oyc7CglzZXR0aW5nX2hlYWRlci5jbGFzc05hbWUgPSAnaW1hZ2Utc2VhcmNoLXNldHRpbmctaGVhZGVyJzsKCXNldHRpbmdfaGVhZGVyLnRleHRDb250ZW50ID0gJ1NlYXJjaCBCeSBJbWFnZSBTZXR0aW5nJzsKCXNldHRpbmdfcGFuZWwuYXBwZW5kQ2hpbGQoc2V0dGluZ19oZWFkZXIpOwoJdmFyIHNldHRpbmdfaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwoJc2V0dGluZ19pdGVtLnN0eWxlLmNzc1RleHQgPSAnd2lkdGg6IDEwMCU7IGhlaWdodDogMjRweDsgbGluZS1oZWlnaHQ6IDI0cHg7IG1hcmdpbjogMXB4IDA7JzsKCXNldHRpbmdfaXRlbS5jbGFzc05hbWUgPSAnaW1hZ2Utc2VhcmNoLXNldHRpbmctdGl0bGUnOwoJc2V0dGluZ19pdGVtLmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgd2lkdGg6IDMwcHg7Ij4nICsgaTE4bltsYW5nXVsnYSddICsgJzwvZGl2PjxkaXYgc3R5bGU9IndpZHRoOiAxMDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij4nICsgaTE4bltsYW5nXVsnbiddICsgJzwvZGl2PjxkaXYgc3R5bGU9IndpZHRoOiAzNTBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij4nICsgaTE4bltsYW5nXVsnbCddICsgJzwvZGl2PjxkaXYgc3R5bGU9IndpZHRoOiAyMHB4OyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij48L2Rpdj4nOwoJc2V0dGluZ19wYW5lbC5hcHBlbmRDaGlsZChzZXR0aW5nX2l0ZW0pOwoJZm9yICh2YXIgaSBpbiBzZXR0aW5nLnNpdGVfbGlzdCkgewoJCXZhciBzZXR0aW5nX2l0ZW1fY2hpbGQgPSBzZXR0aW5nX2l0ZW0uY2xvbmVOb2RlKHRydWUpOwoJCXNldHRpbmdfaXRlbV9jaGlsZC5jbGFzc05hbWUgPSAnaW1hZ2Utc2VhcmNoLXNldHRpbmctaXRlbSc7CgkJc2V0dGluZ19pdGVtX2NoaWxkLmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgd2lkdGg6IDMwcHg7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7Ij48aW5wdXQgdHlwZT0iY2hlY2tib3giJyArIChzZXR0aW5nLnNpdGVfb3B0aW9uLmpvaW4oJ1xuJykuaW5kZXhPZihpKSA+PSAwID8gJyBjaGVja2VkPSJjaGVja2VkIicgOiAnJykgKyAnPjwvZGl2PjxkaXYgc3R5bGU9IndpZHRoOiAxMDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij48aW5wdXQgc3R5bGU9IndpZHRoOiA5MHB4OyIgdHlwZT0idGV4dCIgdmFsdWU9IicgKyBpICsgJyI+PC9kaXY+PGRpdiBzdHlsZT0id2lkdGg6IDM1MHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGRpc3BsYXk6IGlubGluZS1ibG9jazsiPjxpbnB1dCBzdHlsZT0id2lkdGg6IDM0MHB4OyIgdHlwZT0idGV4dCIgdmFsdWU9IicgKyBzZXR0aW5nLnNpdGVfbGlzdFtpXSArICciPjwvZGl2PjxkaXYgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBjdXJzb3I6IHBvaW50ZXI7IHdpZHRoOiAyMHB4OyI+w5c8L2Rpdj4nOwoJCXNldHRpbmdfcGFuZWwuYXBwZW5kQ2hpbGQoc2V0dGluZ19pdGVtX2NoaWxkKTsKCQlzZXR0aW5nX2l0ZW1fY2hpbGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2RpdicpWzNdLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKCQkJdGhpcy5wYXJlbnRFbGVtZW50Lm91dGVySFRNTCA9ICcnOwoJCX07Cgl9Cgl2YXIgc2V0dGluZ19zZXJ2ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCXNldHRpbmdfc2VydmVyLmNsYXNzTmFtZSA9ICdpbWFnZS1zZWFyY2gtc2V0dGluZy1zZXJ2ZXInOwoJc2V0dGluZ19zZXJ2ZXIuaW5uZXJIVE1MID0gJ1VwbG9hZCBTZXJ2ZXIgPGlucHV0IHR5cGU9InRleHQiIHZhbHVlPSInICsgc2V0dGluZ1snc2VydmVyX3VybCddICsgJyIgcGxhY2Vob2xkZXI9Ii8vc2JpLmNjbG9saS5jb20vaW1nL3VwbG9hZC5waHAiIHN0eWxlPSJ3aWR0aDogMzUwcHg7Ij4nOwoJc2V0dGluZ19wYW5lbC5hcHBlbmRDaGlsZChzZXR0aW5nX3NlcnZlcik7Cgl2YXIgc2V0dGluZ19mb290ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCXNldHRpbmdfZm9vdGVyLnN0eWxlLmNzc1RleHQgPSAnd2lkdGg6IDEwMCU7IGhlaWdodDogMzJweDsgbGluZS1oZWlnaHQ6IDMycHg7IG1hcmdpbi10b3A6IDVweDsgdGV4dC1hbGlnbjogcmlnaHQ7JzsKCXNldHRpbmdfZm9vdGVyLmNsYXNzTmFtZSA9ICdpbWFnZS1zZWFyY2gtc2V0dGluZy1mb290ZXInOwoJc2V0dGluZ19wYW5lbC5hcHBlbmRDaGlsZChzZXR0aW5nX2Zvb3Rlcik7Cgl2YXIgc2V0dGluZ19ob3RrZXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCXZhciBzZXR0aW5nX2FkZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwoJdmFyIHNldHRpbmdfcmVzZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCXZhciBzZXR0aW5nX3NhdmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCXZhciBzZXR0aW5nX2NhbmNlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwoJc2V0dGluZ19ob3RrZXkuc3R5bGUuY3NzVGV4dCA9ICdoZWlnaHQ6IDMycHg7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgdGV4dC1hbGlnbjogbGVmdDsgZmxvYXQ6IGxlZnQ7JzsKCXNldHRpbmdfYWRkLnN0eWxlLmNzc1RleHQgPSAnd2lkdGg6IDkwcHg7IGhlaWdodDogMzJweDsgbWFyZ2luOiAwIDVweDsgYmFja2dyb3VuZDogIzY2NjsgY29sb3I6ICNGRkY7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgdGV4dC1hbGlnbjogY2VudGVyOyBjdXJzb3I6IHBvaW50ZXI7JzsKCXNldHRpbmdfcmVzZXQuc3R5bGUuY3NzVGV4dCA9ICd3aWR0aDogOTBweDsgaGVpZ2h0OiAzMnB4OyBiYWNrZ3JvdW5kOiAjNjY2OyBjb2xvcjogI0ZGRjsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGN1cnNvcjogcG9pbnRlcjsnOwoJc2V0dGluZ19zYXZlLnN0eWxlLmNzc1RleHQgPSAnd2lkdGg6IDkwcHg7IGhlaWdodDogMzJweDsgbWFyZ2luOiAwIDVweDsgYmFja2dyb3VuZDogIzY2NjsgY29sb3I6ICNGRkY7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgdGV4dC1hbGlnbjogY2VudGVyOyBjdXJzb3I6IHBvaW50ZXI7JzsKCXNldHRpbmdfY2FuY2VsLnN0eWxlLmNzc1RleHQgPSAnd2lkdGg6IDkwcHg7IGhlaWdodDogMzJweDsgYmFja2dyb3VuZDogIzY2NjsgY29sb3I6ICNGRkY7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgdGV4dC1hbGlnbjogY2VudGVyOyBjdXJzb3I6IHBvaW50ZXI7JzsKCXNldHRpbmdfYWRkLnRleHRDb250ZW50ID0gaTE4bltsYW5nXVsnc2EnXTsKCXNldHRpbmdfcmVzZXQudGV4dENvbnRlbnQgPSBpMThuW2xhbmddWydzciddOwoJc2V0dGluZ19zYXZlLnRleHRDb250ZW50ID0gaTE4bltsYW5nXVsnc3MnXTsKCXNldHRpbmdfY2FuY2VsLnRleHRDb250ZW50ID0gaTE4bltsYW5nXVsnc2MnXTsKCXNldHRpbmdfaG90a2V5LmlubmVySFRNTCA9IGkxOG5bbGFuZ11bJ3NoJ10gKyAnIDxzZWxlY3Q+PG9wdGlvbiB2YWx1ZT0iY3RybEtleSInICsgKHNldHRpbmcuaG90X2tleSA9PSAnY3RybEtleScgPyAnIHNlbGVjdGVkJyA6ICcnKSArICc+Q3RybDwvb3B0aW9uPjxvcHRpb24gdmFsdWU9InNoaWZ0S2V5IicgKyAoc2V0dGluZy5ob3Rfa2V5ID09ICdzaGlmdEtleScgPyAnIHNlbGVjdGVkJyA6ICcnKSArICc+U2hpZnQ8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJhbHRLZXkiJyArIChzZXR0aW5nLmhvdF9rZXkgPT0gJ2FsdEtleScgPyAnIHNlbGVjdGVkJyA6ICcnKSArICc+QWx0PC9vcHRpb24+PC9zZWxlY3Q+JzsKCXNldHRpbmdfZm9vdGVyLmFwcGVuZENoaWxkKHNldHRpbmdfaG90a2V5KTsKCXNldHRpbmdfZm9vdGVyLmFwcGVuZENoaWxkKHNldHRpbmdfYWRkKTsKCXNldHRpbmdfZm9vdGVyLmFwcGVuZENoaWxkKHNldHRpbmdfcmVzZXQpOwoJc2V0dGluZ19mb290ZXIuYXBwZW5kQ2hpbGQoc2V0dGluZ19zYXZlKTsKCXNldHRpbmdfZm9vdGVyLmFwcGVuZENoaWxkKHNldHRpbmdfY2FuY2VsKTsKCXNldHRpbmdfYWRkLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKCQl2YXIgc2V0dGluZ19pdGVtX2NoaWxkID0gc2V0dGluZ19pdGVtLmNsb25lTm9kZSh0cnVlKTsKCQlzZXR0aW5nX2l0ZW1fY2hpbGQuY2xhc3NOYW1lID0gJ2ltYWdlLXNlYXJjaC1zZXR0aW5nLWl0ZW0nOwoJCXNldHRpbmdfaXRlbV9jaGlsZC5pbm5lckhUTUwgPSAnPGRpdiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdpZHRoOiAzMHB4OyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyI+PGlucHV0IHR5cGU9ImNoZWNrYm94Ij48L2Rpdj48ZGl2IHN0eWxlPSJ3aWR0aDogMTAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgZGlzcGxheTogaW5saW5lLWJsb2NrOyI+PGlucHV0IHN0eWxlPSJ3aWR0aDogOTBweDsiIHR5cGU9InRleHQiPjwvZGl2PjxkaXYgc3R5bGU9IndpZHRoOiAzNTBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij48aW5wdXQgc3R5bGU9IndpZHRoOiAzNDBweDsiIHR5cGU9InRleHQiPjwvZGl2PjxkaXYgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBjdXJzb3I6IHBvaW50ZXI7IHdpZHRoOiAyMHB4OyI+w5c8L2Rpdj4nOwoJCXNldHRpbmdfcGFuZWwuaW5zZXJ0QmVmb3JlKHNldHRpbmdfaXRlbV9jaGlsZCwgc2V0dGluZ19mb290ZXIpOwoJCXNldHRpbmdfaXRlbV9jaGlsZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZGl2JylbM10ub25jbGljayA9IGZ1bmN0aW9uKCkgewoJCQl0aGlzLnBhcmVudEVsZW1lbnQub3V0ZXJIVE1MID0gJyc7CgkJfTsKCQlzZXR0aW5nX3BhbmVsLnNjcm9sbFRvcCA9IHNldHRpbmdfcGFuZWwuc2Nyb2xsSGVpZ2h0OwoJfTsKCXNldHRpbmdfcmVzZXQub25jbGljayA9IGZ1bmN0aW9uKCkgewoJCWlmIChjb25maXJtKGkxOG5bbGFuZ11bJ2NyJ10pID09IHRydWUpIHsKCQkJc2V0dGluZyA9IGRlZmF1bHRfc2V0dGluZzsKCQkJc2V0X3NldHRpbmcoc2V0dGluZyk7CgkJCXNldHRpbmdfcGFuZWwub3V0ZXJIVE1MID0gJyc7CgkJCWlmIChzZWFyY2hfcGFuZWwgIT0gbnVsbCkgewoJCQkJc2VhcmNoX3BhbmVsLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoc2VhcmNoX3BhbmVsKTsKCQkJCXNlYXJjaF9wYW5lbCA9IG51bGw7CgkJCX0KCQkJY2FsbF9zZXR0aW5nKCk7CgkJfQoJfTsKCXNldHRpbmdfc2F2ZS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7CgkJdmFyIHNldHRpbmdfaXRlbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdpbWFnZS1zZWFyY2gtc2V0dGluZy1pdGVtJyk7CgkJdmFyIHNldHRpbmdfZGF0YSA9IHsKCQkJInNpdGVfbGlzdCI6IHt9LAoJCQkic2l0ZV9vcHRpb24iOiBbXSwKCQkJImhvdF9rZXkiOiBudWxsLAoJCQkic2VydmVyX3VybCI6IG51bGwKCQl9OwoJCWZvciAodmFyIGkgPSAwOyBpIDwgc2V0dGluZ19pdGVtcy5sZW5ndGg7IGkrKykgewoJCQlpZiAoc2V0dGluZ19pdGVtc1tpXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKVsxXS52YWx1ZSAhPSAnJykgewoJCQkJaWYgKHNldHRpbmdfaXRlbXNbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0JylbMF0uY2hlY2tlZCkgc2V0dGluZ19kYXRhLnNpdGVfb3B0aW9uLnB1c2goc2V0dGluZ19pdGVtc1tpXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKVsxXS52YWx1ZSk7CgkJCQlzZXR0aW5nX2RhdGEuc2l0ZV9saXN0W3NldHRpbmdfaXRlbXNbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0JylbMV0udmFsdWVdID0gc2V0dGluZ19pdGVtc1tpXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKVsyXS52YWx1ZTsKCQkJfQoJCX0KCQlzZXR0aW5nX2RhdGEuaG90X2tleSA9IHNldHRpbmdfaG90a2V5LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzZWxlY3QnKVswXS52YWx1ZTsKCQlzZXR0aW5nX2RhdGEuc2VydmVyX3VybCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2ltYWdlLXNlYXJjaC1zZXR0aW5nLXNlcnZlcicpWzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpWzBdLnZhbHVlOwoJCWlmIChzZXR0aW5nX2RhdGEuc2VydmVyX3VybCA9PSBudWxsIHx8IHNldHRpbmdfZGF0YS5zZXJ2ZXJfdXJsID09ICcnKSB7CgkJCXNldHRpbmdfZGF0YS5zZXJ2ZXJfdXJsID0gZGVmYXVsdF9zZXR0aW5nLnNlcnZlcl91cmw7CgkJfQoJCXNldHRpbmcgPSBzZXR0aW5nX2RhdGE7CgkJc2VydmVyX3VybCA9IHNldHRpbmcuc2VydmVyX3VybDsKCQljb25zb2xlLmxvZyhzZXR0aW5nX2RhdGEpOwoJCXNldF9zZXR0aW5nKHNldHRpbmcpOwoJCXNldHRpbmdfcGFuZWwub3V0ZXJIVE1MID0gJyc7CgkJaWYgKHNlYXJjaF9wYW5lbCAhPSBudWxsKSB7CgkJCXNlYXJjaF9wYW5lbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHNlYXJjaF9wYW5lbCk7CgkJCXNlYXJjaF9wYW5lbCA9IG51bGw7CgkJfQoJfTsKCXNldHRpbmdfY2FuY2VsLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKCQlzZXR0aW5nX3BhbmVsLm91dGVySFRNTCA9ICcnOwoJfTsKfQoKZnVuY3Rpb24gdXBsb2FkX2ZpbGUoZGF0YSkgewoJaWYgKHhoci5yZWFkeVN0YXRlICE9IDApIHhoci5hYm9ydCgpOwoJeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewoJCWlmICh4aHIucmVhZHlTdGF0ZSA9PSA0KSB7CgkJCWlmICh4aHIuc3RhdHVzID09IDIwMCkgewoJCQkJaW1nX3NyYyA9IHhoci5yZXNwb25zZVRleHQ7CgkJCQlzZWFyY2hfcGFuZWwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2VhcmNoX3RvcF91cmwnKVswXS5zdHlsZS5tYXJnaW5Ub3AgPSAnMHB4JzsKCQkJCXNlYXJjaF9wYW5lbC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzZWFyY2hfdG9wX3VybCcpWzBdLnRleHRDb250ZW50ID0gaTE4bltsYW5nXVsndXMnXTsKCQkJfQoJCX0KCX07Cgl4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbihldmVudCkgewoJCXNlYXJjaF9wYW5lbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgncHJvZ3Jlc3MnKVswXS52YWx1ZSA9IGV2ZW50LmxvYWRlZCAvIGV2ZW50LnRvdGFsOwoJfTsKCXhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7CgkJYWxlcnQoaTE4bltsYW5nXVsndWYnXSk7Cgl9OwoJdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKTsKCXhoci5vcGVuKCdQT1NUJywgc2VydmVyX3VybCk7Cglmb3JtLmFwcGVuZCgnaW1nZGF0YScsIGRhdGEpOwoJeGhyLnNlbmQoZm9ybSk7CglzZWFyY2hfcGFuZWwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2VhcmNoX3RvcF91cmwnKVswXS5zdHlsZS5tYXJnaW5Ub3AgPSAnLTQ4cHgnOwp9CgpmdW5jdGlvbiBnZXRfY2xpcGJvYXJkKGV2ZW50KSB7Cgl2YXIgaXRlbXMgPSBldmVudC5jbGlwYm9hcmREYXRhLml0ZW1zOwoJaWYgKGl0ZW1zW2l0ZW1zLmxlbmd0aCAtIDFdLnR5cGUuaW5kZXhPZignaW1hZ2UnKSA+PSAwKSByZWFkZXIucmVhZEFzRGF0YVVSTChpdGVtc1tpdGVtcy5sZW5ndGggLSAxXS5nZXRBc0ZpbGUoKSk7Cn0KCmZ1bmN0aW9uIGhpZGVfcGFuZWwoKSB7CglpZiAoIXNlYXJjaF9wYW5lbCB8fCAhc2VhcmNoX3BhbmVsLnBhcmVudEVsZW1lbnQpIHJldHVybjsKCWltZ19zcmMgPSBudWxsOwoJc2VhcmNoX3BhbmVsLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoc2VhcmNoX3BhbmVsKTsgLy8gUmVtb3ZlIHNlYXJjaCBwYW5lbCB0byBmaXggdGhlIGJ1ZyB0aGF0IGl0IG1heSBiZSBsZWZ0IGluIHNvbWUgV1lTSVdZRyBlZGl0b3IgKGVnLiBNRE4gV1lTSVdZRyBlZGl0b3IpLiBTZWUgaXNzdWU6IGh0dHA6Ly90aWViYS5iYWlkdS5jb20vcC8zNjgyNDc1MDYxCglkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwYXN0ZScsIGdldF9jbGlwYm9hcmQsIGZhbHNlKTsKfQoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZnVuY3Rpb24oZXZlbnQpIHsKCS8vY29uc29sZS5sb2coJ1NlYXJjaCBJbWFnZSA+PlxuZXZlbnQuY3RybEtleTogJytldmVudC5jdHJsS2V5KydcbmV2ZW50LmJ1dHRvbjogJytldmVudC5idXR0b24rJ1xuZXZlbnQudGFyZ2V0OicrZXZlbnQudGFyZ2V0KydcbmV2ZW50LnRhcmdldC50YWdOYW1lOiAnK2V2ZW50LnRhcmdldC50YWdOYW1lKydcbmV2ZW50LnRhcmdldC5zcmM6ICcrZXZlbnQudGFyZ2V0LnNyYysnXG5ldmVudC5wYWdlWDogJytldmVudC5wYWdlWCsnXG5ldmVudC5wYWdlWTogJytldmVudC5wYWdlWSsnXG5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg6ICcrZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKydcbmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ6ICcrZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCsnXG5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGg6ICcrZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoKydcbmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQ6ICcrZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCsnXG5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdDogJytkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCsnXG5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wOiAnK2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApOwoJaWYgKGRpc2FibGVfY29udGV4dG1lbnUgPT0gdHJ1ZSkgewoJCWRvY3VtZW50Lm9uY29udGV4dG1lbnUgPSBudWxsOwoJCWRpc2FibGVfY29udGV4dG1lbnUgPSBmYWxzZTsKCX0KCWlmIChldmVudFtzZXR0aW5nLmhvdF9rZXldID09IHRydWUgJiYgZXZlbnQuYnV0dG9uID09IDIpIHsKCQlpZiAoc2VhcmNoX3BhbmVsID09IG51bGwpIGNyZWF0ZV9wYW5lbCgpOwoJCWVsc2UgaWYgKGxhc3RfdXBkYXRlICE9IEdNX2dldFZhbHVlKCd0aW1lc3RhbXAnLCAwKSkgewoJCQlsYXN0X3VwZGF0ZSA9IEdNX2dldFZhbHVlKCd0aW1lc3RhbXAnLCAwKTsKCQkJc2VhcmNoX3BhbmVsLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoc2VhcmNoX3BhbmVsKTsKCQkJc2V0dGluZyA9IEdNX2dldFZhbHVlKCdzZXR0aW5nJykgPyBKU09OLnBhcnNlKEdNX2dldFZhbHVlKCdzZXR0aW5nJykpIDogZGVmYXVsdF9zZXR0aW5nOwoJCQljcmVhdGVfcGFuZWwoKTsKCQl9CgkJZWxzZSBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNlYXJjaF9wYW5lbCk7CgkJc2VhcmNoX3BhbmVsLnN0eWxlLmxlZnQgPSAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldFdpZHRoICsgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCkgLSBldmVudC5wYWdlWCA+PSAyMDAgPyBldmVudC5wYWdlWCA6IGV2ZW50LnBhZ2VYID49IDIwMCA/IGV2ZW50LnBhZ2VYIC0gMjAwIDogMCkgKyAncHgnOwoJCXNlYXJjaF9wYW5lbC5zdHlsZS50b3AgPSAoZXZlbnQucGFnZVkgKyBzZWFyY2hfcGFuZWwub2Zmc2V0SGVpZ2h0IDwgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCA/IGV2ZW50LnBhZ2VZIDogZXZlbnQucGFnZVkgPj0gc2VhcmNoX3BhbmVsLnNjcm9sbEhlaWdodCA/IGV2ZW50LnBhZ2VZIC0gc2VhcmNoX3BhbmVsLm9mZnNldEhlaWdodCA6IDApICsgJ3B4JzsKCQkvLyBGaXJlZm94IGRvZXNuJ3Qgc3VwcG9ydCBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLm1hcmdpbkxlZnQvbWFyZ2luUmlnaHQgYW5kIGl0IHdvdWxkIHJldHVybiAiMHB4IiB3aGlsZSB0aGUgZWxlbWVudCdzIG1hcmdpbiBpcyAiYXV0byIuIFNlZSBidWd6aWxhLzM4MTMyOC4KCQkvL3NlYXJjaF9wYW5lbC5zdHlsZS5tYXJnaW5MZWZ0ID0gJy0nICsgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpIDwgMCA/IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkubWFyZ2luTGVmdCA6IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0V2lkdGggLSBkb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoKSAvIDIgKyAncHgnKTsKCQkvL3NlYXJjaF9wYW5lbC5zdHlsZS5tYXJnaW5Ub3AgPSAnLScgKyBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLm1hcmdpblRvcDsKCQlkaXNhYmxlX2NvbnRleHRtZW51ID0gdHJ1ZTsKCQlkb2N1bWVudC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9OwoJCWlmIChldmVudC50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09ICdpbWcnICYmIGV2ZW50LnRhcmdldC5zcmMgIT0gbnVsbCkgewoJCQlzZWFyY2hfcGFuZWwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2VhcmNoX3RvcF91cmwnKVswXS5zdHlsZS5tYXJnaW5Ub3AgPSAnMHB4JzsKCQkJc2VhcmNoX3BhbmVsLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NlYXJjaF90b3BfdXJsJylbMF0udGV4dENvbnRlbnQgPSBldmVudC50YXJnZXQuc3JjOwoJCQlpZiAoZXZlbnQudGFyZ2V0LnNyYy5tYXRjaCgvXmRhdGE6XHMqLio/O1xzKmJhc2U2NCxccyovKSAhPSBudWxsKSB1cGxvYWRfZmlsZShldmVudC50YXJnZXQuc3JjKTsKCQkJZWxzZSBpbWdfc3JjID0gZXZlbnQudGFyZ2V0LnNyYzsKCQl9CgkJZWxzZSB7CgkJCXNlYXJjaF9wYW5lbC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzZWFyY2hfdG9wX3VybCcpWzBdLnN0eWxlLm1hcmdpblRvcCA9ICctMjRweCc7CgkJCWlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSA+PSAwKSB7CgkJCQlkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdpbWFnZS1zZWFyY2gtcGFzdGUtbm9kZS1maXJlZm94JylbMF0uaW5uZXJIVE1MID0gJyc7CgkJCQlkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdpbWFnZS1zZWFyY2gtcGFzdGUtbm9kZS1maXJlZm94JylbMF0uZm9jdXMoKTsKCQkJfQoJCQllbHNlIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgZ2V0X2NsaXBib2FyZCwgZmFsc2UpOwoJCX0KCX0KCWVsc2UgaWYgKHNlYXJjaF9wYW5lbCAhPSBudWxsKSB7CgkJaWYgKGV2ZW50LnRhcmdldC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihzZWFyY2hfcGFuZWwpID09IDEwIHx8IGV2ZW50LnRhcmdldC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihzZWFyY2hfcGFuZWwpID09IDApIHsKCQkJaWYgKGV2ZW50LnRhcmdldC5jbGFzc05hbWUgPT0gJ2ltYWdlLXNlYXJjaC1pdGVtJyAmJiBldmVudC5idXR0b24gPT0gMCkgewoJCQkJc3dpdGNoIChldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdzZWFyY2gtb3B0aW9uJykpIHsKCQkJCQljYXNlICdhbGwnOgoJCQkJCQlpZiAoaW1nX3NyYyAhPSBudWxsKSB7CgkJCQkJCQlmb3IgKHZhciBpID0gc2V0dGluZy5zaXRlX29wdGlvbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgR01fb3BlbkluVGFiKHNldHRpbmcuc2l0ZV9saXN0W3NldHRpbmcuc2l0ZV9vcHRpb25baV1dLnJlcGxhY2UoL1x7JXNcfS8sIGVuY29kZVVSSUNvbXBvbmVudChpbWdfc3JjKSksIGV2ZW50W3NldHRpbmcuaG90X2tleV0pOwoJCQkJCQkJaGlkZV9wYW5lbCgpOwoJCQkJCQl9CgkJCQkJCWJyZWFrOwoJCQkJCWNhc2UgJ3NldHRpbmcnOgoJCQkJCQljYWxsX3NldHRpbmcoKTsKCQkJCQkJaGlkZV9wYW5lbCgpOwoJCQkJCQlicmVhazsKCQkJCQlkZWZhdWx0OgoJCQkJCQlpZiAoaW1nX3NyYyAhPSBudWxsKSB7CgkJCQkJCQlHTV9vcGVuSW5UYWIoc2V0dGluZy5zaXRlX2xpc3RbZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnc2VhcmNoLW9wdGlvbicpXS5yZXBsYWNlKC9ceyVzXH0vLCBlbmNvZGVVUklDb21wb25lbnQoaW1nX3NyYykpLCBldmVudFtzZXR0aW5nLmhvdF9rZXldKTsKCQkJCQkJCWhpZGVfcGFuZWwoKTsKCQkJCQkJfQoJCQkJfQoJCQl9CgkJCWVsc2UgaWYgKGV2ZW50LmJ1dHRvbiAhPSAwKSBoaWRlX3BhbmVsKCk7CgkJfQoJCWVsc2UgaGlkZV9wYW5lbCgpOwoJfQp9LCB0cnVlKTsKCnZhciBnbV9jYWxsc2V0dGluZyA9IEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQoJ1NlYXJjaCBCeSBJbWFnZSBTZXR0aW5nJywgY2FsbF9zZXR0aW5nKTsK"},{"name":"网盘自动填写密码【增强版】","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":["http*://*.pcs.baidu.com/*","http*://*.baidupcs.com/*","http*://*:8666/file/*","http*://*.baidu.com/file/*","http*://index.baidu.com/*","http*://*.gov/*","http*://*.gov.cn/*","http*://*.taobao.com/*","http*://*.tmall.com/*","http*://*.alimama.com/*","http*://*.jd.com/*","http://*.ctrip.com/*","https://*.evernote.com/*","https://*.yinxiang.com/*","/^https?://(localhost|10\\.|192\\.|127\\.)/","/https?://www.baidu.com/(?:s|baidu)\\?/","http*://www.zhihu.com/question/*/answers/created"],"orig_includes":["http://*","https://*","http://pan.baidu.com/s/*","http://eyun.baidu.com/s/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1492505332250},"enabled":true,"position":2,"file_url":"https://greasyfork.org/scripts/13463-%E7%BD%91%E7%9B%98%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%86%99%E5%AF%86%E7%A0%81-%E5%A2%9E%E5%BC%BA%E7%89%88/code/%E7%BD%91%E7%9B%98%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%86%99%E5%AF%86%E7%A0%81%E3%80%90%E5%A2%9E%E5%BC%BA%E7%89%88%E3%80%91.user.js","uuid":"be95535f-2464-41f9-920d-3d06ec958d2d","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgCQkJ572R55uY6Ieq5Yqo5aGr5YaZ5a+G56CB44CQ5aKe5by654mI44CRCi8vIEBkZXNjcmlwdGlvbgkJ572R55uY6Ieq5Yqo5aGr5YaZ5o+Q5Y+W5a+G56CB44CQ5aKe5by654mI44CRK+e9keebmOi2hemTvuaOpeS4juaPkOWPlueggeiejeWQiOOAggovLyBAYXV0aG9yCQkJ5p6B5ZOB5bCP54yrCi8vIEBuYW1lc3BhY2UgICAJaHR0cDovL3d3dy5jbmJsb2dzLmNvbS9oa21oZC8KLy8gQGhvbWVwYWdlCQlodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvMTM0NjMKLy8gQHN1cHBvcnRVUkwJCWh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy8xMzQ2My9mZWVkYmFjawovLyBAdmVyc2lvbgkJCTIuNS4yLjQKLy8gQGRhdGUJCQkyMDE1LjEwLjMwCi8vIEBtb2RpZmllZAkJMjAxNy4wNy4xOQovLyAKLy8g5pSv5oyB55qE572R55uYCi8vIEBpbmNsdWRlICAgICAJaHR0cDovLyoKLy8gQGluY2x1ZGUJCQlodHRwczovLyoKLy8gQGluY2x1ZGUJCQlodHRwOi8vcGFuLmJhaWR1LmNvbS9zLyoKLy8gQGluY2x1ZGUJCQlodHRwOi8vZXl1bi5iYWlkdS5jb20vcy8qCi8vIAovLyDnmb3lkI3ljZUKLy8gQGV4Y2x1ZGUJCQlodHRwKjovLyoucGNzLmJhaWR1LmNvbS8qCi8vIEBleGNsdWRlCQkJaHR0cCo6Ly8qLmJhaWR1cGNzLmNvbS8qCi8vIEBleGNsdWRlCQkJaHR0cCo6Ly8qOjg2NjYvZmlsZS8qCi8vIEBleGNsdWRlCQkJaHR0cCo6Ly8qLmJhaWR1LmNvbS9maWxlLyoKLy8gQGV4Y2x1ZGUJCQlodHRwKjovL2luZGV4LmJhaWR1LmNvbS8qCi8vIAovLyBAZXhjbHVkZQkJCWh0dHAqOi8vKi5nb3YvKgovLyBAZXhjbHVkZQkJCWh0dHAqOi8vKi5nb3YuY24vKgovLyBAZXhjbHVkZQkJCWh0dHAqOi8vKi50YW9iYW8uY29tLyoKLy8gQGV4Y2x1ZGUJCQlodHRwKjovLyoudG1hbGwuY29tLyoKLy8gQGV4Y2x1ZGUJCQlodHRwKjovLyouYWxpbWFtYS5jb20vKgovLyBAZXhjbHVkZQkJCWh0dHAqOi8vKi5qZC5jb20vKgovLyBAZXhjbHVkZQkJCWh0dHA6Ly8qLmN0cmlwLmNvbS8qCi8vIEBleGNsdWRlCQkJaHR0cHM6Ly8qLmV2ZXJub3RlLmNvbS8qCi8vIEBleGNsdWRlCQkJaHR0cHM6Ly8qLnlpbnhpYW5nLmNvbS8qCi8vIEBleGNsdWRlCQkJL15odHRwcz86Ly8obG9jYWxob3N0fDEwXC58MTkyXC58MTI3XC4pLwovLyBAZXhjbHVkZQkJCS9odHRwcz86Ly93d3cuYmFpZHUuY29tLyg/OnN8YmFpZHUpXD8vCi8vIEBleGNsdWRlCQkJaHR0cCo6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLyovYW5zd2Vycy9jcmVhdGVkCi8vCi8vIHJlcXVpcmUJCQlodHRwOi8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0yLjEuNC5taW4uanMKLy8gQHJlcXVpcmUJCQlodHRwOi8vY2RuLnN0YXRpY2ZpbGUub3JnL2pxdWVyeS8yLjEuNC9qcXVlcnkubWluLmpzCi8vIEBncmFudAkJCXVuc2FmZVdpbmRvdwovLyBAZW5jb2RpbmcJCXV0Zi04Ci8vIEBydW4tYXQJCQlkb2N1bWVudC1pZGxlCi8vID09L1VzZXJTY3JpcHQ9PQoKdmFyIHVybHM9bG9jYXRpb24uaHJlZjsKdmFyIGhhc2g9bG9jYXRpb24uaGFzaDsKdmFyIGhvc3Q9bG9jYXRpb24uaG9zdG5hbWUucmVwbGFjZSgvXnd3d1wuL2ksJycpLnRvTG93ZXJDYXNlKCk7CnZhciBwYXRocz1sb2NhdGlvbi5wYXRobmFtZS50b0xvd2VyQ2FzZSgpOwp1bnNhZmVXaW5kb3cuZXZlID0gRXZlbnQ7CgovKgogKiDmm7TmlrDml6Xlv5cKICogMi41LjIuMwogKiAx44CBTUFE57Sg5p2Q5bqT77yIbWFkc2NrLmNvbe+8ieWvhueggeiejeWQiOeJueauiuaUr+aMgQogKiAy44CB5L+u5aSNIGh1aHVwYW4uY29tIOeahOWvhueggeiejeWQiOaUr+aMgQogKgogKiAyLjUuMi4yCiAqIDHjgIHliKDpmaTnn6XkuY7ot7Povazpk77lpITnkIbku6PnoIEKICoKICogMi41LjIuMQogKiAx44CB6K6v5b2x572R77yIeHVueWluZ3dhbmcuY29t77yJ5a+G56CB6J6N5ZCI5aSE55CGCiAqIDLjgIHmiLfmiLfnm5jvvIhodWh1cGFuLmNvbe+8ieWvhueggeiejeWQiOWkhOeQhgogKiAKICogMi41LjEKICogMeOAgeaugea8gumBpe+8iHNoYW9pdC5jb23vvInlr4bnoIHono3lkIjlpITnkIbmlLnov5sKICogCiAqIDIuNS4wCiAqIDHjgIHmj5DljYflr4bnoIHono3lkIjog73lipsKICogCiAqIDIuNC4yIOOAkDIwMTYuMTAuMDXjgJEKICogMeOAgeaugea8gumBpe+8iHNoYW9pdC5jb23vvInlr4bnoIHono3lkIjlpITnkIYKICogMuOAgXJlaW11Lm5ldCDlr4bnoIHono3lkIjlpITnkIYKICogM+OAgeS/ruWkjeKAnOi3s+i9rOmTvuWkhOeQhuKAneW9seWTjeeZvuW6puS8geS4muebmOaXoOazleiuv+mXrumXrumimAogKiAKICogMi40LjEuMiDjgJAyMDE2LjA5LjI444CRCiAqIDHjgIHlop7liqAgc2lqaWh1aXN1by5jbHViIOeahOi3s+i9rOmTvuWkhOeQhgogKiAy44CB5aKe5Yqg5pys5ZywSVDnmb3lkI3ljZUKICogCiAqIDIuNC4xLjEg44CQMjAxNi4wOS4yMeOAkQogKiAx44CB5aKe5Yqg5pC656iL572R55m95ZCN5Y2VCiAqIAogKiAyLjQuMSDjgJAyMDE2LjA5LjIx44CRCiAqIDHjgIHmlK/mjIHkuIDkupvnibnmrornvZHnq5nnmoTlr4bnoIHono3lkIjpooTlpITnkIYKICogMuOAgeaUr+aMgeeZvuW6puS8geS4muS6keeahOWvhueggeiHquWKqOaPkOS6pO+8iOS8geS4muebmOeahOWvhueggeS4ujR+MTTkvY3vvIkKICogM+OAgeaUr+aMgSB3d3cuMGRheWt1LmNvbSDnmoTmj5Dlj5bnoIHlhbPplK7lrZfigJxFeHRyYWN0ZWQtY29kZeKAnQogKiAKICogMi4zLjMg44CQMjAxNi4wOC4wOOOAkQogKiAx44CB55+l5LmO6Lez6L2s6ZO+6aKE5aSE55CGCiAqIAogKiAyLjMuMiDjgJAyMDE2LjA4LjA044CRCiAqIDHjgIHmgaLlpI3mj5Dlj5bnoIHkuK3nmoTigJzlr4bnoIHigJ3lhbPplK7lrZfvvIjpgILnlKjkuo7vvJrlv4Pmtbdl56uZ77yJCiAqIAogKiAyLjMuMSDjgJAyMDE2LjA4LjAz44CRCiAqIDHjgIHlop7liqDlvq7kupHnvZHnm5jmj5Dlj5bnoIHmlK/mjIHvvIjljLnphY3op4TliJnmnaXoh6rljp/kvZzogIUgSml4dW4uTW9l77yJCiAqIDLjgIHkv67mraPmj5Dlj5bnoIHlhbzlrrnpl67popgKICogM+OAgeS/ruato+mHjeWkjea3u+WKoOaPkOWPlueggQogKiAKICogMi4zLjAg44CQMjAxNi4wOC4wMeOAkQogKiAx44CB56e76Zmk5a+56YeR5bGx5b+r55uY44CB5paw5rWq5LqR55uY55qE5pSv5oyBCiAqIDLjgIHnmb7luqbkvIHkuJrkupHnm5jkuI3ov73liqDpqozor4HnoIEKICogM+OAgeWPl+i0tOWQp+mhtemdoui3s+i9rOW9seWTje+8jOaaguaXtuS4jeaUr+aMgei0tOWQp+eahOWvhueggeaPkOWPlu+8jOW3suWwhui0tOWQp+WKoOWFpeeZveWQjeWNlQogKiA044CB5o+Q5Y2H6ZO+5o6lJuWvhueggeiejeWQiOeahOaIkOWKn+eOhwnigJTigJQgQSDmoIfnrb7nu5Hlrprlh73mlbDmm7TmlLnkuLogYm9keSDngrnlh7vkuovku7bnm5HlkKzvvIjmoLnmja7ljp/kvZzogIUgSml4dW4uTW9lIOeahOW7uuiuru+8iQogKiA144CB5om+5LiN5Yiw5a+G56CB5pe255qE6YGN5Y6G5pa55byP5pu05pS577yI5oSf6LCiIDEwMTM5IC0gbXVkb28g55qE5bu66K6u77yJCiAqIDbjgIHmlK/mjIHlr4bnoIHmlL7lnKjmjaLooYzooajmoLzkuK3nmoTmj5Dlj5YKKi8KCnZhciBzaXRlID0gewogICd5dW5wYW4uY24nOiB7CiAgICBjaGs6CS9eW2EtejAtOV17NH0kLywKICAgIGNvZGU6CScucHdkLWlucHV0JywKICAgIGJ0bjoJJy5zdWJtaXQtYnRuJwogIH0sCiAgJ2JhaWR1LmNvbSc6ewogICAgY2hrOgkvXlthLXowLTldezR9JC8sCiAgICBjb2RlOgknI2FjY2Vzc0NvZGUnLAogICAgYnRuOgknI3N1Ym1pdEJ0biwjZ2V0ZmlsZUJ0bicsCiAgICBQcmVQcm9jZXNzOiBmdW5jdGlvbigpIHsJLy/lt7LlpITnkIYKICAgICAgaWYoaG9zdD09J2V5dW4uYmFpZHUuY29tJyl7CS8v5aaC5p6c5Li655m+5bqm5LyB5Lia5LqR55uY77yM5YiZ5oyJ54Wn5LyB5Lia5LqR55uY55qE5pa55byP5aSE55CGCiAgICAgICAgY29uZj1zaXRlWydiYWlkdS5jb20nXT1zaXRlWydleXVuLmJhaWR1LmNvbSddOwogICAgICAgIHNpdGVbJ2JhaWR1LmNvbSddLlByZVByb2Nlc3MoKTsKICAgICAgfQogICAgfQogIH0sCiAgJ2V5dW4uYmFpZHUuY29tJzogewogICAgY2hrOgkvXlthLXowLTldezR9JC8sCiAgICBjb2RlOgknLnNoYXJlLWFjY2Vzcy1jb2RlJywKICAgIGJ0bjoJJy5nLWJ1dHRvbi1yaWdodCcsCiAgICBQcmVQcm9jZXNzOiBmdW5jdGlvbigpIHsKICAgICAgaWYoKGhhc2gmJiEvc2hhcmVsaW5rfHBhdGgvaS50ZXN0KGhhc2gpKSYmIS9lbnRlcnByaXNlLy50ZXN0KHBhdGhzKSkgewogICAgICAgIGNvbnNvbGUubG9nKCd0ZXN0Jyk7CiAgICAgICAgbG9jYXRpb24uaHJlZj1sb2NhdGlvbi5ocmVmLnJlcGxhY2UobG9jYXRpb24uaGFzaCwnJyk7CiAgICAgIH0KICAgIH0KICB9LAogICd3ZWl5dW4uY29tJzogewogICAgY2hrOiAvXlthLXowLTldezR9JC9pLAogICAgY29kZTogJyNvdXRsaW5rX3B3ZCcsCiAgICBidG46ICAnI291dGxpbmtfcHdkX29rJwogIH0sCiAgJ3B3ZFJ1bGUnIDogLyg/OuaPkOWPlnzorr/pl64pW+eggeeivF0/XHMqWzrvvJogXT9ccyooW2EtelxkXXs0fSkvLAkJCS8v5bi46KeE5a+G56CBCiAgJ2NvZGVSdWxlJyA6IC8oPzooPzrmj5Dlj5Z86K6/6ZeufOWvhlvnoIHnorxdfOiJvnxFeHRyYWN0ZWQtY29kZSlb56CB56K8XT8pXHMqWzrvvJogXT9ccyooW2EtelxkXXs0fSkvaSwJLy/lhbblroPnsbvlnovnmoTlr4bnoIEKICAvL+i3s+i9rOmTvumihOWkhOeQhgogICdKdW1wVXJsJyA6IHsKICAgICdzaWppaHVpc3VvLmNsdWInOiB7CiAgICAgIGhyZWY6ICQoJy5kb3duLXRpcCBBW2hyZWZePSJodHRwczovL3d3dy5zaWppaHVpc3VvLmNsdWIvZ28vP3VybD0iXScpLAogICAgICB1cmw6ICdodHRwczovL3d3dy5zaWppaHVpc3VvLmNsdWIvZ28vP3VybD0nCiAgICB9CiAgfSwKICAvL+WvhueggeiejeWQiOmcgOimgeeJueauiuaUr+aMgeeahOe9keermQogICdTdXBwb3J0JyA6IHsKICAgICdtYWRzY2suY29tJzp7CiAgICAgIHBhdGg6IC9cL3Jlc291cmNlXC9cZCsvLAogICAgICBjYWxsYmFjazpmdW5jdGlvbigpewogICAgICAgIHZhciBJRD0kKCcuYnRuLWRvd25sb2FkJykuZGF0YSgnaWQnKTsKICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICJ1cmwiOiJodHRwOi8vd3d3Lm1hZHNjay5jb20vYWpheC9sb2dpbi9kb3dubG9hZC1saW5rP2lkPSIrSUQsCiAgICAgICAgICAgIG1ldGhvZDogIkdFVCIsCiAgICAgICAgICAgIGRhdGFUeXBlOiAianNvbiIsCiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgdmFyIHJlcz1lLnJlc291cmNlOwogICAgICAgICAgICAgICQoJy5idG4tZG93bmxvYWQnKS5jc3MoJ2Rpc3BsYXknLCdub25lJyk7CiAgICAgICAgICAgICAgJCgnPGE+JykuYXR0cih7J2hyZWYnOnJlcy5yZXNvdXJjZV9saW5rKycjJytyZXMuZmV0Y2hfY29kZSwndGFyZ2V0JzonYmxhbmsnLCdjbGFzcyc6J2J0bi1kb3dubG9hZCd9KS5jc3MoeydsaW5lLWhlaWdodCc6JzYwcHgnLCd0ZXh0LWFsaWduJzonY2VudGVyJywnZm9udC1zaXplJzonMjRweCd9KS50ZXh0KCfkuIvovb0nKS5pbnNlcnRCZWZvcmUoJy5idG4tZG93bmxvYWQnKTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgICdpZGFubXUuY28nOiB7CiAgICAgIHBhdGggOiAvc3RvcmFnZVwtZG93bmxvYWQvaSwKICAgICAgY2FsbGJhY2sgOiBmdW5jdGlvbigpewogICAgICAgICQoJy5pbnB1dC1ncm91cCcpLmVhY2goZnVuY3Rpb24oKXsKICAgICAgICAgICQodGhpcykudGV4dCgkKHRoaXMpLnRleHQoKSskKHRoaXMpLmZpbmQoJ2lucHV0JykudmFsKCkpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgJ3NoYW9pdC5jb20nOiB7CiAgICAgIHBhdGggOiAvLiovaSwKICAgICAgY2FsbGJhY2sgOiBmdW5jdGlvbigpewogICAgICAgIHZhciBMaW5rUGFyZW50PSQoJ0FbaHJlZio9InBhbi5iYWlkdS5jb20iXSxBW2hyZWYqPSJleXVuLmJhaWR1LmNvbSJdJykucGFyZW50KCk7CiAgICAgICAgdmFyIFBhcmVudEhUTUw9TGlua1BhcmVudC5odG1sKCk7CiAgICAgICAgc2l0ZVsnY29kZVJ1bGUnXT0vXHMqKHNoYW9pdHxbYS16XGRdezR9KSgoPzpccyp8PGJyPikkKS9pOwogICAgICAgICAgdmFyIEh0bWxBcnI9UGFyZW50SFRNTC5tYXRjaCgvLiooPzogXC98XHMqJHw8YnI+KS9pZyk7CiAgICAgICAgICBmb3IoaT0wO2k8SHRtbEFyci5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgaWYoLzxcL2E+XHMqKFthLXpcZF17NH18c2hhb2l0KSBcLy9pLnRlc3QoSHRtbEFycltpXSkpewogICAgICAgICAgICAgIEh0bWxBcnJbaV09SHRtbEFycltpXS5yZXBsYWNlKC8oaHJlZj0iW14iXSspKCJbXj5dKj8+KD8hPFwvYT4pLis/PFwvYT5ccyooc2hhb2l0fFthLXpcZF17NH0pKS9pZywnJDEjJDMkMicpOwogICAgICAgICAgICB9IGVsc2UgaWYoc2l0ZVsnY29kZVJ1bGUnXS50ZXN0KEh0bWxBcnJbaV0pKXsKICAgICAgICAgICAgICB2YXIgUFdjb2RlPUh0bWxBcnJbaV0ubWF0Y2goc2l0ZVsnY29kZVJ1bGUnXSlbMV07CiAgICAgICAgICAgICAgSHRtbEFycltpXT1IdG1sQXJyW2ldLnJlcGxhY2UoLyhocmVmPSJbXiJdKz8pIi9pZywnJDEjJytQV2NvZGUrJyInKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgTGlua1BhcmVudC5odG1sKEh0bWxBcnIuam9pbignJykpOwogICAgICAgIAogICAgICB9CiAgICB9LAogICAgJ3h1bnlpbmd3YW5nLmNvbSc6ewogICAgICBwYXRoOi9tb3ZpZS9pLAogICAgICBjYWxsYmFjazpmdW5jdGlvbigpewogICAgICAgICQod2luZG93KS5sb2FkKGZ1bmN0aW9uKCl7CiAgICAgICAgICAkKCdBW2hyZWYqPSJwYW4uYmFpZHUuY29tIl0sQVtocmVmKj0iZXl1bi5iYWlkdS5jb20iXScpLmVhY2goZnVuY3Rpb24oKXsKICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdocmVmJywkKHRoaXMpLmF0dHIoJ2hyZWYnKSsnIycrJCh0aGlzKS5uZXh0KCJzdHJvbmciKS50ZXh0KCkpCiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICAnaHVodXBhbi5jb20nOnsKICAgICAgcGF0aDovZVwvZXh0ZW5kXC9kb3duL2ksCiAgICAgIGNhbGxiYWNrOmZ1bmN0aW9uKCl7CiAgICAgICAgdmFyIF9MaW5rdG1wPSQoJ0FbaHJlZio9InBhbi5iYWlkdS5jb20iXSxBW2hyZWYqPSJleXVuLmJhaWR1LmNvbSJdJyk7CiAgICAgICAgdmFyIF9QV3RtcD0kKCdpbnB1dFtpZF49ImJkeXBhcyJdJyk7CiAgICAgICAgZm9yKGk9MDtpPF9MaW5rdG1wLmxlbmd0aDtpKyspewogICAgICAgICAgX0xpbmt0bXBbaV0uaHJlZis9IiMiK19QV3RtcFtpXS52YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAncmVpbXUubmV0JzogewogICAgICBwYXRoOiAvYXJjaGl2ZXMvaSwKICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCl7CiAgICAgICAgc2l0ZVsnY29kZVJ1bGUnXT0vKD86KD865o+Q5Y+WfOiuv+mXrnzlr4Zb56CB56K8XSlb56CB56K8XT8pXHMqWzrvvJogXT9ccyooW2EtelxkXXs0fXw46YWxKS9pCiAgICAgIH0KICAgIH0KICB9Cn07Cgp2YXIgaG9zdE5hbWUgPSBsb2NhdGlvbi5ob3N0Lm1hdGNoKC9cdytcLlx3KyQvKVswXS50b0xvd2VyQ2FzZSgpOwkvL+aPkOWPluW9k+WJjee9keermeS4u+Wfn+WQje+8iOe9keebmOWhq+WFheWvhueggeeUqO+8iQp2YXIgY29uZiA9IHNpdGVbaG9zdE5hbWVdOwkJCQkJCQkJCQkJLy/orr7nva7kuLvln5/lkI0KCnZhciBIb3N0QXJyID0gW107CQkJCQkJCQkJLy/nlJ/miJDln5/lkI3mlbDnu4QKZm9yKHZhciBpIGluIHNpdGUpIEhvc3RBcnIucHVzaChpKTsJCQkJCS8v5o+S5YWl5Z+f5ZCN5a+56LGh5pWw57uECnZhciBIb3N0RXhwID0gbmV3IFJlZ0V4cChIb3N0QXJyLmpvaW4oInwiKSwnaScpOwkvL+eUn+aIkOagoemqjOi2hemTvuaOpeeahOato+WImQoKLy9jb25zb2xlLmxvZyhzaXRlLkp1bXBVcmxbaG9zdF0pOwoKLyogLS0tLS09PT09PSDmo4Dmn6XmmK/lkKbpnIDopoHlpITnkIbot7Povazpk74gU3RhcnQgPT09PT0tLS0tLSAqLwoKaWYoc2l0ZVsnSnVtcFVybCddW2hvc3RdKXsKICBjb25zb2xlLmxvZyhzaXRlWydKdW1wVXJsJ11baG9zdF1bJ2hyZWYnXSkKICBzaXRlWydKdW1wVXJsJ11baG9zdF1bJ2hyZWYnXS5lYWNoKGZ1bmN0aW9uKCl7CiAgICBjb25zb2xlLmxvZyhzaXRlWydKdW1wVXJsJ11baG9zdF1bJ3JlcCddKQogICAgJCh0aGlzKS5hdHRyKHsnaHJlZic6ZGVjb2RlVVJJQ29tcG9uZW50KCQodGhpcykuYXR0cignaHJlZicpLnJlcGxhY2Uoc2l0ZVsnSnVtcFVybCddW2hvc3RdWyd1cmwnXSwnJykpLCd0YXJnZXQnOidibGFuayd9KTsKICB9KTsKfQovKiAtLS0tLT09PT09IOajgOafpeaYr+WQpumcgOimgeWkhOeQhui3s+i9rOmTviBFbmQgPT09PT0tLS0tLSAqLwoKCmlmKGNvbmYmJiEvemhpZGFvLmJhaWR1LmNvbS9pLnRlc3QoaG9zdCkpewkvL+e9keebmOmhtemdouWhq+WvhueggeeZu+W9lQogIC8vIOaKk+WPluaPkOWPlueggQogIGlmKGNvbmYuUHJlUHJvY2VzcykgY29uZi5QcmVQcm9jZXNzKCk7CQkvL+WGheWuuemihOWkhOeQhu+8iOWkhOeQhueZvuW6puS8geS4muS6ke+8iQogIHZhciBzQ29kZSA9IGhhc2guc2xpY2UoMSkudHJpbSgpOwoKICAvLyDosIPor5XnlKjvvIzmo4Dmn6XmmK/lkKbkuLrlkIjms5XmoLzlvI8KICBpZiAoIWNvbmYuY2hrLnRlc3Qoc0NvZGUpKSB7CiAgICBjb25zb2xlLmxvZygn5rKh5pyJIEtleSDmiJbmoLzlvI/kuI3lr7knKTsKICB9IGVsc2UgewogICAgY29uc29sZS5sb2cgKCfmipPlj5bliLDnmoTmj5Dlj5bnoIE6ICVzJywgc0NvZGUpOwogIH0KCiAgLy8g5Yqg5Liq5bCP5bu25pe2CiAgc2V0VGltZW91dCAoZnVuY3Rpb24gKCkgewogICAgLy8g6ZSu5YWl5o+Q5Y+W56CB5bm25Y2V5Ye744CM5o+Q5Lqk44CN5oyJ6ZKu77yM5oql6ZSZ5LiN55So55CG44CCCiAgICB2YXIgY29kZUJveCA9ICQoY29uZi5jb2RlKSwKICAgICAgICBidG5PayA9ICQoY29uZi5idG4pOwogICAgaWYoY29kZUJveC5sZW5ndGg+MCkgewkJLy/lrZjlnKjlr4bnoIHmoYbml7bmiY3ov5vooYzlr4bnoIHmj5DkuqTmk43kvZwKICAgICAgY29kZUJveC52YWwoc0NvZGUpOwkJLy/loavlhpnpqozor4HnoIEKICAgICAgaWYgKGNvbmYucHJlU3VibWl0KQogICAgICAgIGlmIChjb25mLnByZVN1Ym1pdCAoY29kZUJveCwgYnRuT2spKQogICAgICAgICAgcmV0dXJuIDsKICAgICAgYnRuT2suY2xpY2soKTsKICAgIH0KICB9LCAxMCk7Cn0gZWxzZSB7CiAgLy/lr4bnoIHono3lkIgg54m55Yir5pSv5oyB55qE572R56uZCiAgaWYoc2l0ZVsnU3VwcG9ydCddW2hvc3ROYW1lXSYmc2l0ZVsnU3VwcG9ydCddW2hvc3ROYW1lXVsncGF0aCddLnRlc3QocGF0aHMpKSB7CiAgICBzaXRlWydTdXBwb3J0J11baG9zdE5hbWVdLmNhbGxiYWNrKCk7CiAgfQogIC8v55uR5ZCsIEEg5qCH562+54K55Ye75LqL5Lu2CiAgJCgnYm9keScpLm9uKCdjbGljaycsICdhJywgZnVuY3Rpb24gKCkgewogICAgdmFyIHRhcmdldD10aGlzOwogICAgLy/lpoLmnpzotoXpk77mjqXlt7LmnIkgaGFzaCDliJnot7Pov4cKICAgIGlmKHRoaXMuaGFzaCkgcmV0dXJuOwogICAgLy/lpoLmnpznm67moIflr7nosaHkuLrnmb7luqbkvIHkuJrnm5jvvIzmj5DljYflr4bnoIHljLnphY3ojIPlm7TvvIzku6Xlhbzlrrnnmb7luqbkvIHkuJrkupEKICAgIGlmKC9leXVuLmJhaWR1LmNvbS9pLnRlc3QodGhpcy5ocmVmKSkgewogIAkJc2l0ZVsncHdkUnVsZSddPS8oPzrmj5Dlj5Z86K6/6ZeuKVvnoIHnorxdP1xzKls677yaIF0/XHMqKFthLXpcZF17NCwxNH0pLzsKICAJCXNpdGVbJ2NvZGVSdWxlJ109Lyg/Oig/OuaPkOWPlnzorr/pl6585a+GW+eggeeivF18RXh0cmFjdGVkLWNvZGUpW+eggeeivF0/KVxzKls677yaIF0/XHMqKFthLXpcZF17NCwxNH0pL2k7CiAgICB9CiAgICAvL3ZhciB0YXJnZXQ9ZXZlbnQudGFyZ2V0LnRhZ05hbWU9PT0nQSc/ZXZlbnQudGFyZ2V0OmV2ZW50LnRhcmdldC5wYXJlbnROb2RlOwogICAJCiAgICAvL+ato+WImeagoemqjOi2hemTvuaOpeWMuemFjeeahOe9keebmAogICAgaWYoSG9zdEV4cC50ZXN0KHRoaXMuaHJlZikmJiEvKD86dGllYmEpXC5iYWlkdVwuY29tL2kudGVzdCh0aGlzLmhyZWYpKXsKICAgICAgCiAgICAgIAogICAgICBpZihzaXRlWydjb2RlUnVsZSddLnRlc3QodGFyZ2V0LnRleHRDb250ZW50KSl7CiAgICAgICAgY29uc29sZS5sb2coJ+WcqOW9k+WJjei2hemTvuaOpeeahOWvueixoeS4reafpeaJvuWvhueggScpOwogICAgICAgIHRhcmdldC5ocmVmKz0nIycrZXh0Q29kZSh0YXJnZXQpOwogICAgICB9IGVsc2UgaWYodGFyZ2V0Lm5leHRTaWJsaW5nJiZzaXRlWydjb2RlUnVsZSddLnRlc3QodGFyZ2V0Lm5leHRTaWJsaW5nLnRleHRDb250ZW50KSl7CiAgICAgICAgY29uc29sZS5sb2coJ+WvhueggeWcqOi2hemTvuaOpeWQjumdoueahOWFhOW8n+WFg+e0oOS4rScsdGFyZ2V0Lm5leHRTaWJsaW5nLnRleHRDb250ZW50KTsKICAgICAgICBpZighLyMvaS50ZXN0KHRhcmdldC5ocmVmKSkgdGFyZ2V0LmhyZWYrPScjJytleHRDb2RlKHRhcmdldC5uZXh0U2libGluZyk7CiAgICAgIH0gZWxzZSBpZihzaXRlWydwd2RSdWxlJ10udGVzdCh0YXJnZXQucGFyZW50Tm9kZS50ZXh0Q29udGVudCkpewogICAgICAgIGNvbnNvbGUubG9nKCfku47niLblr7nosaHkuK3mn6Xmib7lr4bnoIEnKTsKICAgICAgICBpZighLyMvaS50ZXN0KHRhcmdldC5ocmVmKSkgdGFyZ2V0LmhyZWYrPScjJytleHRDb2RlKHRhcmdldC5wYXJlbnROb2RlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgaSA9IDAsCiAgICAgICAgICAgIG1heFBhcmVudCA9IDUsCS8v5ZCR5LiK6YGN5Y6G55qE5bGC57qnCiAgICAgICAgICAgIHBhcmVudCA9IHRhcmdldDsKICAgICAgICB3aGlsZShpPG1heFBhcmVudCkgewogICAgICAgICAgaSsrOwkJCQkJCQkJCS8v6YGN5Y6G6K6h5pWwCiAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTsJCQkvL+WPluW+l+eItuWvueixoQogICAgICAgICAgY29uc29sZS5sb2coJ+mBjeWOhuS4iue6p+ebruW9leafpeaJvuWvhuegge+8micrIGkscGFyZW50KTsKICAgICAgICAgIGlmKHBhcmVudC50YWdOYW1lPT0iVFIiKSB7CQkJCS8v5aaC5p6c54i25a+56LGh5piv6KGo5qC877yM5YiZ5LuO6KGo5qC85Lit5o+Q5Y+W5a+G56CBCiAgICAgICAgICAgIGlmKHNpdGVbJ2NvZGVSdWxlJ10udGVzdChwYXJlbnQubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50KSkgewogICAgICAgICAgICAgIHBhcmVudD1wYXJlbnQubmV4dEVsZW1lbnRTaWJsaW5nOwogICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ+ihqOagvOS4reafpeaJvuWvhueggeaIkOWKn++8gScscGFyZW50KTsKICAgICAgICAgICAgICB0YXJnZXQuaHJlZis9JyMnK2V4dENvZGUocGFyZW50KTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmKHNpdGVbJ2NvZGVSdWxlJ10udGVzdChwdz1wYXJlbnQubmV4dFNpYmxpbmcudGV4dENvbnRlbnQpKXsKICAgICAgICAgICAgY29uc29sZS5sb2coJ+WQkeS4iumBjeWOhuafpeaJvu+8jOWcqOi2hemTvuaOpeWQjumdoueahOWFhOW8n+WFg+e0oOS4re+8jCcscGFyZW50Lm5leHRTaWJsaW5nKTsKICAgICAgICAgICAgdGFyZ2V0LmhyZWYrPScjJytleHRDb2RlKHBhcmVudC5uZXh0U2libGluZyk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfSBlbHNlIGlmKHNpdGVbJ2NvZGVSdWxlJ10udGVzdChwYXJlbnQudGV4dENvbnRlbnQpKSB7CQkvL+WQpuWImeaMieeFp+W4uOinhOaWueW8j+aPkOWPluWvhueggQogICAgICAgICAgICBjb25zb2xlLmxvZygn5ZCR5LiK6YGN5Y6G5p+l5om+5a+G56CB5oiQ5Yqf77yBJyk7CiAgICAgICAgICAgIHRhcmdldC5ocmVmKz0nIycrZXh0Q29kZShwYXJlbnQpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGlmKHBhcmVudD09ZG9jdW1lbnQuYm9keSkgYnJlYWs7CQkJCQkJCQkvL+WmguaenOW3sue7j+mBjeWOhuWIsOacgOmhtumDqAogICAgICAgIH0KICAgICAgfQogICAgICAvL2NvbnNvbGUubG9nKHNpdGVbJ2NvZGVSdWxlJ10pOwogICAgICAgICAgICAvL+aXp+eahOS7jueItuWvueixoeS4remBjeWOhuaWueW8jwogICAgICAgICAgICAvL2NvbnNvbGUubG9nKCfku44gZG9jdW1lbnQuYm9keSDkuK3mn6Xmib7lr4bnoIEnKTsKICAgICAgICAgICAgLy9pZighLyMvaS50ZXN0KHRhcmdldC5ocmVmKSkgdGFyZ2V0LmhyZWYrPScjJytleHRDb2RlKGRvY3VtZW50LmJvZHkpOwogICAgfQogIH0pOwp9CgpmdW5jdGlvbiBleHRDb2RlKG9iail7CiAgdGV4dD1vYmoudGV4dENvbnRlbnQudHJpbSgpOwogIHJldHVybiBzaXRlWydwd2RSdWxlJ10udGVzdCh0ZXh0KT90ZXh0Lm1hdGNoKHNpdGVbJ3B3ZFJ1bGUnXSlbMV06dGV4dC5tYXRjaChzaXRlWydjb2RlUnVsZSddKVsxXTsJLy/pppblhYjlsJ3or5Xkvb/nlKgg5o+Q5Y+W56CBfOiuv+mXrueggSDkvZzkuLrlr4bnoIHljLnphY3nmoTlhbPplK7lrZfvvIzml6DmlYjml7bliJnkvb/nlKjmm7TlrozmlbTnmoTljLnphY3op4TliJkKfQ=="},{"name":"YouTube +","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":["*://www.youtube.com/tv*","*://www.youtube.com/embed/*","*://www.youtube.com/live_chat*"],"orig_includes":[],"orig_matches":["*://www.youtube.com/*"],"orig_noframes":true,"orig_run_at":"document-start","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"particleSettings":"s{\"GEN_BTTR_NTF\":true,\"GEN_SUB_LIST\":true,\"GEN_INF_SCRL\":true,\"GEN_BLUE_GLOW\":true,\"GEN_PPOT_ON\":true,\"VID_END_SHRE\":true,\"VID_DFLT_QLTY\":\"auto\",\"VID_PLST_ATPL\":true,\"VID_PLST_RVRS\":true,\"VID_PLR_ALVIS\":true,\"VID_PLR_SIZE_MEM\":true,\"VID_PLR_FIT\":true,\"VID_HIDE_COMS\":\"1\",\"VID_POST_TIME\":true,\"VID_VID_CNT\":true,\"VID_DESC_SHRT\":true,\"VID_PPOT_SZ\":533,\"VID_PLR_HTML5\":true,\"BLK_ON\":true,\"floaterX\":0,\"floaterY\":450,\"firstTime\":false,\"volLev\":50,\"advOpts\":true,\"blacklist\":{\"UC71TWnqZ-l2yhHBsiRnSxVQ\":\"8 Rulez\",\"UCxjXU89x6owat9dA8Z-bzdw\":\"AKB48\",\"UCKOsfT0oEOqPEldCI7-l4EQ\":\"Funny page\",\"UC9AIJzikBwSnssfl9yRatXA\":\"joy and laughter\",\"UCFWDKX2U9KUSOUdH2INchbw\":\"TMON official 티몬\",\"UCB6oDsLmJnSbI4_mwDB6D1g\":\"BB 邦画\",\"UCqXkq2wvR8Sqx9QKQhd4XSg\":\"All Videos\",\"UCBOWvlRS2U6HPyhCz9A7FRA\":\"序傑涂\",\"UCCZS6YMggfiRV_U7NuiNNsg\":\"Ryuuu TV / 學日文看日本\",\"UClO8azO6iBvdH-LU8mfaWhA\":\"hughjazzz\",\"UC2wv9Zx_PxLquEfHDEgkf_A\":\"雀聖哲也みんなの麻雀\",\"UCG1xMCXwpAl-_cgxR4tm3HA\":\"ElectroHouseBangers\",\"UCdf73tvj_Dq5L0kE7zrmztA\":\"Top 10\",\"UCv20Zm_6T753httPhtYZ9rg\":\"Outo Pal\",\"UC8VjGg_gQOtN-GRtuvAysFA\":\"Kid Legetøj\",\"UCZmgzM23I0CQkcR0weB69eg\":\"Classic Spice\",\"UCPfiaSlPeBJX3cLmqxmoZ0w\":\"Leo Xu\"},\"extLang\":{\"zh_CN\":{\"YTSETS\":\"YouTube+ 设置\",\"ADV_OPTS\":\"高级选项\",\"SUB_PLST\":\"播放最新上传的内容\",\"PPOT_OPEN\":\"在弹出窗口中打开\",\"BLCK_ADD\":\"添加到黑名单\",\"BLCK_EDIT\":\"编辑\",\"BLCK_SAVE\":\"保存\",\"BLCK_CLSE\":\"关闭\",\"CNSL_AP\":\"自动播放\",\"CNSL_RPT\":\"循环播放\",\"CNSL_SVTH\":\"打开缩略图\",\"CNSL_SS\":\"画面截图\",\"CNSL_SS_CLS\":\"关闭\",\"CNSL_PPOT\":\"弹出播放视频\",\"CNSL_FLBR\":\"网页全屏模式\",\"CNSL_CINM_MD\":\"影院模式\",\"CNSL_YTSC\":\"YouTube 快捷键列表\",\"PLST_AP\":\"自动播放\",\"PLST_RVRS\":\"倒序排列\",\"SHOW_CMTS\":\"显示评论\",\"HIDE_CMTS\":\"隐藏评论\",\"GLB_IMPR\":\"导入/导出设置\",\"GLB_LOCL_LANG\":\"点击修改 YT+ 语言\",\"GLB_LOCL_LANG_CSTM\":\"本地化\",\"GLB_IMPR_SAVE\":\"保存并加载\",\"GLB_RSET\":\"重置\",\"GLB_RSET_CONF\":\"这将重置YT+的所有设置和黑名单。是否要继续？\",\"GLB_SVE\":\"保存\",\"GLB_SVE_SETS\":\"设置已保存\",\"GLB_RMBL\":\"从黑名单中移除\",\"FTR_DESC\":\"详细了解\",\"GEN\":\"常规\",\"VID\":\"视频\",\"CHN\":\"频道\",\"BLK\":\"黑名单\",\"ABT\":\"关于\",\"HLP\":\"帮助\",\"DNT\":\"捐赠\",\"GEN_TTL\":\"通用设置\",\"GEN_GEN\":\"常规\",\"GEN_LYT\":\"布局\",\"GEN_LOCL_LANG\":\"使用自定义的 YT+ 语言包\",\"GEN_PPOT_ON\":\"启用弹出模式\",\"GEN_DSBL_ADS\":\"禁止视频页面以外的广告\",\"GEN_INF_SCRL\":\"在信息源列表启用无限滚动\",\"GEN_YT_LOGO_LINK\":\"YouTube 标志重定向到订阅页\",\"GEN_SUB_LIST\":\"启用订阅播放列表\",\"GEN_REM_APUN\":\"去除自动播放下一个\",\"GEN_SPF_OFF\":\"禁用动态加载\",\"GEN_HIDE_FTR\":\"隐藏页脚\",\"GEN_BLUE_GLOW\":\"去除点击过的按钮周围的蓝色光圈\",\"GEN_HDE_RECM_SDBR\":\"隐藏推荐频道侧边栏\",\"GEN_HDE_SRCH_SDBR\":\"隐藏搜索结果侧边栏\",\"GEN_HDE_CHN_SDBR\":\"隐藏频道侧边栏\",\"GEN_CMPT_TTLS\":\"在信息源中使用缩略标题\",\"GEN_DSB_HVRC\":\"禁用悬停卡片\",\"GEN_BTTR_NTF\":\"改进的蓝色通知框\",\"GEN_GRID_SUBS\":\"在订阅中使用网格布局\",\"GEN_GRID_SRCH\":\"在搜索结果中使用网格布局\",\"VID_TTL\":\"视频设置\",\"VID_PLR\":\"播放器设置\",\"VID_PLR_LYT\":\"播放器布局\",\"VID_DFLT_QLTY\":\"默认视频质量：\",\"VID_DFLT_QLTY_AUTO\":\"自动\",\"VID_DFLT_QLTY_TNY\":\"144p\",\"VID_DFLT_QLTY_SML\":\"240p\",\"VID_DFLT_QLTY_MDM\":\"360p\",\"VID_DFLT_QLTY_LRG\":\"480p\",\"VID_DFLT_QLTY_720\":\"720p\",\"VID_DFLT_QLTY_1080\":\"1080p\",\"VID_DFLT_QLTY_1440\":\"1440p\",\"VID_DFLT_QLTY_2160\":\"2160p (4k)\",\"VID_DFLT_QLTY_2880\":\"2880p (5k)\",\"VID_DFLT_QLTY_ORIG\":\"4320p (8k)\",\"VID_PLR_ALVIS\":\"阅读评论时保持播放器可见\",\"VID_PLR_ALVIS_WDTH\":\"悬浮播放器宽度\",\"VID_PLR_ALVIS_RST\":\"重设位置\",\"VID_PLR_ALVIS_SCRL_TOP\":\"返回顶部\",\"VID_PLR_ATPL\":\"自动播放视频\",\"VID_LAYT\":\"布局\",\"VID_VID_CNT\":\"显示已上传视频数及链接\",\"VID_POST_TIME\":\"显示视频已发布时间\",\"VID_HIDE_DETLS\":\"隐藏视频详细信息\",\"VID_HIDE_COMS\":\"评论区\",\"VID_HIDE_COMS_SHOW\":\"显示\",\"VID_HIDE_COMS_HIDE\":\"隐藏\",\"VID_HIDE_COMS_REM\":\"去除\",\"VID_END_SHRE\":\"禁用视频结束时的分享面板\",\"VID_PLST\":\"播放列表\",\"VID_PLST_ATPL\":\"启用播放列表的自动播放按钮\",\"VID_PLST_RVRS\":\"启用播放列表的倒序排列按钮\",\"VID_PLR_SIZE_MEM\":\"记住播放模式\",\"VID_VOL_WHEEL\":\"使用鼠标滚轮更改音量\",\"VID_PLR_VOL_MEM\":\"记住音量\",\"VID_PLR_VOL_LDN\":\"禁用 YouTube 响度统一化\",\"VID_PLR_ADS\":\"禁用视频页面中的广告\",\"VID_PLR_ALACT\":\"播放器快捷键始终生效\",\"VID_SUB_ADS\":\"仅启用已订阅频道中视频的广告\",\"VID_PLR_ANTS\":\"禁用注释\",\"VID_PLR_HFR\":\"禁用高帧率 (60fps)\",\"VID_PLR_HTML5\":\"可能时使用 HTML 5 播放器\",\"VID_PLR_CC\":\"禁用字幕和隐藏式字幕\",\"VID_PLR_INFO\":\"启用稍后观看按钮\",\"VID_PLR_FIT\":\"为剧场模式适配页面\",\"VID_PLR_FIT_WDTH\":\"适配页面最大宽度:\",\"VID_PLR_DYN_SIZE\":\"默认视图中禁用播放器动态调节尺寸\",\"VID_DESC_SHRT\":\"小巧的视频描述按钮\",\"VID_TTL_CMPT\":\"缩略视频描述标题\",\"VID_PPOT_SZ\":\"弹出播放器的大小\",\"VID_LAYT_AUTO_PNL\":\"自动展开视频描述\",\"GEN_CHN_DFLT_PAGE\":\"默认的频道页面：\",\"GEN_CHN_DFLT_PAGE_DFLT\":\"默认\",\"GEN_CHN_DFLT_PAGE_VID\":\"视频\",\"GEN_CHN_DFLT_PAGE_PL\":\"播放列表\",\"GEN_CHN_DFLT_PAGE_CHN\":\"频道\",\"GEN_CHN_DFLT_PAGE_DISC\":\"讨论\",\"GEN_CHN_DFLT_PAGE_ABT\":\"关于\",\"BLK_TTL\":\"黑名单设置\",\"BLK_BLK\":\"黑名单\",\"BLK_ON\":\"启用黑名单\",\"ABT_TTL\":\"相关信息和实用链接\",\"ABT_THKS\":\"鸣谢：\",\"ABT_THKS_YEPPHA\":\"，他们的成果给此项目带来了灵感，没有他们，今天这些就不会存在。\",\"ABT_THKS_USERSCRIPT\":\" 使开发和发行第三方软件的任务无比简单。\",\"ABT_THKS_STACKOV\":\" 无价的信息对软件开发做出了巨大贡献。\",\"ABT_INFO\":\"官方页面\",\"ABT_LNK_GHB\":\"GitHub\",\"ABT_LNK_GRFK\":\"Greasy Fork\",\"ABT_LNK_OPNU\":\"OpenUserJS\",\"WLCM\":\"感谢您安装 YouTube+\",\"WLCMSTRT\":\"您可以点击上面的按钮来自定义您的设置\",\"WLCMFTRS\":\"点击这里查看所有特性的介绍\",\"LOCALE\":\"中文 (简体)\",\"lastMod\":1501413695000},\"nextCheck\":1503921634837},\"VID_PLR_VOL_LDN\":true,\"VID_PLR_ATPL\":true,\"theaterMode\":false,\"floaterSnapX\":-1,\"floaterSnapY\":1,\"frame_step\":true}"},"ts":1503316834838},"enabled":true,"position":3,"file_url":"https://greasyfork.org/scripts/9932-youtube/code/YouTube%20+.user.js","uuid":"ede82457-b3a2-43ea-81c3-5abddecdb32c","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQHZlcnNpb24gICAgICAgICAxLjguOAovLyBAbmFtZSAgICAgICAgICAgIFlvdVR1YmUgKwovLyBAbmFtZXNwYWNlICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUKLy8gQGRlc2NyaXB0aW9uICAgICBZb3VUdWJlIHdpdGggbW9yZSBmcmVlZG9tCi8vIEBjb21wYXRpYmxlICAgICAgZmlyZWZveAovLyBAY29tcGF0aWJsZSAgICAgIG9wZXJhCi8vIEBpY29uICAgICAgICAgICAgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS9naC1wYWdlcy9pbWFnZXMvWVQlMkJpY29uLnBuZwovLyBAbWF0Y2ggICAgICAgICAgICo6Ly93d3cueW91dHViZS5jb20vKgovLyBAZXhjbHVkZSAgICAgICAgICo6Ly93d3cueW91dHViZS5jb20vdHYqCi8vIEBleGNsdWRlICAgICAgICAgKjovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8qCi8vIEBleGNsdWRlICAgICAgICAgKjovL3d3dy55b3V0dWJlLmNvbS9saXZlX2NoYXQqCi8vIEBydW4tYXQgICAgICAgICAgZG9jdW1lbnQtc3RhcnQKLy8gQGhvbWVwYWdlVVJMICAgICBodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlCi8vIEBzdXBwb3J0VVJMICAgICAgaHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpCi8vIEBjb250cmlidXRpb25VUkwgaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9jZ2ktYmluL3dlYnNjcj9jbWQ9X3MteGNsaWNrJmhvc3RlZF9idXR0b25faWQ9VU1WUUpKRkc0QkZIVwovLyBAZ3JhbnQgICAgICAgICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICAgICAgICAgR01fc2V0VmFsdWUKLy8gQG5vZnJhbWVzCi8vID09L1VzZXJTY3JpcHQ9PQooZnVuY3Rpb24gKCkgewogICAgInVzZSBzdHJpY3QiOwogICAgdmFyIHBhcnRpY2xlID0gewogICAgICAgIGluamVjdDogZnVuY3Rpb24oaXNfdXNlcnNjcmlwdCkgewogICAgICAgICAgICBmdW5jdGlvbiBzZXRMb2NhbGUoY29udGVudCkgewogICAgICAgICAgICAgICAgdmFyIGksIGosIGxpc3QsIHRlbXAsIHl0cGxhYmVsOwogICAgICAgICAgICAgICAgeXRwbGFiZWwgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIltkYXRhLXBdIik7CiAgICAgICAgICAgICAgICBpID0geXRwbGFiZWwubGVuZ3RoOwogICAgICAgICAgICAgICAgd2hpbGUgKGktLSkgewogICAgICAgICAgICAgICAgICAgIGxpc3QgPSB5dHBsYWJlbFtpXS5kYXRhc2V0LnAuc3BsaXQoIiYiKTsKICAgICAgICAgICAgICAgICAgICBqID0gbGlzdC5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGotLSkgewogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gbGlzdFtqXS5zcGxpdCgifCIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcFswXSA9PT0gInRuZCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHl0cGxhYmVsW2ldLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGxhbmcodGVtcFsxXSkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0ZW1wWzBdID09PSAidHRsIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgeXRwbGFiZWxbaV0uc2V0QXR0cmlidXRlKCJ0aXRsZSIsIGxhbmcodGVtcFsxXSkpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgeXRwbGFiZWxbaV0uZGF0YXNldC50b29sdGlwVGV4dCA9IGxhbmcodGVtcFsxXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBnZXRMb2NhbGUoZGF0YSkgewogICAgICAgICAgICAgICAgbGFuZy5mZXRjaGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgZGF0YSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kYXRhc2V0LnNldGxvY2FsZTsKICAgICAgICAgICAgICAgIGRhdGEgPSBkYXRhICYmIEpTT04ucGFyc2UoZGF0YSk7CiAgICAgICAgICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgICAgICAgICAgIHVzZXJfc2V0dGluZ3MuZXh0TGFuZ1tsYW5nLnl0bGFuZ10gPSBKU09OLnBhcnNlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kYXRhc2V0LnNldGxvY2FsZSk7CiAgICAgICAgICAgICAgICAgICAgdXNlcl9zZXR0aW5ncy5leHRMYW5nW2xhbmcueXRsYW5nXS5sYXN0TW9kID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgICAgICAgICAgICAgdXNlcl9zZXR0aW5ncy5leHRMYW5nLm5leHRDaGVjayA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgNjA0OEU1OwogICAgICAgICAgICAgICAgICAgIHNldCgiZXh0TGFuZyIsIHVzZXJfc2V0dGluZ3MuZXh0TGFuZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBsYW5nLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBnZXRMYW5ndWFnZShkYXRhKSB7CiAgICAgICAgICAgICAgICBsYW5nLmZldGNoaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpZiAoZGF0YS50YXJnZXQucmVhZHlTdGF0ZSA9PT0gNCAmJiBkYXRhLnRhcmdldC5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgIHVzZXJfc2V0dGluZ3MuZXh0TGFuZ1tsYW5nLnl0bGFuZ10gPSBKU09OLnBhcnNlKGRhdGEudGFyZ2V0LnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICB1c2VyX3NldHRpbmdzLmV4dExhbmdbbGFuZy55dGxhbmddLmxhc3RNb2QgPSBuZXcgRGF0ZShkYXRhLnRhcmdldC5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpKS5nZXRUaW1lKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB1c2VyX3NldHRpbmdzLmV4dExhbmcubmV4dENoZWNrID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyA2MDQ4RTU7CiAgICAgICAgICAgICAgICBzZXQoImV4dExhbmciLCB1c2VyX3NldHRpbmdzLmV4dExhbmcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrTW9kaWZpZWQoZGF0YSkgewogICAgICAgICAgICAgICAgbGFuZy5mZXRjaGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKGRhdGEudGFyZ2V0LnJlYWR5U3RhdGUgPT09IDQgJiYgZGF0YS50YXJnZXQuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICBsYW5nLmZldGNoaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbFhIUigiR0VUIiwgZ2V0TGFuZ3VhZ2UsIGxhbmcudXJsQmFzZSArIGxhbmcueXRsYW5nICsgIi5qc29uIiwgWyJBY2NlcHQiLCAiYXBwbGljYXRpb24vdm5kLmdpdGh1Yi5yYXciXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gbGFuZyhsYWJlbCkgewogICAgICAgICAgICAgICAgbGFuZy55dGxhbmcgPSB3aW5kb3cueXQgJiYgd2luZG93Lnl0LmNvbmZpZ18gJiYgd2luZG93Lnl0LmNvbmZpZ18uR0FQSV9MT0NBTEU7CiAgICAgICAgICAgICAgICBsYW5nLnVybEJhc2UgPSAiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9QYXJ0aWNsZUNvcmUvUGFydGljbGUvY29udGVudHMvTG9jYWxlLyI7CiAgICAgICAgICAgICAgICBpZiAoIXVzZXJfc2V0dGluZ3MuZXh0TGFuZykgewogICAgICAgICAgICAgICAgICAgIHNldCgiZXh0TGFuZyIsIHt9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh1c2VyX3NldHRpbmdzLkdFTl9MT0NMX0xBTkcgJiYgdXNlcl9zZXR0aW5ncy5sb2NhbExhbmcgJiYgdXNlcl9zZXR0aW5ncy5sb2NhbExhbmdbbGFiZWxdKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KHVzZXJfc2V0dGluZ3MuZXh0TGFuZykgIT09ICJ7fSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0KCJleHRMYW5nIiwge30pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXNlcl9zZXR0aW5ncy5sb2NhbExhbmdbbGFiZWxdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCF1c2VyX3NldHRpbmdzLkdFTl9MT0NMX0xBTkcgJiYgbGFuZy55dGxhbmcgJiYgbGFuZy55dGxhbmcgIT09ICJlbl9VUyIpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncy5leHRMYW5nW2xhbmcueXRsYW5nXSAmJiB1c2VyX3NldHRpbmdzLmV4dExhbmdbbGFuZy55dGxhbmddW2xhYmVsXSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxhbmcuZmV0Y2hpbmcgJiYgdXNlcl9zZXR0aW5ncy5leHRMYW5nLm5leHRDaGVjayAmJiB1c2VyX3NldHRpbmdzLmV4dExhbmcubmV4dENoZWNrIDw9IG5ldyBEYXRlKCkuZ2V0VGltZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5nLmZldGNoaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNfdXNlcnNjcmlwdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhbmcub2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihnZXRMb2NhbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhbmcub2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlRmlsdGVyOiBbImRhdGEtc2V0bG9jYWxlIl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZGF0YXNldC5nZXRsb2NhbGUgPSBsYW5nLnl0bGFuZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxYSFIoIkhFQUQiLCBjaGVja01vZGlmaWVkLCBsYW5nLnVybEJhc2UgKyBsYW5nLnl0bGFuZyArICIuanNvbiIsIFsiSWYtTW9kaWZpZWQtU2luY2UiLCBuZXcgRGF0ZSh1c2VyX3NldHRpbmdzLmV4dExhbmdbbGFuZy55dGxhbmddLmxhc3RNb2QpLnRvVVRDU3RyaW5nKCldKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJfc2V0dGluZ3MuZXh0TGFuZy5uZXh0Q2hlY2sgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDYwNDhFNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldCgiZXh0TGFuZyIsIHVzZXJfc2V0dGluZ3MuZXh0TGFuZyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJfc2V0dGluZ3MuZXh0TGFuZ1tsYW5nLnl0bGFuZ11bbGFiZWxdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoIXVzZXJfc2V0dGluZ3MuZXh0TGFuZ1tsYW5nLnl0bGFuZ10gJiYgIWxhbmcuZmV0Y2hpbmcgJiYgKCF1c2VyX3NldHRpbmdzLmV4dExhbmcubmV4dENoZWNrIHx8IHVzZXJfc2V0dGluZ3MuZXh0TGFuZy5uZXh0Q2hlY2sgPD0gbmV3IERhdGUoKS5nZXRUaW1lKCkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmcuZmV0Y2hpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzX3VzZXJzY3JpcHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhbmcub2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihnZXRMb2NhbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFuZy5vYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlRmlsdGVyOiBbImRhdGEtc2V0bG9jYWxlIl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRhdGFzZXQuZ2V0bG9jYWxlID0gbGFuZy55dGxhbmc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFhIUigiR0VUIiwgZ2V0TGFuZ3VhZ2UsIGxhbmcudXJsQmFzZSArIGxhbmcueXRsYW5nICsgIi5qc29uIiwgWyJBY2NlcHQiLCAiYXBwbGljYXRpb24vdm5kLmdpdGh1Yi5yYXciXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbGFuZ3VhZ2VbbGFiZWxdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHNvcnRMaXN0KHByZXZpb3VzLCBuZXh0KXsKICAgICAgICAgICAgICAgIHJldHVybiBuZXh0W09iamVjdC5rZXlzKG5leHQpWzBdXS5sb2NhbGVDb21wYXJlKHByZXZpb3VzW09iamVjdC5rZXlzKHByZXZpb3VzKVswXV0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEJsYWNrbGlzdChibGlzdCkgewogICAgICAgICAgICAgICAgdmFyIGksIG9iaiwgdGVtcCwgbG5rLCBrZXlzLCBsaXN0LCBmcmFnbWVudCwgc29ydEFscGhhOwogICAgICAgICAgICAgICAgbGlzdCA9IHVzZXJfc2V0dGluZ3MuYmxhY2tsaXN0OwogICAgICAgICAgICAgICAgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICAgICAgICAgICAgICBzb3J0QWxwaGEgPSBbXTsKICAgICAgICAgICAgICAgIHRlbXAgPSBPYmplY3Qua2V5cyhsaXN0KTsKICAgICAgICAgICAgICAgIGkgPSB0ZW1wLmxlbmd0aDsKICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pIHsKICAgICAgICAgICAgICAgICAgICBvYmogPSB7fTsKICAgICAgICAgICAgICAgICAgICBvYmpbdGVtcFtpXV0gPSBsaXN0W3RlbXBbaV1dOwogICAgICAgICAgICAgICAgICAgIHNvcnRBbHBoYS5wdXNoKG9iaik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0ZW1wID0gc29ydEFscGhhLnNvcnQoc29ydExpc3QpOwogICAgICAgICAgICAgICAgaSA9IHRlbXAubGVuZ3RoOwogICAgICAgICAgICAgICAgd2hpbGUgKGktLSkgewogICAgICAgICAgICAgICAgICAgIGtleXMgPSBPYmplY3Qua2V5cyh0ZW1wW2ldKTsKICAgICAgICAgICAgICAgICAgICBvYmogPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpOwogICAgICAgICAgICAgICAgICAgIG9iai5pbm5lckhUTUwgPSAvLwogICAgICAgICAgICAgICAgICAgICAgICBgPGRpdiBjbGFzcz0nYmxhY2tsaXN0Jz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9J2Nsb3NlJyBkYXRhLXA9J3R0bHxHTEJfUk1CTCc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB2aWV3Qm94PScwIDAgMTAgMTAnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBwb2ludHM9JzEwLDEuNCA4LjYsMCA1LDMuNiAxLjQsMCAwLDEuNCAzLjYsNSAwLDguNiAxLjQsMTAgNSw2LjQgOC42LDEwIDEwLDguNiA2LjQsNScvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+PGEgdGFyZ2V0PSdfYmxhbmsnPjwvYT4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICBvYmogPSBzZXRMb2NhbGUob2JqLmNvbnRlbnQuZmlyc3RDaGlsZCk7CiAgICAgICAgICAgICAgICAgICAgbG5rID0gb2JqLnF1ZXJ5U2VsZWN0b3IoImEiKTsKICAgICAgICAgICAgICAgICAgICBsbmsuaHJlZiA9ICIvY2hhbm5lbC8iICsga2V5c1swXTsKICAgICAgICAgICAgICAgICAgICBsbmsuc2V0QXR0cmlidXRlKCJ0aXRsZSIsIHRlbXBbaV1ba2V5c1swXV0pOwogICAgICAgICAgICAgICAgICAgIGxuay50ZXh0Q29udGVudCA9IHRlbXBbaV1ba2V5c1swXV07CiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQob2JqKTsKICAgICAgICAgICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiXG4iKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBibGlzdC5hcHBlbmRDaGlsZChmcmFnbWVudCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gZ2V0VmFsdWVzKG1lbnUpIHsKICAgICAgICAgICAgICAgIHZhciBpLCB5dHAsIGxpc3Q7CiAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncykgewogICAgICAgICAgICAgICAgICAgIGxpc3QgPSBtZW51LnF1ZXJ5U2VsZWN0b3IoIiNibGFja2xpc3QiKTsKICAgICAgICAgICAgICAgICAgICBpZiAobGlzdCkgewogICAgICAgICAgICAgICAgICAgICAgICBnZXRCbGFja2xpc3QobGlzdCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHl0cCA9IG1lbnUucXVlcnlTZWxlY3RvckFsbCgiaW5wdXRbaWRdIik7CiAgICAgICAgICAgICAgICAgICAgaSA9IHl0cC5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGktLSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoeXRwW2ldLnR5cGUgPT09ICJjaGVja2JveCIgJiYgdXNlcl9zZXR0aW5nc1t5dHBbaV0uaWRdID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5dHBbaV0uc2V0QXR0cmlidXRlKCJjaGVja2VkIiwgInRydWUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoeXRwW2ldLnR5cGUgPT09ICJ0ZXh0IiAmJiB0eXBlb2YgdXNlcl9zZXR0aW5nc1t5dHBbaV0uaWRdID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgeXRwW2ldLnNldEF0dHJpYnV0ZSgidmFsdWUiLCB1c2VyX3NldHRpbmdzW3l0cFtpXS5pZF0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHl0cCA9IG1lbnUucXVlcnlTZWxlY3RvckFsbCgib3B0aW9uIik7CiAgICAgICAgICAgICAgICAgICAgaSA9IHl0cC5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGktLSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5nc1t5dHBbaV0ucGFyZW50Tm9kZS5pZF0gPT09IHl0cFtpXS52YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgeXRwW2ldLnNldEF0dHJpYnV0ZSgic2VsZWN0ZWQiLCAidHJ1ZSIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG1lbnU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TWVudShzZWN0aW9uKSB7CiAgICAgICAgICAgICAgICB2YXIgaSwgdGVtcCwgc3ZnLCBpbnB1dHM7CiAgICAgICAgICAgICAgICB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTsKICAgICAgICAgICAgICAgIGlmIChzZWN0aW9uID09PSAiTUVOIikgewogICAgICAgICAgICAgICAgICAgIHRlbXAuaW5uZXJIVE1MID0gLy8KICAgICAgICAgICAgICAgICAgICAgICAgYDxkaXYgaWQ9J1Atc2V0dGluZ3MnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0nUC1jb250YWluZXInPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9J1Atc2lkZWJhcic+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBpZD0nUC1zaWRlYmFyLWxpc3QnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGlkPSdHRU4nIGNsYXNzPSdzZWxlY3RlZCcgZGF0YS1wPSd0bmR8R0VOJz48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGlkPSdWSUQnIGRhdGEtcD0ndG5kfFZJRCc+PC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBpZD0nQkxLJyBkYXRhLXA9J3RuZHxCTEsnPjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgaWQ9J0FCVCcgZGF0YS1wPSd0bmR8QUJUJz48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGlkPSdITFAnPjxhIHRhcmdldD0nX2JsYW5rJyBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2knIGRhdGEtcD0ndG5kfEhMUCc+PC9hPjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgaWQ9J0ROVCc+PGEgdGl0bGU9J1BheVBhbCcgdGFyZ2V0PSdfYmxhbmsnIGhyZWY9J2h0dHBzOi8vd3d3LnBheXBhbC5jb20vY2dpLWJpbi93ZWJzY3I/Y21kPV9zLXhjbGljayZob3N0ZWRfYnV0dG9uX2lkPVVNVlFKSkZHNEJGSFcnIGRhdGEtcD0ndG5kfEROVCc+PC9hPjxzdmcgdmlld0JveD0nMCAwIDE1LjMgMTgnPjxwYXRoIHN0eWxlPSdmaWxsOiMyNzM0NkE7JyBkPSdNMTMsMS40QzEyLjIsMC40LDEwLjYsMCw4LjcsMEgzLjFDMi43LDAsMi40LDAuMywyLjMsMC43TDAsMTUuNEMwLDE1LjcsMC4yLDE2LDAuNSwxNmgzLjUgbDAuOS01LjVsMCwwLjJDNC44LDEwLjMsNS4yLDEwLDUuNiwxMGgxLjZjMy4yLDAsNS43LTEuMyw2LjUtNS4xYzAtMC4xLDAtMC4yLDAuMS0wLjNjLTAuMSwwLTAuMSwwLDAsMEMxNCwzLjIsMTMuNywyLjIsMTMsMS40Jy8+PHBhdGggc3R5bGU9J2ZpbGw6IzI3MzQ2QTsnIGQ9J002LjEsNC4xQzYuMiw0LDYuMyw0LDYuNCw0aDQuNGMwLjUsMCwxLDAsMS40LDAuMWMwLjEsMCwwLjIsMCwwLjQsMC4xYzAuMSwwLDAuMiwwLjEsMC4zLDAuMSBjMC4xLDAsMC4xLDAsMC4yLDAuMWMwLjIsMC4xLDAuNCwwLjIsMC42LDAuM2MwLjItMS40LDAtMi40LTAuOC0zLjJDMTIuMiwwLjQsMTAuNiwwLDguNywwSDMuMUMyLjcsMCwyLjQsMC4zLDIuMywwLjdMMCwxNS40IEMwLDE1LjcsMC4yLDE2LDAuNSwxNmgzLjVMNS43LDQuNkM1LjgsNC40LDUuOSw0LjIsNi4xLDQuMXonLz48cGF0aCBzdHlsZT0nZmlsbDojMjc5MEMzOycgZD0nTTEzLjcsNC45QzEzLDguNywxMC40LDEwLDcuMiwxMEg1LjZjLTAuNCwwLTAuNywwLjMtMC44LDAuN2wtMS4xLDYuOGMwLDAuMywwLjIsMC41LDAuNCwwLjVINyBjMC4zLDAsMC42LTAuMywwLjctMC42bDAtMC4xbDAuNS0zLjVsMC0wLjJDOC40LDEzLjMsOC43LDEzLDksMTNoMC40YzIuOCwwLDUtMS4xLDUuNy00LjVjMC4zLTEuNCwwLjEtMi41LTAuNi0zLjQgYy0wLjItMC4yLTAuNS0wLjQtMC44LTAuNkMxMy43LDQuNywxMy43LDQuOCwxMy43LDQuOUwxMy43LDQuOXonLz48cGF0aCBzdHlsZT0nZmlsbDojMUYyNjRGOycgZD0nTTEzLDQuM2MtMC4xLDAtMC4yLTAuMS0wLjMtMC4xYy0wLjEsMC0wLjIsMC0wLjQtMC4xQzExLjgsNCwxMS4zLDQsMTAuOCw0SDYuNCBDNi4zLDQsNi4yLDQsNi4xLDQuMUM1LjksNC4yLDUuOCw0LjQsNS43LDQuNmwtMC45LDUuOWwwLDAuMkM0LjgsMTAuMyw1LjIsMTAsNS42LDEwaDEuNmMzLjIsMCw1LjctMS4zLDYuNS01LjEgYzAtMC4xLDAtMC4yLDAuMS0wLjNjLTAuMi0wLjEtMC40LTAuMi0wLjYtMC4zQzEzLjEsNC4zLDEzLDQuMywxMyw0LjMnLz48L3N2Zz48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHN0eWxlPSdkaXNwbGF5Om5vbmU7Jz48c3ltYm9sIGlkPSd5dHAtc3ZnLWNoZWNrbWFyaycgdmlld0JveD0nMCAwIDEyLjcgOS45Jz48cG9seWdvbiBwb2ludHM9JzEuNCw0LjIgMCw1LjcgNC4yLDkuOSAxMi43LDEuNCAxMS4zLDAgNC4yLDcuMScvPjwvc3ltYm9sPjxzeW1ib2wgaWQ9J3l0cC1zdmctc2F2ZScgdmlld0JveD0nMCAwIDE2IDE2Jz48cGF0aCBkPSdNMTMsMEgwdjE2aDE2VjNMMTMsMHogTTMsMWg5djZIM1YxeiBNMTQsMTVIMlY5aDEyVjE1eicvPjxyZWN0IHg9JzEwJyB5PScyJyB3aWR0aD0nMScgaGVpZ2h0PSc0Jy8+PC9zeW1ib2w+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlY3Rpb24gPT09ICJHRU4iKSB7CiAgICAgICAgICAgICAgICAgICAgdGVtcC5pbm5lckhUTUwgPSAvLwogICAgICAgICAgICAgICAgICAgICAgICBgPGRpdiBpZD0nUC1jb250ZW50Jz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9J1AtaGVhZGVyJz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSdQLXNhdmUnICAgIGRhdGEtcD0ndG5kfEdMQl9TVkUnPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9J1AtcmVzZXQnICAgZGF0YS1wPSd0bmR8R0xCX1JTRVQnPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9J1AtaW1wZXhwJyAgZGF0YS1wPSd0dGx8R0xCX0lNUFInPjxzdmcgY2xhc3M9J3NhdmUnPjx1c2UgeGxpbms6aHJlZj0nI3l0cC1zdmctc2F2ZScvPjwvc3ZnPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9J1AtaW1wbGFuZycgZGF0YS1wPSd0dGx8R0xCX0xPQ0xfTEFORyZ0bmR8TE9DQUxFJz48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgZGF0YS1wPSd0bmR8R0VOX1RUTCc+PC9oMj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIGNsYXNzPSdQLWhvcnonPjwvaHI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgZGF0YS1wPSd0bmR8R0VOX0dFTic+PC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGlucHV0IGlkPSdHRU5fTE9DTF9MQU5HJyAgICB0eXBlPSdjaGVja2JveCc+PGxhYmVsIGZvcj0nR0VOX0xPQ0xfTEFORycgICAgZGF0YS1wPSd0bmR8R0VOX0xPQ0xfTEFORyc+ICAgPC9sYWJlbD5cbjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUvUGFydGljbGUvd2lraS9GZWF0dXJlcyNjdXN0b21fbGFuZycgICAgIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48aW5wdXQgaWQ9J0dFTl9EU0JMX0FEUycgICAgIHR5cGU9J2NoZWNrYm94Jz48bGFiZWwgZm9yPSdHRU5fRFNCTF9BRFMnICAgICBkYXRhLXA9J3RuZHxHRU5fRFNCTF9BRFMnPiAgICA8L2xhYmVsPlxuPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL0ZlYXR1cmVzI291dHNpZGVfYWRzJyAgICAgZGF0YS1wPSd0dGx8RlRSX0RFU0MnIHRhcmdldD0nZmVhdHVyZXMnPj88L2E+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxpbnB1dCBpZD0nR0VOX1lUX0xPR09fTElOSycgdHlwZT0nY2hlY2tib3gnPjxsYWJlbCBmb3I9J0dFTl9ZVF9MT0dPX0xJTksnIGRhdGEtcD0ndG5kfEdFTl9ZVF9MT0dPX0xJTksnPjwvbGFiZWw+XG48YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2kvRmVhdHVyZXMjbG9nb19yZWRpcmVjdCcgICBkYXRhLXA9J3R0bHxGVFJfREVTQycgdGFyZ2V0PSdmZWF0dXJlcyc+PzwvYT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGlucHV0IGlkPSdHRU5fU1VCX0xJU1QnICAgICB0eXBlPSdjaGVja2JveCc+PGxhYmVsIGZvcj0nR0VOX1NVQl9MSVNUJyAgICAgZGF0YS1wPSd0bmR8R0VOX1NVQl9MSVNUJz4gICAgPC9sYWJlbD5cbjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUvUGFydGljbGUvd2lraS9GZWF0dXJlcyNzdWJfcGxheWxpc3QnICAgIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48aW5wdXQgaWQ9J0dFTl9JTkZfU0NSTCcgICAgIHR5cGU9J2NoZWNrYm94Jz48bGFiZWwgZm9yPSdHRU5fSU5GX1NDUkwnICAgICBkYXRhLXA9J3RuZHxHRU5fSU5GX1NDUkwnPiAgICA8L2xhYmVsPlxuPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL0ZlYXR1cmVzI2luZmluaXRlX3Njcm9sbCcgZGF0YS1wPSd0dGx8RlRSX0RFU0MnIHRhcmdldD0nZmVhdHVyZXMnPj88L2E+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxpbnB1dCBpZD0nR0VOX1BQT1RfT04nICAgICAgdHlwZT0nY2hlY2tib3gnPjxsYWJlbCBmb3I9J0dFTl9QUE9UX09OJyAgICAgIGRhdGEtcD0ndG5kfEdFTl9QUE9UX09OJz4gICAgIDwvbGFiZWw+XG48YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2kvRmVhdHVyZXMjcG9wb3V0X29uJyAgICAgICBkYXRhLXA9J3R0bHxGVFJfREVTQycgdGFyZ2V0PSdmZWF0dXJlcyc+PzwvYT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGlucHV0IGlkPSdHRU5fUkVNX0FQVU4nICAgICB0eXBlPSdjaGVja2JveCc+PGxhYmVsIGZvcj0nR0VOX1JFTV9BUFVOJyAgICAgZGF0YS1wPSd0bmR8R0VOX1JFTV9BUFVOJz4gICAgPC9sYWJlbD5cbjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUvUGFydGljbGUvd2lraS9GZWF0dXJlcyNyZW1vdmVfYXV0b3BsYXknIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48aW5wdXQgaWQ9J0dFTl9TUEZfT0ZGJyAgICAgIHR5cGU9J2NoZWNrYm94Jz48bGFiZWwgZm9yPSdHRU5fU1BGX09GRicgICAgICBkYXRhLXA9J3RuZHxHRU5fU1BGX09GRic+ICAgICA8L2xhYmVsPlxuPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL0ZlYXR1cmVzI3NwZl9vZmYnICAgICAgICAgZGF0YS1wPSd0dGx8RlRSX0RFU0MnIHRhcmdldD0nZmVhdHVyZXMnPj88L2E+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9J0dFTl9DSE5fREZMVF9QQUdFJyBkYXRhLXA9J3RuZHxHRU5fQ0hOX0RGTFRfUEFHRSc+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSdQLXNlbGVjdCc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9J0dFTl9DSE5fREZMVF9QQUdFJz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9J2RlZmF1bHQnICAgIGRhdGEtcD0ndG5kfEdFTl9DSE5fREZMVF9QQUdFX0RGTFQnPjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ndmlkZW9zJyAgICAgZGF0YS1wPSd0bmR8R0VOX0NITl9ERkxUX1BBR0VfVklEJz48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9J3BsYXlsaXN0cycgIGRhdGEtcD0ndG5kfEdFTl9DSE5fREZMVF9QQUdFX1BMJz48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9J2NoYW5uZWxzJyAgIGRhdGEtcD0ndG5kfEdFTl9DSE5fREZMVF9QQUdFX0NITic+PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSdkaXNjdXNzaW9uJyBkYXRhLXA9J3RuZHxHRU5fQ0hOX0RGTFRfUEFHRV9ESVNDJz48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9J2Fib3V0JyAgICAgIGRhdGEtcD0ndG5kfEdFTl9DSE5fREZMVF9QQUdFX0FCVCc+PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL0ZlYXR1cmVzI2NoYW5uZWxfcGFnZScgZGF0YS1wPSd0dGx8RlRSX0RFU0MnIHRhcmdldD0nZmVhdHVyZXMnPj88L2E+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBkYXRhLXA9J3RuZHxHRU5fTFlUJz48L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48aW5wdXQgaWQ9J0dFTl9HUklEX1NVQlMnICAgICB0eXBlPSdjaGVja2JveCc+PGxhYmVsIGZvcj0nR0VOX0dSSURfU1VCUycgICAgIGRhdGEtcD0ndG5kfEdFTl9HUklEX1NVQlMnPiAgICA8L2xhYmVsPlxuPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL0ZlYXR1cmVzI3N1Yl9ncmlkJyAgICAgICAgICAgICBkYXRhLXA9J3R0bHxGVFJfREVTQycgdGFyZ2V0PSdmZWF0dXJlcyc+PzwvYT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGlucHV0IGlkPSdHRU5fR1JJRF9TUkNIJyAgICAgdHlwZT0nY2hlY2tib3gnPjxsYWJlbCBmb3I9J0dFTl9HUklEX1NSQ0gnICAgICBkYXRhLXA9J3RuZHxHRU5fR1JJRF9TUkNIJz4gICAgPC9sYWJlbD5cbjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUvUGFydGljbGUvd2lraS9GZWF0dXJlcyNzZWFyY2hfZ3JpZCcgICAgICAgICAgZGF0YS1wPSd0dGx8RlRSX0RFU0MnIHRhcmdldD0nZmVhdHVyZXMnPj88L2E+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxpbnB1dCBpZD0nR0VOX0JUVFJfTlRGJyAgICAgIHR5cGU9J2NoZWNrYm94Jz48bGFiZWwgZm9yPSdHRU5fQlRUUl9OVEYnICAgICAgZGF0YS1wPSd0bmR8R0VOX0JUVFJfTlRGJz4gICAgIDwvbGFiZWw+XG48YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2kvRmVhdHVyZXMjYmx1ZV9ib3gnICAgICAgICAgICAgIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48aW5wdXQgaWQ9J0dFTl9EU0JfSFZSQycgICAgICB0eXBlPSdjaGVja2JveCc+PGxhYmVsIGZvcj0nR0VOX0RTQl9IVlJDJyAgICAgIGRhdGEtcD0ndG5kfEdFTl9EU0JfSFZSQyc+ICAgICA8L2xhYmVsPlxuPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL0ZlYXR1cmVzI2hvdmVyY2FyZHNfb2ZmJyAgICAgICBkYXRhLXA9J3R0bHxGVFJfREVTQycgdGFyZ2V0PSdmZWF0dXJlcyc+PzwvYT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGlucHV0IGlkPSdHRU5fQ01QVF9UVExTJyAgICAgdHlwZT0nY2hlY2tib3gnPjxsYWJlbCBmb3I9J0dFTl9DTVBUX1RUTFMnICAgICBkYXRhLXA9J3RuZHxHRU5fQ01QVF9UVExTJz4gICAgPC9sYWJlbD5cbjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUvUGFydGljbGUvd2lraS9GZWF0dXJlcyNmZWVkX3RpdGxlcycgICAgICAgICAgZGF0YS1wPSd0dGx8RlRSX0RFU0MnIHRhcmdldD0nZmVhdHVyZXMnPj88L2E+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxpbnB1dCBpZD0nR0VOX0JMVUVfR0xPVycgICAgIHR5cGU9J2NoZWNrYm94Jz48bGFiZWwgZm9yPSdHRU5fQkxVRV9HTE9XJyAgICAgZGF0YS1wPSd0bmR8R0VOX0JMVUVfR0xPVyc+ICAgIDwvbGFiZWw+XG48YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2kvRmVhdHVyZXMjYmx1ZV9nbG93JyAgICAgICAgICAgIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48aW5wdXQgaWQ9J0dFTl9ISURFX0ZUUicgICAgICB0eXBlPSdjaGVja2JveCc+PGxhYmVsIGZvcj0nR0VOX0hJREVfRlRSJyAgICAgIGRhdGEtcD0ndG5kfEdFTl9ISURFX0ZUUic+ICAgICA8L2xhYmVsPlxuPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL0ZlYXR1cmVzI2hpZGVfZm9vdGVyJyAgICAgICAgICBkYXRhLXA9J3R0bHxGVFJfREVTQycgdGFyZ2V0PSdmZWF0dXJlcyc+PzwvYT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGlucHV0IGlkPSdHRU5fSERFX1JFQ01fU0RCUicgdHlwZT0nY2hlY2tib3gnPjxsYWJlbCBmb3I9J0dFTl9IREVfUkVDTV9TREJSJyBkYXRhLXA9J3RuZHxHRU5fSERFX1JFQ01fU0RCUic+PC9sYWJlbD5cbjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUvUGFydGljbGUvd2lraS9GZWF0dXJlcyNoaWRlX3JlY29tX3NpZGViYXInICAgZGF0YS1wPSd0dGx8RlRSX0RFU0MnIHRhcmdldD0nZmVhdHVyZXMnPj88L2E+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxpbnB1dCBpZD0nR0VOX0hERV9TUkNIX1NEQlInIHR5cGU9J2NoZWNrYm94Jz48bGFiZWwgZm9yPSdHRU5fSERFX1NSQ0hfU0RCUicgZGF0YS1wPSd0bmR8R0VOX0hERV9TUkNIX1NEQlInPjwvbGFiZWw+XG48YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2kvRmVhdHVyZXMjaGlkZV9zZWFyY2hfc2lkZWJhcicgIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48aW5wdXQgaWQ9J0dFTl9IREVfQ0hOX1NEQlInICB0eXBlPSdjaGVja2JveCc+PGxhYmVsIGZvcj0nR0VOX0hERV9DSE5fU0RCUicgIGRhdGEtcD0ndG5kfEdFTl9IREVfQ0hOX1NEQlInPiA8L2xhYmVsPlxuPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL0ZlYXR1cmVzI2hpZGVfY2hhbm5lbF9zaWRlYmFyJyBkYXRhLXA9J3R0bHxGVFJfREVTQycgdGFyZ2V0PSdmZWF0dXJlcyc+PzwvYT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncy5HRU5fTE9DTF9MQU5HICYmIHVzZXJfc2V0dGluZ3MubG9jYWxMYW5nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAuY29udGVudC5xdWVyeVNlbGVjdG9yKCIuUC1pbXBsYW5nIikuZGF0YXNldC5wID0gIkdMQl9MT0NMX0xBTkdfQ1NUTSI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWN0aW9uID09PSAiVklEIikgewogICAgICAgICAgICAgICAgICAgIHRlbXAuaW5uZXJIVE1MID0gLy8KICAgICAgICAgICAgICAgICAgICAgICAgYDxkaXYgaWQ9J1AtY29udGVudCc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSdQLWhlYWRlcic+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0nUC1zYXZlJyAgICBkYXRhLXA9J3RuZHxHTEJfU1ZFJz48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSdQLXJlc2V0JyAgIGRhdGEtcD0ndG5kfEdMQl9SU0VUJz48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSdQLWltcGV4cCcgIGRhdGEtcD0ndHRsfEdMQl9JTVBSJz48c3ZnIGNsYXNzPSdzYXZlJz48dXNlIHhsaW5rOmhyZWY9JyN5dHAtc3ZnLXNhdmUnLz48L3N2Zz48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSdQLWltcGxhbmcnIGRhdGEtcD0ndHRsfEdMQl9MT0NMX0xBTkcmdG5kfExPQ0FMRSc+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGRhdGEtcD0ndG5kfFZJRF9UVEwnPjwvaDI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxociBjbGFzcz0nUC1ob3J6Jz48L2hyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGRhdGEtcD0ndG5kfFZJRF9QTFInPjwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxpbnB1dCBpZD0nVklEX1BMUl9BRFMnICAgICAgICB0eXBlPSdjaGVja2JveCc+PGxhYmVsIGZvcj0nVklEX1BMUl9BRFMnICAgICAgZGF0YS1wPSd0bmR8VklEX1BMUl9BRFMnPiAgICAgPC9sYWJlbD5cbjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUvUGFydGljbGUvd2lraS9GZWF0dXJlcyN2aWRlb19hZHMnICAgICAgICAgICAgIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48aW5wdXQgaWQ9J1ZJRF9TVUJfQURTJyAgICAgICAgdHlwZT0nY2hlY2tib3gnPjxsYWJlbCBmb3I9J1ZJRF9TVUJfQURTJyAgICAgIGRhdGEtcD0ndG5kfFZJRF9TVUJfQURTJz4gICAgIDwvbGFiZWw+XG48YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2kvRmVhdHVyZXMjc3Vic19hZHNfb24nICAgICAgICAgICBkYXRhLXA9J3R0bHxGVFJfREVTQycgdGFyZ2V0PSdmZWF0dXJlcyc+PzwvYT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGlucHV0IGlkPSdWSURfUExSX0FMVklTJyAgICAgIHR5cGU9J2NoZWNrYm94Jz48bGFiZWwgZm9yPSdWSURfUExSX0FMVklTJyAgICBkYXRhLXA9J3RuZHxWSURfUExSX0FMVklTJz4gICA8L2xhYmVsPlxuPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL0ZlYXR1cmVzI2Zsb2F0aW5nX3BsYXllcicgICAgICAgZGF0YS1wPSd0dGx8RlRSX0RFU0MnIHRhcmdldD0nZmVhdHVyZXMnPj88L2E+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxpbnB1dCBpZD0nVklEX1BMUl9BTFZJU19XRFRIJyB0eXBlPSd0ZXh0JyBwbGFjZWhvbGRlcj0nMzUwJyBzaXplPSc2Jz48bGFiZWwgZm9yPSdWSURfUExSX0FMVklTX1dEVEgnIGRhdGEtcD0ndG5kfFZJRF9QTFJfQUxWSVNfV0RUSCc+PC9sYWJlbD5cbjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUvUGFydGljbGUvd2lraS9GZWF0dXJlcyNmbG9hdGluZ19wbGF5ZXJfd2lkdGgnIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48aW5wdXQgaWQ9J1ZJRF9QTFJfQVRQTCcgICAgICAgdHlwZT0nY2hlY2tib3gnPjxsYWJlbCBmb3I9J1ZJRF9QTFJfQVRQTCcgICAgIGRhdGEtcD0ndG5kfFZJRF9QTFJfQVRQTCc+ICAgIDwvbGFiZWw+XG48YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2kvRmVhdHVyZXMjdmlkZW9fYXV0b3BsYXknICAgICAgICBkYXRhLXA9J3R0bHxGVFJfREVTQycgdGFyZ2V0PSdmZWF0dXJlcyc+PzwvYT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGlucHV0IGlkPSdWSURfUExSX0NDJyAgICAgICAgIHR5cGU9J2NoZWNrYm94Jz48bGFiZWwgZm9yPSdWSURfUExSX0NDJyAgICAgICBkYXRhLXA9J3RuZHxWSURfUExSX0NDJz4gICAgICA8L2xhYmVsPlxuPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL0ZlYXR1cmVzI3N1YnRpdGxlc19vZmYnICAgICAgICAgZGF0YS1wPSd0dGx8RlRSX0RFU0MnIHRhcmdldD0nZmVhdHVyZXMnPj88L2E+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxpbnB1dCBpZD0nVklEX1BMUl9BTlRTJyAgICAgICB0eXBlPSdjaGVja2JveCc+PGxhYmVsIGZvcj0nVklEX1BMUl9BTlRTJyAgICAgZGF0YS1wPSd0bmR8VklEX1BMUl9BTlRTJz4gICAgPC9sYWJlbD5cbjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUvUGFydGljbGUvd2lraS9GZWF0dXJlcyNhbm5vdGF0aW9uc19vZmYnICAgICAgIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48aW5wdXQgaWQ9J1ZJRF9FTkRfU0hSRScgICAgICAgdHlwZT0nY2hlY2tib3gnPjxsYWJlbCBmb3I9J1ZJRF9FTkRfU0hSRScgICAgIGRhdGEtcD0ndG5kfFZJRF9FTkRfU0hSRSc+ICAgIDwvbGFiZWw+XG48YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2kvRmVhdHVyZXMjc2hhcmVfcGFuZWxfb2ZmJyAgICAgICBkYXRhLXA9J3R0bHxGVFJfREVTQycgdGFyZ2V0PSdmZWF0dXJlcyc+PzwvYT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGlucHV0IGlkPSdWSURfUExSX1ZPTF9NRU0nICAgIHR5cGU9J2NoZWNrYm94Jz48bGFiZWwgZm9yPSdWSURfUExSX1ZPTF9NRU0nICBkYXRhLXA9J3RuZHxWSURfUExSX1ZPTF9NRU0nPiA8L2xhYmVsPlxuPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL0ZlYXR1cmVzI3JlbWVtYmVyX3ZvbHVtZScgICAgICAgZGF0YS1wPSd0dGx8RlRSX0RFU0MnIHRhcmdldD0nZmVhdHVyZXMnPj88L2E+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxpbnB1dCBpZD0nVklEX1BMUl9WT0xfTEROJyAgICB0eXBlPSdjaGVja2JveCc+PGxhYmVsIGZvcj0nVklEX1BMUl9WT0xfTEROJyAgZGF0YS1wPSd0bmR8VklEX1BMUl9WT0xfTEROJz4gPC9sYWJlbD5cbjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUvUGFydGljbGUvd2lraS9GZWF0dXJlcyNkaXNhYmxlX25vcm1hbGlzYXRpb24nIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48aW5wdXQgaWQ9J1ZJRF9QTFJfQUxBQ1QnICAgICAgdHlwZT0nY2hlY2tib3gnPjxsYWJlbCBmb3I9J1ZJRF9QTFJfQUxBQ1QnICAgIGRhdGEtcD0ndG5kfFZJRF9QTFJfQUxBQ1QnPiAgIDwvbGFiZWw+XG48YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2kvRmVhdHVyZXMjc2hvcnRjdXRzX29uJyAgICAgICAgICBkYXRhLXA9J3R0bHxGVFJfREVTQycgdGFyZ2V0PSdmZWF0dXJlcyc+PzwvYT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGlucHV0IGlkPSdWSURfUExSX1NJWkVfTUVNJyAgIHR5cGU9J2NoZWNrYm94Jz48bGFiZWwgZm9yPSdWSURfUExSX1NJWkVfTUVNJyBkYXRhLXA9J3RuZHxWSURfUExSX1NJWkVfTUVNJz48L2xhYmVsPlxuPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL0ZlYXR1cmVzI3JlbWVtYmVyX21vZGUnICAgICAgICAgZGF0YS1wPSd0dGx8RlRSX0RFU0MnIHRhcmdldD0nZmVhdHVyZXMnPj88L2E+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxpbnB1dCBpZD0nVklEX1ZPTF9XSEVFTCcgICAgICB0eXBlPSdjaGVja2JveCc+PGxhYmVsIGZvcj0nVklEX1ZPTF9XSEVFTCcgICAgZGF0YS1wPSd0bmR8VklEX1ZPTF9XSEVFTCc+ICAgPC9sYWJlbD5cbjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUvUGFydGljbGUvd2lraS9GZWF0dXJlcyN3aGVlbF92b2x1bWUnICAgICAgICAgIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48aW5wdXQgaWQ9J1ZJRF9QTFJfSEZSJyAgICAgICAgdHlwZT0nY2hlY2tib3gnPjxsYWJlbCBmb3I9J1ZJRF9QTFJfSEZSJyAgICAgIGRhdGEtcD0ndG5kfFZJRF9QTFJfSEZSJz4gICAgIDwvbGFiZWw+XG48YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2kvRmVhdHVyZXMjaGZyX29mZicgICAgICAgICAgICAgICBkYXRhLXA9J3R0bHxGVFJfREVTQycgdGFyZ2V0PSdmZWF0dXJlcyc+PzwvYT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGlucHV0IGlkPSdWSURfUExSX0hUTUw1JyAgICAgIHR5cGU9J2NoZWNrYm94Jz48bGFiZWwgZm9yPSdWSURfUExSX0hUTUw1JyAgICBkYXRhLXA9J3RuZHxWSURfUExSX0hUTUw1Jz4gICA8L2xhYmVsPlxuPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL0ZlYXR1cmVzI2ZvcmNlX2h0bWw1JyAgICAgICAgICAgZGF0YS1wPSd0dGx8RlRSX0RFU0MnIHRhcmdldD0nZmVhdHVyZXMnPj88L2E+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9J1ZJRF9ERkxUX1FMVFknIGRhdGEtcD0ndG5kfFZJRF9ERkxUX1FMVFknPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0nUC1zZWxlY3QnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSdWSURfREZMVF9RTFRZJz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9J2F1dG8nICAgIGRhdGEtcD0ndG5kfFZJRF9ERkxUX1FMVFlfQVVUTyc+PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSdoaWdocmVzJyBkYXRhLXA9J3RuZHxWSURfREZMVF9RTFRZX09SSUcnPjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0naGQyODgwJyAgZGF0YS1wPSd0bmR8VklEX0RGTFRfUUxUWV8yODgwJz48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9J2hkMjE2MCcgIGRhdGEtcD0ndG5kfFZJRF9ERkxUX1FMVFlfMjE2MCc+PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSdoZDE0NDAnICBkYXRhLXA9J3RuZHxWSURfREZMVF9RTFRZXzE0NDAnPjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0naGQxMDgwJyAgZGF0YS1wPSd0bmR8VklEX0RGTFRfUUxUWV8xMDgwJz48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9J2hkNzIwJyAgIGRhdGEtcD0ndG5kfFZJRF9ERkxUX1FMVFlfNzIwJyA+PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSdsYXJnZScgICBkYXRhLXA9J3RuZHxWSURfREZMVF9RTFRZX0xSRycgPjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nbWVkaXVtJyAgZGF0YS1wPSd0bmR8VklEX0RGTFRfUUxUWV9NRE0nID48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9J3NtYWxsJyAgIGRhdGEtcD0ndG5kfFZJRF9ERkxUX1FMVFlfU01MJyA+PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSd0aW55JyAgICBkYXRhLXA9J3RuZHxWSURfREZMVF9RTFRZX1ROWScgPjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUvUGFydGljbGUvd2lraS9GZWF0dXJlcyNkZWZhdWx0X3F1YWxpdHknIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgZGF0YS1wPSd0bmR8VklEX1BMUl9MWVQnPjwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxpbnB1dCBpZD0nVklEX1BMUl9JTkZPJyAgICAgdHlwZT0nY2hlY2tib3gnPjxsYWJlbCBmb3I9J1ZJRF9QTFJfSU5GTycgICAgIGRhdGEtcD0ndG5kfFZJRF9QTFJfSU5GTyc+ICAgIDwvbGFiZWw+XG48YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2kvRmVhdHVyZXMjaW5mb19iYXInICAgICAgICAgIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48aW5wdXQgaWQ9J1ZJRF9QTFJfRFlOX1NJWkUnIHR5cGU9J2NoZWNrYm94Jz48bGFiZWwgZm9yPSdWSURfUExSX0RZTl9TSVpFJyBkYXRhLXA9J3RuZHxWSURfUExSX0RZTl9TSVpFJz48L2xhYmVsPlxuPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL0ZlYXR1cmVzI2R5bmFtaWNfc2l6ZV9vZmYnICBkYXRhLXA9J3R0bHxGVFJfREVTQycgdGFyZ2V0PSdmZWF0dXJlcyc+PzwvYT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGlucHV0IGlkPSdWSURfUExSX0ZJVCcgICAgICB0eXBlPSdjaGVja2JveCc+PGxhYmVsIGZvcj0nVklEX1BMUl9GSVQnICAgICAgZGF0YS1wPSd0bmR8VklEX1BMUl9GSVQnPiAgICAgPC9sYWJlbD5cbjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUvUGFydGljbGUvd2lraS9GZWF0dXJlcyNmaXRfdG9fcGFnZScgICAgICAgZGF0YS1wPSd0dGx8RlRSX0RFU0MnIHRhcmdldD0nZmVhdHVyZXMnPj88L2E+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxpbnB1dCBpZD0nVklEX1BMUl9GSVRfV0RUSCcgdHlwZT0ndGV4dCcgcGxhY2Vob2xkZXI9JzEyODBweCcgc2l6ZT0nNic+PGxhYmVsIGZvcj0nVklEX1BMUl9GSVRfV0RUSCcgZGF0YS1wPSd0bmR8VklEX1BMUl9GSVRfV0RUSCc+PC9sYWJlbD5cbjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUvUGFydGljbGUvd2lraS9GZWF0dXJlcyNmaXRfbWF4X3dpZHRoJyBkYXRhLXA9J3R0bHxGVFJfREVTQycgdGFyZ2V0PSdmZWF0dXJlcyc+PzwvYT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBkYXRhLXA9J3RuZHxWSURfUExTVCc+PC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGlucHV0IGlkPSdWSURfUExTVF9BVFBMJyAgICB0eXBlPSdjaGVja2JveCc+PGxhYmVsIGZvcj0nVklEX1BMU1RfQVRQTCcgICAgZGF0YS1wPSd0bmR8VklEX1BMU1RfQVRQTCc+ICAgPC9sYWJlbD5cbjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUvUGFydGljbGUvd2lraS9GZWF0dXJlcyNwbGF5bGlzdF9hdXRvcGxheScgZGF0YS1wPSd0dGx8RlRSX0RFU0MnIHRhcmdldD0nZmVhdHVyZXMnPj88L2E+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxpbnB1dCBpZD0nVklEX1BMU1RfUlZSUycgICAgdHlwZT0nY2hlY2tib3gnPjxsYWJlbCBmb3I9J1ZJRF9QTFNUX1JWUlMnICAgIGRhdGEtcD0ndG5kfFZJRF9QTFNUX1JWUlMnPiAgIDwvbGFiZWw+XG48YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2kvRmVhdHVyZXMjcGxheWxpc3RfcmV2ZXJzZScgIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGRhdGEtcD0ndG5kfFZJRF9MQVlUJz48L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48aW5wdXQgaWQ9J1ZJRF9QUE9UX1NaJyB0eXBlPSd0ZXh0JyBwbGFjZWhvbGRlcj0nNTMzJyBzaXplPSc2Jz48bGFiZWwgZm9yPSdWSURfUFBPVF9TWicgZGF0YS1wPSd0bmR8VklEX1BQT1RfU1onPjwvbGFiZWw+XG48YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2kvRmVhdHVyZXMjcG9wb3V0X3NpemUnIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSdWSURfSElERV9DT01TJyBkYXRhLXA9J3RuZHxWSURfSElERV9DT01TJz48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9J1Atc2VsZWN0Jz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0nVklEX0hJREVfQ09NUyc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPScwJyBkYXRhLXA9J3RuZHxWSURfSElERV9DT01TX1NIT1cnPjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nMScgZGF0YS1wPSd0bmR8VklEX0hJREVfQ09NU19ISURFJz48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9JzInIGRhdGEtcD0ndG5kfFZJRF9ISURFX0NPTVNfUkVNJz48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2kvRmVhdHVyZXMjY29tbWVudHMnIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxpbnB1dCBpZD0nVklEX1RUTF9DTVBUJyAgICAgIHR5cGU9J2NoZWNrYm94Jz48bGFiZWwgZm9yPSdWSURfVFRMX0NNUFQnICAgICAgZGF0YS1wPSd0bmR8VklEX1RUTF9DTVBUJz4gICAgIDwvbGFiZWw+XG48YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2kvRmVhdHVyZXMjdmlkZW9fdGl0bGUnICAgICAgICAgIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48aW5wdXQgaWQ9J1ZJRF9ERVNDX1NIUlQnICAgICB0eXBlPSdjaGVja2JveCc+PGxhYmVsIGZvcj0nVklEX0RFU0NfU0hSVCcgICAgIGRhdGEtcD0ndG5kfFZJRF9ERVNDX1NIUlQnPiAgICA8L2xhYmVsPlxuPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL0ZlYXR1cmVzI2xhYmVsbGVzc19idXR0b25zJyAgICBkYXRhLXA9J3R0bHxGVFJfREVTQycgdGFyZ2V0PSdmZWF0dXJlcyc+PzwvYT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGlucHV0IGlkPSdWSURfVklEX0NOVCcgICAgICAgdHlwZT0nY2hlY2tib3gnPjxsYWJlbCBmb3I9J1ZJRF9WSURfQ05UJyAgICAgICBkYXRhLXA9J3RuZHxWSURfVklEX0NOVCc+ICAgICAgPC9sYWJlbD5cbjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUvUGFydGljbGUvd2lraS9GZWF0dXJlcyN1cGxvYWRfY291bnRlcicgICAgICAgZGF0YS1wPSd0dGx8RlRSX0RFU0MnIHRhcmdldD0nZmVhdHVyZXMnPj88L2E+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxpbnB1dCBpZD0nVklEX1BPU1RfVElNRScgICAgIHR5cGU9J2NoZWNrYm94Jz48bGFiZWwgZm9yPSdWSURfUE9TVF9USU1FJyAgICAgZGF0YS1wPSd0bmR8VklEX1BPU1RfVElNRSc+ICAgIDwvbGFiZWw+XG48YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2kvRmVhdHVyZXMjcmVsYXRpdmVfdXBsb2FkX3RpbWUnIGRhdGEtcD0ndHRsfEZUUl9ERVNDJyB0YXJnZXQ9J2ZlYXR1cmVzJz4/PC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48aW5wdXQgaWQ9J1ZJRF9ISURFX0RFVExTJyAgICB0eXBlPSdjaGVja2JveCc+PGxhYmVsIGZvcj0nVklEX0hJREVfREVUTFMnICAgIGRhdGEtcD0ndG5kfFZJRF9ISURFX0RFVExTJz4gICA8L2xhYmVsPlxuPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL0ZlYXR1cmVzI2hpZGVfdmlkZW9fZGV0YWlscycgICBkYXRhLXA9J3R0bHxGVFJfREVTQycgdGFyZ2V0PSdmZWF0dXJlcyc+PzwvYT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGlucHV0IGlkPSdWSURfTEFZVF9BVVRPX1BOTCcgdHlwZT0nY2hlY2tib3gnPjxsYWJlbCBmb3I9J1ZJRF9MQVlUX0FVVE9fUE5MJyBkYXRhLXA9J3RuZHxWSURfTEFZVF9BVVRPX1BOTCc+PC9sYWJlbD5cbjxhIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9QYXJ0aWNsZUNvcmUvUGFydGljbGUvd2lraS9GZWF0dXJlcyNleHBhbmRfZGVzY3JpcHRpb24nICAgZGF0YS1wPSd0dGx8RlRSX0RFU0MnIHRhcmdldD0nZmVhdHVyZXMnPj88L2E+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJfc2V0dGluZ3MuR0VOX0xPQ0xfTEFORyAmJiB1c2VyX3NldHRpbmdzLmxvY2FsTGFuZykgewogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmNvbnRlbnQucXVlcnlTZWxlY3RvcigiLlAtaW1wbGFuZyIpLmRhdGFzZXQucCA9ICJHTEJfTE9DTF9MQU5HX0NTVE0iOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VjdGlvbiA9PT0gIkJMSyIpIHsKICAgICAgICAgICAgICAgICAgICB0ZW1wLmlubmVySFRNTCA9IC8vCiAgICAgICAgICAgICAgICAgICAgICAgIGA8ZGl2IGlkPSdQLWNvbnRlbnQnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0nUC1oZWFkZXInPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9J1Atc2F2ZScgICAgZGF0YS1wPSd0bmR8R0xCX1NWRSc+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0nUC1yZXNldCcgICBkYXRhLXA9J3RuZHxHTEJfUlNFVCc+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0nUC1pbXBleHAnICBkYXRhLXA9J3R0bHxHTEJfSU1QUic+PHN2ZyBjbGFzcz0nc2F2ZSc+PHVzZSB4bGluazpocmVmPScjeXRwLXN2Zy1zYXZlJy8+PC9zdmc+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0nUC1pbXBsYW5nJyBkYXRhLXA9J3R0bHxHTEJfTE9DTF9MQU5HJnRuZHxMT0NBTEUnPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBkYXRhLXA9J3RuZHxCTEtfVFRMJz48L2gyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aHIgY2xhc3M9J1AtaG9yeicvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGRhdGEtcD0ndG5kfEJMS19CTEsnPjwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxpbnB1dCBpZD0nQkxLX09OJyB0eXBlPSdjaGVja2JveCc+PGxhYmVsIGZvcj0nQkxLX09OJyBkYXRhLXA9J3RuZHxCTEtfT04nPjwvbGFiZWw+XG48YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL3dpa2kvRmVhdHVyZXMjYmxhY2tsaXN0X29uJyBkYXRhLXA9J3R0bHxGVFJfREVTQycgdGFyZ2V0PSdmZWF0dXJlcyc+PzwvYT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9J2JsYWNrbGlzdCc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0nYmxhY2tsaXN0LWNvbnRyb2xzJz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0nYmxhY2tsaXN0LWVkaXQnICBjbGFzcz0neXQtdWl4LWJ1dHRvbiB5dC11aXgtc2Vzc2lvbmxpbmsgeXQtdWl4LWJ1dHRvbi1kZWZhdWx0IHl0LXVpeC1idXR0b24tc2l6ZS1kZWZhdWx0Jz48c3BhbiBjbGFzcz0neXQtdWl4LWJ1dHRvbi1jb250ZW50JyBkYXRhLXA9J3RuZHxCTENLX0VESVQnPjwvc3Bhbj48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0nYmxhY2tsaXN0LXNhdmUnICBjbGFzcz0neXQtdWl4LWJ1dHRvbiB5dC11aXgtc2Vzc2lvbmxpbmsgeXQtdWl4LWJ1dHRvbi1kZWZhdWx0IHl0LXVpeC1idXR0b24tc2l6ZS1kZWZhdWx0Jz48c3BhbiBjbGFzcz0neXQtdWl4LWJ1dHRvbi1jb250ZW50JyBkYXRhLXA9J3RuZHxCTENLX1NBVkUnPjwvc3Bhbj48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0nYmxhY2tsaXN0LWNsb3NlJyBjbGFzcz0neXQtdWl4LWJ1dHRvbiB5dC11aXgtc2Vzc2lvbmxpbmsgeXQtdWl4LWJ1dHRvbi1kZWZhdWx0IHl0LXVpeC1idXR0b24tc2l6ZS1kZWZhdWx0Jz48c3BhbiBjbGFzcz0neXQtdWl4LWJ1dHRvbi1jb250ZW50JyBkYXRhLXA9J3RuZHxCTENLX0NMU0UnPjwvc3Bhbj48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9J2JsYWNrbGlzdC1lZGl0LWxpc3QnPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxici8+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJfc2V0dGluZ3MuR0VOX0xPQ0xfTEFORyAmJiB1c2VyX3NldHRpbmdzLmxvY2FsTGFuZykgewogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLmNvbnRlbnQucXVlcnlTZWxlY3RvcigiLlAtaW1wbGFuZyIpLmRhdGFzZXQucCA9ICJ0dGx8R0xCX0xPQ0xfTEFORyZ0bmR8R0xCX0xPQ0xfTEFOR19DU1RNIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlY3Rpb24gPT09ICJBQlQiKSB7CiAgICAgICAgICAgICAgICAgICAgdGVtcC5pbm5lckhUTUwgPSAvLwogICAgICAgICAgICAgICAgICAgICAgICBgPGRpdiBpZD0nUC1jb250ZW50Jz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9J1AtaGVhZGVyJz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgZGF0YS1wPSd0bmR8QUJUX1RUTCc+PC9oMj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyIGNsYXNzPSdQLWhvcnonLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBkYXRhLXA9J3RuZHxBQlRfVEhLUyc+PC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGEgdGFyZ2V0PSdfYmxhbmsnIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9ZZVBwSGEnPkplcHBlIFJ1bmUgTW9ydGVuc2VuPC9hPjxzcGFuIGRhdGEtcD0ndG5kfEFCVF9USEtTX1lFUFBIQSc+PC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48YSB0YXJnZXQ9J19ibGFuaycgaHJlZj0naHR0cDovL3d3dy5ncmVhc2VzcG90Lm5ldC8nPkdyZWFzZW1vbmtleTwvYT4gKyA8YSBocmVmPSdodHRwOi8vdGFtcGVybW9ua2V5Lm5ldC8nPlRhbXBlcm1vbmtleTwvYT48c3BhbiBkYXRhLXA9J3RuZHxBQlRfVEhLU19VU0VSU0NSSVBUJz48L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxhIHRhcmdldD0nX2JsYW5rJyBocmVmPSdodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vJz5TdGFjayBPdmVyZmxvdzwvYT48c3BhbiBkYXRhLXA9J3RuZHxBQlRfVEhLU19TVEFDS09WJz48L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgZGF0YS1wPSd0bmR8QUJUX0lORk8nPjwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxhIHRhcmdldD0nX2JsYW5rJyBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlLyc+R2l0SHViPC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48YSB0YXJnZXQ9J19ibGFuaycgaHJlZj0naHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9lbi91c2Vycy84MjIzLXBhcnRpY2xlY29yZSc+R3JlYXN5IEZvcms8L2E+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxhIHRhcmdldD0nX2JsYW5rJyBocmVmPSdodHRwOi8vb3BlbnVzZXJqcy5vcmcvc2NyaXB0cy9QYXJ0aWNsZUNvcmUvJz5PcGVuVXNlckpTPC9hPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaW5wdXRzID0gdGVtcC5jb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0W3R5cGU9J2NoZWNrYm94J10gKyBsYWJlbCIpOwogICAgICAgICAgICAgICAgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsICJzdmciKTsKICAgICAgICAgICAgICAgIHN2Zy5pbm5lckhUTUwgPSAiPHVzZSB4bGluazpocmVmPScjeXRwLXN2Zy1jaGVja21hcmsnPiI7CiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaW5wdXRzW2ldLmFwcGVuZENoaWxkKHN2Zy5jbG9uZU5vZGUodHJ1ZSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHNldExvY2FsZShnZXRWYWx1ZXModGVtcC5jb250ZW50KSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gZXhwb3J0U2V0dGluZ3ModGFyZ2V0KSB7CiAgICAgICAgICAgICAgICB2YXIgZXhwQ29udDsKICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCJQLWltcGV4cCIpIHx8IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoIlAtaW1wbGFuZyIpKSB7CiAgICAgICAgICAgICAgICAgICAgZXhwQ29udCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJleHAtY29udCIpOwogICAgICAgICAgICAgICAgICAgIGlmIChleHBDb250KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGV4cENvbnQucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZXhwQ29udCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRlbXBsYXRlIik7CiAgICAgICAgICAgICAgICAgICAgZXhwQ29udC5pbm5lckhUTUwgPSAvLwogICAgICAgICAgICAgICAgICAgICAgICBgPGRpdiBpZD0nZXhwLWNvbnQnPgogICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSdpbXBsYW5nLXNhdmUnIGNsYXNzPSd5dC11aXgtYnV0dG9uIHl0LXVpeC1zZXNzaW9ubGluayB5dC11aXgtYnV0dG9uLWRlZmF1bHQgeXQtdWl4LWJ1dHRvbi1zaXplLWRlZmF1bHQnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSd5dC11aXgtYnV0dG9uLWNvbnRlbnQnIGRhdGEtcD0ndG5kfEdMQl9JTVBSX1NBVkUnPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9J2ltcGV4cC1saXN0Jz48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCJQLWltcGV4cCIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGV4cENvbnQuY29udGVudC5xdWVyeVNlbGVjdG9yKCIjaW1wbGFuZy1zYXZlIikuaWQgPSAiaW1wZXhwLXNhdmUiOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBleHBDb250ID0gc2V0TG9jYWxlKGV4cENvbnQuY29udGVudCkuZmlyc3RDaGlsZDsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiUC1jb250ZW50IikuYXBwZW5kQ2hpbGQoZXhwQ29udCk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImltcGV4cC1saXN0IikudmFsdWUgPSBKU09OLnN0cmluZ2lmeSgodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygiUC1pbXBleHAiKSAmJiB1c2VyX3NldHRpbmdzKSB8fCB1c2VyX3NldHRpbmdzLmxvY2FsTGFuZyB8fCBsYW5ndWFnZSwgdW5kZWZpbmVkLCAyKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LmlkID09PSAiaW1wZXhwLXNhdmUiIHx8IHRhcmdldC5pZCA9PT0gImltcGxhbmctc2F2ZSIpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmlkID09PSAiaW1wbGFuZy1zYXZlIikgewogICAgICAgICAgICAgICAgICAgICAgICBzZXQoImxvY2FsTGFuZyIsIEpTT04ucGFyc2UoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImltcGV4cC1saXN0IikudmFsdWUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldCgidXNlcl9zZXR0aW5ncyIsIEpTT04ucGFyc2UoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImltcGV4cC1saXN0IikudmFsdWUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NNZW51LnNldHRpbmdzQnV0dG9uLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzTWVudS5zZXR0aW5nc0J1dHRvbi5jbGljaygpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBzZXRCbGFja0xpc3QodGFyZ2V0KSB7CiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmlkID09PSAiYmxhY2tsaXN0LWVkaXQiKSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJsYWNrbGlzdCIpLmNsYXNzTGlzdC5hZGQoImVkaXQiKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYmxhY2tsaXN0LWVkaXQtbGlzdCIpLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkodXNlcl9zZXR0aW5ncy5ibGFja2xpc3QsIHVuZGVmaW5lZCwgMik7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC5pZCA9PT0gImJsYWNrbGlzdC1zYXZlIikgewogICAgICAgICAgICAgICAgICAgIHNldCgiYmxhY2tsaXN0IiwgSlNPTi5wYXJzZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYmxhY2tsaXN0LWVkaXQtbGlzdCIpLnZhbHVlKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC5pZCA9PT0gImJsYWNrbGlzdC1jbG9zZSIpIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiQkxLIikuY2xpY2soKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBkZWxCbGFja0xpc3QoZXZlbnQpIHsKICAgICAgICAgICAgICAgIHZhciBuZXdLZXkgPSB1c2VyX3NldHRpbmdzLmJsYWNrbGlzdDsKICAgICAgICAgICAgICAgIGRlbGV0ZSBuZXdLZXlbZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nLmhyZWYuc3BsaXQoIi9jaGFubmVsLyIpWzFdXTsKICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgc2V0KCJibGFja2xpc3QiLCBuZXdLZXkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGRlbE5vdGlmaWNhdGlvbigpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgic2hvdy1ndWlkZS1idXR0b24tbm90aWZpY2F0aW9uIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gc2F2ZVNldHRpbmdzKHNhbHQpIHsKICAgICAgICAgICAgICAgIHZhciBpLCB2YWx1ZSwgbm90aWZpY2F0aW9uLCBuYXZJZCwgdXNlclNldHMsIHNhdmVkU2V0czsKICAgICAgICAgICAgICAgIG5hdklkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnNlbGVjdGVkIikuaWQ7CiAgICAgICAgICAgICAgICB1c2VyU2V0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJQLWNvbnRlbnQiKS5xdWVyeVNlbGVjdG9yQWxsKCJbaWRePSciICsgbmF2SWQgKyAiJ10iKTsKICAgICAgICAgICAgICAgIHNhdmVkU2V0cyA9IHVzZXJfc2V0dGluZ3M7CiAgICAgICAgICAgICAgICBpID0gdXNlclNldHMubGVuZ3RoOwogICAgICAgICAgICAgICAgd2hpbGUgKGktLSkgewogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gKHVzZXJTZXRzW2ldLmNoZWNrZWQgJiYgKHVzZXJTZXRzW2ldLnZhbHVlID09PSAib24iIHx8IHVzZXJTZXRzW2ldLnZhbHVlKSkgfHwgKHVzZXJTZXRzW2ldLmxlbmd0aCAmJiB1c2VyU2V0c1tpXS52YWx1ZSkgfHwgKHVzZXJTZXRzW2ldLmdldEF0dHJpYnV0ZSgidHlwZSIpID09PSAidGV4dCIgJiYgdXNlclNldHNbaV0udmFsdWUpOwogICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBzYXZlZFNldHNbdXNlclNldHNbaV0ubmFtZSB8fCB1c2VyU2V0c1tpXS5pZF0gPSB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF2YWx1ZSAmJiB1c2VyU2V0c1tpXS50eXBlICE9PSAicmFkaW8iKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVkU2V0c1t1c2VyU2V0c1tpXS5pZF0gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzZXQoInVzZXJfc2V0dGluZ3MiLCBzYXZlZFNldHMpOwogICAgICAgICAgICAgICAgY3VzdG9tU3R5bGVzKCk7CiAgICAgICAgICAgICAgICBpZiAoIXNhbHQpIHsKICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXBwYmFyLW1haW4tZ3VpZGUtbm90aWZpY2F0aW9uLWNvbnRhaW5lciIpOwogICAgICAgICAgICAgICAgICAgIGlmIChub3RpZmljYXRpb24uY2hpbGROb2Rlcy5sZW5ndGggPCAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLmlubmVySFRNTCA9IC8vCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgPGRpdiBpZD0nYXBwYmFyLW1haW4tZ3VpZGUtbm90aWZpY2F0aW9uLWNvbnRhaW5lcic+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0nYXBwYmFyLWd1aWRlLW5vdGlmaWNhdGlvbicgcm9sZT0nYWxlcnQnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0nYXBwYmFyLWd1aWRlLW5vdGlmaWNhdGlvbi1jb250ZW50LXdyYXBwZXIgeXQtdmFsaWduJz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSdhcHBiYXItZ3VpZGUtbm90aWZpY2F0aW9uLWljb24geXQtc3ByaXRlJz48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0nYXBwYmFyLWd1aWRlLW5vdGlmaWNhdGlvbi10ZXh0LWNvbnRlbnQnPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uID0gc2V0TG9jYWxlKG5vdGlmaWNhdGlvbi5jb250ZW50KS5maXJzdENoaWxkOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIueXQtbWFzdGhlYWQtbG9nby1jb250YWluZXIiKS5hcHBlbmRDaGlsZChub3RpZmljYXRpb24pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuYXBwYmFyLWd1aWRlLW5vdGlmaWNhdGlvbi10ZXh0LWNvbnRlbnQiKS50ZXh0Q29udGVudCA9IGxhbmcoIkdMQl9TVkVfU0VUUyIpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgic2hvdy1ndWlkZS1idXR0b24tbm90aWZpY2F0aW9uIik7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZGVsTm90aWZpY2F0aW9uLCAyMDAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBuYXZpZ2F0ZVNldHRpbmdzKGV2ZW50KSB7CiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygiUC1zYXZlIikpIHsKICAgICAgICAgICAgICAgICAgICBzYXZlU2V0dGluZ3MoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygiUC1yZXNldCIpICYmIHdpbmRvdy5jb25maXJtKGxhbmcoIkdMQl9SU0VUX0NPTkYiKSkpIHsKICAgICAgICAgICAgICAgICAgICBzZXQoInVzZXJfc2V0dGluZ3MiLCBkZWZhdWx0X3NldHRpbmdzKTsKICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc01lbnUuc2V0dGluZ3NCdXR0b24uY2xpY2soKTsKICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc01lbnUuc2V0dGluZ3NCdXR0b24uY2xpY2soKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygiY2xvc2UiKSkgewogICAgICAgICAgICAgICAgICAgIGRlbEJsYWNrTGlzdChldmVudCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoIlAtaW1wZXhwIikgfHwgZXZlbnQudGFyZ2V0LmlkID09PSAiaW1wZXhwLXNhdmUiIHx8IGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoIlAtaW1wbGFuZyIpIHx8IGV2ZW50LnRhcmdldC5pZCA9PT0gImltcGxhbmctc2F2ZSIpIHsKICAgICAgICAgICAgICAgICAgICBleHBvcnRTZXR0aW5ncyhldmVudC50YXJnZXQpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQuaWQgPT09ICJibGFja2xpc3QtZWRpdCIgfHwgZXZlbnQudGFyZ2V0LmlkID09PSAiYmxhY2tsaXN0LXNhdmUiIHx8IGV2ZW50LnRhcmdldC5pZCA9PT0gImJsYWNrbGlzdC1jbG9zZSIpIHsKICAgICAgICAgICAgICAgICAgICBzZXRCbGFja0xpc3QoZXZlbnQudGFyZ2V0KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmlkID09PSAiUC1jb250YWluZXIiIHx8IGV2ZW50LnRhcmdldC5pZCA9PT0gIlAtc2V0dGluZ3MiKSB7CiAgICAgICAgICAgICAgICAgICAgZXZlbnQgPSAoZXZlbnQudGFyZ2V0LmlkID09PSAiUC1zZXR0aW5ncyIpID8gZXZlbnQudGFyZ2V0IDogZXZlbnQudGFyZ2V0LnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgZXZlbnQucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRbKHdpbmRvdy5jaHJvbWUgJiYgImJvZHkiKSB8fCAiZG9jdW1lbnRFbGVtZW50Il0uc2Nyb2xsVG9wID0gMDsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoInJlc2l6ZSIpKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmlkICE9PSAiRE5UIiAmJiBldmVudC50YXJnZXQudGFnTmFtZSAhPT0gIkEiICYmIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLmlkID09PSAiUC1zaWRlYmFyLWxpc3QiKSB7CiAgICAgICAgICAgICAgICAgICAgc2F2ZVNldHRpbmdzKCJuby1ub3RpZmljYXRpb24iKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiUC1jb250ZW50IikucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIlAtY29udGFpbmVyIikuYXBwZW5kQ2hpbGQoZ2V0TWVudShldmVudC50YXJnZXQuaWQpKTsKICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCIuc2VsZWN0ZWQiKS5yZW1vdmVBdHRyaWJ1dGUoImNsYXNzIik7CiAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTmFtZSA9ICJzZWxlY3RlZCI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gc2V0dGluZ3NUZW1wbGF0ZShldmVudCkgewogICAgICAgICAgICAgICAgdmFyIHBXcmFwcGVyOwogICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5pZCA9PT0gIlAiICYmIGV2ZW50LnRhcmdldC50YWdOYW1lICE9PSAiSU5QVVQiKSB7CiAgICAgICAgICAgICAgICAgICAgcFdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiUC1zZXR0aW5ncyIpOwogICAgICAgICAgICAgICAgICAgIGlmIChwV3JhcHBlcikgewogICAgICAgICAgICAgICAgICAgICAgICBwV3JhcHBlci5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygiZmxvYXRlciIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgiZmxvYXRlciIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1vdmllX3BsYXllciIpLnJlbW92ZUF0dHJpYnV0ZSgic3R5bGUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBwV3JhcHBlciA9IGdldE1lbnUoIk1FTiIpOwogICAgICAgICAgICAgICAgICAgICAgICBwV3JhcHBlci5xdWVyeVNlbGVjdG9yKCIjUC1jb250YWluZXIiKS5hcHBlbmRDaGlsZChnZXRNZW51KCJHRU4iKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5LWNvbnRhaW5lciIpLmluc2VydEJlZm9yZShwV3JhcHBlciwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBhZ2UtY29udGFpbmVyIikpOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIG5hdmlnYXRlU2V0dGluZ3MpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudFsod2luZG93LmNocm9tZSAmJiAiYm9keSIpIHx8ICJkb2N1bWVudEVsZW1lbnQiXS5zY3JvbGxUb3AgPSAwOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgicmVzaXplIikpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGZpcnN0VGltZShldmVudCkgewogICAgICAgICAgICAgICAgaWYgKGV2ZW50ICYmIGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQucGFyZW50Tm9kZSAmJiBldmVudC50YXJnZXQucGFyZW50Tm9kZS5jbGFzc05hbWUgPT09ICJwYXJfY2xvc2V3bGNtIikgewogICAgICAgICAgICAgICAgICAgIHNldCgiZmlyc3RUaW1lIiwgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZmlyc3RUaW1lKTsKICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc01lbnUud2VsY29tZS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHNldHRpbmdzTWVudSgpIHsKICAgICAgICAgICAgICAgIHZhciBub3RpZl9idXR0b24sIHNldHRpbmdzX2J1dHRvbiwgd2VsY29tZV9tZXNzYWdlOwogICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzTWVudS5zZXR0aW5nc0J1dHRvbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG5vdGlmX2J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN5dC1tYXN0aGVhZC1ub3RpZmljYXRpb25zLCAubm90aWZpY2F0aW9ucy1jb250YWluZXIiKTsKICAgICAgICAgICAgICAgIHNldHRpbmdzX2J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN5dC1tYXN0aGVhZC11c2VyLCAjeXQtbWFzdGhlYWQtc2lnbmluIik7CiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3NfYnV0dG9uKSB7CiAgICAgICAgICAgICAgICAgICAgd2VsY29tZV9tZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTsKICAgICAgICAgICAgICAgICAgICB3ZWxjb21lX21lc3NhZ2UuaW5uZXJIVE1MID0gLy8KICAgICAgICAgICAgICAgICAgICAgICAgYDxkaXYgaWQ9J1BzZXR0aW5ncyc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSdQJyBkYXRhLXA9J3R0bHxZVFNFVFMnIHN0eWxlPSdoZWlnaHQ6MjhweDttYXJnaW4tcmlnaHQ6MTBweDtvcGFjaXR5Oi41NTt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7d2lkdGg6MThweDsnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgdmlld0JveD0nMCAwIDE4IDIwJz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gcG9pbnRzPScwLDIwIDE0LDEyIDAsNCcvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBwb2ludHM9JzE1LDMgMTUsMCAxMywwIDEzLDMgMTAsMyAxMCw1IDEzLDUgMTMsOCAxNSw4IDE1LDUgMTgsNSAxOCwzJy8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9J3BhcnRfd2VsY29tZScgc3R5bGU9J2Rpc3BsYXk6bm9uZTttYXJnaW4tbGVmdDotMjIwcHg7dG9wOjM4cHg7cmlnaHQ6MCc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gZGF0YS1wPSd0bmR8V0xDTSc+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxici8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gZGF0YS1wPSd0bmR8V0xDTVNUUlQnPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIvPjxici8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgZGF0YS1wPSd0bmR8V0xDTUZUUlMnIHN0eWxlPSdjb2xvcjojRkZGOycgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL0ZlYXR1cmVzJyB0YXJnZXQ9J19ibGFuayc+PC9hPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9J3Bhcl9jbG9zZXdsY20nPjxzcGFuPsOXPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgICAgICAgICAgICAgd2VsY29tZV9tZXNzYWdlID0gc2V0TG9jYWxlKHdlbGNvbWVfbWVzc2FnZS5jb250ZW50KTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIHNldHRpbmdzVGVtcGxhdGUpOwogICAgICAgICAgICAgICAgICAgIGlmIChub3RpZl9idXR0b24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NfYnV0dG9uLmluc2VydEJlZm9yZSh3ZWxjb21lX21lc3NhZ2UsIG5vdGlmX2J1dHRvbik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NfYnV0dG9uLmFwcGVuZENoaWxkKHdlbGNvbWVfbWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHNldHRpbmdzTWVudS5zZXR0aW5nc0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJQIik7CiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NNZW51LndlbGNvbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGFydF93ZWxjb21lIik7CiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJfc2V0dGluZ3MuZmlyc3RUaW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzTWVudS53ZWxjb21lLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZpcnN0VGltZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIG1vZENvbW1lbnQob3JpZ2luYWwpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgIHZhciBjb21tZW50cywgaXNfbGl2ZTsKICAgICAgICAgICAgICAgICAgICBjb21tZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ3YXRjaC1kaXNjdXNzaW9uIik7CiAgICAgICAgICAgICAgICAgICAgaXNfbGl2ZSA9IHdpbmRvdy55dHBsYXllciAmJiB3aW5kb3cueXRwbGF5ZXIuY29uZmlnICYmIHdpbmRvdy55dHBsYXllci5jb25maWcuYXJncyAmJiB3aW5kb3cueXRwbGF5ZXIuY29uZmlnLmFyZ3MubGl2ZXN0cmVhbTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXdpbmRvdy5sb2NhdGlvbi5zZWFyY2gubWF0Y2goLyY/KGxjfGdvb2dsZV9jb21tZW50X2lkKT0vKSAmJiBhLnNwbGl0KCJjb21tZW50cyIpLmxlbmd0aCA+IDEgJiYgIWlzX2xpdmUgJiYgY29tbWVudHMgJiYgIWNvbW1lbnRzLmxhenlsb2FkICYmIHVzZXJfc2V0dGluZ3MuVklEX0hJREVfQ09NUyA9PT0gIjEiICYmICFjb21tZW50cy5jbGFzc0xpc3QuY29udGFpbnMoInNob3ciKSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50cy5sYXp5bG9hZCA9IGFyZ3VtZW50czsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIG1vZFNldENvbmZpZyhvcmlnaW5hbCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhID09PSAib2JqZWN0IikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIlNIQVJFX09OX1ZJREVPX0VORCIgaW4gYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5TSEFSRV9PTl9WSURFT19FTkQgPSAhdXNlcl9zZXR0aW5ncy5WSURfRU5EX1NIUkU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJVTklWRVJTQUxfSE9WRVJDQVJEUyIgaW4gYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5VTklWRVJTQUxfSE9WRVJDQVJEUyA9ICF1c2VyX3NldHRpbmdzLkdFTl9EU0JfSFZSQzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBtb2RFbWJlZChvcmlnaW5hbCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAsIHBsYXllcjsKICAgICAgICAgICAgICAgICAgICB0ZW1wID0gYS5pZCB8fCBhOwogICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wICE9PSAicGxheWVyLWFwaSIgJiYgdGVtcCAhPT0gInVwc2VsbC12aWRlbyIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIG1vZEFyZ3MoYik7CiAgICAgICAgICAgICAgICAgICAgdGVtcCA9IG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgcGxheWVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1vdmllX3BsYXllciIpOwogICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLnNldFBsYXliYWNrUXVhbGl0eSh1c2VyX3NldHRpbmdzLlZJRF9ERkxUX1FMVFkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gbW9kQXV0b3BsYXkob3JpZ2luYWwpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgICAgIGlmICghYiB8fCB1c2VyX3NldHRpbmdzLnBsQXBsIHx8ICghdXNlcl9zZXR0aW5ncy5wbEFwbCAmJiBiLmZlYXR1cmUgJiYgYi5mZWF0dXJlICE9PSAiYXV0b3BsYXkiKSkgewogICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gbW9kQXV0b3BsYXlGdWxsc2NyZWVuKG9yaWdpbmFsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBoYXNfZW5kZWQsIG5leHRfYnV0dG9uLCBuZXh0X2NsaWNrZWQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5tb3pGdWxsU2NyZWVuRWxlbWVudCAmJiAhZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGhhc19lbmRlZCA9IGFwaSAmJiBhcGkuZ2V0Q3VycmVudFRpbWUgJiYgTWF0aC5yb3VuZChhcGkuZ2V0Q3VycmVudFRpbWUoKSkgPj0gTWF0aC5mbG9vcihhcGkuZ2V0RHVyYXRpb24oKSk7CiAgICAgICAgICAgICAgICAgICAgbmV4dF9jbGlja2VkID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoInl0cC1idXR0b24tbmV4dCIpIHx8IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCJ5dHAtbmV4dC1idXR0b24iKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXVzZXJfc2V0dGluZ3MucGxBcGwgJiYgIW5leHRfY2xpY2tlZCAmJiBoYXNfZW5kZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmV4dF9idXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIueXRwLW5leHQtYnV0dG9uIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0X2J1dHRvbiAmJiBuZXh0X2J1dHRvbi5nZXRBdHRyaWJ1dGUoImFyaWEtZGlzYWJsZWQiKSA9PT0gInRydWUiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0X2J1dHRvbi5vbmNsaWNrID0gYXBpLm5leHRWaWRlbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgYXBpLm5leHRWaWRlbyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0X2J1dHRvbi5zZXRBdHRyaWJ1dGUoImFyaWEtZGlzYWJsZWQiLCAiZmFsc2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICh1c2VyX3NldHRpbmdzLnBsQXBsIHx8IG5leHRfY2xpY2tlZCB8fCAhaGFzX2VuZGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0X2NsaWNrZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb3ZpZV9wbGF5ZXIiKS5mb2N1cygpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gbW9kUGxheWVyQ3JlYXRlKG9yaWdpbmFsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCwgcGxheWVyOwogICAgICAgICAgICAgICAgICAgIHRlbXAgPSBhLmlkIHx8IGE7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXAgIT09ICJwbGF5ZXItYXBpIiAmJiB0ZW1wICE9PSAidXBzZWxsLXZpZGVvIikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbW9kQXJncyhiKTsKICAgICAgICAgICAgICAgICAgICBpZiAoYS5pZCA9PT0gInVwc2VsbC12aWRlbyIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhID09PSAib2JqZWN0IikgewogICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJfaW5zdGFuY2UgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibW92aWVfcGxheWVyIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyX3NldHRpbmdzLlZJRF9QTFJfRklUKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemVQbGF5ZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gbW9kU2Vla1RvKG9yaWdpbmFsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odGltZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCJmbG9hdGVyIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWwuY2FsbCh0aGlzLCB0aW1lLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIE1vZEFyZ3NXYXRjaChhcmdzKSB7CiAgICAgICAgICAgICAgICBpZiAoYXJncyAmJiBhcmdzLmF1dG9wbGF5ID09PSAiMSIgJiYgIXVzZXJfc2V0dGluZ3MuVklEX1BMUl9BVFBMICYmIHdpbmRvdy5sb2NhdGlvbi5oYXNoID09PSAiIikgewogICAgICAgICAgICAgICAgICAgIGFyZ3MuYXV0b3BsYXkgPSAiMCI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gTW9kQXJnc1dhdGNoLk9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gc2NyaXB0RXhpdChldmVudCkgewogICAgICAgICAgICAgICAgdmFyIGksIGosIGtleSwgdGVtcDsKICAgICAgICAgICAgICAgIGlmIChldmVudCAmJiBldmVudC50YXJnZXQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgibmFtZSIpID09PSAid3d3L2Jhc2UiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy55dC5zZXRDb25maWcgPSBtb2RTZXRDb25maWcod2luZG93Lnl0LnNldENvbmZpZyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuX3l0X3d3dykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCA9IE9iamVjdC5rZXlzKHdpbmRvdy5feXRfd3d3KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0ZW1wLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGogPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGktLSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9IHRlbXBbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuX3l0X3d3d1trZXldID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTdHJpbmcod2luZG93Ll95dF93d3dba2V5XSkuc3BsaXQoInBsYXllci1hZGRlZCIpLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5feXRfd3d3W2tleV0gPSBtb2RFbWJlZCh3aW5kb3cuX3l0X3d3d1trZXldKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGorKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChTdHJpbmcod2luZG93Ll95dF93d3dba2V5XSkuc3BsaXQoIndpbmRvdy5zcGYubmF2aWdhdGUiKS5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuX3l0X3d3d1trZXldID0gbW9kQXV0b3BsYXkod2luZG93Ll95dF93d3dba2V5XSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoU3RyaW5nKHdpbmRvdy5feXRfd3d3W2tleV0pLnNwbGl0KCIuc2V0KFwiXCIrYSxiLGMsXCIvXCIsZCIpLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy55dHBzZXR3aWRlID0gd2luZG93Ll95dF93d3dba2V5XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGorKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaiA9PT0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoIm5hbWUiKSA9PT0gInd3dy93YXRjaCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lnl0Lnd3dy53YXRjaC5wbGF5ZXIuc2Vla1RvID0gbW9kU2Vla1RvKHdpbmRvdy55dC53d3cud2F0Y2gucGxheWVyLnNlZWtUbyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCJuYW1lIikgPT09ICJzcGYvc3BmIikgewogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc3BmLmxvYWQgPSBtb2RDb21tZW50KHdpbmRvdy5zcGYubG9hZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zcGYucHJlZmV0Y2ggPSBmdW5jdGlvbigpe307CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubmFtZSA9PT0gInBvcE91dCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zcGYubmF2aWdhdGUgPSBmdW5jdGlvbigpe307CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgKGV2ZW50ICYmIGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCJuYW1lIikgPT09ICJwbGF5ZXIvYmFzZSIpIHx8CiAgICAgICAgICAgICAgICAgICAgKCF3aW5kb3cuaHRtbDVQYXRjaGVkICYmIHdpbmRvdy55dCAmJiB3aW5kb3cueXQucGxheWVyICYmIHdpbmRvdy55dC5wbGF5ZXIuQXBwbGljYXRpb24gJiYgd2luZG93Lnl0LnBsYXllci5BcHBsaWNhdGlvbi5jcmVhdGUpCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuaHRtbDVQYXRjaGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cueXQucGxheWVyLkFwcGxpY2F0aW9uLmNyZWF0ZSA9IG1vZFBsYXllckNyZWF0ZSh3aW5kb3cueXQucGxheWVyLkFwcGxpY2F0aW9uLmNyZWF0ZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5feXRfcGxheWVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSBPYmplY3Qua2V5cyh3aW5kb3cuX3l0X3BsYXllcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5feXRfcGxheWVyW3RlbXBbaV1dID09PSAiZnVuY3Rpb24iICYmIHdpbmRvdy5feXRfcGxheWVyW3RlbXBbaV1dLnByb3RvdHlwZSAmJiB3aW5kb3cuX3l0X3BsYXllclt0ZW1wW2ldXS5wcm90b3R5cGUuaGFzTmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5feXRfcGxheWVyW3RlbXBbaV1dLnByb3RvdHlwZS5oYXNOZXh0ID0gbW9kQXV0b3BsYXlGdWxsc2NyZWVuKHdpbmRvdy5feXRfcGxheWVyW3RlbXBbaV1dLnByb3RvdHlwZS5oYXNOZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuX3l0X3BsYXllclt0ZW1wW2ldXSA9PT0gImZ1bmN0aW9uIiAmJiB3aW5kb3cuX3l0X3BsYXllclt0ZW1wW2ldXS50b1N0cmluZygpLm1hdGNoKC90aGlzXC5hZGFwdGl2ZUZvcm1hdHMvKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9IHRlbXBbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9kQXJnc1dhdGNoLk9yaWdpbmFsID0gd2luZG93Ll95dF9wbGF5ZXJba2V5XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZEFyZ3NXYXRjaC5wcm90b3R5cGUgPSBNb2RBcmdzV2F0Y2guT3JpZ2luYWwucHJvdG90eXBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCA9IE9iamVjdC5rZXlzKE1vZEFyZ3NXYXRjaC5PcmlnaW5hbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZEFyZ3NXYXRjaFt0ZW1wW2ldXSA9IE1vZEFyZ3NXYXRjaC5PcmlnaW5hbFt0ZW1wW2ldXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5feXRfcGxheWVyW2tleV0gPSBNb2RBcmdzV2F0Y2g7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tCb3VuZHMoZWxtLCBYLCBZKSB7CiAgICAgICAgICAgICAgICB2YXIgc25hcFgsIHNuYXBZOwogICAgICAgICAgICAgICAgaWYgKFggPiAtMSAmJiBYICsgZWxtLm9mZnNldFdpZHRoIDwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldFdpZHRoKSB7CiAgICAgICAgICAgICAgICAgICAgc25hcFggPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoWCA8IDEpIHsKICAgICAgICAgICAgICAgICAgICBYID0gMDsKICAgICAgICAgICAgICAgICAgICBzbmFwWCA9IC0xOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBYID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldFdpZHRoIC0gZWxtLm9mZnNldFdpZHRoOwogICAgICAgICAgICAgICAgICAgIHNuYXBYID0gMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChZID4gNTAgJiYgWSArIGVsbS5vZmZzZXRIZWlnaHQgPCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0KSB7CiAgICAgICAgICAgICAgICAgICAgc25hcFkgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoWSA8IDUxKSB7CiAgICAgICAgICAgICAgICAgICAgWSA9IDUwOwogICAgICAgICAgICAgICAgICAgIHNuYXBZID0gLTE7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIFkgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0IC0gZWxtLm9mZnNldEhlaWdodDsKICAgICAgICAgICAgICAgICAgICBzbmFwWSA9IDE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4ge1g6IFggKyAicHgiLCBZOiBZICsgInB4Iiwgc25hcFg6IHNuYXBYLCBzbmFwWTogc25hcFl9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBvcygpIHsKICAgICAgICAgICAgICAgIHZhciB4LCB5LCBoZWlnaHQsIHBsYXllciwgYm91bmRzOwogICAgICAgICAgICAgICAgcGxheWVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1vdmllX3BsYXllciIpOwogICAgICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCJmbG9hdGVyIikgfHwgd2luZG93LmlubmVyV2lkdGggPCA2NTcpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocGxheWVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5yZW1vdmVBdHRyaWJ1dGUoInN0eWxlIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCJmbG9hdGVyIik7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIHVwZGF0ZVBvcyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaGVpZ2h0ID0gcGFyc2VJbnQodXNlcl9zZXR0aW5ncy5WSURfUExSX0FMVklTX1dEVEgpIHx8IDM1MDsKICAgICAgICAgICAgICAgIHBsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb3ZpZV9wbGF5ZXIiKTsKICAgICAgICAgICAgICAgIGJvdW5kcyA9IGNoZWNrQm91bmRzKHBsYXllciwgdXNlcl9zZXR0aW5ncy5mbG9hdGVyWCwgdXNlcl9zZXR0aW5ncy5mbG9hdGVyWSk7CiAgICAgICAgICAgICAgICBoZWlnaHQgPSAoaGVpZ2h0IDwgMzUwID8gMzUwIDogaGVpZ2h0KSAvICgxNiAvIDkpOwogICAgICAgICAgICAgICAgaWYgKHVzZXJfc2V0dGluZ3MuZmxvYXRlclNuYXBYID09PSAtMSkgewogICAgICAgICAgICAgICAgICAgIHggPSAiMHB4IjsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlcl9zZXR0aW5ncy5mbG9hdGVyU25hcFggPT09IDEpIHsKICAgICAgICAgICAgICAgICAgICB4ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldFdpZHRoIC0gcGxheWVyLm9mZnNldFdpZHRoICsgInB4IjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgeCA9IGJvdW5kcy5YOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHVzZXJfc2V0dGluZ3MuZmxvYXRlclNuYXBZID09PSAtMSkgewogICAgICAgICAgICAgICAgICAgIHkgPSAiNTBweCI7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJfc2V0dGluZ3MuZmxvYXRlclNuYXBZID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgeSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQgLSBwbGF5ZXIub2Zmc2V0SGVpZ2h0ICsgInB4IjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgeSA9IGJvdW5kcy5ZOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcGxheWVyLnNldEF0dHJpYnV0ZSgic3R5bGUiLCAid2lkdGg6IiArIChoZWlnaHQgKiAoMTYgLyA5KSkgKyAicHg7aGVpZ2h0OiIgKyBoZWlnaHQgKyAicHg7bGVmdDoiICsgeCArICI7dG9wOiIgKyB5KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBnb1RvVG9wKCkgewogICAgICAgICAgICAgICAgZG9jdW1lbnRbKHdpbmRvdy5jaHJvbWUgJiYgImJvZHkiKSB8fCAiZG9jdW1lbnRFbGVtZW50Il0uc2Nyb2xsVG9wID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBkcmFnRmxvYXRlcihldmVudCkgewogICAgICAgICAgICAgICAgdmFyIGV4Y2x1ZGVkLCBpc0ZTY3JlZW4sIGlzRmxvYXRlciwgYm91bmRzLCBwbGF5ZXI7CiAgICAgICAgICAgICAgICBpc0ZTY3JlZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIueXRwLWZ1bGxzY3JlZW4iKTsKICAgICAgICAgICAgICAgIGlzRmxvYXRlciA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoImZsb2F0ZXIiKTsKICAgICAgICAgICAgICAgIGlmIChldmVudCAmJiAhaXNGU2NyZWVuICYmIGlzRmxvYXRlcikgewogICAgICAgICAgICAgICAgICAgIHBsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb3ZpZV9wbGF5ZXIiKTsKICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuYnV0dG9ucyA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICBleGNsdWRlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi55dHAtY2hyb21lLWJvdHRvbSIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gIm1vdXNlZG93biIgJiYgcGxheWVyLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkgJiYgKCFleGNsdWRlZCB8fCAhZXhjbHVkZWQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsIGRyYWdGbG9hdGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZHJhZ0Zsb2F0ZXIsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0Zsb2F0ZXIub2xkUG9zID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFg6IHBhcnNlSW50KHBsYXllci5zdHlsZS5sZWZ0KSAtIGV2ZW50LmNsaWVudFgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWTogcGFyc2VJbnQocGxheWVyLnN0eWxlLnRvcCkgLSBldmVudC5jbGllbnRZLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZ1g6IGV2ZW50LmNsaWVudFgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JnWTogZXZlbnQuY2xpZW50WQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnR5cGUgPT09ICJtb3VzZW1vdmUiICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnRmxvYXRlci5oYXNNb3ZlZCB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKGV2ZW50LmNsaWVudFggLSBkcmFnRmxvYXRlci5vbGRQb3Mub3JnWCkgPiAxMCB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKGV2ZW50LmNsaWVudFkgLSBkcmFnRmxvYXRlci5vbGRQb3Mub3JnWSkgPiAxMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdW5kcyA9IGNoZWNrQm91bmRzKHBsYXllciwgZXZlbnQuY2xpZW50WCArIGRyYWdGbG9hdGVyLm9sZFBvcy5YLCBldmVudC5jbGllbnRZICsgZHJhZ0Zsb2F0ZXIub2xkUG9zLlkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLnN0eWxlLmxlZnQgPSBib3VuZHMuWDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5zdHlsZS50b3AgPSBib3VuZHMuWTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdGbG9hdGVyLmhhc01vdmVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdGbG9hdGVyLnNuYXBYID0gYm91bmRzLnNuYXBYOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0Zsb2F0ZXIuc25hcFkgPSBib3VuZHMuc25hcFk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbnMgIT09IDEgfHwgZXZlbnQudHlwZSA9PT0gImNsaWNrIikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHJhZ0Zsb2F0ZXIuaGFzTW92ZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdGbG9hdGVyLm9sZFBvcyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0Zsb2F0ZXIuaGFzTW92ZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJfc2V0dGluZ3MuZmxvYXRlclggPSBwYXJzZUludChwbGF5ZXIuc3R5bGUubGVmdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyX3NldHRpbmdzLmZsb2F0ZXJZID0gcGFyc2VJbnQocGxheWVyLnN0eWxlLnRvcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyX3NldHRpbmdzLmZsb2F0ZXJTbmFwWCA9IGRyYWdGbG9hdGVyLnNuYXBYOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9zZXR0aW5ncy5mbG9hdGVyU25hcFkgPSBkcmFnRmxvYXRlci5zbmFwWTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldCgidXNlcl9zZXR0aW5ncyIsIHVzZXJfc2V0dGluZ3MpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsIGRyYWdGbG9hdGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBkcmFnRmxvYXRlciwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGluaUZsb2F0ZXIoKSB7CiAgICAgICAgICAgICAgICB2YXIgcGxheWVyLCBwbHJBcGksIG91dF9vZl9zaWdodCwgaXNGbG9hdGVyLCBpc0ZTY3JlZW4sIGZsb2F0ZXJVSSwgc2V0dGluZ3Nfb3BlbjsKICAgICAgICAgICAgICAgIHBsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb3ZpZV9wbGF5ZXIiKTsKICAgICAgICAgICAgICAgIHBsckFwaSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwbGF5ZXItYXBpIikuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICBzZXR0aW5nc19vcGVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIlAtc2V0dGluZ3MiKTsKICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIpIHsKICAgICAgICAgICAgICAgICAgICBvdXRfb2Zfc2lnaHQgPSBwbHJBcGkuYm90dG9tIDwgKChwbHJBcGkuaGVpZ2h0IC8gMikgKyA1MCk7CiAgICAgICAgICAgICAgICAgICAgaXNGbG9hdGVyID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygiZmxvYXRlciIpOwogICAgICAgICAgICAgICAgICAgIGlzRlNjcmVlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi55dHAtZnVsbHNjcmVlbiIpOwogICAgICAgICAgICAgICAgICAgIGZsb2F0ZXJVSSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwYXJ0X2Zsb2F0ZXJ1aSIpOwogICAgICAgICAgICAgICAgICAgIGlmICghZmxvYXRlclVJICYmICFpc0ZTY3JlZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRlclVJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRlclVJLmlubmVySFRNTCA9IC8vCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgPGRpdiBpZD0ncGFydF9mbG9hdGVydWknPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9J3BhcnRfZmxvYXRlcnVpX21vdmUnIGRhdGEtcD0ndHRsfFZJRF9QTFJfQUxWSVNfTU9WRSc+PHN2ZyB2aWV3Qm94PScwIDAgMjAgMjAnPjxwb2x5Z29uIHBvaW50cz0nNi40LDMuNiA3LjIsNC4zIDEwLDEuNSAxMi44LDQuMyAxMy42LDMuNiAxMCwwJy8+PHBvbHlnb24gcG9pbnRzPScxNi40LDYuNCAxNS43LDcuMiAxOC41LDEwIDE1LjcsMTIuOCAxNi40LDEzLjYgMjAsMTAnLz48cG9seWdvbiBwb2ludHM9JzMuNiw2LjQgMCwxMCAzLjYsMTMuNiA0LjMsMTIuOCAxLjUsMTAgNC4zLDcuMicvPjxwb2x5Z29uIHBvaW50cz0nMTAsMTguNSA3LjIsMTUuNyA2LjQsMTYuNCAxMCwyMCAxMy42LDE2LjQgMTIuOCwxNS43Jy8+PGNpcmNsZSBjeD0nMTAnIGN5PScxMCcgcj0nMicvPjwvc3ZnPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9J3BhcnRfZmxvYXRlcnVpX3Njcm9sbHRvcCcgZGF0YS1wPSd0dGx8VklEX1BMUl9BTFZJU19TQ1JMX1RPUCc+PHN2ZyB2aWV3Qm94PScwIDAgMjAgMjAnPjxwb2x5Z29uIHBvaW50cz0nMTAsMC4xIDAsMTAuMSAyLjksMTIuOSAxMCw1LjggMTcuMSwxMi45IDIwLDEwLjEgJy8+PC9zdmc+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdGVyVUkgPSBzZXRMb2NhbGUoZmxvYXRlclVJLmNvbnRlbnQpLmZpcnN0Q2hpbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5hcHBlbmRDaGlsZChmbG9hdGVyVUkpOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGFydF9mbG9hdGVydWlfbW92ZSIpLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsIGRyYWdGbG9hdGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBhcnRfZmxvYXRlcnVpX3Njcm9sbHRvcCIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZ29Ub1RvcCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChvdXRfb2Zfc2lnaHQgJiYgIWlzRmxvYXRlciAmJiAhc2V0dGluZ3Nfb3BlbiAmJiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT09ICIvd2F0Y2giKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCJmbG9hdGVyIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCB1cGRhdGVQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQb3MoKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJyZXNpemUiKSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoIW91dF9vZl9zaWdodCB8fCBzZXR0aW5nc19vcGVuIHx8IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSAhPT0gIi93YXRjaCIpICYmIGlzRmxvYXRlcikgewogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgiZmxvYXRlciIpOwogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdXBkYXRlUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLnJlbW92ZUF0dHJpYnV0ZSgic3R5bGUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJyZXNpemUiKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGFsd2F5c1Zpc2libGUoKSB7CiAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncy5WSURfUExSX0FMVklTKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PT0gIi93YXRjaCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInNjcm9sbCIsIGluaUZsb2F0ZXIpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICE9PSAiL3dhdGNoIikgewogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigic2Nyb2xsIiwgaW5pRmxvYXRlcik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGFsd2F5c0FjdGl2ZShldmVudCkgewogICAgICAgICAgICAgICAgdmFyIGksIGxpc3QsIGNsZWFyLCBsZW5ndGgsIGV2ZW50Q2xvbmU7CiAgICAgICAgICAgICAgICBjbGVhciA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PSAiL3dhdGNoIiAmJiBhcGkgJiYgYXBpICE9PSBldmVudC50YXJnZXQgJiYgIWFwaS5jb250YWlucyhldmVudC50YXJnZXQpICYmICFldmVudC5jdHJsS2V5ICYmICFldmVudC5zaGlmdEtleSAmJiAhZXZlbnQuYWx0S2V5ICYmICFldmVudC5tZXRhS2V5ICYmICFldmVudC50YXJnZXQuaXNDb250ZW50RWRpdGFibGU7CiAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgY2xlYXIgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICBldmVudC53aGljaCA+IDQ3ICYmIGV2ZW50LndoaWNoIDwgNTggfHwKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQud2hpY2ggPiA5NSAmJiBldmVudC53aGljaCA8IDEwNiB8fAogICAgICAgICAgICAgICAgICAgICAgICBbMjcsIDMyLCAzNSwgMzYsIDM3LCAzOCwgMzksIDQwLCA2NiwgNjcsIDc5LCA4NywgMTg3LCAxODldLmluZGV4T2YoZXZlbnQud2hpY2gpID4gLTEKICAgICAgICAgICAgICAgICAgICApICYmCiAgICAgICAgICAgICAgICAgICAgWyJFTUJFRCIsICJJTlBVVCIsICJPQkpFQ1QiLCAiVEVYVEFSRUEiLCAiSUZSQU1FIl0uaW5kZXhPZihkb2N1bWVudC5hY3RpdmVFbGVtZW50LnRhZ05hbWUpIDwgMAogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgZXZlbnRDbG9uZSA9IG5ldyBFdmVudCgia2V5ZG93biIpOwogICAgICAgICAgICAgICAgICAgIGxpc3QgPSBPYmplY3Qua2V5cyhPYmplY3QuZ2V0UHJvdG90eXBlT2YoZXZlbnQpKTsKICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBsaXN0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRDbG9uZVtsaXN0W2ldXSA9IGV2ZW50W2xpc3RbaV1dOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGFwaS5kaXNwYXRjaEV2ZW50KGV2ZW50Q2xvbmUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHBsYXllclN0YXRlKGV2ZW50KSB7CiAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncy5mdWxsQnJzIHx8IHVzZXJfc2V0dGluZ3MubGlnaHRzT3V0KSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdFsoZXZlbnQgPCA1ICYmIGV2ZW50ID4gMCAmJiAiYWRkIikgfHwgInJlbW92ZSJdKCh1c2VyX3NldHRpbmdzLmZ1bGxCcnMgJiYgInBhcnRfZnVsbGJyb3dzZXIiKSB8fCAiMCIsICh1c2VyX3NldHRpbmdzLmxpZ2h0c091dCAmJiAicGFydF9jaW5lbWFfbW9kZSIpIHx8ICIwIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoInJlc2l6ZSIpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVDdXN0b21zKGV2ZW50KSB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV2ZW50ID09PSAib2JqZWN0IikgewogICAgICAgICAgICAgICAgICAgIHNldCgidm9sTGV2IiwgZXZlbnQudm9sdW1lKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc2V0KCJ0aGVhdGVyTW9kZSIsIGV2ZW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBwbGF5ZXJSZWFkeSgpIHsKICAgICAgICAgICAgICAgIGFwaSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb3ZpZV9wbGF5ZXIiKTsKICAgICAgICAgICAgICAgIGlmIChhcGkgJiYgIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjNC1wbGF5ZXIiKSkgewogICAgICAgICAgICAgICAgICAgIGFwaS5hZGRFdmVudExpc3RlbmVyKCJvblN0YXRlQ2hhbmdlIiwgcGxheWVyU3RhdGUpOwogICAgICAgICAgICAgICAgICAgIGlmICh1c2VyX3NldHRpbmdzLlZJRF9QTFJfVk9MX01FTSkgewogICAgICAgICAgICAgICAgICAgICAgICBhcGkuYWRkRXZlbnRMaXN0ZW5lcigib25Wb2x1bWVDaGFuZ2UiLCBoYW5kbGVDdXN0b21zKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJfc2V0dGluZ3MuVklEX1BMUl9TSVpFX01FTSkgewogICAgICAgICAgICAgICAgICAgICAgICBhcGkuYWRkRXZlbnRMaXN0ZW5lcigiU0laRV9DTElDS0VEIiwgaGFuZGxlQ3VzdG9tcyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICh1c2VyX3NldHRpbmdzLlZJRF9QTFJfVk9MX01FTSkgewogICAgICAgICAgICAgICAgICAgICAgICBhcGkuc2V0Vm9sdW1lKHVzZXJfc2V0dGluZ3Mudm9sTGV2KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJfc2V0dGluZ3MubG9vcFZpZCkgewogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJ2aWRlbyIpLmxvb3AgPSB1c2VyX3NldHRpbmdzLmxvb3BWaWQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICh1c2VyX3NldHRpbmdzLlZJRF9QTFJfQUxBQ1QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIGFsd2F5c0FjdGl2ZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFRodW1iKCkgewogICAgICAgICAgICAgICAgdmFyIHRodW1ibmFpbF91cmw7CiAgICAgICAgICAgICAgICB0aHVtYm5haWxfdXJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiW2hyZWYqPSdtYXhyZXNkZWZhdWx0J10iKTsKICAgICAgICAgICAgICAgIHRodW1ibmFpbF91cmwgPSB0aHVtYm5haWxfdXJsICYmIHRodW1ibmFpbF91cmwuZ2V0QXR0cmlidXRlKCJocmVmIik7CiAgICAgICAgICAgICAgICBpZiAodGh1bWJuYWlsX3VybCkgewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKHRodW1ibmFpbF91cmwpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cueXRwbGF5ZXIgJiYgd2luZG93Lnl0cGxheWVyLmNvbmZpZyAmJiB3aW5kb3cueXRwbGF5ZXIuY29uZmlnLmFyZ3MgJiYgd2luZG93Lnl0cGxheWVyLmNvbmZpZy5hcmdzLnRodW1ibmFpbF91cmwpIHsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3Blbih3aW5kb3cueXRwbGF5ZXIuY29uZmlnLmFyZ3MudGh1bWJuYWlsX3VybCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gaGlkZVNjcmVlbnNob3QoZXZlbnQpIHsKICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQuaWQgPT09ICJjbG9zZS1zY3JlZW5zaG90IikgewogICAgICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoImNsaWNrIiwgaGlkZVNjcmVlbnNob3QpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFNjcmVlbnNob3QoKSB7CiAgICAgICAgICAgICAgICB2YXIgd2lkdGgsIGhlaWdodCwgYXNwZWN0UmF0aW8sIHZpZGVvLCBjb250YWluZXIsIGNhbnZhcywgY2xvc2UsIGNvbnRleHQ7CiAgICAgICAgICAgICAgICB2aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoInZpZGVvIik7CiAgICAgICAgICAgICAgICBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2NyZWVuc2hvdC1yZXN1bHQiKSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgICAgIGNhbnZhcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCJjYW52YXMiKSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKICAgICAgICAgICAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgICAgICAgICAgIGFzcGVjdFJhdGlvID0gdmlkZW8udmlkZW9XaWR0aCAvIHZpZGVvLnZpZGVvSGVpZ2h0OwogICAgICAgICAgICAgICAgd2lkdGggPSB2aWRlby52aWRlb1dpZHRoOwogICAgICAgICAgICAgICAgaGVpZ2h0ID0gcGFyc2VJbnQod2lkdGggLyBhc3BlY3RSYXRpbywgMTApOwogICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7CiAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICAgICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UodmlkZW8sIDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgICAgICAgICAgICAgaWYgKCFjb250YWluZXIuaWQpIHsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuaWQgPSAic2NyZWVuc2hvdC1yZXN1bHQiOwogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXMpOwogICAgICAgICAgICAgICAgICAgIGNsb3NlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgICAgICAgICAgY2xvc2UuaWQgPSAiY2xvc2Utc2NyZWVuc2hvdCI7CiAgICAgICAgICAgICAgICAgICAgY2xvc2UudGV4dENvbnRlbnQgPSBsYW5nKCJDTlNMX1NTX0NMUyIpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgaGlkZVNjcmVlbnNob3QpOwogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjbG9zZSk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGV4aXRGdWxsQnJvd3NlcihrZXkpIHsKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCJwYXJ0X2Z1bGxicm93c2VyIikgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICBrZXkua2V5Q29kZSA9PT0gMjcgfHwKICAgICAgICAgICAgICAgICAgICAgICAga2V5LmtleSA9PT0gIkVzY2FwZSIgfHwgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5LnRhcmdldC5jbGFzc05hbWUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleS50YXJnZXQuY2xhc3NOYW1lLnNwbGl0KCJ5dHAtc2l6ZSIpLmxlbmd0aCA+IDEKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgIHRvZ2dsZUZ1bGxCcm93c2VyKGtleSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGtleS50eXBlID09PSAibW91c2Vkb3duIikgewogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgZXhpdEZ1bGxCcm93c2VyKTsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwgZXhpdEZ1bGxCcm93c2VyKTsKICAgICAgICAgICAgICAgICAgICAgICAga2V5LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUZ1bGxCcm93c2VyKGV2ZW50KSB7CiAgICAgICAgICAgICAgICB2YXIgcGxyU3RhdGUgPSBhcGkgJiYgYXBpLmdldFBsYXllclN0YXRlICYmIGFwaS5nZXRQbGF5ZXJTdGF0ZSgpOwogICAgICAgICAgICAgICAgcGxyU3RhdGUgPSBwbHJTdGF0ZSA8IDUgJiYgcGxyU3RhdGUgPiAwOwogICAgICAgICAgICAgICAgZG9jdW1lbnRbKHdpbmRvdy5jaHJvbWUgJiYgImJvZHkiKSB8fCAiZG9jdW1lbnRFbGVtZW50Il0uc2Nyb2xsVG9wID0gMDsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCBleGl0RnVsbEJyb3dzZXIpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwgZXhpdEZ1bGxCcm93c2VyKTsKICAgICAgICAgICAgICAgIHNldCgiZnVsbEJycyIsIGV2ZW50ID8gIXVzZXJfc2V0dGluZ3MuZnVsbEJycyA6IHRydWUpOwogICAgICAgICAgICAgICAgYWR2YW5jZWRPcHRpb25zLmZ1bGxfYnJvd3Nlci5jbGFzc0xpc3RbKHVzZXJfc2V0dGluZ3MuZnVsbEJycyAmJiAiYWRkIikgfHwgInJlbW92ZSJdKCJhY3RpdmUiKTsKICAgICAgICAgICAgICAgIGlmIChldmVudCAmJiAocGxyU3RhdGUgfHwgZXZlbnQua2V5Q29kZSA9PT0gMjcgfHwgZXZlbnQua2V5ID09PSAiRXNjYXBlIikpIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0Wyh1c2VyX3NldHRpbmdzLmZ1bGxCcnMgJiYgImFkZCIpIHx8ICJyZW1vdmUiXSgicGFydF9mdWxsYnJvd3NlciIpOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgicmVzaXplIikpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUZyYW1lcyhldmVudCkgewogICAgICAgICAgICAgICAgdmFyIGksIHBpLCBmcHMsIHRlbXA7CiAgICAgICAgICAgICAgICBhZHZhbmNlZE9wdGlvbnMuZnJhbWVfc3RlcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmcmFtZXN0ZXAtYnV0dG9uIik7CiAgICAgICAgICAgICAgICBpZiAoZXZlbnQgJiYgWyJFTUJFRCIsICJJTlBVVCIsICJPQkpFQ1QiLCAiVEVYVEFSRUEiXS5pbmRleE9mKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQudGFnTmFtZSkgPCAwICYmIGV2ZW50LnRhcmdldC50YWdOYW1lICE9PSAiSUZSQU1FIiAmJiAhZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgiY29udGVudGVkaXRhYmxlIikpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoKGV2ZW50LmtleUNvZGUgPT09IDM3IHx8IGV2ZW50LmtleUNvZGUgPT09IDM5KSAmJiBldmVudC5zaGlmdEtleSkgewogICAgICAgICAgICAgICAgICAgICAgICBwaSA9IGFwaS5nZXRWaWRlb1N0YXRzKCkuZm10OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93Lnl0cGxheWVyICYmIHdpbmRvdy55dHBsYXllci5jb25maWcgJiYgd2luZG93Lnl0cGxheWVyLmNvbmZpZy5hcmdzICYmIHdpbmRvdy55dHBsYXllci5jb25maWcuYXJncy5hZGFwdGl2ZV9mbXRzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gd2luZG93Lnl0cGxheWVyLmNvbmZpZy5hcmdzLmFkYXB0aXZlX2ZtdHMuc3BsaXQoIiwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB0ZW1wLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcFtpXS5pbmRleE9mKCJpdGFnPSIgKyBwaSkgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkT3B0aW9ucy5mcHMgPSBwYXJzZUludCh0ZW1wW2ldLm1hdGNoKC9mcHM9KFtcZF0rKS8pWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWR2YW5jZWRPcHRpb25zLmZwcyB8fCBhZHZhbmNlZE9wdGlvbnMuZnBzID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZE9wdGlvbnMuZnBzID0gMzA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZnBzID0gKChldmVudC5rZXlDb2RlIDwgMzkgJiYgLTEpIHx8IDEpICogKChhZHZhbmNlZE9wdGlvbnMuZnBzIDwgMiAmJiAzMCkgfHwgYWR2YW5jZWRPcHRpb25zLmZwcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmcHMgJiYgYXBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoInZpZGVvIikucGF1c2VkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpLnBhdXNlVmlkZW8oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5zZWVrQnkoMSAvIGZwcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC50eXBlID09PSAiY2xpY2siICYmIGV2ZW50LnRhcmdldC5pZCA9PT0gImZyYW1lc3RlcC1idXR0b24iKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldCgiZnJhbWVfc3RlcCIsICF1c2VyX3NldHRpbmdzLmZyYW1lX3N0ZXApOwogICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZE9wdGlvbnMuZnJhbWVfc3RlcC5jbGFzc0xpc3RbKHVzZXJfc2V0dGluZ3MuZnJhbWVfc3RlcCAmJiAiYWRkIikgfHwgInJlbW92ZSJdKCJhY3RpdmUiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoYWR2YW5jZWRPcHRpb25zLmZyYW1lX3N0ZXAgJiYgYWR2YW5jZWRPcHRpb25zLmZyYW1lX3N0ZXAuY2xhc3NMaXN0LmNvbnRhaW5zKCJhY3RpdmUiKSkgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCB0b2dnbGVGcmFtZXMsIHRydWUpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICghYWR2YW5jZWRPcHRpb25zLmZyYW1lX3N0ZXAgfHwgIWFkdmFuY2VkT3B0aW9ucy5mcmFtZV9zdGVwLmNsYXNzTGlzdC5jb250YWlucygiYWN0aXZlIikpIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgdG9nZ2xlRnJhbWVzLCB0cnVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB0b2dnbGVTaG9ydGN1dHMoKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cub3BlbigiaHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL1lvdVR1YmUtc2hvcnRjdXRzIiwgIl9ibGFuayIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUNvbnNvbGUoZXZlbnQpIHsKICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQuaWQgPT09ICJjb25zb2xlLWJ1dHRvbiIpIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgicGxheWVyLWNvbnNvbGUiKTsKICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0W2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoInBsYXllci1jb25zb2xlIikgPyAiYWRkIiA6ICJyZW1vdmUiXSgiY2xvc2UiKTsKICAgICAgICAgICAgICAgICAgICBzZXQoImFkdk9wdHMiLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCJwbGF5ZXItY29uc29sZSIpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB0b2dnbGVQbGF5KCkgewogICAgICAgICAgICAgICAgc2V0KCJWSURfUExSX0FUUEwiLCAhdXNlcl9zZXR0aW5ncy5WSURfUExSX0FUUEwpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdFsodXNlcl9zZXR0aW5ncy5WSURfUExSX0FUUEwgJiYgImFkZCIpIHx8ICJyZW1vdmUiXSgicGFydF9hdXRvcGxheW9uIik7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXV0b3BsYXktYnV0dG9uIikuY2xhc3NMaXN0Wyh1c2VyX3NldHRpbmdzLlZJRF9QTFJfQVRQTCAmJiAiYWRkIikgfHwgInJlbW92ZSJdKCJhY3RpdmUiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB0b2dnbGVMb29wKGV2ZW50KSB7CiAgICAgICAgICAgICAgICB2YXIgdmlkZW9QbGF5ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJ2aWRlbyIpOwogICAgICAgICAgICAgICAgaWYgKHZpZGVvUGxheWVyKSB7CiAgICAgICAgICAgICAgICAgICAgdmlkZW9QbGF5ZXIubG9vcCA9IGV2ZW50ID8gIXVzZXJfc2V0dGluZ3MubG9vcFZpZCA6IHVzZXJfc2V0dGluZ3MubG9vcFZpZDsKICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRPcHRpb25zLmxvb3BfYnV0dG9uLmNsYXNzTGlzdFsoIXVzZXJfc2V0dGluZ3MubG9vcFZpZCAmJiAiYWRkIikgfHwgInJlbW92ZSJdKCJhY3RpdmUiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzZXQoImxvb3BWaWQiLCBhZHZhbmNlZE9wdGlvbnMubG9vcF9idXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCJhY3RpdmUiKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gdG9nZ2xlQ2luZW1hTW9kZShldmVudCkgewogICAgICAgICAgICAgICAgdmFyIHBsclN0YXRlID0gYXBpICYmIGFwaS5nZXRQbGF5ZXJTdGF0ZSAmJiBhcGkuZ2V0UGxheWVyU3RhdGUoKSA8IDUgJiYgYXBpLmdldFBsYXllclN0YXRlKCkgPiAwOwogICAgICAgICAgICAgICAgc2V0KCJsaWdodHNPdXQiLCBldmVudCA/ICF1c2VyX3NldHRpbmdzLmxpZ2h0c091dCA6IHRydWUpOwogICAgICAgICAgICAgICAgYWR2YW5jZWRPcHRpb25zLmNpbmVtYV9tb2RlLmNsYXNzTGlzdFsodXNlcl9zZXR0aW5ncy5saWdodHNPdXQgJiYgImFkZCIpIHx8ICJyZW1vdmUiXSgiYWN0aXZlIik7CiAgICAgICAgICAgICAgICBpZiAoZXZlbnQgJiYgcGxyU3RhdGUpIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0Wyh1c2VyX3NldHRpbmdzLmxpZ2h0c091dCAmJiAiYWRkIikgfHwgInJlbW92ZSJdKCJwYXJ0X2NpbmVtYV9tb2RlIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlVG9nZ2xlcyhldmVudCkgewogICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5kYXRhc2V0ICYmIGV2ZW50LnRhcmdldC5kYXRhc2V0LmFjdGlvbiAmJiBhZHZhbmNlZE9wdGlvbnMuYWN0aW9uc1tldmVudC50YXJnZXQuZGF0YXNldC5hY3Rpb25dKSB7CiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRPcHRpb25zLmFjdGlvbnNbZXZlbnQudGFyZ2V0LmRhdGFzZXQuYWN0aW9uXShldmVudCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gaG9va0J1dHRvbnMoKSB7CiAgICAgICAgICAgICAgICBhZHZhbmNlZE9wdGlvbnMucG9wUGxheWVyID0gcG9wUGxheWVyOwogICAgICAgICAgICAgICAgYWR2YW5jZWRPcHRpb25zLmZ1bGxfYnJvd3NlciA9IGFkdmFuY2VkT3B0aW9ucy5jb250cm9scy5xdWVyeVNlbGVjdG9yKCIjZnVsbGJyb3dzZXItYnV0dG9uIik7CiAgICAgICAgICAgICAgICBhZHZhbmNlZE9wdGlvbnMuY2luZW1hX21vZGUgPSBhZHZhbmNlZE9wdGlvbnMuY29udHJvbHMucXVlcnlTZWxlY3RvcigiI2NpbmVtYW1vZGUtYnV0dG9uIik7CiAgICAgICAgICAgICAgICBhZHZhbmNlZE9wdGlvbnMubG9vcF9idXR0b24gPSBhZHZhbmNlZE9wdGlvbnMuY29udHJvbHMucXVlcnlTZWxlY3RvcigiI2xvb3AtYnV0dG9uIik7CiAgICAgICAgICAgICAgICBhZHZhbmNlZE9wdGlvbnMuZnJhbWVfc3RlcCA9IGFkdmFuY2VkT3B0aW9ucy5jb250cm9scy5xdWVyeVNlbGVjdG9yKCIjZnJhbWVzdGVwLWJ1dHRvbiIpOwogICAgICAgICAgICAgICAgYWR2YW5jZWRPcHRpb25zLmFjdGlvbnMgPSB7CiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlUGxheTogdG9nZ2xlUGxheSwKICAgICAgICAgICAgICAgICAgICB0b2dnbGVMb29wOiB0b2dnbGVMb29wLAogICAgICAgICAgICAgICAgICAgIGdldFRodW1iOiBnZXRUaHVtYiwKICAgICAgICAgICAgICAgICAgICBnZXRTY3JlZW5zaG90OiBnZXRTY3JlZW5zaG90LAogICAgICAgICAgICAgICAgICAgIHBvcFBsYXllcjogcG9wUGxheWVyLAogICAgICAgICAgICAgICAgICAgIHRvZ2dsZUZ1bGxCcm93c2VyOiB0b2dnbGVGdWxsQnJvd3NlciwKICAgICAgICAgICAgICAgICAgICB0b2dnbGVDaW5lbWFNb2RlOiB0b2dnbGVDaW5lbWFNb2RlLAogICAgICAgICAgICAgICAgICAgIHRvZ2dsZUZyYW1lczogdG9nZ2xlRnJhbWVzLAogICAgICAgICAgICAgICAgICAgIHRvZ2dsZVNob3J0Y3V0czogdG9nZ2xlU2hvcnRjdXRzCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBoYW5kbGVUb2dnbGVzKTsKICAgICAgICAgICAgICAgIGlmICh1c2VyX3NldHRpbmdzLmxvb3BWaWQgJiYgIWFkdmFuY2VkT3B0aW9ucy5sb29wX2J1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoImFjdGl2ZSIpKSB7CiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRPcHRpb25zLmxvb3BfYnV0dG9uLmNsYXNzTGlzdC5hZGQoImFjdGl2ZSIpOwogICAgICAgICAgICAgICAgICAgIHRvZ2dsZUxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh1c2VyX3NldHRpbmdzLmZ1bGxCcnMgJiYgIWFkdmFuY2VkT3B0aW9ucy5mdWxsX2Jyb3dzZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCJhY3RpdmUiKSkgewogICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkT3B0aW9ucy5mdWxsX2Jyb3dzZXIuY2xhc3NMaXN0LmFkZCgiYWN0aXZlIik7CiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlRnVsbEJyb3dzZXIoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh1c2VyX3NldHRpbmdzLmxpZ2h0c091dCAmJiAhYWR2YW5jZWRPcHRpb25zLmNpbmVtYV9tb2RlLmNsYXNzTGlzdC5jb250YWlucygiYWN0aXZlIikpIHsKICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZE9wdGlvbnMuY2luZW1hX21vZGUuY2xhc3NMaXN0LmFkZCgiYWN0aXZlIik7CiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQ2luZW1hTW9kZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHVzZXJfc2V0dGluZ3MuZnJhbWVfc3RlcCAmJiAhYWR2YW5jZWRPcHRpb25zLmZyYW1lX3N0ZXAuY2xhc3NMaXN0LmNvbnRhaW5zKCJhY3RpdmUiKSkgewogICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkT3B0aW9ucy5mcmFtZV9zdGVwLmNsYXNzTGlzdC5hZGQoImFjdGl2ZSIpOwogICAgICAgICAgICAgICAgICAgIHRvZ2dsZUZyYW1lcygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGFkdmFuY2VkT3B0aW9ucygpIHsKICAgICAgICAgICAgICAgIHZhciBoZWFkZXIsIGNuc2xCdG4sIGNuc2xDb250OwogICAgICAgICAgICAgICAgaGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIndhdGNoLWhlYWRlciIpOwogICAgICAgICAgICAgICAgY25zbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb25zb2xlLWJ1dHRvbiIpOwogICAgICAgICAgICAgICAgYWR2YW5jZWRPcHRpb25zLmNvbnRyb2xzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBsYXllci1jb25zb2xlIik7CiAgICAgICAgICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09PSAiL3dhdGNoIiAmJiBoZWFkZXIgJiYgIWNuc2xCdG4pIHsKICAgICAgICAgICAgICAgICAgICBjbnNsQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTsKICAgICAgICAgICAgICAgICAgICBjbnNsQnRuLmlubmVySFRNTCA9IC8vCiAgICAgICAgICAgICAgICAgICAgICAgIGA8YnV0dG9uIGlkPSdjb25zb2xlLWJ1dHRvbicgZGF0YS1wPSd0dGx8QURWX09QVFMnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0nY2xvc2UnIHZpZXdCb3g9JzAgMCAxMCAxMCc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gcG9pbnRzPScxMCwxLjQgOC42LDAgNSwzLjYgMS40LDAgMCwxLjQgMy42LDUgMCw4LjYgMS40LDEwIDUsNi40IDguNiwxMCAxMCw4LjYgNi40LDUnLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0nb3Blbicgdmlld0JveD0nMCAwIDEyIDEwJz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCB3aWR0aD0nMTInIGhlaWdodD0nMicvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHdpZHRoPScxMicgaGVpZ2h0PScyJyB5PSc0Jy8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3Qgd2lkdGg9JzEyJyBoZWlnaHQ9JzInIHk9JzgnLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5gOwogICAgICAgICAgICAgICAgICAgIGNuc2xCdG4gPSBzZXRMb2NhbGUoY25zbEJ0bi5jb250ZW50KS5maXJzdENoaWxkOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgdG9nZ2xlQ29uc29sZSk7CiAgICAgICAgICAgICAgICAgICAgY25zbENvbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpOwogICAgICAgICAgICAgICAgICAgIGNuc2xDb250LmlubmVySFRNTCA9ICI8ZGl2IGlkPSdhZHZhbmNlZC1vcHRpb25zJz48L2Rpdj4iOwogICAgICAgICAgICAgICAgICAgIGNuc2xDb250ID0gY25zbENvbnQuY29udGVudC5maXJzdENoaWxkOwogICAgICAgICAgICAgICAgICAgIGNuc2xDb250LmFwcGVuZENoaWxkKGNuc2xCdG4pOwogICAgICAgICAgICAgICAgICAgIGhlYWRlci5hcHBlbmRDaGlsZChjbnNsQ29udCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGFkdmFuY2VkT3B0aW9ucy5jb250cm9scykgewogICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZE9wdGlvbnMuY29udHJvbHMucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkT3B0aW9ucy5jb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRlbXBsYXRlIik7CiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRPcHRpb25zLmNvbnRyb2xzLmlubmVySFRNTCA9IC8vCiAgICAgICAgICAgICAgICAgICAgICAgIGA8ZGl2IGlkPSdwbGF5ZXItY29uc29sZSc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSdhdXRvcGxheS1idXR0b24nIGNsYXNzPSd5dC11aXgtdG9vbHRpcCcgZGF0YS1wPSd0dHB8Q05TTF9BUCcgZGF0YS1hY3Rpb249J3RvZ2dsZVBsYXknPjxzdmcgdmlld0JveD0nMCAwIDE0IDE2Jz48cG9seWdvbiBwb2ludHM9JzAsMTYgMTQsOCAwLDAnLz48L3N2Zz48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9J2xvb3AtYnV0dG9uJyBjbGFzcz0neXQtdWl4LXRvb2x0aXAnIGRhdGEtcD0ndHRwfENOU0xfUlBUJyBkYXRhLWFjdGlvbj0ndG9nZ2xlTG9vcCc+PHN2ZyB2aWV3Qm94PScwIDAgMjAuNSAxOCc+PHBhdGggZD0nTTExLjUsMEM5LDAsNi44LDEsNS4xLDIuNmwxLjQsMS40QzcuOCwyLjgsOS42LDIsMTEuNSwyYzMuOSwwLDcsMy4xLDcsN2MwLDMuOS0zLjEsNy03LDdzLTctMy4xLTctN0g3TDMuNSw0TDAsOSBoMi41YzAsNSw0LDksOSw5czktNCw5LTlDMjAuNSw0LDE2LjUsMCwxMS41LDB6Jy8+PC9zdmc+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSdzYXZlLXRodW1ibmFpbC1idXR0b24nIGNsYXNzPSd5dC11aXgtdG9vbHRpcCcgZGF0YS1wPSd0dHB8Q05TTF9TVlRIJyBkYXRhLWFjdGlvbj0nZ2V0VGh1bWInPjxzdmcgdmlld0JveD0nMCAwIDI0IDE4Jz48cGF0aCBkPSdNMCwwdjE4aDI0VjBIMHogTTIyLDE2SDJWMmgyMFYxNnonLz48Y2lyY2xlIGN4PSc4JyBjeT0nNicgcj0nMycvPjxwb2x5Z29uIHBvaW50cz0nMywxMiA2LDEwIDksMTIgMTAsMTIgMTYsNiAyMSwxMSAyMSwxNSAzLDE1Jy8+PC9zdmc+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSdzY3JlZW5zaG90LWJ1dHRvbicgY2xhc3M9J3l0LXVpeC10b29sdGlwJyBkYXRhLXA9J3R0cHxDTlNMX1NTJyBkYXRhLWFjdGlvbj0nZ2V0U2NyZWVuc2hvdCc+PHN2ZyB2aWV3Qm94PScwIDAgMjIgMTgnPjxwYXRoIGQ9J00xNy43LDRsLTIuMy00aC05TDQuMSw0SDB2MTRoMjJWNEgxNy43eiBNMTEsMTVjLTIuOCwwLTUtMi4yLTUtNXMyLjItNSw1LTVzNSwyLjIsNSw1UzEzLjgsMTUsMTEsMTV6Jy8+PGNpcmNsZSBjeD0nMTEnIGN5PScxMCcgcj0nNCcvPjwvc3ZnPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0ncG9wb3V0LWJ1dHRvbicgY2xhc3M9J3l0LXVpeC10b29sdGlwJyBkYXRhLXA9J3R0cHxDTlNMX1BQT1QnIGRhdGEtYWN0aW9uPSdwb3BQbGF5ZXInPjxzdmcgdmlld0JveD0nMCAwIDIyIDE2Jz48cGF0aCBkPSdNNiwwdjEyaDE2VjBINnogTTIwLDEwSDhWMmgxMlYxMHonLz48cG9seWdvbiBwb2ludHM9JzE0LDE0IDIsMTQgMiw2IDUsNiA1LDQgMCw0IDAsMTYgMTYsMTYgMTYsMTMgMTQsMTMnLz48L3N2Zz48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9J2Z1bGxicm93c2VyLWJ1dHRvbicgY2xhc3M9J3l0LXVpeC10b29sdGlwJyBkYXRhLXA9J3R0cHxDTlNMX0ZMQlInIGRhdGEtYWN0aW9uPSd0b2dnbGVGdWxsQnJvd3Nlcic+PHN2ZyB2aWV3Qm94PScwIDAgMjAgMTgnPjxwYXRoIGQ9J00wLDB2MThoMjBWMEgweiBNMTgsMTZIMlY0aDE2VjE2eicvPjxwb2x5Z29uIHBvaW50cz0nMyw1IDMsOSA1LDkgNSw3IDcsNyA3LDUnLz48cG9seWdvbiBwb2ludHM9JzE3LDUgMTMsNSAxMyw3IDE1LDcgMTUsOSAxNyw5Jy8+PHBvbHlnb24gcG9pbnRzPScxNywxNSAxNywxMSAxNSwxMSAxNSwxMyAxMywxMyAxMywxNScvPjxwb2x5Z29uIHBvaW50cz0nMywxNSA3LDE1IDcsMTMgNSwxMyA1LDExIDMsMTEnLz48L3N2Zz48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9J2NpbmVtYW1vZGUtYnV0dG9uJyBjbGFzcz0neXQtdWl4LXRvb2x0aXAnIGRhdGEtcD0ndHRwfENOU0xfQ0lOTV9NRCcgZGF0YS1hY3Rpb249J3RvZ2dsZUNpbmVtYU1vZGUnPjxzdmcgdmlld0JveD0nMCAwIDIwIDE4Jz48cGF0aCBkPSdNMTgsMHYyaC0yVjBINHYySDJWMEgwdjE4aDJ2LTJoMnYyaDEydi0yaDJ2MmgyVjBIMTh6IE00LDE0SDJ2LTJoMlYxNHogTTQsMTBIMlY4aDJWMTB6IE00LDZIMlY0aDJWNnogTTE0LDE2IEg2di02aDhWMTZ6IE0xNCw4SDZWMmg4Vjh6IE0xOCwxNGgtMnYtMmgyVjE0eiBNMTgsMTBoLTJWOGgyVjEweiBNMTgsNmgtMlY0aDJWNnonLz48L3N2Zz48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9J2ZyYW1lc3RlcC1idXR0b24nIGNsYXNzPSd5dC11aXgtdG9vbHRpcCcgZGF0YS1wPSd0dHB8Q05TTF9GUk1FJyBkYXRhLWFjdGlvbj0ndG9nZ2xlRnJhbWVzJz48c3ZnIHZpZXdCb3g9JzAgMCAyMCAyMCc+PHBhdGggZD0nTTIwLDloLTIuMWMtMC41LTMuNi0zLjMtNi41LTYuOS02LjlWMEg5djIuMUM1LjQsMi41LDIuNSw1LjQsMi4xLDlIMHYyaDIuMWMwLjUsMy42LDMuMyw2LjUsNi45LDYuOVYyMGgyIHYtMi4xYzMuNi0wLjUsNi41LTMuMyw2LjktNi45SDIwVjl6IE0xMSwxNS45VjE0SDl2MS45Yy0yLjUtMC40LTQuNS0yLjQtNC45LTQuOUg2VjlINC4xQzQuNSw2LjUsNi41LDQuNSw5LDQuMVY2aDJWNC4xIGMyLjUsMC40LDQuNSwyLjQsNC45LDQuOUgxNHYyaDEuOUMxNS41LDEzLjUsMTMuNSwxNS41LDExLDE1Ljl6Jy8+PGNpcmNsZSBjeD0nMTAnIGN5PScxMCcgcj0nMScvPjwvc3ZnPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0nc2hvcnRjdXRzLWJ1dHRvbicgY2xhc3M9J3l0LXVpeC10b29sdGlwJyBkYXRhLXA9J3R0cHxDTlNMX1lUU0MnIGRhdGEtYWN0aW9uPSd0b2dnbGVTaG9ydGN1dHMnPjxzdmcgdmlld0JveD0nMCAwIDE4IDE4Jz48cG9seWdvbiBwb2ludHM9JzcsOCAxMCw4IDEwLDEzIDExLDEzIDExLDE0IDcsMTQgNywxMyA4LDEzIDgsOSA3LDknLz48cmVjdCB4PSc4JyB5PSc0JyB3aWR0aD0nMicgaGVpZ2h0PScyJy8+PHBhdGggZD0nTTksMEM0LDAsMCw0LDAsOWMwLDUsNCw5LDksOXM5LTQsOS05QzE4LDQsMTQsMCw5LDB6IE05LDE2LjFjLTMuOSwwLTcuMS0zLjItNy4xLTcuMVM1LjEsMS45LDksMS45IHM3LjEsMy4yLDcuMSw3LjFTMTIuOSwxNi4xLDksMTYuMXonLz48L3N2Zz48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncy5WSURfUExSX0FUUEwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRPcHRpb25zLmNvbnRyb2xzLmNvbnRlbnQucXVlcnlTZWxlY3RvcigiI2F1dG9wbGF5LWJ1dHRvbiIpLmNsYXNzTGlzdC5hZGQoImFjdGl2ZSIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZE9wdGlvbnMuY29udHJvbHMgPSBzZXRMb2NhbGUoYWR2YW5jZWRPcHRpb25zLmNvbnRyb2xzLmNvbnRlbnQpLmZpcnN0Q2hpbGQ7CiAgICAgICAgICAgICAgICAgICAgY25zbENvbnQuYXBwZW5kQ2hpbGQoYWR2YW5jZWRPcHRpb25zLmNvbnRyb2xzKTsKICAgICAgICAgICAgICAgICAgICBob29rQnV0dG9ucygpOwogICAgICAgICAgICAgICAgICAgIGlmICh1c2VyX3NldHRpbmdzLmFkdk9wdHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoInBsYXllci1jb25zb2xlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGNuc2xCdG4uY2xhc3NMaXN0LmFkZCgiY2xvc2UiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gaW5pQWN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2ZXIsIGxvYWRfbW9yZSwgY2xpY2tfdGl0bGU7CiAgICAgICAgICAgICAgICBsb2FkX21vcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjd2F0Y2gtbW9yZS1yZWxhdGVkLCAubG9hZC1tb3JlLWJ1dHRvbiIpOwogICAgICAgICAgICAgICAgY2xpY2tfdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIueXQtdWl4LXRpbGUiKTsKICAgICAgICAgICAgICAgIHdoaWxlIChjbGlja190aXRsZSkgewogICAgICAgICAgICAgICAgICAgIGNsaWNrX3RpdGxlLmNsYXNzTGlzdC5yZW1vdmUoInl0LXVpeC10aWxlIik7CiAgICAgICAgICAgICAgICAgICAgY2xpY2tfdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIueXQtdWl4LXRpbGUiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChsb2FkX21vcmUgJiYgIWxvYWRfbW9yZS5jbGFzc0xpc3QuY29udGFpbnMoIm1vZFRodW1icyIpKSB7CiAgICAgICAgICAgICAgICAgICAgbG9hZF9tb3JlLmNsYXNzTGlzdC5hZGQoIm1vZFRodW1icyIpOwogICAgICAgICAgICAgICAgICAgIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobW9kVGh1bWJzKTsKICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGxvYWRfbW9yZSwgewogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZU9sZFZhbHVlOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoZXZlbnQgJiYgL3BvcG91dG1vZGV8YmxhY2tsaXN0Ly50ZXN0KGV2ZW50LnRhcmdldC5jbGFzc05hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICBldmVudCA9IGV2ZW50LnRhcmdldDsKICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCJwb3BvdXRtb2RlIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcG9wUGxheWVyKGV2ZW50LmRhdGFzZXQubGluayk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5kYXRhc2V0Lnl0aWQgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJfc2V0dGluZ3MuYmxhY2tsaXN0W2V2ZW50LmRhdGFzZXQueXRpZF0gPSBldmVudC5kYXRhc2V0LnVzZXI7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldCgiYmxhY2tsaXN0IiwgdXNlcl9zZXR0aW5ncy5ibGFja2xpc3QpOwogICAgICAgICAgICAgICAgICAgICAgICBtb2RUaHVtYnMoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gc2V0QnV0dG9ucygpIHsKICAgICAgICAgICAgICAgIHZhciBpLCBqLCBsaXN0LCB0ZW1wLCB0aHVtYiwgYnV0dG9uOwogICAgICAgICAgICAgICAgbGlzdCA9IE9iamVjdC5rZXlzKG1vZFRodW1icy50aHVtYnMpOwogICAgICAgICAgICAgICAgaSA9IGxpc3QubGVuZ3RoOwogICAgICAgICAgICAgICAgd2hpbGUgKGktLSkgewogICAgICAgICAgICAgICAgICAgIHRlbXAgPSBtb2RUaHVtYnMudGh1bWJzW2xpc3RbaV1dOwogICAgICAgICAgICAgICAgICAgIGogPSB0ZW1wLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoai0tKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRodW1iID0gdGVtcFtqXS5xdWVyeVNlbGVjdG9yKCIueXQtbG9ja3VwIC55dC1sb2NrdXAtdGh1bWJuYWlsLCAudGh1bWItd3JhcHBlciIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGh1bWIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyX3NldHRpbmdzLkdFTl9QUE9UX09OICYmICF0aHVtYi5xdWVyeVNlbGVjdG9yKCIucG9wb3V0bW9kZSIpICYmICEvY2hhbm5lbC8udGVzdCh0ZW1wW2pdLmZpcnN0Q2hpbGQuY2xhc3NOYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRlbXBsYXRlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IC8vCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA8ZGl2IGRhdGEtcD0ndHRsfFBQT1RfT1BFTiZ0dHB8UFBPVF9PUEVOJyBjbGFzcz0neXQtdWl4LXRvb2x0aXAgcG9wb3V0bW9kZSc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHZpZXdCb3g9JzAgMCAxMCAxMCcgY2xhc3M9J3RodW1iLXN2Zyc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gcG9pbnRzPSc3LDkgMSw5IDEsNCAzLDQgMywyIDAsMiAwLDEwIDgsMTAgOCw3IDcsNycvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9J000LDB2Nmg2VjBINHogTTksNUg1VjJoNFY1eicvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNvbnRlbnQuZmlyc3RDaGlsZC5kYXRhc2V0LmxpbmsgPSB0ZW1wW2pdLnF1ZXJ5U2VsZWN0b3IoImFbaHJlZio9Jy93YXRjaD92J10iKS5ocmVmOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRodW1iLmFwcGVuZENoaWxkKHNldExvY2FsZShidXR0b24uY29udGVudCkuZmlyc3RDaGlsZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncy5CTEtfT04gJiYgIXRodW1iLnF1ZXJ5U2VsZWN0b3IoIi5ibGFja2xpc3QiKSAmJiB3aW5kb3cueXQuY29uZmlnXy5QQUdFX05BTUUgIT09ICJjaGFubmVsIiAmJiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgIT09ICIvZmVlZC9zdWJzY3JpcHRpb25zIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRlbXBsYXRlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IC8vCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA8ZGl2IGRhdGEtcD0ndHRsfEJMQ0tfQUREJnR0cHxCTENLX0FERCcgY2xhc3M9J3l0LXVpeC10b29sdGlwIGJsYWNrbGlzdCc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHZpZXdCb3g9JzAgMCAxMCAxMCcgY2xhc3M9J3RodW1iLXN2Zyc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gcG9pbnRzPScxMCwxLjQgOC42LDAgNSwzLjYgMS40LDAgMCwxLjQgMy42LDUgMCw4LjYgMS40LDEwIDUsNi40IDguNiwxMCAxMCw4LjYgNi40LDUnLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jb250ZW50LmZpcnN0Q2hpbGQuZGF0YXNldC51c2VyID0gdGVtcFtqXS51c2VybmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uY29udGVudC5maXJzdENoaWxkLmRhdGFzZXQueXRpZCA9IGxpc3RbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGh1bWIuYXBwZW5kQ2hpbGQoc2V0TG9jYWxlKGJ1dHRvbi5jb250ZW50KS5maXJzdENoaWxkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBkZWxWaWRlb3MoKSB7CiAgICAgICAgICAgICAgICB2YXIgaSwgaiwgdGVtcCwgcGFyZW50LCBibGFja2xpc3QsIGhhc191cG5leHQ7CiAgICAgICAgICAgICAgICBoYXNfdXBuZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmF1dG9wbGF5LWJhciIpOwogICAgICAgICAgICAgICAgYmxhY2tsaXN0ID0gT2JqZWN0LmtleXModXNlcl9zZXR0aW5ncy5ibGFja2xpc3QpOwogICAgICAgICAgICAgICAgaSA9IGJsYWNrbGlzdC5sZW5ndGg7CiAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKSB7CiAgICAgICAgICAgICAgICAgICAgdGVtcCA9IG1vZFRodW1icy50aHVtYnNbYmxhY2tsaXN0W2ldXTsKICAgICAgICAgICAgICAgICAgICBpZiAodGVtcCkgewogICAgICAgICAgICAgICAgICAgICAgICBqID0gdGVtcC5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChqLS0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNfdXBuZXh0ICYmIGhhc191cG5leHQuY29udGFpbnModGVtcFtqXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNfdXBuZXh0LnBhcmVudE5vZGUucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzX3VwbmV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi53YXRjaC1zaWRlYmFyLXNlcGFyYXRpb24tbGluZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNfdXBuZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc191cG5leHQucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc191cG5leHQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gdGVtcFtqXS5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbal0ucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShqLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChwYXJlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50LmNoaWxkRWxlbWVudENvdW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuZmlyc3RDaGlsZC5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlbXAubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgbW9kVGh1bWJzLnRodW1ic1tibGFja2xpc3RbaV1dOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0ZW1wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmZlZWQtaXRlbS1jb250YWluZXI6bm90KC5zZWFyY2gtaGlzdG9yeS1pdGVtKSIpOwogICAgICAgICAgICAgICAgaSA9IHRlbXAubGVuZ3RoOwogICAgICAgICAgICAgICAgd2hpbGUgKGktLSkgewogICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoInVsIikubGVuZ3RoIDwgMikgewogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSB0ZW1wW2ldLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaV0ucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChwYXJlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQuY2hpbGRFbGVtZW50Q291bnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmZpcnN0Q2hpbGQucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gZ2V0VmlkZW9zKCkgewogICAgICAgICAgICAgICAgdmFyIGksIGxpc3QsIHRlbXAsIHZpZGVvX2xpc3QsIGNoYW5uZWxfaWQ7CiAgICAgICAgICAgICAgICBtb2RUaHVtYnMudGh1bWJzID0ge307CiAgICAgICAgICAgICAgICB2aWRlb19saXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAKICAgICAgICAgICAgICAgICAgICAueXQtc2hlbGYtZ3JpZC1pdGVtLAogICAgICAgICAgICAgICAgICAgIC52aWRlby1saXN0LWl0ZW0sCiAgICAgICAgICAgICAgICAgICAgI3Jlc3VsdHMgLml0ZW0tc2VjdGlvbiA+IGxpLAogICAgICAgICAgICAgICAgICAgIC5leHBhbmRlZC1zaGVsZi1jb250ZW50LWl0ZW0td3JhcHBlcgogICAgICAgICAgICAgICAgYCkpOwogICAgICAgICAgICAgICAgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYAogICAgICAgICAgICAgICAgICAgIC55dC1sb2NrdXAtYnlsaW5lID4gYSwKICAgICAgICAgICAgICAgICAgICAueXQtbG9ja3VwLWNvbnRlbnQgLmctaG92ZXJjYXJkLAogICAgICAgICAgICAgICAgICAgIC52aWRlby1saXN0LWl0ZW0gLmctaG92ZXJjYXJkLAogICAgICAgICAgICAgICAgICAgIC5jaGFubmVscy1jb250ZW50LWl0ZW0gLnl0LWxvY2t1cC10aXRsZSA+IGEKICAgICAgICAgICAgICAgIGApOwogICAgICAgICAgICAgICAgaSA9IGxpc3QubGVuZ3RoOwogICAgICAgICAgICAgICAgd2hpbGUgKGktLSkgewogICAgICAgICAgICAgICAgICAgIHRlbXAgPSBsaXN0W2ldOwogICAgICAgICAgICAgICAgICAgIGNoYW5uZWxfaWQgPSB0ZW1wLmRhdGFzZXQueXRpZDsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAodGVtcCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcC50YWdOYW1lICYmIHRlbXAudGFnTmFtZSA9PT0gIkxJIiAmJiB2aWRlb19saXN0LmluZGV4T2YodGVtcCkgPiAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcC51c2VybmFtZSA9IGxpc3RbaV0udGV4dENvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1vZFRodW1icy50aHVtYnNbY2hhbm5lbF9pZF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RUaHVtYnMudGh1bWJzW2NoYW5uZWxfaWRdID0gW3RlbXBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RUaHVtYnMudGh1bWJzW2NoYW5uZWxfaWRdLmluZGV4T2YodGVtcCkgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kVGh1bWJzLnRodW1ic1tjaGFubmVsX2lkXS5wdXNoKHRlbXApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCA9IHRlbXAucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gbW9kVGh1bWJzKCkgewogICAgICAgICAgICAgICAgaWYgKCh1c2VyX3NldHRpbmdzLkJMS19PTiB8fCB1c2VyX3NldHRpbmdzLkdFTl9QUE9UX09OKSAmJiAhd2luZG93Lm9wZW5lciAmJiB3aW5kb3cueXQgJiYgd2luZG93Lnl0LmNvbmZpZ18gJiYgL3dhdGNofGluZGV4fGZlZWR8Y2hhbm5lbHxyZXN1bHRzLy50ZXN0KHdpbmRvdy55dC5jb25maWdfLlBBR0VfTkFNRSkpIHsKICAgICAgICAgICAgICAgICAgICBnZXRWaWRlb3MoKTsKICAgICAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncy5CTEtfT04gJiYgd2luZG93Lnl0LmNvbmZpZ18uUEFHRV9OQU1FICE9PSAiY2hhbm5lbCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVsVmlkZW9zKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHNldEJ1dHRvbnMoKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGluaUFjdGlvbik7CiAgICAgICAgICAgICAgICAgICAgaW5pQWN0aW9uKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gc2V0VmlkZW9Db3VudCgpIHsKICAgICAgICAgICAgICAgIHZhciBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICAgICAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9ICIgwrcgIjsKICAgICAgICAgICAgICAgIGVuaGFuY2VkRGV0YWlscy51c2VybmFtZS5hcHBlbmRDaGlsZChzcGFuKTsKICAgICAgICAgICAgICAgIGVuaGFuY2VkRGV0YWlscy5saW5rLmhyZWYgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgIi9jaGFubmVsLyIgKyBlbmhhbmNlZERldGFpbHMudXNlci5kYXRhc2V0Lnl0aWQgKyAiL3ZpZGVvcyI7CiAgICAgICAgICAgICAgICBlbmhhbmNlZERldGFpbHMudXNlcm5hbWUuYXBwZW5kQ2hpbGQoZW5oYW5jZWREZXRhaWxzLmxpbmspOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVZpZGVvQ291bnQoZGV0YWlscykgewogICAgICAgICAgICAgICAgZGV0YWlscyA9IGRldGFpbHMudGFyZ2V0LnJlc3BvbnNlLnF1ZXJ5U2VsZWN0b3IoIi5wbC1oZWFkZXItZGV0YWlscyBsaTpudGgtY2hpbGQoMikiKTsKICAgICAgICAgICAgICAgIGlmIChkZXRhaWxzKSB7CiAgICAgICAgICAgICAgICAgICAgZW5oYW5jZWREZXRhaWxzLmxpbmsuY2xhc3NOYW1lID0gInNwZi1saW5rIjsKICAgICAgICAgICAgICAgICAgICBlbmhhbmNlZERldGFpbHMubGluay50ZXh0Q29udGVudCA9IGNpZFtlbmhhbmNlZERldGFpbHMudXNlci5kYXRhc2V0Lnl0aWRdID0gZGV0YWlscy50ZXh0Q29udGVudDsKICAgICAgICAgICAgICAgICAgICBzZXRWaWRlb0NvdW50KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gZ2V0VmlkZW9Db3VudCgpIHsKICAgICAgICAgICAgICAgIGVuaGFuY2VkRGV0YWlscy51c2VybmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi55dC11c2VyLWluZm8iKTsKICAgICAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInVwbG9hZGVkLXZpZGVvcyIpICYmIGVuaGFuY2VkRGV0YWlscy51c2VybmFtZSkgewogICAgICAgICAgICAgICAgICAgIGVuaGFuY2VkRGV0YWlscy5saW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgICAgICAgICAgICAgIGVuaGFuY2VkRGV0YWlscy5saW5rLmlkID0gInVwbG9hZGVkLXZpZGVvcyI7CiAgICAgICAgICAgICAgICAgICAgZW5oYW5jZWREZXRhaWxzLnVzZXJuYW1lLmFwcGVuZENoaWxkKGVuaGFuY2VkRGV0YWlscy5saW5rKTsKICAgICAgICAgICAgICAgICAgICBlbmhhbmNlZERldGFpbHMudXNlciA9IGVuaGFuY2VkRGV0YWlscy51c2VybmFtZS5xdWVyeVNlbGVjdG9yKCJhIik7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNpZFtlbmhhbmNlZERldGFpbHMudXNlci5kYXRhc2V0Lnl0aWRdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuaGFuY2VkRGV0YWlscy5saW5rLnRleHRDb250ZW50ID0gY2lkW2VuaGFuY2VkRGV0YWlscy51c2VyLmRhdGFzZXQueXRpZF07CiAgICAgICAgICAgICAgICAgICAgICAgIHNldFZpZGVvQ291bnQoKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFhIUigiR0VUIiwgdXBkYXRlVmlkZW9Db3VudCwgIi9wbGF5bGlzdD9saXN0PSIgKyBlbmhhbmNlZERldGFpbHMudXNlci5kYXRhc2V0Lnl0aWQucmVwbGFjZSgiVUMiLCAiVVUiKSwgImRvYyIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBnZXRDaGFubmVsSW5mbyhkZXRhaWxzKSB7CiAgICAgICAgICAgICAgICB2YXIgcmV0cnksIGlzTGl2ZTsKICAgICAgICAgICAgICAgIGlzTGl2ZSA9IGRldGFpbHMudGFyZ2V0LnJlc3BvbnNlLnF1ZXJ5U2VsZWN0b3IoIi55dC1iYWRnZS1saXZlIik7CiAgICAgICAgICAgICAgICBpZiAoIWlzTGl2ZSkgewogICAgICAgICAgICAgICAgICAgIHJldHJ5ID0gZGV0YWlscy50YXJnZXQucmVzcG9uc2VVUkwuc3BsaXQoIi92aWRlb3MiKS5sZW5ndGggPCAyOwogICAgICAgICAgICAgICAgICAgIGRldGFpbHMgPSBkZXRhaWxzLnRhcmdldC5yZXNwb25zZS5xdWVyeVNlbGVjdG9yQWxsKCJbZGF0YS1jb250ZXh0LWl0ZW0taWQ9JyIgKyB3aW5kb3cueXRwbGF5ZXIuY29uZmlnLmFyZ3MudmlkZW9faWQgKyAiJ10gLnl0LWxvY2t1cC1tZXRhLWluZm8gbGkiKTsKICAgICAgICAgICAgICAgICAgICBpZiAoZGV0YWlscyAmJiBkZXRhaWxzLmxlbmd0aCA+IDAgJiYgZW5oYW5jZWREZXRhaWxzLndhdGNoVGltZS50ZXh0Q29udGVudC5zcGxpdCgiwrciKS5sZW5ndGggPCAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuaGFuY2VkRGV0YWlscy53YXRjaFRpbWUudGV4dENvbnRlbnQgKz0gIiDCtyAiICsgZGV0YWlsc1tyZXRyeSA/IDAgOiAxXS50ZXh0Q29udGVudDsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJldHJ5ICYmIHdpbmRvdy55dHBsYXllciAmJiB3aW5kb3cueXRwbGF5ZXIuY29uZmlnICYmIHdpbmRvdy55dHBsYXllci5jb25maWcuYXJncyAmJiB3aW5kb3cueXRwbGF5ZXIuY29uZmlnLmFyZ3MudWNpZCkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFhIUigiR0VUIiwgZ2V0Q2hhbm5lbEluZm8sICIvY2hhbm5lbC8iICsgd2luZG93Lnl0cGxheWVyLmNvbmZpZy5hcmdzLnVjaWQgKyAiL3ZpZGVvcyIsICJkb2MiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UHVibGlzaGVkVGltZSgpIHsKICAgICAgICAgICAgICAgIGVuaGFuY2VkRGV0YWlscy53YXRjaFRpbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIud2F0Y2gtdGltZS10ZXh0Iik7CiAgICAgICAgICAgICAgICBpZiAoZW5oYW5jZWREZXRhaWxzLndhdGNoVGltZSAmJiAhZW5oYW5jZWREZXRhaWxzLndhdGNoVGltZS5mZXRjaGluZyAmJiB3aW5kb3cueXRwbGF5ZXIgJiYgd2luZG93Lnl0cGxheWVyLmNvbmZpZykgewogICAgICAgICAgICAgICAgICAgIGVuaGFuY2VkRGV0YWlscy53YXRjaFRpbWUuZmV0Y2hpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsWEhSKCJHRVQiLCBnZXRDaGFubmVsSW5mbywgIi9jaGFubmVsLyIgKyB3aW5kb3cueXRwbGF5ZXIuY29uZmlnLmFyZ3MudWNpZCArICIvc2VhcmNoP3F1ZXJ5PSUyMiIgKyB3aW5kb3cueXRwbGF5ZXIuY29uZmlnLmFyZ3MudmlkZW9faWQgKyAiJTIyIiwgImRvYyIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGVuaGFuY2VkRGV0YWlscygpIHsKICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT09ICIvd2F0Y2giKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJfc2V0dGluZ3MuVklEX1ZJRF9DTlQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VmlkZW9Db3VudCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncy5WSURfUE9TVF9USU1FKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGdldFB1Ymxpc2hlZFRpbWUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gcmV2ZXJzZUNvbnRyb2woKSB7CiAgICAgICAgICAgICAgICB2YXIgaSwgdGVtcCwgcHJldiwgbmV4dCwgbGlzdCwgdmlkZW9zOwogICAgICAgICAgICAgICAgcHJldiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5wcmV2LXBsYXlsaXN0LWxpc3QtaXRlbSIpOwogICAgICAgICAgICAgICAgbmV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5uZXh0LXBsYXlsaXN0LWxpc3QtaXRlbSIpOwogICAgICAgICAgICAgICAgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwbGF5bGlzdC1hdXRvc2Nyb2xsLWxpc3QiKTsKICAgICAgICAgICAgICAgIHZpZGVvcyA9IGxpc3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImxpIik7CiAgICAgICAgICAgICAgICBpID0gdmlkZW9zLmxlbmd0aDsKICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pIHsKICAgICAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZENoaWxkKHZpZGVvc1tpXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0ZW1wID0gcHJldi5ocmVmOwogICAgICAgICAgICAgICAgcHJldi5ocmVmID0gbmV4dC5ocmVmOwogICAgICAgICAgICAgICAgbmV4dC5ocmVmID0gdGVtcDsKICAgICAgICAgICAgICAgIGxpc3Quc2Nyb2xsVG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmN1cnJlbnRseS1wbGF5aW5nIikub2Zmc2V0VG9wOwogICAgICAgICAgICAgICAgaWYgKGFwaSkgewogICAgICAgICAgICAgICAgICAgIGFwaS51cGRhdGVQbGF5bGlzdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHJldmVyc2VCdXR0b24oZXZlbnQpIHsKICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQuaWQgPT09ICJyZXZlcnNlIikgewogICAgICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCJ5dC11aXgtYnV0dG9uLXRvZ2dsZWQiKTsKICAgICAgICAgICAgICAgICAgICBzZXQoInBsUmV2IiwgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygieXQtdWl4LWJ1dHRvbi10b2dnbGVkIikpOwogICAgICAgICAgICAgICAgICAgIHJldmVyc2VDb250cm9sKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gYXV0b3BsYXlCdXR0b24oZXZlbnQpIHsKICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQuaWQgPT09ICJhdXRvcGxheSIpIHsKICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgieXQtdWl4LWJ1dHRvbi10b2dnbGVkIik7CiAgICAgICAgICAgICAgICAgICAgc2V0KCJwbEFwbCIsIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoInl0LXVpeC1idXR0b24tdG9nZ2xlZCIpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVCdXR0b24odHlwZSwgbGFiZWwsIGJvb2wsIGNhbGwpIHsKICAgICAgICAgICAgICAgIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpOwogICAgICAgICAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IC8vCiAgICAgICAgICAgICAgICAgICAgYDxidXR0b24gY2xhc3M9J3l0LXVpeC1idXR0b24geXQtdWl4LWJ1dHRvbi1wbGF5ZXItY29udHJvbHMgeXQtdWl4LWJ1dHRvbi1vcGFjaXR5IHl0LXVpeC10b29sdGlwJyB0eXBlPSdidXR0b24nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0ncGwtYXV0b3BsYXknIHZpZXdCb3g9JzAgMCAxNCAxNic+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gcG9pbnRzPScwLDE2IDE0LDggMCwwJy8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9J3BsLXJldmVyc2UnIHZpZXdCb3g9JzAgMCAxNiAyMCc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gcG9pbnRzPSc3LDggMyw4IDMsMTQgMCwxNCA1LDIwIDEwLDE0IDcsMTQnLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBwb2ludHM9JzExLDAgNiw2IDksNiA5LDEyIDEzLDEyIDEzLDYgMTYsNicvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+YDsKICAgICAgICAgICAgICAgIGlmIChib29sID09PSB0cnVlIHx8IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KGJvb2wpLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgICAgICBidXR0b24uY29udGVudC5xdWVyeVNlbGVjdG9yKCJidXR0b24iKS5jbGFzc0xpc3QuYWRkKCJ5dC11aXgtYnV0dG9uLXRvZ2dsZWQiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJ1dHRvbi5jb250ZW50LmZpcnN0Q2hpbGQuaWQgPSB0eXBlOwogICAgICAgICAgICAgICAgYnV0dG9uLmNvbnRlbnQuZmlyc3RDaGlsZC5kYXRhc2V0LnAgPSAidHRwfCIgKyBsYWJlbCArICImdHRsfCIgKyBsYWJlbDsKICAgICAgICAgICAgICAgIGJ1dHRvbi5jb250ZW50LmZpcnN0Q2hpbGQuY2xhc3NMaXN0LmFkZCgieXQtdWl4LWJ1dHRvbi1pY29uLXdhdGNoLWFwcGJhci0iICsgdHlwZSArICItdmlkZW8tbGlzdCIpOwogICAgICAgICAgICAgICAgYnV0dG9uID0gc2V0TG9jYWxlKGJ1dHRvbi5jb250ZW50KS5maXJzdENoaWxkOwogICAgICAgICAgICAgICAgcGxheWxpc3RDb250cm9scy5wbEJhci5jbGFzc05hbWUgPSBwbGF5bGlzdENvbnRyb2xzLnBsQmFyLmNsYXNzTmFtZS5yZXBsYWNlKCJyYWRpby1wbGF5bGlzdCIsICIiKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgY2FsbCk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIucGxheWxpc3QtbmF2LWNvbnRyb2xzIikuYXBwZW5kQ2hpbGQoYnV0dG9uKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBwbGF5bGlzdENvbnRyb2xzKCkgewogICAgICAgICAgICAgICAgcGxheWxpc3RDb250cm9scy5wbEJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ3YXRjaC1hcHBiYXItcGxheWxpc3QiKTsKICAgICAgICAgICAgICAgIGlmIChwbGF5bGlzdENvbnRyb2xzLnBsQmFyKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICJjb21wbGV0ZSIgJiYgdXNlcl9zZXR0aW5ncy5wbFJldikgewogICAgICAgICAgICAgICAgICAgICAgICByZXZlcnNlQ29udHJvbCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncy5WSURfUExTVF9SVlJTICYmICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmV2ZXJzZSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUJ1dHRvbigicmV2ZXJzZSIsICJQTFNUX1JWUlMiLCB1c2VyX3NldHRpbmdzLnBsUmV2LCByZXZlcnNlQnV0dG9uKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJfc2V0dGluZ3MuVklEX1BMU1RfQVRQTCAmJiAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImF1dG9wbGF5IikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlQnV0dG9uKCJhdXRvcGxheSIsICJQTFNUX0FQIiwgdXNlcl9zZXR0aW5ncy5wbEFwbCwgYXV0b3BsYXlCdXR0b24pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB4aHJQYXRjaCgpIHsKICAgICAgICAgICAgICAgIHZhciB0ZW1wLCBwbGF5ZXI7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSA0KSB7CiAgICAgICAgICAgICAgICAgICAgdGVtcCA9IHthcmdzOiBKU09OLnBhcnNlKAogICAgICAgICAgICAgICAgICAgICAgICAie1wiIiArCiAgICAgICAgICAgICAgICAgICAgICAgIGRlY29kZVVSSUNvbXBvbmVudCh0aGlzLnJlc3BvbnNlVGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyU1Qy9nLCAiJTVDJTVDIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8lMjIvZywgIiU1QyUyMiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJi9nLCAiXCIsXCIiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1w9L2csICJcIjpcIiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXCsvZywgIiUyMCIpCiAgICAgICAgICAgICAgICAgICAgICAgICkgKwogICAgICAgICAgICAgICAgICAgICAgICAiXCJ9IgogICAgICAgICAgICAgICAgICAgICl9OwogICAgICAgICAgICAgICAgICAgIHRlbXAgPSBtb2RBcmdzKHRlbXApOwogICAgICAgICAgICAgICAgICAgIHRlbXAgPSBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkodGVtcC5hcmdzKS5zcGxpdCgvXHsiKFtcd1xXXSo/KSJ9LylbMV0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8lNUMlNUMvZywgIiU1QyIpCiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8lNUMlMjIvZywgIiUyMiIpCiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8lMjIlMkMlMjIvZywgIiYiKQogICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJTIyJTNBJTIyL2csICI9IikKICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyUyMC9nLCAiKyIpOwogICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicmVzcG9uc2VUZXh0Iiwge3dyaXRhYmxlOiB0cnVlfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNwb25zZVRleHQgPSB0ZW1wOwogICAgICAgICAgICAgICAgICAgIHBsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb3ZpZV9wbGF5ZXIiKTsKICAgICAgICAgICAgICAgICAgICBpZiAocGxheWVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5zZXRQbGF5YmFja1F1YWxpdHkodXNlcl9zZXR0aW5ncy5WSURfREZMVF9RTFRZKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tYSFIob3JpZ2luYWwpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihtZXRob2QsIHVybCkgewogICAgICAgICAgICAgICAgICAgIGlmICh1cmwubWF0Y2goImdldF92aWRlb19pbmZvIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCJyZWFkeXN0YXRlY2hhbmdlIiwgeGhyUGF0Y2gpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gaGlkZVZvbHVtZSgpIHsKICAgICAgICAgICAgICAgIGlmICh2b2x1bWVXaGVlbC5jQm90dG9tICYmIHZvbHVtZVdoZWVsLmNCb3R0b20uY2xhc3NMaXN0LmNvbnRhaW5zKCJ5dHAtdm9sdW1lLXNsaWRlci1hY3RpdmUiKSkgewogICAgICAgICAgICAgICAgICAgIHZvbHVtZVdoZWVsLmNCb3R0b20uY2xhc3NMaXN0LnJlbW92ZSgieXRwLXZvbHVtZS1zbGlkZXItYWN0aXZlIik7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHZvbHVtZVdoZWVsLmNCb3R0b20udGltZXI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gdm9sdW1lV2hlZWwoZXZlbnQpIHsKICAgICAgICAgICAgICAgIHZhciBmc1BsLCBwU2V0cywgaXZDYXJkLCBwbGF5ZXIsIGNhblNjcm9sbCwgZGlyZWN0aW9uOwogICAgICAgICAgICAgICAgcGxheWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigidmlkZW8iKTsKICAgICAgICAgICAgICAgIGZzUGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIueXRwLXBsYXlsaXN0LW1lbnUiKTsKICAgICAgICAgICAgICAgIHBTZXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnl0cC1zZXR0aW5ncy1tZW51Iik7CiAgICAgICAgICAgICAgICBpdkNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuaXYtZHJhd2VyIik7CiAgICAgICAgICAgICAgICBjYW5TY3JvbGwgPSBldmVudCAmJiAoIWZzUGwgfHwgKGZzUGwgJiYgIWZzUGwuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkpICYmICghaXZDYXJkIHx8IChpdkNhcmQgJiYgIWl2Q2FyZC5jb250YWlucyhldmVudC50YXJnZXQpKSkgJiYgKCFwU2V0cyB8fCAocFNldHMgJiYgIXBTZXRzLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpKTsKICAgICAgICAgICAgICAgIGlmIChldmVudCAmJiBhcGkgJiYgcGxheWVyICYmIGNhblNjcm9sbCAmJiAoZXZlbnQudGFyZ2V0LmlkID09PSBhcGkgfHwgYXBpLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpKSB7CiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICB2b2x1bWVXaGVlbC5jQm90dG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnl0cC1jaHJvbWUtYm90dG9tIik7CiAgICAgICAgICAgICAgICAgICAgaWYgKHZvbHVtZVdoZWVsLmNCb3R0b20pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2b2x1bWVXaGVlbC5jQm90dG9tLmNsYXNzTGlzdC5jb250YWlucygieXRwLXZvbHVtZS1zbGlkZXItYWN0aXZlIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvbHVtZVdoZWVsLmNCb3R0b20uY2xhc3NMaXN0LmFkZCgieXRwLXZvbHVtZS1zbGlkZXItYWN0aXZlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvbHVtZVdoZWVsLmNCb3R0b20udGltZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodm9sdW1lV2hlZWwuY0JvdHRvbS50aW1lcik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJtb3VzZW1vdmUiKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdm9sdW1lV2hlZWwuY0JvdHRvbS50aW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KGhpZGVWb2x1bWUsIDQwMDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBldmVudCAmJiAoZXZlbnQuZGVsdGFZIHx8IGV2ZW50LndoZWVsRGVsdGFZKTsKICAgICAgICAgICAgICAgICAgICBhcGkuc2V0Vm9sdW1lKHBsYXllci52b2x1bWUgKiAxMDAgLSAoTWF0aC5zaWduKGRpcmVjdGlvbikgKiA1KSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFldmVudCAmJiB1c2VyX3NldHRpbmdzLlZJRF9WT0xfV0hFRUwpIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJ3aGVlbCIsIHZvbHVtZVdoZWVsKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICE9PSAiL3dhdGNoIikgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIndoZWVsIiwgdm9sdW1lV2hlZWwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGRyYWdQb3BPdXQoZXZlbnQpIHsKICAgICAgICAgICAgICAgIHZhciBleGNsdWRlZCwgaXNGU2NyZWVuOwogICAgICAgICAgICAgICAgZXhjbHVkZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIueXRwLWNocm9tZS1ib3R0b20iKTsKICAgICAgICAgICAgICAgIGlzRlNjcmVlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi55dHAtZnVsbHNjcmVlbiIpOwogICAgICAgICAgICAgICAgaWYgKGV2ZW50ICYmICFpc0ZTY3JlZW4gJiYgKCFleGNsdWRlZCB8fCAoZXZlbnQudGFyZ2V0ICE9PSBleGNsdWRlZCAmJiAhZXhjbHVkZWQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbnMgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICJtb3VzZWRvd24iKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLCBkcmFnUG9wT3V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZHJhZ1BvcE91dCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub2xkUG9zID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFg6IGV2ZW50LmNsaWVudFgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWTogZXZlbnQuY2xpZW50WSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmdYOiBldmVudC5jbGllbnRYLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZ1k6IGV2ZW50LmNsaWVudFkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC50eXBlID09PSAibW91c2Vtb3ZlIiAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuaGFzTW92ZWQgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKGV2ZW50LmNsaWVudFggLSB3aW5kb3cub2xkUG9zLm9yZ1gpID4gMTAgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKGV2ZW50LmNsaWVudFkgLSB3aW5kb3cub2xkUG9zLm9yZ1kpID4gMTApCiAgICAgICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1vdmVCeShldmVudC5jbGllbnRYIC0gd2luZG93Lm9sZFBvcy5YLCBldmVudC5jbGllbnRZIC0gd2luZG93Lm9sZFBvcy5ZKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5oYXNNb3ZlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbnMgIT09IDEgfHwgZXZlbnQudHlwZSA9PT0gImNsaWNrIikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93Lmhhc01vdmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgd2luZG93Lm9sZFBvczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3cuaGFzTW92ZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIiwgZHJhZ1BvcE91dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZHJhZ1BvcE91dCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICghZXZlbnQgJiYgd2luZG93Lm5hbWUgPT09ICJwb3BPdXQiKSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwgZHJhZ1BvcE91dCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gcmVzdW1lUGxheWJhY2soKSB7CiAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHRoaXMuZG9jdW1lbnQucXVlcnlTZWxlY3RvcigidmlkZW8iKTsKICAgICAgICAgICAgICAgIGlmICh0ZW1wICYmICFpc05hTih0ZW1wLmR1cmF0aW9uKSAmJiB0ZW1wLmN1cnJlbnRUaW1lIDwgdGVtcC5kdXJhdGlvbikgewogICAgICAgICAgICAgICAgICAgIHRlbXAgPSB0ZW1wLmN1cnJlbnRUaW1lOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICJ0PSIgKyB0ZW1wOwogICAgICAgICAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHBvcFBsYXllcih1cmwpIHsKICAgICAgICAgICAgICAgIHZhciBwb3BPdXQsIHdpZHRoLCBoZWlnaHQsIHBvcF91cmwsIHZpZGVvOwogICAgICAgICAgICAgICAgd2lkdGggPSBwYXJzZUludCh1c2VyX3NldHRpbmdzLlZJRF9QUE9UX1NaKSB8fCA1MzM7CiAgICAgICAgICAgICAgICBoZWlnaHQgPSBNYXRoLnJvdW5kKHdpZHRoIC8gKDE2IC8gOSkpOwogICAgICAgICAgICAgICAgdmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJ2aWRlbyIpOwogICAgICAgICAgICAgICAgcG9wX3VybCA9ICghdXJsLnRhcmdldCAmJiB1cmwpIHx8IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KC8mdD1bMC05XSt8I3Q9WzAtOV0rfCZ0aW1lPVswLTldKy8pLmpvaW4oIiIpOwogICAgICAgICAgICAgICAgaWYgKHVybC50YXJnZXQgJiYgdmlkZW8gJiYgdmlkZW8uY3VycmVudFRpbWUgJiYgdmlkZW8uY3VycmVudFRpbWUgPCB2aWRlby5kdXJhdGlvbikgewogICAgICAgICAgICAgICAgICAgIHBvcF91cmwgKz0gIiN0PSIgKyB2aWRlby5jdXJyZW50VGltZTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cueXRwbGF5ZXIuY29uZmlnLmFyZ3Muc3RhcnQgPSB2aWRlby5jdXJyZW50VGltZTsKICAgICAgICAgICAgICAgICAgICBhcGkuY3VlVmlkZW9CeVBsYXllclZhcnMod2luZG93Lnl0cGxheWVyLmNvbmZpZy5hcmdzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHBvcE91dCA9IHdpbmRvdy5vcGVuKHBvcF91cmwsICJwb3BPdXQiLCAid2lkdGg9IiArIHdpZHRoICsgIixoZWlnaHQ9IiArIGhlaWdodCk7CiAgICAgICAgICAgICAgICBpZiAodXJsLnRhcmdldCkgewogICAgICAgICAgICAgICAgICAgIHBvcE91dC5hZGRFdmVudExpc3RlbmVyKCJiZWZvcmV1bmxvYWQiLCByZXN1bWVQbGF5YmFjayk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBwb3BPdXQuZm9jdXMoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBzZXRTdWJQbGF5bGlzdChldmVudCkgewogICAgICAgICAgICAgICAgdmFyIGksIGxpc3QsIGJ1dHRvbjsKICAgICAgICAgICAgICAgIGxpc3QgPSBbXTsKICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgJiYgZXZlbnQudGFyZ2V0LmlkID09PSAic3Vic2NyaXB0aW9uLXBsYXlsaXN0IikgewogICAgICAgICAgICAgICAgICAgIGkgPSBzdWJQbGF5bGlzdC52aWRlb19saXN0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID4gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QucHVzaChzdWJQbGF5bGlzdC52aWRlb19saXN0W2ldLmRhdGFzZXQudmlkZW9JZHMpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGxpc3QgPSBsaXN0LnJldmVyc2UoKS5zcGxpY2UoMCwgMjApLmpvaW4oIiUyQyIpOwogICAgICAgICAgICAgICAgICAgIHN1YlBsYXlsaXN0Lmxpc3RfdGl0bGUgPSBzdWJQbGF5bGlzdC5saXN0X3RpdGxlICYmIHN1YlBsYXlsaXN0Lmxpc3RfdGl0bGUucXVlcnlTZWxlY3RvcigiLmVwaWMtbmF2LWl0ZW0taGVhZGluZyIpLnRleHRDb250ZW50LnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3Vic2NyaXB0aW9uLXBsYXlsaXN0Iik7CiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmhyZWYgPSAiL3dhdGNoX3ZpZGVvcz90aXRsZT0iICsgc3ViUGxheWxpc3QubGlzdF90aXRsZSArICImdmlkZW9faWRzPSIgKyBsaXN0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHN1YlBsYXlsaXN0KCkgewogICAgICAgICAgICAgICAgdmFyIGJ1dHRvbiwgbmF2X21lbnU7CiAgICAgICAgICAgICAgICBuYXZfbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5hcHBiYXItbmF2LW1lbnUiKTsKICAgICAgICAgICAgICAgIGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzdWJzY3JpcHRpb24tcGxheWxpc3QiKTsKICAgICAgICAgICAgICAgIHN1YlBsYXlsaXN0Lmxpc3RfdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuYXBwYmFyLW5hdi1tZW51Iik7CiAgICAgICAgICAgICAgICBzdWJQbGF5bGlzdC52aWRlb19saXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYWRkdG8td2F0Y2gtbGF0ZXItYnV0dG9uIik7CiAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncy5HRU5fU1VCX0xJU1QgJiYgbmF2X21lbnUgJiYgd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoIi9mZWVkL3N1YnNjcmlwdGlvbnMiKS5sZW5ndGggPiAxICYmICFidXR0b24gJiYgc3ViUGxheWxpc3QubGlzdF90aXRsZSAmJiBzdWJQbGF5bGlzdC52aWRlb19saXN0KSB7CiAgICAgICAgICAgICAgICAgICAgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTsKICAgICAgICAgICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gLy8KICAgICAgICAgICAgICAgICAgICAgICAgYDxsaSBpZD0nc3Vic2NyaXB0aW9uLXBsYXlsaXN0LWljb24nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaWQ9J3N1YnNjcmlwdGlvbi1wbGF5bGlzdCcgZGF0YS1wPSd0dGx8U1VCX1BMU1QnIGNsYXNzPSd5dC11aXgtYnV0dG9uIHNwZi1saW5rIHl0LXVpeC1zZXNzaW9ubGluayB5dC11aXgtYnV0dG9uLWVwaWMtbmF2LWl0ZW0geXQtdWl4LWJ1dHRvbi1zaXplLWRlZmF1bHQnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgdmlld0JveD0nMCAwIDE0IDE2Jz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gcG9pbnRzPScwLDE2IDE0LDggMCwwICcvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICAgICAgICAgICAgICA8L2xpPmA7CiAgICAgICAgICAgICAgICAgICAgYnV0dG9uID0gc2V0TG9jYWxlKGJ1dHRvbi5jb250ZW50KS5maXJzdENoaWxkOwogICAgICAgICAgICAgICAgICAgIG5hdl9tZW51LmFwcGVuZENoaWxkKGJ1dHRvbik7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBzZXRTdWJQbGF5bGlzdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gbG9hZENvbW1lbnRzKGV2ZW50KSB7CiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlICYmIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLmlkID09PSAiUC1zaG93LWNvbW1lbnRzIikgewogICAgICAgICAgICAgICAgICAgIGlmIChtb2RDb21tZW50cy5jb21tZW50cy5sYXp5bG9hZCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc3BmLmxvYWQuYXBwbHkobWFpbiwgbW9kQ29tbWVudHMuY29tbWVudHMubGF6eWxvYWQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBtb2RDb21tZW50cy5jb21tZW50cy5jbGFzc0xpc3QudG9nZ2xlKCJzaG93Iik7CiAgICAgICAgICAgICAgICAgICAgbW9kQ29tbWVudHMud3JhcHBlci5xdWVyeVNlbGVjdG9yKCJidXR0b24iKS50ZXh0Q29udGVudCA9IGxhbmcoKG1vZENvbW1lbnRzLmNvbW1lbnRzLmNsYXNzTGlzdC5jb250YWlucygic2hvdyIpICYmICJISURFX0NNVFMiKSB8fCAiU0hPV19DTVRTIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gcmVzaXplUGxheWVyKGV2ZW50KSB7CiAgICAgICAgICAgICAgICB2YXIgdGVtcCwgaXNfc21hbGwsIGNvbnRlbnQsIG1heF93aWR0aDsKICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigiL3dhdGNoIikpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0ZW1wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBsYXllci1hcGkiKTsKICAgICAgICAgICAgICAgIGlmICghdGVtcCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRlbXAgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7CiAgICAgICAgICAgICAgICBpc19zbWFsbCA9IHdpbmRvdy5pbm5lcldpZHRoIDwgNjU3ID8gIiIgOiAiLndhdGNoLXN0YWdlLW1vZGUgIjsKICAgICAgICAgICAgICAgIGlmIChpc19zbWFsbCAhPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncy5WSURfUExSX0ZJVF9XRFRIKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyX3NldHRpbmdzLlZJRF9QTFJfRklUX1dEVEgubWF0Y2goLyUvKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4X3dpZHRoID0gd2luZG93LnBhcnNlSW50KHVzZXJfc2V0dGluZ3MuVklEX1BMUl9GSVRfV0RUSCkgLyAxMDAgKiB0ZW1wOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4X3dpZHRoID0gd2luZG93LnBhcnNlSW50KHVzZXJfc2V0dGluZ3MuVklEX1BMUl9GSVRfV0RUSCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgbWF4X3dpZHRoID0gdGVtcCA+PSBtYXhfd2lkdGggPyBtYXhfd2lkdGggOiB0ZW1wOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1heF93aWR0aCA9IHRlbXAgPj0gMTI4MCA/IDEyODAgOiB0ZW1wOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbWF4X3dpZHRoID0gdGVtcDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnRlbnQgPSAvLwogICAgICAgICAgICAgICAgICAgIGBAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2NTZweCkgewogICAgICAgICAgICAgICAgICAgICAgICAjcGxheWVyLWFwaSwKICAgICAgICAgICAgICAgICAgICAgICAgI3BsYXllci11bmF2YWlsYWJsZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDUxcHg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQgIWltcG9ydGFudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAxMHB4ICMwMDA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgI3RoZWF0ZXItYmFja2dyb3VuZCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICR7aXNfc21hbGx9LnBsYXllci13aWR0aCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAke21heF93aWR0aH1weCAhaW1wb3J0YW50OwogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAke21heF93aWR0aCAvIDIgKiAtMX1weCAhaW1wb3J0YW50OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAke2lzX3NtYWxsfS5wbGF5ZXItaGVpZ2h0Om5vdCgud2F0Y2gtcGxheWxpc3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAke21heF93aWR0aCAvICgxNiAvIDkpfXB4ICFpbXBvcnRhbnQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICR7aXNfc21hbGx9I3dhdGNoLWFwcGJhci1wbGF5bGlzdCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJHttYXhfd2lkdGggLyAoMTYgLyA5KSAtIChpc19zbWFsbCA9PT0gIiIgPyAwIDogMzYwKX1weCAhaW1wb3J0YW50OwogICAgICAgICAgICAgICAgICAgIH1gOwogICAgICAgICAgICAgICAgdGVtcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ5dHAtcmVzaXplciIpOwogICAgICAgICAgICAgICAgaWYgKCF0ZW1wKSB7CiAgICAgICAgICAgICAgICAgICAgdGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7CiAgICAgICAgICAgICAgICAgICAgdGVtcC5pZCA9ICJ5dHAtcmVzaXplciI7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0ZW1wKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRlbXAudGV4dENvbnRlbnQgPSBjb250ZW50OwogICAgICAgICAgICAgICAgaWYgKCFldmVudCkgewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgicmVzaXplIikpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIG1vZFBsYXllclNpemUoKSB7CiAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncy5WSURfUExSX0ZJVCkgewogICAgICAgICAgICAgICAgICAgIHJlc2l6ZVBsYXllcigpOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCByZXNpemVQbGF5ZXIpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNwZmRvbmUiLCByZXNpemVQbGF5ZXIpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgcmVzaXplUGxheWVyKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJzcGZkb25lIiwgcmVzaXplUGxheWVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBtb2RDb21tZW50cygpIHsKICAgICAgICAgICAgICAgIHZhciBpc19saXZlID0gd2luZG93Lnl0cGxheWVyICYmIHdpbmRvdy55dHBsYXllci5jb25maWcgJiYgd2luZG93Lnl0cGxheWVyLmNvbmZpZy5hcmdzICYmIHdpbmRvdy55dHBsYXllci5jb25maWcuYXJncy5saXZlc3RyZWFtOwogICAgICAgICAgICAgICAgbW9kQ29tbWVudHMuY29tbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgid2F0Y2gtZGlzY3Vzc2lvbiIpOwogICAgICAgICAgICAgICAgaWYgKCFpc19saXZlICYmIG1vZENvbW1lbnRzLmNvbW1lbnRzICYmICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiUC1zaG93LWNvbW1lbnRzIikgJiYgdXNlcl9zZXR0aW5ncy5WSURfSElERV9DT01TID09PSAiMSIpIHsKICAgICAgICAgICAgICAgICAgICBtb2RDb21tZW50cy53cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTsKICAgICAgICAgICAgICAgICAgICBtb2RDb21tZW50cy53cmFwcGVyLmlubmVySFRNTCA9IC8vCiAgICAgICAgICAgICAgICAgICAgICAgIGA8ZGl2IGlkPSdQLXNob3ctY29tbWVudHMnIGNsYXNzPSd5dC1jYXJkJz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9J3l0LXVpeC1idXR0b24geXQtdWl4LWJ1dHRvbi1leHBhbmRlcicgZGF0YS1wPSd0bmR8U0hPV19DTVRTJz48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICBtb2RDb21tZW50cy53cmFwcGVyID0gc2V0TG9jYWxlKG1vZENvbW1lbnRzLndyYXBwZXIuY29udGVudCkuZmlyc3RDaGlsZDsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGxvYWRDb21tZW50cyk7CiAgICAgICAgICAgICAgICAgICAgbW9kQ29tbWVudHMuY29tbWVudHMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobW9kQ29tbWVudHMud3JhcHBlciwgbW9kQ29tbWVudHMuY29tbWVudHMpOwogICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uc2VhcmNoLm1hdGNoKC8mPyhsY3xnb29nbGVfY29tbWVudF9pZCk9LykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbW9kQ29tbWVudHMud3JhcHBlci5xdWVyeVNlbGVjdG9yKCJidXR0b24iKS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBzZXRDdXN0b21TdHlsZXMoY2xzcykgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdFt1c2VyX3NldHRpbmdzW2Nsc3NdID8gImFkZCIgOiAicmVtb3ZlIl0oY3VzdG9tU3R5bGVzLmN1c3RvbV9zdHlsZXNbY2xzc10pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGN1c3RvbVN0eWxlcygpIHsKICAgICAgICAgICAgICAgIHZhciBjaGlsZCwgd2lkdGgsIGhlaWdodCwgcGFyZW50LCBjb21tZW50cywgc2lkZWJhciwgeXRHcmlkLCBhZHZlcnRzLCBhZHNfbGlzdDsKICAgICAgICAgICAgICAgIGNvbW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIndhdGNoLWRpc2N1c3Npb24iKTsKICAgICAgICAgICAgICAgIHl0R3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi55dC11aXgtbWVudS10b3AtbGV2ZWwtZmxvdy1idXR0b246bGFzdC1jaGlsZCBhIik7CiAgICAgICAgICAgICAgICBjdXN0b21TdHlsZXMuY3VzdG9tX3N0eWxlcyA9IHsKICAgICAgICAgICAgICAgICAgICBHRU5fRFNCTF9BRFMgICAgOiAicGFydF9ub19hZHMiLAogICAgICAgICAgICAgICAgICAgIEdFTl9CTFVFX0dMT1cgICA6ICJwYXJ0X2RzYmxfZ2xvdyIsCiAgICAgICAgICAgICAgICAgICAgR0VOX0hJREVfRlRSICAgIDogInBhcnRfaGlkZV9mb290ZXIiLAogICAgICAgICAgICAgICAgICAgIEdFTl9CVFRSX05URiAgICA6ICJwYXJ0X25vdGlmX2J1dHRvbiIsCiAgICAgICAgICAgICAgICAgICAgR0VOX0dSSURfU1VCUyAgIDogInBhcnRfZ3JpZF9zdWJzIiwKICAgICAgICAgICAgICAgICAgICBHRU5fR1JJRF9TUkNIICAgOiAicGFydF9ncmlkX3NlYXJjaCIsCiAgICAgICAgICAgICAgICAgICAgR0VOX0NNUFRfVFRMUyAgIDogInBhcnRfY29tcGFjdF90aXRsZXMiLAogICAgICAgICAgICAgICAgICAgIFZJRF9QTFJfQVRQTCAgICA6ICJwYXJ0X2F1dG9wbGF5b24iLAogICAgICAgICAgICAgICAgICAgIFZJRF9QTFJfRFlOX1NJWkU6ICJwYXJ0X3N0YXRpY19zaXplIiwKICAgICAgICAgICAgICAgICAgICBWSURfSElERV9ERVRMUyAgOiAicGFydF9oaWRlX2RldGFpbHMiLAogICAgICAgICAgICAgICAgICAgIFZJRF9UVExfQ01QVCAgICA6ICJwYXJ0X2NvbXBhY3RfdGl0bGUiLAogICAgICAgICAgICAgICAgICAgIFZJRF9ERVNDX1NIUlQgICA6ICJwYXJ0X2xhYmVsbGVzc19idXR0b25zIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGlmICh3aW5kb3cueXQgJiYgd2luZG93Lnl0LmNvbmZpZ18gJiYgd2luZG93Lnl0LmNvbmZpZ18uUEFHRV9OQU1FID09PSAic2hhcmVkX2NvbnZlcnNhdGlvbiIpIHsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIltyZWw9J3Nob3J0bGluayddIikuaHJlZjsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAod2luZG93Lm5hbWUgPT09ICJwb3BPdXQiKSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoInBhcnRfcG9wb3V0Iik7CiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBwYXJzZUludCh1c2VyX3NldHRpbmdzLlZJRF9QUE9UX1NaKSB8fCA1MzM7CiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gTWF0aC5yb3VuZCh3aWR0aCAvICgxNiAvIDkpKTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVzaXplVG8oCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoICsgKHdpbmRvdy5vdXRlcldpZHRoIC0gd2luZG93LmlubmVyV2lkdGgpLAogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQgKyAod2luZG93Lm91dGVySGVpZ2h0IC0gd2luZG93LmlubmVySGVpZ2h0KQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoeXRHcmlkICYmIHVzZXJfc2V0dGluZ3MuR0VOX0dSSURfU1VCUykgewogICAgICAgICAgICAgICAgICAgIHl0R3JpZC5jbGljaygpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmJyYW5kZWQtcGFnZS12Mi1zZWNvbmRhcnktY29sIik7CiAgICAgICAgICAgICAgICAgICAgYWRzX2xpc3QgPSAvLwogICAgICAgICAgICAgICAgICAgICAgICBgI21hc3RoZWFkX2NoaWxkLAogICAgICAgICAgICAgICAgICAgICAgICAjZmVlZC1weXYtY29udGFpbmVyLAogICAgICAgICAgICAgICAgICAgICAgICAjd2F0Y2g3LXNpZGViYXItYWRzLAogICAgICAgICAgICAgICAgICAgICAgICAjd2F0Y2g3LXNpZGViYXItb2ZmZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIC5hZC1kaXYsCiAgICAgICAgICAgICAgICAgICAgICAgIC5weXYtYWZjLWFkcy1jb250YWluZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIC52aWRlby1saXN0LWl0ZW06bm90KC5yZWxhdGVkLWxpc3QtaXRlbSk6bm90KC5kYXNoYm9hcmQtd2lkZ2V0LWl0ZW0pYDsKICAgICAgICAgICAgICAgICAgICBhZHZlcnRzID0gdXNlcl9zZXR0aW5ncy5HRU5fRFNCTF9BRFMgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhZHNfbGlzdCk7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGFkdmVydHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBhZHZlcnRzOwogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY2hpbGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IGNoaWxkLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50LmNoaWxkRWxlbWVudENvdW50ID4gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBwYXJlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYWR2ZXJ0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWRzX2xpc3QpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgIHNpZGViYXIgJiYKICAgICAgICAgICAgICAgICAgICAgICAgc2lkZWJhci5wYXJlbnROb2RlICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09PSAiL3Jlc3VsdHMiICYmCiAgICAgICAgICAgICAgICAgICAgICAgIHNpZGViYXIgJiYKICAgICAgICAgICAgICAgICAgICAgICAgc2lkZWJhci5xdWVyeVNlbGVjdG9yQWxsKCIqIikubGVuZ3RoIDwgMTApIHx8ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZGViYXIgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJfc2V0dGluZ3MuR0VOX0hERV9SRUNNX1NEQlIgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgiL2ZlZWQvc3Vic2NyaXB0aW9ucyIpLmxlbmd0aCA+IDEgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyX3NldHRpbmdzLkdFTl9IREVfU1JDSF9TREJSICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09PSAiL3Jlc3VsdHMiIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9zZXR0aW5ncy5HRU5fSERFX0NITl9TREJSICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoL1wvKGNoYW5uZWx8dXNlcnxjKVwvLykubGVuZ3RoID4gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNpZGViYXIucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghd2luZG93LmxvY2F0aW9uLnNlYXJjaC5tYXRjaCgvJj8obGN8Z29vZ2xlX2NvbW1lbnRfaWQpPS8pICYmIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PT0gIi93YXRjaCIgJiYgdXNlcl9zZXR0aW5ncy5WSURfSElERV9DT01TID4gMSAmJiBjb21tZW50cykgewogICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50cy5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJfc2V0dGluZ3MuVklEX0hJREVfQ09NUyA9PT0gIjEiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCJwYXJ0X2hpZGVfY29tbWVudHMiKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJfc2V0dGluZ3MuVklEX0hJREVfQ09NUyAhPT0gIjEiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCJwYXJ0X2hpZGVfY29tbWVudHMiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJfc2V0dGluZ3MuVklEX1BMUl9GSVQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbW9kUGxheWVyU2l6ZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhjdXN0b21TdHlsZXMuY3VzdG9tX3N0eWxlcykuZm9yRWFjaChzZXRDdXN0b21TdHlsZXMpOwogICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgiL2ZlZWQvc3Vic2NyaXB0aW9ucyIpLmxlbmd0aCA8IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoInBhcnRfZ3JpZF9zdWJzIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGRlZmF1bHRDaGFubmVsUGFnZShldmVudCkgewogICAgICAgICAgICAgICAgdmFyIHBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncy5HRU5fQ0hOX0RGTFRfUEFHRSAhPT0gImRlZmF1bHQiKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50ICYmIGV2ZW50LnRhcmdldCkgewogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnROb2RlID0gZXZlbnQudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LnRhZ05hbWUgIT09ICJBIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHBhcmVudE5vZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnROb2RlID0gcGFyZW50Tm9kZS5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnROb2RlICYmIHBhcmVudE5vZGUudGFnTmFtZSA9PT0gIkEiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnROb2RlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnROb2RlLmhyZWYgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudE5vZGUuaHJlZi5zcGxpdCh1c2VyX3NldHRpbmdzLkdFTl9DSE5fREZMVF9QQUdFKS5sZW5ndGggPCAyICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZS5ocmVmLnNwbGl0KCIvY2hhbm5lbC8iKS5sZW5ndGggPiAxIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZS5ocmVmLnNwbGl0KCIvdXNlci8iKS5sZW5ndGggPiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnROb2RlLmhyZWYuc3BsaXQoL1thLXowLTldXC9bYS16MC05XS9pKS5sZW5ndGggPCA0CiAgICAgICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZS5ocmVmICs9ICIvIiArIHVzZXJfc2V0dGluZ3MuR0VOX0NITl9ERkxUX1BBR0U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIiwgZGVmYXVsdENoYW5uZWxQYWdlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gbW9kQXJncyhjb25maWcpIHsKICAgICAgICAgICAgICAgIHZhciBpLCB0ZW1wLCBsaXN0LCBsZW5ndGgsIHZpZGVvcywgbmV3X2xpc3QsIGNhbl9zaGFyZTsKICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubmFtZSA9PT0gInBvcE91dCIpIHsKICAgICAgICAgICAgICAgICAgICBjYW5fc2hhcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIucGxheWxpc3QtaGVhZGVyLWNvbnRlbnQiKTsKICAgICAgICAgICAgICAgICAgICBpZiAoY2FuX3NoYXJlICYmIGNhbl9zaGFyZS5kYXRhc2V0LnNoYXJlYWJsZSA9PT0gIkZhbHNlIiAmJiAhY29uZmlnLmFyZ3MudmlkZW8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLmFyZ3MudmlkZW8gPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgibGlbZGF0YS12aWRlby1pZF0iKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gdmlkZW9zLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuYXJncy52aWRlb1tpXSA9IHsiZW5jcnlwdGVkX2lkIjogdmlkZW9zW2ldLmdldEF0dHJpYnV0ZSgiZGF0YS12aWRlby1pZCIpfTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IGNvbmZpZy5hcmdzLnRpdGxlOwogICAgICAgICAgICAgICAgICAgIGNvbmZpZy5hcmdzLmVsID0gImVtYmVkZGVkIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjb25maWcuYXJncy52cSkgewogICAgICAgICAgICAgICAgICAgIGNvbmZpZy5hcmdzLnZxID0gdXNlcl9zZXR0aW5ncy5WSURfREZMVF9RTFRZOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHVzZXJfc2V0dGluZ3MuVklEX0RGTFRfUUxUWSAhPT0gImF1dG8iKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZVsieXQtcGxheWVyLXF1YWxpdHkiXSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkYXRhIjogdXNlcl9zZXR0aW5ncy5WSURfREZMVF9RTFRZLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImV4cGlyYXRpb24iOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDg2NEU1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImNyZWF0aW9uIjogbmV3IERhdGUoKS5nZXRUaW1lKCkKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoaWdub3JlKSB7fQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5hcmdzLmNhcHRpb25fYXVkaW9fdHJhY2tzICYmIHVzZXJfc2V0dGluZ3MuVklEX1BMUl9DQykgewogICAgICAgICAgICAgICAgICAgIGNvbmZpZy5hcmdzLmNhcHRpb25fYXVkaW9fdHJhY2tzID0gY29uZmlnLmFyZ3MuY2FwdGlvbl9hdWRpb190cmFja3Muc3BsaXQoLyZkPVswLTldfGQ9WzAtOV0mLykuam9pbigiIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncy5WSURfUExSX1ZPTF9MRE4pIHsKICAgICAgICAgICAgICAgICAgICBkZWxldGUgY29uZmlnLmFyZ3MubG91ZG5lc3M7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvbmZpZy5hcmdzLnJlbGF0aXZlX2xvdWRuZXNzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHVzZXJfc2V0dGluZ3MuVklEX1BMUl9IVE1MNSkgewogICAgICAgICAgICAgICAgICAgIGNvbmZpZy5odG1sNSA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncy5WSURfUExSX0lORk8pIHsKICAgICAgICAgICAgICAgICAgICBjb25maWcuYXJncy5zaG93aW5mbyA9ICIxIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh3aW5kb3cub3BlbmVyICYmIHdpbmRvdy5sb2NhdGlvbi5oYXNoICE9PSAiIikgewogICAgICAgICAgICAgICAgICAgIGNvbmZpZy5hcmdzLmF1dG9wbGF5ID0gIjEiOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdXNlcl9zZXR0aW5ncy5WSURfUExSX0FUUEwpIHsKICAgICAgICAgICAgICAgICAgICBjb25maWcuYXJncy5hdXRvcGxheSA9ICIwIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjb25maWcuYXJncy5mZmxhZ3MpIHsKICAgICAgICAgICAgICAgICAgICBjb25maWcuYXJncy5mZmxhZ3MgPSBjb25maWcuYXJncy5mZmxhZ3MucmVwbGFjZSgibGVnYWN5X2F1dG9wbGF5X2ZsYWc9dHJ1ZSIsICJsZWdhY3lfYXV0b3BsYXlfZmxhZz1mYWxzZSIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHVzZXJfc2V0dGluZ3MuVklEX1BMUl9TSVpFX01FTSkgewogICAgICAgICAgICAgICAgICAgIGNvbmZpZy5hcmdzLnBsYXllcl93aWRlID0gKHVzZXJfc2V0dGluZ3MudGhlYXRlck1vZGUgJiYgIjEiKSB8fCAiMCI7CiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy55dHBzZXR3aWRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy55dHBzZXR3aWRlKCJ3aWRlIiwgY29uZmlnLmFyZ3MucGxheWVyX3dpZGUsIC0xKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmFyZ3MuaXZfbG9hZF9wb2xpY3kgJiYgdXNlcl9zZXR0aW5ncy5WSURfUExSX0FOVFMpIHsKICAgICAgICAgICAgICAgICAgICBjb25maWcuYXJncy5pdl9sb2FkX3BvbGljeSA9ICIzIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh1c2VyX3NldHRpbmdzLlZJRF9QTFJfQURTICYmICghdXNlcl9zZXR0aW5ncy5WSURfU1VCX0FEUyB8fCAodXNlcl9zZXR0aW5ncy5WSURfU1VCX0FEUyAmJiAhY29uZmlnLmFyZ3Muc3Vic2NyaWJlZCkpKSB7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvbmZpZy5hcmdzLmFkM19tb2R1bGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmFyZ3MuYWRhcHRpdmVfZm10cyAmJiB1c2VyX3NldHRpbmdzLlZJRF9QTFJfSEZSKSB7CiAgICAgICAgICAgICAgICAgICAgbmV3X2xpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgICBsaXN0ID0gY29uZmlnLmFyZ3MuYWRhcHRpdmVfZm10cy5zcGxpdCgiLCIpOwogICAgICAgICAgICAgICAgICAgIGkgPSBsaXN0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSBsaXN0W2ldLnNwbGl0KC9mcHM9KFswLTldezJ9KS8pWzFdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlbXAgfHwgdGVtcCA8IDMxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdfbGlzdC5wdXNoKGxpc3RbaV0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNvbmZpZy5hcmdzLmFkYXB0aXZlX2ZtdHMgPSBuZXdfbGlzdC5qb2luKCIsIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIG1vZE1hdGNoTWVkaWEob3JpZ2luYWwpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0ZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0ID09PSAic2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2NTZweCkiICYmIHRlbXAubWF0Y2hlcykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRlbXAsICJtYXRjaGVzIiwge3dyaXRhYmxlOiB0cnVlfSk7CiAgICAgICAgICAgICAgICAgICAgdGVtcC5tYXRjaGVzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrRG9tUGFyc2VyKG9yaWdpbmFsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGksIGZwcywgcmVzdWx0LCBzdHJlYW1zOwogICAgICAgICAgICAgICAgICAgIGlmICh1c2VyX3NldHRpbmdzLlZJRF9QTFJfSEZSKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbXMgPSByZXN1bHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIlJlcHJlc2VudGF0aW9uIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBzdHJlYW1zLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGktLSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnBzID0gc3RyZWFtc1tpXS5nZXRBdHRyaWJ1dGUoImZyYW1lUmF0ZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZwcyA+IDMwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtc1tpXS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gZ2VuZXJhbENoYW5nZXMoKSB7CiAgICAgICAgICAgICAgICB2YXIgbG9nbywgY2hlY2tib3gsIGF1dG9wbGF5YmFyLCBkZXNjcmlwdGlvbjsKICAgICAgICAgICAgICAgIGF1dG9wbGF5YmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmF1dG9wbGF5LWJhciIpOwogICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWN0aW9uLXBhbmVsLWRldGFpbHMiKTsKICAgICAgICAgICAgICAgIGlmICh1c2VyX3NldHRpbmdzLkdFTl9ZVF9MT0dPX0xJTksgJiYgd2luZG93Lnl0ICYmIHdpbmRvdy55dC5jb25maWdfICYmIHdpbmRvdy55dC5jb25maWdfLkxPR0dFRF9JTikgewogICAgICAgICAgICAgICAgICAgIGxvZ28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJtYXBbbmFtZT0nZG9vZGxlJ10gPiBhcmVhLCBhI2xvZ28tY29udGFpbmVyIik7CiAgICAgICAgICAgICAgICAgICAgaWYgKGxvZ28gJiYgbG9nby5ocmVmID09PSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgIi8iKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ28uaHJlZiA9ICIvZmVlZC9zdWJzY3JpcHRpb25zIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncy5HRU5fUkVNX0FQVU4gJiYgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09PSAiL3dhdGNoIiAmJiBhdXRvcGxheWJhcikgewogICAgICAgICAgICAgICAgICAgIGNoZWNrYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmNoZWNrYm94LW9uLW9mZiIpOwogICAgICAgICAgICAgICAgICAgIGlmIChjaGVja2JveCkgewogICAgICAgICAgICAgICAgICAgICAgICBjaGVja2JveC5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodXNlcl9zZXR0aW5ncy5WSURfTEFZVF9BVVRPX1BOTCAmJiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT09ICIvd2F0Y2giICYmIGRlc2NyaXB0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24uY2xhc3NMaXN0LnJlbW92ZSgieXQtdWl4LWV4cGFuZGVyLWNvbGxhcHNlZCIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHVzZXJfc2V0dGluZ3MuR0VOX1NQRl9PRkYgJiYgd2luZG93LnNwZiAmJiB3aW5kb3cuc3BmLmRpc3Bvc2UpIHsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc3BmLmRpc3Bvc2UoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBsb2NhbFhIUihtZXRob2QsIGNhbGwsIHVybCwgaGVhZCkgewogICAgICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsIGNhbGwpOwogICAgICAgICAgICAgICAgcmVxdWVzdC5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTsKICAgICAgICAgICAgICAgIGlmIChoZWFkICYmIGhlYWQgIT09ICJkb2MiKSB7CiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRbMF0sIGhlYWRbMV0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LnJlc3BvbnNlVHlwZSA9ICJkb2N1bWVudCI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXF1ZXN0LnNlbmQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBwbGF5ZXJNb2RlKCkgewogICAgICAgICAgICAgICAgdmFyIHBhZ2VFbGVtZW50LCBwbGF5ZXJFbGVtZW50OwogICAgICAgICAgICAgICAgaWYgKHVzZXJfc2V0dGluZ3MuVklEX1BMUl9TSVpFX01FTSkgewogICAgICAgICAgICAgICAgICAgIHBhZ2VFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBhZ2UiKTsKICAgICAgICAgICAgICAgICAgICBwbGF5ZXJFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBsYXllciIpOwogICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cueXRwc2V0d2lkZSkgewogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cueXRwc2V0d2lkZSgid2lkZSIsICh1c2VyX3NldHRpbmdzLnRoZWF0ZXJNb2RlID8gIjEiIDogIjAiKSwgLTEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAocGFnZUVsZW1lbnQgJiYgcGxheWVyRWxlbWVudCAmJiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT09ICIvd2F0Y2giKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VFbGVtZW50LmNsYXNzTGlzdFt1c2VyX3NldHRpbmdzLnRoZWF0ZXJNb2RlID8gImFkZCIgOiAicmVtb3ZlIl0oIndhdGNoLXdpZGUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUVsZW1lbnQuY2xhc3NOYW1lID0gcGFnZUVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UodXNlcl9zZXR0aW5ncy50aGVhdGVyTW9kZSA/ICJub24tIiA6ICJ3YXRjaC1zdGFnZSIsIHVzZXJfc2V0dGluZ3MudGhlYXRlck1vZGUgPyAiIiA6ICJ3YXRjaC1ub24tc3RhZ2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyRWxlbWVudC5jbGFzc05hbWUgPSB1c2VyX3NldHRpbmdzLnRoZWF0ZXJNb2RlID8gcGxheWVyRWxlbWVudC5jbGFzc05hbWUucmVwbGFjZSgic21hbGwiLCAibGFyZ2UiKSA6IHBsYXllckVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UoImxhcmdlIiwgInNtYWxsIikucmVwbGFjZSgibWVkaXVtIiwgInNtYWxsIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGluZmluaXRlU2Nyb2xsKCkgewogICAgICAgICAgICAgICAgdmFyIG9ic2VydmVyLCBsb2FkTW9yZTsKICAgICAgICAgICAgICAgIGxvYWRNb3JlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmxvYWQtbW9yZS1idXR0b24iKTsKICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgIT09ICIvd2F0Y2giICYmIGxvYWRNb3JlICYmIHVzZXJfc2V0dGluZ3MuR0VOX0lORl9TQ1JMKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFsb2FkTW9yZS5jbGFzc0xpc3QuY29udGFpbnMoImluZmluaXRlU2Nyb2xsIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9hZE1vcmUuY2xhc3NMaXN0LmFkZCgiaW5maW5pdGVTY3JvbGwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihpbmZpbml0ZVNjcm9sbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUobG9hZE1vcmUsIHthdHRyaWJ1dGVzOiB0cnVlfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghbG9hZE1vcmUuY2xhc3NMaXN0LmNvbnRhaW5zKCJzY3JvbGxkZXRlY3QiKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2FkTW9yZS5jbGFzc0xpc3QuYWRkKCJzY3JvbGxkZXRlY3QiKTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9hZE1vcmUuZGF0YXNldC5zY3JvbGxkZXRlY3RDYWxsYmFjayA9ICJsb2FkLW1vcmUtYXV0byI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrTmV3RmVhdHVyZXMoKSB7CiAgICAgICAgICAgICAgICB2YXIgaSwga2V5czsKICAgICAgICAgICAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhkZWZhdWx0X3NldHRpbmdzKTsKICAgICAgICAgICAgICAgIGkgPSBrZXlzLmxlbmd0aDsKICAgICAgICAgICAgICAgIHdoaWxlIChpKSB7CiAgICAgICAgICAgICAgICAgICAgaSAtPSAxOwogICAgICAgICAgICAgICAgICAgIGlmICghdXNlcl9zZXR0aW5ncy5oYXNPd25Qcm9wZXJ0eShrZXlzW2ldKSkgewogICAgICAgICAgICAgICAgICAgICAgICBzZXQoa2V5c1tpXSwgZGVmYXVsdF9zZXR0aW5nc1trZXlzW2ldXSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHNoYXJlQXBpKG9yaWdpbmFsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHBsYXllclJlYWR5KCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gcmVxdWVzdChldmVudCkgewogICAgICAgICAgICAgICAgdmFyIHZpZGVvX3BsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb3ZpZV9wbGF5ZXIiKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCJmbG9hdGVyIik7CiAgICAgICAgICAgICAgICBpZiAodmlkZW9fcGxheWVyKSB7CiAgICAgICAgICAgICAgICAgICAgdmlkZW9fcGxheWVyLnJlbW92ZUF0dHJpYnV0ZSgic3R5bGUiKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXVzZXJfc2V0dGluZ3MuVklEX1BMUl9BVFBMIHx8ICFldmVudC5kZXRhaWwudXJsLmluZGV4T2YoIi93YXRjaCIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cueXRwbGF5ZXIgJiYgd2luZG93Lnl0cGxheWVyLmNvbmZpZyAmJiB3aW5kb3cueXRwbGF5ZXIuY29uZmlnLmxvYWRlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHdpbmRvdy55dHBsYXllci5jb25maWcubG9hZGVkOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5kZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHBhZ2VTY3JpcHRNZXNzYWdlcygpIHsKICAgICAgICAgICAgICAgIHZhciBrZXksIGdhdGUsIHNldHMsIG9ic2VydmVyOwogICAgICAgICAgICAgICAga2V5ID0gInBhcnJlY2VpdmUiOwogICAgICAgICAgICAgICAgZ2F0ZSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKICAgICAgICAgICAgICAgIHNldHMgPSBKU09OLnBhcnNlKGdhdGUuZGF0YXNldFtrZXldIHx8IG51bGwpOwogICAgICAgICAgICAgICAgaWYgKCFnYXRlLnBhZ2VzY3JpcHQpIHsKICAgICAgICAgICAgICAgICAgICBnYXRlLnBhZ2VzY3JpcHQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIocGFnZVNjcmlwdE1lc3NhZ2VzKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIub2JzZXJ2ZShnYXRlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZUZpbHRlcjogWyJkYXRhLSIgKyBrZXldCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoc2V0cykgewogICAgICAgICAgICAgICAgICAgIHVzZXJfc2V0dGluZ3MgPSBzZXRzOwogICAgICAgICAgICAgICAgICAgIGdhdGUuZGF0YXNldFtrZXldID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICBjdXN0b21TdHlsZXMoKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCJkYXRhLXBhcnJlY2VpdmUiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBzZXQoc2V0dGluZywgbmV3X3ZhbHVlKSB7CiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZyAhPT0gInVzZXJfc2V0dGluZ3MiKSB7CiAgICAgICAgICAgICAgICAgICAgdXNlcl9zZXR0aW5nc1tzZXR0aW5nXSA9IG5ld192YWx1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdXNlcl9zZXR0aW5ncyA9IG5ld192YWx1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kYXRhc2V0LnBhcnNlbmQgPSBKU09OLnN0cmluZ2lmeSh1c2VyX3NldHRpbmdzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBtYWluKCkgewogICAgICAgICAgICAgICAgaWYgKGlzTWF0ZXJpYWwoKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHBhZ2VTY3JpcHRNZXNzYWdlcygpOwogICAgICAgICAgICAgICAgY3VzdG9tU3R5bGVzKCk7CiAgICAgICAgICAgICAgICBzZXR0aW5nc01lbnUoKTsKICAgICAgICAgICAgICAgIGluZmluaXRlU2Nyb2xsKCk7CiAgICAgICAgICAgICAgICBwbGF5bGlzdENvbnRyb2xzKCk7CiAgICAgICAgICAgICAgICBwbGF5ZXJNb2RlKCk7CiAgICAgICAgICAgICAgICBtb2RQbGF5ZXJTaXplKCk7CiAgICAgICAgICAgICAgICBhZHZhbmNlZE9wdGlvbnMoKTsKICAgICAgICAgICAgICAgIHZvbHVtZVdoZWVsKCk7CiAgICAgICAgICAgICAgICBzdWJQbGF5bGlzdCgpOwogICAgICAgICAgICAgICAgYWx3YXlzVmlzaWJsZSgpOwogICAgICAgICAgICAgICAgbW9kVGh1bWJzKCk7CiAgICAgICAgICAgICAgICBlbmhhbmNlZERldGFpbHMoKTsKICAgICAgICAgICAgICAgIG1vZENvbW1lbnRzKCk7CiAgICAgICAgICAgICAgICBkZWZhdWx0Q2hhbm5lbFBhZ2UoKTsKICAgICAgICAgICAgICAgIGdlbmVyYWxDaGFuZ2VzKCk7CiAgICAgICAgICAgICAgICBkcmFnUG9wT3V0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gaXNNYXRlcmlhbCgpIHsKICAgICAgICAgICAgICAgIHZhciB0ZW1wOwogICAgICAgICAgICAgICAgdGVtcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoInl0ZC1hcHAsIFtzcmMqPSdwb2x5bWVyJ10sbGlua1tocmVmKj0ncG9seW1lciddIik7CiAgICAgICAgICAgICAgICBpZiAodGVtcCAmJiAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1hdGVyaWFsLW5vdGljZSIpKSB7CiAgICAgICAgICAgICAgICAgICAgdGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRlbXBsYXRlIik7CiAgICAgICAgICAgICAgICAgICAgdGVtcC5pbm5lckhUTUwgPSAvLwogICAgICAgICAgICAgICAgICAgICAgICBgPGRpdiBpZD0nbWF0ZXJpYWwtbm90aWNlJyBzdHlsZT0nYm9yZGVyLXJhZGl1czoycHg7Y29sb3I6I0ZGRjtwYWRkaW5nOjEwcHg7YmFja2dyb3VuZC1jb2xvcjojMDlGO2JveC1zaGFkb3c6MCAwIDNweCByZ2JhKDAsMCwwLC41KTtmb250LXNpemU6MTJweDtwb3NpdGlvbjpmaXhlZDtib3R0b206MjBweDtyaWdodDo1MHB4O3otaW5kZXg6OTk5OTknPgogICAgICAgICAgICAgICAgICAgICAgICBZb3VUdWJlIFBsdXMgaXMgbm90IGNvbXBhdGlibGUgd2l0aCB0aGUgWW91VHViZSBiZXRhIE1hdGVyaWFsIExheW91dDxicj4KICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL1BhcnRpY2xlQ29yZS9QYXJ0aWNsZS93aWtpL1Jlc3RvcmUtY2xhc3NpYy1Zb3VUdWJlJyB0YXJnZXQ9J19ibGFuaycgc3R5bGU9J2NvbG9yOiNGRkY7Zm9udC13ZWlnaHQ6Ym9sZDsnPkNsaWNrIGhlcmU8L2E+IGZvciBpbnN0cnVjdGlvbnMgdG8gcmVzdG9yZSBjbGFzc2ljIFlvdVR1YmUgYW5kIGNvbnRpbnVlIHVzaW5nIFlUKzxicj4KICAgICAgICAgICAgICAgICAgICAgICAgV2hlbiBhbiBhbHBoYSB2ZXJzaW9uIGlzIHJlYWR5IGZvciBwdWJsaWMgdGVzdGluZyBpdCB3aWxsIGJlIGFubm91bmNlZCA8YSBocmVmPSdodHRwczovL2dpdGh1Yi5jb20vUGFydGljbGVDb3JlL1BhcnRpY2xlL2lzc3Vlcy80NDgnIHRhcmdldD0nX2JsYW5rJyBzdHlsZT0nY29sb3I6I0ZGRjtmb250LXdlaWdodDpib2xkOyc+aGVyZTwvYT48YnI+CiAgICAgICAgICAgICAgICAgICAgICAgIFRvIGtlZXAgdXNpbmcgdGhlIGN1cnJlbnQgbGF5b3V0IHdpdGhvdXQgdGhpcyBtZXNzYWdlIHBsZWFzZSBkaXNhYmxlIFlUKwogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0ZW1wLmNvbnRlbnQuZmlyc3RDaGlsZCk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgiZGF0YS11c2VyX3NldHRpbmdzIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGFwaSwgY2lkLCBsYW5ndWFnZSwgdXNlcl9zZXR0aW5ncywgcGxheWVyX2luc3RhbmNlLCBkZWZhdWx0X3NldHRpbmdzOwogICAgICAgICAgICBpZiAoaXNNYXRlcmlhbCgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2lkID0ge307CiAgICAgICAgICAgIHVzZXJfc2V0dGluZ3MgPSBKU09OLnBhcnNlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kYXRhc2V0LnVzZXJfc2V0dGluZ3MgfHwgbnVsbCk7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZGF0YXNldC51c2VyX3NldHRpbmdzKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCJkYXRhLXVzZXJfc2V0dGluZ3MiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBkZWZhdWx0X3NldHRpbmdzID0gewogICAgICAgICAgICAgICAgR0VOX0JUVFJfTlRGICAgIDogdHJ1ZSwKICAgICAgICAgICAgICAgIEdFTl9TVUJfTElTVCAgICA6IHRydWUsCiAgICAgICAgICAgICAgICBHRU5fSU5GX1NDUkwgICAgOiB0cnVlLAogICAgICAgICAgICAgICAgR0VOX0JMVUVfR0xPVyAgIDogdHJ1ZSwKICAgICAgICAgICAgICAgIEdFTl9QUE9UX09OICAgICA6IHRydWUsCiAgICAgICAgICAgICAgICBWSURfRU5EX1NIUkUgICAgOiB0cnVlLAogICAgICAgICAgICAgICAgVklEX0RGTFRfUUxUWSAgIDogImF1dG8iLAogICAgICAgICAgICAgICAgVklEX1BMU1RfQVRQTCAgIDogdHJ1ZSwKICAgICAgICAgICAgICAgIFZJRF9QTFNUX1JWUlMgICA6IHRydWUsCiAgICAgICAgICAgICAgICBWSURfUExSX0FUUEwgICAgOiB0cnVlLAogICAgICAgICAgICAgICAgVklEX1BMUl9BTFZJUyAgIDogdHJ1ZSwKICAgICAgICAgICAgICAgIFZJRF9QTFJfU0laRV9NRU06IHRydWUsCiAgICAgICAgICAgICAgICBWSURfUExSX1ZPTF9MRE4gOiB0cnVlLAogICAgICAgICAgICAgICAgVklEX1BPU1RfVElNRSAgIDogdHJ1ZSwKICAgICAgICAgICAgICAgIFZJRF9WSURfQ05UICAgICA6IHRydWUsCiAgICAgICAgICAgICAgICBWSURfREVTQ19TSFJUICAgOiB0cnVlLAogICAgICAgICAgICAgICAgVklEX1BQT1RfU1ogICAgIDogNTMzLAogICAgICAgICAgICAgICAgVklEX1BMUl9IVE1MNSAgIDogdHJ1ZSwKICAgICAgICAgICAgICAgIEJMS19PTiAgICAgICAgICA6IHRydWUsCiAgICAgICAgICAgICAgICBmbG9hdGVyWCAgICAgICAgOiAyMDAwLAogICAgICAgICAgICAgICAgZmxvYXRlclkgICAgICAgIDogMjAwMCwKICAgICAgICAgICAgICAgIGZpcnN0VGltZSAgICAgICA6IHRydWUsCiAgICAgICAgICAgICAgICB2b2xMZXYgICAgICAgICAgOiA1MCwKICAgICAgICAgICAgICAgIGFkdk9wdHMgICAgICAgICA6IHRydWUsCiAgICAgICAgICAgICAgICBibGFja2xpc3QgICAgICAgOiB7fQogICAgICAgICAgICB9OwogICAgICAgICAgICBsYW5ndWFnZSA9IHsKICAgICAgICAgICAgICAgIFlUU0VUUyAgICAgICAgICAgICAgICA6ICJZb3VUdWJlKyBzZXR0aW5ncyIsCiAgICAgICAgICAgICAgICBBRFZfT1BUUyAgICAgICAgICAgICAgOiAiQWR2YW5jZWQgb3B0aW9ucyIsCiAgICAgICAgICAgICAgICBTVUJfUExTVCAgICAgICAgICAgICAgOiAiUGxheSByZWNlbnQgdXBsb2FkcyIsCiAgICAgICAgICAgICAgICBQUE9UX09QRU4gICAgICAgICAgICAgOiAiT3BlbiBpbiBwb3Atb3V0IiwKICAgICAgICAgICAgICAgIEJMQ0tfQUREICAgICAgICAgICAgICA6ICJBZGQgdG8gYmxhY2tsaXN0IiwKICAgICAgICAgICAgICAgIEJMQ0tfRURJVCAgICAgICAgICAgICA6ICJFZGl0IiwKICAgICAgICAgICAgICAgIEJMQ0tfU0FWRSAgICAgICAgICAgICA6ICJTYXZlIiwKICAgICAgICAgICAgICAgIEJMQ0tfQ0xTRSAgICAgICAgICAgICA6ICJDbG9zZSIsCiAgICAgICAgICAgICAgICBDTlNMX0FQICAgICAgICAgICAgICAgOiAiQXV0b3BsYXkiLAogICAgICAgICAgICAgICAgQ05TTF9SUFQgICAgICAgICAgICAgIDogIlJlcGVhdCB2aWRlbyIsCiAgICAgICAgICAgICAgICBDTlNMX1NWVEggICAgICAgICAgICAgOiAiT3BlbiB0aHVtYm5haWwiLAogICAgICAgICAgICAgICAgQ05TTF9TUyAgICAgICAgICAgICAgIDogIlRha2Ugc2NyZWVuc2hvdCIsCiAgICAgICAgICAgICAgICBDTlNMX1NTX0NMUyAgICAgICAgICAgOiAiQ0xPU0UiLAogICAgICAgICAgICAgICAgQ05TTF9QUE9UICAgICAgICAgICAgIDogIlBvcC1vdXQgdmlkZW8iLAogICAgICAgICAgICAgICAgQ05TTF9GTEJSICAgICAgICAgICAgIDogIkZ1bGxicm93c2VyIG1vZGUiLAogICAgICAgICAgICAgICAgQ05TTF9DSU5NX01EICAgICAgICAgIDogIkNpbmVtYSBtb2RlIiwKICAgICAgICAgICAgICAgIENOU0xfRlJNRSAgICAgICAgICAgICA6ICJGcmFtZSBieSBmcmFtZSAoU2hpZnQgKyDihpAgb3Ig4oaSKSIsCiAgICAgICAgICAgICAgICBDTlNMX1lUU0MgICAgICAgICAgICAgOiAiWW91VHViZSBzaG9ydGN1dHMgbGlzdCIsCiAgICAgICAgICAgICAgICBQTFNUX0FQICAgICAgICAgICAgICAgOiAiQXV0b3BsYXkiLAogICAgICAgICAgICAgICAgUExTVF9SVlJTICAgICAgICAgICAgIDogIlJldmVyc2UiLAogICAgICAgICAgICAgICAgU0hPV19DTVRTICAgICAgICAgICAgIDogIlNob3cgY29tbWVudHMiLAogICAgICAgICAgICAgICAgSElERV9DTVRTICAgICAgICAgICAgIDogIkhpZGUgY29tbWVudHMiLAogICAgICAgICAgICAgICAgR0xCX0lNUFIgICAgICAgICAgICAgIDogIkltcG9ydC9leHBvcnQgc2V0dGluZ3MiLAogICAgICAgICAgICAgICAgR0xCX0xPQ0xfTEFORyAgICAgICAgIDogIkNsaWNrIHRvIGVkaXQgWVQrIGxhbmd1YWdlIiwKICAgICAgICAgICAgICAgIEdMQl9MT0NMX0xBTkdfQ1NUTSAgICA6ICJMb2NhbCIsCiAgICAgICAgICAgICAgICBHTEJfSU1QUl9TQVZFICAgICAgICAgOiAiU2F2ZSBhbmQgbG9hZCIsCiAgICAgICAgICAgICAgICBHTEJfUlNFVCAgICAgICAgICAgICAgOiAiUmVzZXQiLAogICAgICAgICAgICAgICAgR0xCX1JTRVRfQ09ORiAgICAgICAgIDogIlRoaXMgd2lsbCByZXNldCBZVCsgc2V0dGluZ3MgYW5kIHRoZSBibGFja2xpc3Qgd2lsbCBiZSBlcmFzZWQuIERvIHlvdSB3YW50IHRvIGNvbnRpbnVlPyIsCiAgICAgICAgICAgICAgICBHTEJfU1ZFICAgICAgICAgICAgICAgOiAiU2F2ZSIsCiAgICAgICAgICAgICAgICBHTEJfU1ZFX1NFVFMgICAgICAgICAgOiAiU2V0dGluZ3Mgc2F2ZWQiLAogICAgICAgICAgICAgICAgR0xCX1JNQkwgICAgICAgICAgICAgIDogIlJlbW92ZSBmcm9tIGJsYWNrbGlzdCIsCiAgICAgICAgICAgICAgICBGVFJfREVTQyAgICAgICAgICAgICAgOiAiRmluZCBvdXQgd2hhdCB0aGlzIGRvZXMiLAogICAgICAgICAgICAgICAgR0VOICAgICAgICAgICAgICAgICAgIDogIkdlbmVyYWwiLAogICAgICAgICAgICAgICAgVklEICAgICAgICAgICAgICAgICAgIDogIlZpZGVvIiwKICAgICAgICAgICAgICAgIENITiAgICAgICAgICAgICAgICAgICA6ICJDaGFubmVscyIsCiAgICAgICAgICAgICAgICBCTEsgICAgICAgICAgICAgICAgICAgOiAiQmxhY2tsaXN0IiwKICAgICAgICAgICAgICAgIEFCVCAgICAgICAgICAgICAgICAgICA6ICJBYm91dCIsCiAgICAgICAgICAgICAgICBITFAgICAgICAgICAgICAgICAgICAgOiAiSGVscCIsCiAgICAgICAgICAgICAgICBETlQgICAgICAgICAgICAgICAgICAgOiAiRG9uYXRlIiwKICAgICAgICAgICAgICAgIEdFTl9UVEwgICAgICAgICAgICAgICA6ICJHZW5lcmFsIHNldHRpbmdzIiwKICAgICAgICAgICAgICAgIEdFTl9HRU4gICAgICAgICAgICAgICA6ICJHZW5lcmFsIiwKICAgICAgICAgICAgICAgIEdFTl9MWVQgICAgICAgICAgICAgICA6ICJMYXlvdXQiLAogICAgICAgICAgICAgICAgR0VOX0xPQ0xfTEFORyAgICAgICAgIDogIlVzZSBtb2RpZmllZCBZVCsgbGFuZ3VhZ2UiLAogICAgICAgICAgICAgICAgR0VOX1BQT1RfT04gICAgICAgICAgIDogIkVuYWJsZSBwb3Atb3V0IG1vZGUiLAogICAgICAgICAgICAgICAgR0VOX0RTQkxfQURTICAgICAgICAgIDogIkRpc2FibGUgYWR2ZXJ0aXNlbWVudHMgb3V0c2lkZSB0aGUgdmlkZW8gcGFnZSIsCiAgICAgICAgICAgICAgICBHRU5fSU5GX1NDUkwgICAgICAgICAgOiAiRW5hYmxlIGluZmluaXRlIHNjcm9sbCBpbiBmZWVkcyIsCiAgICAgICAgICAgICAgICBHRU5fWVRfTE9HT19MSU5LICAgICAgOiAiWW91VHViZSBsb2dvIHJlZGlyZWN0cyB0byBzdWJzY3JpcHRpb25zIiwKICAgICAgICAgICAgICAgIEdFTl9TVUJfTElTVCAgICAgICAgICA6ICJFbmFibGUgc3Vic2NyaXB0aW9uIHBsYXlsaXN0IiwKICAgICAgICAgICAgICAgIEdFTl9SRU1fQVBVTiAgICAgICAgICA6ICJSZW1vdmUgYXV0b3BsYXkgdXAgbmV4dCIsCiAgICAgICAgICAgICAgICBHRU5fU1BGX09GRiAgICAgICAgICAgOiAiRGlzYWJsZSBTUEYiLAogICAgICAgICAgICAgICAgR0VOX0hJREVfRlRSICAgICAgICAgIDogIkhpZGUgZm9vdGVyIiwKICAgICAgICAgICAgICAgIEdFTl9CTFVFX0dMT1cgICAgICAgICA6ICJSZW1vdmUgYmx1ZSBnbG93IGFyb3VuZCBjbGlja2VkIGJ1dHRvbnMiLAogICAgICAgICAgICAgICAgR0VOX0hERV9SRUNNX1NEQlIgICAgIDogIkhpZGUgcmVjb21tZW5kZWQgY2hhbm5lbHMgc2lkZWJhciIsCiAgICAgICAgICAgICAgICBHRU5fSERFX1NSQ0hfU0RCUiAgICAgOiAiSGlkZSBzZWFyY2ggcmVzdWx0cyBzaWRlYmFyIiwKICAgICAgICAgICAgICAgIEdFTl9IREVfQ0hOX1NEQlIgICAgICA6ICJIaWRlIGNoYW5uZWwgc2lkZWJhciIsCiAgICAgICAgICAgICAgICBHRU5fQ01QVF9UVExTICAgICAgICAgOiAiQ29tcGFjdCB0aXRsZXMgaW4gZmVlZHMiLAogICAgICAgICAgICAgICAgR0VOX0RTQl9IVlJDICAgICAgICAgIDogIkRpc2FibGUgaG92ZXJjYXJkcyIsCiAgICAgICAgICAgICAgICBHRU5fQlRUUl9OVEYgICAgICAgICAgOiAiSW1wcm92ZWQgYmx1ZSBub3RpZmljYXRpb24gYm94IiwKICAgICAgICAgICAgICAgIEdFTl9HUklEX1NVQlMgICAgICAgICA6ICJHcmlkIGxheW91dCBpbiBzdWJzY3JpcHRpb25zIiwKICAgICAgICAgICAgICAgIEdFTl9HUklEX1NSQ0ggICAgICAgICA6ICJHcmlkIGxheW91dCBpbiBzZWFyY2ggcmVzdWx0cyIsCiAgICAgICAgICAgICAgICBWSURfVFRMICAgICAgICAgICAgICAgOiAiVmlkZW8gc2V0dGluZ3MiLAogICAgICAgICAgICAgICAgVklEX1BMUiAgICAgICAgICAgICAgIDogIlBsYXllciBzZXR0aW5ncyIsCiAgICAgICAgICAgICAgICBWSURfUExSX0xZVCAgICAgICAgICAgOiAiUGxheWVyIGxheW91dCIsCiAgICAgICAgICAgICAgICBWSURfREZMVF9RTFRZICAgICAgICAgOiAiRGVmYXVsdCB2aWRlbyBxdWFsaXR5OiIsCiAgICAgICAgICAgICAgICBWSURfREZMVF9RTFRZX0FVVE8gICAgOiAiQXV0byIsCiAgICAgICAgICAgICAgICBWSURfREZMVF9RTFRZX1ROWSAgICAgOiAiMTQ0cCIsCiAgICAgICAgICAgICAgICBWSURfREZMVF9RTFRZX1NNTCAgICAgOiAiMjQwcCIsCiAgICAgICAgICAgICAgICBWSURfREZMVF9RTFRZX01ETSAgICAgOiAiMzYwcCIsCiAgICAgICAgICAgICAgICBWSURfREZMVF9RTFRZX0xSRyAgICAgOiAiNDgwcCIsCiAgICAgICAgICAgICAgICBWSURfREZMVF9RTFRZXzcyMCAgICAgOiAiNzIwcCIsCiAgICAgICAgICAgICAgICBWSURfREZMVF9RTFRZXzEwODAgICAgOiAiMTA4MHAiLAogICAgICAgICAgICAgICAgVklEX0RGTFRfUUxUWV8xNDQwICAgIDogIjE0NDBwIiwKICAgICAgICAgICAgICAgIFZJRF9ERkxUX1FMVFlfMjE2MCAgICA6ICIyMTYwcCAoNGspIiwKICAgICAgICAgICAgICAgIFZJRF9ERkxUX1FMVFlfMjg4MCAgICA6ICIyODgwcCAoNWspIiwKICAgICAgICAgICAgICAgIFZJRF9ERkxUX1FMVFlfT1JJRyAgICA6ICI0MzIwcCAoOGspIiwKICAgICAgICAgICAgICAgIFZJRF9QTFJfQUxWSVMgICAgICAgICA6ICJQbGF5ZXIgYWx3YXlzIHZpc2libGUgd2hlbiByZWFkaW5nIGNvbW1lbnRzIiwKICAgICAgICAgICAgICAgIFZJRF9QTFJfQUxWSVNfV0RUSCAgICA6ICJGbG9hdGluZyBwbGF5ZXIgd2lkdGgiLAogICAgICAgICAgICAgICAgVklEX1BMUl9BTFZJU19NT1ZFICAgIDogIk1vdmUgcGxheWVyIiwKICAgICAgICAgICAgICAgIFZJRF9QTFJfQUxWSVNfU0NSTF9UT1A6ICJHbyB0byB0b3AiLAogICAgICAgICAgICAgICAgVklEX1BMUl9BVFBMICAgICAgICAgIDogIkF1dG9wbGF5IHZpZGVvcyIsCiAgICAgICAgICAgICAgICBWSURfTEFZVCAgICAgICAgICAgICAgOiAiTGF5b3V0IiwKICAgICAgICAgICAgICAgIFZJRF9WSURfQ05UICAgICAgICAgICA6ICJTaG93IGxpbmsgd2l0aCBudW1iZXIgb2YgdXBsb2FkZWQgdmlkZW9zIiwKICAgICAgICAgICAgICAgIFZJRF9QT1NUX1RJTUUgICAgICAgICA6ICJTaG93IGhvdyBsb25nIHRoZSB2aWRlbyBoYXMgYmVlbiBwdWJsaXNoZWQiLAogICAgICAgICAgICAgICAgVklEX0hJREVfREVUTFMgICAgICAgIDogIkhpZGUgdmlkZW8gZGV0YWlscyIsCiAgICAgICAgICAgICAgICBWSURfSElERV9DT01TICAgICAgICAgOiAiQ29tbWVudCBzZWN0aW9uIiwKICAgICAgICAgICAgICAgIFZJRF9ISURFX0NPTVNfU0hPVyAgICA6ICJTaG93IiwKICAgICAgICAgICAgICAgIFZJRF9ISURFX0NPTVNfSElERSAgICA6ICJIaWRlIiwKICAgICAgICAgICAgICAgIFZJRF9ISURFX0NPTVNfUkVNICAgICA6ICJSZW1vdmUiLAogICAgICAgICAgICAgICAgVklEX0VORF9TSFJFICAgICAgICAgIDogIkRpc2FibGUgc2hhcmUgcGFuZWwgd2hlbiB2aWRlbyBlbmRzIiwKICAgICAgICAgICAgICAgIFZJRF9QTFNUICAgICAgICAgICAgICA6ICJQbGF5bGlzdHMiLAogICAgICAgICAgICAgICAgVklEX1BMU1RfQVRQTCAgICAgICAgIDogIkVuYWJsZSBwbGF5bGlzdCBhdXRvcGxheSBjb250cm9sIiwKICAgICAgICAgICAgICAgIFZJRF9QTFNUX1JWUlMgICAgICAgICA6ICJFbmFibGUgcmV2ZXJzZSBwbGF5bGlzdCBjb250cm9sIiwKICAgICAgICAgICAgICAgIFZJRF9QTFJfU0laRV9NRU0gICAgICA6ICJNZW1vcml6ZSBwbGF5ZXIgbW9kZSIsCiAgICAgICAgICAgICAgICBWSURfVk9MX1dIRUVMICAgICAgICAgOiAiQ2hhbmdlIHZvbHVtZSB3aXRoIG1vdXNlIHdoZWVsIiwKICAgICAgICAgICAgICAgIFZJRF9QTFJfVk9MX01FTSAgICAgICA6ICJNZW1vcml6ZSBhdWRpbyB2b2x1bWUiLAogICAgICAgICAgICAgICAgVklEX1BMUl9WT0xfTEROICAgICAgIDogIkRpc2FibGUgWW91VHViZSBsb3VkbmVzcyBub3JtYWxpc2F0aW9uIiwKICAgICAgICAgICAgICAgIFZJRF9QTFJfQURTICAgICAgICAgICA6ICJEaXNhYmxlIGFkdmVydGlzZW1lbnRzIGluIHRoZSB2aWRlbyBwYWdlIiwKICAgICAgICAgICAgICAgIFZJRF9QTFJfQUxBQ1QgICAgICAgICA6ICJQbGF5ZXIgc2hvcnRjdXRzIGFsd2F5cyBhY3RpdmUiLAogICAgICAgICAgICAgICAgVklEX1NVQl9BRFMgICAgICAgICAgIDogIkVuYWJsZSBhZHZlcnRpc2VtZW50cyBvbmx5IGluIHZpZGVvcyBmcm9tIHN1YnNjcmliZWQgY2hhbm5lbHMiLAogICAgICAgICAgICAgICAgVklEX1BMUl9BTlRTICAgICAgICAgIDogIkRpc2FibGUgYW5ub3RhdGlvbnMiLAogICAgICAgICAgICAgICAgVklEX1BMUl9IRlIgICAgICAgICAgIDogIkRpc2FibGUgSEZSICg2MGZwcykiLAogICAgICAgICAgICAgICAgVklEX1BMUl9IVE1MNSAgICAgICAgIDogIlVzZSB0aGUgSFRNTDUgcGxheWVyIHdoZW4gcG9zc2libGUiLAogICAgICAgICAgICAgICAgVklEX1BMUl9DQyAgICAgICAgICAgIDogIkRpc2FibGUgc3VidGl0bGVzIGFuZCBDQyIsCiAgICAgICAgICAgICAgICBWSURfUExSX0lORk8gICAgICAgICAgOiAiRW5hYmxlIGluZm8gYmFyIHdpdGggd2F0Y2ggbGF0ZXIgYnV0dG9uIiwKICAgICAgICAgICAgICAgIFZJRF9QTFJfRklUICAgICAgICAgICA6ICJGaXQgdG8gcGFnZSBpbiB0aGVhdGVyIG1vZGUiLAogICAgICAgICAgICAgICAgVklEX1BMUl9GSVRfV0RUSCAgICAgIDogIkZpdCB0byBwYWdlIG1heCB3aWR0aDoiLAogICAgICAgICAgICAgICAgVklEX1BMUl9EWU5fU0laRSAgICAgIDogIkRpc2FibGUgZHluYW1pYyBwbGF5ZXIgc2l6ZSBpbiBkZWZhdWx0IHZpZXciLAogICAgICAgICAgICAgICAgVklEX0RFU0NfU0hSVCAgICAgICAgIDogIlNob3J0IHZpZGVvIGRlc2NyaXB0aW9uIGJ1dHRvbnMiLAogICAgICAgICAgICAgICAgVklEX1RUTF9DTVBUICAgICAgICAgIDogIkNvbXBhY3QgdGl0bGUgaW4gdmlkZW8gZGVzY3JpcHRpb24iLAogICAgICAgICAgICAgICAgVklEX1BQT1RfU1ogICAgICAgICAgIDogIlBvcC1vdXQgcGxheWVyIHNpemUiLAogICAgICAgICAgICAgICAgVklEX0xBWVRfQVVUT19QTkwgICAgIDogIkF1dG8gZXhwYW5kIHZpZGVvIGRlc2NyaXB0aW9uIiwKICAgICAgICAgICAgICAgIEdFTl9DSE5fREZMVF9QQUdFICAgICA6ICJEZWZhdWx0IGNoYW5uZWwgcGFnZToiLAogICAgICAgICAgICAgICAgR0VOX0NITl9ERkxUX1BBR0VfREZMVDogIkRlZmF1bHQiLAogICAgICAgICAgICAgICAgR0VOX0NITl9ERkxUX1BBR0VfVklEIDogIlZpZGVvcyIsCiAgICAgICAgICAgICAgICBHRU5fQ0hOX0RGTFRfUEFHRV9QTCAgOiAiUGxheWxpc3RzIiwKICAgICAgICAgICAgICAgIEdFTl9DSE5fREZMVF9QQUdFX0NITiA6ICJDaGFubmVscyIsCiAgICAgICAgICAgICAgICBHRU5fQ0hOX0RGTFRfUEFHRV9ESVNDOiAiRGlzY3Vzc2lvbiIsCiAgICAgICAgICAgICAgICBHRU5fQ0hOX0RGTFRfUEFHRV9BQlQgOiAiQWJvdXQiLAogICAgICAgICAgICAgICAgQkxLX1RUTCAgICAgICAgICAgICAgIDogIkJsYWNrbGlzdCBzZXR0aW5ncyIsCiAgICAgICAgICAgICAgICBCTEtfQkxLICAgICAgICAgICAgICAgOiAiQmxhY2tsaXN0IiwKICAgICAgICAgICAgICAgIEJMS19PTiAgICAgICAgICAgICAgICA6ICJFbmFibGUgYmxhY2tsaXN0IiwKICAgICAgICAgICAgICAgIEFCVF9UVEwgICAgICAgICAgICAgICA6ICJJbmZvcm1hdGlvbiBhbmQgdXNlZnVsIGxpbmtzIiwKICAgICAgICAgICAgICAgIEFCVF9USEtTICAgICAgICAgICAgICA6ICJUaGFua3MgdG86IiwKICAgICAgICAgICAgICAgIEFCVF9USEtTX1lFUFBIQSAgICAgICA6ICIsIHdobydzIHdvcmsgaW5zcGlyZWQgdGhlIGNyZWF0aW9uIG9mIHRoaXMgcHJvamVjdCwgd2l0aG91dCB3aG9tIG5vbmUgb2YgdGhpcyB3b3VsZCBleGlzdCB0b2RheS4iLAogICAgICAgICAgICAgICAgQUJUX1RIS1NfVVNFUlNDUklQVCAgIDogIiBmb3IgbWFraW5nIHRoZSB0YXNrIG9mIGRldmVsb3BpbmcgYW5kIHNoaXBwaW5nIHRoaXJkIHBhcnR5IHNvZnR3YXJlIGluY3JlZGlibHkgZWFzaWVyLiIsCiAgICAgICAgICAgICAgICBBQlRfVEhLU19TVEFDS09WICAgICAgOiAiIGZvciBhbGwgb2YgaXRzIHByaWNlbGVzcyBpbmZvcm1hdGlvbiB3aGljaCBncmVhdGx5IGNvbnRyaWJ1dGVzIGZvciBzb2Z0d2FyZSBkZXZlbG9wbWVudC4iLAogICAgICAgICAgICAgICAgQUJUX0lORk8gICAgICAgICAgICAgIDogIk9mZmljaWFsIHBhZ2VzIiwKICAgICAgICAgICAgICAgIEFCVF9MTktfR0hCICAgICAgICAgICA6ICJHaXRIdWIiLAogICAgICAgICAgICAgICAgQUJUX0xOS19HUkZLICAgICAgICAgIDogIkdyZWFzeSBGb3JrIiwKICAgICAgICAgICAgICAgIEFCVF9MTktfT1BOVSAgICAgICAgICA6ICJPcGVuVXNlckpTIiwKICAgICAgICAgICAgICAgIFdMQ00gICAgICAgICAgICAgICAgICA6ICJUaGFuayB5b3UgZm9yIGluc3RhbGxpbmcgWW91VHViZSsiLAogICAgICAgICAgICAgICAgV0xDTVNUUlQgICAgICAgICAgICAgIDogIllvdSBjYW4gY3VzdG9taXplIHlvdXIgc2V0dGluZ3MgYnkgY2xpY2tpbmcgdGhlIGJ1dHRvbiBhYm92ZSIsCiAgICAgICAgICAgICAgICBXTENNRlRSUyAgICAgICAgICAgICAgOiAiQ2xpY2sgaGVyZSB0byBzZWUgYWxsIHRoZSBmZWF0dXJlcyIsCiAgICAgICAgICAgICAgICBMT0NBTEUgICAgICAgICAgICAgICAgOiAiRW5nbGlzaCAoVVMpIgogICAgICAgICAgICB9OwogICAgICAgICAgICBpZiAoIXVzZXJfc2V0dGluZ3MgfHwgT2JqZWN0LmtleXModXNlcl9zZXR0aW5ncykubGVuZ3RoIDwgMSkgewogICAgICAgICAgICAgICAgdXNlcl9zZXR0aW5ncyA9IGRlZmF1bHRfc2V0dGluZ3M7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjaGVja05ld0ZlYXR1cmVzKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHdpbmRvdy5jaHJvbWUpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgc2NyaXB0RXhpdCwgdHJ1ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJhZnRlcnNjcmlwdGV4ZWN1dGUiLCBzY3JpcHRFeGl0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJzcGZkb25lIiwgbWFpbik7CiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNwZnJlcXVlc3QiLCByZXF1ZXN0KTsKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsIG1haW4sIHRydWUpOwogICAgICAgICAgICBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbiA9IGNoZWNrWEhSKFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5vcGVuKTsKICAgICAgICAgICAgRE9NUGFyc2VyLnByb3RvdHlwZS5wYXJzZUZyb21TdHJpbmcgPSBjaGVja0RvbVBhcnNlcihET01QYXJzZXIucHJvdG90eXBlLnBhcnNlRnJvbVN0cmluZyk7CiAgICAgICAgICAgIHdpbmRvdy5vbllvdVR1YmVQbGF5ZXJSZWFkeSA9IHNoYXJlQXBpKHdpbmRvdy5vbllvdVR1YmVQbGF5ZXJSZWFkeSk7CiAgICAgICAgICAgIHdpbmRvdy5tYXRjaE1lZGlhID0gbW9kTWF0Y2hNZWRpYSh3aW5kb3cubWF0Y2hNZWRpYSk7CiAgICAgICAgICAgIG1haW4oKTsKICAgICAgICB9LAogICAgICAgIGNvbnRlbnRTY3JpcHRNZXNzYWdlczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBrZXkxLCBrZXkyLCBnYXRlLCBzZXRzLCBsb2NzLCBvYnNlcnZlcjsKICAgICAgICAgICAga2V5MSA9ICJwYXJzZW5kIjsKICAgICAgICAgICAga2V5MiA9ICJnZXRsb2NhbGUiOwogICAgICAgICAgICBnYXRlID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwogICAgICAgICAgICBzZXRzID0gSlNPTi5wYXJzZShnYXRlLmRhdGFzZXRba2V5MV0gfHwgbnVsbCk7CiAgICAgICAgICAgIGxvY3MgPSBnYXRlLmRhdGFzZXRba2V5Ml0gfHwgbnVsbDsKICAgICAgICAgICAgaWYgKCFnYXRlLmNvbnRlbnRzY3JpcHQpIHsKICAgICAgICAgICAgICAgIGdhdGUuY29udGVudHNjcmlwdCA9IHRydWU7CiAgICAgICAgICAgICAgICBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHBhcnRpY2xlLmNvbnRlbnRTY3JpcHRNZXNzYWdlcyk7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIub2JzZXJ2ZShnYXRlLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVGaWx0ZXI6IFsiZGF0YS0iICsga2V5MSwgImRhdGEtIiArIGtleTJdCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc2V0cykgewogICAgICAgICAgICAgICAgaWYgKHBhcnRpY2xlLmlzX3VzZXJzY3JpcHQpIHsKICAgICAgICAgICAgICAgICAgICBwYXJ0aWNsZS5HTV9zZXRWYWx1ZShwYXJ0aWNsZS5pZCwgSlNPTi5zdHJpbmdpZnkoc2V0cykpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoe3BhcnRpY2xlU2V0dGluZ3M6IHNldHN9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoImRhdGEtcGFyc2VuZCIpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGxvY3MpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kYXRhc2V0LnNldGxvY2FsZSA9IGNocm9tZS5pMThuLmdldE1lc3NhZ2UobG9jcyk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGZpbHRlckNocm9tZUtleXM6IGZ1bmN0aW9uKGtleXMpIHsKICAgICAgICAgICAgaWYgKGtleXNbcGFydGljbGUuaWRdICYmIGtleXNbcGFydGljbGUuaWRdLm5ld192YWx1ZSkgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRhdGFzZXQucGFycmVjZWl2ZSA9IEpTT04uc3RyaW5naWZ5KAogICAgICAgICAgICAgICAgICAgIChrZXlzW3BhcnRpY2xlLmlkXS5uZXdfdmFsdWUgJiYga2V5c1twYXJ0aWNsZS5pZF0ubmV3X3ZhbHVlW3BhcnRpY2xlLmlkXSkgfHwga2V5c1twYXJ0aWNsZS5pZF0ubmV3X3ZhbHVlIHx8IHt9CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBtYWluOiBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICB2YXIgaG9sZGVyOwogICAgICAgICAgICBpZiAoIWV2ZW50ICYmIHBhcnRpY2xlLmlzX3VzZXJzY3JpcHQpIHsKICAgICAgICAgICAgICAgIGV2ZW50ID0gSlNPTi5wYXJzZShwYXJ0aWNsZS5HTV9nZXRWYWx1ZShwYXJ0aWNsZS5pZCwgInt9IikpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChldmVudCkgewogICAgICAgICAgICAgICAgZXZlbnQgPSBKU09OLnN0cmluZ2lmeShldmVudFtwYXJ0aWNsZS5pZF0gfHwgZXZlbnQpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRhdGFzZXQudXNlcl9zZXR0aW5ncyA9IGV2ZW50OwogICAgICAgICAgICAgICAgaWYgKHBhcnRpY2xlLmlzX3VzZXJzY3JpcHQpIHsKICAgICAgICAgICAgICAgICAgICBob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIik7CiAgICAgICAgICAgICAgICAgICAgaG9sZGVyLnJlbCA9ICJzdHlsZXNoZWV0IjsKICAgICAgICAgICAgICAgICAgICBob2xkZXIudHlwZSA9ICJ0ZXh0L2NzcyI7CiAgICAgICAgICAgICAgICAgICAgaG9sZGVyLmhyZWYgPSAiaHR0cHM6Ly9wYXJ0aWNsZWNvcmUuZ2l0aHViLmlvL1BhcnRpY2xlL3N0eWxlc2hlZXRzL1lvdVR1YmVQbHVzLmNzcz92PTEuOC44IjsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoaG9sZGVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOwogICAgICAgICAgICAgICAgaG9sZGVyLnRleHRDb250ZW50ID0gIigiICsgcGFydGljbGUuaW5qZWN0ICsgIigiICsgcGFydGljbGUuaXNfdXNlcnNjcmlwdCArICIpKSI7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoaG9sZGVyKTsKICAgICAgICAgICAgICAgIGlmICghcGFydGljbGUuaXNfdXNlcnNjcmlwdCkgewogICAgICAgICAgICAgICAgICAgIGNocm9tZS5zdG9yYWdlLm9uQ2hhbmdlZC5hZGRMaXN0ZW5lcihwYXJ0aWNsZS5maWx0ZXJDaHJvbWVLZXlzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgaW5pOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcGFydGljbGUuaWQgPSAicGFydGljbGVTZXR0aW5ncyI7CiAgICAgICAgICAgIHBhcnRpY2xlLmlzX3VzZXJzY3JpcHQgPSB0eXBlb2YgR01faW5mbyA9PT0gIm9iamVjdCI7CiAgICAgICAgICAgIGlmIChwYXJ0aWNsZS5pc191c2Vyc2NyaXB0KSB7CiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5HTV9nZXRWYWx1ZSA9IEdNX2dldFZhbHVlOwogICAgICAgICAgICAgICAgcGFydGljbGUuR01fc2V0VmFsdWUgPSBHTV9zZXRWYWx1ZTsKICAgICAgICAgICAgICAgIHBhcnRpY2xlLm1haW4oKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldChwYXJ0aWNsZS5pZCwgcGFydGljbGUubWFpbik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcGFydGljbGUuY29udGVudFNjcmlwdE1lc3NhZ2VzKCk7CiAgICAgICAgfQogICAgfTsKICAgIHBhcnRpY2xlLmluaSgpOwp9KCkpOw=="},{"name":"vipVideos_skipAd","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":["https://www.youtube.com/*","http://*.dj92cc.com/*","http://*.yinyuetai.com/*"],"orig_includes":["http*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"unread":"bfalse"},"ts":1492505332259},"enabled":true,"position":4,"file_url":"https://greasyfork.org/scripts/8561-vipvideos-skipad/code/vipVideos_skipAd.user.js","uuid":"a14ad6b2-6bc0-4a60-aee0-1648362bea57","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIHZpcFZpZGVvc19za2lwQWQKLy8gQG5hbWVzcGFjZSAgICAgIHZpcFZpZGVvc19za2lwQWQteGluZ2dzZgovLyBAYXV0aG9yICAgICAgICAgeGluZ2dzZgovLyBAZGVzY3JpcHRpb24gICAg6YWN5ZCIQUJQ5Y676KeG6aKR5bm/5ZGK77yb5byA5ZCvR1BV5Yqg6YCfCi8vIHVwZGF0ZVVSTCAgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvODU2MS5qcwovLyBAaW5jbHVkZSAgICAgICAgaHR0cCoKLy8gQGV4Y2x1ZGUgICAgICAgIGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tLyoKLy8gQGV4Y2x1ZGUgICAgICAgIGh0dHA6Ly8qLmRqOTJjYy5jb20vKgovL+WFqOmdouaUr+aMgemfs+aCpuWPsEhUTUw15pKt5pS+77yM6K+m6KeBIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy8xNDU5MwovLyBAZXhjbHVkZSAgICAgICAgaHR0cDovLyoueWlueXVldGFpLmNvbS8qCi8vIEB2ZXJzaW9uICAgICAgICAyMDE3LjA2LjgKLy8gQGVuY29kaW5nICAgICAgIHV0Zi04Ci8vIHJlc291cmNlICAgICAgIHBsYXllcl9zd2YgaHR0cHM6Ly9iaXRidWNrZXQub3JnL2thZmFuMTU1MzY5MDAvaGFvdXRpbC9yYXcvbWFzdGVyL3BsYXllci90ZXN0bW9kL3BsYXllci5zd2YKLy8gQGdyYW50ICAgICAgICAgIEdNX2dldFJlc291cmNlVVJMCi8vIEBncmFudCAgICAgICAgICB1bnNhZmVXaW5kb3cKLy8gPT0vVXNlclNjcmlwdD09CgotZnVuY3Rpb24oZG9jLCBiZCkgewoJInVzZSBzdHJpY3QiOwoJbGV0IGlzRW1iZWQsIHN3ZkFkZHI7Cgljb25zdCBvbmx5VXNlR3B1ID0gZmFsc2UsLy/ku4Xkvb/nlKjohJrmnKznmoRHUFXliqDpgJ/lip/og70KCXJlZ1lrID0gL1ZpZGVvSURTPShcdyspLywKCW5vQWRQbGF5ZXJQYXRoID0gJ2h0dHA6Ly9jb2RlLnRhb2Jhby5vcmcvc3ZuL05vQWRTd2Yvc3dmLycsLy/lj6/loavlhpnmnInmlYjmkq3mlL7lmajlnLDlnYDot6/lvoQo5LiN5YyF5ous5paH5Lu25ZCN77yJaHR0cDovL2hhbGZsaWZlLmNvZGluZy5tZS9zd2YvCglzd2ZXaGl0ZUxpc3QgPSBbCgkJJy5wZGltLmdzL3N0YXRpYy8nLCAvL+eGiueMq+ebtOaSrQoJCSdodHRwOi8vdi42LmNuL2FwcGxlL3BsYXllci8nLAoJCSdodHRwOi8vd3d3Lmdhb3hpYW92b2QuY29tL2NrL3BsYXllci5zd2YnLAoJXSwKCVlvdWt1ID0gewoJCW1hdGNoUGxheWVyOiB1cmwgPT4gL15odHRwOlwvXC9zdGF0aWNcLnlvdWt1XC5jb21cL3YuKj9cL3ZcL3N3ZlwvdXBzcGxheWVyXC8vLnRlc3QodXJsKSwKCQlzZXRQbGF5ZXIocCwgdikgewoJCQlpZiAobG9jYXRpb24uaG9zdG5hbWUuZW5kc1dpdGgoJy55b3VrdS5jb20nKSkgewoJCQkJdW5zYWZlV2luZG93LnNlc3Npb25TdG9yYWdlLlBfbF9oNSA9IHRydWU7CgkJCQl1bnNhZmVXaW5kb3cucmVsb2FkKCk7CgkJCX0KCQkJZWxzZSB7CgkJCQlsZXQgbSA9IHYubWF0Y2gocmVnWWspWzFdLAoJCQkJcyA9IGdldFBsYXllclVybCgneW91a3Uuc3dmJyk7CgkJCQlpZiAodHlwZW9mKHMpID09PSdzdHJpbmcnKQoJCQkJCXNldFlrUGxheWVyKHAsIHMsIG0pOwoJCQkJZWxzZSBzLnRoZW4odXJsID0+IHsKCQkJCQlzZXRZa1BsYXllcihwLCB1cmwsIG0pOwoJCQkJCXNldFRpbWVvdXQoKCkgPT4gVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpLCAzZTMpOwoJCQkJfSkKCQkJCS50aGVuKGNvbnNvbGUubG9nKQoJCQkJLmNhdGNoKGNvbnNvbGUuZXJyb3IpOwoJCQl9CgkJfQoJfSwKCVlrT3V0c2l0ZSA9IHsKCQltYXRjaFBsYXllcjogdXJsID0+IC9eaHR0cDpcL1wvcGxheWVyXC55b3VrdVwuY29tXC9wbGF5ZXJcLnBocFwvc2lkXC8oXHcrKS8udGVzdCh1cmwpLAoJCXNldFBsYXllcihwLCB2KSB7CgkJCWxldCBtID0gUmVnRXhwLiQxOwoJCQlpZiAoIW0pIHsKCQkJCW0gPSBzd2ZBZGRyLm1hdGNoKHJlZ1lrKSB8fCB2Lm1hdGNoKHJlZ1lrKTsKCQkJCW0gPSBtWzFdOwoJCQl9CgoJCQlsZXQgcyA9IGdldFBsYXllclVybCgneW91a3Uuc3dmJyk7CgkJCWlmICh0eXBlb2YocykgPT09ICdzdHJpbmcnKQoJCQkJc2V0WWtQbGF5ZXIocCwgcywgbSk7CgkJCWVsc2UgaWYgKHdpbmRvdy5jaHJvbWUpIHsKCQkJCXMudGhlbih1cmwgPT4gewoJCQkJCXNldFlrUGxheWVyKHAsIHVybCwgbSk7CgkJCQkJc2V0VGltZW91dCgoKSA9PiBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCksIDNlMyk7CgkJCQl9KTsKCQkJfSBlbHNlIHsKCQkJCXNldFlrUGxheWVyKHAsICdodHRwOi8vc3RhdGljLnlvdWt1LmNvbS92MS4wLjA2NTgvdi9zd2YvcGxheWVyLnN3ZicsIG0pOwoJCQl9CgkJfQoJfSwKCUFjZnVuWWsgPSB7CgkJbWF0Y2hQbGF5ZXI6IHVybCA9PiB1cmwudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCdodHRwOi8vY2RuLmFpeGlmYW4uY29tL3BsYXllci9jb29wZXJhdGlvbi9hY2Z1bnh5b3VrdS5zd2YnKSwKCQlzZXRQbGF5ZXIocCwgdikgewoJCQlsZXQgbSA9IHYubWF0Y2goL3ZpZD0oXHcrKS8pWzFdOwoKCQkJbGV0IHMgPSBnZXRQbGF5ZXJVcmwoJ3lvdWt1LnN3ZicpOwoJCQlpZiAodHlwZW9mKHMpID09PSAnc3RyaW5nJykKCQkJCXNldFlrUGxheWVyKHAsIHMsIG0pOwoJCQllbHNlIGlmICh3aW5kb3cuY2hyb21lKSB7CgkJCQlzLnRoZW4odXJsID0+IHsKCQkJCQlzZXRZa1BsYXllcihwLCB1cmwsIG0pOwoJCQkJCS8vaWYgKHMuc3RhcnRzV2l0aCgnYmxvYjonKSkKCQkJCQlzZXRUaW1lb3V0KCgpID0+IFVSTC5yZXZva2VPYmplY3RVUkwodXJsKSwgM2UzKTsKCQkJCX0pOwoJCQl9IGVsc2UgewoJCQkJc2V0WWtQbGF5ZXIocCwgJ2h0dHA6Ly9zdGF0aWMueW91a3UuY29tL3YxLjAuMDY1OC92L3N3Zi95b3VrdS5zd2YnLCBtKTsKCQkJfQoJCX0KCX0sCglUdWRvdSA9IHsKCQltYXRjaFBsYXllcjogdXJsID0+IGxvY2F0aW9uLmhvc3RuYW1lLmVuZHNXaXRoKCd0dWRvdS5jb20nKSAmJiB1cmwuc3RhcnRzV2l0aCgnaHR0cDovL3N0YXRpYy55b3VrdS5jb20vdicpLAoJCXNldFBsYXllcihwLCB2KSB7CgkJCWNvbnNvbGUubG9nKGRvYy5kb21haW4pOwoJCQlwLmRhdGEgPSBub0FkUGxheWVyUGF0aCArICd0dWRvdS5zd2YnOwoJCQlvcGVuRmxhc2hHUFUocCk7CgkJfQoJfSwKCUlxaXlpID0gewoJCW1hdGNoUGxheWVyOiB1cmwgPT4gdXJsLnN0YXJ0c1dpdGgoJ2h0dHA6Ly93d3cuaXFpeWkuY29tL2NvbW1vbi9mbGFzaHBsYXllci8yMDEnKSwKCQlzZXRQbGF5ZXIocCwgdikgewoJCQlwLmRhdGEgPSBub0FkUGxheWVyUGF0aCArICdpcWl5aS5zd2YnOwoJCQlvcGVuRmxhc2hHUFUocCk7CgkJfQoJfSwKCVNvaHUgPSB7CgkJbWF0Y2hQbGF5ZXI6IHVybCA9PiBsb2NhdGlvbi5ob3N0bmFtZSA9PT0gJ3R2LnNvaHUuY29tJyAmJiB1cmwuc3RhcnRzV2l0aCgnaHR0cDovL3R2LnNvaHUuY29tL3VwbG9hZC9zd2YvJyksCgkJc2V0UGxheWVyKHAsIHYpIHsKCQkJcC5zcmMgPSBub0FkUGxheWVyUGF0aCArICdzb2h1LnN3Zic7CgkJCW9wZW5GbGFzaEdQVShwKTsKCQl9Cgl9OwoKCWZ1bmN0aW9uIHNldFlrUGxheWVyKHAsIHVybCwgdmlkKSB7CgkJcC5vdXRlckhUTUwgPSBgPGVtYmVkIGlkPSIke3AuaWR9IiB3bW9kZT0iZ3B1IiBhbGxvd2Z1bGxzY3JlZW49InRydWUiIHNyYz0iJHt1cmx9IiBhbGxvd3NjcmlwdGFjY2Vzcz0iYWx3YXlzIiB0eXBlPSJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaCIgd2lkdGg9IiR7cC53aWR0aH0iIGhlaWdodD0iJHtwLmhlaWdodH0iIGZsYXNodmFycz0iaXNTaG93UmVsYXRlZFZpZGVvPWZhbHNlJnNob3dBZD0wJnNob3dfY2U9MCZzaG93c2VhcmNoPTAmVmlkZW9JRFM9JHt2aWR9JmlzQXV0b1BsYXk9dHJ1ZSZ3aW5UeXBlPUJEc2tpbiZUeXBlPVBsYXlMaXN0Ij5gOwoJfQoJZnVuY3Rpb24gZ2V0UGxheWVyVXJsKGZpbGVOYW1lKSB7CgkJaWYgKG5vQWRQbGF5ZXJQYXRoKQoJCQlyZXR1cm4gbm9BZFBsYXllclBhdGggKyBmaWxlTmFtZTsKCQlsZXQgYSwgdXJsID0gR01fZ2V0UmVzb3VyY2VVUkwoZmlsZU5hbWUucmVwbGFjZSgnLicsJ18nKSk7CgkJLy9jb25zb2xlLmxvZyh1cmwpOwovKgoJCWlmICh3aW5kb3cuY2hyb21lKSB7CgkJCS8vIGEgPSB1cmwuc2xpY2UodXJsLmluZGV4T2YoJywnKSsxKTsKCQkJLy8gYSA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShhKTsKCQkJLy8gY29uc29sZS5sb2coYSk7CgkJCS8vIGEgPSBuZXcgQmxvYihhLCB7J3R5cGUnOiAnYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2gnfSk7CgkJCS8vIHJldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKGEpOwoJCQkvL3VybCA9IHVybC5yZXBsYWNlKCc6YXBwbGljYXRpb24nLCckJi94LXNob2Nrd2F2ZS1mbGFzaDtjaGFyc2V0PXV0Zi04Jyk7Ly8iZGF0YTphcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaDtjaGFyc2V0PXV0Zi04O2Jhc2U2NCwiCgkJCWNvbnNvbGUubG9nKHVybC5zbGljZSgwLDU2KSk7CgkJCS8vcmV0dXJuIFVSTC5jcmVhdGVPYmplY3RVUkwoZGF0YVVSTDJCbG9iKGEpKTsKCQl9IGVsc2Ugey8vZmlyZWZveAoJCQlsZXQgYSA9IHsKCQkJCXVybDogdXJsLAoJCQkJbWV0aG9kOiAiR0VUIiwKCQkJCXJlc3BvbnNlVHlwZTogJ2Jsb2InLAoJCQkJc3luY2hyb25vdXM6IHRydWUKCQkJfTsKCQkJYSA9IEdNX3htbGh0dHBSZXF1ZXN0KGEpOwoJCQlpZiAoYS5zdGF0dXMgIT09IDIwMCkgewoJCQkJYWxlcnQoIlVuZXhwZWN0ZWQgc3RhdHVzIGNvZGUgIiArIGEuc3RhdHVzICsgIiBmb3IgIiArIGZpbGVOYW1lKTsKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCQlyZXR1cm4gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihhLnJlc3BvbnNlKSk7CgkJfSAqLwoJCXJldHVybiBmZXRjaCh1cmwpCgkJLy9hbnkgbW9yZSB0eXBlOiByZXMuYXJyYXlCdWZmZXIoKSAgLnRleHQoKSAgLmpzb24oKQoJCQkudGhlbihyZXMgPT4gcmVzLmJsb2IoKSkKCQkJLnRoZW4oZGF0YSA9PiBVUkwuY3JlYXRlT2JqZWN0VVJMKGRhdGEpKTsKCX0KLyoKCWZ1bmN0aW9uIGRhdGFVUkwyRmlsZShzcmMsIGZpbGVOYW1lLCBtaW1lVHlwZSl7CgkJcmV0dXJuIGZldGNoKHNyYykudGhlbihyZXMgPT4gcmVzLmJsb2IoKSkKCQkJLy8udGhlbihyZXMgPT4gcmVzLmFycmF5QnVmZmVyKCkpCgkJCS8vLnRoZW4oZnVuY3Rpb24oYnVmKXtyZXR1cm4gbmV3IEZpbGUoW2J1Zl0sIGZpbGVOYW1lLCB7dHlwZTptaW1lVHlwZX0pO30pOwoJfQoJZnVuY3Rpb24gZGF0YVVSTDJCbG9iKGRhdGF1cmwpIHsKCQlsZXQgYXJyID0gZGF0YXVybC5zcGxpdCgnLCcpLAoJCW1pbWUgPSBhcnJbMF0ubWF0Y2goLzooLio/KTsvKVsxXSwKCQlic3RyID0gYXRvYihhcnJbMV0pLAoJCW4gPSBic3RyLmxlbmd0aCwKCQlhID0gbmV3IFVpbnQ4QXJyYXkobik7CgkJd2hpbGUobi0tKXsKCQkJYVtuXSA9IGJzdHIuY2hhckNvZGVBdChuKTsKCQl9CgkJcmV0dXJuIG5ldyBCbG9iKGEsIHsndHlwZSc6IG1pbWV9KTsKCX0KCWZ1bmN0aW9uIGluamVjdERPTShyZXBsYWNlQ3NzKSB7CgkJLy8gaWYgKCFjb25maXJtKCfor7fpgInmi6nkuIvovb3nmoRzd2bmkq3mlL7lmajmlofku7bjgILlh4blpIflpb3kuoblkJfvvJ8nKSkKCQkJLy8gcmV0dXJuOwoJCWxldCBzLCBjOwoJCWlmIChyZXBsYWNlQ3NzKSB7CgkJCWMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHJlcGxhY2VDc3MpOwoJCQlpZiAoIWMpIHJldHVybjsKCQl9IGVsc2UgewoJCQljID0gJEMoJ2RpdicpOwoJCQlkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGMpOwoJCX0KCQlzID0gJEMoJ3NjcmlwdCcsIHt0eXBlOiJ0ZXh0L2phdmFzY3JpcHQiLCAnY2xhc3MnOiJnbVRlbXAifSk7CgkJcy50ZXh0Q29udGVudCA9IGB3aW5kb3cuVVJMID0gd2luZG93LlVSTCB8fCB3aW5kb3cud2Via2l0VVJMOwoJCWZ1bmN0aW9uIGhhbmRsZVN3ZihmaWxlKSB7CgkJCWlmICghL1wuc3dmJC9pLnRlc3QoZmlsZS5uYW1lKSApIHJldHVybiBmYWxzZTsKCgkJCS8vc2F2ZSBkYXRhIHRvIGxvY2FsU3RvcmFnZQoJCQlibG9iMkRhdGFVUkwoZmlsZSwgciA9PiB7bG9jYWxTdG9yYWdlLnN3ZlBsYXllciA9IHJ9KTsKCQkJc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCWFsZXJ0KCfnvJPlrZjlrozmr5XvvIHliLfmlrDpobXpnaIuLi4nKTsKCQkJCWxvY2F0aW9uLnJlbG9hZCgpOwoJCQl9LCAxMDAwKTsKCQl9CgoJCWZ1bmN0aW9uIGJsb2IyRGF0YVVSTChibG9iLCBjYWxsYmFjaykgewoJCQlsZXQgZnIgPSBuZXcgRmlsZVJlYWRlcigpOwoJCQlmci5vbmxvYWQgPSBmdW5jdGlvbiAoZXYpIHsKCQkJCWNhbGxiYWNrKGV2LnRhcmdldC5yZXN1bHQpOwoJCQl9OwoJCQlmci5yZWFkQXNEYXRhVVJMKGJsb2IpOwoJCX1gOwoJCWRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQocyk7CgkJYy5vdXRlckhUTUwgPSBgPGRpdj48aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImZpbGVFbGVtIiBvbmNoYW5nZT0iaGFuZGxlU3dmKHRoaXMuZmlsZXNbMF0pIiBoaWRkZW4+CgkJPGEgaHJlZj0iamF2YXNjcmlwdDo7IiBpZD0iZmlsZVNlbGVjdCIgc3R5bGU9ImZvbnQtc2l6ZToyMHB4OyIgb25jbGljaz0iZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXQjZmlsZUVsZW0nKS5jbGljaygpOyI+6K6+572u5Y675bm/5ZGKc3dm5paH5Lu2PC9hPjwvZGl2PmA7Cgl9Ci8vaHR0cHM6Ly9naXRodWIuY29tL2JlYXRnYW1taXQvYmFzZTY0LWpzCmxldCBsb29rdXA9W107bGV0IHJldkxvb2t1cD1bXTtsZXQgY29kZT0nQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7Zm9yKGxldCBpPTAsbGVuPWNvZGUubGVuZ3RoO2k8bGVuOysraSl7bG9va3VwW2ldPWNvZGVbaV07cmV2TG9va3VwW2NvZGUuY2hhckNvZGVBdChpKV09aTt9CmZ1bmN0aW9uIHBsYWNlSG9sZGVyc0NvdW50KGI2NCl7bGV0IGxlbj1iNjQubGVuZ3RoO2lmKGxlbiU0PjApe3Rocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpO30KcmV0dXJuIGI2NFtsZW4tMl09PT0nPSc/MjpiNjRbbGVuLTFdPT09Jz0nPzE6MDt9CmZ1bmN0aW9uIHRvQnl0ZUFycmF5KGI2NCl7bGV0IGksaixsLHRtcCxwbGFjZUhvbGRlcnMsYXJyO2xldCBsZW49YjY0Lmxlbmd0aDtwbGFjZUhvbGRlcnM9cGxhY2VIb2xkZXJzQ291bnQoYjY0KTthcnI9bmV3IFVpbnQ4QXJyYXkobGVuKjMvNC1wbGFjZUhvbGRlcnMpO2w9cGxhY2VIb2xkZXJzPjA/bGVuLTQ6bGVuO2xldCBMPTA7Zm9yKGk9MCxqPTA7aTxsO2krPTQsais9Myl7dG1wPShyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldPDwxOCl8KHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKzEpXTw8MTIpfChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSsyKV08PDYpfHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKzMpXTthcnJbTCsrXT0odG1wPj4xNikmMHhGRjthcnJbTCsrXT0odG1wPj44KSYweEZGO2FycltMKytdPXRtcCYweEZGO30KaWYocGxhY2VIb2xkZXJzPT09Mil7dG1wPShyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldPDwyKXwocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkrMSldPj40KTthcnJbTCsrXT10bXAmMHhGRjt9ZWxzZSBpZihwbGFjZUhvbGRlcnM9PT0xKXt0bXA9KHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV08PDEwKXwocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkrMSldPDw0KXwocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkrMildPj4yKTthcnJbTCsrXT0odG1wPj44KSYweEZGO2FycltMKytdPXRtcCYweEZGO30KcmV0dXJuIGFycjt9CgoJZnVuY3Rpb24gcXlPdXRzaXRlRm9ybWF0KHAsIHYpIHsKCQlsZXQgdHZpZCA9IHYubWF0Y2goL1xidHZJZD0oXHcrKS9pKVsxXSwKCQlkZWZpbml0aW9uSUQgPSB2Lm1hdGNoKC9cYig/OmRlZmluaXRpb25JRHxzb3VyY2VJZHx2aWQpPShcdyspLylbMV0sCgkJcyA9IGA8ZW1iZWQgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgYWxsb3dzY3JpcHRhY2Nlc3M9ImFsd2F5cyIgd21vZGU9ImdwdSIgYWxsb3dmdWxsc2NyZWVuPSJ0cnVlIiB0eXBlPSJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaCIgaWQ9IiR7cC5pZH0iIHNyYz0iJHtub0FkUGxheWVyUGF0aH1pcWl5aV9vdXQuc3dmIiBmbGFzaHZhcnM9InZpZD0ke2RlZmluaXRpb25JRH0mdHZpZD0ke3R2aWR9JmF1dG9QbGF5PTEmc2hvd1NlYXJjaD0wJnNob3dTZWFyY2hCb3g9MCZhdXRvSGlkZUNvbnRyb2w9MSZjaWQ9cWNfMTAwMDAxXzMwMDA4OSZzaG93RG9jaz0wIj5gOwoJCXNldFBsYXllcihwLCBzKTsKCX0gKi8KCWZ1bmN0aW9uIG9wZW5GbGFzaEdQVShwKSB7CgkJaXNFbWJlZCA/IHAuc2V0QXR0cmlidXRlKCd3bW9kZScsICdncHUnKSA6CgkJc2V0Rmxhc2hQYXJhbShwLCB7d21vZGU6ICdncHUnfSk7CgkJLy9wLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHAuY2xvbmVOb2RlKHRydWUpLCBwKTsKCQlyZWZyZXNoRWxlbShwKTsKCX0KCWZ1bmN0aW9uIHJlZnJlc2hFbGVtKG8pIHsKCQlsZXQgcyA9IG8uc3R5bGUuZGlzcGxheTsKCQlvLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CgkJc2V0VGltZW91dCgoKSA9PiB7CgkJCXMgPyBvLnN0eWxlLmRpc3BsYXkgPSBzIDogby5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnZGlzcGxheScpOwoJCQlpZiAoJycgPT09IG8uZ2V0QXR0cmlidXRlKCdzdHlsZScpKQoJCQkJby5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7CgkJfSwgOSk7Cgl9CglmdW5jdGlvbiBpc1BsYXllcihwKSB7CgkJaWYgKHN3ZldoaXRlTGlzdC5zb21lKHggPT4gc3dmQWRkci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHgpKSkKCQkJcmV0dXJuICEwOwoJCWlmICghcC53aWR0aCkgcmV0dXJuICExOwoJCWlmIChwLndpZHRoLmVuZHNXaXRoKCclJykpIHJldHVybiAhMDsKCQlpZiAocGFyc2VJbnQocC53aWR0aCkgPCAyMzMgfHwgcGFyc2VJbnQocC5oZWlnaHQpIDwgNTMpIHJldHVybiAhMTsKCQlyZXR1cm4gaXNFbWJlZCA/IHAubWF0Y2hlcygnW2FsbG93RnVsbFNjcmVlbl0nKSA6IC8iYWxsb3dmdWxsc2NyZWVuIi9pLnRlc3QocC5pbm5lckhUTUwpOwoJfQoJZnVuY3Rpb24gc2V0Rmxhc2hQYXJhbShwLCB2YWx1ZXMpIHsKCQlsZXQgaSwgbywKCQllID0gcC5xdWVyeVNlbGVjdG9yKCdlbWJlZCcpOwoJCWZvciAoaSBpbiB2YWx1ZXMpIHsKCQkJaWYgKGUpIGUuc2V0QXR0cmlidXRlKGksIHZhbHVlc1tpXSk7CgkJCWlmIChwLmhhc0F0dHJpYnV0ZShpKSkgcC5zZXRBdHRyaWJ1dGUoaSwgdmFsdWVzW2ldKTsKCQl9CgkJZm9yIChvIG9mIHAuY2hpbGROb2RlcykgaWYgKG8ubmFtZSkgewoJCQlpID0gby5uYW1lLnRvTG93ZXJDYXNlKCk7CgkJCWlmIChpIGluIHZhbHVlcykgewoJCQkJby52YWx1ZSA9IHZhbHVlc1tpXTsKCQkJCWRlbGV0ZSB2YWx1ZXNbaV07CgkJCX0KCQl9CgkJZm9yIChpIGluIHZhbHVlcykgewoJCQllID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3BhcmFtJyk7CgkJCWUubmFtZSA9IGk7CgkJCWUudmFsdWUgPSB2YWx1ZXNbaV07CgkJCXAuYXBwZW5kQ2hpbGQoZSk7CgkJfQoJfQoJZnVuY3Rpb24gZ2V0Rmxhc2h2YXJzKHApIHsKCQlsZXQgcyA9ICdmbGFzaHZhcnMnOwoJCWlmIChpc0VtYmVkKQoJCQlyZXR1cm4gcC5nZXRBdHRyaWJ1dGUocyk7CgkJaWYgKCFwLmNoaWxkcmVuW3NdKQoJCQlzID0gJ2ZsYXNoVmFycyc7CgkJcmV0dXJuIHAuY2hpbGRyZW5bc10udmFsdWU7Cgl9CglsZXQgcGxheWVyX3ByID0gW1lvdWt1LFlrT3V0c2l0ZSxBY2Z1bllrLFNvaHVdOy8v5aSE55CG6Zif5YiXCglmdW5jdGlvbiBkb1BsYXllcihlKSB7CgkJaWYgKCFvbmx5VXNlR3B1KSB7CgkJCWZvciAobGV0IHQgb2YgcGxheWVyX3ByKSB7CgkJCQlpZiAodC5tYXRjaFBsYXllcihzd2ZBZGRyKSkgewoJCQkJCXQuc2V0UGxheWVyKGUsIGdldEZsYXNodmFycyhlKSk7CgkJCQkJcmV0dXJuOwoJCQkJfQoJCQl9CgkJfQoJCW9wZW5GbGFzaEdQVShlKTsKCX0KCWZ1bmN0aW9uICRDKG5hbWUsIGF0dHIpIHsKCQlsZXQgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpOwoJCWlmIChhdHRyKSB7CgkJCWZvciAodmFyIGkgaW4gYXR0cikgey8v55SodmFy5L+u5q2jVE3nmoRmb3ItaW7lvqrnjq9CVUcKCQkJCWF0dHIuaGFzT3duUHJvcGVydHkoaSkgJiYgZWwuc2V0QXR0cmlidXRlKGksIGF0dHJbaV0pOwoJCQl9CgkJfQoJCXJldHVybiBlbDsKCX0KCglpZiAod2luZG93LmNocm9tZSkKCQlOb2RlTGlzdC5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IEFycmF5LnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdOwoJaWYgKCRDKCdhJykuY2xpY2sgPT09IHVuZGVmaW5lZCkgewoJCUVsZW1lbnQucHJvdG90eXBlLmNsaWNrID0gZnVuY3Rpb24gKCkgewoJCQkvLyB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50cycpOwoJCQkvLyBlLmluaXRFdmVudCgnY2xpY2snLCB0cnVlLCB0cnVlKTsKCQkJdmFyIGUgPSBuZXcgTW91c2VFdmVudCgiY2xpY2siKTsKCQkJdGhpcy5kaXNwYXRjaEV2ZW50KGUpOwoJCX07Cgl9Cgl3aW5kb3cuVVJMID0gd2luZG93LlVSTCB8fCB3aW5kb3cud2Via2l0VVJMOwoJbGV0IHBhcmVudHMgPSBuZXcgV2Vha1NldCgpOwoKCW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uICgpIHsKCQlmb3IgKGxldCBrIG9mIGRvYy5xdWVyeVNlbGVjdG9yQWxsKCdvYmplY3QsZW1iZWQnKSkgewoJCQlpc0VtYmVkID0gay5tYXRjaGVzKCdlbWJlZCcpOwoJCQlpZiAoaXNFbWJlZCAmJiBrLnBhcmVudE5vZGUubWF0Y2hlcygnb2JqZWN0JykpCgkJCQljb250aW51ZTsKCQkJc3dmQWRkciA9IGlzRW1iZWQgPyBrLnNyYyA6IGsuZGF0YSB8fCBrLmNoaWxkcmVuLm1vdmllLnZhbHVlOwoJCQljb25zb2xlLmxvZyhzd2ZBZGRyKTsKCQkJbGV0IHAgPSBrLnBhcmVudE5vZGU7CgkJCWlmIChwYXJlbnRzLmhhcyhwKSB8fCAhL1wuc3dmKD86JHxcPykvLnRlc3Qoc3dmQWRkcikpCgkJCQljb250aW51ZTsKCQkJcGFyZW50cy5hZGQocCk7CgkJCWlmIChpc1BsYXllcihrKSkgewoJCQkJY29uc29sZS5sb2coaywgc3dmQWRkciwgJyBpcyBwbGF5ZXIhJyk7CgkJCQlkb1BsYXllcihrKTsKCQkJfQoJCX0KCX0pLm9ic2VydmUoYmQsIHsKCQljaGlsZExpc3QgOiB0cnVlLAoJCXN1YnRyZWUgOiB0cnVlCgl9KTsKCWxldCBkaXYgPSAkQygnZGl2Jyk7CgliZC5hcHBlbmRDaGlsZChkaXYpOwoJYmQucmVtb3ZlQ2hpbGQoZGl2KTsKfShkb2N1bWVudCwgZG9jdW1lbnQuYm9keSk7"},{"name":"Baidu Tieba: No Login","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["*://tieba.baidu.com/*","*://www.tieba.com/*"],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1492505332267},"enabled":false,"position":5,"file_url":"https://greasyfork.org/scripts/14151-baidu-tieba-no-login/code/Baidu%20Tieba:%20No%20Login.user.js","uuid":"e5dbaf21-fca1-49be-a143-0d1ce3a257f2","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWVzcGFjZSAgIFZBX2kKLy8gQHZlcnNpb24gICAgIDMuMC4wLjIwMTcwMzEwCi8vIEBncmFudCAgICAgICB1bnNhZmVXaW5kb3cKLy8gQG1hdGNoICAgICAgICo6Ly90aWViYS5iYWlkdS5jb20vKgovLyBAbWF0Y2ggICAgICAgKjovL3d3dy50aWViYS5jb20vKgovLyBAcnVuLWF0ICAgICAgZG9jdW1lbnQtc3RhcnQKLy8gQG5hbWUgICAgICAgIEJhaWR1IFRpZWJhOiBObyBMb2dpbgovLyBAbmFtZTp6aC1DTiAg55m+5bqm6LS05ZCn77ya5LiN55m75b2V5Y2z5Y+v55yL6LS0Ci8vIEBuYW1lOnpoLVRXICDnmb7luqbotLTlkKfvvJrkuI3nmbvlhaXljbPlj6/nnIvosrwKLy8gQGRlc2NyaXB0aW9uIFZpZXcgQmFpZHUgVGllYmEgd2l0aG91dCBsb2dpbi4KLy8gQGRlc2NyaXB0aW9uOnpoLUNOIOeZvuW6pui0tOWQp+eci+i0tO+8iOWMheaLrOalvOS4realvO+8ieaXoOmhu+eZu+W9leOAggovLyBAZGVzY3JpcHRpb246emgtVFcg55m+5bqm6LS05ZCn55yL6LK877yI5YyF5ous5qiT5Lit5qiT77yJ54Sh6aCI55m75YWl44CCCi8vID09L1VzZXJTY3JpcHQ9PQoKdW5zYWZlV2luZG93Lk9iamVjdC5mcmVlemUgPSBudWxsOwoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uIChldmVudCkgewogIHRyeSB7CiAgICB1bnNhZmVXaW5kb3cuUGFnZURhdGEudXNlci5pc19sb2dpbiA9IDE7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIC8vYWxlcnQoZXJyb3IpOwogIH0KfSwgdHJ1ZSk7Cg=="},{"name":"去广告/去除百度推广以及无用功能","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["https://www.baidu.com/s?*","https://m.baidu.com/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1492505332272},"enabled":true,"position":6,"file_url":"https://greasyfork.org/scripts/19759-%E5%8E%BB%E5%B9%BF%E5%91%8A-%E5%8E%BB%E9%99%A4%E7%99%BE%E5%BA%A6%E6%8E%A8%E5%B9%BF%E4%BB%A5%E5%8F%8A%E6%97%A0%E7%94%A8%E5%8A%9F%E8%83%BD/code/%E5%8E%BB%E5%B9%BF%E5%91%8A%E5%8E%BB%E9%99%A4%E7%99%BE%E5%BA%A6%E6%8E%A8%E5%B9%BF%E4%BB%A5%E5%8F%8A%E6%97%A0%E7%94%A8%E5%8A%9F%E8%83%BD.user.js","uuid":"afe87935-ea49-47cd-ab9b-4170bed7611f","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDljrvlub/lkYov5Y676Zmk55m+5bqm5o6o5bm/5Lul5Y+K5peg55So5Yqf6IO9Ci8vIEBuYW1lc3BhY2UgICAgaHR0cDovL3RhbXBlcm1vbmtleS5uZXQvCi8vIEB2ZXJzaW9uICAgICAgMC4xMzAKLy8gQGRlc2NyaXB0aW9uICDljrvmjonnmb7luqbmjqjlub/ku6Xlj4rovqPpuKHmjqjlub8KLy8gQGF1dGhvciAgICAgICBwYXBpcGFwaXBpYSA8c3VuaW5neW9AZ21haWwuY29tPiB0ZWxlZ3JhbTpodHRwczovL3RlbGVncmFtLm1lL3N1bmluZ3lvCi8vIEBtYXRjaCAgICAgICAgaHR0cHM6Ly93d3cuYmFpZHUuY29tL3M/KgovLyBAbWF0Y2ggICAgICAgIGh0dHBzOi8vbS5iYWlkdS5jb20vKgovLyBAZ3JhbnQgICAgICAgIG5vbmUKLy8gPT0vVXNlclNjcmlwdD09CihmdW5jdGlvbigpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIC8vIFlvdXIgY29kZSBoZXJlLi4uCgogICAgdmFyIGxqID0gey8vMeaYr+aJk+W8gAogICAgICAgIHRpbWU6CTUwMDAsLy/lkajmnJ/ml7bpl7Qs5Y2V5L2N5q+r56eSLOW7uuiuriA+PSA1MDAw5q+r56eSKDXnp5IpCiAgICAgICAgaW5mbzoKICAgICAgICB7CiAgICAgICAgICAgIGFkOgkgICAgMSwvL+aOqOW5vwogICAgICAgICAgICByaWdodDogIDEsLy/lj7PovrkKICAgICAgICAgICAgYmFpa2U6CTAsLy/nmb7np5EKICAgICAgICAgICAgaW1nOgkxLC8v5Zu+54mHCiAgICAgICAgICAgIG5ld3M6CTEsLy/mlrDpl7sKICAgICAgICAgICAgdGllYmE6CTEsLy/otLTlkKcKICAgICAgICAgICAgd2luMTA6CTEsLy9XaW4xMAogICAgICAgICAgICB2aWRlbzoJMSwvL+inhumikQogICAgICAgICAgICBjb21pYzoJMSwvL+a8q+eUuwogICAgICAgICAgICBzdG9jazoJMSwvL+iCoeelqAogICAgICAgICAgICBzb2Z0OgkxLC8v6L2v5Lu2CiAgICAgICAgICAgIG1hcDoJMSwvL+WcsOWbvgogICAgICAgICAgICByczoJMCwvL+W6lemDqOaOqOiNkAogICAgICAgICAgICBtX2FkOgkxLy/miYvmnLrmjqjlub8KICAgICAgICB9LAogICAgICAgIHdpZHRoOgk4MDAKICAgICAgICAvKgogICAgICAgIOWkp+S6jui/meS4quWuveW6puWkp+amguWxnuS6jiBwYyDlhbfkvZPoh6rlt7HosIPmlbQKICAgICAgICDlubPmnb/otbAgbS5iYWlkdS5jb20g6L+Z5Liq5Z+f5ZCN5aW95LqGIDpxCiAgICAgICAgKi8KICAgIH07CiAgICBpZihkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoID4gbGoud2lkdGgpCiAgICB7CiAgICAgICAgdmFyIG5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzX3RhYiIpOwogICAgICAgIHZhciBuZXdMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIHZhciBuZXdUZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ0dpdGh1YicpOwogICAgICAgIG5ld0xpbmsuYXBwZW5kQ2hpbGQobmV3VGV4dCk7CiAgICAgICAgbmV3TGluay5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCJodHRwczovL2dpdGh1Yi5jb20vcGFwaXBhcGlwaWEvRGVsZXRlLUJhaWR1LUFEIik7CiAgICAgICAgbmF2LmFwcGVuZENoaWxkKG5ld0xpbmspOwogICAgfQogICAgZnVuY3Rpb24gSWRfZGVsKGlkKXskKGlkKS5yZW1vdmUoKTtjb25zb2xlLmxvZyhpZCArICcgPiBkb25lJyk7fQogICAgZnVuY3Rpb24gYmFpZHVfaV9mdWNrX3lvdSgpewogICAgICAgIGlmKGxqLmluZm8uYWQgPT0gMSAmJiBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoID4gbGoud2lkdGgpewogICAgICAgICAgICAvKgogICAgICAgICAgICDpob3lm7rniZvnmq7pspwgKG1kenoKICAgICAgICAgICAg5aSn5qaC5oCd6Lev5bCx5piv6YCa6L+H5p6a5Li+ZGl25p2l5a6e546w6L+H5rukCiAgICAgICAgICAgICovCiAgICAgICAgICAgIHZhciBmdWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvbnRlbnRfbGVmdCIpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkaXYiKTsKICAgICAgICAgICAgZm9yKHZhciBpID0gMDtpIDwgZnVjay5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgIHZhciBmX2kgPSBmdWNrW2ldOwogICAgICAgICAgICAgICAgdmFyIGZ1Y2tfdGV4dCA9IGZfaS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICBpZihmdWNrX3RleHQuaW5kZXhPZign5bm/5ZGKPC9zcGFuPicpID4gLTEgfHwgZnVja190ZXh0LmluZGV4T2YoJ+WFjei0ueWSqOivoicpID4gLTEgLyp8fCBmdWNrX3RleHQuaW5kZXhPZign6KOF6YC8JykgPiAtMSovKS8v5Y+v5Lul5omL5Yqo5re75Yqg5YWz6ZSu6K+NIOW7uuiuruS4pOS4quWtl+S7peS4igogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBmdWNrX2lkID0gZl9pLmlkOwogICAgICAgICAgICAgICAgICAgIHZhciBmdWNrX3N0eWxlID0gZl9pLnN0eWxlLnZpc2liaWxpdHk7CiAgICAgICAgICAgICAgICAgICAgaWYoZnVja19pZC5pbmRleE9mKCd3cmFwcGVyJykgPiAtMSB8fCBmdWNrX2lkLmluZGV4T2YoJ2NvbnRhaW5lcicpID4gLTEpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAvL+eZveWQjeWNlQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKGZ1Y2tfaWQgPiAwIHx8IGZ1Y2tfc3R5bGUgPT0gJ3Zpc2libGUnKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgSWRfZGVsKCcjJyArIGZ1Y2tfaWQpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnVja19jbGFzc25hbWUgPSBmX2kuY2xhc3NOYW1lOwogICAgICAgICAgICAgICAgICAgICAgICBJZF9kZWwoJy4nICsgZnVja19jbGFzc25hbWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZihsai5pbmZvLnJpZ2h0ID09IDEpe0lkX2RlbCgnI2NvbnRlbnRfcmlnaHQnKTt9Ly/lj7PovrkKICAgICAgICBpZihsai5pbmZvLmJhaWtlID09IDEpe0lkX2RlbCgnLnJlc3VsdC1vcC54cGF0aC1sb2cnKTt9Ly/nmb7np5Eo57uP6aqM44CB57+76K+RKQogICAgICAgIGlmKGxqLmluZm8uaW1nICAgPT0gMSl7SWRfZGVsKCcub3AtaW1nLWNvdmVycy1kZXNrdG9wLWNvbnQnKTt9Ly/lm77niYcKICAgICAgICBpZihsai5pbmZvLm5ld3MgID09IDEpe0lkX2RlbCgnLmMtb2Zmc2V0Jyk7fS8v5paw6Ze7CiAgICAgICAgaWYobGouaW5mby50aWViYSA9PSAxKXtJZF9kZWwoJy5vcC10aWViYS1nZW5lcmFsLW1haW50YWJsZScpO0lkX2RlbCgnLm9wLXRpZWJhLXN0YXItbWFpbnRhYmxlJyk7SWRfZGVsKCcub3AtdGllYmEtZ2VuZXJhbC1sb29rbW9yZS5vcC10aWViYS1nZW5lcmFsLW1haW5wbCcpO30vL+i0tOWQpwogICAgICAgIGlmKGxqLmluZm8ud2luMTAgPT0gMSl7SWRfZGVsKCcub3B0X3NvZnR3YXJlX3Nob3dhcmVhJyk7fS8vV2luMTAKICAgICAgICBpZihsai5pbmZvLnZpZGVvID09IDEpe0lkX2RlbCgnLmMtcm93Lnp4LXR2LXZpZGVvLXRvcGluZm8nKTtJZF9kZWwoJy5vcC16eC1uZXctdHZpZGVvLWRybHQnKTt9Ly/op4bpopEKICAgICAgICBpZihsai5pbmZvLmNvbWljID09IDEpe0lkX2RlbCgnLm9wX2NhcnRvb24uY2xpY2stcGFyZW50LXJld2FyZCcpO30vL+a8q+eUuwogICAgICAgIGlmKGxqLmluZm8uc3RvY2sgPT0gMSl7SWRfZGVsKCcub3Bfc2hhcmVzX3NpbXBsZScpO30vL+iCoeelqAogICAgICAgIGlmKGxqLmluZm8uc29mdCAgPT0gMSl7SWRfZGVsKCcuYy1nYXAtdG9wJyk7fS8v6L2v5Lu2CiAgICAgICAgaWYobGouaW5mby5tYXAgICA9PSAxKXtJZF9kZWwoJy5vcF9tYXBfdHdvcGxhY2VfdGFibGUnKTt9Ly/lnLDlm74KICAgICAgICBpZihsai5pbmZvLnJzICAgPT0gMSl7SWRfZGVsKCcjcnMnKTt9Ly/lupXpg6jmjqjojZAKICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIOWNjuS4veeahOWIhuWJsue6vyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgICAgaWYobGouaW5mby5tX2FkICAgPT0gMSl7SWRfZGVsKCcuZWNfd2lzZV9hZCcpO0lkX2RlbCgnI2VjX3dpc2VfYWR0b3BudW0nKTtJZF9kZWwoJy5lY19hZHZfbGFzdC5lY19yZXNpdGVtX2NhcmQnKTt9Ly/miYvmnLrnq6/lub/lkYoKICAgICAgICBzZXRUaW1lb3V0KGJhaWR1X2lfZnVja195b3UsIGxqLnRpbWUpOwogICAgfQogICAgYmFpZHVfaV9mdWNrX3lvdSgpOwoKfSkoKTs="},{"name":"百度网盘直接下载助手","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://pan.baidu.com/disk/home*","*://yun.baidu.com/disk/home*","*://pan.baidu.com/s/*","*://yun.baidu.com/s/*","*://pan.baidu.com/share/link*","*://yun.baidu.com/share/link*"],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1492505332276},"enabled":false,"position":7,"file_url":"https://greasyfork.org/scripts/23635-%E7%99%BE%E5%BA%A6%E4%BA%91%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD/code/%E7%99%BE%E5%BA%A6%E4%BA%91%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD.user.js","uuid":"27f95f39-35db-42c9-a3bf-a471e0071e39","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDnmb7luqbnvZHnm5jnm7TmjqXkuIvovb3liqnmiYsKLy8gQG5hbWVzcGFjZSAgICB1bmRlZmluZWQKLy8gQHZlcnNpb24gICAgICAwLjkuMjQKLy8gQGRlc2NyaXB0aW9uICDnm7TmjqXkuIvovb3nmb7luqbnvZHnm5jlkoznmb7luqbnvZHnm5jliIbkuqvnmoTmlofku7Ys6YG/5YWN5LiL6L295paH5Lu25pe26LCD55So55m+5bqm572R55uY5a6i5oi356uvLOiOt+WPlue9keebmOaWh+S7tueahOebtOaOpeS4i+i9veWcsOWdgAovLyBAYXV0aG9yICAgICAgIGl2ZXNqYXkKLy8gQG1hdGNoICAgICAgICAqOi8vcGFuLmJhaWR1LmNvbS9kaXNrL2hvbWUqCi8vIEBtYXRjaCAgICAgICAgKjovL3l1bi5iYWlkdS5jb20vZGlzay9ob21lKgovLyBAbWF0Y2ggICAgICAgICo6Ly9wYW4uYmFpZHUuY29tL3MvKgovLyBAbWF0Y2ggICAgICAgICo6Ly95dW4uYmFpZHUuY29tL3MvKgovLyBAbWF0Y2ggICAgICAgICo6Ly9wYW4uYmFpZHUuY29tL3NoYXJlL2xpbmsqCi8vIEBtYXRjaCAgICAgICAgKjovL3l1bi5iYWlkdS5jb20vc2hhcmUvbGluayoKLy8gQHJlcXVpcmUgICAgICBodHRwczovL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktbGF0ZXN0LmpzCi8vIEBydW4tYXQgICAgICAgZG9jdW1lbnQtc3RhcnQKLy8gQGdyYW50ICAgICAgICB1bnNhZmVXaW5kb3cKLy8gQGdyYW50ICAgICAgICBHTV9zZXRDbGlwYm9hcmQKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgdmFyICQgPSAkIHx8IHdpbmRvdy4kOwogICAgdmFyIGxvZ19jb3VudCA9IDE7CiAgICB2YXIgd29yZE1hcEh0dHAgPSB7CiAgICAgICAgJ2xpc3QtZ3JpZC1zd2l0Y2gnOid5dmdiOVhKJywKICAgICAgICAnbGlzdC1zd2l0Y2hlZC1vbic6J2tzYlhabScsCiAgICAgICAgJ2dyaWQtc3dpdGNoZWQtb24nOid0Y2g2VzI1JywKICAgICAgICAnbGlzdC1zd2l0Y2gnOidscmJvOWEnLAogICAgICAgICdncmlkLXN3aXRjaCc6J3hoNnBvTCcsCiAgICAgICAgJ2NoZWNrYm94JzonRU9HZXhmJywKICAgICAgICAnY29sLWl0ZW0nOidReHlmdmcnLAogICAgICAgICdjaGVjayc6J2Z5ZEdOQycsCiAgICAgICAgJ2NoZWNrZWQnOidFenViR2cnLAogICAgICAgICdsaXN0LXZpZXcnOid2ZEFmS01iJywKICAgICAgICAnaXRlbS1hY3RpdmUnOiduZ2I5TzYnLAogICAgICAgICdncmlkLXZpZXcnOidKS3ZISk1iJywKICAgICAgICAnYmFyLXNlYXJjaCc6J09GYVBhTycsCiAgICAgICAgJ2RlZmF1bHQtZG9tJzonZXRyOURQdicsCiAgICAgICAgJ2Jhcic6J2NjanI5RFZlJywKICAgICAgICAnbGlzdC10b29scyc6J1FERE9RQicKICAgIH07CiAgICB2YXIgd29yZE1hcEh0dHBzID0gewogICAgICAgICdsaXN0LWdyaWQtc3dpdGNoJzoncW9ibVhCMXEnLAogICAgICAgICdsaXN0LXN3aXRjaGVkLW9uJzonZXdYbTFlJywKICAgICAgICAnZ3JpZC1zd2l0Y2hlZC1vbic6J2t4aGtYMkVtJywKICAgICAgICAnbGlzdC1zd2l0Y2gnOidydnBYbTYzJywKICAgICAgICAnZ3JpZC1zd2l0Y2gnOidteGdkSmd3dicsCiAgICAgICAgJ2NoZWNrYm94JzonRU9HZXhmJywKICAgICAgICAnY29sLWl0ZW0nOidReHlmdmcnLAogICAgICAgICdjaGVjayc6J2Z5ZEdOQycsCiAgICAgICAgJ2NoZWNrZWQnOidFenViR2cnLAogICAgICAgICdsaXN0LXZpZXcnOid2ZEFmS01iJywKICAgICAgICAnaXRlbS1hY3RpdmUnOidwY2FtWEJSWCcsCiAgICAgICAgJ2dyaWQtdmlldyc6J0pLdkhKTWInLAogICAgICAgICdiYXItc2VhcmNoJzonT0ZhUGFPJywKICAgICAgICAnZGVmYXVsdC1kb20nOidueXp0SnFXRScsCiAgICAgICAgJ2Jhcic6J21rc2VKcUtRJywKICAgICAgICAnbGlzdC10b29scyc6J1FERE9RQicKICAgIH07CiAgICB2YXIgd29yZE1hcCA9IGxvY2F0aW9uLnByb3RvY29sID09ICdodHRwOicgPyB3b3JkTWFwSHR0cCA6IHdvcmRNYXBIdHRwczsKICAgIAogICAgLy9jb25zb2xlLmxvZyh3b3JkTWFwKTsKCiAgICBmdW5jdGlvbiBzbG9nKGMxLGMyLGMzKXsKICAgICAgICBjMSA9IGMxP2MxOicnOwogICAgICAgIGMyID0gYzI/YzI6Jyc7CiAgICAgICAgYzMgPSBjMz9jMzonJzsKICAgICAgICBjb25zb2xlLmxvZygnIycrIGxvZ19jb3VudCsrICsnLUJhaUR1TmV0ZGlza0hlbHBlci1sb2c6JyxjMSxjMixjMyk7CiAgICB9CgogICAgJChmdW5jdGlvbigpewogICAgICAgIHN3aXRjaChkZXRlY3RQYWdlKCkpewogICAgICAgICAgICBjYXNlICdkaXNrJzoKICAgICAgICAgICAgICAgIHZhciBwYW5IZWxwZXIgPSBuZXcgUGFuSGVscGVyKCk7CiAgICAgICAgICAgICAgICBwYW5IZWxwZXIuaW5pdCgpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICBjYXNlICdzaGFyZSc6CiAgICAgICAgICAgIGNhc2UgJ3MnOgogICAgICAgICAgICAgICAgdmFyIHBhblNoYXJlSGVscGVyID0gbmV3IFBhblNoYXJlSGVscGVyKCk7CiAgICAgICAgICAgICAgICBwYW5TaGFyZUhlbHBlci5pbml0KCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgfSk7CgogICAgLy/nvZHnm5jpobXpnaLnmoTkuIvovb3liqnmiYsKICAgIGZ1bmN0aW9uIFBhbkhlbHBlcigpewogICAgICAgIHZhciB5dW5EYXRhLHNpZ24sdGltZXN0YW1wLGJkc3Rva2VuLGxvZ2lkLGZpZF9saXN0OwogICAgICAgIHZhciBmaWxlTGlzdD1bXSxzZWxlY3RGaWxlTGlzdD1bXSxiYXRjaExpbmtMaXN0PVtdLGJhdGNoTGlua0xpc3RBbGw9W10sbGlua0xpc3Q9W10sCiAgICAgICAgICAgIGxpc3RfZ3JpZF9zdGF0dXM9J2xpc3QnOwogICAgICAgIHZhciBvYnNlcnZlcixjdXJyZW50UGFnZSxjdXJyZW50UGF0aCxjdXJyZW50Q2F0ZWdvcnksZGlhbG9nLHNlYXJjaEtleTsKICAgICAgICB2YXIgcGFuQVBJVXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgbG9jYXRpb24uaG9zdCArICIvYXBpLyI7CiAgICAgICAgdmFyIHJlc3RBUElVcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArICIvL3Bjcy5iYWlkdS5jb20vcmVzdC8yLjAvcGNzLyI7CiAgICAgICAgdmFyIGNsaWVudEFQSVVybCA9IGxvY2F0aW9uLnByb3RvY29sICsgIi8vZC5wY3MuYmFpZHUuY29tL3Jlc3QvMi4wL3Bjcy8iOwoKICAgICAgICB0aGlzLmluaXQgPSBmdW5jdGlvbigpewogICAgICAgICAgICB5dW5EYXRhID0gdW5zYWZlV2luZG93Lnl1bkRhdGE7CiAgICAgICAgICAgIHNsb2coJ3l1bkRhdGE6Jyx5dW5EYXRhKTsKICAgICAgICAgICAgaWYoeXVuRGF0YSA9PT0gdW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgIHNsb2coJ+mhtemdouacquato+W4uOWKoOi9ve+8jOaIluiAheeZvuW6puW3sue7j+abtOaWsO+8gScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGluaXRQYXJhbXMoKTsKICAgICAgICAgICAgcmVnaXN0ZXJFdmVudExpc3RlbmVyKCk7CiAgICAgICAgICAgIGNyZWF0ZU9ic2VydmVyKCk7CiAgICAgICAgICAgIGFkZEJ1dHRvbigpOwogICAgICAgICAgICBjcmVhdGVJZnJhbWUoKTsKICAgICAgICAgICAgZGlhbG9nID0gbmV3IERpYWxvZyh7YWRkQ29weTp0cnVlfSk7CgogICAgICAgICAgICBzbG9nKCfnvZHnm5jnm7TmjqXkuIvovb3liqnmiYvliqDovb3miJDlip/vvIEnKTsKICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBpbml0UGFyYW1zKCl7CiAgICAgICAgICAgIHNpZ24gPSBnZXRTaWduKCk7CiAgICAgICAgICAgIHRpbWVzdGFtcCA9IGdldFRpbWVzdGFtcCgpOwogICAgICAgICAgICBiZHN0b2tlbiA9IGdldEJEU3Rva2VuKCk7CiAgICAgICAgICAgIGxvZ2lkID0gZ2V0TG9nSUQoKTsKICAgICAgICAgICAgY3VycmVudFBhZ2UgPSBnZXRDdXJyZW50UGFnZSgpOwogICAgICAgICAgICBzbG9nKCdDdXJyZW50IGRpc3BsYXkgbW9kZTonLGN1cnJlbnRQYWdlKTsKCiAgICAgICAgICAgIGlmKGN1cnJlbnRQYWdlID09ICdsaXN0JykKICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoID0gZ2V0UGF0aCgpOwoKICAgICAgICAgICAgaWYoY3VycmVudFBhZ2UgPT0gJ2NhdGVnb3J5JykKICAgICAgICAgICAgICAgIGN1cnJlbnRDYXRlZ29yeSA9IGdldENhdGVnb3J5KCk7CgogICAgICAgICAgICBpZihjdXJyZW50UGFnZSA9PSAnc2VhcmNoJykKICAgICAgICAgICAgICAgIHNlYXJjaEtleSA9IGdldFNlYXJjaEtleSgpOwoKICAgICAgICAgICAgcmVmcmVzaExpc3RHcmlkU3RhdHVzKCk7CiAgICAgICAgICAgIHJlZnJlc2hGaWxlTGlzdCgpOwogICAgICAgICAgICByZWZyZXNoU2VsZWN0TGlzdCgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVmcmVzaEZpbGVMaXN0KCl7CiAgICAgICAgICAgIGlmIChjdXJyZW50UGFnZSA9PSAnbGlzdCcpIHsKICAgICAgICAgICAgICAgIGZpbGVMaXN0ID0gZ2V0RmlsZUxpc3QoKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50UGFnZSA9PSAnY2F0ZWdvcnknKXsKICAgICAgICAgICAgICAgIGZpbGVMaXN0ID0gZ2V0Q2F0ZWdvcnlGaWxlTGlzdCgpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRQYWdlID09ICdzZWFyY2gnKSB7CiAgICAgICAgICAgICAgICBmaWxlTGlzdCA9IGdldFNlYXJjaEZpbGVMaXN0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlZnJlc2hTZWxlY3RMaXN0KCl7CiAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0ID0gW107CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZWZyZXNoTGlzdEdyaWRTdGF0dXMoKXsKICAgICAgICAgICAgbGlzdF9ncmlkX3N0YXR1cyA9IGdldExpc3RHcmlkU3RhdHVzKCk7CiAgICAgICAgfQoKICAgICAgICAvL+iOt+WPluW9k+WJjeeahOinhuWbvuaooeW8jwogICAgICAgIGZ1bmN0aW9uIGdldExpc3RHcmlkU3RhdHVzKCl7CiAgICAgICAgICAgIC8vcmV0dXJuICQoJ2Rpdi5saXN0LWdyaWQtc3dpdGNoJykuaGFzQ2xhc3MoJ2xpc3Qtc3dpdGNoZWQtb24nKT8nbGlzdCc6KCQoJ2Rpdi5saXN0LWdyaWQtc3dpdGNoJykuaGFzQ2xhc3MoJ2dyaWQtc3dpdGNoZWQtb24nKT8nZ3JpZCc6J2xpc3QnKTsKICAgICAgICAgICAgLy9yZXR1cm4gJCgnZGl2Lml0aVd6UFknKS5oYXNDbGFzcygna3VkdFdZNDYnKT8nbGlzdCc6KCQoJ2Rpdi5pdGlXelBZJykuaGFzQ2xhc3MoJ255dEFMOXcnKT8nZ3JpZCc6J2xpc3QnKTsKICAgICAgICAgICAgcmV0dXJuICQoJ2Rpdi4nK3dvcmRNYXBbJ2xpc3QtZ3JpZC1zd2l0Y2gnXSkuaGFzQ2xhc3Mod29yZE1hcFsnbGlzdC1zd2l0Y2hlZC1vbiddKT8nbGlzdCc6KCQoJ2Rpdi4nK3dvcmRNYXBbJ2xpc3QtZ3JpZC1zd2l0Y2gnXSkuaGFzQ2xhc3Mod29yZE1hcFsnZ3JpZC1zd2l0Y2hlZC1vbiddKT8nZ3JpZCc6J2xpc3QnKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyRXZlbnRMaXN0ZW5lcigpewogICAgICAgICAgICByZWdpc3Rlckhhc2hDaGFuZ2UoKTsKICAgICAgICAgICAgcmVnaXN0ZXJMaXN0R3JpZFN0YXR1cygpOwogICAgICAgICAgICByZWdpc3RlckNoZWNrYm94KCk7CiAgICAgICAgICAgIHJlZ2lzdGVyQWxsQ2hlY2tib3goKTsKICAgICAgICAgICAgcmVnaXN0ZXJGaWxlU2VsZWN0KCk7CiAgICAgICAgfQoKICAgICAgICAvL+ebkeinhuWcsOWdgOagjyPmoIfnrb7nmoTlj5jljJYKICAgICAgICBmdW5jdGlvbiByZWdpc3Rlckhhc2hDaGFuZ2UoKXsKICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgcmVmcmVzaExpc3RHcmlkU3RhdHVzKCk7CiAgICAgICAgICAgICAgICBpZihnZXRDdXJyZW50UGFnZSgpID09ICdsaXN0JykgewogICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRQYWdlID09IGdldEN1cnJlbnRQYWdlKCkpewogICAgICAgICAgICAgICAgICAgICAgICBpZihjdXJyZW50UGF0aCA9PSBnZXRQYXRoKCkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhdGggPSBnZXRQYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoRmlsZUxpc3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hTZWxlY3RMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZSA9IGdldEN1cnJlbnRQYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoID0gZ2V0UGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoRmlsZUxpc3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFNlbGVjdExpc3QoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGdldEN1cnJlbnRQYWdlKCkgPT0gJ2NhdGVnb3J5JykgewogICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRQYWdlID09IGdldEN1cnJlbnRQYWdlKCkpewogICAgICAgICAgICAgICAgICAgICAgICBpZihjdXJyZW50Q2F0ZWdvcnkgPT0gZ2V0Q2F0ZWdvcnkoKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZSA9IGdldEN1cnJlbnRQYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2F0ZWdvcnkgPSBnZXRDYXRlZ29yeSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaEZpbGVMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoU2VsZWN0TGlzdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2UgPSBnZXRDdXJyZW50UGFnZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2F0ZWdvcnkgPSBnZXRDYXRlZ29yeSgpOwogICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoRmlsZUxpc3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFNlbGVjdExpc3QoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoZ2V0Q3VycmVudFBhZ2UoKSA9PSAnc2VhcmNoJykgewogICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRQYWdlID09IGdldEN1cnJlbnRQYWdlKCkpewogICAgICAgICAgICAgICAgICAgICAgICBpZihzZWFyY2hLZXkgPT0gZ2V0U2VhcmNoS2V5KCkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2UgPSBnZXRDdXJyZW50UGFnZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoS2V5ID0gZ2V0U2VhcmNoS2V5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoRmlsZUxpc3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hTZWxlY3RMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZSA9IGdldEN1cnJlbnRQYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaEtleSA9IGdldFNlYXJjaEtleSgpOwogICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoRmlsZUxpc3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFNlbGVjdExpc3QoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy/nm5Hop4bop4blm77lj5jljJYKICAgICAgICBmdW5jdGlvbiByZWdpc3Rlckxpc3RHcmlkU3RhdHVzKCl7CiAgICAgICAgICAgIC8vdmFyICRhX2xpc3QgPSAkKCdhW25vZGUtdHlwZT1saXN0LXN3aXRjaF0nKTsKICAgICAgICAgICAgLy92YXIgJGFfbGlzdCA9ICQoJ2Fbbm9kZS10eXBlPWVlcFd6a2tdJyk7CiAgICAgICAgICAgIHZhciAkYV9saXN0ID0gJCgnYVtub2RlLXR5cGU9Jyt3b3JkTWFwWydsaXN0LXN3aXRjaCddKyddJyk7CiAgICAgICAgICAgICRhX2xpc3QuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGxpc3RfZ3JpZF9zdGF0dXMgPSAnbGlzdCc7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy92YXIgJGFfZ3JpZCA9ICQoJ2Fbbm9kZS10eXBlPWdyaWQtc3dpdGNoXScpOwogICAgICAgICAgICAvL3ZhciAkYV9ncmlkID0gJCgnYVtub2RlLXR5cGU9eXRudldZN3FdJyk7CiAgICAgICAgICAgIHZhciAkYV9ncmlkID0gJCgnYVtub2RlLXR5cGU9Jyt3b3JkTWFwWydncmlkLXN3aXRjaCddKyddJyk7CiAgICAgICAgICAgICRhX2dyaWQuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGxpc3RfZ3JpZF9zdGF0dXMgPSAnZ3JpZCc7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy/mlofku7bpgInmi6nmoYYKICAgICAgICBmdW5jdGlvbiByZWdpc3RlckNoZWNrYm94KCl7CiAgICAgICAgICAgIC8vdmFyICRjaGVja2JveCA9ICQoJ3NwYW4uY2hlY2tib3gnKTsKICAgICAgICAgICAgLy92YXIgJGNoZWNrYm94ID0gJCgnc3Bhbi5FT0dleGYnKTsKICAgICAgICAgICAgdmFyICRjaGVja2JveCA9ICQoJ3NwYW4uJyt3b3JkTWFwWydjaGVja2JveCddKTsKICAgICAgICAgICAgJGNoZWNrYm94LmVhY2goZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmJpbmQoJ2NsaWNrJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICB2YXIgJHBhcmVudCA9ICQodGhpcykucGFyZW50KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVuYW1lOwogICAgICAgICAgICAgICAgICAgIGlmKGxpc3RfZ3JpZF9zdGF0dXMgPT0gJ2xpc3QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vZmlsZW5hbWUgPSAkKCdkaXYuZmlsZS1uYW1lIGRpdi50ZXh0IGEnLCRwYXJlbnQpLmF0dHIoJ3RpdGxlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gJCgnZGl2LmZpbGUtbmFtZSBkaXYudGV4dCBhJywkcGFyZW50KS5hdHRyKCd0aXRsZScpOwogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGxpc3RfZ3JpZF9zdGF0dXMgPT0gJ2dyaWQnKXsKICAgICAgICAgICAgICAgICAgICAgICAgLy9maWxlbmFtZSA9ICQoJ2Rpdi5maWxlLW5hbWUgYScsJHBhcmVudCkuYXR0cigndGl0bGUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAkKCdkaXYuZmlsZS1uYW1lIGEnLCRwYXJlbnQpLmF0dHIoJ3RpdGxlJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vaWYoJHBhcmVudC5oYXNDbGFzcygnaXRlbS1hY3RpdmUnKSl7CiAgICAgICAgICAgICAgICAgICAgLy9pZigkcGFyZW50Lmhhc0NsYXNzKCdwcld6WEEnKSl7CiAgICAgICAgICAgICAgICAgICAgaWYoJHBhcmVudC5oYXNDbGFzcyh3b3JkTWFwWydpdGVtLWFjdGl2ZSddKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNsb2coJ+WPlua2iOmAieS4reaWh+S7tu+8micrZmlsZW5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDtpPHNlbGVjdEZpbGVMaXN0Lmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2VsZWN0RmlsZUxpc3RbaV0uZmlsZW5hbWUgPT0gZmlsZW5hbWUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0LnNwbGljZShpLDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIHNsb2coJ+mAieS4reaWh+S7tjonK2ZpbGVuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGZpbGVMaXN0LGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbWVudC5zZXJ2ZXJfZmlsZW5hbWUgPT0gZmlsZW5hbWUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOmVsZW1lbnQuc2VydmVyX2ZpbGVuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOmVsZW1lbnQucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnNfaWQ6ZWxlbWVudC5mc19pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNkaXI6ZWxlbWVudC5pc2RpcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0RmlsZUxpc3QucHVzaChvYmopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1bnJlZ2lzdGVyQ2hlY2tib3goKXsKICAgICAgICAgICAgLy92YXIgJGNoZWNrYm94ID0gJCgnc3Bhbi5jaGVja2JveCcpOwogICAgICAgICAgICAvL3ZhciAkY2hlY2tib3ggPSAkKCdzcGFuLkVPR2V4ZicpOwogICAgICAgICAgICB2YXIgJGNoZWNrYm94ID0gJCgnc3Bhbi4nK3dvcmRNYXBbJ2NoZWNrYm94J10pOwogICAgICAgICAgICAkY2hlY2tib3guZWFjaChmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICQoZWxlbWVudCkudW5iaW5kKCdjbGljaycpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8v5YWo6YCJ5qGGCiAgICAgICAgZnVuY3Rpb24gcmVnaXN0ZXJBbGxDaGVja2JveCgpewogICAgICAgICAgICAvL3ZhciAkY2hlY2tib3ggPSAkKCdkaXYuY29sLWl0ZW0uY2hlY2snKTsKICAgICAgICAgICAgLy92YXIgJGNoZWNrYm94ID0gJCgnZGl2LlF4eWZ2Zy5meWRHTkMnKTsKICAgICAgICAgICAgdmFyICRjaGVja2JveCA9ICQoJ2Rpdi4nK3dvcmRNYXBbJ2NvbC1pdGVtJ10rJy4nK3dvcmRNYXBbJ2NoZWNrJ10pOwogICAgICAgICAgICAkY2hlY2tib3guZWFjaChmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICQoZWxlbWVudCkuYmluZCgnY2xpY2snLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIHZhciAkcGFyZW50ID0gJCh0aGlzKS5wYXJlbnQoKTsKICAgICAgICAgICAgICAgICAgICAvL2lmKCRwYXJlbnQuaGFzQ2xhc3MoJ2NoZWNrZWQnKSl7CiAgICAgICAgICAgICAgICAgICAgLy9pZigkcGFyZW50Lmhhc0NsYXNzKCdFenViR2cnKSl7CiAgICAgICAgICAgICAgICAgICAgaWYoJHBhcmVudC5oYXNDbGFzcyh3b3JkTWFwWydjaGVja2VkJ10pKXsKICAgICAgICAgICAgICAgICAgICAgICAgc2xvZygn5Y+W5raI5YWo6YCJJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2xvZygn5YWo6YOo6YCJ5LitJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaChmaWxlTGlzdCxmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6ZWxlbWVudC5zZXJ2ZXJfZmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDplbGVtZW50LnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnNfaWQ6ZWxlbWVudC5mc19pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc2RpcjplbGVtZW50LmlzZGlyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0RmlsZUxpc3QucHVzaChvYmopOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1bnJlZ2lzdGVyQWxsQ2hlY2tib3goKXsKICAgICAgICAgICAgLy92YXIgJGNoZWNrYm94ID0gJCgnZGl2LmNvbC1pdGVtLmNoZWNrJyk7CiAgICAgICAgICAgIC8vdmFyICRjaGVja2JveCA9ICQoJ2Rpdi5ReHlmdmcuZnlkR05DJyk7CiAgICAgICAgICAgIHZhciAkY2hlY2tib3ggPSAkKCdkaXYuJyt3b3JkTWFwWydjb2wtaXRlbSddKycuJyt3b3JkTWFwWydjaGVjayddKTsKICAgICAgICAgICAgJGNoZWNrYm94LmVhY2goZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLnVuYmluZCgnY2xpY2snKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvL+WNleS4quaWh+S7tumAieS4re+8jOeCueWHu+aWh+S7tuS4jeaYr+eCueWHu+mAieS4reahhu+8jOS8muWPqumAieS4reivpeaWh+S7tgogICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyRmlsZVNlbGVjdCgpewogICAgICAgICAgICAvL3ZhciAkZGQgPSAkKCdkaXYubGlzdC12aWV3IGRkJyk7CiAgICAgICAgICAgIC8vdmFyICRkZCA9ICQoJ2Rpdi52ZEFmS01iIGRkJyk7CiAgICAgICAgICAgIHZhciAkZGQgPSAkKCdkaXYuJyt3b3JkTWFwWydsaXN0LXZpZXcnXSsnIGRkJyk7CiAgICAgICAgICAgICRkZC5lYWNoKGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgJChlbGVtZW50KS5iaW5kKCdjbGljaycsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVOYW1lID0gZS50YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgICBpZihub2RlTmFtZSAhPSAnc3BhbicgJiYgbm9kZU5hbWUgIT0gJ2EnICYmIG5vZGVOYW1lICE9ICdlbScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2xvZygnc2hpZnRLZXk6JytlLnNoaWZ0S2V5KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWUuc2hpZnRLZXkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0RmlsZUxpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlbmFtZSA9ICQoJ2Rpdi5maWxlLW5hbWUgZGl2LnRleHQgYScsJCh0aGlzKSkuYXR0cigndGl0bGUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsb2coJ+mAieS4reaWh+S7tu+8micgKyBmaWxlbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goZmlsZUxpc3QsZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbWVudC5zZXJ2ZXJfZmlsZW5hbWUgPT0gZmlsZW5hbWUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6ZWxlbWVudC5zZXJ2ZXJfZmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOmVsZW1lbnQucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZzX2lkOmVsZW1lbnQuZnNfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc2RpcjplbGVtZW50LmlzZGlyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0LnB1c2gob2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RGaWxlTGlzdCA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy92YXIgJGRkX3NlbGVjdCA9ICQoJ2Rpdi5saXN0LXZpZXcgZGQuaXRlbS1hY3RpdmUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFyICRkZF9zZWxlY3QgPSAkKCdkaXYudmRBZktNYiBkZC5wcld6WEEnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZGRfc2VsZWN0ID0gJCgnZGl2Licrd29yZE1hcFsnbGlzdC12aWV3J10rJyBkZC4nK3dvcmRNYXBbJ2l0ZW0tYWN0aXZlJ10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKCRkZF9zZWxlY3QsZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVuYW1lID0gJCgnZGl2LmZpbGUtbmFtZSBkaXYudGV4dCBhJywkKGVsZW1lbnQpKS5hdHRyKCd0aXRsZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsb2coJ+mAieS4reaWh+S7tu+8micgKyBmaWxlbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGZpbGVMaXN0LGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbGVtZW50LnNlcnZlcl9maWxlbmFtZSA9PSBmaWxlbmFtZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOmVsZW1lbnQuc2VydmVyX2ZpbGVuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6ZWxlbWVudC5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZzX2lkOmVsZW1lbnQuZnNfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNkaXI6ZWxlbWVudC5pc2RpcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0LnB1c2gob2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1bnJlZ2lzdGVyRmlsZVNlbGVjdCgpewogICAgICAgICAgICAvL3ZhciAkZGQgPSAkKCdkaXYubGlzdC12aWV3IGRkJyk7CiAgICAgICAgICAgIC8vdmFyICRkZCA9ICQoJ2Rpdi52ZEFmS01iIGRkJyk7CiAgICAgICAgICAgIHZhciAkZGQgPSAkKCdkaXYuJyt3b3JkTWFwWydsaXN0LXZpZXcnXSsnIGRkJyk7CiAgICAgICAgICAgICRkZC5lYWNoKGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgJChlbGVtZW50KS51bmJpbmQoJ2NsaWNrJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy/nm5Hop4bmlofku7bliJfooajmmL7npLrlj5jljJYKICAgICAgICBmdW5jdGlvbiBjcmVhdGVPYnNlcnZlcigpewogICAgICAgICAgICB2YXIgTXV0YXRpb25PYnNlcnZlciA9IHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyOwogICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgICdjaGlsZExpc3QnOiB0cnVlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24obXV0YXRpb25zKXsKICAgICAgICAgICAgICAgIHVucmVnaXN0ZXJDaGVja2JveCgpOwogICAgICAgICAgICAgICAgdW5yZWdpc3RlckFsbENoZWNrYm94KCk7CiAgICAgICAgICAgICAgICB1bnJlZ2lzdGVyRmlsZVNlbGVjdCgpOwogICAgICAgICAgICAgICAgcmVnaXN0ZXJDaGVja2JveCgpOwogICAgICAgICAgICAgICAgcmVnaXN0ZXJBbGxDaGVja2JveCgpOwogICAgICAgICAgICAgICAgcmVnaXN0ZXJGaWxlU2VsZWN0KCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAgICAgLy92YXIgbGlzdF92aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpc3QtdmlldycpOwogICAgICAgICAgICAvL3ZhciBncmlkX3ZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ3JpZC12aWV3Jyk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvL3ZhciBsaXN0X3ZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmRBZktNYicpOwogICAgICAgICAgICAvL3ZhciBncmlkX3ZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuSkt2SEpNYicpOwogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIGxpc3RfdmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nK3dvcmRNYXBbJ2xpc3QtdmlldyddKTsKICAgICAgICAgICAgdmFyIGdyaWRfdmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nK3dvcmRNYXBbJ2dyaWQtdmlldyddKTsKCiAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUobGlzdF92aWV3LG9wdGlvbnMpOwogICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGdyaWRfdmlldyxvcHRpb25zKTsKICAgICAgICB9CgogICAgICAgIC8v5re75Yqg5Yqp5omL5oyJ6ZKuCiAgICAgICAgZnVuY3Rpb24gYWRkQnV0dG9uKCl7CiAgICAgICAgICAgIC8vJCgnZGl2LmJhci1zZWFyY2gnKS5jc3MoJ3dpZHRoJywnMTglJyk7Ly/kv67mlLnmkJzntKLmoYbnmoTlrr3luqbvvIzpgb/lhY3pga7mjKEKICAgICAgICAgICAgLy8kKCdkaXYuT0ZhUGFPJykuY3NzKCd3aWR0aCcsJzE4JScpOwogICAgICAgICAgICAkKCdkaXYuJyt3b3JkTWFwWydiYXItc2VhcmNoJ10pLmNzcygnd2lkdGgnLCcxOCUnKTsKICAgICAgICAgICAgdmFyICRkcm9wZG93bmJ1dHRvbiA9ICQoJzxzcGFuIGNsYXNzPSJnLWRyb3Bkb3duLWJ1dHRvbiI+PC9zcGFuPicpOwogICAgICAgICAgICB2YXIgJGRyb3Bkb3duYnV0dG9uX2EgPSAkKCc8YSBjbGFzcz0iZy1idXR0b24iIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPjxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1yaWdodCI+PGVtIGNsYXNzPSJpY29uIGljb24tZG93bmxvYWQiIHRpdGxlPSLnmb7luqbnvZHnm5jkuIvovb3liqnmiYsiPjwvZW0+PHNwYW4gY2xhc3M9InRleHQiIHN0eWxlPSJ3aWR0aDogYXV0bzsiPuS4i+i9veWKqeaJizwvc3Bhbj48L3NwYW4+PC9hPicpOwogICAgICAgICAgICB2YXIgJGRyb3Bkb3duYnV0dG9uX3NwYW4gPSAkKCc8c3BhbiBjbGFzcz0ibWVudSIgc3R5bGU9IndpZHRoOjk2cHgiPjwvc3Bhbj4nKTsKCiAgICAgICAgICAgIHZhciAkZGlyZWN0YnV0dG9uID0gJCgnPHNwYW4gY2xhc3M9ImctYnV0dG9uLW1lbnUiIHN0eWxlPSJkaXNwbGF5OmJsb2NrIj48L3NwYW4+Jyk7CiAgICAgICAgICAgIHZhciAkZGlyZWN0YnV0dG9uX3NwYW4gPSAkKCc8c3BhbiBjbGFzcz0iZy1kcm9wZG93bi1idXR0b24gZy1kcm9wZG93bi1idXR0b24tc2Vjb25kIiBtZW51bGV2ZWw9IjIiPjwvc3Bhbj4nKTsKICAgICAgICAgICAgdmFyICRkaXJlY3RidXR0b25fYSA9ICQoJzxhIGNsYXNzPSJnLWJ1dHRvbiIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+PHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0Ij48c3BhbiBjbGFzcz0idGV4dCIgc3R5bGU9IndpZHRoOmF1dG8iPuebtOaOpeS4i+i9vTwvc3Bhbj48L3NwYW4+PC9hPicpOwogICAgICAgICAgICB2YXIgJGRpcmVjdGJ1dHRvbl9tZW51ID0gJCgnPHNwYW4gY2xhc3M9Im1lbnUiIHN0eWxlPSJ3aWR0aDoxMjBweDtsZWZ0Ojc5cHgiPjwvc3Bhbj4nKTsKICAgICAgICAgICAgdmFyICRkaXJlY3RidXR0b25fZG93bmxvYWRfYnV0dG9uID0gJCgnPGEgaWQ9ImRvd25sb2FkLWRpcmVjdCIgY2xhc3M9ImctYnV0dG9uLW1lbnUiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuS4i+i9vTwvYT4nKTsKICAgICAgICAgICAgdmFyICRkaXJlY3RidXR0b25fbGlua19idXR0b24gPSAkKCc8YSBpZD0ibGluay1kaXJlY3QiIGNsYXNzPSJnLWJ1dHRvbi1tZW51IiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij7mmL7npLrpk77mjqU8L2E+Jyk7CiAgICAgICAgICAgIHZhciAkZGlyZWN0YnV0dG9uX2JhdGNoaHR0cGxpbmtfYnV0dG9uID0gJCgnPGEgaWQ9ImJhdGNoaHR0cGxpbmstZGlyZWN0IiBjbGFzcz0iZy1idXR0b24tbWVudSIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+5om56YeP6ZO+5o6lKEhUVFApPC9hPicpOwogICAgICAgICAgICB2YXIgJGRpcmVjdGJ1dHRvbl9iYXRjaGh0dHBzbGlua19idXR0b24gPSAkKCc8YSBpZD0iYmF0Y2hodHRwc2xpbmstZGlyZWN0IiBjbGFzcz0iZy1idXR0b24tbWVudSIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+5om56YeP6ZO+5o6lKEhUVFBTKTwvYT4nKTsKICAgICAgICAgICAgJGRpcmVjdGJ1dHRvbl9tZW51LmFwcGVuZCgkZGlyZWN0YnV0dG9uX2Rvd25sb2FkX2J1dHRvbikuYXBwZW5kKCRkaXJlY3RidXR0b25fbGlua19idXR0b24pLmFwcGVuZCgkZGlyZWN0YnV0dG9uX2JhdGNoaHR0cGxpbmtfYnV0dG9uKS5hcHBlbmQoJGRpcmVjdGJ1dHRvbl9iYXRjaGh0dHBzbGlua19idXR0b24pOwogICAgICAgICAgICAkZGlyZWN0YnV0dG9uLmFwcGVuZCgkZGlyZWN0YnV0dG9uX3NwYW4uYXBwZW5kKCRkaXJlY3RidXR0b25fYSkuYXBwZW5kKCRkaXJlY3RidXR0b25fbWVudSkpOwogICAgICAgICAgICAkZGlyZWN0YnV0dG9uLmhvdmVyKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAkZGlyZWN0YnV0dG9uX3NwYW4udG9nZ2xlQ2xhc3MoJ2J1dHRvbi1vcGVuJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkZGlyZWN0YnV0dG9uX2Rvd25sb2FkX2J1dHRvbi5jbGljayhkb3dubG9hZENsaWNrKTsKICAgICAgICAgICAgJGRpcmVjdGJ1dHRvbl9saW5rX2J1dHRvbi5jbGljayhsaW5rQ2xpY2spOwogICAgICAgICAgICAkZGlyZWN0YnV0dG9uX2JhdGNoaHR0cGxpbmtfYnV0dG9uLmNsaWNrKGJhdGNoQ2xpY2spOwogICAgICAgICAgICAkZGlyZWN0YnV0dG9uX2JhdGNoaHR0cHNsaW5rX2J1dHRvbi5jbGljayhiYXRjaENsaWNrKTsKCiAgICAgICAgICAgIHZhciAkYXBpYnV0dG9uID0gJCgnPHNwYW4gY2xhc3M9ImctYnV0dG9uLW1lbnUiIHN0eWxlPSJkaXNwbGF5OmJsb2NrIj48L3NwYW4+Jyk7CiAgICAgICAgICAgIHZhciAkYXBpYnV0dG9uX3NwYW4gPSAkKCc8c3BhbiBjbGFzcz0iZy1kcm9wZG93bi1idXR0b24gZy1kcm9wZG93bi1idXR0b24tc2Vjb25kIiBtZW51bGV2ZWw9IjIiPjwvc3Bhbj4nKTsKICAgICAgICAgICAgdmFyICRhcGlidXR0b25fYSA9ICQoJzxhIGNsYXNzPSJnLWJ1dHRvbiIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+PHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0Ij48c3BhbiBjbGFzcz0idGV4dCIgc3R5bGU9IndpZHRoOmF1dG8iPkFQSeS4i+i9vTwvc3Bhbj48L3NwYW4+PC9hPicpOwogICAgICAgICAgICB2YXIgJGFwaWJ1dHRvbl9tZW51ID0gJCgnPHNwYW4gY2xhc3M9Im1lbnUiIHN0eWxlPSJ3aWR0aDoxMjBweDtsZWZ0Ojc3cHgiPjwvc3Bhbj4nKTsKICAgICAgICAgICAgdmFyICRhcGlidXR0b25fZG93bmxvYWRfYnV0dG9uID0gJCgnPGEgaWQ9ImRvd25sb2FkLWFwaSIgY2xhc3M9ImctYnV0dG9uLW1lbnUiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuS4i+i9vTwvYT4nKTsKICAgICAgICAgICAgdmFyICRhcGlidXR0b25fbGlua19idXR0b24gPSAkKCc8YSBpZD0iaHR0cGxpbmstYXBpIiBjbGFzcz0iZy1idXR0b24tbWVudSIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+5pi+56S66ZO+5o6lPC9hPicpOwogICAgICAgICAgICB2YXIgJGFwaWJ1dHRvbl9iYXRjaGh0dHBsaW5rX2J1dHRvbiA9ICQoJzxhIGlkPSJiYXRjaGh0dHBsaW5rLWFwaSIgY2xhc3M9ImctYnV0dG9uLW1lbnUiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuaJuemHj+mTvuaOpShIVFRQKTwvYT4nKTsKICAgICAgICAgICAgdmFyICRhcGlidXR0b25fYmF0Y2hodHRwc2xpbmtfYnV0dG9uID0gJCgnPGEgaWQ9ImJhdGNoaHR0cHNsaW5rLWFwaSIgY2xhc3M9ImctYnV0dG9uLW1lbnUiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuaJuemHj+mTvuaOpShIVFRQUyk8L2E+Jyk7CiAgICAgICAgICAgICRhcGlidXR0b25fbWVudS5hcHBlbmQoJGFwaWJ1dHRvbl9kb3dubG9hZF9idXR0b24pLmFwcGVuZCgkYXBpYnV0dG9uX2xpbmtfYnV0dG9uKS5hcHBlbmQoJGFwaWJ1dHRvbl9iYXRjaGh0dHBsaW5rX2J1dHRvbikuYXBwZW5kKCRhcGlidXR0b25fYmF0Y2hodHRwc2xpbmtfYnV0dG9uKTsKICAgICAgICAgICAgJGFwaWJ1dHRvbi5hcHBlbmQoJGFwaWJ1dHRvbl9zcGFuLmFwcGVuZCgkYXBpYnV0dG9uX2EpLmFwcGVuZCgkYXBpYnV0dG9uX21lbnUpKTsKICAgICAgICAgICAgJGFwaWJ1dHRvbi5ob3ZlcihmdW5jdGlvbigpewogICAgICAgICAgICAgICAgJGFwaWJ1dHRvbl9zcGFuLnRvZ2dsZUNsYXNzKCdidXR0b24tb3BlbicpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgJGFwaWJ1dHRvbl9kb3dubG9hZF9idXR0b24uY2xpY2soZG93bmxvYWRDbGljayk7CiAgICAgICAgICAgICRhcGlidXR0b25fbGlua19idXR0b24uY2xpY2sobGlua0NsaWNrKTsKICAgICAgICAgICAgJGFwaWJ1dHRvbl9iYXRjaGh0dHBsaW5rX2J1dHRvbi5jbGljayhiYXRjaENsaWNrKTsKICAgICAgICAgICAgJGFwaWJ1dHRvbl9iYXRjaGh0dHBzbGlua19idXR0b24uY2xpY2soYmF0Y2hDbGljayk7CgogICAgICAgICAgICB2YXIgJG91dGVybGlua2J1dHRvbiA9ICQoJzxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1tZW51IiBzdHlsZT0iZGlzcGxheTpibG9jayI+PC9zcGFuPicpOwogICAgICAgICAgICB2YXIgJG91dGVybGlua2J1dHRvbl9zcGFuID0gJCgnPHNwYW4gY2xhc3M9ImctZHJvcGRvd24tYnV0dG9uIGctZHJvcGRvd24tYnV0dG9uLXNlY29uZCIgbWVudWxldmVsPSIyIj48L3NwYW4+Jyk7CiAgICAgICAgICAgIHZhciAkb3V0ZXJsaW5rYnV0dG9uX2EgPSAkKCc8YSBjbGFzcz0iZy1idXR0b24iIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPjxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1yaWdodCI+PHNwYW4gY2xhc3M9InRleHQiIHN0eWxlPSJ3aWR0aDphdXRvIj7lpJbpk77kuIvovb08L3NwYW4+PC9zcGFuPjwvYT4nKTsKICAgICAgICAgICAgdmFyICRvdXRlcmxpbmtidXR0b25fbWVudSA9ICQoJzxzcGFuIGNsYXNzPSJtZW51IiBzdHlsZT0id2lkdGg6MTIwcHg7bGVmdDo3OXB4Ij48L3NwYW4+Jyk7CiAgICAgICAgICAgIHZhciAkb3V0ZXJsaW5rYnV0dG9uX2Rvd25sb2FkX2J1dHRvbiA9ICQoJzxhIGlkPSJkb3dubG9hZC1vdXRlcmxpbmsiIGNsYXNzPSJnLWJ1dHRvbi1tZW51IiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij7kuIvovb08L2E+Jyk7CiAgICAgICAgICAgIHZhciAkb3V0ZXJsaW5rYnV0dG9uX2xpbmtfYnV0dG9uID0gJCgnPGEgaWQ9Imxpbmstb3V0ZXJsaW5rIiBjbGFzcz0iZy1idXR0b24tbWVudSIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI+5pi+56S66ZO+5o6lPC9hPicpOwogICAgICAgICAgICB2YXIgJG91dGVybGlua2J1dHRvbl9iYXRjaGxpbmtfYnV0dG9uID0gJCgnPGEgaWQ9ImJhdGNobGluay1vdXRlcmxpbmsiIGNsYXNzPSJnLWJ1dHRvbi1tZW51IiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij7mibnph4/pk77mjqU8L2E+Jyk7CiAgICAgICAgICAgICRvdXRlcmxpbmtidXR0b25fbWVudS5hcHBlbmQoJG91dGVybGlua2J1dHRvbl9kb3dubG9hZF9idXR0b24pLmFwcGVuZCgkb3V0ZXJsaW5rYnV0dG9uX2xpbmtfYnV0dG9uKS5hcHBlbmQoJG91dGVybGlua2J1dHRvbl9iYXRjaGxpbmtfYnV0dG9uKTsKICAgICAgICAgICAgJG91dGVybGlua2J1dHRvbi5hcHBlbmQoJG91dGVybGlua2J1dHRvbl9zcGFuLmFwcGVuZCgkb3V0ZXJsaW5rYnV0dG9uX2EpLmFwcGVuZCgkb3V0ZXJsaW5rYnV0dG9uX21lbnUpKTsKICAgICAgICAgICAgJG91dGVybGlua2J1dHRvbi5ob3ZlcihmdW5jdGlvbigpewogICAgICAgICAgICAgICAgJG91dGVybGlua2J1dHRvbl9zcGFuLnRvZ2dsZUNsYXNzKCdidXR0b24tb3BlbicpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgJG91dGVybGlua2J1dHRvbl9kb3dubG9hZF9idXR0b24uY2xpY2soZG93bmxvYWRDbGljayk7CiAgICAgICAgICAgICRvdXRlcmxpbmtidXR0b25fbGlua19idXR0b24uY2xpY2sobGlua0NsaWNrKTsKICAgICAgICAgICAgJG91dGVybGlua2J1dHRvbl9iYXRjaGxpbmtfYnV0dG9uLmNsaWNrKGJhdGNoQ2xpY2spOwoKICAgICAgICAgICAgJGRyb3Bkb3duYnV0dG9uX3NwYW4uYXBwZW5kKCRkaXJlY3RidXR0b24pLmFwcGVuZCgkYXBpYnV0dG9uKS5hcHBlbmQoJG91dGVybGlua2J1dHRvbik7CiAgICAgICAgICAgICRkcm9wZG93bmJ1dHRvbi5hcHBlbmQoJGRyb3Bkb3duYnV0dG9uX2EpLmFwcGVuZCgkZHJvcGRvd25idXR0b25fc3Bhbik7CgogICAgICAgICAgICAkZHJvcGRvd25idXR0b24uaG92ZXIoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICRkcm9wZG93bmJ1dHRvbi50b2dnbGVDbGFzcygnYnV0dG9uLW9wZW4nKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyQoJ2Rpdi5kZWZhdWx0LWRvbSBkaXYuYmFyIGRpdi5saXN0LXRvb2xzJykuYXBwZW5kKCRkcm9wZG93bmJ1dHRvbik7CiAgICAgICAgICAgIC8vJCgnZGl2LmlyaFc5cFogZGl2LnlxZ1I3NDcgZGl2LlFERE9RQicpLmFwcGVuZCgkZHJvcGRvd25idXR0b24pOwogICAgICAgICAgICAvLyQoJ2Rpdi4nK3dvcmRNYXBbJ2RlZmF1bHQtZG9tJ10rJyBkaXYuJyt3b3JkTWFwWydiYXInXSsnIGRpdi4nK3dvcmRNYXBbJ2xpc3QtdG9vbHMnXSkuYXBwZW5kKCRkcm9wZG93bmJ1dHRvbik7CiAgICAgICAgICAgICQoJCgic3Bhbi5pY29uLmljb24tb3JkZXIiKVswXS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jaGlsZHJlblszXS5jaGlsZHJlblsxXSkuYXBwZW5kKCRkcm9wZG93bmJ1dHRvbik7CiAgICAgICAgfQoKICAgICAgICAvL+aaguaXtuayoeeUqAogICAgICAgIC8vIGZ1bmN0aW9uIGFkZExvYWRpbmcoKXsKICAgICAgICAvLyAgICAgdmFyIHNjcmVlbldpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDsKICAgICAgICAvLyAgICAgdmFyIHNjcmVlbkhlaWdodCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0OwogICAgICAgIC8vICAgICB2YXIgbGVmdCA9IChzY3JlZW5XaWR0aC0xMCkvMjsKICAgICAgICAvLyAgICAgdmFyIHRvcCA9IHNjcmVlbkhlaWdodC8yOwogICAgICAgIC8vICAgICB2YXIgJGxvYWRpbmcgPSAkKCc8ZGl2IGlkPSJkaWFsb2ctbG9hZGluZyIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlO2xlZnQ6JytsZWZ0KydweDt0b3A6Jyt0b3ArJ3B4O2Rpc3BsYXk6bm9uZTt6LWluZGV4OjUyO2NvbG9yOndoaXRlO2ZvbnQtc2l6ZToxNnB4Ij7lpITnkIbkuK08L2Rpdj4nKTsKICAgICAgICAvLyAgICAgJCgnYm9keScpLmFwcGVuZCgkbG9hZGluZyk7CiAgICAgICAgLy8gfQoKICAgICAgICBmdW5jdGlvbiBkb3dubG9hZENsaWNrKGV2ZW50KXsKICAgICAgICAgICAgc2xvZygn6YCJ5Lit5paH5Lu25YiX6KGo77yaJyxzZWxlY3RGaWxlTGlzdCk7CiAgICAgICAgICAgIHZhciBpZCA9IGV2ZW50LnRhcmdldC5pZDsKICAgICAgICAgICAgdmFyIGRvd25sb2FkTGluazsKCiAgICAgICAgICAgIGlmKGlkID09ICdkb3dubG9hZC1kaXJlY3QnKXsKICAgICAgICAgICAgICAgIHZhciBkb3dubG9hZFR5cGU7CiAgICAgICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgi6I635Y+W6YCJ5Lit5paH5Lu25aSx6LSl77yM6K+35Yi35paw6YeN6K+V77yBIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RGaWxlTGlzdC5sZW5ndGggPT0gMSkgewogICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RGaWxlTGlzdFswXS5pc2RpciA9PT0gMSkKICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRUeXBlID0gJ2JhdGNoJzsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzZWxlY3RGaWxlTGlzdFswXS5pc2RpciA9PT0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRUeXBlPSAnZGxpbmsnOwogICAgICAgICAgICAgICAgICAgIC8vZG93bmxvYWRUeXBlID0gc2VsZWN0RmlsZUxpc3RbMF0uaXNkaXI9PTE/J2JhdGNoJzooc2VsZWN0RmlsZUxpc3RbMF0uaXNkaXI9PT0wPydkbGluayc6J2JhdGNoJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoc2VsZWN0RmlsZUxpc3QubGVuZ3RoID4gMSl7CiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRUeXBlID0gJ2JhdGNoJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZpZF9saXN0ID0gZ2V0RmlkTGlzdChzZWxlY3RGaWxlTGlzdCk7CiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gZ2V0RG93bmxvYWRMaW5rV2l0aFBhbkFQSShkb3dubG9hZFR5cGUpOwogICAgICAgICAgICAgICAgaWYocmVzdWx0LmVycm5vID09PSAwKXsKICAgICAgICAgICAgICAgICAgICBpZihkb3dubG9hZFR5cGUgPT0gJ2RsaW5rJykKICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRMaW5rID0gcmVzdWx0LmRsaW5rWzBdLmRsaW5rOwogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoZG93bmxvYWRUeXBlID09ICdiYXRjaCcpewogICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZExpbmsgPSByZXN1bHQuZGxpbms7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA9PT0gMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkTGluayA9IGRvd25sb2FkTGluayArICcmemlwbmFtZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHNlbGVjdEZpbGVMaXN0WzBdLmZpbGVuYW1lKSArICcuemlwJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuWPkeeUn+mUmeivr++8gSIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmKHJlc3VsdC5lcnJubyA9PSAtMSl7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+aWh+S7tuS4jeWtmOWcqOaIluW3suiiq+eZvuW6puWSjOiwkO+8jOaXoOazleS4i+i9ve+8gScpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJlc3VsdC5lcnJubyA9PSAxMTIpewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLpobXpnaLov4fmnJ/vvIzor7fliLfmlrDph43or5XvvIEiKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBhbGVydCgi5Y+R55Sf6ZSZ6K+v77yBIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIGlmKHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLojrflj5bpgInkuK3mlofku7blpLHotKXvvIzor7fliLfmlrDph43or5XvvIEiKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgi6K+l5pa55rOV5LiN5pSv5oyB5aSa5paH5Lu25LiL6L2977yBIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdFswXS5pc2RpciA9PSAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuivpeaWueazleS4jeaUr+aMgeebruW9leS4i+i9ve+8gSIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoaWQgPT0gJ2Rvd25sb2FkLWFwaScpewogICAgICAgICAgICAgICAgICAgIGRvd25sb2FkTGluayA9IGdldERvd25sb2FkTGlua1dpdGhSRVNUQVBJQmFpZHUoc2VsZWN0RmlsZUxpc3RbMF0ucGF0aCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlkID09ICdkb3dubG9hZC1vdXRlcmxpbmsnKXsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gZ2V0RG93bmxvYWRMaW5rV2l0aENsaWVudEFQSShzZWxlY3RGaWxlTGlzdFswXS5wYXRoKTsKICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZXJybm8gPT0gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkTGluayA9IHJlc3VsdC51cmxzWzBdLnVybDsKICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihyZXN1bHQuZXJybm8gPT0gMSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfmlofku7bkuI3lrZjlnKjvvIEnKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJlc3VsdC5lcnJubyA9PSAyKXsKICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+aWh+S7tuS4jeWtmOWcqOaIluiAheW3suiiq+eZvuW6puWSjOiwkO+8jOaXoOazleS4i+i9ve+8gScpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCflj5HnlJ/plJnor6/vvIEnKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBleGVjRG93bmxvYWQoZG93bmxvYWRMaW5rKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGxpbmtDbGljayhldmVudCl7CiAgICAgICAgICAgIHNsb2coJ+mAieS4reaWh+S7tuWIl+ihqO+8micsc2VsZWN0RmlsZUxpc3QpOwogICAgICAgICAgICB2YXIgaWQgPSBldmVudC50YXJnZXQuaWQ7CiAgICAgICAgICAgIHZhciBsaW5rTGlzdCx0aXA7CgogICAgICAgICAgICBpZihpZC5pbmRleE9mKCdkaXJlY3QnKSAhPSAtMSl7CiAgICAgICAgICAgICAgICB2YXIgZG93bmxvYWRUeXBlOwogICAgICAgICAgICAgICAgdmFyIGRvd25sb2FkTGluazsKICAgICAgICAgICAgICAgIGlmKHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLojrflj5bpgInkuK3mlofku7blpLHotKXvvIzor7fliLfmlrDph43or5XvvIEiKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdEZpbGVMaXN0WzBdLmlzZGlyID09PSAxKQogICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZFR5cGUgPSAnYmF0Y2gnOwogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbGVjdEZpbGVMaXN0WzBdLmlzZGlyID09PSAwKQogICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZFR5cGU9ICdkbGluayc7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoc2VsZWN0RmlsZUxpc3QubGVuZ3RoID4gMSl7CiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRUeXBlID0gJ2JhdGNoJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZpZF9saXN0ID0gZ2V0RmlkTGlzdChzZWxlY3RGaWxlTGlzdCk7CiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gZ2V0RG93bmxvYWRMaW5rV2l0aFBhbkFQSShkb3dubG9hZFR5cGUpOwogICAgICAgICAgICAgICAgaWYocmVzdWx0LmVycm5vID09PSAwKXsKICAgICAgICAgICAgICAgICAgICBpZihkb3dubG9hZFR5cGUgPT0gJ2RsaW5rJykKICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRMaW5rID0gcmVzdWx0LmRsaW5rWzBdLmRsaW5rOwogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoZG93bmxvYWRUeXBlID09ICdiYXRjaCcpewogICAgICAgICAgICAgICAgICAgICAgICBzbG9nKHNlbGVjdEZpbGVMaXN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRMaW5rID0gcmVzdWx0LmRsaW5rOwogICAgICAgICAgICAgICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdC5sZW5ndGggPT09IDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZExpbmsgPSBkb3dubG9hZExpbmsgKyAnJnppcG5hbWU9JyArIGVuY29kZVVSSUNvbXBvbmVudChzZWxlY3RGaWxlTGlzdFswXS5maWxlbmFtZSkgKyAnLnppcCc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLlj5HnlJ/plJnor6/vvIEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJlc3VsdC5lcnJubyA9PSAtMSl7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+aWh+S7tuS4jeWtmOWcqOaIluW3suiiq+eZvuW6puWSjOiwkO+8jOaXoOazleS4i+i9ve+8gScpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJlc3VsdC5lcnJubyA9PSAxMTIpewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLpobXpnaLov4fmnJ/vvIzor7fliLfmlrDph43or5XvvIEiKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBhbGVydCgi5Y+R55Sf6ZSZ6K+v77yBIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGh0dHBsaW5rID0gZG93bmxvYWRMaW5rLnJlcGxhY2UoL14oW0EtWmEtel0rKTovLCdodHRwOicpOwogICAgICAgICAgICAgICAgdmFyIGh0dHBzbGluayA9IGRvd25sb2FkTGluay5yZXBsYWNlKC9eKFtBLVphLXpdKyk6LywnaHR0cHM6Jyk7CiAgICAgICAgICAgICAgICB2YXIgZmlsZW5hbWUgPSAnJzsKICAgICAgICAgICAgICAgICQuZWFjaChzZWxlY3RGaWxlTGlzdCxmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdC5sZW5ndGggPT0gMSkKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWUgPSBlbGVtZW50LmZpbGVuYW1lOwogICAgICAgICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGluZGV4ID09MCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gZWxlbWVudC5maWxlbmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWUgPSBmaWxlbmFtZSArICcsJyArIGVsZW1lbnQuZmlsZW5hbWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBsaW5rTGlzdCA9IHsKICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTpmaWxlbmFtZSwKICAgICAgICAgICAgICAgICAgICB1cmxzOlsKICAgICAgICAgICAgICAgICAgICAgICAge3VybDpodHRwbGluayxyYW5rOjF9LAogICAgICAgICAgICAgICAgICAgICAgICB7dXJsOmh0dHBzbGluayxyYW5rOjJ9CiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRpcCA9ICfmmL7npLrmqKHmi5/nmb7luqbnvZHnm5jnvZHpobXojrflj5bnmoTpk77mjqXvvIzlj6/ku6Xkvb/nlKjlj7PplK7ov4Xpm7fkuIvovb3vvIzlpI3liLbliLDkuIvovb3lt6XlhbfpnIDopoHkvKDpgJJjb29raWXvvIzlpJrmlofku7bmiZPljIXkuIvovb3nmoTpk77mjqXlj6/ku6Xnm7TmjqXlpI3liLbkvb/nlKgnOwogICAgICAgICAgICAgICAgZGlhbG9nLm9wZW4oe3RpdGxlOifkuIvovb3pk77mjqUnLHR5cGU6J2xpbmsnLGxpc3Q6bGlua0xpc3QsdGlwOnRpcH0pOwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIGlmKHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLojrflj5bpgInkuK3mlofku7blpLHotKXvvIzor7fliLfmlrDph43or5XvvIEiKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgi6K+l5pa55rOV5LiN5pSv5oyB5aSa5paH5Lu25LiL6L2977yBIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdFswXS5pc2RpciA9PSAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuivpeaWueazleS4jeaUr+aMgeebruW9leS4i+i9ve+8gSIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoaWQuaW5kZXhPZignYXBpJykgIT0gLTEpewogICAgICAgICAgICAgICAgICAgIHZhciBkb3dubG9hZExpbmsgPSBnZXREb3dubG9hZExpbmtXaXRoUkVTVEFQSUJhaWR1KHNlbGVjdEZpbGVMaXN0WzBdLnBhdGgpOwogICAgICAgICAgICAgICAgICAgIHZhciBodHRwbGluayA9IGRvd25sb2FkTGluay5yZXBsYWNlKC9eKFtBLVphLXpdKyk6LywnaHR0cDonKTsKICAgICAgICAgICAgICAgICAgICB2YXIgaHR0cHNsaW5rID0gZG93bmxvYWRMaW5rLnJlcGxhY2UoL14oW0EtWmEtel0rKTovLCdodHRwczonKTsKICAgICAgICAgICAgICAgICAgICBsaW5rTGlzdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6c2VsZWN0RmlsZUxpc3RbMF0uZmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybHM6WwogICAgICAgICAgICAgICAgICAgICAgICAgICAge3VybDpodHRwbGluayxyYW5rOjF9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAge3VybDpodHRwc2xpbmsscmFuazoyfQogICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBodHRwbGluayA9IGh0dHBsaW5rLnJlcGxhY2UoJzI1MDUyOCcsJzI2NjcxOScpOwogICAgICAgICAgICAgICAgICAgIGh0dHBzbGluayA9IGh0dHBzbGluay5yZXBsYWNlKCcyNTA1MjgnLCcyNjY3MTknKTsKICAgICAgICAgICAgICAgICAgICBsaW5rTGlzdC51cmxzLnB1c2goe3VybDpodHRwbGluayxyYW5rOjN9KTsKICAgICAgICAgICAgICAgICAgICBsaW5rTGlzdC51cmxzLnB1c2goe3VybDpodHRwc2xpbmsscmFuazo0fSk7CiAgICAgICAgICAgICAgICAgICAgdGlwID0gJ+aYvuekuuaooeaLn0FQUOiOt+WPlueahOmTvuaOpSjkvb/nlKjnmb7luqbkupFJRCnvvIzlj6/ku6Xkvb/nlKjlj7PplK7ov4Xpm7fkuIvovb3vvIzlpI3liLbliLDkuIvovb3lt6XlhbfpnIDopoHkvKDpgJJjb29raWUnOwogICAgICAgICAgICAgICAgICAgIGRpYWxvZy5vcGVuKHt0aXRsZTon5LiL6L296ZO+5o6lJyx0eXBlOidsaW5rJyxsaXN0OmxpbmtMaXN0LHRpcDp0aXB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaWQuaW5kZXhPZignb3V0ZXJsaW5rJykgIT0gLTEpewogICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBnZXREb3dubG9hZExpbmtXaXRoQ2xpZW50QVBJKHNlbGVjdEZpbGVMaXN0WzBdLnBhdGgpOwogICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5lcnJubyA9PSAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgbGlua0xpc3QgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTpzZWxlY3RGaWxlTGlzdFswXS5maWxlbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybHM6cmVzdWx0LnVybHMKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihyZXN1bHQuZXJybm8gPT0gMSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfmlofku7bkuI3lrZjlnKjvvIEnKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJlc3VsdC5lcnJubyA9PSAyKXsKICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+aWh+S7tuS4jeWtmOWcqOaIluiAheW3suiiq+eZvuW6puWSjOiwkO+8jOaXoOazleS4i+i9ve+8gScpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCflj5HnlJ/plJnor6/vvIEnKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aXAgPSAn5pi+56S65qih5ouf55m+5bqm572R55uY5a6i5oi356uv6I635Y+W55qE6ZO+5o6l77yM5Y+v5Lul55u05o6l5aSN5Yi25Yiw5LiL6L295bel5YW35L2/55So77yM5LiN6ZyA6KaBY29va2llJzsKICAgICAgICAgICAgICAgICAgICBkaWFsb2cub3Blbih7dGl0bGU6J+S4i+i9vemTvuaOpScsdHlwZTonbGluaycsbGlzdDpsaW5rTGlzdCx0aXA6dGlwLHNob3djb3B5OnRydWUsc2hvd2VkaXQ6dHJ1ZX0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vZGlhbG9nLm9wZW4oe3RpdGxlOifkuIvovb3pk77mjqUnLHR5cGU6J2xpbmsnLGxpc3Q6bGlua0xpc3QsdGlwOnRpcH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYmF0Y2hDbGljayhldmVudCl7CiAgICAgICAgICAgIHNsb2coJ+mAieS4reaWh+S7tuWIl+ihqO+8micsc2VsZWN0RmlsZUxpc3QpOwogICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdC5sZW5ndGggPT09IDApewogICAgICAgICAgICAgICAgYWxlcnQoJ+iOt+WPlumAieS4reaWh+S7tuWksei0pe+8jOivt+WIt+aWsOmHjeivle+8gScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBpZCA9IGV2ZW50LnRhcmdldC5pZDsKICAgICAgICAgICAgdmFyIGxpbmtUeXBlLHRpcDsKICAgICAgICAgICAgbGlua1R5cGUgPSBpZC5pbmRleE9mKCdodHRwcycpID09IC0xID8gKGlkLmluZGV4T2YoJ2h0dHAnKSA9PSAtMSA/IGxvY2F0aW9uLnByb3RvY29sKyc6JyA6ICdodHRwOicpIDogJ2h0dHBzOic7CiAgICAgICAgICAgIGJhdGNoTGlua0xpc3QgPSBbXTsKICAgICAgICAgICAgYmF0Y2hMaW5rTGlzdEFsbCA9IFtdOwogICAgICAgICAgICBpZihpZC5pbmRleE9mKCdkaXJlY3QnKSAhPSAtMSl7CiAgICAgICAgICAgICAgICBiYXRjaExpbmtMaXN0ID0gZ2V0RGlyZWN0QmF0Y2hMaW5rKGxpbmtUeXBlKTsKICAgICAgICAgICAgICAgIHRpcCA9ICfmmL7npLrmiYDmnInpgInkuK3mlofku7bnmoTnm7TmjqXkuIvovb3pk77mjqXvvIzmlofku7blpLnmmL7npLrkuLrmiZPljIXkuIvovb3nmoTpk77mjqUnOwogICAgICAgICAgICAgICAgaWYoYmF0Y2hMaW5rTGlzdC5sZW5ndGggPT09IDApewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfmsqHmnInpk77mjqXlj6/ku6XmmL7npLrvvIxBUEnpk77mjqXkuI3opoHlhajpg6jpgInkuK3mlofku7blpLnvvIEnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkaWFsb2cub3Blbih7dGl0bGU6J+aJuemHj+mTvuaOpScsdHlwZTonYmF0Y2gnLGxpc3Q6YmF0Y2hMaW5rTGlzdCx0aXA6dGlwLHNob3djb3B5OnRydWV9KTsKICAgICAgICAgICAgfSBlbHNlIGlmKGlkLmluZGV4T2YoJ2FwaScpICE9IC0xKXsKICAgICAgICAgICAgICAgIGJhdGNoTGlua0xpc3QgPSBnZXRBUElCYXRjaExpbmsobGlua1R5cGUpOwogICAgICAgICAgICAgICAgdGlwID0gJ+aYvuekuuaJgOaciemAieS4reaWh+S7tueahEFQSeS4i+i9vemTvuaOpe+8jOS4jeaYvuekuuaWh+S7tuWkuSc7CiAgICAgICAgICAgICAgICBpZihiYXRjaExpbmtMaXN0Lmxlbmd0aCA9PT0gMCl7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+ayoeaciemTvuaOpeWPr+S7peaYvuekuu+8jEFQSemTvuaOpeS4jeimgeWFqOmDqOmAieS4reaWh+S7tuWkue+8gScpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRpYWxvZy5vcGVuKHt0aXRsZTon5om56YeP6ZO+5o6lJyx0eXBlOidiYXRjaCcsbGlzdDpiYXRjaExpbmtMaXN0LHRpcDp0aXAsc2hvd2NvcHk6dHJ1ZX0pOwogICAgICAgICAgICB9IGVsc2UgaWYoaWQuaW5kZXhPZignb3V0ZXJsaW5rJykgIT0gLTEpewogICAgICAgICAgICAgICAgYmF0Y2hMaW5rTGlzdEFsbCA9IGdldE91dGVybGlua0JhdGNoTGlua0FsbCgpOwogICAgICAgICAgICAgICAgYmF0Y2hMaW5rTGlzdCA9IGdldE91dGVybGlua0JhdGNoTGlua0ZpcnN0KGJhdGNoTGlua0xpc3RBbGwpOwogICAgICAgICAgICAgICAgdGlwID0gJ+aYvuekuuaJgOaciemAieS4reaWh+S7tueahOWklumDqOS4i+i9vemTvuaOpe+8jOS4jeaYvuekuuaWh+S7tuWkuSc7CiAgICAgICAgICAgICAgICBpZihiYXRjaExpbmtMaXN0Lmxlbmd0aCA9PT0gMCl7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+ayoeaciemTvuaOpeWPr+S7peaYvuekuu+8jEFQSemTvuaOpeS4jeimgeWFqOmDqOmAieS4reaWh+S7tuWkue+8gScpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkaWFsb2cub3Blbih7dGl0bGU6J+aJuemHj+mTvuaOpScsdHlwZTonYmF0Y2gnLGxpc3Q6YmF0Y2hMaW5rTGlzdCx0aXA6dGlwLHNob3djb3B5OnRydWUsYWxsbGlzdDpiYXRjaExpbmtMaXN0QWxsLHNob3dhbGw6dHJ1ZX0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvL2RpYWxvZy5vcGVuKHt0aXRsZTon5om56YeP6ZO+5o6lJyx0eXBlOidiYXRjaCcsbGlzdDpiYXRjaExpbmtMaXN0LHRpcDp0aXAsc2hvd2NvcHk6dHJ1ZX0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0RGlyZWN0QmF0Y2hMaW5rKGxpbmtUeXBlKXsKICAgICAgICAgICAgdmFyIGxpc3QgPSBbXTsKICAgICAgICAgICAgJC5lYWNoKHNlbGVjdEZpbGVMaXN0LGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgdmFyIGRvd25sb2FkVHlwZSxkb3dubG9hZExpbmsscmVzdWx0OwogICAgICAgICAgICAgICAgaWYoZWxlbWVudC5pc2RpciA9PSAwKQogICAgICAgICAgICAgICAgICAgIGRvd25sb2FkVHlwZSA9ICdkbGluayc7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRUeXBlID0gJ2JhdGNoJzsKICAgICAgICAgICAgICAgIGZpZF9saXN0ID0gZ2V0RmlkTGlzdChbZWxlbWVudF0pOwogICAgICAgICAgICAgICAgcmVzdWx0ID0gZ2V0RG93bmxvYWRMaW5rV2l0aFBhbkFQSShkb3dubG9hZFR5cGUpOwogICAgICAgICAgICAgICAgaWYocmVzdWx0LmVycm5vID09IDApewogICAgICAgICAgICAgICAgICAgIGlmKGRvd25sb2FkVHlwZSA9PSAnZGxpbmsnKQogICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZExpbmsgPSByZXN1bHQuZGxpbmtbMF0uZGxpbms7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihkb3dubG9hZFR5cGUgPT0gJ2JhdGNoJykKICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRMaW5rID0gcmVzdWx0LmRsaW5rOwogICAgICAgICAgICAgICAgICAgIGRvd25sb2FkTGluayA9IGRvd25sb2FkTGluay5yZXBsYWNlKC9eKFtBLVphLXpdKyk6LyxsaW5rVHlwZSk7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBkb3dubG9hZExpbmsgPSAnZXJyb3InOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGlzdC5wdXNoKHtmaWxlbmFtZTplbGVtZW50LmZpbGVuYW1lLGRvd25sb2FkbGluazpkb3dubG9hZExpbmt9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBsaXN0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0QVBJQmF0Y2hMaW5rKGxpbmtUeXBlKXsKICAgICAgICAgICAgdmFyIGxpc3QgPSBbXTsKICAgICAgICAgICAgJC5lYWNoKHNlbGVjdEZpbGVMaXN0LGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgaWYoZWxlbWVudC5pc2RpciA9PSAxKQogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIHZhciBkb3dubG9hZExpbms7CiAgICAgICAgICAgICAgICBkb3dubG9hZExpbmsgPSBnZXREb3dubG9hZExpbmtXaXRoUkVTVEFQSUJhaWR1KGVsZW1lbnQucGF0aCk7CiAgICAgICAgICAgICAgICBkb3dubG9hZExpbmsgPSBkb3dubG9hZExpbmsucmVwbGFjZSgvXihbQS1aYS16XSspOi8sbGlua1R5cGUpOwogICAgICAgICAgICAgICAgbGlzdC5wdXNoKHtmaWxlbmFtZTplbGVtZW50LmZpbGVuYW1lLGRvd25sb2FkbGluazpkb3dubG9hZExpbmt9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBsaXN0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0T3V0ZXJsaW5rQmF0Y2hMaW5rQWxsKCl7CiAgICAgICAgICAgIHZhciBsaXN0ID0gW107CiAgICAgICAgICAgICQuZWFjaChzZWxlY3RGaWxlTGlzdCxmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgICAgICAgICBpZihlbGVtZW50LmlzZGlyID09IDEpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgcmVzdWx0ID0gZ2V0RG93bmxvYWRMaW5rV2l0aENsaWVudEFQSShlbGVtZW50LnBhdGgpOwogICAgICAgICAgICAgICAgaWYocmVzdWx0LmVycm5vID09IDApewogICAgICAgICAgICAgICAgICAgIC8vZG93bmxvYWRMaW5rID0gcmVzdWx0LnVybHNbMF0udXJsOwogICAgICAgICAgICAgICAgICAgIGxpc3QucHVzaCh7ZmlsZW5hbWU6ZWxlbWVudC5maWxlbmFtZSxsaW5rczpyZXN1bHQudXJsc30pOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgLy9kb3dubG9hZExpbmsgPSAnZXJyb3InOwogICAgICAgICAgICAgICAgICAgIGxpc3QucHVzaCh7ZmlsZW5hbWU6ZWxlbWVudC5maWxlbmFtZSxsaW5rczpbe3Jhbms6MSx1cmw6J2Vycm9yJ31dfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL2xpc3QucHVzaCh7ZmlsZW5hbWU6ZWxlbWVudC5maWxlbmFtZSxkb3dubG9hZGxpbms6ZG93bmxvYWRMaW5rfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gbGlzdDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldE91dGVybGlua0JhdGNoTGlua0ZpcnN0KGxpc3QpewogICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgICAgICAgICQuZWFjaChsaXN0LGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goe2ZpbGVuYW1lOmVsZW1lbnQuZmlsZW5hbWUsZG93bmxvYWRsaW5rOmVsZW1lbnQubGlua3NbMF0udXJsfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0U2lnbigpewogICAgICAgICAgICB2YXIgc2lnbkZuYzsKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgc2lnbkZuYyA9IG5ldyBGdW5jdGlvbigicmV0dXJuICIgKyB5dW5EYXRhLnNpZ24yKSgpOwogICAgICAgICAgICB9IGNhdGNoKGUpewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGUubWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGJhc2U2NEVuY29kZShzaWduRm5jKHl1bkRhdGEuc2lnbjUseXVuRGF0YS5zaWduMSkpOwogICAgICAgIH0KCiAgICAgICAgLy/ojrflj5blvZPliY3nm67lvZUKICAgICAgICBmdW5jdGlvbiBnZXRQYXRoKCl7CiAgICAgICAgICAgIHZhciBoYXNoID0gbG9jYXRpb24uaGFzaDsKICAgICAgICAgICAgdmFyIHJlZ3ggPSAvKF58JnxcLylwYXRoPShbXiZdKikoJnwkKS9pOwogICAgICAgICAgICB2YXIgcmVzdWx0ID0gaGFzaC5tYXRjaChyZWd4KTsKICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRbMl0pOwogICAgICAgIH0KCiAgICAgICAgLy/ojrflj5bliIbnsbvmmL7npLrnmoTnsbvliKvvvIzljbPlnLDlnYDmoI/kuK3nmoR0eXBlCiAgICAgICAgZnVuY3Rpb24gZ2V0Q2F0ZWdvcnkoKXsKICAgICAgICAgICAgdmFyIGhhc2ggPSBsb2NhdGlvbi5oYXNoOwogICAgICAgICAgICB2YXIgcmVneCA9IC8oXnwmfFwvKXR5cGU9KFteJl0qKSgmfCQpL2k7CiAgICAgICAgICAgIHZhciByZXN1bHQgPSBoYXNoLm1hdGNoKHJlZ3gpOwogICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdFsyXSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRTZWFyY2hLZXkoKXsKICAgICAgICAgICAgdmFyIGhhc2ggPSBsb2NhdGlvbi5oYXNoOwogICAgICAgICAgICB2YXIgcmVneCA9IC8oXnwmfFwvKWtleT0oW14mXSopKCZ8JCkvaTsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGhhc2gubWF0Y2gocmVneCk7CiAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0WzJdKTsKICAgICAgICB9CgogICAgICAgIC8v6I635Y+W5b2T5YmN6aG16Z2iKGxpc3TmiJbogIVjYXRlZ29yeSkKICAgICAgICBmdW5jdGlvbiBnZXRDdXJyZW50UGFnZSgpewogICAgICAgICAgICB2YXIgaGFzaCA9IGxvY2F0aW9uLmhhc2g7CiAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoaGFzaC5zdWJzdHJpbmcoaGFzaC5pbmRleE9mKCcjJykrMSxoYXNoLmluZGV4T2YoJy8nKSkpOwogICAgICAgIH0KCiAgICAgICAgLy/ojrflj5bmlofku7bliJfooagKICAgICAgICBmdW5jdGlvbiBnZXRGaWxlTGlzdCgpewogICAgICAgICAgICB2YXIgZmlsZWxpc3QgPSBbXTsKICAgICAgICAgICAgdmFyIGxpc3RVcmwgPSBwYW5BUElVcmwgKyAibGlzdCI7CiAgICAgICAgICAgIHZhciBwYXRoID0gZ2V0UGF0aCgpOwogICAgICAgICAgICBsb2dpZCA9IGdldExvZ0lEKCk7CiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICBkaXI6cGF0aCwKICAgICAgICAgICAgICAgIGJkc3Rva2VuOmJkc3Rva2VuLAogICAgICAgICAgICAgICAgbG9naWQ6bG9naWQsCiAgICAgICAgICAgICAgICBvcmRlcjonc2l6ZScsCiAgICAgICAgICAgICAgICBkZXNjOjAsCiAgICAgICAgICAgICAgICBjbGllbnR0eXBlOjAsCiAgICAgICAgICAgICAgICBzaG93ZW1wdHk6MCwKICAgICAgICAgICAgICAgIHdlYjoxLAogICAgICAgICAgICAgICAgY2hhbm5lbDonY2h1bmxlaScsCiAgICAgICAgICAgICAgICBhcHBpZDoyNTA1MjgKICAgICAgICAgICAgfTsKICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICAgIHVybDpsaXN0VXJsLAogICAgICAgICAgICAgICAgYXN5bmM6ZmFsc2UsCiAgICAgICAgICAgICAgICBtZXRob2Q6J0dFVCcsCiAgICAgICAgICAgICAgICBkYXRhOnBhcmFtcywKICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzcG9uc2UpewogICAgICAgICAgICAgICAgICAgIGZpbGVsaXN0ID0gMD09PXJlc3BvbnNlLmVycm5vID8gcmVzcG9uc2UubGlzdCA6IFtdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGZpbGVsaXN0OwogICAgICAgIH0KCiAgICAgICAgLy/ojrflj5bliIbnsbvpobXpnaLkuIvnmoTmlofku7bliJfooagKICAgICAgICBmdW5jdGlvbiBnZXRDYXRlZ29yeUZpbGVMaXN0KCl7CiAgICAgICAgICAgIHZhciBmaWxlbGlzdCA9IFtdOwogICAgICAgICAgICB2YXIgbGlzdFVybCA9IHBhbkFQSVVybCArICJjYXRlZ29yeWxpc3QiOwogICAgICAgICAgICB2YXIgY2F0ZWdvcnkgPSBnZXRDYXRlZ29yeSgpOwogICAgICAgICAgICBsb2dpZCA9IGdldExvZ0lEKCk7CiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICBjYXRlZ29yeTpjYXRlZ29yeSwKICAgICAgICAgICAgICAgIGJkc3Rva2VuOmJkc3Rva2VuLAogICAgICAgICAgICAgICAgbG9naWQ6bG9naWQsCiAgICAgICAgICAgICAgICBvcmRlcjonc2l6ZScsCiAgICAgICAgICAgICAgICBkZXNjOjAsCiAgICAgICAgICAgICAgICBjbGllbnR0eXBlOjAsCiAgICAgICAgICAgICAgICBzaG93ZW1wdHk6MCwKICAgICAgICAgICAgICAgIHdlYjoxLAogICAgICAgICAgICAgICAgY2hhbm5lbDonY2h1bmxlaScsCiAgICAgICAgICAgICAgICBhcHBpZDoyNTA1MjgKICAgICAgICAgICAgfTsKICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICAgIHVybDpsaXN0VXJsLAogICAgICAgICAgICAgICAgYXN5bmM6ZmFsc2UsCiAgICAgICAgICAgICAgICBtZXRob2Q6J0dFVCcsCiAgICAgICAgICAgICAgICBkYXRhOnBhcmFtcywKICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzcG9uc2UpewogICAgICAgICAgICAgICAgICAgIGZpbGVsaXN0ID0gMD09PXJlc3BvbnNlLmVycm5vID8gcmVzcG9uc2UuaW5mbyA6IFtdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGZpbGVsaXN0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0U2VhcmNoRmlsZUxpc3QoKXsKICAgICAgICAgICAgdmFyIGZpbGVsaXN0ID0gW107CiAgICAgICAgICAgIHZhciBsaXN0VXJsID0gcGFuQVBJVXJsICsgJ3NlYXJjaCc7CiAgICAgICAgICAgIGxvZ2lkID0gZ2V0TG9nSUQoKTsKICAgICAgICAgICAgc2VhcmNoS2V5ID0gZ2V0U2VhcmNoS2V5KCk7CiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICByZWN1cnNpb246MSwKICAgICAgICAgICAgICAgIG9yZGVyOid0aW1lJywKICAgICAgICAgICAgICAgIGRlc2M6MSwKICAgICAgICAgICAgICAgIHNob3dlbXB0eTowLAogICAgICAgICAgICAgICAgd2ViOjEsCiAgICAgICAgICAgICAgICBwYWdlOjEsCiAgICAgICAgICAgICAgICBudW06MTAwLAogICAgICAgICAgICAgICAga2V5OnNlYXJjaEtleSwKICAgICAgICAgICAgICAgIGNoYW5uZWw6J2NodW5sZWknLAogICAgICAgICAgICAgICAgYXBwX2lkOjI1MDUyOCwKICAgICAgICAgICAgICAgIGJkc3Rva2VuOmJkc3Rva2VuLAogICAgICAgICAgICAgICAgbG9naWQ6bG9naWQsCiAgICAgICAgICAgICAgICBjbGllbnR0eXBlOjAKICAgICAgICAgICAgfTsKICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICAgIHVybDpsaXN0VXJsLAogICAgICAgICAgICAgICAgYXN5bmM6ZmFsc2UsCiAgICAgICAgICAgICAgICBtZXRob2Q6J0dFVCcsCiAgICAgICAgICAgICAgICBkYXRhOnBhcmFtcywKICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzcG9uc2UpewogICAgICAgICAgICAgICAgICAgIGZpbGVsaXN0ID0gMD09PXJlc3BvbnNlLmVycm5vID8gcmVzcG9uc2UubGlzdCA6IFtdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGZpbGVsaXN0OwogICAgICAgIH0KCiAgICAgICAgLy/nlJ/miJDkuIvovb3ml7bnmoRmaWRfbGlzdOWPguaVsAogICAgICAgIGZ1bmN0aW9uIGdldEZpZExpc3QobGlzdCl7CiAgICAgICAgICAgIHZhciBmaWRsaXN0ID0gbnVsbDsKICAgICAgICAgICAgaWYgKGxpc3QubGVuZ3RoID09PSAwKQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIHZhciBmaWxlaWRsaXN0ID0gW107CiAgICAgICAgICAgICQuZWFjaChsaXN0LGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgZmlsZWlkbGlzdC5wdXNoKGVsZW1lbnQuZnNfaWQpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZmlkbGlzdCA9ICdbJyArIGZpbGVpZGxpc3QgKyAnXSc7CiAgICAgICAgICAgIHJldHVybiBmaWRsaXN0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0VGltZXN0YW1wKCl7CiAgICAgICAgICAgIHJldHVybiB5dW5EYXRhLnRpbWVzdGFtcDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldEJEU3Rva2VuKCl7CiAgICAgICAgICAgIHJldHVybiB5dW5EYXRhLk1ZQkRTVE9LRU47CiAgICAgICAgfQoKICAgICAgICAvL+iOt+WPluebtOaOpeS4i+i9veWcsOWdgAogICAgICAgIC8v6L+Z5Liq5Zyw5Z2A5LiN5piv55u05o6l5LiL6L295Zyw5Z2A77yM6K6/6Zeu6L+Z5Liq5Zyw5Z2A5Lya6L+U5ZueMzAy77yMcmVzcG9uc2UgaGVhZGVy5Lit55qEbG9jYXRpb27miY3mmK/nnJ/lrp7kuIvovb3lnLDlnYAKICAgICAgICAvL+aaguaXtuayoeacieaJvuWIsOaPkOWPluaWueazlQogICAgICAgIGZ1bmN0aW9uIGdldERvd25sb2FkTGlua1dpdGhQYW5BUEkodHlwZSl7CiAgICAgICAgICAgIHZhciBkb3dubG9hZFVybCA9IHBhbkFQSVVybCArICJkb3dubG9hZCI7CiAgICAgICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgICAgIGxvZ2lkID0gZ2V0TG9nSUQoKTsKICAgICAgICAgICAgdmFyIHBhcmFtcz0gewogICAgICAgICAgICAgICAgc2lnbjpzaWduLAogICAgICAgICAgICAgICAgdGltZXN0YW1wOnRpbWVzdGFtcCwKICAgICAgICAgICAgICAgIGZpZGxpc3Q6ZmlkX2xpc3QsCiAgICAgICAgICAgICAgICB0eXBlOnR5cGUsCiAgICAgICAgICAgICAgICBjaGFubmVsOidjaHVubGVpJywKICAgICAgICAgICAgICAgIHdlYjoxLAogICAgICAgICAgICAgICAgYXBwX2lkOjI1MDUyOCwKICAgICAgICAgICAgICAgIGJkc3Rva2VuOmJkc3Rva2VuLAogICAgICAgICAgICAgICAgbG9naWQ6bG9naWQsCiAgICAgICAgICAgICAgICBjbGllbnR0eXBlOjAKICAgICAgICAgICAgfTsKICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICAgIHVybDpkb3dubG9hZFVybCwKICAgICAgICAgICAgICAgIGFzeW5jOmZhbHNlLAogICAgICAgICAgICAgICAgbWV0aG9kOidHRVQnLAogICAgICAgICAgICAgICAgZGF0YTpwYXJhbXMsCiAgICAgICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlc3BvbnNlKXsKICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXNwb25zZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXREb3dubG9hZExpbmtXaXRoUkVTVEFQSUJhaWR1KHBhdGgpewogICAgICAgICAgICB2YXIgbGluayA9IHJlc3RBUElVcmwgKyAnZmlsZT9tZXRob2Q9ZG93bmxvYWQmYXBwX2lkPTI1MDUyOCZwYXRoPScgKyBlbmNvZGVVUklDb21wb25lbnQocGF0aCk7CiAgICAgICAgICAgIHJldHVybiBsaW5rOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0RG93bmxvYWRMaW5rV2l0aFJFU1RBUElFUyhwYXRoKXsKICAgICAgICAgICAgdmFyIGxpbmsgPSByZXN0QVBJVXJsICsgJ2ZpbGU/bWV0aG9kPWRvd25sb2FkJmFwcF9pZD0yNjY3MTkmcGF0aD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhdGgpOwogICAgICAgICAgICByZXR1cm4gbGluazsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldERvd25sb2FkTGlua1dpdGhDbGllbnRBUEkocGF0aCl7CiAgICAgICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgICAgIHZhciB1cmwgPSBjbGllbnRBUElVcmwgKyAnZmlsZT9tZXRob2Q9bG9jYXRlZG93bmxvYWQmYXBwX2lkPTI1MDUyOCZ2ZXI9NC4wJnBhdGg9JyArIGVuY29kZVVSSUNvbXBvbmVudChwYXRoKTsKICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICAgIHVybDp1cmwsCiAgICAgICAgICAgICAgICBtZXRob2Q6J1BPU1QnLAogICAgICAgICAgICAgICAgeGhyRmllbGRzOiB7CiAgICAgICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYXN5bmM6ZmFsc2UsCiAgICAgICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlc3BvbnNlKXsKICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOnsKICAgICAgICAgICAgICAgICAgICA0MDQ6ZnVuY3Rpb24ocmVzcG9uc2UpewogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXNwb25zZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZihyZXN1bHQpewogICAgICAgICAgICAgICAgaWYocmVzdWx0LmVycm9yX2NvZGUgPT0gdW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQudXJscyA9PSB1bmRlZmluZWQpewogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuZXJybm8gPSAyOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2gocmVzdWx0LnVybHMsZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudXJsc1tpbmRleF0udXJsID0gZWxlbWVudC51cmwucmVwbGFjZSgnXFwnLCcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5lcnJubyA9IDA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfWVsc2UgaWYocmVzdWx0LmVycm9yX2NvZGUgPT0gMzEwNjYpewogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5lcnJubyA9IDE7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICByZXN1bHQuZXJybm8gPSAtMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICByZXN1bHQgPSB7fTsKICAgICAgICAgICAgICAgIHJlc3VsdC5lcnJubyA9IC0xOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBleGVjRG93bmxvYWQobGluayl7CiAgICAgICAgICAgIHNsb2coIuS4i+i9vemTvuaOpe+8miIrbGluayk7CiAgICAgICAgICAgICQoJyNoZWxwZXJkb3dubG9hZGlmcmFtZScpLmF0dHIoJ3NyYycsbGluayk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjcmVhdGVJZnJhbWUoKXsKICAgICAgICAgICAgdmFyICRkaXYgPSAkKCc8ZGl2IGNsYXNzPSJoZWxwZXItaGlkZSIgc3R5bGU9InBhZGRpbmc6MDttYXJnaW46MDtkaXNwbGF5OmJsb2NrIj48L2Rpdj4nKTsKICAgICAgICAgICAgdmFyICRpZnJhbWUgPSAkKCc8aWZyYW1lIHNyYz0iamF2YXNjcmlwdDp2b2lkKDApIiBpZD0iaGVscGVyZG93bmxvYWRpZnJhbWUiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjwvaWZyYW1lPicpOwogICAgICAgICAgICAkZGl2LmFwcGVuZCgkaWZyYW1lKTsKICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkZGl2KTsKCiAgICAgICAgfQogICAgfQoKICAgIC8v5YiG5Lqr6aG16Z2i55qE5LiL6L295Yqp5omLCiAgICBmdW5jdGlvbiBQYW5TaGFyZUhlbHBlcigpewogICAgICAgIHZhciB5dW5EYXRhLHNpZ24sdGltZXN0YW1wLGJkc3Rva2VuLGNoYW5uZWwsY2xpZW50dHlwZSx3ZWIsYXBwX2lkLGxvZ2lkLGVuY3J5cHQscHJvZHVjdCx1ayxwcmltYXJ5aWQsZmlkX2xpc3QsZXh0cmEsc2hhcmVpZDsKICAgICAgICB2YXIgdmNvZGU7CiAgICAgICAgdmFyIHNoYXJlVHlwZSxidXR0b25UYXJnZXQsY3VycmVudFBhdGgsbGlzdF9ncmlkX3N0YXR1cyxvYnNlcnZlcixkaWFsb2csdmNvZGVEaWFsb2c7CiAgICAgICAgdmFyIGZpbGVMaXN0PVtdLHNlbGVjdEZpbGVMaXN0PVtdOwogICAgICAgIHZhciBwYW5BUElVcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArICIvLyIgKyBsb2NhdGlvbi5ob3N0ICsgIi9hcGkvIjsKICAgICAgICB2YXIgc2hhcmVMaXN0VXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgbG9jYXRpb24uaG9zdCArICIvc2hhcmUvbGlzdCI7CgogICAgICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHl1bkRhdGEgPSB1bnNhZmVXaW5kb3cueXVuRGF0YTsKICAgICAgICAgICAgc2xvZygneXVuRGF0YTonLHl1bkRhdGEpOwogICAgICAgICAgICBpZih5dW5EYXRhID09PSB1bmRlZmluZWQgfHwgeXVuRGF0YS5GSUxFSU5GTyA9PSBudWxsKXsKICAgICAgICAgICAgICAgIHNsb2coJ+mhtemdouacquato+W4uOWKoOi9ve+8jOaIluiAheeZvuW6puW3sue7j+abtOaWsO+8gScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGluaXRQYXJhbXMoKTsKICAgICAgICAgICAgYWRkQnV0dG9uKCk7CiAgICAgICAgICAgIGRpYWxvZyA9IG5ldyBEaWFsb2coe2FkZENvcHk6ZmFsc2V9KTsKICAgICAgICAgICAgdmNvZGVEaWFsb2cgPSBuZXcgVkNvZGVEaWFsb2cocmVmcmVzaFZDb2RlLGNvbmZpcm1DbGljayk7CiAgICAgICAgICAgIGNyZWF0ZUlmcmFtZSgpOwoKICAgICAgICAgICAgaWYoIWlzU2luZ2xlU2hhcmUoKSl7CiAgICAgICAgICAgICAgICByZWdpc3RlckV2ZW50TGlzdGVuZXIoKTsKICAgICAgICAgICAgICAgIGNyZWF0ZU9ic2VydmVyKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNsb2coJ+WIhuS6q+ebtOaOpeS4i+i9veWKoOi9veaIkOWKnyEnKTsKICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBpbml0UGFyYW1zKCl7CiAgICAgICAgICAgIHNoYXJlVHlwZSA9IGdldFNoYXJlVHlwZSgpOwogICAgICAgICAgICBzaWduID0geXVuRGF0YS5TSUdOOwogICAgICAgICAgICB0aW1lc3RhbXAgPSB5dW5EYXRhLlRJTUVTVEFNUDsKICAgICAgICAgICAgYmRzdG9rZW4gPSB5dW5EYXRhLk1ZQkRTVE9LRU47CiAgICAgICAgICAgIGNoYW5uZWwgPSAnY2h1bmxlaSc7CiAgICAgICAgICAgIGNsaWVudHR5cGUgPSAwOwogICAgICAgICAgICB3ZWIgPSAxOwogICAgICAgICAgICBhcHBfaWQgPSAyNTA1Mjg7CiAgICAgICAgICAgIGxvZ2lkID0gZ2V0TG9nSUQoKTsKICAgICAgICAgICAgZW5jcnlwdCA9IDA7CiAgICAgICAgICAgIHByb2R1Y3QgPSAnc2hhcmUnOwogICAgICAgICAgICBwcmltYXJ5aWQgPSB5dW5EYXRhLlNIQVJFX0lEOwogICAgICAgICAgICB1ayA9IHl1bkRhdGEuU0hBUkVfVUs7CgogICAgICAgICAgICBpZihzaGFyZVR5cGUgPT0gJ3NlY3JldCcpewogICAgICAgICAgICAgICAgZXh0cmEgPSBnZXRFeHRyYSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKGlzU2luZ2xlU2hhcmUoKSl7CiAgICAgICAgICAgICAgICB2YXIgb2JqID0ge307CiAgICAgICAgICAgICAgICBpZih5dW5EYXRhLkNBVEVHT1JZID09IDIpewogICAgICAgICAgICAgICAgICAgIG9iai5maWxlbmFtZSA9IHl1bkRhdGEuRklMRU5BTUU7CiAgICAgICAgICAgICAgICAgICAgb2JqLnBhdGggPSB5dW5EYXRhLlBBVEg7CiAgICAgICAgICAgICAgICAgICAgb2JqLmZzX2lkID0geXVuRGF0YS5GU19JRDsKICAgICAgICAgICAgICAgICAgICBvYmouaXNkaXIgPSAwOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBvYmouZmlsZW5hbWUgPSB5dW5EYXRhLkZJTEVJTkZPWzBdLnNlcnZlcl9maWxlbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnBhdGggPSB5dW5EYXRhLkZJTEVJTkZPWzBdLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5mc19pZCA9IHl1bkRhdGEuRklMRUlORk9bMF0uZnNfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5pc2RpciA9eXVuRGF0YS5GSUxFSU5GT1swXS5pc2RpcgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc2VsZWN0RmlsZUxpc3QucHVzaChvYmopOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc2hhcmVpZCA9IHl1bkRhdGEuU0hBUkVfSUQ7CiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aCA9IGdldFBhdGgoKTsKICAgICAgICAgICAgICAgIGxpc3RfZ3JpZF9zdGF0dXMgPSBnZXRMaXN0R3JpZFN0YXR1cygpOwogICAgICAgICAgICAgICAgZmlsZUxpc3QgPSBnZXRGaWxlTGlzdCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvL+WIpOaWreWIhuS6q+exu+Wei++8iHB1YmxpY+aIluiAhXNlY3JldO+8iQogICAgICAgIGZ1bmN0aW9uIGdldFNoYXJlVHlwZSgpewogICAgICAgICAgICByZXR1cm4geXVuRGF0YS5TSEFSRV9QVUJMSUM9PT0xID8gJ3B1YmxpYycgOiAnc2VjcmV0JzsKICAgICAgICB9CgogICAgICAgIC8v5Yik5pat5piv5Y2V5Liq5paH5Lu25YiG5Lqr6L+Y5piv5paH5Lu25aS55oiW6ICF5aSa5paH5Lu25YiG5LqrCiAgICAgICAgZnVuY3Rpb24gaXNTaW5nbGVTaGFyZSgpewogICAgICAgICAgICByZXR1cm4geXVuRGF0YS5nZXRDb250ZXh0ID09PSB1bmRlZmluZWQgPyB0cnVlIDogZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAvL+WIpOaWreaYr+WQpuS4uuiHquW3seeahOWIhuS6q+mTvuaOpQogICAgICAgIGZ1bmN0aW9uIGlzU2VsZlNoYXJlKCl7CiAgICAgICAgICAgIHJldHVybiB5dW5EYXRhLk1ZU0VMRiA9PSAxID8gdHJ1ZSA6IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0RXh0cmEoKXsKICAgICAgICAgICAgdmFyIHNlS2V5ID0gZGVjb2RlVVJJQ29tcG9uZW50KGdldENvb2tpZSgnQkRDTE5EJykpOwogICAgICAgICAgICByZXR1cm4gJ3snICsgJyJzZWtleSI6IicgKyBzZUtleSArICciJyArICJ9IjsKICAgICAgICB9CgogICAgICAgIC8v6I635Y+W5b2T5YmN55uu5b2VCiAgICAgICAgZnVuY3Rpb24gZ2V0UGF0aCgpewogICAgICAgICAgICB2YXIgaGFzaCA9IGxvY2F0aW9uLmhhc2g7CiAgICAgICAgICAgIHZhciByZWd4ID0gLyhefCZ8XC8pcGF0aD0oW14mXSopKCZ8JCkvaTsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGhhc2gubWF0Y2gocmVneCk7CiAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0WzJdKTsKICAgICAgICB9CgogICAgICAgIC8v6I635Y+W5b2T5YmN55qE6KeG5Zu+5qih5byPCiAgICAgICAgZnVuY3Rpb24gZ2V0TGlzdEdyaWRTdGF0dXMoKXsKICAgICAgICAgICAgdmFyIHN0YXR1cyA9ICdsaXN0JzsKICAgICAgICAgICAgdmFyICRzdGF0dXNfZGl2ID0gJCgnZGl2Lmxpc3QtZ3JpZC1zd2l0Y2gnKTsKICAgICAgICAgICAgaWYgKCRzdGF0dXNfZGl2Lmhhc0NsYXNzKCdsaXN0LXN3aXRjaGVkLW9uJykpewogICAgICAgICAgICAgICAgc3RhdHVzID0gJ2xpc3QnOwogICAgICAgICAgICB9IGVsc2UgaWYgKCRzdGF0dXNfZGl2Lmhhc0NsYXNzKCdncmlkLXN3aXRjaGVkLW9uJykpIHsKICAgICAgICAgICAgICAgIHN0YXR1cyA9ICdncmlkJzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc3RhdHVzOwogICAgICAgIH0KCiAgICAgICAgLy/mt7vliqDkuIvovb3liqnmiYvmjInpkq4KICAgICAgICBmdW5jdGlvbiBhZGRCdXR0b24oKXsKICAgICAgICAgICAgaWYoaXNTaW5nbGVTaGFyZSgpKXsKICAgICAgICAgICAgICAgICQoJ2Rpdi5zbGlkZS1zaG93LXJpZ2h0JykuY3NzKCd3aWR0aCcsJzUwMHB4Jyk7CiAgICAgICAgICAgICAgICAkKCdkaXYuZnJhbWUtbWFpbicpLmNzcygnd2lkdGgnLCc5NiUnKTsKICAgICAgICAgICAgICAgICQoJ2Rpdi5zaGFyZS1maWxlLXZpZXdlcicpLmNzcygnd2lkdGgnLCc3NDBweCcpLmNzcygnbWFyZ2luLWxlZnQnLCdhdXRvJykuY3NzKCdtYXJnaW4tcmlnaHQnLCdhdXRvJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgJCgnZGl2LnNsaWRlLXNob3ctcmlnaHQnKS5jc3MoJ3dpZHRoJywnNTAwcHgnKTsKICAgICAgICAgICAgdmFyICRkcm9wZG93bmJ1dHRvbiA9ICQoJzxzcGFuIGNsYXNzPSJnLWRyb3Bkb3duLWJ1dHRvbiI+PC9zcGFuPicpOwogICAgICAgICAgICB2YXIgJGRyb3Bkb3duYnV0dG9uX2EgPSAkKCc8YSBjbGFzcz0iZy1idXR0b24iIGRhdGEtYnV0dG9uLWlkPSJiMjAwIiBkYXRhLWJ1dHRvbi1pbmRleD0iMjAwIiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij48L2E+Jyk7CiAgICAgICAgICAgIHZhciAkZHJvcGRvd25idXR0b25fYV9zcGFuID0gJCgnPHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0Ij48ZW0gY2xhc3M9Imljb24gaWNvbi1kb3dubG9hZCIgdGl0bGU9IueZvuW6pue9keebmOS4i+i9veWKqeaJiyI+PC9lbT48c3BhbiBjbGFzcz0idGV4dCIgc3R5bGU9IndpZHRoOiBhdXRvOyI+5LiL6L295Yqp5omLPC9zcGFuPjwvc3Bhbj4nKTsKICAgICAgICAgICAgdmFyICRkcm9wZG93bmJ1dHRvbl9zcGFuID0gJCgnPHNwYW4gY2xhc3M9Im1lbnUiIHN0eWxlPSJ3aWR0aDphdXRvO3otaW5kZXg6NDEiPjwvc3Bhbj4nKTsKCiAgICAgICAgICAgIHZhciAkZG93bmxvYWRCdXR0b24gPSAkKCc8YSBkYXRhLW1lbnUtaWQ9ImItbWVudTIwNyIgY2xhc3M9ImctYnV0dG9uLW1lbnUiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuebtOaOpeS4i+i9vTwvYT4nKTsKICAgICAgICAgICAgdmFyICRsaW5rQnV0dG9uID0gJCgnPGEgZGF0YS1tZW51LWlkPSJiLW1lbnUyMDgiIGNsYXNzPSJnLWJ1dHRvbi1tZW51IiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij7mmL7npLrpk77mjqU8L2E+Jyk7CgogICAgICAgICAgICAkZHJvcGRvd25idXR0b25fc3Bhbi5hcHBlbmQoJGRvd25sb2FkQnV0dG9uKS5hcHBlbmQoJGxpbmtCdXR0b24pOwogICAgICAgICAgICAkZHJvcGRvd25idXR0b25fYS5hcHBlbmQoJGRyb3Bkb3duYnV0dG9uX2Ffc3Bhbik7CiAgICAgICAgICAgICRkcm9wZG93bmJ1dHRvbi5hcHBlbmQoJGRyb3Bkb3duYnV0dG9uX2EpLmFwcGVuZCgkZHJvcGRvd25idXR0b25fc3Bhbik7CgogICAgICAgICAgICAkZHJvcGRvd25idXR0b24uaG92ZXIoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICRkcm9wZG93bmJ1dHRvbi50b2dnbGVDbGFzcygnYnV0dG9uLW9wZW4nKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAkZG93bmxvYWRCdXR0b24uY2xpY2soZG93bmxvYWRCdXR0b25DbGljayk7CiAgICAgICAgICAgICRsaW5rQnV0dG9uLmNsaWNrKGxpbmtCdXR0b25DbGljayk7CgogICAgICAgICAgICAkKCdkaXYubW9kdWxlLXNoYXJlLXRvcC1iYXIgZGl2LmJhciBkaXYuYnV0dG9uLWJveCcpLmFwcGVuZCgkZHJvcGRvd25idXR0b24pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlSWZyYW1lKCl7CiAgICAgICAgICAgIHZhciAkZGl2ID0gJCgnPGRpdiBjbGFzcz0iaGVscGVyLWhpZGUiIHN0eWxlPSJwYWRkaW5nOjA7bWFyZ2luOjA7ZGlzcGxheTpibG9jayI+PC9kaXY+Jyk7CiAgICAgICAgICAgIHZhciAkaWZyYW1lID0gJCgnPGlmcmFtZSBzcmM9ImphdmFzY3JpcHQ6dm9pZCgwKSIgaWQ9ImhlbHBlcmRvd25sb2FkaWZyYW1lIiBzdHlsZT0iZGlzcGxheTpub25lIj48L2lmcmFtZT4nKTsKICAgICAgICAgICAgJGRpdi5hcHBlbmQoJGlmcmFtZSk7CiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJGRpdik7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZWdpc3RlckV2ZW50TGlzdGVuZXIoKXsKICAgICAgICAgICAgcmVnaXN0ZXJIYXNoQ2hhbmdlKCk7CiAgICAgICAgICAgIHJlZ2lzdGVyTGlzdEdyaWRTdGF0dXMoKTsKICAgICAgICAgICAgcmVnaXN0ZXJDaGVja2JveCgpOwogICAgICAgICAgICByZWdpc3RlckFsbENoZWNrYm94KCk7CiAgICAgICAgICAgIHJlZ2lzdGVyRmlsZVNlbGVjdCgpOwogICAgICAgIH0KCiAgICAgICAgLy/nm5Hop4blnLDlnYDmoI8j5qCH562+5Y+Y5YyWCiAgICAgICAgZnVuY3Rpb24gcmVnaXN0ZXJIYXNoQ2hhbmdlKCl7CiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgIGxpc3RfZ3JpZF9zdGF0dXMgPSBnZXRMaXN0R3JpZFN0YXR1cygpOwogICAgICAgICAgICAgICAgaWYoY3VycmVudFBhdGggPT0gZ2V0UGF0aCgpKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoID0gZ2V0UGF0aCgpOwogICAgICAgICAgICAgICAgICAgIHJlZnJlc2hGaWxlTGlzdCgpOwogICAgICAgICAgICAgICAgICAgIHJlZnJlc2hTZWxlY3RGaWxlTGlzdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlZnJlc2hGaWxlTGlzdCgpewogICAgICAgICAgICBmaWxlTGlzdCA9IGdldEZpbGVMaXN0KCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZWZyZXNoU2VsZWN0RmlsZUxpc3QoKXsKICAgICAgICAgICAgc2VsZWN0RmlsZUxpc3QgPSBbXTsKICAgICAgICB9CgogICAgICAgIC8v55uR6KeG6KeG5Zu+5Y+Y5YyWCiAgICAgICAgZnVuY3Rpb24gcmVnaXN0ZXJMaXN0R3JpZFN0YXR1cygpewogICAgICAgICAgICB2YXIgJGFfbGlzdCA9ICQoJ2Fbbm9kZS10eXBlPWxpc3Qtc3dpdGNoXScpOwogICAgICAgICAgICAkYV9saXN0LmNsaWNrKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBsaXN0X2dyaWRfc3RhdHVzID0gJ2xpc3QnOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHZhciAkYV9ncmlkID0gJCgnYVtub2RlLXR5cGU9Z3JpZC1zd2l0Y2hdJyk7CiAgICAgICAgICAgICRhX2dyaWQuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGxpc3RfZ3JpZF9zdGF0dXMgPSAnZ3JpZCc7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy/nm5Hop4bmlofku7bpgInmi6nmoYYKICAgICAgICBmdW5jdGlvbiByZWdpc3RlckNoZWNrYm94KCl7CiAgICAgICAgICAgIC8vdmFyICRjaGVja2JveCA9ICQoJ3NwYW4uY2hlY2tib3gnKTsKICAgICAgICAgICAgdmFyICRjaGVja2JveCA9ICQoJ3NwYW4uJyt3b3JkTWFwWydjaGVja2JveCddKTsKICAgICAgICAgICAgJGNoZWNrYm94LmVhY2goZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLmJpbmQoJ2NsaWNrJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICB2YXIgJHBhcmVudCA9ICQodGhpcykucGFyZW50KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVuYW1lOwogICAgICAgICAgICAgICAgICAgIGlmKGxpc3RfZ3JpZF9zdGF0dXMgPT0gJ2xpc3QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gJCgnZGl2LmZpbGUtbmFtZSBkaXYudGV4dCBhJywkcGFyZW50KS5hdHRyKCd0aXRsZScpOwogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGxpc3RfZ3JpZF9zdGF0dXMgPT0gJ2dyaWQnKXsKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAkKCdkaXYuZmlsZS1uYW1lIGEnLCRwYXJlbnQpLmF0dHIoJ3RpdGxlJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKCRwYXJlbnQuaGFzQ2xhc3MoJ2l0ZW0tYWN0aXZlJykpewogICAgICAgICAgICAgICAgICAgICAgICBzbG9nKCflj5bmtojpgInkuK3mlofku7bvvJonK2ZpbGVuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxzZWxlY3RGaWxlTGlzdC5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlbGVjdEZpbGVMaXN0W2ldLmZpbGVuYW1lID09IGZpbGVuYW1lKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RGaWxlTGlzdC5zcGxpY2UoaSwxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBzbG9nKCfpgInkuK3mlofku7bvvJonK2ZpbGVuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGZpbGVMaXN0LGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbWVudC5zZXJ2ZXJfZmlsZW5hbWUgPT0gZmlsZW5hbWUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOmVsZW1lbnQuc2VydmVyX2ZpbGVuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOmVsZW1lbnQucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnNfaWQ6ZWxlbWVudC5mc19pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNkaXI6ZWxlbWVudC5pc2RpcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0RmlsZUxpc3QucHVzaChvYmopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1bnJlZ2lzdGVyQ2hlY2tib3goKXsKICAgICAgICAgICAgLy92YXIgJGNoZWNrYm94ID0gJCgnc3Bhbi5jaGVja2JveCcpOwogICAgICAgICAgICB2YXIgJGNoZWNrYm94ID0gJCgnc3Bhbi4nK3dvcmRNYXBbJ2NoZWNrYm94J10pOwogICAgICAgICAgICAkY2hlY2tib3guZWFjaChmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICQoZWxlbWVudCkudW5iaW5kKCdjbGljaycpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8v55uR6KeG5YWo6YCJ5qGGCiAgICAgICAgZnVuY3Rpb24gcmVnaXN0ZXJBbGxDaGVja2JveCgpewogICAgICAgICAgICAvL3ZhciAkY2hlY2tib3ggPSAkKCdkaXYuY29sLWl0ZW0uY2hlY2snKTsKICAgICAgICAgICAgdmFyICRjaGVja2JveCA9ICQoJ2Rpdi4nK3dvcmRNYXBbJ2NvbC1pdGVtJ10rJy4nK3dvcmRNYXBbJ2NoZWNrJ10pOwogICAgICAgICAgICAkY2hlY2tib3guZWFjaChmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICQoZWxlbWVudCkuYmluZCgnY2xpY2snLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIHZhciAkcGFyZW50ID0gJCh0aGlzKS5wYXJlbnQoKTsKICAgICAgICAgICAgICAgICAgICAvL2lmKCRwYXJlbnQuaGFzQ2xhc3MoJ2NoZWNrZWQnKSl7CiAgICAgICAgICAgICAgICAgICAgaWYoJHBhcmVudC5oYXNDbGFzcyh3b3JkTWFwWydjaGVja2VkJ10pKXsKICAgICAgICAgICAgICAgICAgICAgICAgc2xvZygn5Y+W5raI5YWo6YCJJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2xvZygn5YWo6YOo6YCJ5LitJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEZpbGVMaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaChmaWxlTGlzdCxmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6ZWxlbWVudC5zZXJ2ZXJfZmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDplbGVtZW50LnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnNfaWQ6ZWxlbWVudC5mc19pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc2RpcjplbGVtZW50LmlzZGlyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0RmlsZUxpc3QucHVzaChvYmopOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1bnJlZ2lzdGVyQWxsQ2hlY2tib3goKXsKICAgICAgICAgICAgLy92YXIgJGNoZWNrYm94ID0gJCgnZGl2LmNvbC1pdGVtLmNoZWNrJyk7CiAgICAgICAgICAgIHZhciAkY2hlY2tib3ggPSAkKCdkaXYuJyt3b3JkTWFwWydjb2wtaXRlbSddKycuJyt3b3JkTWFwWydjaGVjayddKTsKICAgICAgICAgICAgJGNoZWNrYm94LmVhY2goZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLnVuYmluZCgnY2xpY2snKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvL+ebkeinhuWNleS4quaWh+S7tumAieS4rQogICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyRmlsZVNlbGVjdCgpewogICAgICAgICAgICAvL3ZhciAkZGQgPSAkKCdkaXYubGlzdC12aWV3IGRkJyk7CiAgICAgICAgICAgIHZhciAkZGQgPSAkKCdkaXYuJyt3b3JkTWFwWydsaXN0LXZpZXcnXSsnIGRkJyk7CiAgICAgICAgICAgICRkZC5lYWNoKGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgJChlbGVtZW50KS5iaW5kKCdjbGljaycsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVOYW1lID0gZS50YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgICBpZihub2RlTmFtZSAhPSAnc3BhbicgJiYgbm9kZU5hbWUgIT0gJ2EnICYmIG5vZGVOYW1lICE9ICdlbScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0RmlsZUxpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVuYW1lID0gJCgnZGl2LmZpbGUtbmFtZSBkaXYudGV4dCBhJywkKHRoaXMpKS5hdHRyKCd0aXRsZScpOwogICAgICAgICAgICAgICAgICAgICAgICBzbG9nKCfpgInkuK3mlofku7bvvJonICsgZmlsZW5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goZmlsZUxpc3QsZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbGVtZW50LnNlcnZlcl9maWxlbmFtZSA9PSBmaWxlbmFtZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6ZWxlbWVudC5zZXJ2ZXJfZmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6ZWxlbWVudC5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmc19pZDplbGVtZW50LmZzX2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc2RpcjplbGVtZW50LmlzZGlyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RGaWxlTGlzdC5wdXNoKG9iaik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVucmVnaXN0ZXJGaWxlU2VsZWN0KCl7CiAgICAgICAgICAgIC8vdmFyICRkZCA9ICQoJ2Rpdi5saXN0LXZpZXcgZGQnKTsKICAgICAgICAgICAgdmFyICRkZCA9ICQoJ2Rpdi4nK3dvcmRNYXBbJ2xpc3QtdmlldyddKycgZGQnKTsKICAgICAgICAgICAgJGRkLmVhY2goZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLnVuYmluZCgnY2xpY2snKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvL+ebkeinhuaWh+S7tuWIl+ihqOaYvuekuuWPmOWMlgogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU9ic2VydmVyKCl7CiAgICAgICAgICAgIHZhciBNdXRhdGlvbk9ic2VydmVyID0gd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI7CiAgICAgICAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgICAgICAgICAgJ2NoaWxkTGlzdCc6IHRydWUKICAgICAgICAgICAgfTsKICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihtdXRhdGlvbnMpewogICAgICAgICAgICAgICAgdW5yZWdpc3RlckNoZWNrYm94KCk7CiAgICAgICAgICAgICAgICB1bnJlZ2lzdGVyQWxsQ2hlY2tib3goKTsKICAgICAgICAgICAgICAgIHVucmVnaXN0ZXJGaWxlU2VsZWN0KCk7CiAgICAgICAgICAgICAgICByZWdpc3RlckNoZWNrYm94KCk7CiAgICAgICAgICAgICAgICByZWdpc3RlckFsbENoZWNrYm94KCk7CiAgICAgICAgICAgICAgICByZWdpc3RlckZpbGVTZWxlY3QoKTsgCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvL3ZhciBsaXN0X3ZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGlzdC12aWV3Jyk7CiAgICAgICAgICAgIC8vdmFyIGdyaWRfdmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ncmlkLXZpZXcnKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBsaXN0X3ZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJyt3b3JkTWFwWydsaXN0LXZpZXcnXSk7CiAgICAgICAgICAgIHZhciBncmlkX3ZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJyt3b3JkTWFwWydncmlkLXZpZXcnXSk7CgogICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGxpc3RfdmlldyxvcHRpb25zKTsKICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShncmlkX3ZpZXcsb3B0aW9ucyk7CiAgICAgICAgfQoKICAgICAgICAvL+iOt+WPluaWh+S7tuS/oeaBr+WIl+ihqAogICAgICAgIGZ1bmN0aW9uIGdldEZpbGVMaXN0KCl7CiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgICAgICAgaWYoZ2V0UGF0aCgpID09ICcvJyl7CiAgICAgICAgICAgICAgICByZXN1bHQgPSB5dW5EYXRhLkZJTEVJTkZPOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbG9naWQgPSBnZXRMb2dJRCgpOwogICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgICB1azp1aywKICAgICAgICAgICAgICAgICAgICBzaGFyZWlkOnNoYXJlaWQsCiAgICAgICAgICAgICAgICAgICAgb3JkZXI6J290aGVyJywKICAgICAgICAgICAgICAgICAgICBkZXNjOjEsCiAgICAgICAgICAgICAgICAgICAgc2hvd2VtcHR5OjAsCiAgICAgICAgICAgICAgICAgICAgd2ViOndlYiwKICAgICAgICAgICAgICAgICAgICBkaXI6Z2V0UGF0aCgpLAogICAgICAgICAgICAgICAgICAgIHQ6TWF0aC5yYW5kb20oKSwKICAgICAgICAgICAgICAgICAgICBiZHN0b2tlbjpiZHN0b2tlbiwKICAgICAgICAgICAgICAgICAgICBjaGFubmVsOmNoYW5uZWwsCiAgICAgICAgICAgICAgICAgICAgY2xpZW50dHlwZTpjbGllbnR0eXBlLAogICAgICAgICAgICAgICAgICAgIGFwcF9pZDphcHBfaWQsCiAgICAgICAgICAgICAgICAgICAgbG9naWQ6bG9naWQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAkLmFqYXgoewogICAgICAgICAgICAgICAgICAgIHVybDpzaGFyZUxpc3RVcmwsCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOidHRVQnLAogICAgICAgICAgICAgICAgICAgIGFzeW5jOmZhbHNlLAogICAgICAgICAgICAgICAgICAgIGRhdGE6cGFyYW1zLAogICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzcG9uc2UpewogICAgICAgICAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5lcnJubyA9PT0gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXNwb25zZS5saXN0OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGRvd25sb2FkQnV0dG9uQ2xpY2soKXsKICAgICAgICAgICAgc2xvZygn6YCJ5Lit5paH5Lu25YiX6KGo77yaJyxzZWxlY3RGaWxlTGlzdCk7CiAgICAgICAgICAgIGlmKHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA9PT0gMCl7CiAgICAgICAgICAgICAgICBhbGVydCgn6I635Y+W5paH5Lu2SUTlpLHotKXvvIzor7fph43or5UnKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBidXR0b25UYXJnZXQgPSAnZG93bmxvYWQnOwogICAgICAgICAgICB2YXIgZG93bmxvYWRMaW5rID0gZ2V0RG93bmxvYWRMaW5rKCk7CgogICAgICAgICAgICBpZihkb3dubG9hZExpbmsuZXJybm8gPT0gLTIwKSB7CiAgICAgICAgICAgICAgICB2Y29kZSA9IGdldFZDb2RlKCk7CiAgICAgICAgICAgICAgICBpZih2Y29kZS5lcnJubyAhPT0gMCl7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+iOt+WPlumqjOivgeeggeWksei0pe+8gScpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZjb2RlRGlhbG9nLm9wZW4odmNvZGUpOwogICAgICAgICAgICB9IGVsc2UgaWYoZG93bmxvYWRMaW5rLmVycm5vID09IDExMil7CiAgICAgICAgICAgICAgICBhbGVydCgn6aG16Z2i6L+H5pyf77yM6K+35Yi35paw6YeN6K+VJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG93bmxvYWRMaW5rLmVycm5vID09PSAwKSB7CiAgICAgICAgICAgICAgICB2YXIgbGluazsKICAgICAgICAgICAgICAgIGlmKHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA9PSAxICYmIHNlbGVjdEZpbGVMaXN0WzBdLmlzZGlyID09PSAwKQogICAgICAgICAgICAgICAgICAgIGxpbmsgPSBkb3dubG9hZExpbmsubGlzdFswXS5kbGluazsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBsaW5rID0gZG93bmxvYWRMaW5rLmRsaW5rOwogICAgICAgICAgICAgICAgZXhlY0Rvd25sb2FkKGxpbmspOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYWxlcnQoJ+iOt+WPluS4i+i9vemTvuaOpeWksei0pe+8gScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvL+iOt+WPlumqjOivgeeggQogICAgICAgIGZ1bmN0aW9uIGdldFZDb2RlKCl7CiAgICAgICAgICAgIHZhciB1cmwgPSBwYW5BUElVcmwgKyAnZ2V0dmNvZGUnOwogICAgICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgICAgICBsb2dpZCA9IGdldExvZ0lEKCk7CiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICBwcm9kOidwYW4nLAogICAgICAgICAgICAgICAgdDpNYXRoLnJhbmRvbSgpLAogICAgICAgICAgICAgICAgYmRzdG9rZW46YmRzdG9rZW4sCiAgICAgICAgICAgICAgICBjaGFubmVsOmNoYW5uZWwsCiAgICAgICAgICAgICAgICBjbGllbnR0eXBlOmNsaWVudHR5cGUsCiAgICAgICAgICAgICAgICB3ZWI6d2ViLAogICAgICAgICAgICAgICAgYXBwX2lkOmFwcF9pZCwKICAgICAgICAgICAgICAgIGxvZ2lkOmxvZ2lkCiAgICAgICAgICAgIH07CiAgICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICAgICB1cmw6dXJsLAogICAgICAgICAgICAgICAgbWV0aG9kOidHRVQnLAogICAgICAgICAgICAgICAgYXN5bmM6ZmFsc2UsCiAgICAgICAgICAgICAgICBkYXRhOnBhcmFtcywKICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzcG9uc2UpewogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3BvbnNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CgogICAgICAgIC8v5Yi35paw6aqM6K+B56CBCiAgICAgICAgZnVuY3Rpb24gcmVmcmVzaFZDb2RlKCl7CiAgICAgICAgICAgIHZjb2RlID0gZ2V0VkNvZGUoKTsKICAgICAgICAgICAgJCgnI2RpYWxvZy1pbWcnKS5hdHRyKCdzcmMnLHZjb2RlLmltZyk7CiAgICAgICAgfQoKICAgICAgICAvL+mqjOivgeeggeehruiupOaPkOS6pAogICAgICAgIGZ1bmN0aW9uIGNvbmZpcm1DbGljaygpewogICAgICAgICAgICB2YXIgdmFsID0gJCgnI2RpYWxvZy1pbnB1dCcpLnZhbCgpOwogICAgICAgICAgICBpZih2YWwubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAkKCcjZGlhbG9nLWVycicpLnRleHQoJ+ivt+i+k+WFpemqjOivgeeggScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IGVsc2UgaWYodmFsLmxlbmd0aCA8IDQpIHsKICAgICAgICAgICAgICAgICQoJyNkaWFsb2ctZXJyJykudGV4dCgn6aqM6K+B56CB6L6T5YWl6ZSZ6K+v77yM6K+36YeN5paw6L6T5YWlJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0gCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBnZXREb3dubG9hZExpbmtXaXRoVkNvZGUodmFsKTsKICAgICAgICAgICAgaWYocmVzdWx0LmVycm5vID09IC0yMCl7CiAgICAgICAgICAgICAgICB2Y29kZURpYWxvZy5jbG9zZSgpOwogICAgICAgICAgICAgICAgJCgnI2RpYWxvZy1lcnInKS50ZXh0KCfpqozor4HnoIHovpPlhaXplJnor6/vvIzor7fph43mlrDovpPlhaUnKTsKICAgICAgICAgICAgICAgIHJlZnJlc2hWQ29kZSgpOwogICAgICAgICAgICAgICAgaWYoIXZjb2RlIHx8IHZjb2RlLmVycm5vICE9PSAwKXsKICAgICAgICAgICAgICAgICAgICBhbGVydCgn6I635Y+W6aqM6K+B56CB5aSx6LSl77yBJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmNvZGVEaWFsb2cub3BlbigpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5lcnJubyA9PT0gMCkgewogICAgICAgICAgICAgICAgdmNvZGVEaWFsb2cuY2xvc2UoKTsKICAgICAgICAgICAgICAgIHZhciBsaW5rOwogICAgICAgICAgICAgICAgaWYoc2VsZWN0RmlsZUxpc3QubGVuZ3RoID09MSAmJiBzZWxlY3RGaWxlTGlzdFswXS5pc2RpciA9PT0gMCkKICAgICAgICAgICAgICAgICAgICBsaW5rID0gcmVzdWx0Lmxpc3RbMF0uZGxpbms7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgbGluayA9IHJlc3VsdC5kbGluazsKICAgICAgICAgICAgICAgIGlmKGJ1dHRvblRhcmdldCA9PSAnZG93bmxvYWQnKXsKICAgICAgICAgICAgICAgICAgICBleGVjRG93bmxvYWQobGluayk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvblRhcmdldCA9PSAnbGluaycpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZW5hbWUgPSAnJzsKICAgICAgICAgICAgICAgICAgICAkLmVhY2goc2VsZWN0RmlsZUxpc3QsZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA9PSAxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWUgPSBlbGVtZW50LmZpbGVuYW1lOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW5kZXggPT0wKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gZWxlbWVudC5maWxlbmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZSA9IGZpbGVuYW1lICsgJywnICsgZWxlbWVudC5maWxlbmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciBsaW5rTGlzdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6ZmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybHM6WwogICAgICAgICAgICAgICAgICAgICAgICAgICAge3VybDpsaW5rLHJhbms6MX0KICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgdmFyIHRpcCA9ICLmmL7npLrojrflj5bnmoTpk77mjqXvvIzlj6/ku6Xkvb/nlKjlj7PplK7ov4Xpm7fkuIvovb3vvIzlpI3liLbml6DnlKjvvIzpnIDopoHkvKDpgJJjb29raWUiOwogICAgICAgICAgICAgICAgICAgIGRpYWxvZy5vcGVuKHt0aXRsZTon5LiL6L296ZO+5o6lJyx0eXBlOidsaW5rJyxsaXN0OmxpbmtMaXN0LHRpcDp0aXB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCflj5HnlJ/plJnor6/vvIEnKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy/nlJ/miJDkuIvovb3nlKjnmoRmaWRfbGlzdOWPguaVsAogICAgICAgIGZ1bmN0aW9uIGdldEZpZExpc3QoKXsKICAgICAgICAgICAgdmFyIGZpZGxpc3QgPSBbXTsKICAgICAgICAgICAgJC5lYWNoKHNlbGVjdEZpbGVMaXN0LGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgZmlkbGlzdC5wdXNoKGVsZW1lbnQuZnNfaWQpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuICdbJyArIGZpZGxpc3QgKyAnXSc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBsaW5rQnV0dG9uQ2xpY2soKXsKICAgICAgICAgICAgc2xvZygn6YCJ5Lit5paH5Lu25YiX6KGo77yaJyxzZWxlY3RGaWxlTGlzdCk7CiAgICAgICAgICAgIGlmKHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA9PT0gMCl7CiAgICAgICAgICAgICAgICBhbGVydCgn5rKh5pyJ6YCJ5Lit5paH5Lu277yM6K+36YeN6K+VJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnV0dG9uVGFyZ2V0ID0gJ2xpbmsnOwogICAgICAgICAgICB2YXIgZG93bmxvYWRMaW5rID0gZ2V0RG93bmxvYWRMaW5rKCk7CgogICAgICAgICAgICBpZihkb3dubG9hZExpbmsuZXJybm8gPT0gLTIwKSB7CiAgICAgICAgICAgICAgICB2Y29kZSA9IGdldFZDb2RlKCk7CiAgICAgICAgICAgICAgICBpZighdmNvZGUgfHwgdmNvZGUuZXJybm8gIT09IDApewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfojrflj5bpqozor4HnoIHlpLHotKXvvIEnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2Y29kZURpYWxvZy5vcGVuKHZjb2RlKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChkb3dubG9hZExpbmsuZXJybm8gPT0gMTEyKSB7CiAgICAgICAgICAgICAgICBhbGVydCgn6aG16Z2i6L+H5pyf77yM6K+35Yi35paw6YeN6K+VJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG93bmxvYWRMaW5rLmVycm5vID09PSAwKSB7CiAgICAgICAgICAgICAgICB2YXIgbGluazsKICAgICAgICAgICAgICAgIGlmKHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA9PSAxICYmIHNlbGVjdEZpbGVMaXN0WzBdLmlzZGlyID09PSAwKQogICAgICAgICAgICAgICAgICAgIGxpbmsgPSBkb3dubG9hZExpbmsubGlzdFswXS5kbGluazsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBsaW5rID0gZG93bmxvYWRMaW5rLmRsaW5rOwogICAgICAgICAgICAgICAgaWYoc2VsZWN0RmlsZUxpc3QubGVuZ3RoID09IDEpCiAgICAgICAgICAgICAgICAgICAgJCgnI2RpYWxvZy1kb3dubG9hZGxpbmsnKS5hdHRyKCdocmVmJyxsaW5rKS50ZXh0KGxpbmspOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICQoJyNkaWFsb2ctZG93bmxvYWRsaW5rJykuYXR0cignaHJlZicsbGluaykudGV4dChsaW5rKTsKICAgICAgICAgICAgICAgIHZhciBmaWxlbmFtZSA9ICcnOwogICAgICAgICAgICAgICAgJC5lYWNoKHNlbGVjdEZpbGVMaXN0LGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgICAgIGlmKHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA9PSAxKQogICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZSA9IGVsZW1lbnQuZmlsZW5hbWU7CiAgICAgICAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW5kZXggPT0wKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWUgPSBlbGVtZW50LmZpbGVuYW1lOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZSA9IGZpbGVuYW1lICsgJywnICsgZWxlbWVudC5maWxlbmFtZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHZhciBsaW5rTGlzdCA9IHsKICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTpmaWxlbmFtZSwKICAgICAgICAgICAgICAgICAgICB1cmxzOlsKICAgICAgICAgICAgICAgICAgICAgICAge3VybDpsaW5rLHJhbms6MX0KICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIHRpcCA9ICLmmL7npLrojrflj5bnmoTpk77mjqXvvIzlj6/ku6Xkvb/nlKjlj7PplK7ov4Xpm7fkuIvovb3vvIzlpI3liLbml6DnlKjvvIzpnIDopoHkvKDpgJJjb29raWUiOwogICAgICAgICAgICAgICAgZGlhbG9nLm9wZW4oe3RpdGxlOifkuIvovb3pk77mjqUnLHR5cGU6J2xpbmsnLGxpc3Q6bGlua0xpc3QsdGlwOnRpcH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYWxlcnQoJ+iOt+WPluS4i+i9vemTvuaOpeWksei0pe+8gScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvL+iOt+WPluS4i+i9vemTvuaOpQogICAgICAgIGZ1bmN0aW9uIGdldERvd25sb2FkTGluaygpewogICAgICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgICAgICBpZihpc1NpbmdsZVNoYXJlKXsKICAgICAgICAgICAgICAgIGZpZF9saXN0ID0gZ2V0RmlkTGlzdCgpOwogICAgICAgICAgICAgICAgbG9naWQgPSBnZXRMb2dJRCgpOwogICAgICAgICAgICAgICAgdmFyIHVybCA9IHBhbkFQSVVybCArICdzaGFyZWRvd25sb2FkP3NpZ249JyArIHNpZ24gKyAnJnRpbWVzdGFtcD0nICsgdGltZXN0YW1wICsgJyZiZHN0b2tlbj0nICsgYmRzdG9rZW4gKyAnJmNoYW5uZWw9JyArIGNoYW5uZWwgKyAnJmNsaWVudHR5cGU9JyArIGNsaWVudHR5cGUgKyAnJndlYj0nKyB3ZWIgKyAnJmFwcF9pZD0nICsgYXBwX2lkICsgJyZsb2dpZD0nICsgbG9naWQ7CiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gewogICAgICAgICAgICAgICAgICAgIGVuY3J5cHQ6ZW5jcnlwdCwKICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OnByb2R1Y3QsCiAgICAgICAgICAgICAgICAgICAgdWs6dWssCiAgICAgICAgICAgICAgICAgICAgcHJpbWFyeWlkOnByaW1hcnlpZCwKICAgICAgICAgICAgICAgICAgICBmaWRfbGlzdDpmaWRfbGlzdAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGlmKHNoYXJlVHlwZSA9PSAnc2VjcmV0Jyl7CiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmV4dHJhID0gZXh0cmE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZihzZWxlY3RGaWxlTGlzdFswXS5pc2RpciA9PSAxIHx8IHNlbGVjdEZpbGVMaXN0Lmxlbmd0aCA+IDEpewogICAgICAgICAgICAgICAgICAgIHBhcmFtcy50eXBlID0gJ2JhdGNoJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICAgICAgICAgdXJsOnVybCwKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6J1BPU1QnLAogICAgICAgICAgICAgICAgICAgIGFzeW5jOmZhbHNlLAogICAgICAgICAgICAgICAgICAgIGRhdGE6cGFyYW1zLAogICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzcG9uc2UpewogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXNwb25zZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KCiAgICAgICAgLy/mnInpqozor4HnoIHovpPlhaXml7bojrflj5bkuIvovb3pk77mjqUKICAgICAgICBmdW5jdGlvbiBnZXREb3dubG9hZExpbmtXaXRoVkNvZGUodmNvZGVJbnB1dCl7CiAgICAgICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgICAgIGlmKGlzU2luZ2xlU2hhcmUpewogICAgICAgICAgICAgICAgZmlkX2xpc3QgPSBnZXRGaWRMaXN0KCk7CiAgICAgICAgICAgICAgICB2YXIgdXJsID0gcGFuQVBJVXJsICsgJ3NoYXJlZG93bmxvYWQ/c2lnbj0nICsgc2lnbiArICcmdGltZXN0YW1wPScgKyB0aW1lc3RhbXAgKyAnJmJkc3Rva2VuPScgKyBiZHN0b2tlbiArICcmY2hhbm5lbD0nICsgY2hhbm5lbCArICcmY2xpZW50dHlwZT0nICsgY2xpZW50dHlwZSArICcmd2ViPScrIHdlYiArICcmYXBwX2lkPScgKyBhcHBfaWQgKyAnJmxvZ2lkPScgKyBsb2dpZDsKICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICAgICAgZW5jcnlwdDplbmNyeXB0LAogICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6cHJvZHVjdCwKICAgICAgICAgICAgICAgICAgICB2Y29kZV9pbnB1dDp2Y29kZUlucHV0LAogICAgICAgICAgICAgICAgICAgIHZjb2RlX3N0cjp2Y29kZS52Y29kZSwKICAgICAgICAgICAgICAgICAgICB1azp1aywKICAgICAgICAgICAgICAgICAgICBwcmltYXJ5aWQ6cHJpbWFyeWlkLAogICAgICAgICAgICAgICAgICAgIGZpZF9saXN0OmZpZF9saXN0CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaWYoc2hhcmVUeXBlID09ICdzZWNyZXQnKXsKICAgICAgICAgICAgICAgICAgICBwYXJhbXMuZXh0cmEgPSBleHRyYTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKHNlbGVjdEZpbGVMaXN0WzBdLmlzZGlyID09IDEgfHwgc2VsZWN0RmlsZUxpc3QubGVuZ3RoID4gMSApewogICAgICAgICAgICAgICAgICAgIHBhcmFtcy50eXBlID0gJ2JhdGNoJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICAgICAgICAgdXJsOnVybCwKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6J1BPU1QnLAogICAgICAgICAgICAgICAgICAgIGFzeW5jOmZhbHNlLAogICAgICAgICAgICAgICAgICAgIGRhdGE6cGFyYW1zLAogICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzcG9uc2UpewogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXNwb25zZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZXhlY0Rvd25sb2FkKGxpbmspewogICAgICAgICAgICBzbG9nKCfkuIvovb3pk77mjqXvvJonK2xpbmspOwogICAgICAgICAgICAkKCcjaGVscGVyZG93bmxvYWRpZnJhbWUnKS5hdHRyKCdzcmMnLGxpbmspOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBiYXNlNjRFbmNvZGUodCl7CiAgICAgICAgdmFyIGEsIHIsIGUsIG4sIGksIHMsIG8gPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgICAgICAgZm9yIChlID0gdC5sZW5ndGgsciA9IDAsYSA9ICIiOyBlID4gcjsgKSB7CiAgICAgICAgICAgIGlmIChuID0gMjU1ICYgdC5jaGFyQ29kZUF0KHIrKyksciA9PSBlKSB7CiAgICAgICAgICAgICAgICBhICs9IG8uY2hhckF0KG4gPj4gMik7CiAgICAgICAgICAgICAgICBhICs9IG8uY2hhckF0KCgzICYgbikgPDwgNCk7CiAgICAgICAgICAgICAgICBhICs9ICI9PSI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaSA9IHQuY2hhckNvZGVBdChyKyspLHIgPT0gZSkgewogICAgICAgICAgICAgICAgYSArPSBvLmNoYXJBdChuID4+IDIpOwogICAgICAgICAgICAgICAgYSArPSBvLmNoYXJBdCgoMyAmIG4pIDw8IDQgfCAoMjQwICYgaSkgPj4gNCk7CiAgICAgICAgICAgICAgICBhICs9IG8uY2hhckF0KCgxNSAmIGkpIDw8IDIpOwogICAgICAgICAgICAgICAgYSArPSAiPSI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBzID0gdC5jaGFyQ29kZUF0KHIrKyk7CiAgICAgICAgICAgIGEgKz0gby5jaGFyQXQobiA+PiAyKTsKICAgICAgICAgICAgYSArPSBvLmNoYXJBdCgoMyAmIG4pIDw8IDQgfCAoMjQwICYgaSkgPj4gNCk7CiAgICAgICAgICAgIGEgKz0gby5jaGFyQXQoKDE1ICYgaSkgPDwgMiB8ICgxOTIgJiBzKSA+PiA2KTsKICAgICAgICAgICAgYSArPSBvLmNoYXJBdCg2MyAmIHMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZXRlY3RQYWdlKCl7CiAgICAgICAgdmFyIHJlZ3ggPSAvW1wvXS4rW1wvXS9nOwogICAgICAgIHZhciBwYWdlID0gbG9jYXRpb24ucGF0aG5hbWUubWF0Y2gocmVneCk7CiAgICAgICAgcmV0dXJuIHBhZ2VbMF0ucmVwbGFjZSgvXC8vZywnJyk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Q29va2llKGUpIHsKICAgICAgICB2YXIgbywgdDsKICAgICAgICB2YXIgbiA9IGRvY3VtZW50LGM9ZGVjb2RlVVJJOwogICAgICAgIHJldHVybiBuLmNvb2tpZS5sZW5ndGggPiAwICYmIChvID0gbi5jb29raWUuaW5kZXhPZihlICsgIj0iKSwtMSAhPSBvKSA/IChvID0gbyArIGUubGVuZ3RoICsgMSx0ID0gbi5jb29raWUuaW5kZXhPZigiOyIsIG8pLC0xID09IHQgJiYgKHQgPSBuLmNvb2tpZS5sZW5ndGgpLGMobi5jb29raWUuc3Vic3RyaW5nKG8sIHQpKSkgOiAiIjsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRMb2dJRCgpewogICAgICAgIHZhciBuYW1lID0gIkJBSURVSUQiOwogICAgICAgIHZhciB1ID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9+77yBQCPvv6Ul4oCm4oCmJiI7CiAgICAgICAgdmFyIGQgPSAvW1x1RDgwMC1cdURCRkZdW1x1REMwMC1cdURGRkZGXXxbXlx4MDAtXHg3Rl0vZzsKICAgICAgICB2YXIgZiA9IFN0cmluZy5mcm9tQ2hhckNvZGU7CiAgICAgICAgZnVuY3Rpb24gbChlKXsKICAgICAgICAgICAgaWYgKGUubGVuZ3RoIDwgMikgewogICAgICAgICAgICAgICAgdmFyIG4gPSBlLmNoYXJDb2RlQXQoMCk7CiAgICAgICAgICAgICAgICByZXR1cm4gMTI4ID4gbiA/IGUgOiAyMDQ4ID4gbiA/IGYoMTkyIHwgbiA+Pj4gNikgKyBmKDEyOCB8IDYzICYgbikgOiBmKDIyNCB8IG4gPj4+IDEyICYgMTUpICsgZigxMjggfCBuID4+PiA2ICYgNjMpICsgZigxMjggfCA2MyAmIG4pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBuID0gNjU1MzYgKyAxMDI0ICogKGUuY2hhckNvZGVBdCgwKSAtIDU1Mjk2KSArIChlLmNoYXJDb2RlQXQoMSkgLSA1NjMyMCk7CiAgICAgICAgICAgIHJldHVybiBmKDI0MCB8IG4gPj4+IDE4ICYgNykgKyBmKDEyOCB8IG4gPj4+IDEyICYgNjMpICsgZigxMjggfCBuID4+PiA2ICYgNjMpICsgZigxMjggfCA2MyAmIG4pOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBnKGUpewogICAgICAgICAgICByZXR1cm4gKGUgKyAiIiArIE1hdGgucmFuZG9tKCkpLnJlcGxhY2UoZCwgbCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIG0oZSl7CiAgICAgICAgICAgIHZhciBuID0gWzAsIDIsIDFdW2UubGVuZ3RoICUgM107CiAgICAgICAgICAgIHZhciB0ID0gZS5jaGFyQ29kZUF0KDApIDw8IDE2IHwgKGUubGVuZ3RoID4gMSA/IGUuY2hhckNvZGVBdCgxKSA6IDApIDw8IDggfCAoZS5sZW5ndGggPiAyID8gZS5jaGFyQ29kZUF0KDIpIDogMCk7CiAgICAgICAgICAgIHZhciBvID0gW3UuY2hhckF0KHQgPj4+IDE4KSwgdS5jaGFyQXQodCA+Pj4gMTIgJiA2MyksIG4gPj0gMiA/ICI9IiA6IHUuY2hhckF0KHQgPj4+IDYgJiA2MyksIG4gPj0gMSA/ICI9IiA6IHUuY2hhckF0KDYzICYgdCldOwogICAgICAgICAgICByZXR1cm4gby5qb2luKCIiKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gaChlKXsKICAgICAgICAgICAgcmV0dXJuIGUucmVwbGFjZSgvW1xzXFNdezEsM30vZywgbSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHAoKXsKICAgICAgICAgICAgcmV0dXJuIGgoZygobmV3IERhdGUoKSkuZ2V0VGltZSgpKSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHcoZSxuKXsKICAgICAgICAgICAgcmV0dXJuIG4gPyBwKFN0cmluZyhlKSkucmVwbGFjZSgvWytcL10vZywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuICIrIiA9PSBlID8gIi0iIDogIl8iOwogICAgICAgICAgICB9KS5yZXBsYWNlKC89L2csICIiKSA6IHAoU3RyaW5nKGUpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHcoZ2V0Q29va2llKG5hbWUpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBEaWFsb2coKXsKICAgICAgICB2YXIgbGlua0xpc3QgPSBbXTsKICAgICAgICB2YXIgc2hvd1BhcmFtczsKICAgICAgICB2YXIgZGlhbG9nLHNoYWRvdzsKICAgICAgICBmdW5jdGlvbiBjcmVhdGVEaWFsb2coKXsKICAgICAgICAgICAgdmFyIHNjcmVlbldpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDsKICAgICAgICAgICAgdmFyIGRpYWxvZ0xlZnQgPSBzY3JlZW5XaWR0aD44MDAgPyAoc2NyZWVuV2lkdGgtODAwKS8yIDogMDsKICAgICAgICAgICAgdmFyICRkaWFsb2dfZGl2ID0gJCgnPGRpdiBjbGFzcz0iZGlhbG9nIiBzdHlsZT0id2lkdGg6IDgwMHB4OyB0b3A6IDBweDsgYm90dG9tOiBhdXRvOyBsZWZ0OiAnK2RpYWxvZ0xlZnQrJ3B4OyByaWdodDogYXV0bzsgZGlzcGxheTogaGlkZGVuOyB2aXNpYmlsaXR5OiB2aXNpYmxlOyB6LWluZGV4OiA1MjsiPjwvZGl2PicpOwogICAgICAgICAgICB2YXIgJGRpYWxvZ19oZWFkZXIgPSAkKCc8ZGl2IGNsYXNzPSJkaWFsb2ctaGVhZGVyIj48aDM+PHNwYW4gY2xhc3M9ImRpYWxvZy10aXRsZSIgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrO3dpZHRoOjc0MHB4O3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdy14OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzIj48L3NwYW4+PC9oMz48L2Rpdj4nKTsKICAgICAgICAgICAgdmFyICRkaWFsb2dfY29udHJvbCA9ICQoJzxkaXYgY2xhc3M9ImRpYWxvZy1jb250cm9sIj48c3BhbiBjbGFzcz0iZGlhbG9nLWljb24gZGlhbG9nLWNsb3NlIj7Dlzwvc3Bhbj48L2Rpdj4nKTsKICAgICAgICAgICAgdmFyICRkaWFsb2dfYm9keSA9ICQoJzxkaXYgY2xhc3M9ImRpYWxvZy1ib2R5IiBzdHlsZT0ibWF4LWhlaWdodDo0NTBweDtvdmVyZmxvdy15OmF1dG87cGFkZGluZzowIDIwcHg7Ij48L2Rpdj4nKTsKICAgICAgICAgICAgdmFyICRkaWFsb2dfdGlwID0gJCgnPGRpdiBjbGFzcz0iZGlhbG9nLXRpcCIgc3R5bGU9InBhZGRpbmctbGVmdDoyMHB4O2JhY2tncm91bmQtY29sb3I6I2ZhZjJkMztib3JkZXItdG9wOiAxcHggc29saWQgI2M0ZGJmZTsiPjxwPjwvcD48L2Rpdj4nKTsKCiAgICAgICAgICAgICRkaWFsb2dfZGl2LmFwcGVuZCgkZGlhbG9nX2hlYWRlci5hcHBlbmQoJGRpYWxvZ19jb250cm9sKSkuYXBwZW5kKCRkaWFsb2dfYm9keSk7CgogICAgICAgICAgICAvL3ZhciAkZGlhbG9nX3RleHRhcmVhID0gJCgnPHRleHRhcmVhIGNsYXNzPSJkaWFsb2ctdGV4dGFyZWEiIHN0eWxlPSJkaXNwbGF5Om5vbmU7d2lkdGgiPjwvdGV4dGFyZWE+Jyk7CiAgICAgICAgICAgIHZhciAkZGlhbG9nX3JhZGlvX2RpdiA9ICQoJzxkaXYgY2xhc3M9ImRpYWxvZy1yYWRpbyIgc3R5bGU9ImRpc3BsYXk6bm9uZTt3aWR0aDo3NjBweDtwYWRkaW5nLWxlZnQ6MjBweDtwYWRkaW5nLXJpZ2h0OjIwcHgiPjwvZGl2PicpOwogICAgICAgICAgICB2YXIgJGRpYWxvZ19yYWRpb19tdWx0aSA9ICQoJzxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0ic2hvd21vZGUiIGNoZWNrZWQ9ImNoZWNrZWQiIHZhbHVlPSJtdWx0aSI+PHNwYW4+5aSa6KGMPC9zcGFuPicpOwogICAgICAgICAgICB2YXIgJGRpYWxvZ19yYWRpb19zaW5nbGUgPSAkKCc8aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9InNob3dtb2RlIiB2YWx1ZT0ic2luZ2xlIj48c3Bhbj7ljZXooYw8L3NwYW4+Jyk7CiAgICAgICAgICAgICRkaWFsb2dfcmFkaW9fZGl2LmFwcGVuZCgkZGlhbG9nX3JhZGlvX211bHRpKS5hcHBlbmQoJGRpYWxvZ19yYWRpb19zaW5nbGUpOwogICAgICAgICAgICAkZGlhbG9nX2Rpdi5hcHBlbmQoJGRpYWxvZ19yYWRpb19kaXYpOwogICAgICAgICAgICAkKCdpbnB1dFt0eXBlPXJhZGlvXVtuYW1lPXNob3dtb2RlXScsJGRpYWxvZ19yYWRpb19kaXYpLmNoYW5nZShmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciAkdGV4dGFyZWEgPSAkKCdkaXYuZGlhbG9nLWJvZHkgdGV4dGFyZWFbbmFtZT1kaWFsb2ctdGV4dGFyZWFdJyxkaWFsb2cpOwogICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSAkdGV4dGFyZWEudmFsKCk7CiAgICAgICAgICAgICAgICBpZih2YWx1ZSA9PSAnbXVsdGknKXsKICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC9ccysvZywnXG4nKTsKICAgICAgICAgICAgICAgICAgICAkdGV4dGFyZWEuY3NzKCdoZWlnaHQnLCczMDBweCcpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmKHZhbHVlID09ICdzaW5nbGUnKXsKICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC9cbisvZywnICcpOwogICAgICAgICAgICAgICAgICAgICR0ZXh0YXJlYS5jc3MoJ2hlaWdodCcsJycpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJHRleHRhcmVhLnZhbChjb250ZW50KTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB2YXIgJGRpYWxvZ19idXR0b24gPSAkKCc8ZGl2IGNsYXNzPSJkaWFsb2ctYnV0dG9uIiBzdHlsZT0iZGlzcGxheTpub25lIj48L2Rpdj4nKTsKICAgICAgICAgICAgdmFyICRkaWFsb2dfYnV0dG9uX2RpdiA9ICQoJzxkaXYgc3R5bGU9ImRpc3BsYXk6dGFibGU7bWFyZ2luOmF1dG8iPjwvZGl2PicpCiAgICAgICAgICAgIHZhciAkZGlhbG9nX2NvcHlfYnV0dG9uID0gJCgnPGJ1dHRvbiBpZD0iZGlhbG9nLWNvcHktYnV0dG9uIiBzdHlsZT0iZGlzcGxheTpub25lIj7lpI3liLY8L2J1dHRvbj4nKTsKICAgICAgICAgICAgdmFyICRkaWFsb2dfZWRpdF9idXR0b24gPSAkKCc8YnV0dG9uIGlkPSJkaWFsb2ctZWRpdC1idXR0b24iIHN0eWxlPSJkaXNwbGF5Om5vbmUiPue8lui+kTwvYnV0dG9uPicpOwogICAgICAgICAgICB2YXIgJGRpYWxvZ19leGl0X2J1dHRvbiA9ICQoJzxidXR0b24gaWQ9ImRpYWxvZy1leGl0LWJ1dHRvbiIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+6YCA5Ye6PC9idXR0b24+Jyk7CgogICAgICAgICAgICAkZGlhbG9nX2J1dHRvbl9kaXYuYXBwZW5kKCRkaWFsb2dfY29weV9idXR0b24pLmFwcGVuZCgkZGlhbG9nX2VkaXRfYnV0dG9uKS5hcHBlbmQoJGRpYWxvZ19leGl0X2J1dHRvbik7CiAgICAgICAgICAgICRkaWFsb2dfYnV0dG9uLmFwcGVuZCgkZGlhbG9nX2J1dHRvbl9kaXYpOwogICAgICAgICAgICAkZGlhbG9nX2Rpdi5hcHBlbmQoJGRpYWxvZ19idXR0b24pOwoKICAgICAgICAgICAgJGRpYWxvZ19jb3B5X2J1dHRvbi5jbGljayhmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSAnJzsKICAgICAgICAgICAgICAgIGlmKHNob3dQYXJhbXMudHlwZSA9PSAnYmF0Y2gnKXsKICAgICAgICAgICAgICAgICAgICAkLmVhY2gobGlua0xpc3QsZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVsZW1lbnQuZG93bmxvYWRsaW5rID09ICdlcnJvcicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGluZGV4ID09IGxpbmtMaXN0Lmxlbmd0aC0xKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQgKyBlbGVtZW50LmRvd25sb2FkbGluazsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9ICBjb250ZW50ICsgZWxlbWVudC5kb3dubG9hZGxpbmsgKyAnXG4nOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmKHNob3dQYXJhbXMudHlwZSA9PSAnbGluaycpewogICAgICAgICAgICAgICAgICAgICQuZWFjaChsaW5rTGlzdCxmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbWVudC51cmwgPT0gJ2Vycm9yJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW5kZXggPT0gbGlua0xpc3QubGVuZ3RoLTEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudCArIGVsZW1lbnQudXJsOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gIGNvbnRlbnQgKyBlbGVtZW50LnVybCArICdcbic7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBHTV9zZXRDbGlwYm9hcmQoY29udGVudCwndGV4dCcpOwogICAgICAgICAgICAgICAgYWxlcnQoJ+W3suWwhumTvuaOpeWkjeWItuWIsOWJqui0tOadv++8gScpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICRkaWFsb2dfZWRpdF9idXR0b24uY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciAkZGlhbG9nX3RleHRhcmVhID0gJCgnZGl2LmRpYWxvZy1ib2R5IHRleHRhcmVhW25hbWU9ZGlhbG9nLXRleHRhcmVhXScsZGlhbG9nKTsKICAgICAgICAgICAgICAgIHZhciAkZGlhbG9nX2l0ZW0gPSAkKCdkaXYuZGlhbG9nLWJvZHkgZGl2JyxkaWFsb2cpOwogICAgICAgICAgICAgICAgJGRpYWxvZ19pdGVtLmhpZGUoKTsKICAgICAgICAgICAgICAgICRkaWFsb2dfY29weV9idXR0b24uaGlkZSgpOwogICAgICAgICAgICAgICAgJGRpYWxvZ19lZGl0X2J1dHRvbi5oaWRlKCk7CiAgICAgICAgICAgICAgICAkZGlhbG9nX3RleHRhcmVhLnNob3coKTsKICAgICAgICAgICAgICAgICRkaWFsb2dfcmFkaW9fZGl2LnNob3coKTsKICAgICAgICAgICAgICAgICRkaWFsb2dfZXhpdF9idXR0b24uc2hvdygpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICRkaWFsb2dfZXhpdF9idXR0b24uY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciAkZGlhbG9nX3RleHRhcmVhID0gJCgnZGl2LmRpYWxvZy1ib2R5IHRleHRhcmVhW25hbWU9ZGlhbG9nLXRleHRhcmVhXScsZGlhbG9nKTsKICAgICAgICAgICAgICAgIHZhciAkZGlhbG9nX2l0ZW0gPSAkKCdkaXYuZGlhbG9nLWJvZHkgZGl2JyxkaWFsb2cpOwogICAgICAgICAgICAgICAgJGRpYWxvZ190ZXh0YXJlYS5oaWRlKCk7CiAgICAgICAgICAgICAgICAkZGlhbG9nX3JhZGlvX2Rpdi5oaWRlKCk7CiAgICAgICAgICAgICAgICAkZGlhbG9nX2l0ZW0uc2hvdygpOwogICAgICAgICAgICAgICAgJGRpYWxvZ19leGl0X2J1dHRvbi5oaWRlKCk7CiAgICAgICAgICAgICAgICAkZGlhbG9nX2NvcHlfYnV0dG9uLnNob3coKTsKICAgICAgICAgICAgICAgICRkaWFsb2dfZWRpdF9idXR0b24uc2hvdygpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICRkaWFsb2dfZGl2LmFwcGVuZCgkZGlhbG9nX3RpcCk7CiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJGRpYWxvZ19kaXYpOwogICAgICAgICAgICAkZGlhbG9nX2Rpdi5kaWFsb2dEcmFnKCk7CiAgICAgICAgICAgICRkaWFsb2dfY29udHJvbC5jbGljayhkaWFsb2dDb250cm9sKTsKICAgICAgICAgICAgcmV0dXJuICRkaWFsb2dfZGl2OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlU2hhZG93KCl7CiAgICAgICAgICAgIHZhciAkc2hhZG93ID0gJCgnPGRpdiBjbGFzcz0iZGlhbG9nLXNoYWRvdyIgc3R5bGU9InBvc2l0aW9uOiBmaXhlZDsgbGVmdDogMHB4OyB0b3A6IDBweDsgei1pbmRleDogNTA7IGJhY2tncm91bmQ6IHJnYigwLCAwLCAwKSBub25lIHJlcGVhdCBzY3JvbGwgMCUgMCU7IG9wYWNpdHk6IDAuNTsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgZGlzcGxheTogbm9uZTsiPjwvZGl2PicpOwogICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCRzaGFkb3cpOwogICAgICAgICAgICByZXR1cm4gJHNoYWRvdzsKICAgICAgICB9CgogICAgICAgIHRoaXMub3BlbiA9IGZ1bmN0aW9uKHBhcmFtcyl7CiAgICAgICAgICAgIHNob3dQYXJhbXMgPSBwYXJhbXM7CiAgICAgICAgICAgIGxpbmtMaXN0ID0gW107CiAgICAgICAgICAgIGlmKHBhcmFtcy50eXBlID09ICdsaW5rJyl7CiAgICAgICAgICAgICAgICBsaW5rTGlzdCA9IHBhcmFtcy5saXN0LnVybHM7CiAgICAgICAgICAgICAgICAkKCdkaXYuZGlhbG9nLWhlYWRlciBoMyBzcGFuLmRpYWxvZy10aXRsZScsZGlhbG9nKS50ZXh0KHBhcmFtcy50aXRsZSArICLvvJoiICtwYXJhbXMubGlzdC5maWxlbmFtZSk7CiAgICAgICAgICAgICAgICAkLmVhY2gocGFyYW1zLmxpc3QudXJscyxmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICAgICB2YXIgJGRpdiA9ICQoJzxkaXY+PGRpdiBzdHlsZT0id2lkdGg6MzBweDtmbG9hdDpsZWZ0Ij4nK2VsZW1lbnQucmFuaysnOjwvZGl2PjxkaXYgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpcyI+PGEgaHJlZj0iJytlbGVtZW50LnVybCsnIj4nK2VsZW1lbnQudXJsKyc8L2E+PC9kaXY+PC9kaXY+Jyk7CiAgICAgICAgICAgICAgICAgICAgJCgnZGl2LmRpYWxvZy1ib2R5JyxkaWFsb2cpLmFwcGVuZCgkZGl2KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYocGFyYW1zLnR5cGUgPT0gJ2JhdGNoJyl7CiAgICAgICAgICAgICAgICBsaW5rTGlzdCA9IHBhcmFtcy5saXN0OwogICAgICAgICAgICAgICAgJCgnZGl2LmRpYWxvZy1oZWFkZXIgaDMgc3Bhbi5kaWFsb2ctdGl0bGUnLGRpYWxvZykudGV4dChwYXJhbXMudGl0bGUpOwogICAgICAgICAgICAgICAgaWYocGFyYW1zLnNob3dhbGwpewogICAgICAgICAgICAgICAgICAgICQuZWFjaChwYXJhbXMubGlzdCxmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRpdGVtX2RpdiA9ICQoJzxkaXYgY2xhc3M9Iml0ZW0tY29udGFpbmVyIiBzdHlsZT0ib3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7d2hpdGUtc3BhY2U6bm93cmFwIj48L2Rpdj4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRpdGVtX25hbWUgPSAkKCc8ZGl2IHN0eWxlPSJ3aWR0aDoxMDBweDtmbG9hdDpsZWZ0O292ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzIiB0aXRsZT0iJytlbGVtZW50LmZpbGVuYW1lKyciPicrZWxlbWVudC5maWxlbmFtZSsnPC9kaXY+Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaXRlbV9zZXAgPSAkKCc8ZGl2IHN0eWxlPSJ3aWR0aDoxMnB4O2Zsb2F0OmxlZnQiPjxzcGFuPu+8mjwvc3Bhbj48L2Rpdj4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRpdGVtX2xpbmtfZGl2ID0gJCgnPGRpdiBjbGFzcz0iaXRlbS1saW5rIiBzdHlsZT0iZmxvYXQ6bGVmdDt3aWR0aDo2MThweDsiPjwvZGl2PicpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGl0ZW1fZmlyc3QgPSAkKCc8ZGl2IGNsYXNzPSJpdGVtLWZpcnN0IiBzdHlsZT0ib3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXMiPjxhIGhyZWY9IicrZWxlbWVudC5kb3dubG9hZGxpbmsrJyI+JytlbGVtZW50LmRvd25sb2FkbGluaysnPC9hPjwvZGl2PicpOwogICAgICAgICAgICAgICAgICAgICAgICAkaXRlbV9saW5rX2Rpdi5hcHBlbmQoJGl0ZW1fZmlyc3QpOwogICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2gocGFyYW1zLmFsbGxpc3RbaW5kZXhdLmxpbmtzLGZ1bmN0aW9uKG4saXRlbSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbGVtZW50LmRvd25sb2FkbGluayA9PSBpdGVtLnVybCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGl0ZW0gPSAkKCc8ZGl2IGNsYXNzPSJpdGVtLWV4IiBzdHlsZT0iZGlzcGxheTpub25lO292ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzIj48YSBocmVmPSInK2l0ZW0udXJsKyciPicraXRlbS51cmwrJzwvYT48L2Rpdj4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpdGVtX2xpbmtfZGl2LmFwcGVuZCgkaXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGl0ZW1fZXggPSAkKCc8ZGl2IHN0eWxlPSJ3aWR0aDoxNXB4O2Zsb2F0OmxlZnQ7Y3Vyc29yOnBvaW50ZXI7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjE2cHgiPjxzcGFuPis8L3NwYW4+PC9kaXY+Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICRpdGVtX2Rpdi5hcHBlbmQoJGl0ZW1fbmFtZSkuYXBwZW5kKCRpdGVtX3NlcCkuYXBwZW5kKCRpdGVtX2xpbmtfZGl2KS5hcHBlbmQoJGl0ZW1fZXgpOwogICAgICAgICAgICAgICAgICAgICAgICAkaXRlbV9leC5jbGljayhmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRwYXJlbnQgPSAkKHRoaXMpLnBhcmVudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhcmVudC50b2dnbGVDbGFzcygnc2hvd2FsbCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHBhcmVudC5oYXNDbGFzcygnc2hvd2FsbCcpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnRleHQoJy0nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCdkaXYuaXRlbS1saW5rIGRpdi5pdGVtLWV4JywkcGFyZW50KS5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudGV4dCgnKycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ2Rpdi5pdGVtLWxpbmsgZGl2Lml0ZW0tZXgnLCRwYXJlbnQpLmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2Rpdi5kaWFsb2ctYm9keScsZGlhbG9nKS5hcHBlbmQoJGl0ZW1fZGl2KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICQuZWFjaChwYXJhbXMubGlzdCxmdW5jdGlvbihpbmRleCxlbGVtZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRkaXYgPSAkKCc8ZGl2IHN0eWxlPSJvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpczt3aGl0ZS1zcGFjZTpub3dyYXAiPjxkaXYgc3R5bGU9IndpZHRoOjEwMHB4O2Zsb2F0OmxlZnQ7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXMiIHRpdGxlPSInK2VsZW1lbnQuZmlsZW5hbWUrJyI+JytlbGVtZW50LmZpbGVuYW1lKyc8L2Rpdj48c3Bhbj7vvJo8L3NwYW4+PGEgaHJlZj0iJytlbGVtZW50LmRvd25sb2FkbGluaysnIj4nK2VsZW1lbnQuZG93bmxvYWRsaW5rKyc8L2E+PC9kaXY+Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2Rpdi5kaWFsb2ctYm9keScsZGlhbG9nKS5hcHBlbmQoJGRpdik7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKHBhcmFtcy50aXApewogICAgICAgICAgICAgICAgJCgnZGl2LmRpYWxvZy10aXAgcCcsZGlhbG9nKS50ZXh0KHBhcmFtcy50aXApOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZihwYXJhbXMuc2hvd2NvcHkpewogICAgICAgICAgICAgICAgJCgnZGl2LmRpYWxvZy1idXR0b24nLGRpYWxvZykuc2hvdygpOwogICAgICAgICAgICAgICAgJCgnZGl2LmRpYWxvZy1idXR0b24gYnV0dG9uI2RpYWxvZy1jb3B5LWJ1dHRvbicsZGlhbG9nKS5zaG93KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYocGFyYW1zLnNob3dlZGl0KXsKICAgICAgICAgICAgICAgICQoJ2Rpdi5kaWFsb2ctYnV0dG9uJyxkaWFsb2cpLnNob3coKTsKICAgICAgICAgICAgICAgICQoJ2Rpdi5kaWFsb2ctYnV0dG9uIGJ1dHRvbiNkaWFsb2ctZWRpdC1idXR0b24nLGRpYWxvZykuc2hvdygpOwogICAgICAgICAgICAgICAgdmFyICRkaWFsb2dfdGV4dGFyZWEgPSAkKCc8dGV4dGFyZWEgbmFtZT0iZGlhbG9nLXRleHRhcmVhIiBzdHlsZT0iZGlzcGxheTpub25lO3Jlc2l6ZTpub25lO3dpZHRoOjc1OHB4O2hlaWdodDozMDBweDt3aGl0ZS1zcGFjZTpwcmU7d29yZC13cmFwOm5vcm1hbDtvdmVyZmxvdy14OnNjcm9sbCI+PC90ZXh0YXJlYT4nKTsKICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gJyc7CiAgICAgICAgICAgICAgICBpZihzaG93UGFyYW1zLnR5cGUgPT0gJ2JhdGNoJyl7CiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGxpbmtMaXN0LGZ1bmN0aW9uKGluZGV4LGVsZW1lbnQpewogICAgICAgICAgICAgICAgICAgICAgICBpZihlbGVtZW50LmRvd25sb2FkbGluayA9PSAnZXJyb3InKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBpZihpbmRleCA9PSBsaW5rTGlzdC5sZW5ndGgtMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50ICsgZWxlbWVudC5kb3dubG9hZGxpbms7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSAgY29udGVudCArIGVsZW1lbnQuZG93bmxvYWRsaW5rICsgJ1xuJzsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZihzaG93UGFyYW1zLnR5cGUgPT0gJ2xpbmsnKXsKICAgICAgICAgICAgICAgICAgICAkLmVhY2gobGlua0xpc3QsZnVuY3Rpb24oaW5kZXgsZWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVsZW1lbnQudXJsID09ICdlcnJvcicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGluZGV4ID09IGxpbmtMaXN0Lmxlbmd0aC0xKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQgKyBlbGVtZW50LnVybDsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9ICBjb250ZW50ICsgZWxlbWVudC51cmwgKyAnXG4nOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJGRpYWxvZ190ZXh0YXJlYS52YWwoY29udGVudCk7CiAgICAgICAgICAgICAgICAkKCdkaXYuZGlhbG9nLWJvZHknLGRpYWxvZykuYXBwZW5kKCRkaWFsb2dfdGV4dGFyZWEpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzaGFkb3cuc2hvdygpOwogICAgICAgICAgICBkaWFsb2cuc2hvdygpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jbG9zZSA9IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGRpYWxvZ0NvbnRyb2woKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGRpYWxvZ0NvbnRyb2woKXsKICAgICAgICAgICAgJCgnZGl2LmRpYWxvZy1ib2R5JyxkaWFsb2cpLmNoaWxkcmVuKCkucmVtb3ZlKCk7CiAgICAgICAgICAgICQoJ2Rpdi5kaWFsb2ctaGVhZGVyIGgzIHNwYW4uZGlhbG9nLXRpdGxlJyxkaWFsb2cpLnRleHQoJycpOwogICAgICAgICAgICAkKCdkaXYuZGlhbG9nLXRpcCBwJyxkaWFsb2cpLnRleHQoJycpOwogICAgICAgICAgICAkKCdkaXYuZGlhbG9nLWJ1dHRvbicsZGlhbG9nKS5oaWRlKCk7CiAgICAgICAgICAgICQoJ2Rpdi5kaWFsb2ctcmFkaW8gaW5wdXRbdHlwZT1yYWRpb11bbmFtZT1zaG93bW9kZV1bdmFsdWU9bXVsdGldJyxkaWFsb2cpLnByb3AoJ2NoZWNrZWQnLHRydWUpOwogICAgICAgICAgICAkKCdkaXYuZGlhbG9nLXJhZGlvJyxkaWFsb2cpLmhpZGUoKTsKICAgICAgICAgICAgJCgnZGl2LmRpYWxvZy1idXR0b24gYnV0dG9uI2RpYWxvZy1jb3B5LWJ1dHRvbicsZGlhbG9nKS5oaWRlKCk7CiAgICAgICAgICAgICQoJ2Rpdi5kaWFsb2ctYnV0dG9uIGJ1dHRvbiNkaWFsb2ctZWRpdC1idXR0b24nLGRpYWxvZykuaGlkZSgpOwogICAgICAgICAgICAkKCdkaXYuZGlhbG9nLWJ1dHRvbiBidXR0b24jZGlhbG9nLWV4aXQtYnV0dG9uJyxkaWFsb2cpLmhpZGUoKTsKICAgICAgICAgICAgZGlhbG9nLmhpZGUoKTsKICAgICAgICAgICAgc2hhZG93LmhpZGUoKTsKICAgICAgICB9CgogICAgICAgIGRpYWxvZyA9IGNyZWF0ZURpYWxvZygpOwogICAgICAgIHNoYWRvdyA9IGNyZWF0ZVNoYWRvdygpOwogICAgfQoKICAgIGZ1bmN0aW9uIFZDb2RlRGlhbG9nKHJlZnJlc2hWQ29kZSxjb25maXJtQ2xpY2spewogICAgICAgIHZhciBkaWFsb2csc2hhZG93OwogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZURpYWxvZygpewogICAgICAgICAgICB2YXIgc2NyZWVuV2lkdGggPSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoOwogICAgICAgICAgICB2YXIgZGlhbG9nTGVmdCA9IHNjcmVlbldpZHRoPjUyMCA/IChzY3JlZW5XaWR0aC01MjApLzIgOiAwOwogICAgICAgICAgICB2YXIgJGRpYWxvZ19kaXYgPSAkKCc8ZGl2IGNsYXNzPSJkaWFsb2ciIGlkPSJkaWFsb2ctdmNvZGUiIHN0eWxlPSJ3aWR0aDo1MjBweDt0b3A6MHB4O2JvdHRvbTphdXRvO2xlZnQ6JytkaWFsb2dMZWZ0KydweDtyaWdodDphdXRvO2Rpc3BsYXk6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ei1pbmRleDo1MiI+PC9kaXY+Jyk7CiAgICAgICAgICAgIHZhciAkZGlhbG9nX2hlYWRlciA9ICQoJzxkaXYgY2xhc3M9ImRpYWxvZy1oZWFkZXIiPjxoMz48c3BhbiBjbGFzcz0iZGlhbG9nLWhlYWRlci10aXRsZSI+PGVtIGNsYXNzPSJzZWxlY3QtdGV4dCI+5o+Q56S6PC9lbT48L3NwYW4+PC9oMz48L2Rpdj4nKTsKICAgICAgICAgICAgdmFyICRkaWFsb2dfY29udHJvbCA9ICQoJzxkaXYgY2xhc3M9ImRpYWxvZy1jb250cm9sIj48c3BhbiBjbGFzcz0iZGlhbG9nLWljb24gZGlhbG9nLWNsb3NlIGljb24gaWNvbi1jbG9zZSI+PHNwYW4gY2xhc3M9InNpY29uIj54PC9zcGFuPjwvc3Bhbj48L2Rpdj4nKTsKICAgICAgICAgICAgdmFyICRkaWFsb2dfYm9keSA9ICQoJzxkaXYgY2xhc3M9ImRpYWxvZy1ib2R5Ij48L2Rpdj4nKTsKICAgICAgICAgICAgdmFyICRkaWFsb2dfYm9keV9kaXYgPSAkKCc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjIycHgiPjwvZGl2PicpOwogICAgICAgICAgICB2YXIgJGRpYWxvZ19ib2R5X2Rvd25sb2FkX3ZlcmlmeSA9ICQoJzxkaXYgY2xhc3M9ImRvd25sb2FkLXZlcmlmeSIgc3R5bGU9Im1hcmdpbi10b3A6MTBweDtwYWRkaW5nOjAgMjhweDt0ZXh0LWFsaWduOmxlZnQ7Zm9udC1zaXplOjEycHg7Ij48L2Rpdj4nKTsKICAgICAgICAgICAgdmFyICRkaWFsb2dfdmVyaWZ5X2JvZHkgPSAkKCc8ZGl2IGNsYXNzPSJ2ZXJpZnktYm9keSI+6K+36L6T5YWl6aqM6K+B56CB77yaPC9kaXY+Jyk7CiAgICAgICAgICAgIHZhciAkZGlhbG9nX2lucHV0ID0gJCgnPGlucHV0IGlkPSJkaWFsb2ctaW5wdXQiIHR5cGU9InRleHQiIHN0eWxlPSJwYWRkaW5nOjNweDt3aWR0aDo4NXB4O2hlaWdodDoyM3B4O2JvcmRlcjoxcHggc29saWQgI2M2YzZjNjtiYWNrZ3JvdW5kLWNvbG9yOndoaXRlO3ZlcnRpY2FsLWFsaWduOm1pZGRsZTsiIGNsYXNzPSJpbnB1dC1jb2RlIiBtYXhsZW5ndGg9IjQiPicpOwogICAgICAgICAgICB2YXIgJGRpYWxvZ19pbWcgPSAkKCc8aW1nIGlkPSJkaWFsb2ctaW1nIiBjbGFzcz0iaW1nLWNvZGUiIHN0eWxlPSJtYXJnaW4tbGVmdDoxMHB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTsiIGFsdD0i54K55Ye75o2i5LiA5bygIiBzcmM9IiIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIzMCI+Jyk7CiAgICAgICAgICAgIHZhciAkZGlhbG9nX3JlZnJlc2ggPSAkKCc8YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIHN0eWxlPSJ0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lOyIgY2xhc3M9InVuZGVybGluZSI+5o2i5LiA5bygPC9hPicpOwogICAgICAgICAgICB2YXIgJGRpYWxvZ19lcnIgPSAkKCc8ZGl2IGlkPSJkaWFsb2ctZXJyIiBzdHlsZT0icGFkZGluZy1sZWZ0Ojg0cHg7aGVpZ2h0OjE4cHg7Y29sb3I6I2Q4MDAwMCIgY2xhc3M9InZlcmlmeS1lcnJvciI+PC9kaXY+Jyk7CiAgICAgICAgICAgIHZhciAkZGlhbG9nX2Zvb3RlciA9ICQoJzxkaXYgY2xhc3M9ImRpYWxvZy1mb290ZXIgZy1jbGVhcmZpeCI+PC9kaXY+Jyk7CiAgICAgICAgICAgIHZhciAkZGlhbG9nX2NvbmZpcm1fYnV0dG9uID0gJCgnPGEgY2xhc3M9ImctYnV0dG9uIGctYnV0dG9uLWJsdWUiIGRhdGEtYnV0dG9uLWlkPSIiIGRhdGEtYnV0dG9uLWluZGV4IGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgc3R5bGU9InBhZGRpbmctbGVmdDozNnB4Ij48c3BhbiBjbGFzcz0iZy1idXR0b24tcmlnaHQiIHN0eWxlPSJwYWRkaW5nLXJpZ2h0OjM2cHg7Ij48c3BhbiBjbGFzcz0idGV4dCIgc3R5bGU9IndpZHRoOmF1dG87Ij7noa7lrpo8L3NwYW4+PC9zcGFuPjwvYT4nKTsKICAgICAgICAgICAgdmFyICRkaWFsb2dfY2FuY2VsX2J1dHRvbiA9ICQoJzxhIGNsYXNzPSJnLWJ1dHRvbiIgZGF0YS1idXR0b24taWQ9IiIgZGF0YS1idXR0b24taW5kZXggaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyIgc3R5bGU9InBhZGRpbmctbGVmdDogMzZweDsiPjxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1yaWdodCIgc3R5bGU9InBhZGRpbmctcmlnaHQ6IDM2cHg7Ij48c3BhbiBjbGFzcz0idGV4dCIgc3R5bGU9IndpZHRoOiBhdXRvOyI+5Y+W5raIPC9zcGFuPjwvc3Bhbj48L2E+Jyk7CgogICAgICAgICAgICAkZGlhbG9nX2hlYWRlci5hcHBlbmQoJGRpYWxvZ19jb250cm9sKTsKICAgICAgICAgICAgJGRpYWxvZ192ZXJpZnlfYm9keS5hcHBlbmQoJGRpYWxvZ19pbnB1dCkuYXBwZW5kKCRkaWFsb2dfaW1nKS5hcHBlbmQoJGRpYWxvZ19yZWZyZXNoKTsKICAgICAgICAgICAgJGRpYWxvZ19ib2R5X2Rvd25sb2FkX3ZlcmlmeS5hcHBlbmQoJGRpYWxvZ192ZXJpZnlfYm9keSkuYXBwZW5kKCRkaWFsb2dfZXJyKTsKICAgICAgICAgICAgJGRpYWxvZ19ib2R5X2Rpdi5hcHBlbmQoJGRpYWxvZ19ib2R5X2Rvd25sb2FkX3ZlcmlmeSk7CiAgICAgICAgICAgICRkaWFsb2dfYm9keS5hcHBlbmQoJGRpYWxvZ19ib2R5X2Rpdik7CiAgICAgICAgICAgICRkaWFsb2dfZm9vdGVyLmFwcGVuZCgkZGlhbG9nX2NvbmZpcm1fYnV0dG9uKS5hcHBlbmQoJGRpYWxvZ19jYW5jZWxfYnV0dG9uKTsKICAgICAgICAgICAgJGRpYWxvZ19kaXYuYXBwZW5kKCRkaWFsb2dfaGVhZGVyKS5hcHBlbmQoJGRpYWxvZ19ib2R5KS5hcHBlbmQoJGRpYWxvZ19mb290ZXIpOwogICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCRkaWFsb2dfZGl2KTsKCiAgICAgICAgICAgICRkaWFsb2dfZGl2LmRpYWxvZ0RyYWcoKTsKCiAgICAgICAgICAgICRkaWFsb2dfY29udHJvbC5jbGljayhkaWFsb2dDb250cm9sKTsKICAgICAgICAgICAgJGRpYWxvZ19pbWcuY2xpY2socmVmcmVzaFZDb2RlKTsKICAgICAgICAgICAgJGRpYWxvZ19yZWZyZXNoLmNsaWNrKHJlZnJlc2hWQ29kZSk7CiAgICAgICAgICAgICRkaWFsb2dfaW5wdXQua2V5cHJlc3MoZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICAgICAgaWYoZXZlbnQud2hpY2ggPT0gMTMpCiAgICAgICAgICAgICAgICAgICAgY29uZmlybUNsaWNrKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkZGlhbG9nX2NvbmZpcm1fYnV0dG9uLmNsaWNrKGNvbmZpcm1DbGljayk7CiAgICAgICAgICAgICRkaWFsb2dfY2FuY2VsX2J1dHRvbi5jbGljayhkaWFsb2dDb250cm9sKTsKICAgICAgICAgICAgJGRpYWxvZ19pbnB1dC5jbGljayhmdW5jdGlvbigpewogICAgICAgICAgICAgICAgJCgnI2RpYWxvZy1lcnInKS50ZXh0KCcnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiAkZGlhbG9nX2RpdjsKICAgICAgICB9CiAgICAgICAgdGhpcy5vcGVuID0gZnVuY3Rpb24odmNvZGUpewogICAgICAgICAgICBpZih2Y29kZSkKICAgICAgICAgICAgICAgICQoJyNkaWFsb2ctaW1nJykuYXR0cignc3JjJyx2Y29kZS5pbWcpOwogICAgICAgICAgICBkaWFsb2cuc2hvdygpOwogICAgICAgICAgICBzaGFkb3cuc2hvdygpOwogICAgICAgIH0KICAgICAgICB0aGlzLmNsb3NlID0gZnVuY3Rpb24oKXsKICAgICAgICAgICAgZGlhbG9nQ29udHJvbCgpOwogICAgICAgIH0KICAgICAgICBkaWFsb2cgPSBjcmVhdGVEaWFsb2coKTsKICAgICAgICBzaGFkb3cgPSAkKCdkaXYuZGlhbG9nLXNoYWRvdycpOwogICAgICAgIGZ1bmN0aW9uIGRpYWxvZ0NvbnRyb2woKXsKICAgICAgICAgICAgJCgnI2RpYWxvZy1pbWcnLGRpYWxvZykuYXR0cignc3JjJywnJyk7CiAgICAgICAgICAgICQoJyNkaWFsb2ctZXJyJykudGV4dCgnJyk7CiAgICAgICAgICAgIGRpYWxvZy5oaWRlKCk7CiAgICAgICAgICAgIHNoYWRvdy5oaWRlKCk7CiAgICAgICAgfQogICAgfQogICAgCiAgICAkKCBmdW5jdGlvbigpIHsKd29yZE1hcEh0dHBbJ2RlZmF1bHQtZG9tJ10gPSAoJCgnLmljb24tdXBsb2FkJykucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkuYXR0cignY2xhc3MnKSApIDsKd29yZE1hcEh0dHBbJ2JhciddID0gKCQoJy5pY29uLXVwbG9hZCcpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLmF0dHIoJ2NsYXNzJykgKSA7Cn0gKSA7CgogICAgJC5mbi5kaWFsb2dEcmFnID0gZnVuY3Rpb24oKXsKICAgICAgICB2YXIgbW91c2VJbml0WCxtb3VzZUluaXRZLGRpYWxvZ0luaXRYLGRpYWxvZ0luaXRZOwogICAgICAgIHZhciBzY3JlZW5XaWR0aCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7CiAgICAgICAgdmFyICRwYXJlbnQgPSB0aGlzOwogICAgICAgICQoJ2Rpdi5kaWFsb2ctaGVhZGVyJyx0aGlzKS5tb3VzZWRvd24oZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICBtb3VzZUluaXRYID0gcGFyc2VJbnQoZXZlbnQucGFnZVgpOwogICAgICAgICAgICBtb3VzZUluaXRZID0gcGFyc2VJbnQoZXZlbnQucGFnZVkpOwogICAgICAgICAgICBkaWFsb2dJbml0WCA9IHBhcnNlSW50KCRwYXJlbnQuY3NzKCdsZWZ0JykucmVwbGFjZSgncHgnLCcnKSk7CiAgICAgICAgICAgIGRpYWxvZ0luaXRZID0gcGFyc2VJbnQoJHBhcmVudC5jc3MoJ3RvcCcpLnJlcGxhY2UoJ3B4JywnJykpOwogICAgICAgICAgICAkKHRoaXMpLm1vdXNlbW92ZShmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgICAgICB2YXIgdGVtcFggPSBkaWFsb2dJbml0WCArIHBhcnNlSW50KGV2ZW50LnBhZ2VYKSAtIG1vdXNlSW5pdFg7CiAgICAgICAgICAgICAgICB2YXIgdGVtcFkgPSBkaWFsb2dJbml0WSArIHBhcnNlSW50KGV2ZW50LnBhZ2VZKSAtIG1vdXNlSW5pdFk7CiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBwYXJzZUludCgkcGFyZW50LmNzcygnd2lkdGgnKS5yZXBsYWNlKCdweCcsJycpKTsKICAgICAgICAgICAgICAgIHRlbXBYID0gdGVtcFg8MCA/IDAgOiB0ZW1wWD5zY3JlZW5XaWR0aC13aWR0aCA/IHNjcmVlbldpZHRoLXdpZHRoIDogdGVtcFg7CiAgICAgICAgICAgICAgICB0ZW1wWSA9IHRlbXBZPDAgPyAwIDogdGVtcFk7CiAgICAgICAgICAgICAgICAkcGFyZW50LmNzcygnbGVmdCcsdGVtcFgrJ3B4JykuY3NzKCd0b3AnLHRlbXBZKydweCcpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICAkKCdkaXYuZGlhbG9nLWhlYWRlcicsdGhpcykubW91c2V1cChmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgICQodGhpcykudW5iaW5kKCdtb3VzZW1vdmUnKTsKICAgICAgICB9KTsKICAgIH0KCn0pKCk7"},{"name":"gwdang","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http://*.jd.com/*","https://*.jd.com/*","http://*.jd.hk/*","https://*.jd.hk/*","http://*.taobao.com/*","https://*.taobao.com/*","http://*.tmall.com/*","https://*.tmall.com/*","https://*.tmall.hk/*","http://*.yixun.com/*","http://*.51buy.com/*","http://*.yhd.com/*","http://*.suning.com/*","https://*.suning.com/*","http://*.dangdang.com/*","http://*.gome.com.cn/*","http://*.newegg.cn/*","http://*.paipai.com/*","https://*.amazon.com/*","https://*.amazon.cn/*","https://*.amazon.*/*","http://www.kjt.com/*","http://www.kaola.com/*","http://www.tcl.com/*","http://shop.hisense.com/*","http://*.oppo.com/*","http://shop.vivo.com.cn/*","http://www.ebay.com/*","http://t.dianping.com/*","http://*.nuomi.com/*","http://*.meituan.com/*","https://yao.95095.com/*","http://*.feiniu.com/*","http://*.meilishuo.com/*","http://*.mogujie.com/*","http://shop.coolpad.cn/*","http://*.sephora.cn/*","http://*.yesmywine.com/*","http://*.yiguo.com/*","http://*.wanggou.com/*","http://mall.jia.com/*","http://weigou.baidu.com/*","http://*.mi.com/*","http://shop.letv.com/*","http://*.handu.com/*","http://*.taoshu.com/*","http://*.1688.com/*","http://*.muyingzhijia.com/*","http://*.vmall.com/*","http://*.xiji.com/*","http://*.xijie.com/*","http://www.yougou.com/*","http://www.okbuy.com/*","http://*.001town.com/*","http://*.01goo.com/*","http://*.03l.cn/*","http://*.133china.com/*","http://*.139shop.com/*","http://yxp.163.com/*","http://*.168dg.com/*","http://*.186mall.com/*","http://*.18to82.com/*","http://*.1j.cn/*","http://*.22shop.com/*","http://*.24dq.com/*","http://*.24quan.com/*","http://*.258sd.com/*","http://*.2688.com/*","http://*.360buy.com/*","http://*.360hqb.com/*","http://*.360kxr.com/*","http://*.360mart.com/*","http://*.365goba.com/*","http://*.38hzt.com/*","http://*.39ty.com/*","http://*.4inlook.com/*","http://*.5188bag.com/*","http://*.51buy.com/*","http://51buy.com/","http://*.51dg.com/*","http://*.51eng.com/*","http://*.51sheyuan.com/*","http://*.51youpin.com/*","http://*.520eye.com/*","http://*.52shehua.com/*","http://*.5366.com/*","http://t.58.com/*","http://*.58hua.com/*","http://*.5lux.com/*","http://*.5yth.com/*","http://*.6919.com/*","http://*.6sbuy.com/*","http://*.77toy.com/*","http://*.7caihua.com/*","http://*.7cv.com/*","http://*.7sev.com/*","http://*.80ebus.com/*","http://*.8801.net/*","http://*.919it.com/*","http://*.929.cn/*","http://*.942radio.com/*","http://b2c.958shop.com/*","http://*.96128.com/*","http://*.99pto.com/*","http://*.99read.com/*","http://*.9dadao.com/*","http://*.9you.com/*","http://*.afffff.com/*","http://*.ai356.com/*","http://*.aibang.com/*","http://*.aidai.com/*","http://*.aiju.com/*","http://*.aim36.com/*","http://*.aimer.com.cn/*","http://*.aiyingshi.com/*","http://*.aizhigu.com.cn/*","http://*.amazon.cn/*","http://*.anni.com/*","http://*.apabi.com/*","http://*.augshow.com/*","http://*.autosup.com/*","http://*.baiyjk.com/*","http://*.bbesports.com/*","http://*.bookuu.com/*","http://*.bearbuy.com.cn/*","http://*.beautyplus.cn/*","http://*.beifabook.com/*","http://*.benq.com.cn/*","http://*.best1.com/*","http://*.biaoshang.hk/*","http://*.binggo.com/*","http://*.bloves.com/*","http://*.bobomobi.com/*","http://*.bookschina.com/*","http://*.boqii.com/*","http://*.buding.com/*","http://*.buy007.com/*","http://*.buy361.cn/*","http://*.buyfine.net/*","http://*.buynow.com.cn/*","http://*.caistv.com/*","http://*.caomeipai.com/*","http://*.car339.com.cn/*","http://*.car6688.com/*","http://*.carrefour.com.cn/*","http://*.cdream.com/*","http://*.ceetop.com/*","http://*.chashu.cn/*","http://*.chedangjia.com/*","http://*.chengdecs.com/*","http://*.china-gift.com/*","http://*.china-pub.com/*","http://emall.chinapay.com/*","http://*.chinayrs.com/*","http://*.chris-tina.com/*","http://*.clady.com/*","http://*.clinique.com.cn/*","http://*.cncard.com/*","http://*.cnfse.com/*","http://*.colebuy.com/*","http://*.conslive.com/*","http://*.coo8.com/*","http://*.cosize.com/*","http://*.cosme-de.com/*","http://*.ctrip.com/*","http://*.cw100.com/*","http://*.d1.com.cn/*","http://*.daisonghua.com/*","http://*.dangdang.com/*","http://*.daoyao.com/*","http://*.woyo.com/*","http://*.dazhe.cn/*","http://*.dazhongdianqi.com.cn/*","http://*.dianpu.com/*","http://*.didatuan.com/*","http://*.disiqu.cn/*","http://*.dixintong.com/*","http://*.doulaimai.com/*","http://*.dsgoo.com/*","http://*.dtoto.com/*","http://*.duhub.com/*","http://*.duoding.com/*","http://*.e-giordano.com/*","http://*.e-lining.com/*","http://*.e-my.com.cn/*","http://*.easy361.com/*","http://*.ebaimi.com/*","http://*.eboxbuy.com/*","http://*.ebtea.com/*","http://*.ecosme.cn/*","http://*.efeihu.com/*","http://*.ehaier.com/*","http://*.ejia.com/*","http://*.enet.com.cn/*","http://*.enjoyeye.com/*","http://*.epetbar.com/*","http://*.et5155.com/*","http://*.f508.com/*","http://*.fclub.cn/*","http://*.flowerby.com/*","http://*.flowercn.com/*","http://*.gap.cn/*","http://*.godida.com/*","http://*.gome.com.cn/*","http://*.goocctv.cn/*","http://*.goodjd.com/*","http://*.goodnourish.cn/*","http://*.gou3618.com/*","http://*.gouduo.com/*","http://*.gouwulian.com/*","http://*.gouxie.com/*","http://*.goyahome.com/*","http://*.guobuy.com/*","http://*.guopi.com/*","http://*.guuoo.com/*","http://*.hany.cn/*","http://*.happigo.com/*","http://*.hit168.com.cn/*","http://*.hitao.com/*","http://*.homeold.cn/*","http://*.homevv.com/*","http://*.hongkouzi.com/*","http://*.hopebook.net/*","http://*.huachu.com.cn/*","http://*.huimeifang.cn/*","http://*.hw2008.cn/*","http://*.icaifeng.com/*","http://*.icson.com/*","http://*.ideemall.com/*","http://*.ihush.com/*","http://*.iloveyou.com.cn/*","http://*.ilovezuan.com/*","http://*.imeelee.com/*","http://*.inoble.com.cn/*","http://*.inshion.com/*","http://*.ishop.cn/*","http://*.it88.com.cn/*","http://*.itzm.com/*","http://*.iyuyou.com/*","http://*.jiajiajk.com/*","http://*.jiaju.com/*","http://*.jiatx.com/*","http://*.jiayougo.com/*","http://*.jinbaidu.com/*","http://*.jmeishop.com/*","http://*.joyran.com/*","http://*.jsbcmall.com/*","http://*.jtlhome.com/*","http://*.jumei.com/*","http://*.junph.com/*","http://*.justonline.cn/*","http://*.jxdyf.com/*","http://*.k121.com/*","http://*.kadang.com/*","http://*.keede.com.cn/*","http://*.kela.cn/*","http://*.kuaishubao.com/*","http://*.kxtkx.com/*","http://*.ladypk.com/*","http://*.laeibelle.com/*","http://*.lafaso.com/*","http://*.lamiu.com/*","http://*.lancome.com.cn/*","http://*.lashou.com/*","http://*.ledaojia.com/*","http://*.leftlady.com/*","http://*.lenovo.com.cn/*","http://*.lens2005.com/*","http://*.letao.com/*","http://*.leyou.com/*","http://*.leyou.com.cn/*","http://*.lijiababy.com.cn/*","http://*.lijigou.com/*","http://*.likebuy.com/*","http://*.likeface.com/*","http://*.lingshi.com/*","http://*.liqunshop.com/*","http://*.liyi99.com/*","http://*.locknlock.com.cn/*","http://*.lovo.cn/*","http://*.luckigo.com/*","http://*.lusen.com/*","http://*.lyceem.com/*","http://*.m18.com/*","http://*.maichawang.com/*","http://*.maimaike.cn/*","http://*.mamabb.com/*","http://*.mamahao.cn/*","http://*.mangocity.com/*","http://*.manzuo.com/*","http://*.masamaso.com/*","http://*.maxfunbuy.com/*","http://*.maywon.com/*","http://*.mbaobao.com/*","http://*.meici.com/*","http://*.meilele.com/*","http://*.meilieasy.com/*","http://*.meituan.com/*","http://*.menglu.com/*","http://*.mengmai.com/*","http://*.minibuy.com/*","http://*.mmgw.cn/*","http://*.mmuses.com/*","http://*.mobi001.com/*","http://*.mokamall.com/*","http://*.momoyoyo.com/*","http://*.montrosechina.com/*","http://*.mooiee.com/*","http://*.moonbasa.com/*","http://*.motostore.com.cn/*","http://*.mpshow.com.cn/*","http://*.naccoo.com/*","http://*.naguu.com/*","http://*.nayao.com/*","http://*.newegg.com.cn/*","http://*.newgo5.com/*","http://*.nmlch.com/*","http://*.no5.com.cn/*","http://*.nokia.com.cn/*","http://*.nonmin88.com/*","http://*.obuy.cn/*","http://*.ofcard.com/*","http://*.ogage.cn/*","http://*.okbig.com/*","http://*.okbuy.com/*","http://*.okddy.com/*","http://*.okgolf.cn/*","http://*.olomo.com/*","http://*.olympus.com.cn/*","http://*.olymsports.com/*","http://*.ono.com.cn/*","http://*.orange3c.com/*","http://*.ouku.com/*","http://*.ourtasty.com/*","http://*.outice.com/*","http://*.oyego.com/*","http://*.paixie.net/*","http://*.palcent.com/*","http://*.ocj.com.cn/*","http://*.pb89.com/*","http://*.pcarm.com/*","http://*.petyoo.com/*","http://*.pgbao.com/*","http://*.piaoliang100.com/*","http://*.pirateship.com.cn/*","http://*.popyj.com/*","http://*.pupai.cn/*","http://*.purcotton.com/*","http://*.qianxun.com/*","http://*.qingci.com/*","http://*.qinqinbaby.com/*","http://*.qmango.com/*","http://*.qumei.com/*","http://*.quwan.com/*","http://*.qxian.com/*","http://*.rayi.cn/*","http://*.redbaby.com.cn/*","http://*.robam.com/*","http://*.salala.com.cn/*","http://*.samsclub.cn/*","http://*.sanfo.com/*","http://*.sapo.com.hk/*","http://*.sasa.com/*","http://*.sasacity.com/*","http://*.sawbuy.com/*","http://*.shanghai-sports.com/*","http://*.shentop.com/*","http://*.shishangqiyi.com/*","http://*.shjdq.com/*","http://*.shnn.com/*","http://*.shopin.net/*","http://*.shoubiao.com.cn/*","http://*.sigo.cn/*","http://mall.sina.com.cn/*","http://*.sinobuy.cn/*","http://*.skcoo.com/*","http://*.skomart.com/*","http://*.snyun.com/*","http://*.sonmai.cn/*","http://*.sport2008.com.cn/*","http://*.strawberrynet.com/*","http://*.suning.com/*","http://*.sz-esun.com/*","http://*.tao3c.com/*","http://item.taobao.com/*","http://*.taoxie.cn/*","http://*.the365.com/*","http://*.thinkshop.cn/*","http://*.tian10.com/*","http://*.tiantian.com/*","http://*.junph.com/*","http://*.tieyou.com/*","http://detail.tmall.com/*","http://*.togj.com/*","http://*.tooogooo.com/*","http://*.toy90.com/*","http://*.toys365.com/*","http://*.tpy100.com/*","http://*.tuniu.com/*","http://*.tztart.com/*","http://*.ugou.cn/*","http://*.uipmall.com/*","http://*.uiyi.cn/*","http://*.ushan.cn/*","http://*.uushouji.com/*","http://*.uya100.com/*","http://*.vaakav.com/*","http://*.vafox.com/*","http://*.vancl.com/*","http://*.vcotton.com/*","http://*.veedl.com/*","http://*.vegoos.com/*","http://*.venusveil.com/*","http://*.veryok.cn/*","http://*.viccol.com/*","http://*.vipshop.com/*","http://*.vipstore.com/*","http://*.vivian.cn/*","http://*.vjia.com/*","http://*.vnasi.com/*","http://*.voipyeah.com/*","http://*.w1.cn/*","http://*.waipowang.com/*","http://*.wangshanghai.com/*","http://*.wg365.com/*","http://*.winenice.com/*","http://*.wl.cn/*","http://*.womai.com/*","http://*.woye.com/*","http://*.wtaotao.com/*","http://*.wumeiwang.com/*","http://*.x-playboy.com/*","http://*.xiaokang.com/*","http://*.xiaozhuren.com/*","http://*.xinbaigo.com/*","http://*.xindou.com/*","http://*.xing800.com/*","http://*.xinhuabookstore.com/*","http://*.xiu.com/*","http://*.xtpo.cn/*","http://*.xzuan.com/*","http://*.yaja.com.cn/*","http://*.yaofang.cn/*","http://*.yasai.cn/*","http://*.yeecare.com/*","http://buy.yesky.com/*","http://*.yesmytea.com/*","http://*.yesmywine.com/*","http://*.yide.com/*","http://*.yifu.com/*","http://*.yihaodian.com/*","http://*.yintai.com/*","http://*.yinyuehe.net/*","http://*.yjcs.cn/*","http://*.yobrand.com/*","http://*.yoger.com.cn/*","http://*.yoho.cn/*","http://*.yongle.com.cn/*","http://*.yougou.com/*","http://*.youjk.com/*","http://*.yoyo18.com/*","http://*.yumaoclub.com/*","http://*.yyosso.com/*","http://*.zbird.com/*","http://*.zgcbb.com/*","http://*.zm7.cn/*","http://*.zopo.com/*","http://*.ibuying.com/*","http://*.33go.com.cn/*","http://*.xijie.com/*","http://*.nop.cn/*","http://*.asyp.com/*","http://*.sparty.cn/*","http://*.yizhedian.com/*","http://*.lvhezi.com/*","http://*.aishangbaobao.com/*","http://*.sportica.cn/*","http://*.jstsilk.cn/*","http://*.camel.com.cn/*","http://*.cottonpop.net/*","http://*.hyj.com/*","http://*.myxiequ.com/*","http://*.mfplaza.com/*","http://*.do93.com/*","http://*.3guo.cn/*","http://*.yaqifushi.com/*","http://*.trura.com/*","http://*.lbaobao.cn/*","http://*.xiutuan.com/*","http://*.usashopcn.com/*","http://*.ihaveu.com/*","http://*.vipku.com/*","http://*.vipchina.com/*","http://*.fanrry.cn/*","http://*.lesunvip.com/*","http://*.nala.com.cn/*","http://*.miqi.cn/*","http://*.meiribuy.com/*","http://*.pufung.com/*","http://*.xiaoye.com/*","http://*.hmeili.com/*","http://*.oulybuy.com/*","http://*.meifenzi.com/*","http://*.caomeishop.com/*","http://*.meifu360.com/*","http://*.bapashop.com/*","http://*.bulangxiongdi.com/*","http://*.gusubuy.com/*","http://*.opearl.net/*","http://*.ruci.cn/*","http://*.rax.cn/*","http://*.jiuxian.com/*","http://*.maimaicha.com/*","http://*.pinwine.cn/*","http://*.meiweidao.com/*","http://*.okliang.com/*","http://*.365wine.com/*","http://*.jjlg.com.cn/*","http://*.bianlishe.com/*","http://*.epkmall.com/*","http://*.gdcct.com/*","http://*.500ccc.com/*","http://*.me361.com/*","http://*.malatamobile.com/*","http://*.trioo.com/*","http://*.oohdear.com/*","http://*.yaahe.cn/*","http://*.easeeyes.com/*","http://*.dbox.cn/*","http://*.haotehui.com/*","http://*.m6go.com/*","http://*.bianyigo.com/*","http://*.okjee.com/*","http://*.mygeek.cn/*","http://*.tbb.cn/*","http://*.ushare360.com/*","http://*.gqt168.com/*","http://*.konjoy.com/*","http://*.aoliz.com/*","http://*.jianianle.com/*","http://*.akajia.com/*","http://*.miqi.com.cn/*","http://*.lehuimai.com/*","http://*.lifevc.com/*","http://*www.ouku.com/","http://nuomi.com/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1492505332282},"enabled":true,"position":8,"file_url":"https://greasyfork.org/scripts/14466-%E8%B4%AD%E7%89%A9%E5%85%9A%E6%AF%94%E4%BB%B7%E5%B7%A5%E5%85%B7/code/%E8%B4%AD%E7%89%A9%E5%85%9A%E6%AF%94%E4%BB%B7%E5%B7%A5%E5%85%B7.user.js","uuid":"3b5e3724-4d06-4ce0-8d8d-d6e3113bbae8","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIGd3ZGFuZwovLyBAbmFtZTp6aC1DTiAgIOi0reeJqeWFmuavlOS7t+W3peWFtwovLyBAbmFtZXNwYWNlICAgbm8KLy8gQGRlc2NyaXB0aW9uIOa1j+iniOWVhuWTgemhtemdouaXtu+8jOiHquWKqOavlOi+g+WQjOasvuWVhuWTgeWcqOa3mOWunS/kuqzkuJwv5Lqa6ams6YCKL+W9k+W9ky/oi4/lroEv562J55m+5a625ZWG5Z+O55qE5pyA5L2O5Lu377yM5o+Q5L6b5Lu35qC85Y6G5Y+y44CB5Y+j56KR6K+E5YiG562J5p+l6K+i44CCCi8vIEBkZXNjcmlwdGlvbjp6aC1DTiDmtY/op4jllYblk4HpobXpnaLml7bvvIzoh6rliqjmr5TovoPlkIzmrL7llYblk4HlnKjmt5jlrp0v5Lqs5LicL+S6mumprOmAii/lvZPlvZMv6IuP5a6BL+etieeZvuWutuWVhuWfjueahOacgOS9juS7t++8jOaPkOS+m+S7t+agvOWOhuWPsuOAgeWPo+eikeivhOWIhuetieafpeivouOAggovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouamQuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vKi5qZC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouamQuaGsvKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly8qLmpkLmhrLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnRhb2Jhby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly8qLnRhb2Jhby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudG1hbGwuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vKi50bWFsbC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly8qLnRtYWxsLmhrLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnlpeHVuLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi41MWJ1eS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueWhkLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zdW5pbmcuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vKi5zdW5pbmcuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmRhbmdkYW5nLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5nb21lLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5uZXdlZ2cuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucGFpcGFpLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwczovLyouYW1hem9uLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwczovLyouYW1hem9uLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vKi5hbWF6b24uKi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vd3d3LmtqdC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovL3d3dy5rYW9sYS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovL3d3dy50Y2wuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly9zaG9wLmhpc2Vuc2UuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm9wcG8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly9zaG9wLnZpdm8uY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly93d3cuZWJheS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovL3QuZGlhbnBpbmcuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm51b21pLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tZWl0dWFuLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwczovL3lhby45NTA5NS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZmVpbml1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tZWlsaXNodW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1vZ3VqaWUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly9zaG9wLmNvb2xwYWQuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc2VwaG9yYS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi55ZXNteXdpbmUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnlpZ3VvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi53YW5nZ291LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vbWFsbC5qaWEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly93ZWlnb3UuYmFpZHUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1pLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vc2hvcC5sZXR2LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5oYW5kdS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudGFvc2h1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4xNjg4LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tdXlpbmd6aGlqaWEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnZtYWxsLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi54aWppLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi54aWppZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovL3d3dy55b3Vnb3UuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly93d3cub2tidXkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjAwMXRvd24uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjAxZ29vLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4wM2wuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouMTMzY2hpbmEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjEzOXNob3AuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly95eHAuMTYzLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4xNjhkZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouMTg2bWFsbC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouMTh0bzgyLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4xai5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4yMnNob3AuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjI0ZHEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjI0cXVhbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouMjU4c2QuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjI2ODguY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjM2MGJ1eS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouMzYwaHFiLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4zNjBreHIuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjM2MG1hcnQuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjM2NWdvYmEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjM4aHp0LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4zOXR5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi40aW5sb29rLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi41MTg4YmFnLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi41MWJ1eS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLzUxYnV5LmNvbS8KLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjUxZGcuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjUxZW5nLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi41MXNoZXl1YW4uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjUxeW91cGluLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi41MjBleWUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjUyc2hlaHVhLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi41MzY2LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vdC41OC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouNThodWEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjVsdXguY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjV5dGguY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjY5MTkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjZzYnV5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi43N3RveS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouN2NhaWh1YS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouN2N2LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi43c2V2LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi44MGVidXMuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjg4MDEubmV0LyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjkxOWl0LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi45MjkuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouOTQycmFkaW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly9iMmMuOTU4c2hvcC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouOTYxMjguY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjk5cHRvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi45OXJlYWQuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjlkYWRhby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouOXlvdS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYWZmZmZmLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5haTM1Ni5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYWliYW5nLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5haWRhaS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYWlqdS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYWltMzYuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmFpbWVyLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5haXlpbmdzaGkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmFpemhpZ3UuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmFtYXpvbi5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5hbm5pLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5hcGFiaS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYXVnc2hvdy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYXV0b3N1cC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYmFpeWprLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5iYmVzcG9ydHMuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmJvb2t1dS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYmVhcmJ1eS5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYmVhdXR5cGx1cy5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5iZWlmYWJvb2suY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmJlbnEuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmJlc3QxLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5iaWFvc2hhbmcuaGsvKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYmluZ2dvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5ibG92ZXMuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmJvYm9tb2JpLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5ib29rc2NoaW5hLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5ib3FpaS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYnVkaW5nLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5idXkwMDcuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmJ1eTM2MS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5idXlmaW5lLm5ldC8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5idXlub3cuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmNhaXN0di5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY2FvbWVpcGFpLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jYXIzMzkuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmNhcjY2ODguY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmNhcnJlZm91ci5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY2RyZWFtLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jZWV0b3AuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmNoYXNodS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jaGVkYW5namlhLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jaGVuZ2RlY3MuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmNoaW5hLWdpZnQuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmNoaW5hLXB1Yi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovL2VtYWxsLmNoaW5hcGF5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jaGluYXlycy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY2hyaXMtdGluYS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY2xhZHkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmNsaW5pcXVlLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jbmNhcmQuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmNuZnNlLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jb2xlYnV5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jb25zbGl2ZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY29vOC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY29zaXplLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jb3NtZS1kZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY3RyaXAuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmN3MTAwLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5kMS5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZGFpc29uZ2h1YS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZGFuZ2RhbmcuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmRhb3lhby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoud295by5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZGF6aGUuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZGF6aG9uZ2RpYW5xaS5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZGlhbnB1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5kaWRhdHVhbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZGlzaXF1LmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmRpeGludG9uZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZG91bGFpbWFpLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5kc2dvby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZHRvdG8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmR1aHViLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5kdW9kaW5nLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5lLWdpb3JkYW5vLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5lLWxpbmluZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZS1teS5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZWFzeTM2MS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZWJhaW1pLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5lYm94YnV5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5lYnRlYS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZWNvc21lLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmVmZWlodS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZWhhaWVyLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5lamlhLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5lbmV0LmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5lbmpveWV5ZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZXBldGJhci5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZXQ1MTU1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5mNTA4LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5mY2x1Yi5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5mbG93ZXJieS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZmxvd2VyY24uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmdhcC5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5nb2RpZGEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmdvbWUuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmdvb2NjdHYuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZ29vZGpkLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5nb29kbm91cmlzaC5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5nb3UzNjE4LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5nb3VkdW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmdvdXd1bGlhbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZ291eGllLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5nb3lhaG9tZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZ3VvYnV5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5ndW9waS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZ3V1b28uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmhhbnkuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaGFwcGlnby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaGl0MTY4LmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5oaXRhby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaG9tZW9sZC5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5ob21ldnYuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmhvbmdrb3V6aS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaG9wZWJvb2submV0LyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmh1YWNodS5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaHVpbWVpZmFuZy5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5odzIwMDguY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaWNhaWZlbmcuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmljc29uLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5pZGVlbWFsbC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaWh1c2guY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmlsb3ZleW91LmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5pbG92ZXp1YW4uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmltZWVsZWUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmlub2JsZS5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaW5zaGlvbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaXNob3AuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaXQ4OC5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaXR6bS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaXl1eW91LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5qaWFqaWFqay5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouamlhanUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmppYXR4LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5qaWF5b3Vnby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouamluYmFpZHUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmptZWlzaG9wLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5qb3lyYW4uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmpzYmNtYWxsLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5qdGxob21lLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5qdW1laS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouanVucGguY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmp1c3RvbmxpbmUuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouanhkeWYuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmsxMjEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmthZGFuZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoua2VlZGUuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmtlbGEuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoua3VhaXNodWJhby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoua3h0a3guY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmxhZHlway5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGFlaWJlbGxlLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5sYWZhc28uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmxhbWl1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5sYW5jb21lLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5sYXNob3UuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmxlZGFvamlhLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5sZWZ0bGFkeS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGVub3ZvLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5sZW5zMjAwNS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGV0YW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmxleW91LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5sZXlvdS5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGlqaWFiYWJ5LmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5saWppZ291LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5saWtlYnV5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5saWtlZmFjZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGluZ3NoaS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGlxdW5zaG9wLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5saXlpOTkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmxvY2tubG9jay5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubG92by5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5sdWNraWdvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5sdXNlbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubHljZWVtLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tMTguY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1haWNoYXdhbmcuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1haW1haWtlLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1hbWFiYi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubWFtYWhhby5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tYW5nb2NpdHkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1hbnp1by5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubWFzYW1hc28uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1heGZ1bmJ1eS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubWF5d29uLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tYmFvYmFvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tZWljaS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubWVpbGVsZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubWVpbGllYXN5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tZWl0dWFuLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tZW5nbHUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1lbmdtYWkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1pbmlidXkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1tZ3cuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubW11c2VzLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tb2JpMDAxLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tb2thbWFsbC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubW9tb3lveW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1vbnRyb3NlY2hpbmEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1vb2llZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubW9vbmJhc2EuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1vdG9zdG9yZS5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubXBzaG93LmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5uYWNjb28uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm5hZ3V1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5uYXlhby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubmV3ZWdnLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5uZXdnbzUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm5tbGNoLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5ubzUuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm5va2lhLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5ub25taW44OC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoub2J1eS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5vZmNhcmQuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm9nYWdlLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm9rYmlnLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5va2J1eS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoub2tkZHkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm9rZ29sZi5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5vbG9tby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoub2x5bXB1cy5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoub2x5bXNwb3J0cy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoub25vLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5vcmFuZ2UzYy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoub3VrdS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoub3VydGFzdHkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm91dGljZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoub3llZ28uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnBhaXhpZS5uZXQvKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucGFsY2VudC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoub2NqLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5wYjg5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5wY2FybS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucGV0eW9vLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5wZ2Jhby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucGlhb2xpYW5nMTAwLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5waXJhdGVzaGlwLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5wb3B5ai5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucHVwYWkuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucHVyY290dG9uLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5xaWFueHVuLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5xaW5nY2kuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnFpbnFpbmJhYnkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnFtYW5nby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucXVtZWkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnF1d2FuLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5xeGlhbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucmF5aS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5yZWRiYWJ5LmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5yb2JhbS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc2FsYWxhLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zYW1zY2x1Yi5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zYW5mby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc2Fwby5jb20uaGsvKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc2FzYS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc2FzYWNpdHkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnNhd2J1eS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc2hhbmdoYWktc3BvcnRzLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zaGVudG9wLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zaGlzaGFuZ3FpeWkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnNoamRxLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zaG5uLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zaG9waW4ubmV0LyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnNob3ViaWFvLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zaWdvLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly9tYWxsLnNpbmEuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnNpbm9idXkuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc2tjb28uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnNrb21hcnQuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnNueXVuLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zb25tYWkuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc3BvcnQyMDA4LmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zdHJhd2JlcnJ5bmV0LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5zdW5pbmcuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnN6LWVzdW4uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnRhbzNjLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vaXRlbS50YW9iYW8uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnRhb3hpZS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi50aGUzNjUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnRoaW5rc2hvcC5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi50aWFuMTAuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnRpYW50aWFuLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5qdW5waC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudGlleW91LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vZGV0YWlsLnRtYWxsLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi50b2dqLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi50b29vZ29vby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudG95OTAuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnRveXMzNjUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnRweTEwMC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudHVuaXUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnR6dGFydC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudWdvdS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi51aXBtYWxsLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi51aXlpLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnVzaGFuLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnV1c2hvdWppLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi51eWExMDAuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnZhYWthdi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudmFmb3guY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnZhbmNsLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi52Y290dG9uLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi52ZWVkbC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudmVnb29zLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi52ZW51c3ZlaWwuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnZlcnlvay5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi52aWNjb2wuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnZpcHNob3AuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnZpcHN0b3JlLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi52aXZpYW4uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudmppYS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudm5hc2kuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnZvaXB5ZWFoLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi53MS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi53YWlwb3dhbmcuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLndhbmdzaGFuZ2hhaS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoud2czNjUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLndpbmVuaWNlLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi53bC5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi53b21haS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoud295ZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoud3Rhb3Rhby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoud3VtZWl3YW5nLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi54LXBsYXlib3kuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnhpYW9rYW5nLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi54aWFvemh1cmVuLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi54aW5iYWlnby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueGluZG91LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi54aW5nODAwLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi54aW5odWFib29rc3RvcmUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnhpdS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueHRwby5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi54enVhbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueWFqYS5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueWFvZmFuZy5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi55YXNhaS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi55ZWVjYXJlLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vYnV5Lnllc2t5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi55ZXNteXRlYS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueWVzbXl3aW5lLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi55aWRlLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi55aWZ1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi55aWhhb2RpYW4uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnlpbnRhaS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueWlueXVlaGUubmV0LyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnlqY3MuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueW9icmFuZC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueW9nZXIuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnlvaG8uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueW9uZ2xlLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi55b3Vnb3UuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnlvdWprLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi55b3lvMTguY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnl1bWFvY2x1Yi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueXlvc3NvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi56YmlyZC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouemdjYmIuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnptNy5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi56b3BvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5pYnV5aW5nLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi4zM2dvLmNvbS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi54aWppZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubm9wLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmFzeXAuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnNwYXJ0eS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi55aXpoZWRpYW4uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmx2aGV6aS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYWlzaGFuZ2Jhb2Jhby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouc3BvcnRpY2EuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouanN0c2lsay5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jYW1lbC5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouY290dG9ucG9wLm5ldC8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5oeWouY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm15eGllcXUuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1mcGxhemEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmRvOTMuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLjNndW8uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueWFxaWZ1c2hpLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi50cnVyYS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGJhb2Jhby5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi54aXV0dWFuLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi51c2FzaG9wY24uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmloYXZldS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoudmlwa3UuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnZpcGNoaW5hLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5mYW5ycnkuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubGVzdW52aXAuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm5hbGEuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1pcWkuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubWVpcmlidXkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnB1ZnVuZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueGlhb3llLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5obWVpbGkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm91bHlidXkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1laWZlbnppLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5jYW9tZWlzaG9wLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tZWlmdTM2MC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYmFwYXNob3AuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmJ1bGFuZ3hpb25nZGkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmd1c3VidXkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm9wZWFybC5uZXQvKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoucnVjaS5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5yYXguY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaml1eGlhbi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubWFpbWFpY2hhLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5waW53aW5lLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1laXdlaWRhby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoub2tsaWFuZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouMzY1d2luZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouampsZy5jb20uY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouYmlhbmxpc2hlLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5lcGttYWxsLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5nZGNjdC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouNTAwY2NjLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5tZTM2MS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubWFsYXRhbW9iaWxlLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi50cmlvby5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoub29oZGVhci5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoueWFhaGUuY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouZWFzZWV5ZXMuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmRib3guY24vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouaGFvdGVodWkuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm02Z28uY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmJpYW55aWdvLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5va2plZS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoubXlnZWVrLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLnRiYi5jbi8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi51c2hhcmUzNjAuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmdxdDE2OC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyoua29uam95LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5hb2xpei5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovLyouamlhbmlhbmxlLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5ha2FqaWEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLm1pcWkuY29tLmNuLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qLmxlaHVpbWFpLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwOi8vKi5saWZldmMuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly8qd3d3Lm91a3UuY29tLwovLyBAaW5jbHVkZSAgICAgaHR0cDovL251b21pLmNvbS8qCi8vIEByZXF1aXJlICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvMTQ0NjQtZ3dkL2NvZGUvZ3dkLmpzP3ZlcnNpb249MjEzMTgyCi8vIEB2ZXJzaW9uICAgICAxLjQuNQovLyBAcnVuLWF0ICAgICAgZG9jdW1lbnQtc3RhcnQKLy8gQGdyYW50IAlub25lCi8vID09L1VzZXJTY3JpcHQ9PQooZnVuY3Rpb24oKXsKdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtzLnNldEF0dHJpYnV0ZSgnc3JjJywnQHJlcXVpcmUnKTtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHMpOwp9KSgpCndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmVzY3JpcHRleGVjdXRlJywgZnVuY3Rpb24oZSkgewoJdmFyIHNyYyA9IGUudGFyZ2V0LnNyYzsKCWlmIChzcmMuaW5kZXhPZignZy5hbGljZG4uY29tL2FsaWxvZy9tbG9nL2FwbHVzX3YyLmpzJyB8fCAnZy5hbGljZG4uY29tL3NlY2Rldi9hZGJsay9pbmRleC5qcycpICE9PSAtMSkgewoJCWUucHJldmVudERlZmF1bHQoKTsKCX0KfSwgZmFsc2UpOw=="},{"name":"Steam Info","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["steamcommunity.com","store.steampowered.com","www.desura.com"],"orig_excludes":[],"orig_includes":["http://steamdb.sinaapp.com/sync","https://steamdb.steamcn.com/sync"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":["steamcommunity.com","steampowered.com","desura.com"],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1492505332287},"enabled":true,"position":9,"file_url":"https://greasyfork.org/scripts/956-steam-info/code/Steam%20Info.user.js","uuid":"ba15c0bc-7d8d-492a-86b0-14cf314fdf5f","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIFN0ZWFtIEluZm8KLy8gQG5hbWVzcGFjZSAgIGh0dHA6Ly91c2Vyc2NyaXB0cy5vcmcvdXNlcnMvZGVwYXJzb3VsCi8vIEBkZXNjcmlwdGlvbiDlv6vpgJ/mn6Xor6JTdGVhbea4uOaIj+S/oeaBrwovLyBAaW5jbHVkZSAgICAgaHR0cDovL3N0ZWFtZGIuc2luYWFwcC5jb20vc3luYwovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly9zdGVhbWRiLnN0ZWFtY24uY29tL3N5bmMKLy8gQGdyYW50ICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vIEB2ZXJzaW9uICAgICAwLjM4Ci8vIEBjb25uZWN0ICAgICBzdGVhbWNvbW11bml0eS5jb20KLy8gQGNvbm5lY3QgICAgIHN0b3JlLnN0ZWFtcG93ZXJlZC5jb20KLy8gQGNvbm5lY3QgICAgIHd3dy5kZXN1cmEuY29tCi8vID09L1VzZXJTY3JpcHQ9PQoKaWYgKGRvY3VtZW50LlVSTCA9PSAnaHR0cHM6Ly9zdGVhbWRiLnN0ZWFtY24uY29tL3N5bmMnIHx8IGRvY3VtZW50LlVSTCA9PSAnaHR0cDovL3N0ZWFtZGIuc2luYWFwcC5jb20vc3luYycpIHsKICAgIGV4ZWMoJ3NldFNjcmlwdFZlcnNpb24oJyArIGFkZHNsYXNoZXMoR01faW5mby5zY3JpcHQudmVyc2lvbikgKyAnKScpOwogICAgdmFyIG5vY2FjaGUgPSAnXz0nICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwKTsKICAgIGxvYWQoJ2h0dHA6Ly9zdGVhbWNvbW11bml0eS5jb20vbXkvZ2FtZXM/dGFiPWFsbCcsICdvd24nKTsKICAgIGxvYWQoJ2h0dHA6Ly9zdG9yZS5zdGVhbXBvd2VyZWQuY29tL2R5bmFtaWNzdG9yZS91c2VyZGF0YS8/JyArIG5vY2FjaGUsICd1c2VyZGF0YScpOwogICAgbG9hZCgnaHR0cDovL3d3dy5kZXN1cmEuY29tL2dhbWVzL2FqYXgvanNvbi9hbGw/Y29sbGVjdGlvbj10JicgKyBub2NhY2hlLCAnZGVzdXJhJyk7Cn0gZWxzZSB7CiAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7CiAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCJzcmMiLCAiaHR0cHM6Ly9zdGVhbWRiLnN0ZWFtY24uY29tL3N0ZWFtX2luZm8uanMiKTsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTsKfQoKLy9TY3JpcHQgSW5qZWN0aW9uCmZ1bmN0aW9uIGV4ZWMoZm4pIHsKICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoInR5cGUiLCAiYXBwbGljYXRpb24vamF2YXNjcmlwdCIpOwogICAgc2NyaXB0LnRleHRDb250ZW50ID0gZm47CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7CiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcmlwdCk7Cn0KCi8vTG9hZCB1cmwgYW5kIGNhbGwgcHJvYyBmdW5jdGlvbgpmdW5jdGlvbiBsb2FkKHVybCwgaWQpIHsKICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgIHVybDogdXJsLAogICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgICAgZXhlYygncHJvY18nICsgaWQgKyAnKCInICsgYWRkc2xhc2hlcyhyZXNwb25zZS5yZXNwb25zZVRleHQpICsgJyIpJyk7CiAgICAgICAgfQogICAgfSk7Cn0KCi8vQWRkIHNsYXNoZXMgdG8gc3RyaW5nCmZ1bmN0aW9uIGFkZHNsYXNoZXMoc3RyaW5nKSB7CiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xcL2csICdcXFxcJykuCiAgICByZXBsYWNlKC9cdTAwMDgvZywgJ1xcYicpLgogICAgcmVwbGFjZSgvXHQvZywgJ1xcdCcpLgogICAgcmVwbGFjZSgvXG4vZywgJ1xcbicpLgogICAgcmVwbGFjZSgvXGYvZywgJ1xcZicpLgogICAgcmVwbGFjZSgvXHIvZywgJ1xccicpLgogICAgcmVwbGFjZSgvJy9nLCAnXFxcJycpLgogICAgcmVwbGFjZSgvIi9nLCAnXFwiJyk7Cn0K"},{"name":"dopekeys","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["http*://dopekeys.com/giveaway/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-end","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1492505332292},"enabled":false,"position":10,"file_url":"https://gist.githubusercontent.com/kaoyusu/7bf2f0e509eef25f94daf8ade78a2680/raw/dopekeys.user.js","uuid":"2368822f-601d-4483-92cf-fec3c7bf8787","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgZG9wZWtleXMKLy8gQG5hbWVzcGFjZSAgICAgaHR0cDovL2RvcGVrZXlzLmNvbS9naXZlYXdheS1saXN0aW5nLwovLyBAZGVzY3JpcHRpb24gICDnoLTnvZHnq5noh6rliqjohJrmnKwKLy8gQHZlcnNpb24gICAgICAgMC4xLjMKLy8gQGF1dGhvciAgICAgICAgS2FveXUKLy8gQHN1cHBvcnRVUkwgICAgaHR0cDovL3N0ZWFtY24uY29tL3QyMzg2ODctMS0xCi8vIEBkb3dubG9hZFVSTCAgIGh0dHBzOi8vZ2lzdC5naXRodWJ1c2VyY29udGVudC5jb20va2FveXVzdS83YmYyZjBlNTA5ZWVmMjVmOTRkYWY4YWRlNzhhMjY4MC9yYXcvZG9wZWtleXMudXNlci5qcwovLyBAdXBkYXRlVVJMICAgICBodHRwczovL2dpc3QuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2thb3l1c3UvN2JmMmYwZTUwOWVlZjI1Zjk0ZGFmOGFkZTc4YTI2ODAvcmF3L2RvcGVrZXlzLnVzZXIuanMKLy8gQGluY2x1ZGUgICAgICAgaHR0cCo6Ly9kb3Bla2V5cy5jb20vZ2l2ZWF3YXkvKgovLyBAcnVuLWF0ICAgICAgICBkb2N1bWVudC1lbmQKLy8gPT0vVXNlclNjcmlwdD09Cgp2YXIgbm9uY2UgPSAkKCIucGFnZXZpc2l0LWxpbmsiKS5hdHRyKCJkYXRhLW5vbmNlIik7CnZhciBpID0gMCwgZmFpbE51bSA9IDA7CnZhciBwYXNzPWZ1bmN0aW9uKCl7CiAgICB2YXIgdGlkID0gJCh0aGlzKS5kYXRhKCdpZCcpOwogICAgdmFyIHBpZCA9ICQodGhpcykuZGF0YSgnZXZlbnQnKTsKICAgIGlmKCQodGhpcykucGFyZW50cygnLnBhbmVsJykuZmluZCgiLnBhbmVsLWhlYWRpbmcgYSIpLmhhc0NsYXNzKCdkb25lJykpIHJldHVybjsKICAgIHZhciBvcmlnaW4gPSAkKHRoaXMpOwogICAgaWYobm9uY2UgPT09IG51bGwgIHx8IG5vbmNlID09PSB1bmRlZmluZWQgfHwgcGlkID09PSBudWxsIHx8IHBpZCA9PT0gdW5kZWZpbmVkKSByZXR1cm47CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICQuYWpheCh7CiAgICAgICAgICAgIHVybDogImh0dHA6Ly9kb3Bla2V5cy5jb20vd3AtYWRtaW4vYWRtaW4tYWpheC5waHAiLAogICAgICAgICAgICB0eXBlOiAnUE9TVCcsCiAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgIGFjdGlvbjogJ3NhdmV0YXNrJywKICAgICAgICAgICAgICAgIHRpZCA6IHRpZCwKICAgICAgICAgICAgICAgIHBpZCA6IHBpZCwKICAgICAgICAgICAgICAgIG5vbmNlIDogbm9uY2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgaS0tOwogICAgICAgICAgICAgICAgZmFpbE51bSsrOwogICAgICAgICAgICAgICAgcmV0cnkoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uZCkgewogICAgICAgICAgICAgICAgaS0tOwogICAgICAgICAgICAgICAgaWYocmVzcG9uZC5Nc2dDb2RlID09ICcxJyAmJiByZXNwb25kLmRhdGEucV9yZXN1bHQpewogICAgICAgICAgICAgICAgICAgIG9yaWdpbi5wYXJlbnRzKCcucGFuZWwnKS5maW5kKCIucGFuZWwtaGVhZGluZyBhIikuYWRkQ2xhc3MoJ2RvbmUnKTsKICAgICAgICAgICAgICAgICAgICBvcmlnaW4uYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZhaWxOdW0rKzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHJ5KCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICB9LCA1MDAwKmkpOwogICAgaSsrOwp9Owp2YXIgcmV0cnkgPSBmdW5jdGlvbigpewogICAgaWYoaSA8PSAwICYmIGZhaWxOdW0gPiAwICYmIGNvbmZpcm0oZmFpbE51bSArICLkuKrmj5DkuqTlpLHotKUs5piv5ZCm6YeN6K+VPyIpID09PSB0cnVlKSB7CiAgICAgICAgaSA9IDA7CiAgICAgICAgZmFpbE51bSA9IDA7CiAgICAgICAgJCgiW2RhdGEtZXZlbnRdOm5vdCguZGlzYWJsZWQpIikuZWFjaChwYXNzKTsKICAgIH0KfTsKdmFyIGdldE5vbmNlID0gZnVuY3Rpb24oKXsKICAgICQuYWpheCh7CiAgICAgICAgdXJsOiAiaHR0cDovL2RvcGVrZXlzLmNvbS9naXZlYXdheS93b29kbGUtdHJlZS0yLW9yLWEtZGV0ZWN0aXZlcy1ub3ZlbC8iLAogICAgICAgIGVycm9yOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYoY29uZmlybSgi6I635Y+W5L+h5oGv5aSx6LSlLOaYr+WQpumHjeivlT8iKSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgZ2V0Tm9uY2UoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oaHRtbCkgewogICAgICAgICAgICBub25jZSA9ICQoaHRtbCkuZmluZCgiLnBhZ2V2aXNpdC1saW5rIikuYXR0cigiZGF0YS1ub25jZSIpOwogICAgICAgICAgICBpZihub25jZSA9PT0gbnVsbCB8fCBub25jZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBpZihjb25maXJtKCLojrflj5bkv6Hmga/lpLHotKUs5piv5ZCm6YeN6K+VPyIpID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgZ2V0Tm9uY2UoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICQoIltkYXRhLWV2ZW50XTpub3QoLmRpc2FibGVkKSIpLmVhY2gocGFzcyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKfTsKaWYobm9uY2UgPT09IG51bGwgfHwgbm9uY2UgPT09IHVuZGVmaW5lZCkgewogICAgZ2V0Tm9uY2UoKTsKfSBlbHNlIHsKICAgICQoIltkYXRhLWV2ZW50XTpub3QoLmRpc2FibGVkKSIpLmVhY2gocGFzcyk7Cn0="},{"name":"Bypass Wait, Code & Login on Websites","options":{"awareOfChrome":true,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_prototypes":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["down.lepan.cc","music.baidu.com","yinyueyun.baidu.com","media.store.kugou.com","trackercdn.kugou.com","yinyuetai.com","itwusun.com","self"],"orig_excludes":[],"orig_includes":["http://localhost.cuwcl4c/*","http://jixunmoe.github.io/*","http://123564.com/*","http://m.123564.com/*","http://5xfile.com/*","http://www.5xfile.com/*","http://yun.baidu.com/*","http://pan.baidu.com/*","http://howfile.com/*","http://*.howfile.com/*","http://jkpan.cc/*","http://*.jkpan.cc/*","http://namipan.cc/*","http://*.namipan.cc/*","http://10pan.cc/*","http://*.10pan.cc/*","http://66yp.cc/*","http://*.66yp.cc/*","http://123wzwp.com/*","http://*.123wzwp.com/*","http://hiyp.cc/*","http://*.hiyp.cc/*","http://jkpan.cc/*","http://*.jkpan.cc/*","http://webhd.xuite.net/*","http://sync.hamicloud.net/*","http://www.yimuhe.com/*","http://douban.fm/*","https://douban.fm/*","http://moe.fm/*","http://music.163.com/*","https://music.163.com/*","http://www.1ting.com/*","http://www.23356.com/*","http://www.app-echo.com/*","http://web.kugou.com/*","https://jixunmoe.github.io/cuwcl4c/config/"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"CUWCL4C":"s{\"version\":1,\"bDiaplayLog\":true,\"bUseCustomRules\":false,\"dAria_auth\":0,\"dAria_port\":6800,\"dUriType\":0,\"sAria_dir\":\"D:\\\\Download\\\\\",\"sAria_host\":\"127.0.0.1\",\"sAria_pass\":\"\",\"sAria_user\":\"\",\"sCustomRule\":\"\"}"},"ts":1492505332299},"enabled":true,"position":11,"file_url":"https://greasyfork.org/scripts/2600-%E8%B7%B3%E8%BF%87%E7%BD%91%E7%AB%99%E7%AD%89%E5%BE%85-%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8F%8A%E7%99%BB%E5%BD%95/code/%E8%B7%B3%E8%BF%87%E7%BD%91%E7%AB%99%E7%AD%89%E5%BE%85%E3%80%81%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8F%8A%E7%99%BB%E5%BD%95.user.js","uuid":"43a0f3f2-e2b2-4454-986a-65ad9fee55ea","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQGdyYW50ICAgICAgICAgIHVuc2FmZVdpbmRvdwovLyBAZ3JhbnQgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgICAgICAgIEdNX29wZW5JblRhYgovLyBAZ3JhbnQgICAgICAgICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZAovLyBAZ3JhbnQgICAgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICAgICBHTV9nZXRSZXNvdXJjZVRleHQKLy8gQGdyYW50ICAgICAgICAgIEdNX2luZm8KCi8vIEBydW4tYXQgICAgICAgICBkb2N1bWVudC1zdGFydAovLyBAbmFtZTplbiAgICAgICAgQnlwYXNzIFdhaXQsIENvZGUgJiBMb2dpbiBvbiBXZWJzaXRlcwovLyBAbmFtZSAgICAgICAgICAg6Lez6L+H572R56uZ562J5b6F44CB6aqM6K+B56CB5Y+K55m75b2VCi8vIEBuYW1lOnpoLUNOICAgICDot7Pov4fnvZHnq5nnrYnlvoXjgIHpqozor4HnoIHlj4rnmbvlvZUKLy8gQG5hbWU6emgtVFcgICAgIOe5numBjuermem7nuetieW+heOAgeitmOWIpeeivOWPiueZu+mMhAoKLy8gQGRlc2NyaXB0aW9uICAgICAgIOenu+mZpOWQhOexu+e9keermemqjOivgeeggeOAgeeZu+W9leOAgeWAkuiuoeaXtuWPiuabtOWkmiEKLy8gQGRlc2NyaXB0aW9uOnpoLUNOIOenu+mZpOWQhOexu+e9keermemqjOivgeeggeOAgeeZu+W9leOAgeWAkuiuoeaXtuWPiuabtOWkmiEKLy8gQGRlc2NyaXB0aW9uOnpoLVRXIOenu+mZpOWQhOmhnuermem7nuitmOWIpeeivOOAgeeZu+mMhOOAgeWAkuioiOaZguWPiuabtOWkmiEKLy8gQGRlc2NyaXB0aW9uOmVuICAgIFJlbW92ZSB2ZXJpZnkgY29kZSwgbG9naW4gcmVxdWlyZW1lbnQsIGNvdW50aW5nIGRvd24uLi4gYW5kIG1vcmUhCgoKLy8gQGNvcHlyaWdodCAgICAgIDIwMTQrLCBZdWxlaSwgTW9kIGJ5IEppeHVuLgovLy8vICAgICAgICAgICAgICAgQmFzZWQgb24gW0NyYWNrIFVybCBXYWl0IENvZGUgTG9naW5dIEJ5IFl1bGVpCgovLyDpgb/lhY0gU291cmNlIE1hcCDmlofku7bmib7kuI3liLDnmoTplJnor68KLy8gQHJlcXVpcmUgICAgICAgIGh0dHBzOi8vY2RuLmJvb3Rjc3MuY29tL2pxdWVyeS8yLjEuNC9qcXVlcnkuanMKLy8gQHJlcXVpcmUgICAgICAgIGh0dHBzOi8vY2RuLmJvb3Rjc3MuY29tL3VuZGVyc2NvcmUuanMvMS44LjMvdW5kZXJzY29yZS5qcwoKLy8vIENyeXB0b0pTIOebuOWFs+W6kwovLyBAcmVxdWlyZSAgICAgICAgaHR0cHM6Ly9jZG4uYm9vdGNzcy5jb20vY3J5cHRvLWpzLzMuMS4yL2NvbXBvbmVudHMvY29yZS1taW4uanMKLy8gQHJlcXVpcmUgICAgICAgIGh0dHBzOi8vY2RuLmJvb3Rjc3MuY29tL2NyeXB0by1qcy8zLjEuMi9jb21wb25lbnRzL2VuYy1iYXNlNjQtbWluLmpzCi8vIEByZXF1aXJlICAgICAgICBodHRwczovL2Nkbi5ib290Y3NzLmNvbS9jcnlwdG8tanMvMy4xLjIvY29tcG9uZW50cy9tZDUtbWluLmpzCi8vIEByZXF1aXJlICAgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvNjY5Ni9jb2RlL0NyeXB0b0pTLUJ5dGVBcnJheS5qcwoKLy8vIOmdnuWQjOatpeaemuS4vgovLyBAcmVxdWlyZSAgICAgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzM1ODgtaW50ZXJ2YWwtbG9vcGVyL2NvZGUvSW50ZXJ2YWwtTG9vcGVyLmpzCgovLy8g5YW85a65IEdNIDEueCwgMi54Ci8vIEByZXF1aXJlICAgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvMjU5OS9jb2RlL2dtMi1wb3J0LXYxMDQuanMKCi8vLyBBcmlhMiBSUEMKLy8gQHJlcXVpcmUgICAgICAgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy81NjcyL2NvZGUvQXJpYTItUlBDLWJ1aWxkLTEwLmpzCgovLyBWdWVKcywgbm90IGFsd2F5cyB1c2VkLgovLyBAcmVzb3VyY2UgICAgICAgVnVlSnMgaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvdnVlLzEuMC4yNi92dWUubWluLmpzCgovLyBAYXV0aG9yICAgICAgICAgSml4dW4uTW9lPFllbGxvdyBZb3NoaT4KLy8gQG5hbWVzcGFjZSAgICAgIGh0dHA6Ly9qaXh1bi5vcmcvCi8vIEB2ZXJzaW9uICAgICAgICA0LjAuNzIwCgovLyDlsJ3or5Xkvb/nlKjohJrmnKznlJ/miJDljLnphY3op4TliJkKLy8gLy8vLyAgICAgICAgICAgICAgIFtJbmNsdWRlIFJ1bGVzXQoKLy8gQGluY2x1ZGUgaHR0cDovL2xvY2FsaG9zdC5jdXdjbDRjLyoKLy8gQGluY2x1ZGUgaHR0cDovL2ppeHVubW9lLmdpdGh1Yi5pby8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8xMjM1NjQuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL20uMTIzNTY0LmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly81eGZpbGUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL3d3dy41eGZpbGUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL3l1bi5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vcGFuLmJhaWR1LmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly9ob3dmaWxlLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLmhvd2ZpbGUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL2prcGFuLmNjLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouamtwYW4uY2MvKgovLyBAaW5jbHVkZSBodHRwOi8vbmFtaXBhbi5jYy8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLm5hbWlwYW4uY2MvKgovLyBAaW5jbHVkZSBodHRwOi8vMTBwYW4uY2MvKgovLyBAaW5jbHVkZSBodHRwOi8vKi4xMHBhbi5jYy8qCi8vIEBpbmNsdWRlIGh0dHA6Ly82NnlwLmNjLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouNjZ5cC5jYy8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8xMjN3endwLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLjEyM3d6d3AuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL2hpeXAuY2MvKgovLyBAaW5jbHVkZSBodHRwOi8vKi5oaXlwLmNjLyoKLy8gQGluY2x1ZGUgaHR0cDovL2prcGFuLmNjLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouamtwYW4uY2MvKgovLyBAaW5jbHVkZSBodHRwOi8vd2ViaGQueHVpdGUubmV0LyoKLy8gQGluY2x1ZGUgaHR0cDovL3N5bmMuaGFtaWNsb3VkLm5ldC8qCi8vIEBpbmNsdWRlIGh0dHA6Ly93d3cueWltdWhlLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly9kb3ViYW4uZm0vKgovLyBAaW5jbHVkZSBodHRwczovL2RvdWJhbi5mbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly9tb2UuZm0vKgovLyBAaW5jbHVkZSBodHRwOi8vbXVzaWMuMTYzLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHBzOi8vbXVzaWMuMTYzLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly93d3cuMXRpbmcuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL3d3dy4yMzM1Ni5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vd3d3LmFwcC1lY2hvLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly93ZWIua3Vnb3UuY29tLyoKLy8gQGluY2x1ZGUgaHR0cHM6Ly9qaXh1bm1vZS5naXRodWIuaW8vY3V3Y2w0Yy9jb25maWcvCgovLyBHTV94bWxIdHRwUmVxdWVzdCDov5znq6/mnI3liqHlmajliJfooagKLy8gQGNvbm5lY3QgZG93bi5sZXBhbi5jYwovLyBAY29ubmVjdCBtdXNpYy5iYWlkdS5jb20KLy8gQGNvbm5lY3QgeWlueXVleXVuLmJhaWR1LmNvbQovLyBAY29ubmVjdCBtZWRpYS5zdG9yZS5rdWdvdS5jb20KLy8gQGNvbm5lY3QgdHJhY2tlcmNkbi5rdWdvdS5jb20KLy8gQGNvbm5lY3QgeWlueXVldGFpLmNvbQovLyBAY29ubmVjdCBpdHd1c3VuLmNvbQovLyBAY29ubmVjdCBzZWxmCgovLyDlkYror4kgVGFtcGVyTW9ua2V5IOi/meS4quiEmuacrOS4jemcgOimgei9rOaNogovLyBAbm9jb21wYXQgQ2hyb21lCgovLyA9PS9Vc2VyU2NyaXB0PT0KdmFyIGRlZmluZSA9IChmdW5jdGlvbiAoKSB7CiAgICB2YXIgX21vZHVsZXMgPSB7fTsKICAgIHJldHVybiBkZWZpbmU7CiAgICBmdW5jdGlvbiBkZWZpbmUobW9kdWxlLCByZXF1aXJlcywgY2FsbGJhY2spIHsKICAgICAgICB2YXIgX3RoaXNfbW9kdWxlID0gewogICAgICAgICAgICBleHBvcnRzOiB7fQogICAgICAgIH07CiAgICAgICAgdmFyIHBhcmFtcyA9IHJlcXVpcmVzLm1hcCgobW9kdWxlKSA9PiB7CiAgICAgICAgICAgIGlmIChtb2R1bGUgPT0gJ2V4cG9ydHMnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXNfbW9kdWxlLmV4cG9ydHM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAobW9kdWxlID09ICdyZXF1aXJlJykgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVpcmU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlcXVpcmUobW9kdWxlKTsKICAgICAgICB9KTsKICAgICAgICBjYWxsYmFjay5hcHBseSh0aGlzLCBwYXJhbXMpOwogICAgICAgIF9tb2R1bGVzW21vZHVsZV0gPSBfdGhpc19tb2R1bGUuZXhwb3J0czsKICAgIH0KICAgIGZ1bmN0aW9uIHJlcXVpcmUobW9kdWxlKSB7CiAgICAgICAgcmV0dXJuIF9tb2R1bGVzW21vZHVsZV07CiAgICB9Cn0pKCk7CmRlZmluZSgiaGVscGVyL1NjcmlwdCIsIFsicmVxdWlyZSIsICJleHBvcnRzIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgdmFyIFNjcmlwdDsKICAgIChmdW5jdGlvbiAoU2NyaXB0KSB7CiAgICAgICAgU2NyaXB0Lk5hbWUgPSAiQ1VXQ0w0QyI7CiAgICAgICAgU2NyaXB0LkhvbWUgPSAiaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1DTi9zY3JpcHRzLzI2MDAiOwogICAgICAgIFNjcmlwdC5Db25maWcgPSAiaHR0cHM6Ly9qaXh1bm1vZS5naXRodWIuaW8vY3V3Y2w0Yy9jb25maWcvIjsKICAgICAgICBTY3JpcHQuRmVlZGJhY2sgPSAiaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9mb3J1bS9wb3N0L2Rpc2N1c3Npb24/RGlzY3Vzc2lvbi9TY3JpcHRJRD0yNjAwIjsKICAgICAgICBmdW5jdGlvbiBMaXN0ZW5FdmVudChsaXN0ZW5lcikgewogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFNjcmlwdC5OYW1lLCAoZSkgPT4gewogICAgICAgICAgICAgICAgdmFyIGluZm87CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGUuZGV0YWlsID09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgaW5mbyA9IEpTT04ucGFyc2UoZS5kZXRhaWwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaW5mbyA9IGUuZGV0YWlsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGlzdGVuZXIoaW5mbyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBTY3JpcHQuTGlzdGVuRXZlbnQgPSBMaXN0ZW5FdmVudDsKICAgICAgICBmdW5jdGlvbiBGaXJlRXZlbnQobmFtZSwgZGF0YSkgewogICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChuYW1lLCB7CiAgICAgICAgICAgICAgICBkZXRhaWw6IEpTT04uc3RyaW5naWZ5KGRhdGEpCiAgICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgICAgU2NyaXB0LkZpcmVFdmVudCA9IEZpcmVFdmVudDsKICAgICAgICBmdW5jdGlvbiBSZWdpc3RlclN0b3JhZ2VFdmVudChrZXksIGxpc3RlbmVyKSB7CiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgKGUpID0+IHsKICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PSBrZXkpIHsKICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcihrZXkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgU2NyaXB0LlJlZ2lzdGVyU3RvcmFnZUV2ZW50ID0gUmVnaXN0ZXJTdG9yYWdlRXZlbnQ7CiAgICB9KShTY3JpcHQgPSBleHBvcnRzLlNjcmlwdCB8fCAoZXhwb3J0cy5TY3JpcHQgPSB7fSkpOwp9KTsKZGVmaW5lKCJoZWxwZXIvQ29uc3RhbnRzIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICAvLyDluLjmlbAKICAgIGV4cG9ydHMuaXNGcmFtZSA9IF9pc0ZyYW1lKCk7CiAgICBleHBvcnRzLnZlcnNpb24gPSBHTV9pbmZvLnNjcmlwdC52ZXJzaW9uOwogICAgZXhwb3J0cy5jdXJyZW50VXJsID0gbG9jYXRpb24uaHJlZi5zcGxpdCgnIycpWzBdOwogICAgZXhwb3J0cy5sb3dlckhvc3QgPSBsb2NhdGlvbi5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpOwogICAgZXhwb3J0cy50b3BIb3N0ID0gZXhwb3J0cy5sb3dlckhvc3QubWF0Y2goL1x3K1wuP1x3Kz8kLylbMF07CiAgICBleHBvcnRzLnRvcEhvc3RNYXNrID0gYC4ke2V4cG9ydHMudG9wSG9zdH1gOwogICAgZXhwb3J0cy5kb3dubG9hZEljb25DbGFzcyA9ICdqeF9kbCc7CiAgICBleHBvcnRzLmRvd25sb2FkSWNvblNlbGVjdG9yID0gJy5qeF9kbCc7CiAgICBmdW5jdGlvbiBfaXNGcmFtZSgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gdW5zYWZlV2luZG93LnRvcCAhPT0gdW5zYWZlV2luZG93LnNlbGY7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgIH0KfSk7CmRlZmluZSgiaGVscGVyL0xvZ2dlciIsIFsicmVxdWlyZSIsICJleHBvcnRzIiwgImhlbHBlci9TY3JpcHQiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIFNjcmlwdF8xKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgZnVuY3Rpb24gRG9Mb2cocHJlZml4LCBtZXRob2QsIGFyZ3MpIHsKICAgICAgICBpZiAoYXJncy5sZW5ndGggPCAxKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIGFyZ3NbMF0gPSBgWyR7U2NyaXB0XzEuU2NyaXB0Lk5hbWV9XVske3ByZWZpeH1dICR7YXJnc1swXX1gOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgYXJncy5zcGxpY2UoMCwgMCwgYFske1NjcmlwdF8xLlNjcmlwdC5OYW1lfV1bJHtwcmVmaXh9XSAke2FyZ3NbMF19YCk7CiAgICAgICAgfQogICAgICAgIGNvbnNvbGVbbWV0aG9kXS5hcHBseShjb25zb2xlLCBhcmdzKTsKICAgIH0KICAgIGZ1bmN0aW9uIFdyYXBMb2cocHJlZml4LCBtZXRob2QpIHsKICAgICAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHsKICAgICAgICAgICAgcmV0dXJuIERvTG9nKHByZWZpeCwgbWV0aG9kLCBhcmdzKTsKICAgICAgICB9OwogICAgfQogICAgZnVuY3Rpb24gRG9Ob3RoaW5nKCkgeyB9CiAgICBleHBvcnRzLmxvZyA9IERvTm90aGluZzsKICAgIGV4cG9ydHMuaW5mbyA9IERvTm90aGluZzsKICAgIGV4cG9ydHMuZXJyb3IgPSBEb05vdGhpbmc7CiAgICBleHBvcnRzLndhcm4gPSBEb05vdGhpbmc7CiAgICBmdW5jdGlvbiBFbmFibGVMb2dzKCkgewogICAgICAgIGV4cG9ydHMubG9nID0gV3JhcExvZygn5pel5b+XJywgJ2xvZycpOwogICAgICAgIGV4cG9ydHMuaW5mbyA9IFdyYXBMb2coJ+S/oeaBrycsICdpbmZvJyk7CiAgICAgICAgZXhwb3J0cy5lcnJvciA9IFdyYXBMb2coJ+mUmeivrycsICdlcnJvcicpOwogICAgICAgIGV4cG9ydHMud2FybiA9IFdyYXBMb2coJ+itpuWRiicsICd3YXJuJyk7CiAgICB9CiAgICBleHBvcnRzLkVuYWJsZUxvZ3MgPSBFbmFibGVMb2dzOwp9KTsKZGVmaW5lKCJoZWxwZXIvU2NyaXB0Q29uZmlnIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL1NjcmlwdCIsICJoZWxwZXIvTG9nZ2VyIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBTY3JpcHRfMiwgTG9nZ2VyXzEpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICB2YXIgVXJpVHlwZTsKICAgIChmdW5jdGlvbiAoVXJpVHlwZSkgewogICAgICAgIFVyaVR5cGVbVXJpVHlwZVsiTm9ybWFsVXJsIl0gPSAwXSA9ICJOb3JtYWxVcmwiOwogICAgICAgIC8qKiBAZGVwcmVjYXRlZCB1c2Ugb3RoZXJzIGluc3RlYWQuICovCiAgICAgICAgVXJpVHlwZVtVcmlUeXBlWyJDdXN0b20iXSA9IDFdID0gIkN1c3RvbSI7CiAgICAgICAgVXJpVHlwZVtVcmlUeXBlWyJBcmlhIl0gPSAyXSA9ICJBcmlhIjsKICAgIH0pKFVyaVR5cGUgPSBleHBvcnRzLlVyaVR5cGUgfHwgKGV4cG9ydHMuVXJpVHlwZSA9IHt9KSk7CiAgICBmdW5jdGlvbiBSZWFkQ29uZmlnKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKEdNX2dldFZhbHVlKFNjcmlwdF8yLlNjcmlwdC5OYW1lLCAiIikpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZXgpIHsKICAgICAgICAgICAgcmV0dXJuIHsgdmVyc2lvbjogMCB9OwogICAgICAgIH0KICAgIH0KICAgIGV4cG9ydHMuQ29uZmlnID0gJC5leHRlbmQoewogICAgICAgIHZlcnNpb246IDEsCiAgICAgICAgYkRpYXBsYXlMb2c6IHRydWUsCiAgICAgICAgYlllbGxvd0Vhc2VJbnRlcm5hdGlvbmFsOiBmYWxzZSwKICAgICAgICBiWWVsbG93RWFzZVVzZU9sZEFwaTogZmFsc2UsCiAgICAgICAgYlllbGxvd0Vhc2VVc2VUaHJpZE9uRmFpbDogZmFsc2UsCiAgICAgICAgYlVzZUN1c3RvbVJ1bGVzOiBmYWxzZSwKICAgICAgICBkQXJpYV9hdXRoOiBBcmlhMi5BVVRILm5vQXV0aCwKICAgICAgICBkQXJpYV9wb3J0OiA2ODAwLAogICAgICAgIGRVcmlUeXBlOiBVcmlUeXBlLk5vcm1hbFVybCwKICAgICAgICBzQXJpYV9kaXI6ICJEOlxcRG93bmxvYWRcXCIsCiAgICAgICAgc0FyaWFfaG9zdDogIjEyNy4wLjAuMSIsCiAgICAgICAgc0FyaWFfcGFzczogIiIsCiAgICAgICAgc0FyaWFfdXNlcjogIiIsCiAgICAgICAgc0N1c3RvbVJ1bGU6ICIiCiAgICB9LCBSZWFkQ29uZmlnKCkpOwogICAgLy8g5Y2H57qnCiAgICBjb25zdCBfX2xhdGVzdF92ZXJzaW9uID0gMTsKICAgIGlmIChleHBvcnRzLkNvbmZpZy52ZXJzaW9uICE9IF9fbGF0ZXN0X3ZlcnNpb24pIHsKICAgICAgICBzd2l0Y2ggKGV4cG9ydHMuQ29uZmlnLnZlcnNpb24pIHsKICAgICAgICAgICAgY2FzZSB1bmRlZmluZWQ6CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIExvZ2dlcl8xLmluZm8oJ+WNh+e6pyB2MCDphY3nva7mlofku7YuLi4nKTsKICAgICAgICAgICAgICAgIGV4cG9ydHMuQ29uZmlnLnZlcnNpb24gPSAxOwogICAgICAgICAgICAgICAgZXhwb3J0cy5Db25maWcuYlllbGxvd0Vhc2VJbnRlcm5hdGlvbmFsID0gZXhwb3J0cy5Db25maWcuYkludGVybmF0aW9uYWw7CiAgICAgICAgICAgICAgICBleHBvcnRzLkNvbmZpZy5iWWVsbG93RWFzZVVzZU9sZEFwaSA9IGV4cG9ydHMuQ29uZmlnLmJQcm94eUluc3RhbGxlZDsKICAgICAgICAgICAgICAgIGV4cG9ydHMuQ29uZmlnLmJZZWxsb3dFYXNlVXNlVGhyaWRPbkZhaWwgPSBleHBvcnRzLkNvbmZpZy5iVXNlVGhyaWRPbkZhaWw7CiAgICAgICAgICAgICAgICBkZWxldGUgZXhwb3J0cy5Db25maWcuYkludGVybmF0aW9uYWw7CiAgICAgICAgICAgICAgICBkZWxldGUgZXhwb3J0cy5Db25maWcuYlVzZVRocmlkT25GYWlsOwogICAgICAgICAgICAgICAgZGVsZXRlIGV4cG9ydHMuQ29uZmlnLmJQcm94eUluc3RhbGxlZDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgR01fc2V0VmFsdWUoU2NyaXB0XzIuU2NyaXB0Lk5hbWUsIEpTT04uc3RyaW5naWZ5KGV4cG9ydHMuQ29uZmlnKSk7CiAgICB9CiAgICBpZiAoZXhwb3J0cy5Db25maWcuYkRpYXBsYXlMb2cpCiAgICAgICAgTG9nZ2VyXzEuRW5hYmxlTG9ncygpOwp9KTsKZGVmaW5lKCJoZWxwZXIvRXh0ZW5zaW9uIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICBmdW5jdGlvbiBCZWdpbldpdGgoc3RyLCB3aGF0KSB7CiAgICAgICAgcmV0dXJuIHN0ci5pbmRleE9mKHdoYXQpID09PSAwOwogICAgfQogICAgZXhwb3J0cy5CZWdpbldpdGggPSBCZWdpbldpdGg7CiAgICBmdW5jdGlvbiBFbmRXaXRoKHN0ciwgd2hhdCkgewogICAgICAgIHJldHVybiBzdHIuc2xpY2UoLXdoYXQubGVuZ3RoKSA9PSB3aGF0OwogICAgfQogICAgZXhwb3J0cy5FbmRXaXRoID0gRW5kV2l0aDsKICAgIGZ1bmN0aW9uIENvbnRhaW5zKHN0ciwgd2hhdCkgewogICAgICAgIHJldHVybiBzdHIuaW5kZXhPZih3aGF0KSAhPSAtMTsKICAgIH0KICAgIGV4cG9ydHMuQ29udGFpbnMgPSBDb250YWluczsKICAgIGZ1bmN0aW9uIEdldEZpcnN0S2V5KG9iaikgewogICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopWzBdOwogICAgfQogICAgZXhwb3J0cy5HZXRGaXJzdEtleSA9IEdldEZpcnN0S2V5OwogICAgZnVuY3Rpb24gR2V0Rmlyc3RWYWx1ZShvYmopIHsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gb2JqW0dldEZpcnN0S2V5KG9iaildOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZXgpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgfQogICAgZXhwb3J0cy5HZXRGaXJzdFZhbHVlID0gR2V0Rmlyc3RWYWx1ZTsKICAgIC8qKgogICAgICog5LuO6ZO+5o6l6I635Y+W5paH5Lu25ZCO57yA5ZCN44CCCiAgICAgKiDljIXmi6wgYC5gIOWtl+espu+8jOWmgiBgLnRzYAogICAgICovCiAgICBmdW5jdGlvbiBHZXRFeHRlbnNpb25Gcm9tVXJsKHVybCkgewogICAgICAgIHZhciBtID0gdXJsLm1hdGNoKC8uK1wvKD86W14uXSsoXC4uKz8pKSg/Olw/fCQpLyk7CiAgICAgICAgcmV0dXJuIG0gPyBtWzFdIDogbnVsbDsKICAgIH0KICAgIGV4cG9ydHMuR2V0RXh0ZW5zaW9uRnJvbVVybCA9IEdldEV4dGVuc2lvbkZyb21Vcmw7CiAgICAvLyBGaXNoZXItWWF0ZXMgU2h1ZmZsZSBieSBjb21tdW5pdHkgd2lraSg/KQogICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNjI3NDM5OAogICAgZnVuY3Rpb24gU2h1ZmZsZShhcnJheSkgewogICAgICAgIHZhciBjb3VudGVyID0gYXJyYXkubGVuZ3RoOwogICAgICAgIHZhciB0ZW1wLCBpbmRleDsKICAgICAgICAvLyBXaGlsZSB0aGVyZSBhcmUgZWxlbWVudHMgaW4gdGhlIGFycmF5CiAgICAgICAgd2hpbGUgKGNvdW50ZXIgPiAwKSB7CiAgICAgICAgICAgIC8vIFBpY2sgYSByYW5kb20gaW5kZXgKICAgICAgICAgICAgaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb3VudGVyKTsKICAgICAgICAgICAgLy8gRGVjcmVhc2UgY291bnRlciBieSAxCiAgICAgICAgICAgIGNvdW50ZXItLTsKICAgICAgICAgICAgLy8gQW5kIHN3YXAgdGhlIGxhc3QgZWxlbWVudCB3aXRoIGl0CiAgICAgICAgICAgIHRlbXAgPSBhcnJheVtjb3VudGVyXTsKICAgICAgICAgICAgYXJyYXlbY291bnRlcl0gPSBhcnJheVtpbmRleF07CiAgICAgICAgICAgIGFycmF5W2luZGV4XSA9IHRlbXA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhcnJheTsKICAgIH0KICAgIGV4cG9ydHMuU2h1ZmZsZSA9IFNodWZmbGU7Cn0pOwovLy8gPHJlZmVyZW5jZSBwYXRoPSIuLi90eXBpbmdzL2dsb2JhbHMvanF1ZXJ5L2luZGV4LmQudHMiIC8+CmRlZmluZSgiaGVscGVyL1F1ZXJ5U3RyaW5nIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL0V4dGVuc2lvbiJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgRXh0ZW5zaW9uXzEpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICBmdW5jdGlvbiBHZXRGbGFzaFZhcnMoZWwpIHsKICAgICAgICBpZiAoIWVsKQogICAgICAgICAgICByZXR1cm4ge307CiAgICAgICAgdmFyIGVsZSA9ICgnanF1ZXJ5JyBpbiBlbCA/IGVsWzBdIDogZWwpOwogICAgICAgIGlmIChlbGUuZ2V0QXR0cmlidXRlKCd0eXBlJykgIT0gJ2ZsYXNoJykKICAgICAgICAgICAgcmV0dXJuIHt9OwogICAgICAgIHZhciBmbGFzaFZhcnMgPSB7fTsKICAgICAgICB2YXIgc2l6ZSA9IGVsZS5jaGlsZE5vZGVzLmxlbmd0aDsKICAgICAgICB2YXIgZmxhc2hPYmplY3Q7CiAgICAgICAgZm9yIChsZXQgaSA9IHNpemU7IGktLTspIHsKICAgICAgICAgICAgaWYgKGVsZS5jaGlsZE5vZGVzW2ldLm5hbWUgPT0gJ2ZsYXNodmFycycpIHsKICAgICAgICAgICAgICAgIGZsYXNoT2JqZWN0ID0gZWxlLmNoaWxkTm9kZXNbaV07CiAgICAgICAgICAgICAgICBmbGFzaE9iamVjdC52YWx1ZS5yZXBsYWNlKC8mYW1wOy9nLCAnJicpCiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyhbXHNcU10rPyk9KFtcc1xTXSs/KSgmfCQpL2csIChuLCBrZXksIHZhbHVlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgLy8g5Yip55So5q2j5YiZ55qE5om56YeP5pu/5o2i5Yqf6IO95oqT5Y+W5pWw5o2uCiAgICAgICAgICAgICAgICAgICAgZmxhc2hWYXJzW2tleV0gPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIGZsYXNoVmFyczsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4ge307CiAgICB9CiAgICBleHBvcnRzLkdldEZsYXNoVmFycyA9IEdldEZsYXNoVmFyczsKICAgIGZ1bmN0aW9uIFBhcnNlKHF1ZXJ5KSB7CiAgICAgICAgdmFyIHVybFBhcmFtczsKICAgICAgICBpZiAoRXh0ZW5zaW9uXzEuQ29udGFpbnMocXVlcnksICc/JykpIHsKICAgICAgICAgICAgdXJsUGFyYW1zID0gcXVlcnkuc2xpY2UocXVlcnkuaW5kZXhPZignPycpICsgMSkuc3BsaXQoJyYnKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHVybFBhcmFtcyA9IHF1ZXJ5LnNwbGl0KCcmJyk7CiAgICAgICAgfQogICAgICAgIHZhciByZXQgPSB7fTsKICAgICAgICB2YXIgcXVlcnlTdHI7CiAgICAgICAgdmFyIHBvc0VxdWFsOwogICAgICAgIGZvciAodmFyIGkgPSB1cmxQYXJhbXMubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgICAgIHF1ZXJ5U3RyID0gdXJsUGFyYW1zW2ldLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIHBvc0VxdWFsID0gcXVlcnlTdHIuaW5kZXhPZignPScpOwogICAgICAgICAgICBpZiAocG9zRXF1YWwgPT0gLTEpCiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgcmV0W2RlY29kZVVSSUNvbXBvbmVudChxdWVyeVN0ci5zbGljZSgwLCBwb3NFcXVhbCkpXSA9CiAgICAgICAgICAgICAgICBkZWNvZGVVUklDb21wb25lbnQocXVlcnlTdHIuc2xpY2UocG9zRXF1YWwgKyAxKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXQ7CiAgICB9CiAgICBleHBvcnRzLlBhcnNlID0gUGFyc2U7Cn0pOwpkZWZpbmUoImhlbHBlci9TdHlsZVNoZWV0IiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICBjbGFzcyBTdHlsZVNoZWV0IHsKICAgICAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgICAgICAgdGhpcy5zdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgICAgICAgIHRoaXMuQXBwbHkoKTsKICAgICAgICB9CiAgICAgICAgQWRkKC4uLnN0eWxlVGV4dCkgewogICAgICAgICAgICB0aGlzLnN0eWxlLnRleHRDb250ZW50ICs9ICdcbicgKyBzdHlsZVRleHQuam9pbignXG4nKTsKICAgICAgICB9CiAgICAgICAgSGlkZShzZWxlY3RvciwgLi4uc2VsZWN0b3JzKSB7CiAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2Ygc2VsZWN0b3IpIHsKICAgICAgICAgICAgICAgIHNlbGVjdG9ycy5zcGxpY2UoMCwgMCwgc2VsZWN0b3IpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgc2VsZWN0b3JzID0gc2VsZWN0b3I7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHN0eWxlVGV4dCA9IGAke3NlbGVjdG9ycy5qb2luKCcsICcpfSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudCB9YDsKICAgICAgICAgICAgdGhpcy5BZGQoc3R5bGVUZXh0KTsKICAgICAgICB9CiAgICAgICAgU2hvdyhzZWxlY3RvciwgLi4uc2VsZWN0b3JzKSB7CiAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2Ygc2VsZWN0b3IpIHsKICAgICAgICAgICAgICAgIHNlbGVjdG9ycy5zcGxpY2UoMCwgMCwgc2VsZWN0b3IpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgc2VsZWN0b3JzID0gc2VsZWN0b3I7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHN0eWxlVGV4dCA9IGAke3NlbGVjdG9ycy5qb2luKCcsICcpfSB7IGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQgfWA7CiAgICAgICAgICAgIHRoaXMuQWRkKHN0eWxlVGV4dCk7CiAgICAgICAgfQogICAgICAgIEhpZGVGcmFtZXMoKSB7CiAgICAgICAgICAgIHRoaXMuSGlkZSgnZnJhbWUsIGlmcmFtZSwgZnJhbWVzZXQnKTsKICAgICAgICB9CiAgICAgICAgQXBwbHkoYm9keSA9IHRydWUpIHsKICAgICAgICAgICAgaWYgKGJvZHkgJiYgZG9jdW1lbnQuYm9keSkgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnN0eWxlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodGhpcy5zdHlsZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBleHBvcnRzLlN0eWxlU2hlZXQgPSBTdHlsZVNoZWV0Owp9KTsKZGVmaW5lKCJoZWxwZXIvRG93bmxvYWRlciIsIFsicmVxdWlyZSIsICJleHBvcnRzIiwgImhlbHBlci9TY3JpcHQiLCAiaGVscGVyL1NjcmlwdENvbmZpZyIsICJoZWxwZXIvRXh0ZW5zaW9uIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBTY3JpcHRfMywgU2NyaXB0Q29uZmlnXzEsIEV4dGVuc2lvbl8yKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgLy8vIDxyZWZlcmVuY2UgcGF0aD0iLi4vdHlwaW5ncy9Vc2Vyc2NyaXB0LmQudHMiIC8+CiAgICAvLy8gPHJlZmVyZW5jZSBwYXRoPSIuLi90eXBpbmdzL0dNX0FyaWEyUlBDLmQudHMiIC8+CiAgICAvLy8gPHJlZmVyZW5jZSBwYXRoPSIuLi90eXBpbmdzL2dsb2JhbHMvanF1ZXJ5L2luZGV4LmQudHMiIC8+CiAgICB2YXIgY29uZmlnID0gU2NyaXB0Q29uZmlnXzEuQ29uZmlnOwogICAgY2xhc3MgRG93bmxvYWRlciB7CiAgICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICAgIHRoaXMuX2NhcHR1cmVkID0gZmFsc2U7CiAgICAgICAgICAgIC8vIFRPRE86ID8/CiAgICAgICAgfQogICAgICAgIEdlbmVyYXRlVXJsUGFydCh1cmwsIGZpbGVuYW1lLCByZWYpIHsKICAgICAgICAgICAgcmV0dXJuIGAke3VybH18JHt0aGlzLkdldFJlZmVycmVyVXJsKGZpbGVuYW1lKX18JHt0aGlzLkdldFJlZmVycmVyVXJsKHJlZil9YDsKICAgICAgICB9CiAgICAgICAgR2V0UmVmZXJyZXJVcmwodXJsKSB7CiAgICAgICAgICAgIHJldHVybiBTdHJpbmcodXJsIHx8IGxvY2F0aW9uLmhyZWYpLnJlcGxhY2UoLyMuKi8sICcnKTsKICAgICAgICB9CiAgICAgICAgTm9ybWFsaXNlRmlsZW5hbWUoZmlsZW5hbWUpIHsKICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhmaWxlbmFtZSkucmVwbGFjZSgvWyciXC9cXDp8XS9nLCAnXycpOwogICAgICAgIH0KICAgICAgICBHZW5lcmF0ZVVyaSh1cmwsIGZpbGVuYW1lLCByZWYpIHsKICAgICAgICAgICAgc3dpdGNoIChjb25maWcuZFVyaVR5cGUpIHsKICAgICAgICAgICAgICAgIGNhc2UgU2NyaXB0Q29uZmlnXzEuVXJpVHlwZS5DdXN0b206CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBjdXdjbDRjOi8vfDF8JHt0aGlzLkdlbmVyYXRlVXJsUGFydCh1cmwsIGZpbGVuYW1lLCByZWYpfWA7CiAgICAgICAgICAgICAgICBjYXNlIFNjcmlwdENvbmZpZ18xLlVyaVR5cGUuQXJpYToKICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2NhcHR1cmVkKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkNhcHR1cmVBcmlhKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBhcmlhMjovL3wke3RoaXMuR2VuZXJhdGVVcmxQYXJ0KHVybCwgZmlsZW5hbWUsIHJlZil9YDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdXJsOwogICAgICAgIH0KICAgICAgICBDYXB0dXJlQXJpYShlbCkgewogICAgICAgICAgICB0aGlzLl9jYXB0dXJlZCA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuU2V0dXBBcmlhKGZhbHNlKTsKICAgICAgICAgICAgaWYgKCFlbCkKICAgICAgICAgICAgICAgIGVsID0gZG9jdW1lbnQuYm9keTsKICAgICAgICAgICAgJChlbCkuY2xpY2soKGUpID0+IHsKICAgICAgICAgICAgICAgIHZhciBlbCA9IGUudGFyZ2V0OwogICAgICAgICAgICAgICAgdmFyICRlbCA9ICQoZWwpOwogICAgICAgICAgICAgICAgdmFyIGxpbmtFbCA9ICgkZWwuaXMoJ2EnKSA/IGVsIDogJGVsLnBhcmVudHMoJ2EnKVswXSk7CiAgICAgICAgICAgICAgICBpZiAobGlua0VsICYmIGxpbmtFbC50YWdOYW1lID09ICdBJyAmJiBFeHRlbnNpb25fMi5CZWdpbldpdGgobGlua0VsLmhyZWYsICdhcmlhMjovL3wnKSkgewogICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIHZhciBsaW5rID0gbGlua0VsLmhyZWYuc3BsaXQoJ3wnKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLkFkZFRvQXJpYShsaW5rWzFdLCBkZWNvZGVVUklDb21wb25lbnQobGlua1syXSksIGxpbmtbM10sIGxpbmtFbC5jbGFzc0xpc3QuY29udGFpbnMoJ2FyaWEtY29va2llJykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgQWRkVG9BcmlhKHVybCwgZmlsZW5hbWUsIHJlZmVyZXIsIGNvb2tpZSwgaGVhZGVycykgewogICAgICAgICAgICB2YXIgYXJpYVBhcmFtID0gewogICAgICAgICAgICAgICAgb3V0OiBmaWxlbmFtZSwKICAgICAgICAgICAgICAgIHJlZmVyZXI6IHJlZmVyZXIgfHwgbG9jYXRpb24uaHJlZiwKICAgICAgICAgICAgICAgIGRpcjogY29uZmlnLnNBcmlhX2RpciwKICAgICAgICAgICAgICAgICd1c2VyLWFnZW50JzogbmF2aWdhdG9yLnVzZXJBZ2VudCwKICAgICAgICAgICAgICAgIGhlYWRlcjogaGVhZGVycyB8fCBbXQogICAgICAgICAgICB9OwogICAgICAgICAgICBpZiAoY29va2llID09PSB0cnVlKQogICAgICAgICAgICAgICAgY29va2llID0gZG9jdW1lbnQuY29va2llOwogICAgICAgICAgICBpZiAoY29va2llKQogICAgICAgICAgICAgICAgYXJpYVBhcmFtLmhlYWRlci5wdXNoKCdDb29raWU6ICcgKyBjb29raWUpOwogICAgICAgICAgICB0aGlzLmFyaWEuYWRkVXJpKFt1cmxdLCBhcmlhUGFyYW0sIChyKSA9PiB7IH0sIChiLCByKSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgc0Vycm9yTXNnOwogICAgICAgICAgICAgICAgaWYgKHIuZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICBzRXJyb3JNc2cgPSBg6ZSZ6K+v5Luj56CBICR7ci5lcnJvci5jb2RlfTogJHtyLmVycm9yLm1lc3NhZ2V9YDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHNFcnJvck1zZyA9ICLkuI4gQXJpYTIg5ZCO5Y+w6YCa5L+h5aSx6LSlLCDmnI3liqHmnKrlvIDlkK8/IjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGFsZXJ0KGBbJHtTY3JpcHRfMy5TY3JpcHQuTmFtZX1dIOaPkOS6pOS7u+WKoeWPkeeUn+mUmeivryEKCiR7c0Vycm9yTXNnfWApOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgU2V0dXBBcmlhKGZvcmNlU2V0dXApIHsKICAgICAgICAgICAgaWYgKGZvcmNlU2V0dXAgfHwgIXRoaXMuYXJpYSkgewogICAgICAgICAgICAgICAgdGhpcy5hcmlhID0gbmV3IEFyaWEyKHsKICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGNvbmZpZy5kQXJpYV9hdXRoLAogICAgICAgICAgICAgICAgICAgICAgICB1c2VyOiBjb25maWcuc0FyaWFfdXNlciwKICAgICAgICAgICAgICAgICAgICAgICAgcGFzczogY29uZmlnLnNBcmlhX3Bhc3MKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGhvc3Q6IGNvbmZpZy5zQXJpYV9ob3N0LAogICAgICAgICAgICAgICAgICAgIHBvcnQ6IGNvbmZpZy5kQXJpYV9wb3J0CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBBZGREb3dubG9hZCh1cmwsIGZpbGUpIHsKICAgICAgICAgICAgaWYgKGNvbmZpZy5kVXJpVHlwZSA9PSBTY3JpcHRDb25maWdfMS5VcmlUeXBlLkFyaWEpIHsKICAgICAgICAgICAgICAgIHRoaXMuQWRkVG9BcmlhKHVybCwgZmlsZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBHTV9vcGVuSW5UYWIodGhpcy5HZW5lcmF0ZVVyaSh1cmwsIGZpbGUpLCB0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGV4cG9ydHMuRG93bmxvYWRlciA9IERvd25sb2FkZXI7Cn0pOwpkZWZpbmUoIlNpdGVSdWxlIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL0NvbnN0YW50cyIsICJoZWxwZXIvRXh0ZW5zaW9uIiwgImhlbHBlci9TdHlsZVNoZWV0IiwgImhlbHBlci9Mb2dnZXIiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIENvbnN0YW50c18xLCBFeHRlbnNpb25fMywgU3R5bGVTaGVldF8xLCBMb2dnZXJfMikgewogICAgInVzZSBzdHJpY3QiOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICAgIC8vLyA8cmVmZXJlbmNlIHBhdGg9Ii4uL3R5cGluZ3MvZ2xvYmFscy9qcXVlcnkvaW5kZXguZC50cyIgLz4KICAgIGV4cG9ydHMuU2l0ZXMgPSBbXTsKICAgIGZ1bmN0aW9uIEFkZChzaXRlUnVsZSkgewogICAgICAgIHNpdGVSdWxlLl9zdHlsZUFwcGxpZWQgPSBmYWxzZTsKICAgICAgICBleHBvcnRzLlNpdGVzLnB1c2goc2l0ZVJ1bGUpOwogICAgfQogICAgZXhwb3J0cy5BZGQgPSBBZGQ7CiAgICBmdW5jdGlvbiBDaGVja1BhdGgocGF0aCwgcnVsZSkgewogICAgICAgIGlmICgkLmlzQXJyYXkocnVsZSkpIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IHJ1bGUubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgICAgICAgICBpZiAoQ2hlY2tQYXRoKHBhdGgsIHJ1bGVbaV0pKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAoJC5pc0Z1bmN0aW9uKHJ1bGUpKSB7CiAgICAgICAgICAgIHJldHVybiBydWxlKHBhdGgpOwogICAgICAgIH0KICAgICAgICBpZiAodHlwZW9mIHJ1bGUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHJldHVybiBFeHRlbnNpb25fMy5CZWdpbldpdGgocGF0aCwgcnVsZSk7CiAgICAgICAgfQogICAgICAgIGlmIChydWxlIGluc3RhbmNlb2YgUmVnRXhwKSB7CiAgICAgICAgICAgIHJldHVybiBydWxlLnRlc3QocGF0aCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGV4cG9ydHMuQ2hlY2tQYXRoID0gQ2hlY2tQYXRoOwogICAgZnVuY3Rpb24gQ2hlY2soc2l0ZSwgZXZlbnQpIHsKICAgICAgICBpZiAoc2l0ZS5zdWJNb2R1bGUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAodHlwZW9mIHNpdGUuaG9zdCA9PSAnc3RyaW5nJykgewogICAgICAgICAgICBzaXRlLmhvc3QgPSBbc2l0ZS5ob3N0XTsKICAgICAgICB9CiAgICAgICAgdmFyIGhvc3RzID0gc2l0ZS5ob3N0Lm1hcCgoaG9zdCkgPT4gewogICAgICAgICAgICByZXR1cm4gaG9zdC50b0xvd2VyQ2FzZSgpOwogICAgICAgIH0pOwogICAgICAgIGlmICghRXh0ZW5zaW9uXzMuQ29udGFpbnMoaG9zdHMsIENvbnN0YW50c18xLmxvd2VySG9zdCkpIHsKICAgICAgICAgICAgaWYgKHNpdGUubm9TdWJIb3N0KQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB2YXIgbWF0Y2hlZCA9IGZhbHNlOwogICAgICAgICAgICBmb3IgKHZhciBpID0gaG9zdHMubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgICAgICAgICBpZiAoRXh0ZW5zaW9uXzMuRW5kV2l0aChgLiR7aG9zdHNbaV19YCwgQ29uc3RhbnRzXzEudG9wSG9zdE1hc2spKSB7CiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFtYXRjaGVkKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAoc2l0ZS5wYXRoKSB7CiAgICAgICAgICAgIHJldHVybiBDaGVja1BhdGgobG9jYXRpb24ucGF0aG5hbWUsIHNpdGUucGF0aCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgZXhwb3J0cy5DaGVjayA9IENoZWNrOwogICAgZnVuY3Rpb24gR2V0KGlkKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IGV4cG9ydHMuU2l0ZXMubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgICAgIGlmIChleHBvcnRzLlNpdGVzW2ldLmlkID09IGlkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5TaXRlc1tpXTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIGV4cG9ydHMuR2V0ID0gR2V0OwogICAgZnVuY3Rpb24gRXhlY3V0ZShpZCwgZXZlbnQpIHsKICAgICAgICBzd2l0Y2ggKGV2ZW50LnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgICAgY2FzZSAnc3RhcnQnOgogICAgICAgICAgICAgICAgR2V0KGlkKS5vblN0YXJ0KCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnYm9keSc6CiAgICAgICAgICAgICAgICBHZXQoaWQpLm9uQm9keSgpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgfQogICAgZXhwb3J0cy5FeGVjdXRlID0gRXhlY3V0ZTsKICAgIGZ1bmN0aW9uIEZpcmVFdmVudChldmVudCkgewogICAgICAgIGZvciAodmFyIGkgPSBleHBvcnRzLlNpdGVzLmxlbmd0aDsgaS0tOykgewogICAgICAgICAgICB2YXIgcnVsZSA9IGV4cG9ydHMuU2l0ZXNbaV07CiAgICAgICAgICAgIGlmIChDb25zdGFudHNfMS5pc0ZyYW1lICYmICFydWxlLnJ1bkluRnJhbWUpCiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgaWYgKENoZWNrKHJ1bGUsIGV2ZW50KSkgewogICAgICAgICAgICAgICAgUnVuKHJ1bGUsIGV2ZW50KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGV4cG9ydHMuRmlyZUV2ZW50ID0gRmlyZUV2ZW50OwogICAgZnVuY3Rpb24gUnVuKHNpdGUsIGV2ZW50TmFtZSkgewogICAgICAgIHZhciBldmVudDsKICAgICAgICBzd2l0Y2ggKGV2ZW50TmFtZS50b0xvd2VyQ2FzZSgpKSB7CiAgICAgICAgICAgIGNhc2UgJ3N0YXJ0JzoKICAgICAgICAgICAgICAgIGV2ZW50ID0gc2l0ZS5vblN0YXJ0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2JvZHknOgogICAgICAgICAgICAgICAgZXZlbnQgPSBzaXRlLm9uQm9keTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgTG9nZ2VyXzIuZXJyb3IoYOaXoOaViOeahOS6i+S7tiAke2V2ZW50TmFtZX1gKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKCFzaXRlLl9zdHlsZUFwcGxpZWQpIHsKICAgICAgICAgICAgc2l0ZS5fc3R5bGVBcHBsaWVkID0gdHJ1ZTsKICAgICAgICAgICAgc2l0ZS5zdHlsZSA9IG5ldyBTdHlsZVNoZWV0XzEuU3R5bGVTaGVldCgpOwogICAgICAgICAgICBpZiAoc2l0ZS5oaWRlKSB7CiAgICAgICAgICAgICAgICBzaXRlLnN0eWxlLkhpZGUoc2l0ZS5oaWRlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc2l0ZS5zaG93KSB7CiAgICAgICAgICAgICAgICBzaXRlLnN0eWxlLlNob3coc2l0ZS5zaG93KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc2l0ZS5jc3MpIHsKICAgICAgICAgICAgICAgIHNpdGUuc3R5bGUuQWRkKHNpdGUuY3NzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc2l0ZS5kbF9pY29uKSB7CiAgICAgICAgICAgICAgICBzaXRlLnN0eWxlLkFkZChgCiAgICAgICAgICAgIApAZm9udC1mYWNlIHsKCWZvbnQtZmFtaWx5OiBjY2M7CglzcmM6IHVybChodHRwczovL2Nkbi5ib290Y3NzLmNvbS9mb250LWF3ZXNvbWUvNC4yLjAvZm9udHMvZm9udGF3ZXNvbWUtd2ViZm9udC53b2ZmKSBmb3JtYXQoJ3dvZmYnKTsKCWZvbnQtd2VpZ2h0OiBub3JtYWw7Cglmb250LXN0eWxlOiBub3JtYWw7Cn0KCiR7Q29uc3RhbnRzXzEuZG93bmxvYWRJY29uU2VsZWN0b3J9OjpiZWZvcmUgewoJZm9udC1mYW1pbHk6IGNjYzsKCWNvbnRlbnQ6ICJcXGYwMTkiOwoJcGFkZGluZy1yaWdodDogLjVlbTsKfQoKLmp4X2hpZGUgewoJZGlzcGxheTogbm9uZTsKfQoKICAgICAgICAgICAgYCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2l0ZS5zdHlsZS5BcHBseSh0cnVlKTsKICAgICAgICBpZiAoIWV2ZW50KQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgTG9nZ2VyXzIuaW5mbyhg5omn6KGM6KeE5YiZOiAke3NpdGUuaWR9IOS6jiAke3NpdGUubmFtZX0gW+S6i+S7tjogJHtldmVudE5hbWV9XWApOwogICAgICAgIGV2ZW50LmNhbGwodGhpcyk7CiAgICB9CiAgICBleHBvcnRzLlJ1biA9IFJ1bjsKfSk7CmRlZmluZSgic2l0ZS9BQS5Db25maWciLCBbInJlcXVpcmUiLCAiZXhwb3J0cyIsICJoZWxwZXIvQ29uc3RhbnRzIiwgImhlbHBlci9TY3JpcHRDb25maWciLCAiaGVscGVyL1NjcmlwdCIsICJoZWxwZXIvRG93bmxvYWRlciJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgQ29uc3RhbnRzXzIsIFNjcmlwdENvbmZpZ18yLCBTY3JpcHRfNCwgRG93bmxvYWRlcl8xKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgdmFyIHJ1bGUgPSB7CiAgICAgICAgYmQ6IG51bGwsCiAgICAgICAgaWQ6ICdpbnRlcm5hbC5jb25maWcnLAogICAgICAgIG5hbWU6ICfohJrmnKzphY3nva7pobXpnaInLAogICAgICAgIHN1Yk1vZHVsZTogZmFsc2UsCiAgICAgICAgaW5jbHVkZVN1Ykhvc3Q6IGZhbHNlLAogICAgICAgIGhvc3Q6IFsnbG9jYWxob3N0LmN1d2NsNGMnLCAnaml4dW5tb2UuZ2l0aHViLmlvJ10sCiAgICAgICAgcGF0aDogWycvY29uZmlnLycsICcvY3V3Y2w0Yy9jb25maWcnXSwKICAgICAgICBvblN0YXJ0OiAoKSA9PiB7CiAgICAgICAgICAgIHVuc2FmZVdpbmRvdy5yU2NyaXB0VmVyc2lvbiA9IENvbnN0YW50c18yLnZlcnNpb247CiAgICAgICAgICAgIHVuc2FmZVdpbmRvdy5yU2NyaXB0Q29uZmlnID0gSlNPTi5zdHJpbmdpZnkoU2NyaXB0Q29uZmlnXzIuQ29uZmlnKTsKICAgICAgICAgICAgdmFyIF9jID0gY29uZmlybTsKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignU2F2ZUNvbmZpZycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHZhciBjb25maWcgPSBKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKGUuZGV0YWlsKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfop6PmnpDorr7lrprlgLzlh7rplJkhJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKF9jKGDnoa7lrprlgqjlrZjorr7lrproh7MgJHtTY3JpcHRfNC5TY3JpcHQuTmFtZX0/YCkpCiAgICAgICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoU2NyaXB0XzQuU2NyaXB0Lk5hbWUsIGNvbmZpZyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgb25Cb2R5OiAoKSA9PiB7CiAgICAgICAgICAgIHJ1bGUuYmQgPSBuZXcgRG93bmxvYWRlcl8xLkRvd25sb2FkZXIoKTsKICAgICAgICAgICAgcnVsZS5iZC5DYXB0dXJlQXJpYSgpOwogICAgICAgIH0KICAgIH07CiAgICBleHBvcnRzLlJ1bGVzID0gW3J1bGVdOwp9KTsKZGVmaW5lKCJoZWxwZXIvV2FpdCIsIFsicmVxdWlyZSIsICJleHBvcnRzIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgLy8vIDxyZWZlcmVuY2UgcGF0aD0iLi4vdHlwaW5ncy9nbG9iYWxzL2pxdWVyeS9pbmRleC5kLnRzIiAvPgogICAgZnVuY3Rpb24gV2FpdFVudGlsKGNoZWNrLCBjYiwgblRpbWVvdXQgPSAxMDAwMCwgbkludGVydmFsID0gMTUwKSB7CiAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBjaGVjaykgewogICAgICAgICAgICBjaGVjayA9IGNoZWNrLnNwbGl0KCcuJyk7CiAgICAgICAgfQogICAgICAgIHZhciBpc1JlYWR5OwogICAgICAgIGlmICgkLmlzQXJyYXkoY2hlY2spKSB7CiAgICAgICAgICAgIGlzUmVhZHkgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgciA9IHVuc2FmZVdpbmRvdzsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hlY2subGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICByID0gcltjaGVja1tpXV07CiAgICAgICAgICAgICAgICAgICAgaWYgKCFyKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlzUmVhZHkgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGVjaygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgIGlmICghaXNSZWFkeSgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7CiAgICAgICAgICAgIGNiLmNhbGwodGhpcyk7CiAgICAgICAgfSwgbkludGVydmFsKTsKICAgICAgICBpZiAoblRpbWVvdXQgIT09IHRydWUpIHsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTsKICAgICAgICAgICAgfSwgblRpbWVvdXQpOwogICAgICAgIH0KICAgIH0KICAgIGV4cG9ydHMuV2FpdFVudGlsID0gV2FpdFVudGlsOwp9KTsKZGVmaW5lKCJoZWxwZXIvUmVkaXJlY3QiLCBbInJlcXVpcmUiLCAiZXhwb3J0cyIsICJoZWxwZXIvV2FpdCIsICJoZWxwZXIvRXh0ZW5zaW9uIiwgImhlbHBlci9Mb2dnZXIiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIFdhaXRfMSwgRXh0ZW5zaW9uXzQsIExvZ2dlcl8zKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgLy8vIDxyZWZlcmVuY2UgcGF0aD0iLi4vdHlwaW5ncy9nbG9iYWxzL2pxdWVyeS9pbmRleC5kLnRzIiAvPgogICAgLyoqCiAgICAgKiDot7PovazlkI7kv53nlZnlvZPliY3pobXpnaLkvZzkuLogcmVmZXJyZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIFJlZGlyZWN0VG8odXJsKSB7CiAgICAgICAgTG9nZ2VyXzMuaW5mbyhg5YeG5aSH6Lez6L2sICR7dXJsfS4uLmApOwogICAgICAgIHZhciBsaW5rID0gJCgnPGE+JykKICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCB1cmwpCiAgICAgICAgICAgIC50ZXh0KGDmraPlnKjot7PovawgWyR7dXJsfV0sIOivt+eojeWQji4uIGApCiAgICAgICAgICAgIC5wcmVwZW5kVG8oZG9jdW1lbnQuYm9keSkKICAgICAgICAgICAgLmNzcyh7IGZvbnRTaXplOiAxMiwgY29sb3I6ICdpbmhlcml0JyB9KTsKICAgICAgICBsaW5rWzBdLmNsaWNrKCk7CiAgICB9CiAgICBleHBvcnRzLlJlZGlyZWN0VG8gPSBSZWRpcmVjdFRvOwogICAgLyoqCiAgICAgKiBwaHBEaXNrIOmAmueUqOi3s+i9rOaWh+S7tuS4i+i9vemhtemdouWHveaVsAogICAgICoKICAgICAqIOi/lOWbniB0cnVlIOS7o+ihqOaIkOWKnwogICAgICog5ZCm5YiZ5Luj6KGo5om+5LiN5Yiw6KeE5YiZ44CCCiAgICAgKi8KICAgIGZ1bmN0aW9uIHBocGRpc2tBdXRvUmVkaXJlY3QoY2FsbGJhY2spIHsKICAgICAgICBpZiAoIWNhbGxiYWNrKSB7CiAgICAgICAgICAgIGNhbGxiYWNrID0gZG9jdW1lbnQuYm9keSA/IFJlZGlyZWN0VG8gOiAodXJsKSA9PiB7CiAgICAgICAgICAgICAgICBXYWl0XzEuV2FpdFVudGlsKCdkb2N1bWVudC5ib2R5JywgKCkgPT4gewogICAgICAgICAgICAgICAgICAgIFJlZGlyZWN0VG8odXJsKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICB2YXIgckNoZWNrUGF0aCA9IC9cLyhmaWxlKT8oZmlsZXx2aWV3KShbXC8uXC1fXS4qKS87CiAgICAgICAgaWYgKHJDaGVja1BhdGgudGVzdChsb2NhdGlvbi5wYXRobmFtZSkpIHsKICAgICAgICAgICAgY2FsbGJhY2sobG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZShyQ2hlY2tQYXRoLCAnLyQxZG93biQzJykpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChFeHRlbnNpb25fNC5CZWdpbldpdGgobG9jYXRpb24ucGF0aG5hbWUsICcvdmlld2ZpbGUnKSkgewogICAgICAgICAgICBjYWxsYmFjayhsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKCcvdmlld2ZpbGUnLCAnL2Rvd25sb2FkJykpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGV4cG9ydHMucGhwZGlza0F1dG9SZWRpcmVjdCA9IHBocGRpc2tBdXRvUmVkaXJlY3Q7Cn0pOwpkZWZpbmUoInNpdGUvZGwuMTIzNTY0IiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL0V4dGVuc2lvbiIsICJoZWxwZXIvUmVkaXJlY3QiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIEV4dGVuc2lvbl81LCBSZWRpcmVjdF8xKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgLy8vIDxyZWZlcmVuY2UgcGF0aD0iLi4vdHlwaW5ncy9nbG9iYWxzL2pxdWVyeS9pbmRleC5kLnRzIiAvPgogICAgdmFyIHJ1bGUgPSB7CiAgICAgICAgaWQ6ICdkbC4xMjM1NjQnLAogICAgICAgIG5hbWU6ICcxMjM1NjQg572R55uYJywKICAgICAgICBob3N0OiBbJzEyMzU2NC5jb20nLCAnbS4xMjM1NjQuY29tJ10sCiAgICAgICAgaW5jbHVkZVN1Ykhvc3Q6IGZhbHNlLAogICAgICAgIHN1Yk1vZHVsZTogZmFsc2UsCiAgICAgICAgaGlkZTogJyN5em0nLAogICAgICAgIHNob3c6ICcjZG93bmxvYWQnLAogICAgICAgIGNzczogYAouYWQxLCAuYWQ0ewogICAgaGVpZ2h0OiA5OTlweCAhaW1wb3J0YW50OwogICAgd2lkdGg6ICAwcHggICAhaW1wb3J0YW50Owp9CiAgICBgLAogICAgICAgIG9uU3RhcnQ6ICgpID0+IHsKICAgICAgICAgICAgdW5zYWZlV2luZG93LmtpbGxwYW5hZHMgPSAxOwogICAgICAgIH0sCiAgICAgICAgb25Cb2R5OiAoKSA9PiB7CiAgICAgICAgICAgIC8vIOaWh+S7tuesrOS4gOmhtQogICAgICAgICAgICB2YXIgdXJsID0gJCgnLmNhb2N1byAuanViYW8nKS5uZXh0KCkuZmluZCgnYScpLmF0dHIoJ2hyZWYnKTsKICAgICAgICAgICAgaWYgKHVybCkgewogICAgICAgICAgICAgICAgUmVkaXJlY3RfMS5SZWRpcmVjdFRvKHVybCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoRXh0ZW5zaW9uXzUuQ29udGFpbnMobG9jYXRpb24ucGF0aG5hbWUsICcvZG93bnBhbmVsLmFzcCcpKSB7CiAgICAgICAgICAgICAgICAvLyDnrKzkuInpobUgLSDmnIDnu4jkuIvovb3lnLDlnYDlsZXnpLoKICAgICAgICAgICAgICAgIHVybCA9ICQoImRpdiA+IGFbaHJlZio9Jy9kb3duLmFzcCddIikuYXR0cignaHJlZicpOwogICAgICAgICAgICAgICAgUmVkaXJlY3RfMS5SZWRpcmVjdFRvKHVybCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAvLyDnrKzkuozpobU6IOWhq+WGmemqjOivgeeggQogICAgICAgICAgICAgICAgJCgnI2Rvd25sb2FkID4gYScpLmNsaWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgZXhwb3J0cy5SdWxlcyA9IFtydWxlXTsKfSk7CmRlZmluZSgic2l0ZS9kbC41eGZpbGUiLCBbInJlcXVpcmUiLCAiZXhwb3J0cyJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykgewogICAgInVzZSBzdHJpY3QiOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICAgIHZhciBydWxlID0gewogICAgICAgIGlkOiAnZGwuNXhmaWxlJywKICAgICAgICBuYW1lOiAn5LqU5pif572R55uYJywKICAgICAgICBob3N0OiBbJzV4ZmlsZS5jb20nLCAnd3d3LjV4ZmlsZS5jb20nXSwKICAgICAgICBpbmNsdWRlU3ViSG9zdDogZmFsc2UsCiAgICAgICAgc3ViTW9kdWxlOiBmYWxzZSwKICAgICAgICBvblN0YXJ0OiAoKSA9PiB7CiAgICAgICAgICAgIC8vIFRPRE86IOWQr+WKqOS6i+S7tgogICAgICAgIH0sCiAgICAgICAgb25Cb2R5OiAoKSA9PiB7CiAgICAgICAgICAgIC8vIFRPRE86IOmhtemdouS6i+S7tgogICAgICAgIH0KICAgIH07CiAgICBleHBvcnRzLlJ1bGVzID0gW3J1bGVdOwp9KTsKZGVmaW5lKCJzaXRlL2RsLmJhaWR1IiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL1dhaXQiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIFdhaXRfMikgewogICAgInVzZSBzdHJpY3QiOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICAgIHZhciBydWxlID0gewogICAgICAgIGlkOiAnZGwuYmFpZHUnLAogICAgICAgIG5hbWU6ICfnmb7luqbnm5jlhY3kuIvovb3nrqHlrrYnLAogICAgICAgIGhvc3Q6IFsneXVuLmJhaWR1LmNvbScsICdwYW4uYmFpZHUuY29tJ10sCiAgICAgICAgaW5jbHVkZVN1Ykhvc3Q6IGZhbHNlLAogICAgICAgIHN1Yk1vZHVsZTogZmFsc2UsCiAgICAgICAgb25TdGFydDogKCkgPT4gewogICAgICAgIH0sCiAgICAgICAgb25Cb2R5OiAoKSA9PiB7CiAgICAgICAgICAgIFdhaXRfMi5XYWl0VW50aWwoJ3JlcXVpcmUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB1bnNhZmVFeGVjKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVxdWlyZSA9IHdpbmRvdy5yZXF1aXJlOwogICAgICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlID0gcmVxdWlyZSgnZGlzay1zeXN0ZW06d2lkZ2V0L3BsdWdpbi9kb3dubG9hZC91dGlsL2Rvd25sb2FkQ29tbW9uVXRpbC5qcycpOwogICAgICAgICAgICAgICAgICAgIHNlcnZpY2UuaXNQbGF0Zm9ybVdpbmRvd3MgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxzZTsgfTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9OwogICAgZXhwb3J0cy5SdWxlcyA9IFtydWxlXTsKfSk7CmRlZmluZSgic2l0ZS9kbC5ob3dmaWxlIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICAvLy8gPHJlZmVyZW5jZSBwYXRoPSIuLi90eXBpbmdzL2dsb2JhbHMvanF1ZXJ5L2luZGV4LmQudHMiIC8+CiAgICB2YXIgcnVsZSA9IHsKICAgICAgICBpZDogJ2RsLmhvd2ZpbGUnLAogICAgICAgIG5hbWU6ICflpb3nm5ggW2hvd2ZpbGUuY29tXScsCiAgICAgICAgaG9zdDogJ2hvd2ZpbGUuY29tJywKICAgICAgICBpbmNsdWRlU3ViSG9zdDogdHJ1ZSwKICAgICAgICBzdWJNb2R1bGU6IGZhbHNlLAogICAgICAgIGNzczogYAojZmxvYXRkaXYgewogICAgdG9wOiAxNTBweDsKICAgIHotaW5kZXg6IDk5OTk5OwogICAgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsKfQogICAgYCwKICAgICAgICBvblN0YXJ0OiAoKSA9PiB7CiAgICAgICAgfSwKICAgICAgICBvbkJvZHk6ICgpID0+IHsKICAgICAgICB9CiAgICB9OwogICAgZXhwb3J0cy5SdWxlcyA9IFtydWxlXTsKfSk7CmRlZmluZSgic2l0ZS9kbC5qa3BhbiIsIFsicmVxdWlyZSIsICJleHBvcnRzIiwgImhlbHBlci9FeHRlbnNpb24iLCAiaGVscGVyL1JlZGlyZWN0Il0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBFeHRlbnNpb25fNiwgUmVkaXJlY3RfMikgewogICAgInVzZSBzdHJpY3QiOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICAgIC8vLyA8cmVmZXJlbmNlIHBhdGg9Ii4uL3R5cGluZ3MvZ2xvYmFscy9qcXVlcnkvaW5kZXguZC50cyIgLz4KICAgIC8vIOmtlOaUuSBwaHBkaXNrCiAgICB2YXIgamtwYW5SdWxlID0gewogICAgICAgIGlkOiAnZGwucGhwZGlzay5qa3BhbicsCiAgICAgICAgbmFtZTogJ0pLUEFOIOinhOWImSBbcGhwRGlza10nLAogICAgICAgIGhvc3Q6IFsnamtwYW4uY2MnXSwKICAgICAgICBpbmNsdWRlU3ViSG9zdDogdHJ1ZSwKICAgICAgICBzdWJNb2R1bGU6IGZhbHNlLAogICAgICAgIG9uU3RhcnQ6ICgpID0+IHsKICAgICAgICAgICAgdmFyIGN0eCA9IHVuc2FmZVdpbmRvdzsKICAgICAgICAgICAgY3R4LmtpbGxhZHMgPSAxOwogICAgICAgICAgICB2YXIgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgICAgICAgICBzLmlkID0gJ2FkYmxvY2tUZXN0ZXInOwogICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHMpOwogICAgICAgIH0sCiAgICAgICAgb25Cb2R5OiAoKSA9PiB7CiAgICAgICAgICAgIHZhciBjdHggPSB1bnNhZmVXaW5kb3c7CiAgICAgICAgICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHMuaWQgPSAnYjEnOwogICAgICAgICAgICBzLnN0eWxlLmNzc1RleHQgPSAnaGVpZ2h0OjUwMHB4O3Bvc2l0aW9uOmZpeGVkO2xlZnQ6LTUwMHB4JzsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzKTsKICAgICAgICAgICAgaWYgKEV4dGVuc2lvbl82LkJlZ2luV2l0aChsb2NhdGlvbi5wYXRobmFtZSwgJy9kb3duMi0nKSkgewogICAgICAgICAgICAgICAgbGV0IGhhbmRsZXIgPSBjdHguaGFuZGxlclBvcHVwOwogICAgICAgICAgICAgICAgY3R4LmhhbmRsZXJQb3B1cCA9IHVuc2FmZURlZmluZUZ1bmN0aW9uKCdoYW5kbGVyUG9wdXAnLCBmdW5jdGlvbiAoY2FwdGNoYU9iaikgewogICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FwdGNoYU9iai5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgfSwgNzUwKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKEV4dGVuc2lvbl82LkJlZ2luV2l0aChsb2NhdGlvbi5wYXRobmFtZSwgJy9maWxlLScpKSB7CiAgICAgICAgICAgICAgICBSZWRpcmVjdF8yLlJlZGlyZWN0VG8obG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgnZmlsZScsICdkb3duMicpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICBleHBvcnRzLlJ1bGVzID0gW2prcGFuUnVsZV07Cn0pOwpkZWZpbmUoInNpdGUvZGwubmFtaXBhbi5jYyIsIFsicmVxdWlyZSIsICJleHBvcnRzIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgdmFyIHJ1bGUgPSB7CiAgICAgICAgaWQ6ICdkbC5uYW1pcGFuJywKICAgICAgICBuYW1lOiAn57qz57Gz55uYLmNjIFvljp8gODfnm5gg5bqU6K+lXScsCiAgICAgICAgaG9zdDogJ25hbWlwYW4uY2MnLAogICAgICAgIHBhdGg6IFsnL2ZpbGUvJywgJy9kb3duLnBocCddLAogICAgICAgIGluY2x1ZGVTdWJIb3N0OiB0cnVlLAogICAgICAgIHN1Yk1vZHVsZTogZmFsc2UsCiAgICAgICAgaGlkZTogJyNib3gnLAogICAgICAgIGNzczogYApib2R5LCBib2R5ID4gLmdnYW8gewogICAgaGVpZ2h0OiBpbml0aWFsOwp9CiAgICBgLAogICAgICAgIG9uU3RhcnQ6ICgpID0+IHsKICAgICAgICB9LAogICAgICAgIG9uQm9keTogKCkgPT4gewogICAgICAgICAgICAvLyDkuIvovb3mjInpkq46ICNkb3duZ28KICAgICAgICAgICAgdmFyIG0gPSBsb2NhdGlvbi5wYXRobmFtZS5tYXRjaCgvXGQrLyk7CiAgICAgICAgICAgIHZhciBkbEJ0biA9ICQoJyNkb3duZ28nKTsKICAgICAgICAgICAgaWYgKGRsQnRuLmxlbmd0aCA+IDAgJiYgbSkgewogICAgICAgICAgICAgICAgdmFyIGZyYW1lID0gJCgnPGlmcmFtZT4nKTsKICAgICAgICAgICAgICAgIHZhciBub3RlID0gJCgnPHA+Jyk7CiAgICAgICAgICAgICAgICBub3RlLnRleHQoJ+azqOaEjzog6ZyA6KaB55m75b2V5omN6IO95LiL6L2944CCJykuY3NzKCdjb2xvcicsICdyZWQnKTsKICAgICAgICAgICAgICAgIGZyYW1lLmF0dHIoewogICAgICAgICAgICAgICAgICAgIHNyYzogYC9kb3duLnBocD9maWxlX2lkPSR7bVswXX1gLAogICAgICAgICAgICAgICAgfSkuY3NzKHsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAndGFibGUnLAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMCwKICAgICAgICAgICAgICAgICAgICBib3JkZXJCb3R0b206ICcxcHggc29saWQgI2NjYycsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJywKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDcwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGRsQnRuLmJlZm9yZShmcmFtZSk7CiAgICAgICAgICAgICAgICBmcmFtZS5hZnRlcihub3RlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICBleHBvcnRzLlJ1bGVzID0gW3J1bGVdOwp9KTsKZGVmaW5lKCJzaXRlL2RsLnBocGRpc2siLCBbInJlcXVpcmUiLCAiZXhwb3J0cyIsICJoZWxwZXIvRXh0ZW5zaW9uIiwgImhlbHBlci9XYWl0IiwgImhlbHBlci9SZWRpcmVjdCIsICJoZWxwZXIvU2NyaXB0Il0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBFeHRlbnNpb25fNywgV2FpdF8zLCBSZWRpcmVjdF8zLCBTY3JpcHRfNSkgewogICAgInVzZSBzdHJpY3QiOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICAgIC8vLyA8cmVmZXJlbmNlIHBhdGg9Ii4uL3R5cGluZ3MvZ2xvYmFscy9qcXVlcnkvaW5kZXguZC50cyIgLz4KICAgIHZhciBwaHBkaXNrQSA9IHsKICAgICAgICBpZDogJ3BocGRpc2suYScsCiAgICAgICAgbmFtZTogJ1BIUERpc2sgQSDnsbvnvZHotZrnvZHnm5gnLAogICAgICAgIGhvc3Q6IFtdLAogICAgICAgIGhpZGU6ICcjY29kZV9ib3gsICNkb3duX2JveDIsICNjb2RlZnJtLCAuYWQsIFtjbGFzc149ImJhbm5lciJdJywKICAgICAgICBzaG93OiAnI2Rvd25fYm94JywKICAgICAgICBpbmNsdWRlU3ViSG9zdDogdHJ1ZSwKICAgICAgICBzdWJNb2R1bGU6IGZhbHNlLAogICAgICAgIG9uU3RhcnQ6ICgpID0+IHsKICAgICAgICAgICAgbGV0IGYgPSAoKSA9PiB7IH07CiAgICAgICAgICAgIHVuc2FmZURlZmluZUZ1bmN0aW9uKCdvcGVuJywgZik7CiAgICAgICAgfSwKICAgICAgICBvbkJvZHk6ICgpID0+IHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICBXYWl0XzMuV2FpdFVudGlsKCdkb3duX2ZpbGVfbGluaycsICgpID0+IHsKICAgICAgICAgICAgICAgIHZhciBjdHggPSB1bnNhZmVXaW5kb3c7CiAgICAgICAgICAgICAgICAvLyDpgb/lhY3lnLDlnYDooqvopobnm5YKICAgICAgICAgICAgICAgIGN0eC51cGRhdGVfc2VjID0gbnVsbDsKICAgICAgICAgICAgICAgIC8vIOW8uuWItuaYvuekuuWcsOWdgAogICAgICAgICAgICAgICAgY3R4LmRvd25fZmlsZV9saW5rKCk7CiAgICAgICAgICAgICAgICAvLyDlvLrliLbmmL7npLrkuIvovb3lnLDlnYAKICAgICAgICAgICAgICAgIGlmIChjdHguc2hvd19kb3duX3VybCkKICAgICAgICAgICAgICAgICAgICBjdHguc2hvd19kb3duX3VybCgnZG93bl9hMScpOwogICAgICAgICAgICAgICAgdmFyIGp1bXBVcmwgPSAkKCcjZG93bl9saW5rJykuZmluZCgnYScpLmF0dHIoJ2hyZWYnKTsKICAgICAgICAgICAgICAgIC8vIOeEtuWQjui3s+i/h+WOuwogICAgICAgICAgICAgICAgaWYgKGp1bXBVcmwpIHsKICAgICAgICAgICAgICAgICAgICBSZWRpcmVjdF8zLlJlZGlyZWN0VG8oanVtcFVybCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBhbGVydChgWyR7U2NyaXB0XzUuU2NyaXB0Lk5hbWV9XTog5bqU55SoICR7c2VsZi5uYW1lfSDlpLHotKU6XG7mib7kuI3liLDot7PovazlnLDlnYAuYCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH07CiAgICB2YXIgcGhwZGlza1ogPSB7CiAgICAgICAgaWQ6ICdwaHBkaXNrLnonLAogICAgICAgIG5hbWU6ICfpgJrnlKggcGhwRGlzay56IOe9keebmOinhOWImScsCiAgICAgICAgLy8g6KeE5YiZOiDnm7TmjqXot7PovawgL2ZpbGUteHh4IC0+IC9kb3duLXh4eAogICAgICAgIC8vICAgICAgIOW5tumakOiXjyBkb3duX2JveDIsIOaYvuekuiBkb3duX2JveAogICAgICAgIGhvc3Q6IFsKICAgICAgICAgICAgJzEwcGFuLmNjJywgJzY2eXAuY2MnLCAnMTIzd3p3cC5jb20nLCAnaGl5cC5jYycKICAgICAgICBdLAogICAgICAgIGhpZGU6IGAuRG93bnBhZ2Vib3gsIC50YWxrX3Nob3csIC5iYW5uZXJfMiwgLndfMzA1LCAuYWQsCgkJICAgI3Zjb2RlLCAjdHVpLCAuZGNvZGUsICNkb3duX2JveDIsICNkbF90aXBzLCAubmFsLAoJCSAgIC5zY2Jhcl9ob3RfdGQsICNpbmNvZGVgLAogICAgICAgIHNob3c6ICcjZG93bl9ib3gsICNkbF9hZGRyJywKICAgICAgICBpbmNsdWRlU3ViSG9zdDogdHJ1ZSwKICAgICAgICBzdWJNb2R1bGU6IGZhbHNlLAogICAgICAgIG9uU3RhcnQ6ICgpID0+IHsKICAgICAgICAgICAgbGV0IGYgPSAoKSA9PiB7IH07CiAgICAgICAgICAgIHVuc2FmZURlZmluZUZ1bmN0aW9uKCdhbGVydCcsIGYpOwogICAgICAgICAgICB1bnNhZmVEZWZpbmVGdW5jdGlvbignZG93bl9wcm9jZXNzJywgZik7CiAgICAgICAgICAgIFJlZGlyZWN0XzMucGhwZGlza0F1dG9SZWRpcmVjdChudWxsKTsKICAgICAgICB9LAogICAgICAgIG9uQm9keTogKCkgPT4gewogICAgICAgICAgICAvKiBmaXggZm9yIDEyM3d6d3AuY29tICovCiAgICAgICAgICAgIGxldCBmID0gKCkgPT4geyB9OwogICAgICAgICAgICB1bnNhZmVEZWZpbmVGdW5jdGlvbignZG93bl9wcm9jZXNzMicsIGYpOwogICAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLm9uKCdjbGljaycsICdhJywgZSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgJGRsID0gJChlLmN1cnJlbnRUYXJnZXQpOwogICAgICAgICAgICAgICAgbGV0IHVybCA9ICRkbC5kYXRhKCd1cmwnKTsKICAgICAgICAgICAgICAgIGlmICh1cmwubGVuZ3RoID4gJGRsLmF0dHIoJ2hyZWYnKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAkZGwuYXR0cignaHJlZicsIHVybCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH07CiAgICB2YXIgamtwYW5SdWxlID0gewogICAgICAgIGlkOiAnamtwYW4ucGhwZGlzaycsCiAgICAgICAgbmFtZTogJ0pLUEFOIOinhOWImSBbcGhwRGlza10nLAogICAgICAgIGhvc3Q6IFsnamtwYW4uY2MnXSwKICAgICAgICBpbmNsdWRlU3ViSG9zdDogdHJ1ZSwKICAgICAgICBzdWJNb2R1bGU6IGZhbHNlLAogICAgICAgIG9uU3RhcnQ6ICgpID0+IHsKICAgICAgICAgICAgdmFyIGN0eCA9IHVuc2FmZVdpbmRvdzsKICAgICAgICAgICAgY3R4LmtpbGxhZHMgPSAxOwogICAgICAgICAgICB2YXIgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgICAgICAgICBzLmlkID0gJ2FkYmxvY2tUZXN0ZXInOwogICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHMpOwogICAgICAgIH0sCiAgICAgICAgb25Cb2R5OiAoKSA9PiB7CiAgICAgICAgICAgIHZhciBjdHggPSB1bnNhZmVXaW5kb3c7CiAgICAgICAgICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHMuaWQgPSAnYjEnOwogICAgICAgICAgICBzLnN0eWxlLmNzc1RleHQgPSAnaGVpZ2h0OjUwMHB4O3Bvc2l0aW9uOmZpeGVkO2xlZnQ6LTUwMHB4JzsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzKTsKICAgICAgICAgICAgaWYgKEV4dGVuc2lvbl83LkJlZ2luV2l0aChsb2NhdGlvbi5wYXRobmFtZSwgJy9kb3duMi0nKSkgewogICAgICAgICAgICAgICAgbGV0IGhhbmRsZXIgPSBjdHguaGFuZGxlclBvcHVwOwogICAgICAgICAgICAgICAgY3R4LmhhbmRsZXJQb3B1cCA9IHVuc2FmZURlZmluZUZ1bmN0aW9uKCdoYW5kbGVyUG9wdXAnLCBmdW5jdGlvbiAoY2FwdGNoYU9iaikgewogICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FwdGNoYU9iai5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKEV4dGVuc2lvbl83LkJlZ2luV2l0aChsb2NhdGlvbi5wYXRobmFtZSwgJy9maWxlLScpKSB7CiAgICAgICAgICAgICAgICBSZWRpcmVjdF8zLlJlZGlyZWN0VG8obG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgnZmlsZScsICdkb3duMicpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICBleHBvcnRzLlJ1bGVzID0gW3BocGRpc2tBLCBwaHBkaXNrWiwgamtwYW5SdWxlXTsKfSk7CmRlZmluZSgic2l0ZS9kbC54dWl0ZSIsIFsicmVxdWlyZSIsICJleHBvcnRzIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgLy8vIDxyZWZlcmVuY2UgcGF0aD0iLi4vdHlwaW5ncy9nbG9iYWxzL2pxdWVyeS9pbmRleC5kLnRzIiAvPgogICAgdmFyIHJ1bGUgPSB7CiAgICAgICAgaWQ6ICdkbC5oYW1pLWNsb3VkJywKICAgICAgICBuYW1lOiAnSGFtaSsg5YCL5Lq66ZuyJywKICAgICAgICBob3N0OiBbJ3dlYmhkLnh1aXRlLm5ldCcsICdzeW5jLmhhbWljbG91ZC5uZXQnXSwKICAgICAgICBwYXRoOiAnL19vb3BzLycsCiAgICAgICAgaW5jbHVkZVN1Ykhvc3Q6IGZhbHNlLAogICAgICAgIHN1Yk1vZHVsZTogZmFsc2UsCiAgICAgICAgb25TdGFydDogKCkgPT4gewogICAgICAgIH0sCiAgICAgICAgb25Cb2R5OiAoKSA9PiB7CiAgICAgICAgICAgICQoJyNzaGFyZS1kb3dubG9hZC1mdW5jLXN1Ym1pdCcpLmNsaWNrKCk7CiAgICAgICAgICAgIHVuc2FmZUV4ZWMoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgJChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgJCgnI2dsb2JhbCcpLmRhdGEoJ3RpbWUnLCA5KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9OwogICAgZXhwb3J0cy5SdWxlcyA9IFtydWxlXTsKfSk7CmRlZmluZSgic2l0ZS9kbC55aW11aGUiLCBbInJlcXVpcmUiLCAiZXhwb3J0cyIsICJoZWxwZXIvRXh0ZW5zaW9uIiwgImhlbHBlci9SZWRpcmVjdCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgRXh0ZW5zaW9uXzgsIFJlZGlyZWN0XzQpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICAvLy8gPHJlZmVyZW5jZSBwYXRoPSIuLi90eXBpbmdzL2dsb2JhbHMvanF1ZXJ5L2luZGV4LmQudHMiIC8+CiAgICB2YXIgcnVsZSA9IHsKICAgICAgICBpZDogJ2RsLnlpbXVoZScsCiAgICAgICAgbmFtZTogJ+S4gOacqOemvicsCiAgICAgICAgaG9zdDogJ3d3dy55aW11aGUuY29tJywKICAgICAgICBoaWRlOiAnI2xvYWRpbmcsIC5nZ2FvLCAua3VhbicsCiAgICAgICAgc2hvdzogJyN5em0nLAogICAgICAgIGluY2x1ZGVTdWJIb3N0OiBmYWxzZSwKICAgICAgICBzdWJNb2R1bGU6IGZhbHNlLAogICAgICAgIHJ1bkluRnJhbWU6IHRydWUsCiAgICAgICAgb25TdGFydDogKCkgPT4gewogICAgICAgICAgICBSZWRpcmVjdF80LnBocGRpc2tBdXRvUmVkaXJlY3QobnVsbCk7CiAgICAgICAgfSwKICAgICAgICBvbkJvZHk6ICgpID0+IHsKICAgICAgICAgICAgaWYgKEV4dGVuc2lvbl84LkJlZ2luV2l0aChsb2NhdGlvbi5wYXRobmFtZSwgJy9uX2RkLnBocCcpKSB7CiAgICAgICAgICAgICAgICBSZWRpcmVjdF80LlJlZGlyZWN0VG8oJCgnI2Rvd25zJykuYXR0cignaHJlZicpKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgZGxDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG93bmxvYWQnKTsKICAgICAgICAgICAgaWYgKCFkbENvbnRhaW5lcikKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgLy8g5b2T5LiL6L295qGG55qEIHN0eWxlIOWxnuaAp+iiq+abtOaUueWQjiwg5qih5ouf5LiL6L295oyJ6ZKu5Y2V5Ye7LgogICAgICAgICAgICB2YXIgbW8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAkKCdhJywgZGxDb250YWluZXIpWzFdLmNsaWNrKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBtby5vYnNlcnZlKGRsQ29udGFpbmVyLCB7IGF0dHJpYnV0ZXM6IHRydWUgfSk7CiAgICAgICAgfQogICAgfTsKICAgIGV4cG9ydHMuUnVsZXMgPSBbcnVsZV07Cn0pOwpkZWZpbmUoInNpdGUvZm0uZG91YmFuIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL0xvZ2dlciIsICJoZWxwZXIvV2FpdCIsICJoZWxwZXIvRG93bmxvYWRlciJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgTG9nZ2VyXzQsIFdhaXRfNCwgRG93bmxvYWRlcl8yKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgdmFyIHJ1bGUgPSB7CiAgICAgICAgaWQ6ICdmbS5kb3ViYW4nLAogICAgICAgIHNzbDogdHJ1ZSwKICAgICAgICBuYW1lOiAn6LGG55Oj55S15Y+w5LiL6L296Kej5p6QJywKICAgICAgICBob3N0OiAnZG91YmFuLmZtJywKICAgICAgICBpbmNsdWRlU3ViSG9zdDogZmFsc2UsCiAgICAgICAgc3ViTW9kdWxlOiBmYWxzZSwKICAgICAgICBjc3M6IGAKYSNqeF9kb3ViYW5fZGwgewoJYmFja2dyb3VuZDogIzlERDZDNTsKCXBhZGRpbmc6IDNweCA1cHg7Cgljb2xvcjogI2ZmZgp9CgphI2p4X2RvdWJhbl9kbDpob3ZlciB7CgltYXJnaW4tbGVmdDogNXB4OwoJcGFkZGluZy1sZWZ0OiAxMHB4OwoJYmFja2dyb3VuZDogI0JBRTJENjsKfQoKZGl2I2p4X2RvdWJhbl9kbF93cmFwIHsKCWZsb2F0OiByaWdodDsKCW1hcmdpbi10b3A6IC0yMzBweDsKCW1hcmdpbi1yaWdodDogLTMycHg7Cglmb250LXdlaWdodDogYm9sZDsKCWZvbnQtZmFtaWx5OiAnTWljcm9zb2Z0IEpIZW5nSGVpIFVJJywgJ+W+rui9r+mbhem7kScsIHNlcmlmLXNhbnM7Cn0KICAgIGAsCiAgICAgICAgYmQ6IG51bGwsCiAgICAgICAgb25TdGFydDogKCkgPT4gewogICAgICAgICAgICBydWxlLmJkID0gbmV3IERvd25sb2FkZXJfMi5Eb3dubG9hZGVyKCk7CiAgICAgICAgICAgIHJ1bGUuYmQuQ2FwdHVyZUFyaWEoKTsKICAgICAgICB9LAogICAgICAgIG9uQm9keTogKCkgPT4gewogICAgICAgICAgICB2YXIgbGlua0Rvd25sb2FkID0gJCgnPGE+Jyk7CiAgICAgICAgICAgIGxpbmtEb3dubG9hZC5jc3MoJ3RyYW5zaXRpb24nLCAnYWxsIC4ycycpCiAgICAgICAgICAgICAgICAuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpCiAgICAgICAgICAgICAgICAuYXR0cignaWQnLCAnanhfZG91YmFuX2RsJykKICAgICAgICAgICAgICAgIC50ZXh0KCfkuIvovb0nKTsKICAgICAgICAgICAgJCgnPGRpdj4nKQogICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2p4X2RvdWJhbl9kbF93cmFwJykKICAgICAgICAgICAgICAgIC5hcHBlbmQobGlua0Rvd25sb2FkKQogICAgICAgICAgICAgICAgLmluc2VydEFmdGVyKCcucGxheWVyLXdyYXAnKTsKICAgICAgICAgICAgTG9nZ2VyXzQuaW5mbygn562J5b6F6LGG55Oj55S15Y+w5Yqg6L29IC4uJyk7CiAgICAgICAgICAgIFdhaXRfNC5XYWl0VW50aWwoJ2V4dFN0YXR1c0hhbmRsZXInLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBMb2dnZXJfNC5pbmZvKCfnu5HlrprosYbnk6PnlLXlj7Dlh73mlbAgLi4nKTsKICAgICAgICAgICAgICAgIHVuc2FmZU92ZXJ3cml0ZUZ1bmN0aW9uU2FmZVByb3h5KHsKICAgICAgICAgICAgICAgICAgICBleHRTdGF0dXNIYW5kbGVyOiBmdW5jdGlvbiAoanNvblNvbmdPYmopIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50ID0gSlNPTi5wYXJzZShqc29uU29uZ09iaik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnc3RhcnQnID09IGV2ZW50LnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb25nID0gZXZlbnQuc29uZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlID0gc29uZy50aXRsZSArIHNvbmcudXJsLnNsaWNlKC00KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtEb3dubG9hZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgcnVsZS5iZC5HZW5lcmF0ZVVyaShzb25nLnVybCwgZmlsZSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RpdGxlJywgYOS4i+i9vTogJHtzb25nLnRpdGxlfWApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZ2VyXzQuaW5mbyhgJHtzb25nLnRpdGxlfSA9PiAke3NvbmcudXJsfWApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvclVuc2FmZVN1Y2Nlc3MoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIExvZ2dlcl80LmluZm8oJ+WHveaVsOe7keWumuWujOavlSwgRW5qb3l+Jyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH07CiAgICBleHBvcnRzLlJ1bGVzID0gW3J1bGVdOwp9KTsKZGVmaW5lKCJzaXRlL2ZtLm1vZSIsIFsicmVxdWlyZSIsICJleHBvcnRzIiwgImhlbHBlci9Eb3dubG9hZGVyIiwgImhlbHBlci9TY3JpcHQiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIERvd25sb2FkZXJfMywgU2NyaXB0XzYpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICB2YXIgcnVsZSA9IHsKICAgICAgICBpZDogJ2ZtLm1vZScsCiAgICAgICAgc3NsOiBmYWxzZSwKICAgICAgICBuYW1lOiAn6JCM5ZCm55S15Y+wJywKICAgICAgICBob3N0OiAnbW9lLmZtJywKICAgICAgICBpbmNsdWRlU3ViSG9zdDogZmFsc2UsCiAgICAgICAgc3ViTW9kdWxlOiBmYWxzZSwKICAgICAgICBjc3M6IGAKCmEuaml4dW4tZGwgewogICAgd2lkdGg6IDI2cHggIWltcG9ydGFudDsKICAgIGJhY2tncm91bmQtcG9zaXRpb246IC0xOXB4IC05NnB4ICFpbXBvcnRhbnQ7CiAgICB0cmFuc2Zvcm06IHJvdGF0ZSg5MGRlZyk7Cn0KCiAgICBgLAogICAgICAgIGJkOiBudWxsLAogICAgICAgIG9uU3RhcnQ6ICgpID0+IHsKICAgICAgICAgICAgcnVsZS5iZCA9IG5ldyBEb3dubG9hZGVyXzMuRG93bmxvYWRlcigpOwogICAgICAgICAgICBydWxlLmJkLkNhcHR1cmVBcmlhKCk7CiAgICAgICAgfSwKICAgICAgICBvbkJvZHk6ICgpID0+IHsKICAgICAgICAgICAgdW5zYWZlV2luZG93LmlzX2xvZ2luID0gdHJ1ZTsKICAgICAgICAgICAgdmFyIGRsTGluayA9ICQoJzxhPicpOwogICAgICAgICAgICBkbExpbmsKICAgICAgICAgICAgICAgIC5hZGRDbGFzcygncGxheWVyLWJ1dHRvbiBsZWZ0IGppeHVuLWRsJykKICAgICAgICAgICAgICAgIC5pbnNlcnRBZnRlcignZGl2LnBsYXllci1idXR0b24uYnV0dG9uLXZvbHVtZScpOwogICAgICAgICAgICBTY3JpcHRfNi5TY3JpcHQuTGlzdGVuRXZlbnQoKGNsaXApID0+IHsKICAgICAgICAgICAgICAgIGRsTGluawogICAgICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgcnVsZS5iZC5HZW5lcmF0ZVVyaShjbGlwLnVybCwgYCR7Y2xpcC5zdWJfdGl0bGV9Lm1wM2ApKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0aXRsZScsIGDkuIvovb06ICR7Y2xpcC5zdWJfdGl0bGV9YCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB1bnNhZmVFeGVjKChzY3JpcHROYW1lKSA9PiB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBub3RpZnlVcGRhdGUoY2xpcCkgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KHNjcmlwdE5hbWUsIHsgZGV0YWlsOiBKU09OLnN0cmluZ2lmeShjbGlwKSB9KSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkZWZpbmUoJ3BsdWdpbi9qaXh1bicsIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKCdbQ1VXQ0w0Q10g5byA5aeL5rOo5YWlIC4uLicpOwogICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ZW4gPSByZXF1aXJlKCcvcHVibGljL2pzL2ZtL3BhZ2UvbGlzdGVuLmpzJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXllciA9IHJlcXVpcmUoJ3BsYXllci9wbGF5ZXInKTsKICAgICAgICAgICAgICAgICAgICB2YXIgX2luaXRQbGF5ZXIgPSBwbGF5ZXIuaW5pdFBsYXllcjsKICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuaW5pdFBsYXllciA9IGZ1bmN0aW9uIChjbGlwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmeVVwZGF0ZShjbGlwKTsKICAgICAgICAgICAgICAgICAgICAgICAgX2luaXRQbGF5ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnW0NVV0NMNENdIOazqOWFpee7k+adnyAuLi4nKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgLy8g6KaB5rGC6L295YWl5aSW5oyC5qih57uECiAgICAgICAgICAgICAgICBzZWFqcy51c2UoJ3BsdWdpbi9qaXh1bicpOwogICAgICAgICAgICB9LCBTY3JpcHRfNi5TY3JpcHQuTmFtZSk7CiAgICAgICAgfQogICAgfTsKICAgIGV4cG9ydHMuUnVsZXMgPSBbcnVsZV07Cn0pOwpkZWZpbmUoInNpdGUvbXVzaWMuMTYzIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL0xvZ2dlciIsICJoZWxwZXIvQ29uc3RhbnRzIiwgImhlbHBlci9XYWl0IiwgImhlbHBlci9Eb3dubG9hZGVyIiwgImhlbHBlci9TY3JpcHQiLCAiaGVscGVyL1NjcmlwdENvbmZpZyIsICJoZWxwZXIvUXVlcnlTdHJpbmciLCAiaGVscGVyL0V4dGVuc2lvbiJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgTG9nZ2VyXzUsIENvbnN0YW50c18zLCBXYWl0XzUsIERvd25sb2FkZXJfNCwgU2NyaXB0XzcsIFNjcmlwdENvbmZpZ18zLCBxcywgRXh0ZW5zaW9uXzkpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICBjb25zdCBfX01QM19CTEFOSyA9ICdodHRwczovL2ppeHVubW9lLmdpdGh1Yi5pby9jdXdjbDRjL2JsYW5rLm1wMyc7CiAgICB2YXIgcnVsZSA9IHsKICAgICAgICBpZDogJ211c2ljLjE2MycsCiAgICAgICAgc3NsOiB0cnVlLAogICAgICAgIG5hbWU6ICfpu4TmmJPkupHpn7PkuZAnLAogICAgICAgIGhvc3Q6ICdtdXNpYy4xNjMuY29tJywKICAgICAgICBpbmNsdWRlU3ViSG9zdDogZmFsc2UsCiAgICAgICAgc3ViTW9kdWxlOiBmYWxzZSwKICAgICAgICBydW5JbkZyYW1lOiB0cnVlLAogICAgICAgIGRsX2ljb246IHRydWUsCiAgICAgICAgY3NzOiBgCgoubS1wYmFyLCAubS1wYmFyIC5iYXJiZyB7CiAgICB3aWR0aDogY2FsYyggNDU1cHggLSAyLjVlbSApOwp9CgoubS1wbGF5YmFyIC5wbGF5IHsKICAgIHdpZHRoOiBjYWxjKCA1NzBweCAtIDIuNWVtICk7Cn0KCi5tLXBsYXliYXIgLm9wZXIgewogICAgd2lkdGg6IGluaXRpYWw7Cn0KCi5qeF9kbDpob3ZlciB7CiAgICBjb2xvcjogd2hpdGU7Cn0KCi8qIOW6lemDqOWNleabsuS4i+i9vSAqLwoubS1wbGF5YmFyIC5vcGVyIC5qeF9idG4gewogICAgdGV4dC1pbmRlbnQ6IDA7CiAgICBmb250LXNpemU6IDEuNWVtOwogICAgbWFyZ2luOiAxM3B4IDJweCAwIDA7CiAgICBmbG9hdDogbGVmdDsKICAgIGNvbG9yOiAjY2NjOwogICAgdGV4dC1zaGFkb3c6IDFweCAxcHggMnB4IGJsYWNrLCAwIDAgMWVtIGJsYWNrLCAwIDAgMC4yZW0gI2FhYTsKICAgIGxpbmUtaGVpZ2h0OiAxLjZlbTsKICAgIGZvbnQtc2l6ZTogMS4yZW07Cn0KCi5tLXBsYXliYXIgLm9wZXIgLmp4X2RsOjpiZWZvcmUgewogICAgcGFkZGluZy1yaWdodDogLjI1ZW07Cn0KCi5qeF9idG46aG92ZXIgewogICAgY29sb3I6IHdoaXRlOwp9CgovKiDmkq3mlL7liJfooajkuIvovb0gKi8KLm0tcGxheWJhciAubGlzdGhkYyAuanhfZGwuYWRkYWxsIHsKICAgIGxlZnQ6IDMwNnB4OwogICAgbGluZS1oZWlnaHQ6IDFlbTsKICAgIC8qIOWkmuS4gOS4qiBweCwg5a+56b2Q5paH5a2XICovCiAgICB0b3A6IDEzcHg7Cn0KCi5tLXBsYXliYXIgLmxpc3RoZGMgLmxpbmUuanhfZGxfbGluZSB7CiAgICBsZWZ0OiAzODVweDsKfQoKICAgIGAsCiAgICAgICAgaW5zdGFuY2U6IG51bGwsCiAgICAgICAgb25TdGFydDogKCkgPT4gewogICAgICAgICAgICBydWxlLmluc3RhbmNlID0gbmV3IFllbGxvd0Vhc2UoKTsKICAgICAgICB9LAogICAgICAgIG9uQm9keTogKCkgPT4gewogICAgICAgICAgICBydWxlLmluc3RhbmNlLkJvZHlFdmVudCgpOwogICAgICAgIH0KICAgIH07CiAgICBleHBvcnRzLlJ1bGVzID0gW3J1bGVdOwogICAgY2xhc3MgWWVsbG93RWFzZSB7CiAgICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICAgIHRoaXMuX3JlbG9hZENhY2hlID0gdHJ1ZTsKICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5fX0hJREVfQkFOTkVSKSB7CiAgICAgICAgICAgICAgICBydWxlLnN0eWxlLkhpZGUoJyNpbmRleC1iYW5uZXInKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoU2NyaXB0Q29uZmlnXzMuQ29uZmlnLmJZZWxsb3dFYXNlSW50ZXJuYXRpb25hbCkKICAgICAgICAgICAgICAgIEdlbmVyYXRlQ2RuTGlzdCh0aGlzKTsKICAgICAgICAgICAgdGhpcy5fZG93bmxvYWRlciA9IG5ldyBEb3dubG9hZGVyXzQuRG93bmxvYWRlcigpOwogICAgICAgICAgICB1bnNhZmVFeGVjKCgpID0+IHsKICAgICAgICAgICAgICAgIHZhciBmYWtlUGxhdEZvcm0gPSBuYXZpZ2F0b3IucGxhdGZvcm0gKyAiLS1GYWtlLW1hYyI7CiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLCAicGxhdGZvcm0iLCB7CiAgICAgICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiB7IHJldHVybiBmYWtlUGxhdEZvcm07IH0sCiAgICAgICAgICAgICAgICAgICAgc2V0OiAoKSA9PiB7IH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgQm9keUV2ZW50KCkgewogICAgICAgICAgICBXYWl0XzUuV2FpdFVudGlsKCdubS54JywgKCkgPT4gewogICAgICAgICAgICAgICAgLy8g5Lik5Liq54mI5p2D5o+Q56S6LCDkuIDkuKrmnYPpmZDmj5DnpLouCiAgICAgICAgICAgICAgICB2YXIgZm5CeXBhc3NDcjEgPSB0aGlzLlNlYXJjaCh1bnNhZmVXaW5kb3cubmVqLmUsICduZWouZScsICcuZGF0YXNldDtpZicpOwogICAgICAgICAgICAgICAgdmFyIGZuQnlwYXNzQ3IyID0gdGhpcy5TZWFyY2godW5zYWZlV2luZG93Lm5tLngsICdubS54JywgJy5jb3B5cmlnaHRJZD09Jyk7CiAgICAgICAgICAgICAgICB2YXIgZm5CeXBhc3NDcjMgPSB0aGlzLlNlYXJjaCh1bnNhZmVXaW5kb3cubm0ueCwgJ25tLngnLCAnLnByaXZpbGVnZTtpZicpOwogICAgICAgICAgICAgICAgdW5zYWZlRXhlYygoZm5CeXBhc3NDcjEsIGZuQnlwYXNzQ3IyLCBmbkJ5cGFzc0NyMykgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciBfZm5CeXBhc3NDcjEgPSB3aW5kb3cubmVqLmVbZm5CeXBhc3NDcjFdOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5uZWouZVtmbkJ5cGFzc0NyMV0gPSBmdW5jdGlvbiAoeiwgbmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSA9PSAnY29weXJpZ2h0JyB8fCBuYW1lID09ICdyZXNDb3B5cmlnaHQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2ZuQnlwYXNzQ3IxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cubm0ueFtmbkJ5cGFzc0NyMl0gPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5ubS54W2ZuQnlwYXNzQ3IzXSA9IChzb25nKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNvbmcuc3RhdHVzID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvbmcucHJpdmlsZWdlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb25nLnByaXZpbGVnZS5wbCA9IDMyMDAwMDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSwgZm5CeXBhc3NDcjEsIGZuQnlwYXNzQ3IyLCBmbkJ5cGFzc0NyMyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoQ29uc3RhbnRzXzMuaXNGcmFtZSkgewogICAgICAgICAgICAgICAgdGhpcy5GcmFtZVBhZ2UoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuUGxheWVyUGFnZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIFNlYXJjaChiYXNlLCBkaXNwbGF5QmFzZSwga2V5d29yZCwgc3VwcHJlc3NMb2cgPSBmYWxzZSkgewogICAgICAgICAgICBmb3IgKGxldCBpdGVtTmFtZSBpbiBiYXNlKSB7CiAgICAgICAgICAgICAgICBpZiAoYmFzZS5oYXNPd25Qcm9wZXJ0eShpdGVtTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgZm4gPSBiYXNlW2l0ZW1OYW1lXTsKICAgICAgICAgICAgICAgICAgICBpZiAoZm4gJiYgdHlwZW9mIGZuID09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZuU3RyID0gU3RyaW5nKGZuKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFRlc3RTdHJpbmcoZm5TdHIsIGtleXdvcmQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN1cHByZXNzTG9nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZ2dlcl81LmluZm8oYOWumuS9jeafpeaJviAlYyR7a2V5d29yZH0lYyDmiJDlip86ICVjJHtkaXNwbGF5QmFzZX0uJHtpdGVtTmFtZX1gLCAnY29sb3I6IGRhcmt2aW9sZXQnLCAncmVzZXQnLCAnY29sb3I6IGdyZWVuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbU5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFzdXBwcmVzc0xvZykKICAgICAgICAgICAgICAgIExvZ2dlcl81LmVycm9yKGDlrprkvY3mn6Xmib7lrZDlh73mlbAgJHtrZXl3b3JkfSDkuo4gJHtkaXNwbGF5QmFzZX0g5aSx6LSlLCDor7fogZTns7vkvZzogIXkv67lpI0hYCk7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICBTZWFyY2hTdWJQcm90b3R5cGUoYmFzZSwgZGlzcGxheUJhc2UsIGtleXdvcmQsIHN1cHByZXNzTG9nID0gZmFsc2UpIHsKICAgICAgICAgICAgZm9yIChsZXQgaXRlbU5hbWUgaW4gYmFzZSkgewogICAgICAgICAgICAgICAgaWYgKGJhc2UuaGFzT3duUHJvcGVydHkoaXRlbU5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0Jhc2UgPSBiYXNlW2l0ZW1OYW1lXTsKICAgICAgICAgICAgICAgICAgICAvLyDmo4Dmn6XnjrDlnKjnmoTov5nkuKrmmK/kuI3mmK/lrZDnsbsKICAgICAgICAgICAgICAgICAgICBpZiAobmV3QmFzZSAmJiBuZXdCYXNlLnByb3RvdHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmZvKGDmn6Xmib4gJWMke2Rpc3BsYXlCYXNlfS4ke2l0ZW1OYW1lfS5wcm90b3R5cGUlYyAuLi5gLCAnY29sb3I6bGlnaHRncmF5JywgJ3Jlc2V0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByID0gdGhpcy5TZWFyY2gobmV3QmFzZS5wcm90b3R5cGUsIGRpc3BsYXlCYXNlLCBrZXl3b3JkLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdXBwcmVzc0xvZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dnZXJfNS5pbmZvKGDlrprkvY3mn6Xmib4gJWMke2tleXdvcmR9JWMg5oiQ5YqfOiAlYyR7ZGlzcGxheUJhc2V9LiR7aXRlbU5hbWV9Ojoke3J9YCwgJ2NvbG9yOiBkYXJrdmlvbGV0JywgJ3Jlc2V0JywgJ2NvbG9yOiBncmVlbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtpdGVtTmFtZSwgJ3Byb3RvdHlwZScsIHJdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghc3VwcHJlc3NMb2cpCiAgICAgICAgICAgICAgICBMb2dnZXJfNS5lcnJvcihg5a6a5L2N5p+l5om+5a2Q57G75Ye95pWwICR7a2V5d29yZH0g5LqOICR7ZGlzcGxheUJhc2V9IOWksei0pSwg6K+36IGU57O75L2c6ICF5L+u5aSNIWApOwogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgUGxheWVyUGFnZSgpIHsKICAgICAgICAgICAgdGhpcy5fYnRuRG93bmxvYWQgPSAkKCc8YT4nKTsKICAgICAgICAgICAgdGhpcy5fYnRuRG93bmxvYWQKICAgICAgICAgICAgICAgIC5hdHRyKCd0aXRsZScsICfmkq3mlL7pn7PkuZDvvIzljbPliLvop6PmnpDjgIInKQogICAgICAgICAgICAgICAgLmNsaWNrKChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKQogICAgICAgICAgICAgICAgLmFkZENsYXNzKENvbnN0YW50c18zLmRvd25sb2FkSWNvbkNsYXNzKQogICAgICAgICAgICAgICAgLmFkZENsYXNzKCdqeF9idG4nKQogICAgICAgICAgICAgICAgLmFwcGVuZFRvKCcubS1wbGF5YmFyIC5vcGVyJyk7CiAgICAgICAgICAgIC8vIFRPRE86IOWKoOWFpeatjOWNleS4i+i9veaMiemSrgogICAgICAgICAgICB0aGlzLl9idG5Eb3dubG9hZEFsbCA9ICQoJzxhPicpOwogICAgICAgICAgICB0aGlzLl9idG5Eb3dubG9hZEFsbAogICAgICAgICAgICAgICAgLmFkZENsYXNzKCdhZGRhbGwnKQogICAgICAgICAgICAgICAgLnRleHQoJ+WFqOmDqOS4i+i9vScpCiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoQ29uc3RhbnRzXzMuZG93bmxvYWRJY29uQ2xhc3MpCiAgICAgICAgICAgICAgICAuY2xpY2soKCkgPT4gdGhpcy5Eb3dubG9hZEFsbCgpKTsKICAgICAgICAgICAgaWYgKFNjcmlwdENvbmZpZ18zLkNvbmZpZy5kVXJpVHlwZSA9PSBTY3JpcHRDb25maWdfMy5VcmlUeXBlLkFyaWEpIHsKICAgICAgICAgICAgICAgIHRoaXMuX2Rvd25sb2FkZXIuQ2FwdHVyZUFyaWEodGhpcy5fYnRuRG93bmxvYWQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgLy8gVE9ETzog6ZqQ6JeP5q2M5Y2V5LiL6L295oyJ6ZKuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lID09ICcvZGVtby9mbScpIHsKICAgICAgICAgICAgICAgIHRoaXMuSG9va1JhZGlvUGxheWVyKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLkhvb2tOb3JtYWxQbGF5ZXIoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBEb3dubG9hZEFsbCgpIHsKICAgICAgICAgICAgLy8gVE9ETzog5LiL6L295omA5pyJ5puy55uuCiAgICAgICAgfQogICAgICAgIEhvb2tOb3JtYWxQbGF5ZXIoKSB7CiAgICAgICAgICAgIFdhaXRfNS5XYWl0VW50aWwoKCkgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saXN0aGRjID4gLmFkZGFsbCcpICE9IG51bGw7CiAgICAgICAgICAgIH0sICgpID0+IHsKICAgICAgICAgICAgICAgIHZhciBkbExpbmUgPSAkKCc8YT4nKTsKICAgICAgICAgICAgICAgIGRsTGluZQogICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnbGluZSBqeF9kbF9saW5lJykKICAgICAgICAgICAgICAgICAgICAuaGlkZSgpOwogICAgICAgICAgICAgICAgdGhpcy5fYnRuRG93bmxvYWRBbGwKICAgICAgICAgICAgICAgICAgICAuaW5zZXJ0QmVmb3JlKCcubS1wbGF5YmFyIC5saXN0aGRjIC5hZGRhbGwnKQogICAgICAgICAgICAgICAgICAgIC5hZnRlcihkbExpbmUpCiAgICAgICAgICAgICAgICAgICAgLmhpZGUoKTsKICAgICAgICAgICAgfSwgdHJ1ZSwgNTAwKTsKICAgICAgICAgICAgZnVuY3Rpb24gbmV4dFNvbmcoKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubnh0JykuY2xpY2soKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBXYWl0XzUuV2FpdFVudGlsKCduZWouaicsICgpID0+IHsKICAgICAgICAgICAgICAgIHZhciBmbkFqYXggPSB0aGlzLlNlYXJjaCh1bnNhZmVXaW5kb3cubmVqLmosICJuZWouaiIsICcucmVwbGFjZSgiYXBpIiwid2VhcGknKTsKICAgICAgICAgICAgICAgIHZhciBmbkdldFNvbmdSYXcgPSB0aGlzLlNlYXJjaFN1YlByb3RvdHlwZSh1bnNhZmVXaW5kb3cubm0udywgJ25tLncnLCAvcmV0dXJuIHRoaXNcLlx3K1xbdGhpc1wuXHcrXF0vKTsKICAgICAgICAgICAgICAgIHZhciBjbHNQbGF5ZXIgPSBmbkdldFNvbmdSYXdbMF07CiAgICAgICAgICAgICAgICB2YXIgZm5HZXRTb25nID0gZm5HZXRTb25nUmF3WzJdOwogICAgICAgICAgICAgICAgaWYgKFNjcmlwdENvbmZpZ18zLkNvbmZpZy5iWWVsbG93RWFzZUludGVybmF0aW9uYWwpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9idG5DaGFuZ2VDZG4gPSAkKCc8YT4nKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9idG5DaGFuZ2VDZG4KICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdqeF9idG4ganhfY2RuJykKICAgICAgICAgICAgICAgICAgICAgICAgLmNsaWNrKCgpID0+IHRoaXMuTmV4dENkbigpKQogICAgICAgICAgICAgICAgICAgICAgICAuaW5zZXJ0QWZ0ZXIodGhpcy5fYnRuRG93bmxvYWQpCiAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0KCfmjaInKTsKICAgICAgICAgICAgICAgICAgICB2YXIgY2RuID0gR01fZ2V0VmFsdWUoJ193c19jZG5fbWVkaWEnLCBudWxsKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIWNkbikgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLk5leHRDZG4oKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NkbiA9IGNkbjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLy8vLy8g5a6J6KOF5L+u5pS55ZCO55qEIOWPluW+l+absuebruS/oeaBryDlh73mlbDlvIDlp4sKICAgICAgICAgICAgICAgIHZhciBjYWxsRXZlbnRGbiA9IEdlbmVyYXRlVmFsaWROYW1lKCk7CiAgICAgICAgICAgICAgICBleHBvcnRGdW5jdGlvbigoc29uZykgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShzb25nKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9zb25nID0gewogICAgICAgICAgICAgICAgICAgICAgICBhcnRpc3RzOiBkYXRhLmFydGlzdHMubWFwKChhcnRpc3QpID0+IGFydGlzdC5uYW1lKS5qb2luKCfjgIEnKSwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZGF0YS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IG51bGwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIExvZ2dlcl81LmluZm8oYOaNleaNieWIsOmfs+S5kOWIh+aNojogJHt0aGlzLl9zb25nLm5hbWV9YCk7CiAgICAgICAgICAgICAgICB9LCB1bnNhZmVXaW5kb3csIHsKICAgICAgICAgICAgICAgICAgICBkZWZpbmVBczogY2FsbEV2ZW50Rm4KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdW5zYWZlRXhlYygoY2FsbEV2ZW50Rm4sIGNsc1BsYXllciwgZm5HZXRTb25nKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9nZXRTb25nQmFja3VwID0gd2luZG93Lm5tLndbY2xzUGxheWVyXS5wcm90b3R5cGVbZm5HZXRTb25nXTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cubm0ud1tjbHNQbGF5ZXJdLnByb3RvdHlwZVtmbkdldFNvbmddID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IF9nZXRTb25nQmFja3VwLmNhbGwodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvd1tjYWxsRXZlbnRGbl0oSlNPTi5zdHJpbmdpZnkocikpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LCBjYWxsRXZlbnRGbiwgY2xzUGxheWVyLCBmbkdldFNvbmcpOwogICAgICAgICAgICAgICAgLy8vLy8vIOWuieijheS/ruaUueWQjueahCDlj5blvpfmm7Lnm67kv6Hmga8g5Ye95pWw57uT5p2fCiAgICAgICAgICAgICAgICAvLy8vLy8g5a6J6KOF5L+u5pS55ZCO55qEIEFqYXgg5Ye95pWw5byA5aeLCiAgICAgICAgICAgICAgICB2YXIgYWpheFBhdGNoRm4gPSBHZW5lcmF0ZVZhbGlkTmFtZSgpOwogICAgICAgICAgICAgICAgdGhpcy5fYWpheEJhY2t1cCA9IHVuc2FmZVdpbmRvdy5uZWoualtmbkFqYXhdOwogICAgICAgICAgICAgICAgaWYgKFNjcmlwdENvbmZpZ18zLkNvbmZpZy5iWWVsbG93RWFzZVVzZU9sZEFwaSB8fCBTY3JpcHRDb25maWdfMy5Db25maWcuYlllbGxvd0Vhc2VJbnRlcm5hdGlvbmFsKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGhvb2tlZEFqYXggPSAoU2NyaXB0Q29uZmlnXzMuQ29uZmlnLmJZZWxsb3dFYXNlVXNlT2xkQXBpID8gdGhpcy5BamF4UGF0Y2hlZE9sZEFwaSA6IHRoaXMuQWpheFBhdGNoZWRJbnRlcm5hdGlvbmFsKTsKICAgICAgICAgICAgICAgICAgICBleHBvcnRGdW5jdGlvbihob29rZWRBamF4LmJpbmQodGhpcyksIHVuc2FmZVdpbmRvdywgewogICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVBczogYWpheFBhdGNoRm4KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB1bnNhZmVFeGVjKChhamF4UGF0Y2hGbiwgZm5BamF4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhamF4UGF0Y2hlZCA9IHdpbmRvd1thamF4UGF0Y2hGbl07CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhamF4T3JpZ2luYWwgPSB3aW5kb3cubmVqLmpbZm5BamF4XTsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm5lai5qW2ZuQWpheF0gPSBDdXN0b21BamF4OwogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBDdXN0b21BamF4KHVybCwgcGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmluZm8oYHVybDogJHt1cmx9YCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJ2xvZy8nKSAhPSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMub25sb2FkKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IDIwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGFyYW1zLmhlYWRlcnMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmhlYWRlcnMgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfb25sb2FkID0gcGFyYW1zLm9ubG9hZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhcmFtcy5fb25sb2FkID0gcGFyYW1zLm9ubG9hZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5vbmxvYWQgPSAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5vbmxvYWQgPSBfb25sb2FkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbXMuX29ubG9hZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuX29ubG9hZChkYXRhLCBfb25sb2FkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5vbmxvYWQoZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFqYXhQYXRjaGVkKHVybCwgcGFyYW1zKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIGFqYXhQYXRjaEZuLCBmbkFqYXgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8vLy8vIOWuieijheS/ruaUueWQjueahCBBamF4IOWHveaVsOe7k+adnwogICAgICAgICAgICAgICAgLy8vIOaMgumSqeS4i+S4gOmmluWIh+aNouS6i+S7tiwg5by65Yi26YeN5paw6K+75Y+W5b2T5YmN5puy55uu5Zyw5Z2A44CCCiAgICAgICAgICAgICAgICB2YXIgZm5OZXh0U29uZyA9IHRoaXMuU2VhcmNoKHVuc2FmZVdpbmRvdy5ubS53W2Nsc1BsYXllcl0ucHJvdG90eXBlLCBgbm0udy4ke2Nsc1BsYXllcn0ucHJvdG90eXBlYCwgJygrMSksInVpIiknKTsKICAgICAgICAgICAgICAgIHVuc2FmZUV4ZWMoKGNsc1BsYXllciwgZm5OZXh0U29uZykgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciBvbGROZXh0U29uZyA9IHdpbmRvdy5ubS53W2Nsc1BsYXllcl0ucHJvdG90eXBlW2ZuTmV4dFNvbmddOwogICAgICAgICAgICAgICAgICAgIHZhciByZWxvYWRTb25nID0gZXZhbCgnKCcgKyBvbGROZXh0U29uZy50b1N0cmluZygpLnJlcGxhY2UoJzEnLCAnMCcpICsgJyknKTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cubm0ud1tjbHNQbGF5ZXJdLnByb3RvdHlwZVtmbk5leHRTb25nXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm5tLndbY2xzUGxheWVyXS5wcm90b3R5cGVbZm5OZXh0U29uZ10gPSBvbGROZXh0U29uZzsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbG9hZFNvbmcuY2FsbCh0aGlzKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ueHQnKS5jbGljaygpOwogICAgICAgICAgICAgICAgfSwgY2xzUGxheWVyLCBmbk5leHRTb25nKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIEFqYXhQYXRjaGVkT2xkQXBpKHVybCwgcGFyYW1zKSB7CiAgICAgICAgICAgIGlmICh1cmwgIT0gJy9hcGkvc29uZy9lbmhhbmNlL3BsYXllci91cmwnKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9hamF4QmFja3VwKHVybCwgcGFyYW1zKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB1cmwgPSAnL2FwaS92My9zb25nL2RldGFpbCc7CiAgICAgICAgICAgIGxldCBxdWVyeSA9IHBhcmFtcy5xdWVyeTsKICAgICAgICAgICAgaWYgKHF1ZXJ5LmJyKQogICAgICAgICAgICAgICAgZGVsZXRlIHF1ZXJ5LmJyOwogICAgICAgICAgICB2YXIgX2lkcyA9IEpTT04ucGFyc2UocXVlcnkuaWRzKTsKICAgICAgICAgICAgdmFyIHJlcXVlc3RJZHMgPSBbXTsKICAgICAgICAgICAgdGhpcy5Mb2FkQ2FjaGUoKTsKICAgICAgICAgICAgdmFyIHNvbmdzID0gX2lkcy5tYXAoKGlkKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoaWQgaW4gdGhpcy5fc29uZ0NhY2hlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NvbmdDYWNoZVtpZF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXF1ZXN0SWRzLnB1c2goaWQpOwogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0pLmZpbHRlcigoc29uZykgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIHNvbmc7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAocmVxdWVzdElkcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIExvZ2dlcl81LmluZm8oYOS7jue8k+WtmOivu+WPluabsuebruS/oeaBr+OAgmApOwogICAgICAgICAgICAgICAgbGV0IHJlcGx5ID0gU29uZ3NUb1VybFJlcGx5KHNvbmdzKTsKICAgICAgICAgICAgICAgIHRoaXMuTm90aWZ5VXJsQ2hhbmdlKHJlcGx5LmRhdGFbMF0udXJsKTsKICAgICAgICAgICAgICAgIHBhcmFtcy5vbmxvYWQocmVwbHkpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIExvZ2dlcl81LmluZm8oJ+ivt+axguacjeWKoeWZqOiOt+WPluS/oeaBrzogJW8nLCByZXF1ZXN0SWRzKTsKICAgICAgICAgICAgcGFyYW1zLnF1ZXJ5ID0gewogICAgICAgICAgICAgICAgaWRzOiByZXF1ZXN0SWRzCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHBhcmFtcy5fb25sb2FkID0gZXhwb3J0RnVuY3Rpb24oKGRhdGEsIF9vbmxvYWQpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuTG9hZENhY2hlKGZhbHNlKTsKICAgICAgICAgICAgICAgIGRhdGEuc29uZ3MuZm9yRWFjaCgoc29uZykgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuX3NvbmdDYWNoZVtzb25nLmlkXSA9IHNvbmc7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuU2F2ZUNhY2hlKCk7CiAgICAgICAgICAgICAgICBsZXQgcmVwbHkgPSBTb25nc1RvVXJsUmVwbHkoX2lkcy5tYXAoKGlkKSA9PiB0aGlzLl9zb25nQ2FjaGVbaWRdKSk7CiAgICAgICAgICAgICAgICB0aGlzLk5vdGlmeVVybENoYW5nZShyZXBseS5kYXRhWzBdLnVybCk7CiAgICAgICAgICAgICAgICBfb25sb2FkKHJlcGx5KTsKICAgICAgICAgICAgfSwgdW5zYWZlV2luZG93KTsKICAgICAgICAgICAgdGhpcy5fYWpheEJhY2t1cCh1cmwsIHBhcmFtcyk7CiAgICAgICAgfQogICAgICAgIExvYWRDYWNoZShmb3JjZSA9IGZhbHNlKSB7CiAgICAgICAgICAgIGlmIChmb3JjZSB8fCB0aGlzLl9yZWxvYWRDYWNoZSkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9zb25nQ2FjaGUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5fX3RyYWNrX3F1ZXVlX2NhY2hlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9zb25nQ2FjaGUgPSB7fTsKICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuX190cmFja19xdWV1ZV9jYWNoZSA9ICd7fSc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5fcmVsb2FkQ2FjaGUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgICAgU2F2ZUNhY2hlKCkgewogICAgICAgICAgICBsb2NhbFN0b3JhZ2UuX190cmFja19xdWV1ZV9jYWNoZSA9IEpTT04uc3RyaW5naWZ5KHRoaXMuX3NvbmdDYWNoZSk7CiAgICAgICAgfQogICAgICAgIEFqYXhQYXRjaGVkSW50ZXJuYXRpb25hbCh1cmwsIHBhcmFtcywgdHJ5X2JyKSB7CiAgICAgICAgICAgIGlmICh1cmwgIT0gJy9hcGkvc29uZy9lbmhhbmNlL3BsYXllci91cmwnKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9hamF4QmFja3VwKHVybCwgcGFyYW1zKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSAnb3M9dXdwJzsKICAgICAgICAgICAgbGV0IGlwID0gdGhpcy5faXBzLnNoaWZ0KCk7CiAgICAgICAgICAgIHRoaXMuX2lwcy5wdXNoKGlwKTsKICAgICAgICAgICAgcGFyYW1zLmhlYWRlcnNbJ1gtUmVhbC1JUCddID0gaXA7CiAgICAgICAgICAgIHZhciBpZCA9IEpTT04ucGFyc2UocGFyYW1zLnF1ZXJ5LmlkcylbMF07CiAgICAgICAgICAgIHBhcmFtcy5fb25sb2FkID0gZXhwb3J0RnVuY3Rpb24oKGRhdGEsIF9vbmxvYWQpID0+IHsKICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGFbMF0udXJsKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHVybCA9IHRoaXMuSW5qZWN0Q2RuKGRhdGEuZGF0YVswXS51cmwpOwogICAgICAgICAgICAgICAgICAgIF9vbmxvYWQoVXJsVG9Tb25nVXJsUmVwbHkoaWQsIHVybCkpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuTm90aWZ5VXJsQ2hhbmdlKHVybCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChTY3JpcHRDb25maWdfMy5Db25maWcuYlllbGxvd0Vhc2VVc2VUaHJpZE9uRmFpbCAmJiAhdHJ5X2JyKSB7CiAgICAgICAgICAgICAgICAgICAgTXVzaWNTcHkuR2V0KGlkLCAoZXJyLCB1cmwpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nZ2VyXzUuZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2RuX3VybCA9IHRoaXMuSW5qZWN0Q2RuKHVybCk7CiAgICAgICAgICAgICAgICAgICAgICAgIF9vbmxvYWQoVXJsVG9Tb25nVXJsUmVwbHkoaWQsIGNkbl91cmwpKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5Ob3RpZnlVcmxDaGFuZ2UoY2RuX3VybCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgIH0sIHVuc2FmZVdpbmRvdyk7CiAgICAgICAgICAgIHRoaXMuX2FqYXhCYWNrdXAodXJsLCBwYXJhbXMpOwogICAgICAgIH0KICAgICAgICBOb3RpZnlVcmxDaGFuZ2UodXJsKSB7CiAgICAgICAgICAgIHRoaXMuX3NvbmcudXJsID0gdXJsOwogICAgICAgICAgICB0aGlzLk9uU29uZ0NoYW5nZSgpOwogICAgICAgIH0KICAgICAgICBPblNvbmdDaGFuZ2UoKSB7CiAgICAgICAgICAgIHRoaXMuX2J0bkRvd25sb2FkLmF0dHIoewogICAgICAgICAgICAgICAgaHJlZjogdGhpcy5fZG93bmxvYWRlci5HZW5lcmF0ZVVyaSh0aGlzLl9zb25nLnVybCwgYCR7dGhpcy5fc29uZy5uYW1lfSBbJHt0aGlzLl9zb25nLmFydGlzdHN9XS5tcDNgKSwKICAgICAgICAgICAgICAgIHRpdGxlOiBg5LiL6L29OiAke3RoaXMuX3NvbmcubmFtZX1gCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBJbmplY3RDZG4odXJsKSB7CiAgICAgICAgICAgIHZhciByID0gdXJsLnJlcGxhY2UoLyhtMTBcLm11c2ljXC4xMjZcLm5ldCkvLCBgJHt0aGlzLl9jZG59LyQxYCk7CiAgICAgICAgICAgIExvZ2dlcl81LmluZm8oYOaSreaUvumfs+S5kCAoJHtyfSlgKTsKICAgICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgfQogICAgICAgIE5leHRDZG4oKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5fY2RucykKICAgICAgICAgICAgICAgIEdlbmVyYXRlQ2RuTGlzdCh0aGlzKTsKICAgICAgICAgICAgdmFyIGlwID0gdGhpcy5fY2Rucy5zaGlmdCgpOwogICAgICAgICAgICB0aGlzLl9jZG5zLnB1c2goaXApOwogICAgICAgICAgICB0aGlzLk5vdGlmeUNkbihpcCk7CiAgICAgICAgfQogICAgICAgIE5vdGlmeUNkbihpcCkgewogICAgICAgICAgICBpZiAodGhpcy5fYnRuQ2hhbmdlQ2RuKQogICAgICAgICAgICAgICAgdGhpcy5fYnRuQ2hhbmdlQ2RuLmF0dHIoJ3RpdGxlJywgYOabtOaNoiBDRE4gW+W9k+WJjTogJHtpcH1dYCk7CiAgICAgICAgICAgIExvZ2dlcl81LmluZm8oYOS9v+eUqCBDRE46ICR7aXB9YCk7CiAgICAgICAgICAgIHRoaXMuX2NkbiA9IGlwOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uud3NfY2RuX21lZGlhID0gaXA7CiAgICAgICAgICAgIEdNX3NldFZhbHVlKCJfd3NfY2RuX21lZGlhIiwgaXApOwogICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChTY3JpcHRfNy5TY3JpcHQuTmFtZSArICctY2RuJywgewogICAgICAgICAgICAgICAgZGV0YWlsOiBpcAogICAgICAgICAgICB9KSk7CiAgICAgICAgfQogICAgICAgIEhvb2tSYWRpb1BsYXllcigpIHsKICAgICAgICB9CiAgICAgICAgRnJhbWVQYWdlKCkgewogICAgICAgICAgICBzd2l0Y2ggKGxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCcvJylbMV0pIHsKICAgICAgICAgICAgICAgIGNhc2UgJ212JzoKICAgICAgICAgICAgICAgICAgICB0aGlzLk1vdmllUGFnZSgpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnb3V0Y2hhaW4nOgogICAgICAgICAgICAgICAgICAgIHRoaXMuT3V0Y2hhaW5QYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdzb25nJzoKICAgICAgICAgICAgICAgICAgICB0aGlzLlNpbmdsZVBhZ2UoKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ2FsYnVtJzogLy8g5LiT6L6RCiAgICAgICAgICAgICAgICBjYXNlICdhcnRpc3QnOiAvLyDoibrmnK/lrrYKICAgICAgICAgICAgICAgIGNhc2UgJ3BsYXlsaXN0JzogLy8g5pKt5pS+5YiX6KGoCiAgICAgICAgICAgICAgICBjYXNlICdkaXNjb3Zlcic6CiAgICAgICAgICAgICAgICAgICAgdGhpcy5FbmFibGVJdGVtcygpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIE1vdmllUGFnZSgpIHsKICAgICAgICAgICAgdmFyICRmbGFzaEJveCA9ICQoJyNmbGFzaF9ib3gnKTsKICAgICAgICAgICAgaWYgKCRmbGFzaEJveC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9ICRmbGFzaEJveC5odG1sKCk7CiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gcXMuUGFyc2UoaHRtbC5tYXRjaCgvZmxhc2h2YXJzPSIoW1xzXFNdKz8pIi8pWzFdLnJlcGxhY2UoLyZhbXA7L2csICcmJykpOwogICAgICAgICAgICAgICAgdmFyIHF1YWxpdGllcyA9IHsKICAgICAgICAgICAgICAgICAgICBodXJsOiAn6auY5riFJywKICAgICAgICAgICAgICAgICAgICBtdXJsOiAn5qCH5riFJywKICAgICAgICAgICAgICAgICAgICBsdXJsOiAn5rij55S76LSoJwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciAkZGxIb2xkZXIgPSAkKCc8cD4nKS5jc3MoewogICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogJ3JpZ2h0JwogICAgICAgICAgICAgICAgfSkudGV4dCgnTVYg5LiL6L29OiAnKS5pbnNlcnRBZnRlcigkZmxhc2hCb3gpOwogICAgICAgICAgICAgICAgT2JqZWN0LmtleXMocXVhbGl0aWVzKS5mb3JFYWNoKChxdWFsaXR5SWQpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1zW3F1YWxpdHlJZF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRkbCA9ICQoJzxhPicpLmF0dHIoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogdGhpcy5fZG93bmxvYWRlci5HZW5lcmF0ZVVyaShwYXJhbXNbcXVhbGl0eUlkXSwgYCR7cGFyYW1zLnRyYWNrTmFtZX1bJHtxdWFsaXRpZXNbcXVhbGl0eUlkXX1dLm1wNGApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGDkuIvovb0gJHtwYXJhbXMudHJhY2tOYW1lfSDnmoQgJHtxdWFsaXRpZXNbcXVhbGl0eUlkXX0gTXZgCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnByb3AoJ2Rvd25sb2FkJywgdHJ1ZSkudGV4dChxdWFsaXRpZXNbcXVhbGl0eUlkXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS/ruatoyAxNjMg6Ieq5bex55qE6Lez6L2sLgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kb3dubG9hZGVyLkNhcHR1cmVBcmlhKCRkbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICRkbEhvbGRlci5hcHBlbmQoJGRsKTsKICAgICAgICAgICAgICAgICAgICAgICAgJGRsSG9sZGVyLmFwcGVuZCgnIHwgJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAkZGxIb2xkZXIuYXBwZW5kKGDmj5Dkvps6ICR7U2NyaXB0XzcuU2NyaXB0Lk5hbWV9ICR7Q29uc3RhbnRzXzMudmVyc2lvbn1gKTsKICAgICAgICAgICAgICAgIGlmIChTY3JpcHRDb25maWdfMy5Db25maWcuYlllbGxvd0Vhc2VJbnRlcm5hdGlvbmFsKSB7CiAgICAgICAgICAgICAgICAgICAgJGZsYXNoQm94Lmh0bWwoaHRtbC5yZXBsYWNlKC9yZXN0cmljdD10cnVlL2csICdyZXN0cmljdD0nKSk7CiAgICAgICAgICAgICAgICAgICAgLy8g6Ieq5Yqo5YWz6Zet5by55Ye655qE5o+Q56S65qGGCiAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd6Y2xzJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbFswXS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbW91c2Vkb3duJykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIE91dGNoYWluUGFnZSgpIHsKICAgICAgICAgICAgLy8gVE9ETzog5aSW6ZO+6aG16Z2iCiAgICAgICAgfQogICAgICAgIFNpbmdsZVBhZ2UoKSB7CiAgICAgICAgICAgIHZhciB0aW1lciA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgcGxheUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3UtYnRuaS1hZGRwbHknKTsKICAgICAgICAgICAgICAgIGlmIChwbGF5QnV0dG9uLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSBpdCBzaG91bGQgYmUgYSBkaXNhYmxlZCBidXR0b24uCiAgICAgICAgICAgICAgICB2YXIgcGxheUJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd1LWJ0bmktcGxheS1kaXMnKTsKICAgICAgICAgICAgICAgIGlmIChwbGF5QnV0dG9ucy5sZW5ndGggPT0gMSkgewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRpbWVyKTsKICAgICAgICAgICAgICAgICAgICB2YXIgc29uZ0lkID0gJCgnI2NvbnRlbnQtb3BlcmF0aW9uJykuZGF0YSgncmlkJyk7CiAgICAgICAgICAgICAgICAgICAgcGxheUJ1dHRvbnNbMF0ub3V0ZXJIVE1MID0gYAo8YSBkYXRhLXJlcy1hY3Rpb249InBsYXkiIGRhdGEtcmVzLWlkPSIke3NvbmdJZH0iIGRhdGEtcmVzLXR5cGU9IjE4IiBocmVmPSJqYXZhc2NyaXB0OjsiCiAgY2xhc3M9InUtYnRuMiB1LWJ0bjItMiB1LWJ0bmktYWRkcGx5IGYtZmwiIGhpZGVmb2N1cz0idHJ1ZSIgdGl0bGU9IuaSreaUviI+CiAgICA8aT48ZW0gY2xhc3M9InBseSI+PC9lbT7mkq3mlL48L2k+CjwvYT4KCjxhIGRhdGEtcmVzLWFjdGlvbj0iYWRkdG8iIGRhdGEtcmVzLWlkPSIke3NvbmdJZH0iIGRhdGEtcmVzLXR5cGU9IjE4IiBocmVmPSJqYXZhc2NyaXB0OjsiCiAgY2xhc3M9InUtYnRuaSB1LWJ0bmktYWRkIiBoaWRlZm9jdXM9InRydWUiIHRpdGxlPSLmt7vliqDliLDmkq3mlL7liJfooagiPgo8L2E+CiAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9CiAgICAgICAgRW5hYmxlSXRlbXMoKSB7CiAgICAgICAgICAgIHZhciB0aW1lciA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgZGlzYmxlZEl0ZW1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnanMtZGlzJyk7CiAgICAgICAgICAgICAgICBpZiAoZGlzYmxlZEl0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRpbWVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGlzYmxlZEl0ZW1zLmxlbmd0aDspIHsKICAgICAgICAgICAgICAgICAgICBkaXNibGVkSXRlbXNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnanMtZGlzJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIFRlc3RTdHJpbmcoc3JjLCBuZWVkbGUpIHsKICAgICAgICBpZiAodHlwZW9mIG5lZWRsZSA9PSAnc3RyaW5nJykgewogICAgICAgICAgICByZXR1cm4gRXh0ZW5zaW9uXzkuQ29udGFpbnMoc3JjLCBuZWVkbGUpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG5lZWRsZS50ZXN0KHNyYyk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gR2VuZXJhdGVDZG5MaXN0KGN0eCkgewogICAgICAgIHZhciBjZG5zID0gWwogICAgICAgICAgICAvLyDnlLXkv6EKICAgICAgICAgICAgIjEyNS45MC4yMDYuMzIiLAogICAgICAgICAgICAiMjIyLjE4Ni4xMzIuMTAzIiwKICAgICAgICAgICAgIjExNy4yMy42Ljg5IiwKICAgICAgICAgICAgIjExOS4xNDUuMjA3LjE3IiwKICAgICAgICAgICAgIjE4MC45Ny4xODAuNzEiLAogICAgICAgICAgICAiMTE2LjU1LjIzNi45MyIsCiAgICAgICAgICAgICIyMTguNzYuMTA1LjQyIiwKICAgICAgICAgICAgIjEyNS42NC4yMzIuMTUiLAogICAgICAgICAgICAiMTE1LjIzMS44Ny4zNyIsCiAgICAgICAgICAgICI1OC4yMjEuNzguNjgiLAogICAgICAgICAgICAiMjIwLjExMi4xOTUuMTQ4IiwKICAgICAgICAgICAgIjIxOC42NC45NC42NyIsCiAgICAgICAgICAgICIzNi40Mi4zMi43NiIsCiAgICAgICAgICAgICI2MS4xMzYuMjExLjE2IiwKICAgICAgICAgICAgIjIxOC42NC45NC42OCIsCiAgICAgICAgICAgICIyMTkuMTM4LjIxLjcxIiwKICAgICAgICAgICAgIjQ5Ljc5LjIzMi41OCIsCiAgICAgICAgICAgICIxMjIuMjI4LjI0LjMwIiwKICAgICAgICAgICAgIjE4Mi4xMDYuMTk0Ljg1IiwKICAgICAgICAgICAgIjIxOC41OS4xODYuOTgiLAogICAgICAgICAgICAiNjEuMTU4LjEzMy4yMSIsCiAgICAgICAgICAgICIxMTcuMjcuMjQxLjIwIiwKICAgICAgICAgICAgIjU4LjUxLjE1MC4xMzMiLAogICAgICAgICAgICAiMjE4LjI5LjQ5LjEzMiIsCiAgICAgICAgICAgICI2MC4yMTUuMTI1Ljc2IiwKICAgICAgICAgICAgIjE4My42MS4yMi4xNyIsCiAgICAgICAgICAgICIxODMuMTM0LjE0LjI2IiwKICAgICAgICAgICAgIjU4LjIyMC42LjE0MiIsCiAgICAgICAgICAgICIxMTUuMjMxLjE1OC40NCIsCiAgICAgICAgICAgICI2MS4xNjQuMjQxLjEwNSIsCiAgICAgICAgICAgICIxMjUuNDYuMjIuMTI0IiwKICAgICAgICAgICAgIjIyMi4yOC4xNTIuMTM5IiwKICAgICAgICAgICAgIjEyNC4xNjUuMjE2LjI0NCIsCiAgICAgICAgICAgICIyMTguNjAuMTA2LjExNSIsCiAgICAgICAgICAgICIyMDIuMTA3Ljg1LjgxIiwKICAgICAgICAgICAgIjYxLjE3OS4xMDcuMTE2IiwKICAgICAgICAgICAgIjE3NS40My4yMC42OSIsCiAgICAgICAgICAgICIyMjAuMTk0LjIwMy44NiIsCiAgICAgICAgICAgICI2MS4xNjAuMjA5LjI3IiwKICAgICAgICAgICAgIjEyMC4yMDkuMTQxLjc5IiwKICAgICAgICAgICAgIjEyMC4yMDkuMTQyLjEzOCIsCiAgICAgICAgICAgICIyMTkuMTM4LjIxLjcyIiwKICAgICAgICAgICAgIjU4LjIxNi4yMS4xMzIiLAogICAgICAgICAgICAnMTQuMjE1LjIyOC4xMCcsCiAgICAgICAgICAgICcyMTguODcuMTExLjgzJywKICAgICAgICAgICAgLy8g5YyX5Lqs55S15L+hCiAgICAgICAgICAgICcyMDMuMTMwLjU5LjgnLAogICAgICAgICAgICAnMjAzLjEzMC41OS4xMCcsCiAgICAgICAgICAgICcyMDMuMTMwLjU5LjExJywKICAgICAgICAgICAgJzIwMy4xMzAuNTkuMTInCiAgICAgICAgXTsKICAgICAgICBjdHguX2NkbnMgPSBFeHRlbnNpb25fOS5TaHVmZmxlKGNkbnMpOwogICAgICAgIHZhciBpcHMgPSBbCiAgICAgICAgICAgICcxMDYuMTIwLjE2Ny42NycsICcxMTEuMjA2LjYxLjEzMScsICcxMTEuMjA2LjYxLjEzMScsICcxMTEuMTMuNjYuMjI2JywKICAgICAgICAgICAgJzEwNi4xMjAuMTY3LjY3JywgJzEyNS44OC4xOTAuNTYnLCAnMjIyLjczLjE0NC4xOTUnLCAnMjIwLjE4MS41Ny4yMzInLAogICAgICAgICAgICAnMTgwLjE0OS4xMzEuMjQ3JywgJzE4MC4xNDkuMTMzLjE2NycsICcxMTIuMzQuMTExLjEyMScsICc2MS4xMzUuMTg1LjI0JwogICAgICAgIF07CiAgICAgICAgY3R4Ll9pcHMgPSBFeHRlbnNpb25fOS5TaHVmZmxlKGlwcyk7CiAgICB9CiAgICBmdW5jdGlvbiBHZW5lcmF0ZVZhbGlkTmFtZSgpIHsKICAgICAgICByZXR1cm4gYCR7U2NyaXB0XzcuU2NyaXB0Lk5hbWV9X18ke0RhdGUubm93KCl9JHtNYXRoLnJhbmRvbSgpfWA7CiAgICB9CiAgICBmdW5jdGlvbiBHZXRFbmhhbmNlZERhdGEoaWQsIHVybCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgIGJyOiAxOTIwMDAsCiAgICAgICAgICAgIHNpemU6IDEyMDAwMCwKICAgICAgICAgICAgbWQ1OiAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAgICAgICBjb2RlOiAyMDAsCiAgICAgICAgICAgIGV4cGk6IDEyMDAsCiAgICAgICAgICAgIHR5cGU6ICdtcDMnLAogICAgICAgICAgICBnYWluOiAwLAogICAgICAgICAgICBmZWU6IDAsCiAgICAgICAgICAgIHVmOiBudWxsLAogICAgICAgICAgICBwYXllZDogMCwKICAgICAgICAgICAgY2FuRXh0ZW5kOiBmYWxzZQogICAgICAgIH07CiAgICB9CiAgICBmdW5jdGlvbiBTb25nc1RvVXJsUmVwbHkoc29uZ3MpIHsKICAgICAgICB2YXIgcmVwbHkgPSB7CiAgICAgICAgICAgIGNvZGU6IDIwMCwKICAgICAgICAgICAgZGF0YTogc29uZ3MubWFwKChzb25nKSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gR2V0RW5oYW5jZWREYXRhKHNvbmcuaWQsIEdlbmVyYXRlVXJsRnJvbVNvbmcoc29uZykpOwogICAgICAgICAgICB9KQogICAgICAgIH07CiAgICAgICAgcmV0dXJuIGNsb25lSW50byhyZXBseSwgdW5zYWZlV2luZG93LCB7CiAgICAgICAgICAgIGNsb25lRnVuY3Rpb25zOiBmYWxzZSwKICAgICAgICAgICAgd3JhcFJlZmxlY3RvcnM6IHRydWUKICAgICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIFVybFRvU29uZ1VybFJlcGx5KGlkLCB1cmwpIHsKICAgICAgICB2YXIgcmVwbHkgPSB7CiAgICAgICAgICAgIGNvZGU6IDIwMCwKICAgICAgICAgICAgZGF0YTogW0dldEVuaGFuY2VkRGF0YShpZCwgdXJsKV0KICAgICAgICB9OwogICAgICAgIHJldHVybiBjbG9uZUludG8ocmVwbHksIHVuc2FmZVdpbmRvdywgewogICAgICAgICAgICBjbG9uZUZ1bmN0aW9uczogZmFsc2UsCiAgICAgICAgICAgIHdyYXBSZWZsZWN0b3JzOiB0cnVlCiAgICAgICAgfSk7CiAgICB9CiAgICBmdW5jdGlvbiBHZW5lcmF0ZVVybEZyb21Tb25nKHNvbmcpIHsKICAgICAgICB2YXIgZGZzSWQ7CiAgICAgICAgdmFyIHEgPSAoc29uZy5oIHx8IHNvbmcubSB8fCBzb25nLmwgfHwgc29uZy5hKTsKICAgICAgICBpZiAoIXEpIHsKICAgICAgICAgICAgTG9nZ2VyXzUuZXJyb3IoYOatjOabsiAke3NvbmcubmFtZX0g5bey57uP5LiL5p6277yM6I635Y+W5Zyw5Z2A5aSx6LSlIWApOwogICAgICAgICAgICByZXR1cm4gX19NUDNfQkxBTks7CiAgICAgICAgfQogICAgICAgIGRmc0lkID0gcS5maWQ7CiAgICAgICAgdmFyIHJhbmRTZXJ2ZXIgPSB+fihNYXRoLnJhbmRvbSgpICogMikgKyAxOwogICAgICAgIHZhciBpcFByZWZpeCA9ICcnOwogICAgICAgIGlmIChTY3JpcHRDb25maWdfMy5Db25maWcuYlllbGxvd0Vhc2VJbnRlcm5hdGlvbmFsKSB7CiAgICAgICAgICAgIGlmIChTY3JpcHRDb25maWdfMy5Db25maWcuYlllbGxvd0Vhc2VVc2VPbGRBcGkpIHsKICAgICAgICAgICAgICAgIGlwUHJlZml4ID0gJzEyNy4wLjAuMTo0MDAzLyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBUT0RPOiDov5nkupsgSXAg5pyJ55So5ZibPwogICAgICAgICAgICAgICAgaXBQcmVmaXggPSBydWxlLmluc3RhbmNlLl9jZG47CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdmFyIGRmc0hhc2ggPSBEb0Rmc0hhc2goZGZzSWQpOwogICAgICAgIHJldHVybiBgaHR0cDovLyR7aXBQcmVmaXh9bSR7cmFuZFNlcnZlcn0ubXVzaWMuMTI2Lm5ldC8ke2Rmc0hhc2h9LyR7ZGZzSWR9Lm1wM2A7CiAgICB9CiAgICBmdW5jdGlvbiBzdHJUb0tleUNvZGVzKHN0cikgewogICAgICAgIHJldHVybiBTdHJpbmcoc3RyKS5zcGxpdCgnJykubWFwKChjaCkgPT4gY2guY2hhckNvZGVBdCgwKSk7CiAgICB9CiAgICBjb25zdCBrZXlzID0gWwogICAgICAgIDUxLCAxMDMsIDExMSwgNTYsIDM4LCAzNiwKICAgICAgICA1NiwgNDIsIDUxLCA0MiwgNTEsIDEwNCwKICAgICAgICA0OCwgMTA3LCA0MCwgNTAsIDQxLCA1MAogICAgXTsKICAgIGZ1bmN0aW9uIERvRGZzSGFzaChkZnNpZCkgewogICAgICAgIHZhciBmaWRzID0gc3RyVG9LZXlDb2RlcyhkZnNpZCkubWFwKGZ1bmN0aW9uIChmaWQsIGkpIHsKICAgICAgICAgICAgcmV0dXJuIChmaWQgXiBrZXlzW2kgJSBrZXlzLmxlbmd0aF0pICYgMHhGRjsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gQ3J5cHRvSlMuTUQ1KENyeXB0b0pTLmxpYi5CeXRlQXJyYXkoZmlkcykpCiAgICAgICAgICAgIC50b1N0cmluZyhDcnlwdG9KUy5lbmMuQmFzZTY0KQogICAgICAgICAgICAucmVwbGFjZSgvXC8vZywgIl8iKQogICAgICAgICAgICAucmVwbGFjZSgvXCsvZywgIi0iKTsKICAgIH0KICAgIHZhciBNdXNpY1NweTsKICAgIChmdW5jdGlvbiAoTXVzaWNTcHkpIHsKICAgICAgICB2YXIgX3JlYWR5ID0gZmFsc2U7CiAgICAgICAgdmFyIF9yZWxvYWRDYWNoZSA9IHRydWU7CiAgICAgICAgdmFyIF9jYWNoZSA9IHt9OwogICAgICAgIGZ1bmN0aW9uIEluaXQoKSB7CiAgICAgICAgICAgIF9yZWFkeSA9IHRydWU7CiAgICAgICAgICAgIFNjcmlwdF83LlNjcmlwdC5SZWdpc3RlclN0b3JhZ2VFdmVudCgnX01VU0lDX1NQWScsICgpID0+IHsKICAgICAgICAgICAgICAgIF9yZWxvYWRDYWNoZSA9IHRydWU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBSZWxvYWRDYWNoZSgpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBSZWxvYWRDYWNoZShmb3JjZSA9IGZhbHNlKSB7CiAgICAgICAgICAgIGlmIChmb3JjZSB8fCBfcmVsb2FkQ2FjaGUpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgX2NhY2hlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuX01VU0lDX1NQWSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZXgpIHsKICAgICAgICAgICAgICAgICAgICBfY2FjaGUgPSB7fTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBfcmVsb2FkQ2FjaGUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gUmVhZENhY2hlKGlkKSB7CiAgICAgICAgICAgIGlmIChfcmVsb2FkQ2FjaGUpCiAgICAgICAgICAgICAgICBSZWxvYWRDYWNoZSgpOwogICAgICAgICAgICByZXR1cm4gX2NhY2hlW2lkXTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gU2F2ZUNhY2hlKCkgewogICAgICAgICAgICBsb2NhbFN0b3JhZ2UuX01VU0lDX1NQWSA9IEpTT04uc3RyaW5naWZ5KF9jYWNoZSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIEdldChpZCwgY2FsbGJhY2spIHsKICAgICAgICAgICAgaWYgKCFfcmVhZHkpCiAgICAgICAgICAgICAgICBJbml0KCk7CiAgICAgICAgICAgIExvZ2dlcl81LmluZm8oYOesrOS4gOatpTog5pCc57Si5puy55uuICgke2lkfSlgKTsKICAgICAgICAgICAgdmFyIGNhY2hlU29uZyA9IFJlYWRDYWNoZShpZCk7CiAgICAgICAgICAgIGlmIChjYWNoZVNvbmcpIHsKICAgICAgICAgICAgICAgIExvZ2dlcl81LmluZm8oYOivu+iHque8k+WtmCwg6K+35rGC6Kej5p6Q55yf5a6e5Zyw5Z2A44CCYCk7CiAgICAgICAgICAgICAgICBQYXJzZVJlYWxBZGRyZXNzKGNhY2hlU29uZywgY2FsbGJhY2spOwogICAgICAgICAgICAgICAgLy8gY2FsbGJhY2sobnVsbCwgY2FjaGVTb25nLnVybCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICAgICAgICAgIHVybDogYGh0dHA6Ly9hcGkuaXR3dXN1bi5jb20vbXVzaWMvc2VhcmNoL3d5LzE/Zm9ybWF0PWpzb24mc2lnbj1hNWNjMGE4Nzk3NTM5ZDNhMWE0ZjdhZWNhNWI2OTViOSZrZXl3b3JkPSR7aWR9YCwKICAgICAgICAgICAgICAgIG9ubG9hZDogKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+aXoOaViOeahOabsuebruaQnOe0oue7k+aenOOAgicpKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgc29uZyA9IGRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoc29uZykgPT4gc29uZy5UeXBlID09ICd3eScgJiYgc29uZy5Tb25nSWQgPT0gaWQpCiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3AoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXNvbmcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfmib7kuI3liLDmm7Lnm67kv6Hmga/jgIInKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHNvbmcuU3FVcmwgfHwgc29uZy5IcVVybCB8fCBzb25nLkxxVXJsOwogICAgICAgICAgICAgICAgICAgIHZhciBzb25nT2JqID0gewogICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBEYXRlLm5vdygpLAogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgICAgICAgICAgcmVhbF90aW1lOiAwLAogICAgICAgICAgICAgICAgICAgICAgICByZWFsX3VybDogbnVsbAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgX2NhY2hlW2lkXSA9IHNvbmdPYmo7CiAgICAgICAgICAgICAgICAgICAgU2F2ZUNhY2hlKCk7CiAgICAgICAgICAgICAgICAgICAgTG9nZ2VyXzUuaW5mbyhg5oiQ5Yqf5Y+W5b6X5Zyw5Z2ALCDor7fmsYLop6PmnpDnnJ/lrp7lnLDlnYDjgIJgKTsKICAgICAgICAgICAgICAgICAgICBQYXJzZVJlYWxBZGRyZXNzKHNvbmdPYmosIGNhbGxiYWNrKTsKICAgICAgICAgICAgICAgICAgICAvLyBjYWxsYmFjayhudWxsLCB1cmwpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uZXJyb3I6ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+e9kee7nOmUmeivryAo5pCc57Si5puy55uuKScpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIE11c2ljU3B5LkdldCA9IEdldDsKICAgICAgICAvLyDlm5vlsI/ml7blkI7ov4fmnJ8KICAgICAgICAvLyAxMDAwICogNjAgKiA2MCAqNCA9PSAxNDQwMDAwMAogICAgICAgIGZ1bmN0aW9uIFBhcnNlUmVhbEFkZHJlc3MoY2FjaGVTb25nLCBjYWxsYmFjaykgewogICAgICAgICAgICBMb2dnZXJfNS5pbmZvKGDnrKzkuozmraU6IOino+aekOecn+WunuWcsOWdgCAoJHtjYWNoZVNvbmcudXJsfSlgKTsKICAgICAgICAgICAgaWYgKERhdGUubm93KCkgLSBjYWNoZVNvbmcucmVhbF90aW1lIDwgMTQ0MDAwMDApIHsKICAgICAgICAgICAgICAgIExvZ2dlcl81LmluZm8oYOivu+iHque8k+WtmO+8jOe7k+adn+ivu+WPluOAgmApOwogICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgY2FjaGVTb25nLnJlYWxfdXJsKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgdXJsOiBjYWNoZVNvbmcudXJsLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgIFJhbmdlOiAnYnl0ZXM9MC0yJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9ubG9hZDogKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY2FjaGVTb25nLnJlYWxfdXJsID0gcmVzcG9uc2UuZmluYWxVcmw7CiAgICAgICAgICAgICAgICAgICAgY2FjaGVTb25nLnJlYWxfdGltZSA9IERhdGUubm93KCk7CiAgICAgICAgICAgICAgICAgICAgU2F2ZUNhY2hlKCk7CiAgICAgICAgICAgICAgICAgICAgTG9nZ2VyXzUuaW5mbyhg6Kej5p6Q57uT5p2fOiAke2NhY2hlU29uZy5yZWFsX3VybH1gKTsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXNwb25zZS5maW5hbFVybCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb25lcnJvcjogKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign572R57uc6ZSZ6K+vICjop6PmnpDnnJ/lrp7lnLDlnYDml7YpJyksIG51bGwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9KShNdXNpY1NweSB8fCAoTXVzaWNTcHkgPSB7fSkpOwp9KTsKZGVmaW5lKCJzaXRlL211c2ljLjF0aW5nIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL1dhaXQiLCAiaGVscGVyL0Rvd25sb2FkZXIiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIFdhaXRfNiwgRG93bmxvYWRlcl81KSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgdmFyIHJ1bGUgPSB7CiAgICAgICAgaWQ6ICdtdXNpYy4xdGluZycsCiAgICAgICAgc3NsOiBmYWxzZSwKICAgICAgICBuYW1lOiAn5LiA5ZCs6Z+z5LmQJywKICAgICAgICBob3N0OiAnd3d3LjF0aW5nLmNvbScsCiAgICAgICAgaW5jbHVkZVN1Ykhvc3Q6IGZhbHNlLAogICAgICAgIHN1Yk1vZHVsZTogZmFsc2UsCiAgICAgICAgY3NzOiBgYCwKICAgICAgICBiZDogbnVsbCwKICAgICAgICBfZGw6IG51bGwsCiAgICAgICAgb25TdGFydDogKCkgPT4gewogICAgICAgICAgICBydWxlLmJkID0gbmV3IERvd25sb2FkZXJfNS5Eb3dubG9hZGVyKCk7CiAgICAgICAgfSwKICAgICAgICBvbkJvZHk6ICgpID0+IHsKICAgICAgICAgICAgcnVsZS5fZGwgPSAkKCcuc29uZ2FjdCA+IC5kb3duJyk7CiAgICAgICAgICAgIHJ1bGUuX2RsCiAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignb25jbGljaycpCiAgICAgICAgICAgICAgICAuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpOwogICAgICAgICAgICBydWxlLmJkLkNhcHR1cmVBcmlhKHJ1bGUuX2RsKTsKICAgICAgICAgICAgV2FpdF82LldhaXRVbnRpbCgneWl0aW5nLnBsYXllci5ob29rJywgKCkgPT4gewogICAgICAgICAgICAgICAgdW5zYWZlV2luZG93LnlpdGluZy5wbGF5ZXIuaG9vaygncGxheScsIGV4cG9ydEZ1bmN0aW9uKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBydWxlLlVwZGF0ZVNvbmcoKTsKICAgICAgICAgICAgICAgIH0sIHVuc2FmZVdpbmRvdykpOwogICAgICAgICAgICAgICAgcnVsZS5VcGRhdGVTb25nKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgVXBkYXRlU29uZzogKCkgPT4gewogICAgICAgICAgICB2YXIgbmFtZSA9IHVuc2FmZVdpbmRvdy55aXRpbmcucGxheWVyLmdldCgnc29uZy1uYW1lJyk7CiAgICAgICAgICAgIHZhciBzaW5nZXIgPSB1bnNhZmVXaW5kb3cueWl0aW5nLnBsYXllci5nZXQoJ3Npbmdlci1uYW1lJyk7CiAgICAgICAgICAgIHZhciBsaW5rID0gdW5zYWZlV2luZG93LnlpdGluZy5wbGF5ZXIuaG9zdCArIHVuc2FmZVdpbmRvdy55aXRpbmcucGxheWVyLmdldCgnc29uZy1tZWRpYScpOwogICAgICAgICAgICBydWxlLl9kbC5hdHRyKHsKICAgICAgICAgICAgICAgIGhyZWY6IHJ1bGUuYmQuR2VuZXJhdGVVcmkobGluaywgYCR7bmFtZX0gWyR7c2luZ2VyfV0ubXAzYCksCiAgICAgICAgICAgICAgICB0aXRsZTogYOeCueaIkeS4i+i9vTogJHtuYW1lfWAKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfTsKICAgIGV4cG9ydHMuUnVsZXMgPSBbcnVsZV07Cn0pOwpkZWZpbmUoImhvb2tlci9qUGxheWVyIiwgWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAiaGVscGVyL0xvZ2dlciIsICJoZWxwZXIvV2FpdCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgTG9nZ2VyXzYsIFdhaXRfNykgewogICAgInVzZSBzdHJpY3QiOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICAgIC8vLyA8cmVmZXJlbmNlIHBhdGg9Ii4uL3R5cGluZ3MvZ2xvYmFscy9qcXVlcnkvaW5kZXguZC50cyIgLz4KICAgIGZ1bmN0aW9uIFBhdGNoKGNhbGxiYWNrLCBuYW1lc3BhY2UgPSAialBsYXllciIpIHsKICAgICAgICBMb2dnZXJfNi5pbmZvKCfnrYnlvoUgalBsYXllciDlsLHnu6ogLi4nKTsKICAgICAgICBXYWl0XzcuV2FpdFVudGlsKGAkLiR7bmFtZXNwYWNlfS5wcm90b3R5cGUuc2V0TWVkaWFgLCAoKSA9PiB7CiAgICAgICAgICAgIExvZ2dlcl82LmluZm8oJ+W8gOWni+e7keWumuWHveaVsCAuLicpOwogICAgICAgICAgICB1bnNhZmVPdmVyd3JpdGVGdW5jdGlvblNhZmVQcm94eSh7CiAgICAgICAgICAgICAgICBzZXRNZWRpYTogKG5ld01lZGlhKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgTG9nZ2VyXzYuaW5mbygn5q2M5puy5pWw5o2uOiAnLCBuZXdNZWRpYSk7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3TWVkaWEpOwogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvclVuc2FmZVN1Y2Nlc3MoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgdW5zYWZlV2luZG93LiRbbmFtZXNwYWNlXS5wcm90b3R5cGUsIGAuJC4ke25hbWVzcGFjZX0ucHJvdG90eXBlYCk7CiAgICAgICAgfSk7CiAgICB9CiAgICBleHBvcnRzLlBhdGNoID0gUGF0Y2g7Cn0pOwpkZWZpbmUoInNpdGUvbXVzaWMuNTYiLCBbInJlcXVpcmUiLCAiZXhwb3J0cyIsICJoZWxwZXIvRG93bmxvYWRlciIsICJoZWxwZXIvU2NyaXB0IiwgImhlbHBlci9FeHRlbnNpb24iLCAiaG9va2VyL2pQbGF5ZXIiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIERvd25sb2FkZXJfNiwgU2NyaXB0XzgsIEV4dGVuc2lvbl8xMCwgalBsYXllcikgewogICAgInVzZSBzdHJpY3QiOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICAgIHZhciBydWxlID0gewogICAgICAgIGlkOiAnbXVzaWMuNTYnLAogICAgICAgIHNzbDogZmFsc2UsCiAgICAgICAgbmFtZTogJzU2IOmfs+S5kOe9kScsCiAgICAgICAgaG9zdDogJ3d3dy4yMzM1Ni5jb20nLAogICAgICAgIHBhdGg6IFsnL3BsdXMvcGxheWVyLmFzaHgnLCAnL3RpbmcvJywgJy9tdXNpYy8nXSwKICAgICAgICBpbmNsdWRlU3ViSG9zdDogZmFsc2UsCiAgICAgICAgc3ViTW9kdWxlOiBmYWxzZSwKICAgICAgICBoaWRlOiAnLnBsYXllci1ib3R0b20tZ2csIC5ub2NvcHlyaWdodCcsCiAgICAgICAgYmQ6IG51bGwsCiAgICAgICAgb25TdGFydDogKCkgPT4gewogICAgICAgICAgICBydWxlLmJkID0gbmV3IERvd25sb2FkZXJfNi5Eb3dubG9hZGVyKCk7CiAgICAgICAgfSwKICAgICAgICBvbkJvZHk6ICgpID0+IHsKICAgICAgICAgICAgalBsYXllci5QYXRjaCgobWVkaWEpID0+IHsKICAgICAgICAgICAgICAgIHZhciBhZGRyID0gbWVkaWEubXAzIHx8IG1lZGlhLm00YTsKICAgICAgICAgICAgICAgICQoJy5wbGF5LWluZm8tb3RoZXJvcHQgPiBhOmxhc3QnKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgcnVsZS5iZC5HZW5lcmF0ZVVyaShhZGRyLCBtZWRpYS5zb25nbmFtZSArIGFkZHIuc2xpY2UoLTQpKSkKICAgICAgICAgICAgICAgICAgICAuYXR0cigndGl0bGUnLCBg5LiL6L29OiAke21lZGlhLnNvbmduYW1lfSAo5q2M5omLOiAke21lZGlhLnNpbmdlcm5hbWV9KWApCiAgICAgICAgICAgICAgICAgICAgLmZpbmQoJ3NwYW4nKS50ZXh0KGDkuIvovb0gKCR7U2NyaXB0XzguU2NyaXB0Lk5hbWV9KWApOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIG5lZWRfcGxheSA9IGZhbHNlOwogICAgICAgICAgICB1bnNhZmVXaW5kb3cuc3BsYXllci5zb25nX2RhdGFbMF0uZm9yRWFjaCgoc29uZykgPT4gewogICAgICAgICAgICAgICAgaWYgKHNvbmcuZGVsZmxhZyB8fCBzb25nLmRlbGZsYWcgIT0gMCkgewogICAgICAgICAgICAgICAgICAgIG5lZWRfcGxheSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgc29uZy5kZWxmbGFnID0gMDsKICAgICAgICAgICAgICAgICAgICBpZiAoRXh0ZW5zaW9uXzEwLkJlZ2luV2l0aChzb25nLnVybCwgJy9kZWwnKSkgewogICAgICAgICAgICAgICAgICAgICAgICBzb25nLnVybCA9IHNvbmcudXJsLnJlcGxhY2UoJy9kZWwnLCAnJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKG5lZWRfcGxheSkgewogICAgICAgICAgICAgICAgdW5zYWZlV2luZG93LiQoJyNwbGF5JykuY2xpY2soKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICBleHBvcnRzLlJ1bGVzID0gW3J1bGVdOwp9KTsKZGVmaW5lKCJzaXRlL211c2ljLmVjaG8iLCBbInJlcXVpcmUiLCAiZXhwb3J0cyIsICJoZWxwZXIvTG9nZ2VyIiwgImhlbHBlci9XYWl0IiwgImhlbHBlci9Eb3dubG9hZGVyIiwgImhlbHBlci9FeHRlbnNpb24iXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIExvZ2dlcl83LCBXYWl0XzgsIERvd25sb2FkZXJfNywgRXh0ZW5zaW9uXzExKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgdmFyIHJ1bGUgPSB7CiAgICAgICAgaWQ6ICdtdXNpYy5lY2hvJywKICAgICAgICBzc2w6IGZhbHNlLAogICAgICAgIG5hbWU6ICdFY2hvIOWbnuWjsOmfs+S5kCcsCiAgICAgICAgaG9zdDogJ3d3dy5hcHAtZWNoby5jb20nLAogICAgICAgIHBhdGg6ICcvc291bmQvJywKICAgICAgICBpbmNsdWRlU3ViSG9zdDogZmFsc2UsCiAgICAgICAgc3ViTW9kdWxlOiBmYWxzZSwKICAgICAgICBoaWRlOiAnJywKICAgICAgICBiZDogbnVsbCwKICAgICAgICBkbExpbms6IG51bGwsCiAgICAgICAgb25TdGFydCgpIHsKICAgICAgICAgICAgcnVsZS5iZCA9IG5ldyBEb3dubG9hZGVyXzcuRG93bmxvYWRlcigpOwogICAgICAgIH0sCiAgICAgICAgb25Cb2R5KCkgewogICAgICAgICAgICBpZiAoRXh0ZW5zaW9uXzExLkJlZ2luV2l0aChsb2NhdGlvbi5wYXRobmFtZSwgJy9zb3VuZC8nKSkgewogICAgICAgICAgICAgICAgcnVsZS5TaW5nbGVQYWdlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIFNpbmdsZVBhZ2UoKSB7CiAgICAgICAgICAgIC8vIOWNleabsumhtemdogogICAgICAgICAgICAvLyBodHRwOi8vd3d3LmFwcC1lY2hvLmNvbS9zb3VuZC9pbmZvLW1vYmlsZT9zb3VuZF9pZD0ke2lkfQogICAgICAgICAgICB2YXIgaWQgPSBsb2NhdGlvbi5wYXRobmFtZS5tYXRjaCgvXGQrLyk7CiAgICAgICAgICAgIGlmICghaWQpIHsKICAgICAgICAgICAgICAgIExvZ2dlcl83LmVycm9yKCfojrflj5bmm7Lnm64gSUQg5aSx6LSlIScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIOaPkuWFpeS4i+i9vei/nuaOpXgKICAgICAgICAgICAgdmFyIHNtYWxsVGV4dCA9ICQoJzxzbWFsbD4nKTsKICAgICAgICAgICAgdmFyIHVybERsID0gJCgnPGE+Jyk7CiAgICAgICAgICAgICQoJy5zaW5nbGUtdGl0bGUgPiBoMScpLmFwcGVuZChzbWFsbFRleHQpOwogICAgICAgICAgICBzbWFsbFRleHQuYXBwZW5kKHVybERsKTsKICAgICAgICAgICAgcnVsZS5kbExpbmsgPSB1cmxEbDsKICAgICAgICAgICAgdXJsRGwudGV4dCgn5LiL6L29JykKICAgICAgICAgICAgICAgIC5hdHRyKCd0aXRsZScsICfmraPlnKjop6PmnpAuLi4nKQogICAgICAgICAgICAgICAgLmNzcygnbWFyZ2luLWxlZnQnLCAnMWVtJyk7CiAgICAgICAgICAgIHZhciBmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOwogICAgICAgICAgICBmcmFtZS5zcmMgPSAnYWJvdXQ6YmxhbmsnOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZyYW1lKTsKICAgICAgICAgICAgdW5zYWZlV2luZG93Lm9uZXJyb3IgPSBudWxsOwogICAgICAgICAgICB2YXIgcmVxID0gewogICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgICAgIHVybDogYC9zb3VuZC9pbmZvLW1vYmlsZT9zb3VuZF9pZD0ke2lkfWAsCiAgICAgICAgICAgICAgICBvbmxvYWQ6IChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKHJlc3BvbnNlLnJlc3BvbnNlVGV4dCkKICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcignc2NyaXB0JykKICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoaSwgZWwpID0+IEV4dGVuc2lvbl8xMS5Db250YWlucyhlbC50ZXh0Q29udGVudCwgJ3BsYXlfc291cmNlKCcpKTsKICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBMb2dnZXJfNy5lcnJvcign5pCc57Si5LiN5Yiw5pyJ5pWI55qE5puy55uu5Luj56CB44CCJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy8g5a+85Ye65oiR5Lus55qE5Ye95pWwCiAgICAgICAgICAgICAgICAgICAgdmFyIHduZCA9IGZyYW1lLmNvbnRlbnRXaW5kb3c7CiAgICAgICAgICAgICAgICAgICAgZXhwb3J0RnVuY3Rpb24oKGlkLCB0eXBlLCB1cmwsIHVuaykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBXYWl0XzguV2FpdFVudGlsKCdwYWdlX3NvdW5kX29iaicsICgpID0+IHJ1bGUuVXBkYXRlVXJsKHVybCwgdW5zYWZlV2luZG93LnBhZ2Vfc291bmRfb2JqLm5hbWUpKTsKICAgICAgICAgICAgICAgICAgICB9LCB3bmQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lQXM6ICdwbGF5X3NvdXJjZScKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAvLyDmiafooYzmjZXmjYnliLDnmoTlhYPntKAKICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHduZC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgICAgICAgICAgICAgICBzLnRleHRDb250ZW50ID0gdGFyZ2V0LnRleHQoKTsKICAgICAgICAgICAgICAgICAgICB3bmQuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDUuMS4xOyBOZXh1cyA2IEJ1aWxkL0xZWjI4RSkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzQ4LjAuMjU2NC4yMyBNb2JpbGUgU2FmYXJpLzUzNy4zNicKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QocmVxKTsKICAgICAgICB9LAogICAgICAgIFVwZGF0ZVVybCh1cmwsIG5hbWUpIHsKICAgICAgICAgICAgbGV0IHMgPSBFeHRlbnNpb25fMTEuQ29udGFpbnModXJsLCAnPycpID8gJyYnIDogJz8nOwogICAgICAgICAgICBsZXQgX3VybCA9IGAke3VybH0ke3N9YXR0bmFtZT0ke2VuY29kZVVSSUNvbXBvbmVudChuYW1lKX0ke0V4dGVuc2lvbl8xMS5HZXRFeHRlbnNpb25Gcm9tVXJsKHVybCl9YDsKICAgICAgICAgICAgcnVsZS5kbExpbmsKICAgICAgICAgICAgICAgIC5hdHRyKCdocmVmJywgcnVsZS5iZC5HZW5lcmF0ZVVyaSh1cmwsIG5hbWUgKyBFeHRlbnNpb25fMTEuR2V0RXh0ZW5zaW9uRnJvbVVybCh1cmwpKSkKICAgICAgICAgICAgICAgIC5hdHRyKCd0aXRsZScsIGDkuIvovb06ICR7bmFtZX1gKTsKICAgICAgICAgICAgLy8gaW5mbyhg5o2V5o2J5Yiw5LiL6L295Zyw5Z2AOiAke3VybH1gKTsKICAgICAgICB9CiAgICB9OwogICAgZXhwb3J0cy5SdWxlcyA9IFtydWxlXTsKfSk7CmRlZmluZSgic2l0ZS9tdXNpYy5rdWdvdSIsIFsicmVxdWlyZSIsICJleHBvcnRzIiwgImhlbHBlci9Mb2dnZXIiLCAiaGVscGVyL0Rvd25sb2FkZXIiLCAiaGVscGVyL1NjcmlwdENvbmZpZyIsICJoZWxwZXIvRXh0ZW5zaW9uIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBMb2dnZXJfOCwgRG93bmxvYWRlcl84LCBTY3JpcHRDb25maWdfNCwgRXh0ZW5zaW9uXzEyKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgY29uc3QgS3Vnb3VEb3dubG9hZEZyb250ID0gJ2h0dHBzOi8vaml4dW5tb2UuZ2l0aHViLmlvL2N1d2NsNGMva3Vnb3UtZGwnOwogICAgdmFyIGFwcCA9IG51bGw7CiAgICB2YXIgcnVsZSA9IHsKICAgICAgICBpZDogJ211c2ljLmt1Z291JywKICAgICAgICBzc2w6IGZhbHNlLAogICAgICAgIG5hbWU6ICfphbfni5fpn7PkuZAnLAogICAgICAgIGhvc3Q6ICd3ZWIua3Vnb3UuY29tJywKICAgICAgICBpbmNsdWRlU3ViSG9zdDogZmFsc2UsCiAgICAgICAgc3ViTW9kdWxlOiBmYWxzZSwKICAgICAgICBoaWRlOiAnI2FkdiwgLmp4LWhpZGUnLAogICAgICAgIGNzczogYAouZGlhbG9nLXNoYWRvdyB7CglkaXNwbGF5OiBmbGV4OwoJanVzdGlmeS1jb250ZW50OiBjZW50ZXI7CglhbGlnbi1pdGVtczogY2VudGVyOwoJcG9zaXRpb246IGZpeGVkOwoJbGVmdDogMDsKCXRvcDogMDsKCWhlaWdodDogMTAwJTsKCXdpZHRoOiAxMDAlOwoJYmFja2dyb3VuZDogcmdiYSgwLDAsMCwuMyk7Cgl6LWluZGV4OiAxMDA7Cn0KCi5kaWFsb2ctY29udGFpbmVyIHsKCW1pbi13aWR0aDogY2FsYyg3NjhweCArIDJlbSk7CgltaW4taGVpZ2h0OiAyMGVtOwoJcGFkZGluZzogMWVtOwoJYmFja2dyb3VuZDogI2ZmZjsKCWJveC1zaGFkb3c6IDJweCAycHggMnB4ICM2NjY7Cglib3JkZXI6IDFweCBzb2xpZCByZ2JhKDYsNiw2LC4zKTsKCXBvc2l0aW9uOiByZWxhdGl2ZTsKCXBhZGRpbmctdG9wOiAyLjVlbTsKfQoKLmRpYWxvZy10aXRsZS1iYXIgewoJcG9zaXRpb246IGFic29sdXRlOwoJbGVmdDogMDsKCXRvcDogMDsKCXBhZGRpbmc6IC40ZW07Cgl3aWR0aDogY2FsYygxMDAlIC0gLjhlbSk7Cglib3JkZXItYm90dG9tOiAxcHggc29saWQgd2hpdGU7CgliYWNrZ3JvdW5kOiAjMDBBN0YyOwoJY29sb3I6IHdoaXRlOwp9CgouZGlhbG9nLXRpdGxlLWJ0bnMgewoJZmxvYXQ6IHJpZ2h0Owp9CgouZGlhbG9nLXRpdGxlLWJ0bnMgPiAuZGlhbG9nLWJhci1idG4gewoJd2lkdGg6IDFlbTsKCWhlaWdodDogMWVtOwoJYm9yZGVyOiAxcHggc29saWQgd2hpdGU7Cgl0ZXh0LWFsaWduOiBjZW50ZXI7CglsaW5lLWhlaWdodDogMS4yOwoJcGFkZGluZzogMCAuNWVtOwoJbWFyZ2luLWxlZnQ6IC41ZW07CgljdXJzb3I6IHBvaW50ZXI7Cn0KCi5kaWFsb2ctY29udGVudCBpZnJhbWUgewoJaGVpZ2h0OiAzMGVtOwoJd2lkdGg6IDEwMCU7Cn0KYCwKICAgICAgICBiZDogbnVsbCwKICAgICAgICBvblN0YXJ0KCkgewogICAgICAgICAgICBydWxlLmJkID0gbmV3IERvd25sb2FkZXJfOC5Eb3dubG9hZGVyKCk7CiAgICAgICAgfSwKICAgICAgICBvbkJvZHkoKSB7CiAgICAgICAgICAgIC8vIOeBq+eLkOeLuOacieWFvOWuuemXrumimCwg5b6F5L+uCiAgICAgICAgICAgIGlmICghRXh0ZW5zaW9uXzEyLkNvbnRhaW5zKG5hdmlnYXRvci51c2VyQWdlbnQsICdGaXJlZm94JykpCiAgICAgICAgICAgICAgICBydWxlLkJ1aWxkRGlhbG9nKCk7CiAgICAgICAgfSwKICAgICAgICBCdWlsZERpYWxvZygpIHsKICAgICAgICAgICAgbGV0IGRvd25sb2FkZXIgPSAkKGA8ZGl2IGlkPSJqaXh1bi1kbCI+Cgk8ZGl2IGNsYXNzPSJkaWFsb2ctc2hhZG93IiB2LWJpbmQ6Y2xhc3M9InsgJ2p4LWhpZGUnOiBoaWRlV2luZG93IH0iPgoJCTxkaXYgY2xhc3M9ImRpYWxvZy1jb250YWluZXIiPgoJCQk8ZGl2IGNsYXNzPSJkaWFsb2ctdGl0bGUtYmFyIj4KCQkJCeS4i+i9veeql+WPowoKCQkJCTxkaXYgY2xhc3M9ImRpYWxvZy10aXRsZS1idG5zIj4KCQkJCQk8c3BhbiBjbGFzcz0iZGlhbG9nLWJhci1idG4iIHYtb246Y2xpY2s9InRvZ2dsZUZyYW1lIj7nrqE8L3NwYW4+CgkJCQkJPHNwYW4gY2xhc3M9ImRpYWxvZy1iYXItYnRuIiB2LW9uOmNsaWNrPSJoaWRlIj7lhbM8L3NwYW4+CgkJCQk8L2Rpdj4KCQkJPC9kaXY+CgoJCQk8ZGl2IGNsYXNzPSJkaWFsb2ctY29udGVudCI+CgkJCQk8ZGl2IHYtYmluZDpjbGFzcz0ieyAnangtaGlkZSc6IGhpZGVNc2cgfSI+e3sgbXNnIH19PC9kaXY+CgkJCQk8aWZyYW1lIHYtZWw6ZnJhbWUtZGwtZGlhbG9nIHYtYmluZDpjbGFzcz0ieyAnangtaGlkZSc6IG1vZGUgIT0gMSB9IiBzcmM9IiR7S3Vnb3VEb3dubG9hZEZyb250fSI+PC9pZnJhbWU+CgkJCQk8aWZyYW1lIHYtZWw6ZnJhbWUtZGwtbWFuYWdlciB2LWJpbmQ6Y2xhc3M9InsgJ2p4LWhpZGUnOiBtb2RlICE9IDIgfSIgIHNyYz0iJHtLdWdvdURvd25sb2FkRnJvbnR9L2RsLmh0bWwiPjwvaWZyYW1lPgoJCQk8L2Rpdj4KCQk8L2Rpdj4KCTwvZGl2Pgo8L2Rpdj5gKTsKICAgICAgICAgICAgZG93bmxvYWRlci5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTsKICAgICAgICAgICAgLy8gUmVxdWlyZSBWdWVKUyBmcm9tIHJlc291cmNlLgogICAgICAgICAgICBsZXQgdnVlTG9hZGVyID0gbmV3IEZ1bmN0aW9uKCd3aW5kb3cnLCBHTV9nZXRSZXNvdXJjZVRleHQoJ1Z1ZUpzJykgKyAnXG47IHJldHVybiB3aW5kb3cuVnVlOycpOwogICAgICAgICAgICBsZXQgVnVlID0gdnVlTG9hZGVyKHVuc2FmZVdpbmRvdyk7CiAgICAgICAgICAgIGFwcCA9IG5ldyBWdWUoewogICAgICAgICAgICAgICAgZWw6IGRvd25sb2FkZXJbMF0sCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgbXNnOiAn5q2j5Zyo6I635Y+W55u45YWz5pWw5o2uLi4uJywKICAgICAgICAgICAgICAgICAgICBoaWRlTXNnOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBtb2RlOiAwLAogICAgICAgICAgICAgICAgICAgIGhpZGVXaW5kb3c6IGZhbHNlCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbWV0aG9kczogewogICAgICAgICAgICAgICAgICAgIGluaXQoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5oaWRlV2luZG93ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHRvZ2dsZUZyYW1lKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXBwLm1vZGUgPT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLm1vZGUgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLm1vZGUgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBoaWRlKCkgewogICAgICAgICAgICAgICAgICAgICAgICBhcHAuaGlkZVdpbmRvdyA9ICFhcHAuaGlkZVdpbmRvdzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBhcHAuaW5pdCgpOwogICAgICAgICAgICB2YXIgYWN0aW9uRGxEaWFsb2cgPSBbJ3NldCcsICdjbGVhciddOwogICAgICAgICAgICB2YXIgYWN0aW9uRGxNYW5hZ2VyID0gWydhZGQnXTsKICAgICAgICAgICAgZnVuY3Rpb24gcG9zdChhY3Rpb24sIGRhdGEpIHsKICAgICAgICAgICAgICAgIHZhciBmcmFtZSA9IGFjdGlvbkRsRGlhbG9nLmluZGV4T2YoYWN0aW9uKSAhPSAtMSA/IGFwcC4kZWxzLmZyYW1lRGxEaWFsb2cgOiBhcHAuJGVscy5mcmFtZURsTWFuYWdlcjsKICAgICAgICAgICAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sCiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkobXNnKSwgJyonKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyDojrflj5bpn7PotKjkv6Hmga8KICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlRG93bmxvYWQoc29uZ3MpIHsKICAgICAgICAgICAgICAgIHBvc3QoJ2NsZWFyJyk7CiAgICAgICAgICAgICAgICBhcHAuaGlkZU1zZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgYXBwLm1vZGUgPSAwOyAvLyBoaWRlVGhlbQogICAgICAgICAgICAgICAgYXBwLmhpZGVXaW5kb3cgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHZhciByZXNvdXJjZSA9IEpTT04ucGFyc2Uoc29uZ3MpLm1hcCgoc29uZykgPT4gKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYXVkaW8nLAogICAgICAgICAgICAgICAgICAgIGlkOiAwLAogICAgICAgICAgICAgICAgICAgIGhhc2g6IHNvbmcuSGFzaAogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgdmFyIHBheWxvYWQgPSB7CiAgICAgICAgICAgICAgICAgICAgInVzZXJpZCI6IDAsCiAgICAgICAgICAgICAgICAgICAgInRva2VuIjogIiIsCiAgICAgICAgICAgICAgICAgICAgInZpcCI6IDEsCiAgICAgICAgICAgICAgICAgICAgImJlaGF2aW9yIjogImRvd25sb2FkIiwKICAgICAgICAgICAgICAgICAgICAicmVsYXRlIjogMSwKICAgICAgICAgICAgICAgICAgICAicmVzb3VyY2UiOiByZXNvdXJjZSwKICAgICAgICAgICAgICAgICAgICAiYXBwaWQiOiAxMDAxLAogICAgICAgICAgICAgICAgICAgICJjbGllbnR2ZXIiOiAiODAzMSIsCiAgICAgICAgICAgICAgICAgICAgInNvdXJjZSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgIm1vZHVsZSI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJpZCI6IDAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgICAgIHVybDogImh0dHA6Ly9tZWRpYS5zdG9yZS5rdWdvdS5jb20vdjEvZ2V0X3Jlc19wcml2aWxlZ2UiLAogICAgICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLAogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICBwb3N0KCdzZXQnLCBKU09OLnBhcnNlKHJlc3BvbnNlLnJlc3BvbnNlVGV4dCkpOwogICAgICAgICAgICAgICAgICAgICAgICBhcHAuaGlkZU1zZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5tb2RlID0gMTsgLy8g5bGV546w5LiL6L29566h55CG55WM6Z2iCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBvbmVycm9yOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfmjqXlj6Pojrflj5blpLHotKUsIOivt+eojeWQjumHjeivlSEnKTsKICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmhpZGVXaW5kb3cgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBsb29wZXIgPSBuZXcgSW50ZXJ2YWxMb29wKFtdLCBwcm9jX2hhc2gsIDUwMCk7CiAgICAgICAgICAgIGxvb3Blci5sb29wKCk7CiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgb25NZXNzYWdlLCBmYWxzZSk7CiAgICAgICAgICAgIGZ1bmN0aW9uIG9uTWVzc2FnZShlKSB7CiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoZS5kYXRhKTsKICAgICAgICAgICAgICAgIGlmIChkYXRhLmFjdGlvbiA9PSAnY2FuY2VsJykgewogICAgICAgICAgICAgICAgICAgIGFwcC5oaWRlV2luZG93ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuYWN0aW9uID09ICdkb3dubG9hZCcpIHsKICAgICAgICAgICAgICAgICAgICBhcHAubW9kZSA9IDI7CiAgICAgICAgICAgICAgICAgICAgbG9vcGVyLmFkZC5hcHBseShsb29wZXIsIGRhdGEuZGF0YSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBMb2dnZXJfOC5lcnJvcignVW5kZWZpbmVkIGFjdGlvbjogJyArIGRhdGEuYWN0aW9uKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVfZGwoc29uZykgewogICAgICAgICAgICAgICAgdmFyIGZpbGUgPSBzb25nLmZpbGVOYW1lICsgJy4nICsgc29uZy5leHROYW1lOwogICAgICAgICAgICAgICAgdmFyIHVybCA9IHNvbmcudXJsOwogICAgICAgICAgICAgICAgcG9zdCgnYWRkJywgc29uZyk7CiAgICAgICAgICAgICAgICBpZiAoU2NyaXB0Q29uZmlnXzQuQ29uZmlnLmRVcmlUeXBlID09IFNjcmlwdENvbmZpZ180LlVyaVR5cGUuQXJpYSkgewogICAgICAgICAgICAgICAgICAgIHJ1bGUuYmQuQWRkRG93bmxvYWQodXJsLCBmaWxlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBwcm9jX2hhc2gobmV4dCwgaGFzaCkgewogICAgICAgICAgICAgICAgaGFzaCA9IGhhc2gudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgIHZhciBrZXkgPSBDcnlwdG9KUy5NRDUoaGFzaCArICdrZ2Nsb3VkJykudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgICAgIHVybDogJ2h0dHA6Ly90cmFja2VyY2RuLmt1Z291LmNvbS9pLz9jbWQ9NCZoYXNoPScgKyBoYXNoICsgJyZrZXk9JyArIGtleSArICcmcGlkPTEmZm9yY2VEb3duPTAmdmlwPTEnLAogICAgICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb25nID0gSlNPTi5wYXJzZShyZXNwb25zZS5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVfZGwoc29uZyk7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgTG9nZ2VyXzguZXJyb3IoJ0Vycm9yIHdoaWxlIGZldGNoaW5nIGRhdGEgZm9yICVzJywgaGFzaCk7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvKiDlr7zlh7rlh73mlbAgKi8KICAgICAgICAgICAgZXhwb3J0RnVuY3Rpb24oaGFuZGxlRG93bmxvYWQsIHVuc2FmZVdpbmRvdywgewogICAgICAgICAgICAgICAgZGVmaW5lQXM6ICJkbF9qaXh1biIKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHVuc2FmZUV4ZWMoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgd2luZG93LmRvd25Mb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kbF9qaXh1bi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9OwogICAgZXhwb3J0cy5SdWxlcyA9IFtydWxlXTsKfSk7CmRlZmluZSgiUnVsZXMiLCBbInJlcXVpcmUiLCAiZXhwb3J0cyIsICJTaXRlUnVsZSIsICJzaXRlL0FBLkNvbmZpZyIsICJzaXRlL2RsLjEyMzU2NCIsICJzaXRlL2RsLjV4ZmlsZSIsICJzaXRlL2RsLmJhaWR1IiwgInNpdGUvZGwuaG93ZmlsZSIsICJzaXRlL2RsLmprcGFuIiwgInNpdGUvZGwubmFtaXBhbi5jYyIsICJzaXRlL2RsLnBocGRpc2siLCAic2l0ZS9kbC54dWl0ZSIsICJzaXRlL2RsLnlpbXVoZSIsICJzaXRlL2ZtLmRvdWJhbiIsICJzaXRlL2ZtLm1vZSIsICJzaXRlL211c2ljLjE2MyIsICJzaXRlL211c2ljLjF0aW5nIiwgInNpdGUvbXVzaWMuNTYiLCAic2l0ZS9tdXNpYy5lY2hvIiwgInNpdGUvbXVzaWMua3Vnb3UiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIFNpdGVSdWxlXzEsIGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgsIGksIGosIGssIGwsIG0sIG4sIG8sIHAsIHEpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICBhLlJ1bGVzLmZvckVhY2goU2l0ZVJ1bGVfMS5BZGQpOwogICAgYi5SdWxlcy5mb3JFYWNoKFNpdGVSdWxlXzEuQWRkKTsKICAgIGMuUnVsZXMuZm9yRWFjaChTaXRlUnVsZV8xLkFkZCk7CiAgICBkLlJ1bGVzLmZvckVhY2goU2l0ZVJ1bGVfMS5BZGQpOwogICAgZS5SdWxlcy5mb3JFYWNoKFNpdGVSdWxlXzEuQWRkKTsKICAgIGYuUnVsZXMuZm9yRWFjaChTaXRlUnVsZV8xLkFkZCk7CiAgICBnLlJ1bGVzLmZvckVhY2goU2l0ZVJ1bGVfMS5BZGQpOwogICAgaC5SdWxlcy5mb3JFYWNoKFNpdGVSdWxlXzEuQWRkKTsKICAgIGkuUnVsZXMuZm9yRWFjaChTaXRlUnVsZV8xLkFkZCk7CiAgICBqLlJ1bGVzLmZvckVhY2goU2l0ZVJ1bGVfMS5BZGQpOwogICAgay5SdWxlcy5mb3JFYWNoKFNpdGVSdWxlXzEuQWRkKTsKICAgIGwuUnVsZXMuZm9yRWFjaChTaXRlUnVsZV8xLkFkZCk7CiAgICBtLlJ1bGVzLmZvckVhY2goU2l0ZVJ1bGVfMS5BZGQpOwogICAgbi5SdWxlcy5mb3JFYWNoKFNpdGVSdWxlXzEuQWRkKTsKICAgIG8uUnVsZXMuZm9yRWFjaChTaXRlUnVsZV8xLkFkZCk7CiAgICBwLlJ1bGVzLmZvckVhY2goU2l0ZVJ1bGVfMS5BZGQpOwogICAgcS5SdWxlcy5mb3JFYWNoKFNpdGVSdWxlXzEuQWRkKTsKfSk7CmRlZmluZSgiRW50cnlQb2ludCIsIFsicmVxdWlyZSIsICJleHBvcnRzIiwgImhlbHBlci9TY3JpcHQiLCAiaGVscGVyL0NvbnN0YW50cyIsICJoZWxwZXIvU2NyaXB0Q29uZmlnIiwgImhlbHBlci9RdWVyeVN0cmluZyIsICJoZWxwZXIvTG9nZ2VyIiwgIlNpdGVSdWxlIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBTY3JpcHRfOSwgQ29uc3RhbnRzXzQsIFNjcmlwdENvbmZpZ181LCBRdWVyeVN0cmluZ18xLCBMb2dnZXJfOSwgU2l0ZVJ1bGVfMikgewogICAgInVzZSBzdHJpY3QiOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICAgIHZhciAkX0dFVCA9IFF1ZXJ5U3RyaW5nXzEuUGFyc2UoQ29uc3RhbnRzXzQuY3VycmVudFVybCk7CiAgICBpZiAoU2NyaXB0Q29uZmlnXzUuQ29uZmlnLmJVc2VDdXN0b21SdWxlcykgewogICAgICAgIHZhciBjdXN0b21SdWxlcyA9IFtdOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGN1c3RvbVJ1bGVzID0gZXZhbChgWyR7U2NyaXB0Q29uZmlnXzUuQ29uZmlnLnNDdXN0b21SdWxlfV1gKTsKICAgICAgICAgICAgY3VzdG9tUnVsZXMuZm9yRWFjaCgocnVsZSkgPT4gewogICAgICAgICAgICAgICAgU2l0ZVJ1bGVfMi5TaXRlcy5wdXNoKHJ1bGUpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGV4KSB7CiAgICAgICAgICAgIExvZ2dlcl85LmVycm9yKGDop6PmnpDoh6rlrprkuYnop4TliJnlj5HnlJ/plJnor686ICR7ZXgubWVzc2FnZX1gKTsKICAgICAgICB9CiAgICB9CiAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kKGDphY3nva4gJHtTY3JpcHRfOS5TY3JpcHQuTmFtZX1gLCAoKSA9PiB7CiAgICAgICAgR01fb3BlbkluVGFiKFNjcmlwdF85LlNjcmlwdC5Db25maWcsIGZhbHNlKTsKICAgIH0pOwogICAgU2l0ZVJ1bGVfMi5GaXJlRXZlbnQoJ3N0YXJ0Jyk7CiAgICAkKCgpID0+IHsKICAgICAgICBTaXRlUnVsZV8yLkZpcmVFdmVudCgnYm9keScpOwogICAgfSk7Cn0pOwo="},{"name":"AntiAdware","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["http*://*180upload.com/*","http*://*4upfiles.com/*","http*://*get*.adobe.com/*flashplayer/*","http*://*get*.adobe.com/*reader/*","http*://*afterdawn.com/software/*","http*://*akafile.com/akago.php","http*://*chip.de/downloads/*","http*://*clicknupload.com/*","http*://*cloudyvideos.com/*","http*://*coolrom.com/*/*","http*://*clipconverter.cc/download/*","http*://*dailyuploads.net/*","http*://*datafilehost.com/d/*","http*://*davvas.com/*","http*://*d-h.st/*","http*://*download.cnet.com/*","http*://*telecharger.cnet.com/*","http*://*descargar.cnet.com/*","http*://*de.download.cnet.com/*","http*://*filefactory.com/file/*","http*://*filescdn.com/*","http*://*filehippo.com/*download*","http*://*freewarefiles.com/downloads_counter.php*","http*://*google.*/earth/download/ge/agree.html","http*://*hugefiles.net/*","http*://*hulkload.com/*","http*://*kingfiles.net/*","http*://*letitbit.net/download/*","http*://*loveroms.com/*","http*://*up.media1fire.com/*","http*://*mightyupload.com/*","http*://*mp3fil.*/get/*","http*://*mp3juices.to/*","http*://*mp3olimp.net/*","http*://*mp3olimpz.com/*","http*://*opensubtitles.org/*/subtitles/*","http*://*revclouds.com/*","http*://*romhustler.net/download/*","http*://*romhustler.net/rom/*","http*://*secureupload.eu/*","http*://*sendspace.com/file/*","http*://*sharebeast.com/*","http*://*shared.com/*","http*://*softm8.com*","http*://*.softonic.*","http*://*sourceforge.net/*","http*://*tusfiles.net/*","http*://*unlimitzone.com/*","http*://*uploading.com/*","http*://*uplod.ws/*","http*://*uploads.to/*","http*://*uptobox.com/*","http*://*userscdn.com/*","http*://*ziddu.com/downloadfile/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1492505332306},"enabled":false,"position":12,"file_url":"https://greasyfork.org/scripts/4294-antiadware/code/AntiAdware.user.js","uuid":"d6306d94-cb9f-48c7-92b3-9f6d851273cd","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgQW50aUFkd2FyZQovLyBAbmFtZTpmciBBbnRpQWR3YXJlCi8vIEBuYW1lOmRlIEFudGlBZHdhcmUKLy8gQG5hbWU6emgtVFcgQW50aUFkd2FyZQovLyBAbmFtZTp6aC1DTiBBbnRpQWR3YXJlCi8vIEBhdXRob3Igbm9uYW1lMTIwCi8vIEBuYW1lc3BhY2UgSGFuZHlVc2Vyc2NyaXB0cwovLyBAaWNvbiBodHRwczovL2kuaW1ndXIuY29tL3RxN1BKcjAucG5nCi8vIEBkZXNjcmlwdGlvbiBSZW1vdmUgZm9yY2VkIGRvd25sb2FkIGFjY2VsZXJhdG9ycywgbWFuYWdlcnMsIGFuZCBhZHdhcmUgb24gc3VwcG9ydGVkIHdlYnNpdGVzCi8vIEBkZXNjcmlwdGlvbjpmciDDiXZpdGV6IGxlcyBhcHBsaWNhdGlvbnMgaW5kw6lzaXJhYmxlcyBsb3JzIGRlcyB0w6lsw6ljaGFyZ2VtZW50cyBzdXIgZGUgbm9tYnJldXggc2l0ZXMgYXZlYyBBbnRpQWR3YXJlICEgCi8vIEBkZXNjcmlwdGlvbjpkZSBNaXQgQW50aUFkd2FyZSB2ZXJtZWlkZXN0IGR1IGF1ZiB6YWhscmVpY2hlbiBXZWJzZWl0ZW4gZGVuIHZlcnNlaGVudGxpY2hlbiBEb3dubG9hZCB2b24gdW5lcnfDvG5zY2h0ZW4gUHJvZ3JhbW1lbgovLyBAZGVzY3JpcHRpb246emgtVFcgQW50aUFkd2FyZSwg6K6T5L2g6YG/5YWN5Zyo6Kix5aSa57ay56uZ5LiK5oSP5aSW5LiL6LyJ5Yiw5buj5ZGK6Luf6auULgovLyBAZGVzY3JpcHRpb246emgtQ04gQW50aUFkd2FyZSwg6K6p5L2g6YG/5YWN5Zyo6K645aSa572R56uZ5LiK5oSP5aSW5LiL6L295Yiw5bm/5ZGK6L2v5L2TLgovLyBAdmVyc2lvbiAxLjQxLjQKLy8gQGxpY2Vuc2UgQ3JlYXRpdmUgQ29tbW9ucyBCWS1OQy1TQQoKLy8galF1ZXJ5IGRlcGVuZGVuY3k7IGFuIG9mZmxpbmUgdmVyc2lvbiBvZiB0aGlzIGlzIGluY2x1ZGVkIGluIHRoZSBzY3JpcHQgaW4gY2FzZSBpdCBnb2VzIGRvd24KLy8gQHJlcXVpcmUgaHR0cDovL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktMi4wLjMubWluLmpzCgovLyBAaW5jbHVkZSBodHRwKjovLyoxODB1cGxvYWQuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qNHVwZmlsZXMuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qZ2V0Ki5hZG9iZS5jb20vKmZsYXNocGxheWVyLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qZ2V0Ki5hZG9iZS5jb20vKnJlYWRlci8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmFmdGVyZGF3bi5jb20vc29mdHdhcmUvKgovLyBAaW5jbHVkZSBodHRwKjovLypha2FmaWxlLmNvbS9ha2Fnby5waHAKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qY2hpcC5kZS9kb3dubG9hZHMvKgovLyBAaW5jbHVkZSBodHRwKjovLypjbGlja251cGxvYWQuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qY2xvdWR5dmlkZW9zLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmNvb2xyb20uY29tLyovKgovLyBAaW5jbHVkZSBodHRwKjovLypjbGlwY29udmVydGVyLmNjL2Rvd25sb2FkLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qZGFpbHl1cGxvYWRzLm5ldC8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmRhdGFmaWxlaG9zdC5jb20vZC8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmRhdnZhcy5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLypkLWguc3QvKgovLyBAaW5jbHVkZSBodHRwKjovLypkb3dubG9hZC5jbmV0LmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnRlbGVjaGFyZ2VyLmNuZXQuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qZGVzY2FyZ2FyLmNuZXQuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qZGUuZG93bmxvYWQuY25ldC5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLypmaWxlZmFjdG9yeS5jb20vZmlsZS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmZpbGVzY2RuLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmZpbGVoaXBwby5jb20vKmRvd25sb2FkKgovLyBAaW5jbHVkZSBodHRwKjovLypmcmVld2FyZWZpbGVzLmNvbS9kb3dubG9hZHNfY291bnRlci5waHAqCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmdvb2dsZS4qL2VhcnRoL2Rvd25sb2FkL2dlL2FncmVlLmh0bWwKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qaHVnZWZpbGVzLm5ldC8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmh1bGtsb2FkLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmtpbmdmaWxlcy5uZXQvKgovLyBAaW5jbHVkZSBodHRwKjovLypsZXRpdGJpdC5uZXQvZG93bmxvYWQvKgovLyBAaW5jbHVkZSBodHRwKjovLypsb3Zlcm9tcy5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLyp1cC5tZWRpYTFmaXJlLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKm1pZ2h0eXVwbG9hZC5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLyptcDNmaWwuKi9nZXQvKgovLyBAaW5jbHVkZSBodHRwKjovLyptcDNqdWljZXMudG8vKgovLyBAaW5jbHVkZSBodHRwKjovLyptcDNvbGltcC5uZXQvKgovLyBAaW5jbHVkZSBodHRwKjovLyptcDNvbGltcHouY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qb3BlbnN1YnRpdGxlcy5vcmcvKi9zdWJ0aXRsZXMvKgovLyBAaW5jbHVkZSBodHRwKjovLypyZXZjbG91ZHMuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qcm9taHVzdGxlci5uZXQvZG93bmxvYWQvKgovLyBAaW5jbHVkZSBodHRwKjovLypyb21odXN0bGVyLm5ldC9yb20vKgovLyBAaW5jbHVkZSBodHRwKjovLypzZWN1cmV1cGxvYWQuZXUvKgovLyBAaW5jbHVkZSBodHRwKjovLypzZW5kc3BhY2UuY29tL2ZpbGUvKgovLyBAaW5jbHVkZSBodHRwKjovLypzaGFyZWJlYXN0LmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnNoYXJlZC5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLypzb2Z0bTguY29tKgovLyBAaW5jbHVkZSBodHRwKjovLyouc29mdG9uaWMuKgovLyBAaW5jbHVkZSBodHRwKjovLypzb3VyY2Vmb3JnZS5uZXQvKgovLyBAaW5jbHVkZSBodHRwKjovLyp0dXNmaWxlcy5uZXQvKgovLyBAaW5jbHVkZSBodHRwKjovLyp1bmxpbWl0em9uZS5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLyp1cGxvYWRpbmcuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qdXBsb2Qud3MvKgovLyBAaW5jbHVkZSBodHRwKjovLyp1cGxvYWRzLnRvLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qdXB0b2JveC5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLyp1c2Vyc2Nkbi5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLyp6aWRkdS5jb20vZG93bmxvYWRmaWxlLyoKCi8vIFdlIGRvbid0IHVzZSB0aGlzIG1ldGhvZCwgaG93ZXZlciBhIHNpZGUgZWZmZWN0IG9mIGl0IGlzIHRoYXQgaXQgcmVzdG9yZXMgdGhlIEdyZWFzZW1vbmtleSBzYW5kYm94LCBhdm9pZGluZyBqUXVlcnkgY29uZmxpY3RzCi8vIEBncmFudCBHTV9hZGRTdHlsZQoKLy8gQGdyYW50IHVuc2FmZVdpbmRvdwoKLy8gQGhvbWVwYWdlVVJMIGh0dHBzOi8vZ2l0aHViLmNvbS9IYW5keVVzZXJzY3JpcHRzL0FudGlBZHdhcmUjcmVhZG1lCi8vIEBzdXBwb3J0VVJMIGh0dHBzOi8vZ2l0aHViLmNvbS9IYW5keVVzZXJzY3JpcHRzL0FudGlBZHdhcmUvaXNzdWVzCgoKLy8gQHJ1bi1hdCBkb2N1bWVudC1zdGFydAovLyA9PS9Vc2VyU2NyaXB0PT0KCnZvaWQKZnVuY3Rpb24gKCkgewogICAgLy8gSWYgdHJ1ZSwgZGlzcGxheXMgbG9nIGluIHRoZSBjb25zb2xlCiAgICB2YXIgb19kZWJ1ZyA9IGZhbHNlCgogICAgLy8gUnVsZXMgaW5mb3JtaW5nIHdoYXQgdG8gZG8gb24gZWFjaCBzdXBwb3J0ZWQgd2Vic2l0ZQogICAgdmFyIGFkd2FyZVJ1bGVzID0gewogICAgICAgIGExODB1cGxvYWQ6IHsKICAgICAgICAgICAgaG9zdDogWycxODB1cGxvYWQuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3VzZV9pbnN0YWxsZXInXSwKICAgICAgICAgICAgaGlkZTogWycjdXNlX2luc3RhbGxlcicsICdsYWJlbFtmb3I9dXNlX2luc3RhbGxlcl0nXQogICAgICAgIH0sCiAgICAgICAgYTR1cGZpbGVzOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnNHVwZmlsZXMuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3VzZV9kb3dubG9hZGVyJ10sCiAgICAgICAgICAgIGhpZGU6IFsnbGFiZWxbZm9yPXVzZV9kb3dubG9hZGVyXSddCiAgICAgICAgfSwKICAgICAgICBBZG9iZTogewogICAgICAgICAgICBob3N0OiBbJ2dldFxcZD8uYWRvYmUuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI29mZmVyQ2hlY2tib3gnLCcjb2ZmZXJDaGVja2JveDEnLCcjb2ZmZXJDaGVja2JveDInLCcjb2ZmZXJDaGVja2JveDMnLCcjb2ZmZXJDaGVja2JveDQnXSwKICAgICAgICAgICAgaGlkZTogWycuQ29udGVudENvbHVtbi5Db250ZW50Q29sdW1uLTInXQogICAgICAgIH0sCiAgICAgICAgQWZ0ZXJkYXduOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnYWZ0ZXJkYXduLmNvbSddLAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIC8vIERvd25sb2FkIHBhZ2UgZGlyZWN0bHkgYWNjZXNzZWQgZnJvbSBhbm90aGVyIHdlYnNpdGUKICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5sb2NhdGlvbi5ocmVmLmNvbnRhaW5zKCdpbnN0YWxsZXI9MScpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUmVkaXJlY3QgdG8gdGhlIHBhZ2Ugd2l0aG91dCB0aGUgZG93bmxvYWQgbWFuYWdlcgogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uLnJlcGxhY2UoZG9jdW1lbnQubG9jYXRpb24uaHJlZi5yZXBsYWNlKCdpbnN0YWxsZXI9MScsICdpbnN0YWxsZXI9MCcpKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIFNvZnR3YXJlIHBhZ2UKICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWU9aW5zdGFsbGVyXScpLnByb3AoJ3ZhbHVlJywgJzAnKQogICAgICAgICAgICAgICAgdmFyIGRvd25sb2FkQnV0dG9uID0gJCgnI2Rvd25sb2FkLW1haW4tYnV0dG9uJykKICAgICAgICAgICAgICAgIHZhciBhZHdhcmVMaW5rID0gZG93bmxvYWRCdXR0b24ucHJvcCgnaHJlZicpCiAgICAgICAgICAgICAgICBhZHdhcmVMaW5rID0gYWR3YXJlTGluay5yZXBsYWNlKCdpbnN0YWxsZXI9MScsICdpbnN0YWxsZXI9MCcpCiAgICAgICAgICAgICAgICBkb3dubG9hZEJ1dHRvbi5wcm9wKCdocmVmJywgYWR3YXJlTGluaykKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgQWthZmlsZTogewogICAgICAgICAgICBob3N0OiBbJ2FrYWZpbGUuY29tJ10sCiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHJlYWwgZG93bmxvYWQgbGluayBpbiB0aGUgY29tbWVudHMgc2VjdGlvbiBhbmQgcmVwbGFjZSB0aGUgZmFrZSBvbmUgd2l0aCB0aGlzIChpZiB0aGUgZmFrZSBpcyBub3QgYSB2YWxpZCBsaW5rKQogICAgICAgICAgICBleGVjOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbGluayBpcyBhbHJlYWR5IGEgdmFsaWQgb25lIHdlIGRvbid0IHJlcGxhY2UgaXQKICAgICAgICAgICAgICAgIHZhciB0ZXN0SG9zdCA9IG5ldyBSZWdFeHAoImFpay53b2xmdXAubmV0IiwgJ2knKQogICAgICAgICAgICAgICAgaWYgKHRlc3RIb3N0LnRlc3QoJCgiI2Rvd25sb2FkMSIpLmF0dHIoImhyZWYiKSkpIHJldHVybgogICAgICAgICAgICAgICAgLy8gR2V0IGNvbW1lbnQgc2VjdGlvbiBhbmQgZW51bWVyYXRlIGVhY2ggZWxlbWVudCBoYXZpbmcgdGhlIHJpZ2h0IGlkLCBjaGVjayBpZiBpdCdzIGEgcHJvcGVyIGRvd25sb2FkIGxpbmsKICAgICAgICAgICAgICAgIHZhciBjb21tZW50cyA9ICQoJyNjb250aW51ZScpLmNvbW1lbnRzKCkuY2hpbGRyZW4oJyNkb3dubG9hZDEnKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGVzdEhvc3QudGVzdCgkKHRoaXMpLmF0dHIoImhyZWYiKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgiI2Rvd25sb2FkMSIpLmF0dHIoImhyZWYiLCAkKHRoaXMpLmF0dHIoImhyZWYiKSkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIENoaXA6IHsKICAgICAgICAgICAgaG9zdDogWydjaGlwLmRlJ10sCiAgICAgICAgICAgIGhpZGU6IFsnLmRvd25sb2FkX2J1dHRvbiddLAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBkbCA9ICQoJy5NYW51YWxJbnN0YWxsTGluaycpLnByb3AoJ2hyZWYnKQogICAgICAgICAgICAgICAgdmFyIGJ0biA9ICQoJy5kbC1idG4tZGVmYXVsdCAuRG93bmxvYWQtQnV0dG9uJykKCiAgICAgICAgICAgICAgICBidG4ucHJvcCgnaHJlZicsIGRsKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBDbGlja251cGxvYWQ6IHsKICAgICAgICAgICAgaG9zdDogWydjbGlja251cGxvYWQuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2RfYWNjX2NoZWNrYm94J10sCiAgICAgICAgICAgIGhpZGU6IFsnI3dfZG93bmxvYWQnLCAnI2RfYWNjJ10KICAgICAgICB9LAogICAgICAgIENsaXBDb252ZXJ0ZXI6IHsKICAgICAgICAJaG9zdDogWydjbGlwY29udmVydGVyLmNjJ10sCiAgICAgICAgCXVuY2hlY2s6IFsnI2RsY3AnXSwKICAgICAgICAJaGlkZTogWydkaXZbc3R5bGU9IndpZHRoOiAzNDBweDttYXJnaW4tbGVmdDogMjVweDttYXJnaW4tdG9wOiA3cHg7Il0nXQogICAgICAgIH0sCiAgICAgICAgQ2xvdWR5VmlkZW9zOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnY2xvdWR5dmlkZW9zLmNvbSddLAogICAgICAgICAgICB1bmNoZWNrOiBbJyN1c2UtbWFuYWdlciddLAogICAgICAgICAgICBoaWRlOiBbJyNkb3dubG9hZC1ib3ggPiBsYWJlbCddCiAgICAgICAgfSwKICAgICAgICBDb29scm9tOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnY29vbHJvbS5jb20nXSwKICAgICAgICAgICAgaGlkZTogWyd0YWJsZVthbGlnbj0iY2VudGVyIl1bd2lkdGg9IjMwMCJdJ10sCiAgICAgICAgICAgIGV4ZWM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIGRvd25sb2FkQnV0dG9uID0gJCgnLmRvd25sb2FkX2xpbmsnKQogICAgICAgICAgICAgICAgdmFyIGRvd25sb2FkSWQgPSBkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpWzNdCgogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkb3dubG9hZEJ1dHRvbiAhPSAndW5kZWZpbmVkJyAmJiBkb3dubG9hZElkLm1hdGNoKC9eXGQrJC8pKSB7CiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRCdXR0b24ucHJvcCgnaHJlZicsICdodHRwOi8vY29vbHJvbS5jb20vZGxwb3AucGhwP2lkPScgKyBkb3dubG9hZElkKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIEF2b2lkIHRoZSBIVE1MIHBhZ2UgdG8gYmUgdHJpZ2dlcmVkIGFzIGEgZG93bmxvYWQKICAgICAgICAgICAgICAgIGRvd25sb2FkQnV0dG9uLnJlbW92ZUF0dHIoJ2Rvd25sb2FkJykKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgRGFpbHlVcGxvYWRzOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnZGFpbHl1cGxvYWRzLm5ldCddLAogICAgICAgICAgICBoaWRlOiBbJ2xhYmVsW3N0eWxlPSJmb250LXNpemU6eC1zbWFsbCJdJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2Noa0lzQWRkJ10KICAgICAgICB9LAogICAgICAgIERhdGFmaWxlaG9zdDogewogICAgICAgICAgICBob3N0OiBbJ2RhdGFmaWxlaG9zdC5jb20nXSwKICAgICAgICAgICAgaGlkZTogWydmb3JtW25hbWU9Y2JmXSddLAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBpZCA9IGRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lLm1hdGNoKC9eXC9kXC8oXHcrKSQvKVsxXQogICAgICAgICAgICAgICAgLy8gRGF0YUZpbGVIb3N0IGRvZXNuJ3QgYWxsb3cgdG8gZG93bmxvYWQgdXNpbmcgSFRUUFMKICAgICAgICAgICAgICAgIHZhciBhZHdhcmVsZXNzTGluayA9ICdodHRwOicgKyAnLy8nICsgZG9jdW1lbnQubG9jYXRpb24uaG9zdG5hbWUgKyAnL2dldC5waHA/ZmlsZT0nICsgaWQKCiAgICAgICAgICAgICAgICB2YXIgbiA9ICQoJyNkbCA+IGEnKS5jbG9uZSgpCgogICAgICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGUgYWR3YXJlIGxpbmsKICAgICAgICAgICAgICAgIG4ucHJvcCgnaHJlZicsIGFkd2FyZWxlc3NMaW5rKQoKICAgICAgICAgICAgICAgIC8vIEF2b2lkIHJlZGlyZWN0aW9uIHRvIGFkd2FyZQogICAgICAgICAgICAgICAgJCgnI2RsJykucmVwbGFjZVdpdGgobik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIERhdnZhczogewogICAgICAgICAgICBob3N0OiBbJ2RhdnZhcy5jb20nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjY2hsaW5rJ10sCiAgICAgICAgICAgIGhpZGU6IFsnbGFiZWxbZm9yPWNobGlua10nLCAnI2NobGluayddLAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBidG4gPSAkKCcjYnRuX2Rvd25sb2FkJykKICAgICAgICAgICAgICAgIGlmICghZXhpc3RzKGJ0bikpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJ0bi5yZW1vdmVBdHRyKCdvbmNsaWNrJykKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgRGV2SG9zdDogewogICAgICAgICAgICBob3N0OiBbJ2QtaC5zdCddLAogICAgICAgICAgICB1bmNoZWNrOiBbJyNkbS1jaGVjayddLAogICAgICAgICAgICBoaWRlOiBbJyNkb3dubG9hZG1hbmFnZXInLCdhOmhhcyg+aW1nW3NyYyo9Ii9hc3NldHMvaW1nL2Rvd25sb2FkMS5wbmciXSknLCAnI2Rvd25sb2FkZmlsZTInXSwKICAgICAgICB9LAogICAgICAgIERvd25sb2FkOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnZG93bmxvYWQuY25ldC5jb20nLCd0ZWxlY2hhcmdlci5jbmV0LmNvbScsJ2Rlc2Nhcmdhci5jbmV0LmNvbSddLAogICAgICAgICAgICBoaWRlOiBbJy5kbG4tc3ViLW1lc3NhZ2UnLCcjdGl0bGUtZGV0YWlsLWRvd25sb2FkLW5vdy1idXR0b24tZGxtLW5vdGljZS1pY29uJywnLmRvd25sb2FkLW5vdy5kaXJlY3QtZG93bmxvYWQtYnV0dG9uLWRsbiddLAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIC8vIC0tPiBUaGlzIGlzIGZvciBwcm9ncmFtIHBhZ2VzCiAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSByZWFsIGRvd25sb2FkIGxpbmsKICAgICAgICAgICAgICAgIHZhciBhZHdhcmVsZXNzTGluayA9ICQoJy5kb3dubG9hZC1ub3cnKS5hdHRyKCdkYXRhLW5vZGxtLXVybCcpCiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBzdWNjZXNzZnVsbHkgZm91bmQgaXQKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYWR3YXJlbGVzc0xpbmsgIT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgICAgICAvLyBXZSByZXBsYWNlIHRoZSBhZHdhcmUtZW5hYmxlZCBsaW5rIHdpdGggdGhlIGFkd2FyZWxlc3MgbGluawogICAgICAgICAgICAgICAgICAgIHZhciBidG4gPSAkKCJhLmRsbi1hOmhhcygnLmRsbi1jdGEnKSIpCiAgICAgICAgICAgICAgICAgICAgYnRuLnByb3AoJ2hyZWYnLCBhZHdhcmVsZXNzTGluaykKICAgICAgICAgICAgICAgICAgICBidG4uYXR0cignZGF0YS1ocmVmJywgYWR3YXJlbGVzc0xpbmspCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gLS0+IFRoaXMgaXMgZm9yIHNlYXJjaCBsaXN0cwogICAgICAgICAgICAgICAgLy8gQ2hlY2sgZWFjaCBkb3dubG9hZCBidXR0b24gZnJvbSB0aGUgbGlzdAogICAgICAgICAgICAgICAgJCgnLmRvd25sb2FkLW5vdy5saXN0aW5nLWJ1dHRvbi1kbG4nKS5lYWNoKAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGN1cnJJbmRleCwgY3VyckRPTUVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJFbGVtZW50ID0gJChjdXJyRE9NRWxlbWVudCkKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgZGlyZWN0IGRvd25sb2FkIGxpbmsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJEaXJlY3REbExpbmsgPSBjdXJyRWxlbWVudC5hdHRyKCdkYXRhLW5vZGxtLXVybCcpCgogICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBjb3VsZG4ndCBmaW5kIHRoZSBkaXJlY3QgZG93bmxvYWQgbGluaywgd2UgYWJhbmRvbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGN1cnJEaXJlY3REbExpbmsgPT0gJ3VuZGVmaW5lZCcpIHtyZXR1cm59CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXBsYWNlIHRoZSBkb3dubG9hZCBsaW5rIHdpdGggdGhlIGRpcmVjdCwgZG93bmxvYWQgbWFuYWdlci1sZXNzIGxpbmsKICAgICAgICAgICAgICAgICAgICAgICAgY3VyckVsZW1lbnQuY2hpbGRyZW4oJy5kbG4tYScpLnByb3AoJ2hyZWYnLCBjdXJyRGlyZWN0RGxMaW5rKQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU29tZWhvdyB0aGlzIGNsYXNzIHByZXZlbnRzIHRoZSBkb3dubG9hZCBmcm9tIGxhdW5jaGluZyBwcm9wZXJseSAoYXQgbGVhc3Qgb24gRmlyZWZveCkKICAgICAgICAgICAgICAgICAgICAgICAgY3VyckVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2Rvd25sb2FkLW5vdycpCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgRmlsZWZhY3Rvcnk6IHsKICAgICAgICAgICAgaG9zdDogWydmaWxlZmFjdG9yeS5jb20nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjZG93bmxvYWRfbWFuYWdlciA+IGlucHV0OmNoZWNrYm94J10sCiAgICAgICAgICAgIGhpZGU6IFsnI2Rvd25sb2FkX21hbmFnZXInXQogICAgICAgIH0sCiAgICAgICAgRmlsZXNDRE46IHsKICAgICAgICAgICAgaG9zdDogWydmaWxlc2Nkbi5jb20nXSwKICAgICAgICAgICAgaGlkZTogWycuYnRuLmJnLWdyZWVuLTQwMCddCiAgICAgICAgfSwKICAgICAgICBGcmVld2FyZWZpbGVzOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnZnJlZXdhcmVmaWxlcy5jb20nXSwKICAgICAgICAgICAgaGlkZTogWydzcGFuLnNtYWxsbGlua3M6Y29udGFpbnMoImRvd25sb2FkIG1hbmFnZXIiKSddLAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBkaXJlY3RMaW5rID0gJCgnYS5kd25sb2NhdGlvbnMnKS5wcm9wKCdocmVmJykKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGlyZWN0TGluayA9PSAndW5kZWZpbmVkJykge3JldHVybn0KCiAgICAgICAgICAgICAgICAkKCd0ZFt3aWR0aD0zMzBdW2FsaWduPWxlZnRdID4gYScpLnByb3AoJ2hyZWYnLCBkaXJlY3RMaW5rKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBHb29nbGVFYXJ0aDogewogICAgICAgIAlob3N0OiBbJ2dvb2dsZS4nXSwKICAgICAgICAJdW5jaGVjazogWycjZGwtYWdyZWUtY2hyb21lJywnI2RsLWFncmVlLWNocm9tZS1kZWZhdWx0J10sCiAgICAgICAgCWhpZGU6IFsnI2RsLWNocm9tZS1wcm9tbyddCiAgICAgICAgfSwKICAgICAgICBIdWdlZmlsZXM6IHsKICAgICAgICAgICAgaG9zdDogWydodWdlZmlsZXMubmV0J10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2RhcCcsJyN1c2VfZG93bmxvYWRlciddLAogICAgICAgICAgICBoaWRlOiBbInNwYW46Y29udGFpbnMoJ3VzaW5nIGRvd25sb2FkIGFjY2VsZXJhdG9yJykiLCAnI2RhcCcsICcjdXNlX2Rvd25sb2FkZXInLCAnaW1nW3NyYz0iaHR0cDovL2h1Z2VmaWxlcy5uZXQvYnV0dG9uLnBuZyJdJ10KICAgICAgICB9LAogICAgICAgIEh1bGtsb2FkOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnaHVsa2xvYWQuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3NwbnNyZGxkJywgJyN1c2UtbWFuYWdlciddLAogICAgICAgICAgICBoaWRlOiBbCiAgICAgICAgICAgIAkiZm9ybTpjb250YWlucygnZG93bmxvYWQgVGhlIEZSRUUgZG93bmxvYWQgYWNjZWxlcmF0b3InKSIsJyNzcG5zcmRsZCcsJyNkb3dubG9hZC10aWNrJywKICAgICAgICAgICAgCSdpbWdbc3JjXj0iaHR0cDovL2h1bGtsb2FkLmNvbS9pbWFnZXMvZGxkIl0nLCAvLyBGYWtlIGRvd25sb2FkIGJ1dHRvbgogICAgICAgICAgICAJJ2Rpdi5hbGVydFtvbmNsaWNrPSJnb3RvKCkiXScsIC8vIEZha2Ugc3BvbnNvcmVkIGxpbmtzCiAgICAgICAgICAgIAknZGl2W3N0eWxlKj0iaGVpZ2h0OiA5MHB4OyBib3JkZXI6IDNweCBzb2xpZCByZ2IoMjA1LCAyNDAsIDI0NikiXScgLy8gRmFrZSBkb3dubG9hZCBiYW5uZXIgKGxpdmVyc2VseSkKICAgICAgICAgICAgXQogICAgICAgIH0sCiAgICAgICAgS2luZ2ZpbGVzOiB7CiAgICAgICAgICAgIGhvc3Q6IFsna2luZ2ZpbGVzLm5ldCddLAogICAgICAgICAgICB1bmNoZWNrOiBbJyNjbWxpX2Rvd25sb2FkZXInXSwKICAgICAgICAgICAgaGlkZTogWycjdGVzdDEnXSwKICAgICAgICAgICAgLy8gQXZvaWRzIGEgcG9wdXAgd2hlbiB1bmNoZWNraW5nIHRoZSBjaGVja2JveAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICQoJyNjbWxpX2Rvd25sb2FkZXInKS5wcm9wKCdvbmNsaWNrJywgbnVsbCkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgTGV0aXRiaXQ6IHsKICAgICAgICAgICAgaG9zdDogWydsZXRpdGJpdC5uZXQnXSwKICAgICAgICAgICAgdW5jaGVjazogWycjc2t5bW9ua19jaGVja2JveCddLAogICAgICAgICAgICBoaWRlOiBbJyNza3ltb25rX2NoZWNrYm94JywgJ2xhYmVsW2Zvcj1za3ltb25rX2NoZWNrYm94XSddCiAgICAgICAgfSwKICAgICAgICBMb3ZlUm9tczogewogICAgICAgICAgICBob3N0OiBbJ2xvdmVyb21zLmNvbSddLAogICAgICAgICAgICB1bmNoZWNrOiBbJyNkb3dubG9hZFdpdGhNYW5hZ2VyJ10sCiAgICAgICAgICAgIGhpZGU6IFsnLmRvd25sb2FkLWxhYmVsJ10KICAgICAgICB9LAogICAgICAgIFVwTWVkaWExZmlyZTogewogICAgICAgICAgICBob3N0OiBbJ3VwLm1lZGlhMWZpcmUuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3VzZS1tYW5hZ2VyJ10sCiAgICAgICAgICAgIGhpZGU6IFsnI2Rvd25sb2FkLWJveCcsICcjc3BvbnNvcjInLCAnZGl2LmNvbnRlbnRvciA+IGNlbnRlcicsICcuYWxlcnQyJywgJ2ltZ1tzcmNePSJodHRwOi8vdXAubWVkaWExZmlyZS5jb20vbmIvUmVjX2IiXSddCiAgICAgICAgfSwKICAgICAgICBNaWdodHl1cGxvYWQ6IHsKICAgICAgICAgICAgaG9zdDogWydtaWdodHl1cGxvYWQuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3VzZV9pbnN0YWxsZXInXSwKICAgICAgICAgICAgaGlkZTogWycjdXNlX2luc3RhbGxlcicsICdsYWJlbFtmb3I9dXNlX2luc3RhbGxlcl0nLCcjbG5rX2Rvd25sb2FkIH4gYnInXQogICAgICAgIH0sCiAgICAgICAgTXAzZmlsOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnbXAzZmlsXC4nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjY2hlY2sgPiBpbnB1dDpjaGVja2JveFtuYW1lPWNoZWNrXSddLAogICAgICAgICAgICBoaWRlOiBbJyNjaGVjayddCiAgICAgICAgfSwKICAgICAgICBNcDNqdWljZXM6IHsKICAgICAgICAgICAgaG9zdDogWydtcDNqdWljZXMudG8nXSwKICAgICAgICAgICAgdW5jaGVjazogWydpbnB1dDpjaGVja2JveFtuYW1lPWRsX21hbmFnZXJdJ10sCiAgICAgICAgICAgIGhpZGU6IFsnLmRsX21hbmFnZXIsLmNbc3R5bGU9ImhlaWdodDo4MHB4Il0nXQogICAgICAgIH0sCiAgICAgICAgTXAzb2xpbXA6IHsKICAgICAgICAJaG9zdDogWydtcDNvbGltcC5uZXR8bXAzb2xpbXB6LmNvbSddLAogICAgICAgIAl1bmNoZWNrOiBbJyNkb3dubG9hZC1tYW5hZ2VyLWNoZWNrYm94J10sCiAgICAgICAgCWhpZGU6IFsnI2Rvd25sb2FkLW1hbmFnZXInXQogICAgICAgIH0sCiAgICAgICAgT3BlbnN1YnRpdGxlczogewogICAgICAgICAgICBob3N0OiBbJ29wZW5zdWJ0aXRsZXMub3JnJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2NiRG93bmxvYWRlciddLAogICAgICAgICAgICBvcHR1bmNoZWNrOiB7CiAgICAgICAgICAgICAgICAvLyBOZXZlciBzdG9wIHRvIHRyeSB1bmNoZWNraW5nIHRoZSBjaGVja2JveAogICAgICAgICAgICAgICAgY29uc3RhbnRjaGVjazogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBoaWRlOiBbJyNjYkRvd25sb2FkZXInLCcjbGItZHdsJ10sCiAgICAgICAgICAgIG9wdGhpZGU6IHsKICAgICAgICAgICAgICAgIC8vIE5ldmVyIHN0b3AgdG8gdHJ5IGhpZGluZyB0aGUgb2JqZWN0CiAgICAgICAgICAgICAgICBjb25zdGFudGNoZWNrOiB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIEZpbGVoaXBwbzogewogICAgICAgICAgICBob3N0OiBbJ2ZpbGVoaXBwby5jb20nXSwKICAgICAgICAgICAgLy8gV2lsbCBkbyBub3RoaW5nIG9uIHBhZ2VzIHdpdGhvdXQgYSBkb3dubG9hZCBtYW5hZ2VyCiAgICAgICAgICAgIGhpZGU6IFsnI3Byb2dyYW0taGVhZGVyLWRvd25sb2FkLWxpbmstZG0tdGV4dCcsICcjZGlyZWN0LWRvd25sb2FkLWxpbmstY29udGFpbmVyJ10sCiAgICAgICAgICAgIGV4ZWM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIGFkd09iaiA9ICQoJy5wcm9ncmFtLWhlYWRlci1kb3dubG9hZC1saW5rLmRvd25sb2FkLW1hbmFnZXItZW5hYmxlZCcpCiAgICAgICAgICAgICAgICAvLyBBcHBlbmQgP2RpcmVjdCBhdCB0aGUgZW5kIG9mIHRoZSBVUkwgc28gdGhhdCBpdCBkb2Vzbid0IHByb3ZpZGUgdGhlIGRvd25sb2FkIG1hbmFnZXIKICAgICAgICAgICAgICAgIHZhciBkaXJlY3RVcmwgPSBhZHdPYmouYXR0cignaHJlZicpICsgJz9kaXJlY3QnCgogICAgICAgICAgICAgICAgYWR3T2JqLmF0dHIoJ2hyZWYnLCBkaXJlY3RVcmwpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIFJldkNsb3VkczogewogICAgICAgICAgICBob3N0OiBbJ3JldmNsb3Vkcy5jb20nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjdGljay1kd24nXSwKICAgICAgICAgICAgaGlkZTogWycudGljay1ib3gnXQogICAgICAgIH0sCiAgICAgICAgUm9taHVzdGxlcjogewogICAgICAgICAgICBob3N0OiBbJ3JvbWh1c3RsZXIubmV0J10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3VzZV9hY2NlbGVyYXRvciddLAogICAgICAgICAgICBoaWRlOiBbJy5hY2NlbGVyYXRvciddCiAgICAgICAgfSwKICAgICAgICBTZWN1cmV1cGxvYWQ6IHsKICAgICAgICAJaG9zdDogWydzZWN1cmV1cGxvYWQuZXUnXSwKICAgICAgICAJdW5jaGVjazogWydmb3JtW25hbWU9ZGxtYW5hZ2VyXSA+IGlucHV0OmNoZWNrYm94J10sCiAgICAgICAgCW9wdHVuY2hlY2s6IHsKICAgICAgICAgICAgICAgIC8vIE5ldmVyIHN0b3AgdG8gdHJ5IHVuY2hlY2tpbmcgdGhlIGNoZWNrYm94CiAgICAgICAgICAgICAgICBjb25zdGFudGNoZWNrOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgCWhpZGU6IFsnZm9ybVtuYW1lPWRsbWFuYWdlcl0nLCAnaW1nW3NyYz0iaHR0cHM6Ly93d3cuc2VjdXJldXBsb2FkLmV1L2dmeC9kbGJ0bi5wbmciXScsICdpbWdbc3JjPSJodHRwczovL3d3dy5zZWN1cmV1cGxvYWQuZXUvZ2Z4L2ZyZWVkbC5wbmciXSddLAogICAgICAgIAlvcHRoaWRlOiB7CiAgICAgICAgICAgICAgICAvLyBOZXZlciBzdG9wIHRvIHRyeSBoaWRpbmcgdGhlIG9iamVjdAogICAgICAgICAgICAgICAgY29uc3RhbnRjaGVjazogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBTZW5kc3BhY2U6IHsKICAgICAgICAgICAgaG9zdDogWydzZW5kc3BhY2UuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3F1aWNrY2hrJ10sCiAgICAgICAgICAgIGhpZGU6IFsiZm9ybSA+IGRpdjpjb250YWlucygnd2l0aCBzZW5kc3BhY2UgYWNjZWxlcmF0b3InKSIsJyNxdWlja2NoayddCiAgICAgICAgfSwKICAgICAgICBTaGFyZWJlYXN0OiB7CiAgICAgICAgICAgIGhvc3Q6IFsnc2hhcmViZWFzdC5jb20nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjc2hhcmViZWFzdF9kb3dubG9hZGVyJ10sCiAgICAgICAgICAgIGhpZGU6IFsnI3NoYXJlYmVhc3RfZG93bmxvYWRlcl9jb250YWluZXInXQogICAgICAgIH0sCiAgICAgICAgU2hhcmVkOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnc2hhcmVkLmNvbSddLAogICAgICAgICAgICB1bmNoZWNrOiBbJyN1c2UtbWFuYWdlciddLAogICAgICAgICAgICBoaWRlOiBbJyN3ZWJwaWNrLW9wdGlvbiddCiAgICAgICAgfSwKICAgICAgICBTb2Z0TTg6IHsKICAgICAgICAgICAgaG9zdDogWycuc29mdG04LmNvbSddLAogICAgICAgICAgICBoaWRlOiBbJyNkaW5mbzJbc3R5bGU9ImNsZWFyOmJvdGg7Il0nXSwgLy8gQmxhaCBibGFoIGFib3V0IEFkd2FyZQogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBidXRNYXRjaCA9ICcuYnV0dG9uRG93bmxvYWQuZGJ0bmRsJwogICAgICAgICAgICAgICAgdmFyIGRsQnV0ID0gJChidXRNYXRjaCkKCiAgICAgICAgICAgICAgICAvLyBUYWtlIHRoZSBsYXN0IHBhcnQgb2YgdGhlIHBhdGggb2YgdGhlIFVSTAogICAgICAgICAgICAgICAgdmFyIGV4ZU5hbWUgPSBkbEJ1dC5wcm9wKCdocmVmJykuc3BsaXQoJy8nKS5wb3AoKQoKICAgICAgICAgICAgICAgIC8vIEZvdW5kIGluIHRoZSBhZHdhcmUgaW5zdGFsbGF0aW9uIGV4ZWN1dGFibGUKICAgICAgICAgICAgICAgIHZhciBub0FkTG5rID0gJ2h0dHA6Ly9oLnNvZnRtOC5jb20vJyArIGV4ZU5hbWUKCiAgICAgICAgICAgICAgICAvLyBDYW4gYmUgbXVsdGlwbGUgYnV0dG9ucwogICAgICAgICAgICAgICAgZGxCdXQucHJvcCgnaHJlZicsIG5vQWRMbmspCiAgICAgICAgICAgICAgICB1bnNhZmVXaW5kb3cuJChidXRNYXRjaCkub2ZmKCdjbGljaycpIC8vIFByZXZlbnRzIHRoZSBkb3dubG9hZCBmcm9tIGxhdW5jaGluZyBwcm9wZXJseQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBTb2Z0b25pYzogewogICAgICAgICAgICBob3N0OiBbJy5zb2Z0b25pYy4nXSwKICAgICAgICAgICAgaGlkZTogWydoMjpjb250YWlucygiU29mdG9uaWMgRG93bmxvYWRlciIpIH4gdWwnLCdoMjpjb250YWlucygiU29mdG9uaWMgRG93bmxvYWRlciIpLCAuYm94LWRvd25sb2FkLWZvb3RlciddLAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBsaW5rRm9sbG93ID0gJCgnI2Rvd25sb2FkX2FsdGVybmF0aXZlID4gcCA+IGFbcmVsPW5vZm9sbG93XScpCiAgICAgICAgICAgICAgICBpZiAoZXhpc3RzKGxpbmtGb2xsb3cpKSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24ucmVwbGFjZShsaW5rRm9sbG93LnByb3AoJ2hyZWYnKSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgbWFuYWdlckJ1dHRvbiA9ICQoJyNkb3dubG9hZC1idXR0b24tc2QsICNkb3dubG9hZC1idXR0b24nKQogICAgICAgICAgICAgICAgdmFyIGRpcmVjdEJ1dHRvbiA9ICQoJyNkb3dubG9hZC1idXR0b24tYWx0ZXJuYXRpdmUnKQogICAgICAgICAgICAgICAgaWYgKCFleGlzdHMobWFuYWdlckJ1dHRvbikgfHwgIWV4aXN0cyhkaXJlY3RCdXR0b24pKSB7cmV0dXJufQoKICAgICAgICAgICAgICAgIHZhciBkaXJlY3RMaW5rID0gZGlyZWN0QnV0dG9uLnByb3AoJ2hyZWYnKQoKICAgICAgICAgICAgICAgIC8vIEF2b2lkIGpRdWVyeSBjbGljayByZWRpcmVjdGlvbiBzZXQgb24gdGhlIGRvd25sb2FkIGJ1dHRvbgogICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7dW5zYWZlV2luZG93LiQoJyNkb3dubG9hZC1idXR0b24tc2QsICNkb3dubG9hZC1idXR0b24nKS5vZmYoJ2NsaWNrJyl9LCAxMDApCgogICAgICAgICAgICAgICAgbWFuYWdlckJ1dHRvbi5wcm9wKCdocmVmJywgZGlyZWN0TGluaykKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgU291cmNlZm9yZ2U6IHsKICAgICAgICAgICAgaG9zdDogWydzb3VyY2Vmb3JnZS5uZXQnXSwKICAgICAgICAgICAgaGlkZTogWycuZGlyZWN0LWRsJywgJy5pbmZvLWNpcmNsZScsICcuYnRuLWRkbC10b2dnbGUnXSwKICAgICAgICAgICAgZXhlYzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIAkvLyBIb3RmaXg6IGlmIHRoZSB1c2VyIGlzIG9uIGFuIGFkd2FyZS1idW5kbGVkIGRvd25sb2FkIHBhZ2UKICAgICAgICAgICAgCWlmIChkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZS5jb250YWlucygnL2Rvd25sb2FkJykgJiYgIWRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaC5jb250YWlucygnbm93cmFwJykpIHsKICAgICAgICAgICAgCQkvLyBBZGQgdGhlIGFyZ3VtZW50IGFzIGZpcnN0IGFyZ3VtZW50ICg/KSBvciBzZWNvbmRhcnkgYXJndW1lbnQgKCYpCiAgICAgICAgICAgIAkJdmFyIHByZWZpeCA9IGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaC5jb250YWlucygnPycpPyAnJicgOiAnPyc7CiAgICAgICAgICAgIAkJZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoID0gZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoICsgcHJlZml4ICsgJ25vd3JhcCc7CiAgICAgICAgICAgIAl9CgogICAgICAgICAgICAJdHJ5IHsKCSAgICAgICAgICAgIAkvLyBTZWVuIGluIGJyb3dzaW5nIGZpbGVzIHBhZ2VzCgkgICAgICAgICAgICAJdmFyIHRvZ2dsZUJ0biA9ICQoJ2EuYnRuLWRkbC10b2dnbGUnKTsKCSAgICAgICAgICAgIAkvLyBJbiBjYXNlIHRoZSB0ZXh0IGNvbnRhaW5zIHRoZSBwYXR0ZXJuIHRlbGxpbmcgdG8gdGhlIHVzZXIgdGhhdCBhZHdhcmUgaXMgZW5hYmxlZAoJICAgICAgICAgICAgCWlmIChleGlzdHModG9nZ2xlQnRuKSAmJiB0b2dnbGVCdG4uaHRtbCgpLmNvbnRhaW5zKHRvZ2dsZUJ0bi5hdHRyKCdkYXRhLWNvbnRlbnQtbm93cmFwJykpKSB7CgkgICAgICAgICAgICAJCS8vIFdlIGRpc2FibGUgaXQKCSAgICAgICAgICAgIAkJdW5zYWZlV2luZG93LiQoJ2EuYnRuLWRkbC10b2dnbGUnKS5jbGljaygpOwoJICAgICAgICAgICAgCX0KCSAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CgogICAgICAgICAgICAJLy8gLS0+IFRoaXMgaXMgZm9yIHByb2dyYW0gcGFnZXMKICAgICAgICAgICAgCS8vIFRyeSB0byBnZXQgdGhlIHJlYWwgbGluawogICAgICAgICAgICAJdmFyIHJlYWxMaW5rID0gJCgnLmRpcmVjdC1kbCcpLnByb3AoJ2hyZWYnKQoKICAgICAgICAgICAgCS8vIElmIHdlIGZvdW5kIHRoZSBkaXJlY3QgZG93bmxvYWQgbGluaywgdGhlbiBpdCBtZWFucyB0aGlzIGRvd25sb2FkIGlzIGJ1bmRsZWQgd2l0aCBhIHBpZWNlIG9mIGFkd2FyZQogICAgICAgICAgICAJaWYgKHR5cGVvZiByZWFsTGluayAhPSAndW5kZWZpbmVkJykgewoJICAgICAgICAgICAgCS8vIFJlcGxhY2UgdGhlIGRvd25sb2FkIGxpbmsgd2l0aCB0aGUgcmVhbCBvbmUKCSAgICAgICAgICAgIAkkKCcjZG93bmxvYWRfYnV0dG9uID4gLnNmZGwnKS5wcm9wKCdocmVmJywgcmVhbExpbmspCgoJICAgICAgICAgICAgCS8vIE5vdyB3ZSdyZSB0cnlpbmcgdG8gY2hhbmdlIHRoZSAiSW5zdGFsbGVyIEVuYWJsZWQiIHRleHQgd2l0aCB0aGUgbmFtZSBvZiB0aGUgZmlsZQoJICAgICAgICAgICAgCXZhciBjb250YWluc0ZpbGVOYW1lID0gJCgnLnNmZGwnKS5hdHRyKCdvbGR0aXRsZScpCgkgICAgICAgICAgICAJdmFyIGV4dHJhY3RGaWxlTmFtZSA9IC9cLyg/IS4qXC8pKFteIF0rKS8KCgkgICAgICAgICAgICAJdmFyIGZpbGVOYW1lID0gZXh0cmFjdEZpbGVOYW1lLmV4ZWMoY29udGFpbnNGaWxlTmFtZSkKCgkgICAgICAgICAgICAJJCgic21hbGw6Y29udGFpbnMoJ0luc3RhbGxlciBFbmFibGVkJykiKS5odG1sKGZpbGVOYW1lWzFdKQoJICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIC0tPiBUaGlzIGlzIGZvciB0aGUgbWFpbiBwYWdlIGFuZCBzZWFyY2hlcwogICAgICAgICAgICAgICAgLy8gVE9ETzogdXNlIGEgbXV0YXRpb24gb2JzZXJ2ZXIgZm9yIHNlYXJjaCBwYWdlcyAobm90IG5lZWRlZCBmb3IgbWFpbiBwYWdlKQogICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgJCgiLnNmZGwuc2ZkbC1saXRlIikuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yY2UgZG93bmxvYWRpbmcgdGhlIGFkd2FyZS1mcmVlIHByb2dyYW0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZEhyZWYgPSAkKHRoaXMpLnByb3AoJ2hyZWYnKQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgYWxyZWFkeSBhcHBlbmRlZCBvdXIgbm8tYWR3YXJlIGFyZ3VtZW50LCBsZWF2ZQogICAgICAgICAgICAgICAgICAgICAgICBpZiAob2xkSHJlZi5zdWJzdHJpbmcob2xkSHJlZi5sZW5ndGgtNykgPT0gJyZub3dyYXAnKSB7cmV0dXJufQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGFwcGVuZCBpdAogICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnByb3AoJ2hyZWYnLCAkKHRoaXMpLnByb3AoJ2hyZWYnKSArICcmbm93cmFwJykKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgNTApCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIFR1c2ZpbGVzOiB7CiAgICAgICAgICAgIGhvc3Q6IFsndHVzZmlsZXMubmV0J10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnaW5wdXQ6Y2hlY2tib3hbbmFtZT1xdWlja10nXSwKICAgICAgICAgICAgaGlkZTogWydpbnB1dDpjaGVja2JveFtuYW1lPXF1aWNrXSB+IGxhYmVsJywgJ2lucHV0OmNoZWNrYm94W25hbWU9cXVpY2tdJywnYVt0YXJnZXQ9X2JsYW5rXVtocmVmKj0iaHR0cDovL3NoYXJlc3VwZXIuaW5mby8iXSxpbWdbc3JjPSJodHRwczovL3oudHVzZmlsZXMubmV0L2kvZGxsLnBuZyJdJ10KICAgICAgICB9LAogICAgICAgIFVwbG9hZGluZzogewogICAgICAgICAgICBob3N0OiBbJ3VwbG9hZGluZy5jb20nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjZm9yY2VfZXhlJ10sCiAgICAgICAgICAgIGhpZGU6IFsnLnVzZV9kb3dubG9hZF9tYW5hZ2VyJ10KICAgICAgICB9LAogICAgICAgIFVwbG9kd3M6ewogICAgICAgICAgICBob3N0OiBbJ3VwbG9kLndzJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2Noa0lzQWRkJ10sCiAgICAgICAgICAgIGhpZGU6IFsnbGFiZWw6Y29udGFpbnMoIm9mZmVyIiknLCdpbWdbc3JjPSJodHRwOi8vZ29vLmdsL0NHSFZWbyJdJ10KICAgICAgICB9LAogICAgICAgIFVwbG9hZHM6IHsKICAgICAgICAgICAgaG9zdDogWyd1cGxvYWRzLnRvJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2Noa0lzQWRkJ10sCiAgICAgICAgICAgIGhpZGU6IFsnYTpjb250YWlucygiTUFOQUdFUiIpJywnY2VudGVyOmNvbnRhaW5zKCJPZmZlciIpJ10sCiAgICAgICAgfSwKICAgICAgICBVcHRvYm94OiB7CiAgICAgICAgICAgIGhvc3Q6IFsndXB0b2JveC5jb20nXSwKICAgICAgICAgICAgaGlkZTogWydkaXYucmVzZWxsZXIgPiB0YWJsZVthbGlnbj1jZW50ZXJdJ10sCiAgICAgICAgICAgIGV4ZWM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIGJ1dHRvbiA9ICQoJ2Rpdi5yZXNlbGxlciA+IHRhYmxlW2FsaWduPWNlbnRlcl0gZGl2W2FsaWduPWNlbnRlcl0gPiBhJykKICAgICAgICAgICAgICAgIHZhciBhZHdhcmUgPSBidXR0b24ucHJvcCgnaHJlZicpCgogICAgICAgICAgICAgICAgLy8gUmV0cmlldmUgdGhlIHJlYWwgZG93bmxvYWQgbGluayBhbmQgY2hhbmdlIHRoZSBidXR0b24gd2l0aCB0aGlzIGxpbmsKICAgICAgICAgICAgICAgIHZhciBkb3dubG9hZCA9IGFkd2FyZS5tYXRjaCgvJnByb2R1Y3RfZG93bmxvYWRfdXJsPShbXiQmXSspJC8pWzFdCiAgICAgICAgICAgICAgICBidXR0b24ucHJvcCgnaHJlZicsIGRvd25sb2FkKQoKICAgICAgICAgICAgICAgIC8vIFB1dCB0aGUgYnV0dG9uIGluIGEgdmlzaWJsZSBsb2NhdGlvbgogICAgICAgICAgICAgICAgJCgnZGl2LnJlc2VsbGVyID4gdGFibGVbYWxpZ249Y2VudGVyXScpLmJlZm9yZShidXR0b24pCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIFVubGltaXR6b25lOiB7CiAgICAgICAgICAgIGhvc3Q6IFsndW5saW1pdHpvbmUuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2RsbSddLAogICAgICAgICAgICBoaWRlOiBbJyNkbG0gfiBiJywnI2RsbSddCiAgICAgICAgfSwKICAgICAgICBVc2Vyc0NETjogewogICAgICAgICAgICBob3N0OiBbJ3VzZXJzY2RuLmNvbSddLAogICAgICAgICAgICB1bmNoZWNrOiBbJyNjaGtJc0FkZCddLAogICAgICAgICAgICBoaWRlOiBbJ2xhYmVsOmNvbnRhaW5zKCJEb3dubG9hZCBtYW5hZ2VyIiknXQogICAgICAgIH0sCiAgICAgICAgWmlkZHU6IHsKICAgICAgICAgICAgaG9zdDogWydkb3dubG9hZHMuemlkZHUuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2FjY2VsZXJhdG9yJ10sCiAgICAgICAgICAgIGhpZGU6IFsndGQudGV4dDEyOmNvbnRhaW5zKCJ6aWRkdSBhY2NlbGVyYXRvciIpJ10KICAgICAgICB9CiAgICB9CgogICAgLy8gSWYgdGhlIHJlcXVpcmUgd2Fzbid0IGV4ZWN1dGVkIChHb29nbGUgQ2hyb21lIGluc3RhbGxhdGlvbiB3aXRob3V0IFRhbXBlcm1vbmtleSksIGpRdWVyeSAyLjAzbWluCiAgICBpZiAodHlwZW9mICQgPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAoZnVuY3Rpb24oZSx1bmRlZmluZWQpe3ZhciB0LG4scj10eXBlb2YgdW5kZWZpbmVkLGk9ZS5sb2NhdGlvbixvPWUuZG9jdW1lbnQscz1vLmRvY3VtZW50RWxlbWVudCxhPWUualF1ZXJ5LHU9ZS4kLGw9e30sYz1bXSxwPSIyLjAuMyIsZj1jLmNvbmNhdCxoPWMucHVzaCxkPWMuc2xpY2UsZz1jLmluZGV4T2YsbT1sLnRvU3RyaW5nLHk9bC5oYXNPd25Qcm9wZXJ0eSx2PXAudHJpbSx4PWZ1bmN0aW9uKGUsbil7cmV0dXJuIG5ldyB4LmZuLmluaXQoZSxuLHQpfSxiPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLHc9L1xTKy9nLFQ9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLyxDPS9ePChcdyspXHMqXC8/Pig/OjxcL1wxPnwpJC8saz0vXi1tcy0vLE49Ly0oW1xkYS16XSkvZ2ksRT1mdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9LFM9ZnVuY3Rpb24oKXtvLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLFMsITEpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsUywhMSkseC5yZWFkeSgpfTt4LmZuPXgucHJvdG90eXBlPXtqcXVlcnk6cCxjb25zdHJ1Y3Rvcjp4LGluaXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7aWYoIWUpcmV0dXJuIHRoaXM7aWYoInN0cmluZyI9PXR5cGVvZiBlKXtpZihyPSI8Ij09PWUuY2hhckF0KDApJiYiPiI9PT1lLmNoYXJBdChlLmxlbmd0aC0xKSYmZS5sZW5ndGg+PTM/W251bGwsZSxudWxsXTpULmV4ZWMoZSksIXJ8fCFyWzFdJiZ0KXJldHVybiF0fHx0LmpxdWVyeT8odHx8bikuZmluZChlKTp0aGlzLmNvbnN0cnVjdG9yKHQpLmZpbmQoZSk7aWYoclsxXSl7aWYodD10IGluc3RhbmNlb2YgeD90WzBdOnQseC5tZXJnZSh0aGlzLHgucGFyc2VIVE1MKHJbMV0sdCYmdC5ub2RlVHlwZT90Lm93bmVyRG9jdW1lbnR8fHQ6bywhMCkpLEMudGVzdChyWzFdKSYmeC5pc1BsYWluT2JqZWN0KHQpKWZvcihyIGluIHQpeC5pc0Z1bmN0aW9uKHRoaXNbcl0pP3RoaXNbcl0odFtyXSk6dGhpcy5hdHRyKHIsdFtyXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGk9by5nZXRFbGVtZW50QnlJZChyWzJdKSxpJiZpLnBhcmVudE5vZGUmJih0aGlzLmxlbmd0aD0xLHRoaXNbMF09aSksdGhpcy5jb250ZXh0PW8sdGhpcy5zZWxlY3Rvcj1lLHRoaXN9cmV0dXJuIGUubm9kZVR5cGU/KHRoaXMuY29udGV4dD10aGlzWzBdPWUsdGhpcy5sZW5ndGg9MSx0aGlzKTp4LmlzRnVuY3Rpb24oZSk/bi5yZWFkeShlKTooZS5zZWxlY3RvciE9PXVuZGVmaW5lZCYmKHRoaXMuc2VsZWN0b3I9ZS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9ZS5jb250ZXh0KSx4Lm1ha2VBcnJheShlLHRoaXMpKX0sc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBkLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT90aGlzLnRvQXJyYXkoKTowPmU/dGhpc1t0aGlzLmxlbmd0aCtlXTp0aGlzW2VdfSxwdXNoU3RhY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9eC5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksZSk7cmV0dXJuIHQucHJldk9iamVjdD10aGlzLHQuY29udGV4dD10aGlzLmNvbnRleHQsdH0sZWFjaDpmdW5jdGlvbihlLHQpe3JldHVybiB4LmVhY2godGhpcyxlLHQpfSxyZWFkeTpmdW5jdGlvbihlKXtyZXR1cm4geC5yZWFkeS5wcm9taXNlKCkuZG9uZShlKSx0aGlzfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhkLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubGVuZ3RoLG49K2UrKDA+ZT90OjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhuPj0wJiZ0Pm4/W3RoaXNbbl1dOltdKX0sbWFwOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4Lm1hcCh0aGlzLGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2FsbCh0LG4sdCl9KSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IobnVsbCl9LHB1c2g6aCxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0seC5mbi5pbml0LnByb3RvdHlwZT14LmZuLHguZXh0ZW5kPXguZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsaSxvLHM9YXJndW1lbnRzWzBdfHx7fSxhPTEsdT1hcmd1bWVudHMubGVuZ3RoLGw9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIHMmJihsPXMscz1hcmd1bWVudHNbMV18fHt9LGE9MiksIm9iamVjdCI9PXR5cGVvZiBzfHx4LmlzRnVuY3Rpb24ocyl8fChzPXt9KSx1PT09YSYmKHM9dGhpcywtLWEpO3U+YTthKyspaWYobnVsbCE9KGU9YXJndW1lbnRzW2FdKSlmb3IodCBpbiBlKW49c1t0XSxyPWVbdF0scyE9PXImJihsJiZyJiYoeC5pc1BsYWluT2JqZWN0KHIpfHwoaT14LmlzQXJyYXkocikpKT8oaT8oaT0hMSxvPW4mJnguaXNBcnJheShuKT9uOltdKTpvPW4mJnguaXNQbGFpbk9iamVjdChuKT9uOnt9LHNbdF09eC5leHRlbmQobCxvLHIpKTpyIT09dW5kZWZpbmVkJiYoc1t0XT1yKSk7cmV0dXJuIHN9LHguZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyhwK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLG5vQ29uZmxpY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIGUuJD09PXgmJihlLiQ9dSksdCYmZS5qUXVlcnk9PT14JiYoZS5qUXVlcnk9YSkseH0saXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oZSl7ZT94LnJlYWR5V2FpdCsrOngucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihlKXsoZT09PSEwPy0teC5yZWFkeVdhaXQ6eC5pc1JlYWR5KXx8KHguaXNSZWFkeT0hMCxlIT09ITAmJi0teC5yZWFkeVdhaXQ+MHx8KG4ucmVzb2x2ZVdpdGgobyxbeF0pLHguZm4udHJpZ2dlciYmeChvKS50cmlnZ2VyKCJyZWFkeSIpLm9mZigicmVhZHkiKSkpfSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiI9PT14LnR5cGUoZSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheSxpc1dpbmRvdzpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZSYmZT09PWUud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oZSl7cmV0dXJuIWlzTmFOKHBhcnNlRmxvYXQoZSkpJiZpc0Zpbml0ZShlKX0sdHlwZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9lKyIiOiJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGU/bFttLmNhbGwoZSldfHwib2JqZWN0Ijp0eXBlb2YgZX0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihlKXtpZigib2JqZWN0IiE9PXgudHlwZShlKXx8ZS5ub2RlVHlwZXx8eC5pc1dpbmRvdyhlKSlyZXR1cm4hMTt0cnl7aWYoZS5jb25zdHJ1Y3RvciYmIXkuY2FsbChlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiExfWNhdGNoKHQpe3JldHVybiExfXJldHVybiEwfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGVycm9yOmZ1bmN0aW9uKGUpe3Rocm93IEVycm9yKGUpfSxwYXJzZUhUTUw6ZnVuY3Rpb24oZSx0LG4pe2lmKCFlfHwic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgdCYmKG49dCx0PSExKSx0PXR8fG87dmFyIHI9Qy5leGVjKGUpLGk9IW4mJltdO3JldHVybiByP1t0LmNyZWF0ZUVsZW1lbnQoclsxXSldOihyPXguYnVpbGRGcmFnbWVudChbZV0sdCxpKSxpJiZ4KGkpLnJlbW92ZSgpLHgubWVyZ2UoW10sci5jaGlsZE5vZGVzKSl9LHBhcnNlSlNPTjpKU09OLnBhcnNlLHBhcnNlWE1MOmZ1bmN0aW9uKGUpe3ZhciB0LG47aWYoIWV8fCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gbnVsbDt0cnl7bj1uZXcgRE9NUGFyc2VyLHQ9bi5wYXJzZUZyb21TdHJpbmcoZSwidGV4dC94bWwiKX1jYXRjaChyKXt0PXVuZGVmaW5lZH1yZXR1cm4oIXR8fHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoKSYmeC5lcnJvcigiSW52YWxpZCBYTUw6ICIrZSksdH0sbm9vcDpmdW5jdGlvbigpe30sZ2xvYmFsRXZhbDpmdW5jdGlvbihlKXt2YXIgdCxuPWV2YWw7ZT14LnRyaW0oZSksZSYmKDE9PT1lLmluZGV4T2YoInVzZSBzdHJpY3QiKT8odD1vLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLHQudGV4dD1lLG8uaGVhZC5hcHBlbmRDaGlsZCh0KS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpKTpuKGUpKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoaywibXMtIikucmVwbGFjZShOLEUpfSxub2RlTmFtZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT10LnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9MCxvPWUubGVuZ3RoLHM9aihlKTtpZihuKXtpZihzKXtmb3IoO28+aTtpKyspaWYocj10LmFwcGx5KGVbaV0sbikscj09PSExKWJyZWFrfWVsc2UgZm9yKGkgaW4gZSlpZihyPXQuYXBwbHkoZVtpXSxuKSxyPT09ITEpYnJlYWt9ZWxzZSBpZihzKXtmb3IoO28+aTtpKyspaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVha31lbHNlIGZvcihpIGluIGUpaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVhaztyZXR1cm4gZX0sdHJpbTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8iIjp2LmNhbGwoZSl9LG1ha2VBcnJheTpmdW5jdGlvbihlLHQpe3ZhciBuPXR8fFtdO3JldHVybiBudWxsIT1lJiYoaihPYmplY3QoZSkpP3gubWVyZ2Uobiwic3RyaW5nIj09dHlwZW9mIGU/W2VdOmUpOmguY2FsbChuLGUpKSxufSxpbkFycmF5OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbnVsbD09dD8tMTpnLmNhbGwodCxlLG4pfSxtZXJnZTpmdW5jdGlvbihlLHQpe3ZhciBuPXQubGVuZ3RoLHI9ZS5sZW5ndGgsaT0wO2lmKCJudW1iZXIiPT10eXBlb2Ygbilmb3IoO24+aTtpKyspZVtyKytdPXRbaV07ZWxzZSB3aGlsZSh0W2ldIT09dW5kZWZpbmVkKWVbcisrXT10W2krK107cmV0dXJuIGUubGVuZ3RoPXIsZX0sZ3JlcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT1bXSxvPTAscz1lLmxlbmd0aDtmb3Iobj0hIW47cz5vO28rKylyPSEhdChlW29dLG8pLG4hPT1yJiZpLnB1c2goZVtvXSk7cmV0dXJuIGl9LG1hcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT0wLG89ZS5sZW5ndGgscz1qKGUpLGE9W107aWYocylmb3IoO28+aTtpKyspcj10KGVbaV0saSxuKSxudWxsIT1yJiYoYVthLmxlbmd0aF09cik7ZWxzZSBmb3IoaSBpbiBlKXI9dChlW2ldLGksbiksbnVsbCE9ciYmKGFbYS5sZW5ndGhdPXIpO3JldHVybiBmLmFwcGx5KFtdLGEpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYobj1lW3RdLHQ9ZSxlPW4pLHguaXNGdW5jdGlvbihlKT8ocj1kLmNhbGwoYXJndW1lbnRzLDIpLGk9ZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0fHx0aGlzLHIuY29uY2F0KGQuY2FsbChhcmd1bWVudHMpKSl9LGkuZ3VpZD1lLmd1aWQ9ZS5ndWlkfHx4Lmd1aWQrKyxpKTp1bmRlZmluZWR9LGFjY2VzczpmdW5jdGlvbihlLHQsbixyLGksbyxzKXt2YXIgYT0wLHU9ZS5sZW5ndGgsbD1udWxsPT1uO2lmKCJvYmplY3QiPT09eC50eXBlKG4pKXtpPSEwO2ZvcihhIGluIG4peC5hY2Nlc3MoZSx0LGEsblthXSwhMCxvLHMpfWVsc2UgaWYociE9PXVuZGVmaW5lZCYmKGk9ITAseC5pc0Z1bmN0aW9uKHIpfHwocz0hMCksbCYmKHM/KHQuY2FsbChlLHIpLHQ9bnVsbCk6KGw9dCx0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbC5jYWxsKHgoZSksbil9KSksdCkpZm9yKDt1PmE7YSsrKXQoZVthXSxuLHM/cjpyLmNhbGwoZVthXSxhLHQoZVthXSxuKSkpO3JldHVybiBpP2U6bD90LmNhbGwoZSk6dT90KGVbMF0sbik6b30sbm93OkRhdGUubm93LHN3YXA6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxzPXt9O2ZvcihvIGluIHQpc1tvXT1lLnN0eWxlW29dLGUuc3R5bGVbb109dFtvXTtpPW4uYXBwbHkoZSxyfHxbXSk7Zm9yKG8gaW4gdCllLnN0eWxlW29dPXNbb107cmV0dXJuIGl9fSkseC5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKHQpe3JldHVybiBufHwobj14LkRlZmVycmVkKCksImNvbXBsZXRlIj09PW8ucmVhZHlTdGF0ZT9zZXRUaW1lb3V0KHgucmVhZHkpOihvLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLFMsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsUywhMSkpKSxuLnByb21pc2UodCl9LHguZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe2xbIltvYmplY3QgIit0KyJdIl09dC50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gaihlKXt2YXIgdD1lLmxlbmd0aCxuPXgudHlwZShlKTtyZXR1cm4geC5pc1dpbmRvdyhlKT8hMToxPT09ZS5ub2RlVHlwZSYmdD8hMDoiYXJyYXkiPT09bnx8ImZ1bmN0aW9uIiE9PW4mJigwPT09dHx8Im51bWJlciI9PXR5cGVvZiB0JiZ0PjAmJnQtMSBpbiBlKX10PXgobyksZnVuY3Rpb24oZSx1bmRlZmluZWQpe3ZhciB0LG4scixpLG8scyxhLHUsbCxjLHAsZixoLGQsZyxtLHksdj0ic2l6emxlIistbmV3IERhdGUsYj1lLmRvY3VtZW50LHc9MCxUPTAsQz1zdCgpLGs9c3QoKSxOPXN0KCksRT0hMSxTPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PyhFPSEwLDApOjB9LGo9dHlwZW9mIHVuZGVmaW5lZCxEPTE8PDMxLEE9e30uaGFzT3duUHJvcGVydHksTD1bXSxxPUwucG9wLEg9TC5wdXNoLE89TC5wdXNoLEY9TC5zbGljZSxQPUwuaW5kZXhPZnx8ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPXRoaXMubGVuZ3RoO2Zvcig7bj50O3QrKylpZih0aGlzW3RdPT09ZSlyZXR1cm4gdDtyZXR1cm4tMX0sUj0iY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQiLE09IltcXHgyMFxcdFxcclxcblxcZl0iLFc9Iig/OlxcXFwufFtcXHctXXxbXlxceDAwLVxceGEwXSkrIiwkPVcucmVwbGFjZSgidyIsIncjIiksQj0iXFxbIitNKyIqKCIrVysiKSIrTSsiKig/OihbKl4kfCF+XT89KSIrTSsiKig/OihbJ1wiXSkoKD86XFxcXC58W15cXFxcXSkqPylcXDN8KCIrJCsiKXwpfCkiK00rIipcXF0iLEk9IjooIitXKyIpKD86XFwoKChbJ1wiXSkoKD86XFxcXC58W15cXFxcXSkqPylcXDN8KCg/OlxcXFwufFteXFxcXCgpW1xcXV18IitCLnJlcGxhY2UoMyw4KSsiKSopfC4qKVxcKXwpIix6PVJlZ0V4cCgiXiIrTSsiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIitNKyIrJCIsImciKSxfPVJlZ0V4cCgiXiIrTSsiKiwiK00rIioiKSxYPVJlZ0V4cCgiXiIrTSsiKihbPit+XXwiK00rIikiK00rIioiKSxVPVJlZ0V4cChNKyIqWyt+XSIpLFk9UmVnRXhwKCI9IitNKyIqKFteXFxdJ1wiXSopIitNKyIqXFxdIiwiZyIpLFY9UmVnRXhwKEkpLEc9UmVnRXhwKCJeIiskKyIkIiksSj17SUQ6UmVnRXhwKCJeIygiK1crIikiKSxDTEFTUzpSZWdFeHAoIl5cXC4oIitXKyIpIiksVEFHOlJlZ0V4cCgiXigiK1cucmVwbGFjZSgidyIsIncqIikrIikiKSxBVFRSOlJlZ0V4cCgiXiIrQiksUFNFVURPOlJlZ0V4cCgiXiIrSSksQ0hJTEQ6UmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK00rIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK00rIiooPzooWystXXwpIitNKyIqKFxcZCspfCkpIitNKyIqXFwpfCkiLCJpIiksYm9vbDpSZWdFeHAoIl4oPzoiK1IrIikkIiwiaSIpLG5lZWRzQ29udGV4dDpSZWdFeHAoIl4iK00rIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIrTSsiKigoPzotXFxkKT9cXGQqKSIrTSsiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sUT0vXltee10rXHtccypcW25hdGl2ZSBcdy8sSz0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLFo9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxldD0vXmhcZCQvaSx0dD0vJ3xcXC9nLG50PVJlZ0V4cCgiXFxcXChbXFxkYS1mXXsxLDZ9IitNKyI/fCgiK00rIil8LikiLCJpZyIpLHJ0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0iMHgiK3QtNjU1MzY7cmV0dXJuIHIhPT1yfHxuP3Q6MD5yP1N0cmluZy5mcm9tQ2hhckNvZGUocis2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NnxyPj4xMCw1NjMyMHwxMDIzJnIpfTt0cnl7Ty5hcHBseShMPUYuY2FsbChiLmNoaWxkTm9kZXMpLGIuY2hpbGROb2RlcyksTFtiLmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChpdCl7Tz17YXBwbHk6TC5sZW5ndGg/ZnVuY3Rpb24oZSx0KXtILmFwcGx5KGUsRi5jYWxsKHQpKX06ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmxlbmd0aCxyPTA7d2hpbGUoZVtuKytdPXRbcisrXSk7ZS5sZW5ndGg9bi0xfX19ZnVuY3Rpb24gb3QoZSx0LHIsaSl7dmFyIG8scyxhLHUsbCxmLGcsbSx4LHc7aWYoKHQ/dC5vd25lckRvY3VtZW50fHx0OmIpIT09cCYmYyh0KSx0PXR8fHAscj1yfHxbXSwhZXx8InN0cmluZyIhPXR5cGVvZiBlKXJldHVybiByO2lmKDEhPT0odT10Lm5vZGVUeXBlKSYmOSE9PXUpcmV0dXJuW107aWYoaCYmIWkpe2lmKG89Sy5leGVjKGUpKWlmKGE9b1sxXSl7aWYoOT09PXUpe2lmKHM9dC5nZXRFbGVtZW50QnlJZChhKSwhc3x8IXMucGFyZW50Tm9kZSlyZXR1cm4gcjtpZihzLmlkPT09YSlyZXR1cm4gci5wdXNoKHMpLHJ9ZWxzZSBpZih0Lm93bmVyRG9jdW1lbnQmJihzPXQub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKSkmJnkodCxzKSYmcy5pZD09PWEpcmV0dXJuIHIucHVzaChzKSxyfWVsc2V7aWYob1syXSlyZXR1cm4gTy5hcHBseShyLHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSkpLHI7aWYoKGE9b1szXSkmJm4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBPLmFwcGx5KHIsdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpKSxyfWlmKG4ucXNhJiYoIWR8fCFkLnRlc3QoZSkpKXtpZihtPWc9dix4PXQsdz05PT09dSYmZSwxPT09dSYmIm9iamVjdCIhPT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2Y9Z3QoZSksKGc9dC5nZXRBdHRyaWJ1dGUoImlkIikpP209Zy5yZXBsYWNlKHR0LCJcXCQmIik6dC5zZXRBdHRyaWJ1dGUoImlkIixtKSxtPSJbaWQ9JyIrbSsiJ10gIixsPWYubGVuZ3RoO3doaWxlKGwtLSlmW2xdPW0rbXQoZltsXSk7eD1VLnRlc3QoZSkmJnQucGFyZW50Tm9kZXx8dCx3PWYuam9pbigiLCIpfWlmKHcpdHJ5e3JldHVybiBPLmFwcGx5KHIseC5xdWVyeVNlbGVjdG9yQWxsKHcpKSxyfWNhdGNoKFQpe31maW5hbGx5e2d8fHQucmVtb3ZlQXR0cmlidXRlKCJpZCIpfX19cmV0dXJuIGt0KGUucmVwbGFjZSh6LCIkMSIpLHQscixpKX1mdW5jdGlvbiBzdCgpe3ZhciBlPVtdO2Z1bmN0aW9uIHQobixyKXtyZXR1cm4gZS5wdXNoKG4rPSIgIik+aS5jYWNoZUxlbmd0aCYmZGVsZXRlIHRbZS5zaGlmdCgpXSx0W25dPXJ9cmV0dXJuIHR9ZnVuY3Rpb24gYXQoZSl7cmV0dXJuIGVbdl09ITAsZX1mdW5jdGlvbiB1dChlKXt2YXIgdD1wLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RyeXtyZXR1cm4hIWUodCl9Y2F0Y2gobil7cmV0dXJuITF9ZmluYWxseXt0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSx0PW51bGx9fWZ1bmN0aW9uIGx0KGUsdCl7dmFyIG49ZS5zcGxpdCgifCIpLHI9ZS5sZW5ndGg7d2hpbGUoci0tKWkuYXR0ckhhbmRsZVtuW3JdXT10fWZ1bmN0aW9uIGN0KGUsdCl7dmFyIG49dCYmZSxyPW4mJjE9PT1lLm5vZGVUeXBlJiYxPT09dC5ub2RlVHlwZSYmKH50LnNvdXJjZUluZGV4fHxEKS0ofmUuc291cmNlSW5kZXh8fEQpO2lmKHIpcmV0dXJuIHI7aWYobil3aGlsZShuPW4ubmV4dFNpYmxpbmcpaWYobj09PXQpcmV0dXJuLTE7cmV0dXJuIGU/MTotMX1mdW5jdGlvbiBwdChlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT1uJiZ0LnR5cGU9PT1lfX1mdW5jdGlvbiBmdChlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybigiaW5wdXQiPT09bnx8ImJ1dHRvbiI9PT1uKSYmdC50eXBlPT09ZX19ZnVuY3Rpb24gaHQoZSl7cmV0dXJuIGF0KGZ1bmN0aW9uKHQpe3JldHVybiB0PSt0LGF0KGZ1bmN0aW9uKG4scil7dmFyIGksbz1lKFtdLG4ubGVuZ3RoLHQpLHM9by5sZW5ndGg7d2hpbGUocy0tKW5baT1vW3NdXSYmKG5baV09IShyW2ldPW5baV0pKX0pfSl9cz1vdC5pc1hNTD1mdW5jdGlvbihlKXt2YXIgdD1lJiYoZS5vd25lckRvY3VtZW50fHxlKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIHQ/IkhUTUwiIT09dC5ub2RlTmFtZTohMX0sbj1vdC5zdXBwb3J0PXt9LGM9b3Quc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZT9lLm93bmVyRG9jdW1lbnR8fGU6YixyPXQuZGVmYXVsdFZpZXc7cmV0dXJuIHQhPT1wJiY5PT09dC5ub2RlVHlwZSYmdC5kb2N1bWVudEVsZW1lbnQ/KHA9dCxmPXQuZG9jdW1lbnRFbGVtZW50LGg9IXModCksciYmci5hdHRhY2hFdmVudCYmciE9PXIudG9wJiZyLmF0dGFjaEV2ZW50KCJvbmJlZm9yZXVubG9hZCIsZnVuY3Rpb24oKXtjKCl9KSxuLmF0dHJpYnV0ZXM9dXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2xhc3NOYW1lPSJpIiwhZS5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpfSksbi5nZXRFbGVtZW50c0J5VGFnTmFtZT11dChmdW5jdGlvbihlKXtyZXR1cm4gZS5hcHBlbmRDaGlsZCh0LmNyZWF0ZUNvbW1lbnQoIiIpKSwhZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aH0pLG4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT11dChmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9IjxkaXYgY2xhc3M9J2EnPjwvZGl2PjxkaXYgY2xhc3M9J2EgaSc+PC9kaXY+IixlLmZpcnN0Q2hpbGQuY2xhc3NOYW1lPSJpIiwyPT09ZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJpIikubGVuZ3RofSksbi5nZXRCeUlkPXV0KGZ1bmN0aW9uKGUpe3JldHVybiBmLmFwcGVuZENoaWxkKGUpLmlkPXYsIXQuZ2V0RWxlbWVudHNCeU5hbWV8fCF0LmdldEVsZW1lbnRzQnlOYW1lKHYpLmxlbmd0aH0pLG4uZ2V0QnlJZD8oaS5maW5kLklEPWZ1bmN0aW9uKGUsdCl7aWYodHlwZW9mIHQuZ2V0RWxlbWVudEJ5SWQhPT1qJiZoKXt2YXIgbj10LmdldEVsZW1lbnRCeUlkKGUpO3JldHVybiBuJiZuLnBhcmVudE5vZGU/W25dOltdfX0saS5maWx0ZXIuSUQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKG50LHJ0KTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKCJpZCIpPT09dH19KTooZGVsZXRlIGkuZmluZC5JRCxpLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UobnQscnQpO3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj10eXBlb2YgZS5nZXRBdHRyaWJ1dGVOb2RlIT09aiYmZS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBuJiZuLnZhbHVlPT09dH19KSxpLmZpbmQuVEFHPW4uZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHlwZW9mIHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1qP3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk6dW5kZWZpbmVkfTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT0wLG89dC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKTtpZigiKiI9PT1lKXt3aGlsZShuPW9baSsrXSkxPT09bi5ub2RlVHlwZSYmci5wdXNoKG4pO3JldHVybiByfXJldHVybiBvfSxpLmZpbmQuQ0xBU1M9bi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihlLHQpe3JldHVybiB0eXBlb2YgdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lIT09aiYmaD90LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZSk6dW5kZWZpbmVkfSxnPVtdLGQ9W10sKG4ucXNhPVEudGVzdCh0LnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKHV0KGZ1bmN0aW9uKGUpe2UuaW5uZXJIVE1MPSI8c2VsZWN0PjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IixlLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fGQucHVzaCgiXFxbIitNKyIqKD86dmFsdWV8IitSKyIpIiksZS5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aHx8ZC5wdXNoKCI6Y2hlY2tlZCIpfSksdXQoZnVuY3Rpb24oZSl7dmFyIG49dC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO24uc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIiksZS5hcHBlbmRDaGlsZChuKS5zZXRBdHRyaWJ1dGUoInQiLCIiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIlt0Xj0nJ10iKS5sZW5ndGgmJmQucHVzaCgiWypeJF09IitNKyIqKD86Jyd8XCJcIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RofHxkLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksZS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IiksZC5wdXNoKCIsLio6Iil9KSksKG4ubWF0Y2hlc1NlbGVjdG9yPVEudGVzdChtPWYud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxmLm1vek1hdGNoZXNTZWxlY3Rvcnx8Zi5vTWF0Y2hlc1NlbGVjdG9yfHxmLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJnV0KGZ1bmN0aW9uKGUpe24uZGlzY29ubmVjdGVkTWF0Y2g9bS5jYWxsKGUsImRpdiIpLG0uY2FsbChlLCJbcyE9JyddOngiKSxnLnB1c2goIiE9IixJKX0pLGQ9ZC5sZW5ndGgmJlJlZ0V4cChkLmpvaW4oInwiKSksZz1nLmxlbmd0aCYmUmVnRXhwKGcuam9pbigifCIpKSx5PVEudGVzdChmLmNvbnRhaW5zKXx8Zi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLHQpe3ZhciBuPTk9PT1lLm5vZGVUeXBlP2UuZG9jdW1lbnRFbGVtZW50OmUscj10JiZ0LnBhcmVudE5vZGU7cmV0dXJuIGU9PT1yfHwhKCFyfHwxIT09ci5ub2RlVHlwZXx8IShuLmNvbnRhaW5zP24uY29udGFpbnMocik6ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyKSkpfTpmdW5jdGlvbihlLHQpe2lmKHQpd2hpbGUodD10LnBhcmVudE5vZGUpaWYodD09PWUpcmV0dXJuITA7cmV0dXJuITF9LFM9Zi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLHIpe2lmKGU9PT1yKXJldHVybiBFPSEwLDA7dmFyIGk9ci5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyKTtyZXR1cm4gaT8xJml8fCFuLnNvcnREZXRhY2hlZCYmci5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihlKT09PWk/ZT09PXR8fHkoYixlKT8tMTpyPT09dHx8eShiLHIpPzE6bD9QLmNhbGwobCxlKS1QLmNhbGwobCxyKTowOjQmaT8tMToxOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24/LTE6MX06ZnVuY3Rpb24oZSxuKXt2YXIgcixpPTAsbz1lLnBhcmVudE5vZGUscz1uLnBhcmVudE5vZGUsYT1bZV0sdT1bbl07aWYoZT09PW4pcmV0dXJuIEU9ITAsMDtpZighb3x8IXMpcmV0dXJuIGU9PT10Py0xOm49PT10PzE6bz8tMTpzPzE6bD9QLmNhbGwobCxlKS1QLmNhbGwobCxuKTowO2lmKG89PT1zKXJldHVybiBjdChlLG4pO3I9ZTt3aGlsZShyPXIucGFyZW50Tm9kZSlhLnVuc2hpZnQocik7cj1uO3doaWxlKHI9ci5wYXJlbnROb2RlKXUudW5zaGlmdChyKTt3aGlsZShhW2ldPT09dVtpXSlpKys7cmV0dXJuIGk/Y3QoYVtpXSx1W2ldKTphW2ldPT09Yj8tMTp1W2ldPT09Yj8xOjB9LHQpOnB9LG90Lm1hdGNoZXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gb3QoZSxudWxsLG51bGwsdCl9LG90Lm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihlLHQpe2lmKChlLm93bmVyRG9jdW1lbnR8fGUpIT09cCYmYyhlKSx0PXQucmVwbGFjZShZLCI9JyQxJ10iKSwhKCFuLm1hdGNoZXNTZWxlY3Rvcnx8IWh8fGcmJmcudGVzdCh0KXx8ZCYmZC50ZXN0KHQpKSl0cnl7dmFyIHI9bS5jYWxsKGUsdCk7aWYocnx8bi5kaXNjb25uZWN0ZWRNYXRjaHx8ZS5kb2N1bWVudCYmMTEhPT1lLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiByfWNhdGNoKGkpe31yZXR1cm4gb3QodCxwLG51bGwsW2VdKS5sZW5ndGg+MH0sb3QuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9PXAmJmMoZSkseShlLHQpfSxvdC5hdHRyPWZ1bmN0aW9uKGUsdCl7KGUub3duZXJEb2N1bWVudHx8ZSkhPT1wJiZjKGUpO3ZhciByPWkuYXR0ckhhbmRsZVt0LnRvTG93ZXJDYXNlKCldLG89ciYmQS5jYWxsKGkuYXR0ckhhbmRsZSx0LnRvTG93ZXJDYXNlKCkpP3IoZSx0LCFoKTp1bmRlZmluZWQ7cmV0dXJuIG89PT11bmRlZmluZWQ/bi5hdHRyaWJ1dGVzfHwhaD9lLmdldEF0dHJpYnV0ZSh0KToobz1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZvLnNwZWNpZmllZD9vLnZhbHVlOm51bGw6b30sb3QuZXJyb3I9ZnVuY3Rpb24oZSl7dGhyb3cgRXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrZSl9LG90LnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oZSl7dmFyIHQscj1bXSxpPTAsbz0wO2lmKEU9IW4uZGV0ZWN0RHVwbGljYXRlcyxsPSFuLnNvcnRTdGFibGUmJmUuc2xpY2UoMCksZS5zb3J0KFMpLEUpe3doaWxlKHQ9ZVtvKytdKXQ9PT1lW29dJiYoaT1yLnB1c2gobykpO3doaWxlKGktLSllLnNwbGljZShyW2ldLDEpfXJldHVybiBlfSxvPW90LmdldFRleHQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj0iIixyPTAsaT1lLm5vZGVUeXBlO2lmKGkpe2lmKDE9PT1pfHw5PT09aXx8MTE9PT1pKXtpZigic3RyaW5nIj09dHlwZW9mIGUudGV4dENvbnRlbnQpcmV0dXJuIGUudGV4dENvbnRlbnQ7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKW4rPW8oZSl9ZWxzZSBpZigzPT09aXx8ND09PWkpcmV0dXJuIGUubm9kZVZhbHVlfWVsc2UgZm9yKDt0PWVbcl07cisrKW4rPW8odCk7cmV0dXJuIG59LGk9b3Quc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86YXQsbWF0Y2g6SixhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKG50LHJ0KSxlWzNdPShlWzRdfHxlWzVdfHwiIikucmVwbGFjZShudCxydCksIn49Ij09PWVbMl0mJihlWzNdPSIgIitlWzNdKyIgIiksZS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnRvTG93ZXJDYXNlKCksIm50aCI9PT1lWzFdLnNsaWNlKDAsMyk/KGVbM118fG90LmVycm9yKGVbMF0pLGVbNF09KyhlWzRdP2VbNV0rKGVbNl18fDEpOjIqKCJldmVuIj09PWVbM118fCJvZGQiPT09ZVszXSkpLGVbNV09KyhlWzddK2VbOF18fCJvZGQiPT09ZVszXSkpOmVbM10mJm90LmVycm9yKGVbMF0pLGV9LFBTRVVETzpmdW5jdGlvbihlKXt2YXIgdCxuPSFlWzVdJiZlWzJdO3JldHVybiBKLkNISUxELnRlc3QoZVswXSk/bnVsbDooZVszXSYmZVs0XSE9PXVuZGVmaW5lZD9lWzJdPWVbNF06biYmVi50ZXN0KG4pJiYodD1ndChuLCEwKSkmJih0PW4uaW5kZXhPZigiKSIsbi5sZW5ndGgtdCktbi5sZW5ndGgpJiYoZVswXT1lWzBdLnNsaWNlKDAsdCksZVsyXT1uLnNsaWNlKDAsdCkpLGUuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UobnQscnQpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09ZT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dH19LENMQVNTOmZ1bmN0aW9uKGUpe3ZhciB0PUNbZSsiICJdO3JldHVybiB0fHwodD1SZWdFeHAoIihefCIrTSsiKSIrZSsiKCIrTSsifCQpIikpJiZDKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQudGVzdCgic3RyaW5nIj09dHlwZW9mIGUuY2xhc3NOYW1lJiZlLmNsYXNzTmFtZXx8dHlwZW9mIGUuZ2V0QXR0cmlidXRlIT09aiYmZS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIGk9b3QuYXR0cihyLGUpO3JldHVybiBudWxsPT1pPyIhPSI9PT10OnQ/KGkrPSIiLCI9Ij09PXQ/aT09PW46IiE9Ij09PXQ/aSE9PW46Il49Ij09PXQ/biYmMD09PWkuaW5kZXhPZihuKToiKj0iPT09dD9uJiZpLmluZGV4T2Yobik+LTE6IiQ9Ij09PXQ/biYmaS5zbGljZSgtbi5sZW5ndGgpPT09bjoifj0iPT09dD8oIiAiK2krIiAiKS5pbmRleE9mKG4pPi0xOiJ8PSI9PT10P2k9PT1ufHxpLnNsaWNlKDAsbi5sZW5ndGgrMSk9PT1uKyItIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvPSJudGgiIT09ZS5zbGljZSgwLDMpLHM9Imxhc3QiIT09ZS5zbGljZSgtNCksYT0ib2YtdHlwZSI9PT10O3JldHVybiAxPT09ciYmMD09PWk/ZnVuY3Rpb24oZSl7cmV0dXJuISFlLnBhcmVudE5vZGV9OmZ1bmN0aW9uKHQsbix1KXt2YXIgbCxjLHAsZixoLGQsZz1vIT09cz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLG09dC5wYXJlbnROb2RlLHk9YSYmdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHg9IXUmJiFhO2lmKG0pe2lmKG8pe3doaWxlKGcpe3A9dDt3aGlsZShwPXBbZ10paWYoYT9wLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT15OjE9PT1wLm5vZGVUeXBlKXJldHVybiExO2Q9Zz0ib25seSI9PT1lJiYhZCYmIm5leHRTaWJsaW5nIn1yZXR1cm4hMH1pZihkPVtzP20uZmlyc3RDaGlsZDptLmxhc3RDaGlsZF0scyYmeCl7Yz1tW3ZdfHwobVt2XT17fSksbD1jW2VdfHxbXSxoPWxbMF09PT13JiZsWzFdLGY9bFswXT09PXcmJmxbMl0scD1oJiZtLmNoaWxkTm9kZXNbaF07d2hpbGUocD0rK2gmJnAmJnBbZ118fChmPWg9MCl8fGQucG9wKCkpaWYoMT09PXAubm9kZVR5cGUmJisrZiYmcD09PXQpe2NbZV09W3csaCxmXTticmVha319ZWxzZSBpZih4JiYobD0odFt2XXx8KHRbdl09e30pKVtlXSkmJmxbMF09PT13KWY9bFsxXTtlbHNlIHdoaWxlKHA9KytoJiZwJiZwW2ddfHwoZj1oPTApfHxkLnBvcCgpKWlmKChhP3Aubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXk6MT09PXAubm9kZVR5cGUpJiYrK2YmJih4JiYoKHBbdl18fChwW3ZdPXt9KSlbZV09W3csZl0pLHA9PT10KSlicmVhaztyZXR1cm4gZi09aSxmPT09cnx8MD09PWYlciYmZi9yPj0wfX19LFBTRVVETzpmdW5jdGlvbihlLHQpe3ZhciBuLHI9aS5wc2V1ZG9zW2VdfHxpLnNldEZpbHRlcnNbZS50b0xvd2VyQ2FzZSgpXXx8b3QuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIitlKTtyZXR1cm4gclt2XT9yKHQpOnIubGVuZ3RoPjE/KG49W2UsZSwiIix0XSxpLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKT9hdChmdW5jdGlvbihlLG4pe3ZhciBpLG89cihlLHQpLHM9by5sZW5ndGg7d2hpbGUocy0tKWk9UC5jYWxsKGUsb1tzXSksZVtpXT0hKG5baV09b1tzXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gcihlLDAsbil9KTpyfX0scHNldWRvczp7bm90OmF0KGZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49W10scj1hKGUucmVwbGFjZSh6LCIkMSIpKTtyZXR1cm4gclt2XT9hdChmdW5jdGlvbihlLHQsbixpKXt2YXIgbyxzPXIoZSxudWxsLGksW10pLGE9ZS5sZW5ndGg7d2hpbGUoYS0tKShvPXNbYV0pJiYoZVthXT0hKHRbYV09bykpfSk6ZnVuY3Rpb24oZSxpLG8pe3JldHVybiB0WzBdPWUscih0LG51bGwsbyxuKSwhbi5wb3AoKX19KSxoYXM6YXQoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBvdChlLHQpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOmF0KGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4odC50ZXh0Q29udGVudHx8dC5pbm5lclRleHR8fG8odCkpLmluZGV4T2YoZSk+LTF9fSksbGFuZzphdChmdW5jdGlvbihlKXtyZXR1cm4gRy50ZXN0KGV8fCIiKXx8b3QuZXJyb3IoInVuc3VwcG9ydGVkIGxhbmc6ICIrZSksZT1lLnJlcGxhY2UobnQscnQpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24odCl7dmFyIG47ZG8gaWYobj1oP3QubGFuZzp0LmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8dC5nZXRBdHRyaWJ1dGUoImxhbmciKSlyZXR1cm4gbj1uLnRvTG93ZXJDYXNlKCksbj09PWV8fDA9PT1uLmluZGV4T2YoZSsiLSIpO3doaWxlKCh0PXQucGFyZW50Tm9kZSkmJjE9PT10Lm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24odCl7dmFyIG49ZS5sb2NhdGlvbiYmZS5sb2NhdGlvbi5oYXNoO3JldHVybiBuJiZuLnNsaWNlKDEpPT09dC5pZH0scm9vdDpmdW5jdGlvbihlKXtyZXR1cm4gZT09PWZ9LGZvY3VzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09cC5hY3RpdmVFbGVtZW50JiYoIXAuaGFzRm9jdXN8fHAuaGFzRm9jdXMoKSkmJiEhKGUudHlwZXx8ZS5ocmVmfHx+ZS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMX0sZGlzYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMH0sY2hlY2tlZDpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PXQmJiEhZS5jaGVja2VkfHwib3B0aW9uIj09PXQmJiEhZS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZSYmZS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsZS5zZWxlY3RlZD09PSEwfSxlbXB0eTpmdW5jdGlvbihlKXtmb3IoZT1lLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpaWYoZS5ub2RlTmFtZT4iQCJ8fDM9PT1lLm5vZGVUeXBlfHw0PT09ZS5ub2RlVHlwZSlyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiFpLnBzZXVkb3MuZW1wdHkoZSl9LGhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZXQudGVzdChlLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFoudGVzdChlLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmImJ1dHRvbiI9PT1lLnR5cGV8fCJidXR0b24iPT09dH0sdGV4dDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1lLnR5cGUmJihudWxsPT0odD1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8dC50b0xvd2VyQ2FzZSgpPT09ZS50eXBlKX0sZmlyc3Q6aHQoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Omh0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuW3QtMV19KSxlcTpodChmdW5jdGlvbihlLHQsbil7cmV0dXJuWzA+bj9uK3Q6bl19KSxldmVuOmh0KGZ1bmN0aW9uKGUsdCl7dmFyIG49MDtmb3IoO3Q+bjtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLG9kZDpodChmdW5jdGlvbihlLHQpe3ZhciBuPTE7Zm9yKDt0Pm47bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxsdDpodChmdW5jdGlvbihlLHQsbil7dmFyIHI9MD5uP24rdDpuO2Zvcig7LS1yPj0wOyllLnB1c2gocik7cmV0dXJuIGV9KSxndDpodChmdW5jdGlvbihlLHQsbil7dmFyIHI9MD5uP24rdDpuO2Zvcig7dD4rK3I7KWUucHVzaChyKTtyZXR1cm4gZX0pfX0saS5wc2V1ZG9zLm50aD1pLnBzZXVkb3MuZXE7Zm9yKHQgaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0paS5wc2V1ZG9zW3RdPXB0KHQpO2Zvcih0IGlue3N1Ym1pdDohMCxyZXNldDohMH0paS5wc2V1ZG9zW3RdPWZ0KHQpO2Z1bmN0aW9uIGR0KCl7fWR0LnByb3RvdHlwZT1pLmZpbHRlcnM9aS5wc2V1ZG9zLGkuc2V0RmlsdGVycz1uZXcgZHQ7ZnVuY3Rpb24gZ3QoZSx0KXt2YXIgbixyLG8scyxhLHUsbCxjPWtbZSsiICJdO2lmKGMpcmV0dXJuIHQ/MDpjLnNsaWNlKDApO2E9ZSx1PVtdLGw9aS5wcmVGaWx0ZXI7d2hpbGUoYSl7KCFufHwocj1fLmV4ZWMoYSkpKSYmKHImJihhPWEuc2xpY2UoclswXS5sZW5ndGgpfHxhKSx1LnB1c2gobz1bXSkpLG49ITEsKHI9WC5leGVjKGEpKSYmKG49ci5zaGlmdCgpLG8ucHVzaCh7dmFsdWU6bix0eXBlOnJbMF0ucmVwbGFjZSh6LCIgIil9KSxhPWEuc2xpY2Uobi5sZW5ndGgpKTtmb3IocyBpbiBpLmZpbHRlcikhKHI9SltzXS5leGVjKGEpKXx8bFtzXSYmIShyPWxbc10ocikpfHwobj1yLnNoaWZ0KCksby5wdXNoKHt2YWx1ZTpuLHR5cGU6cyxtYXRjaGVzOnJ9KSxhPWEuc2xpY2Uobi5sZW5ndGgpKTtpZighbilicmVha31yZXR1cm4gdD9hLmxlbmd0aDphP290LmVycm9yKGUpOmsoZSx1KS5zbGljZSgwKX1mdW5jdGlvbiBtdChlKXt2YXIgdD0wLG49ZS5sZW5ndGgscj0iIjtmb3IoO24+dDt0Kyspcis9ZVt0XS52YWx1ZTtyZXR1cm4gcn1mdW5jdGlvbiB5dChlLHQsbil7dmFyIGk9dC5kaXIsbz1uJiYicGFyZW50Tm9kZSI9PT1pLHM9VCsrO3JldHVybiB0LmZpcnN0P2Z1bmN0aW9uKHQsbixyKXt3aGlsZSh0PXRbaV0paWYoMT09PXQubm9kZVR5cGV8fG8pcmV0dXJuIGUodCxuLHIpfTpmdW5jdGlvbih0LG4sYSl7dmFyIHUsbCxjLHA9dysiICIrcztpZihhKXt3aGlsZSh0PXRbaV0paWYoKDE9PT10Lm5vZGVUeXBlfHxvKSYmZSh0LG4sYSkpcmV0dXJuITB9ZWxzZSB3aGlsZSh0PXRbaV0paWYoMT09PXQubm9kZVR5cGV8fG8paWYoYz10W3ZdfHwodFt2XT17fSksKGw9Y1tpXSkmJmxbMF09PT1wKXtpZigodT1sWzFdKT09PSEwfHx1PT09cilyZXR1cm4gdT09PSEwfWVsc2UgaWYobD1jW2ldPVtwXSxsWzFdPWUodCxuLGEpfHxyLGxbMV09PT0hMClyZXR1cm4hMH19ZnVuY3Rpb24gdnQoZSl7cmV0dXJuIGUubGVuZ3RoPjE/ZnVuY3Rpb24odCxuLHIpe3ZhciBpPWUubGVuZ3RoO3doaWxlKGktLSlpZighZVtpXSh0LG4scikpcmV0dXJuITE7cmV0dXJuITB9OmVbMF19ZnVuY3Rpb24geHQoZSx0LG4scixpKXt2YXIgbyxzPVtdLGE9MCx1PWUubGVuZ3RoLGw9bnVsbCE9dDtmb3IoO3U+YTthKyspKG89ZVthXSkmJighbnx8bihvLHIsaSkpJiYocy5wdXNoKG8pLGwmJnQucHVzaChhKSk7cmV0dXJuIHN9ZnVuY3Rpb24gYnQoZSx0LG4scixpLG8pe3JldHVybiByJiYhclt2XSYmKHI9YnQocikpLGkmJiFpW3ZdJiYoaT1idChpLG8pKSxhdChmdW5jdGlvbihvLHMsYSx1KXt2YXIgbCxjLHAsZj1bXSxoPVtdLGQ9cy5sZW5ndGgsZz1vfHxDdCh0fHwiKiIsYS5ub2RlVHlwZT9bYV06YSxbXSksbT0hZXx8IW8mJnQ/Zzp4dChnLGYsZSxhLHUpLHk9bj9pfHwobz9lOmR8fHIpP1tdOnM6bTtpZihuJiZuKG0seSxhLHUpLHIpe2w9eHQoeSxoKSxyKGwsW10sYSx1KSxjPWwubGVuZ3RoO3doaWxlKGMtLSkocD1sW2NdKSYmKHlbaFtjXV09IShtW2hbY11dPXApKX1pZihvKXtpZihpfHxlKXtpZihpKXtsPVtdLGM9eS5sZW5ndGg7d2hpbGUoYy0tKShwPXlbY10pJiZsLnB1c2gobVtjXT1wKTtpKG51bGwseT1bXSxsLHUpfWM9eS5sZW5ndGg7d2hpbGUoYy0tKShwPXlbY10pJiYobD1pP1AuY2FsbChvLHApOmZbY10pPi0xJiYob1tsXT0hKHNbbF09cCkpfX1lbHNlIHk9eHQoeT09PXM/eS5zcGxpY2UoZCx5Lmxlbmd0aCk6eSksaT9pKG51bGwscyx5LHUpOk8uYXBwbHkocyx5KX0pfWZ1bmN0aW9uIHd0KGUpe3ZhciB0LG4scixvPWUubGVuZ3RoLHM9aS5yZWxhdGl2ZVtlWzBdLnR5cGVdLGE9c3x8aS5yZWxhdGl2ZVsiICJdLGw9cz8xOjAsYz15dChmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9LGEsITApLHA9eXQoZnVuY3Rpb24oZSl7cmV0dXJuIFAuY2FsbCh0LGUpPi0xfSxhLCEwKSxmPVtmdW5jdGlvbihlLG4scil7cmV0dXJuIXMmJihyfHxuIT09dSl8fCgodD1uKS5ub2RlVHlwZT9jKGUsbixyKTpwKGUsbixyKSl9XTtmb3IoO28+bDtsKyspaWYobj1pLnJlbGF0aXZlW2VbbF0udHlwZV0pZj1beXQodnQoZiksbildO2Vsc2V7aWYobj1pLmZpbHRlcltlW2xdLnR5cGVdLmFwcGx5KG51bGwsZVtsXS5tYXRjaGVzKSxuW3ZdKXtmb3Iocj0rK2w7bz5yO3IrKylpZihpLnJlbGF0aXZlW2Vbcl0udHlwZV0pYnJlYWs7cmV0dXJuIGJ0KGw+MSYmdnQoZiksbD4xJiZtdChlLnNsaWNlKDAsbC0xKS5jb25jYXQoe3ZhbHVlOiIgIj09PWVbbC0yXS50eXBlPyIqIjoiIn0pKS5yZXBsYWNlKHosIiQxIiksbixyPmwmJnd0KGUuc2xpY2UobCxyKSksbz5yJiZ3dChlPWUuc2xpY2UocikpLG8+ciYmbXQoZSkpfWYucHVzaChuKX1yZXR1cm4gdnQoZil9ZnVuY3Rpb24gVHQoZSx0KXt2YXIgbj0wLG89dC5sZW5ndGg+MCxzPWUubGVuZ3RoPjAsYT1mdW5jdGlvbihhLGwsYyxmLGgpe3ZhciBkLGcsbSx5PVtdLHY9MCx4PSIwIixiPWEmJltdLFQ9bnVsbCE9aCxDPXUsaz1hfHxzJiZpLmZpbmQuVEFHKCIqIixoJiZsLnBhcmVudE5vZGV8fGwpLE49dys9bnVsbD09Qz8xOk1hdGgucmFuZG9tKCl8fC4xO2ZvcihUJiYodT1sIT09cCYmbCxyPW4pO251bGwhPShkPWtbeF0pO3grKyl7aWYocyYmZCl7Zz0wO3doaWxlKG09ZVtnKytdKWlmKG0oZCxsLGMpKXtmLnB1c2goZCk7YnJlYWt9VCYmKHc9TixyPSsrbil9byYmKChkPSFtJiZkKSYmdi0tLGEmJmIucHVzaChkKSl9aWYodis9eCxvJiZ4IT09dil7Zz0wO3doaWxlKG09dFtnKytdKW0oYix5LGwsYyk7aWYoYSl7aWYodj4wKXdoaWxlKHgtLSliW3hdfHx5W3hdfHwoeVt4XT1xLmNhbGwoZikpO3k9eHQoeSl9Ty5hcHBseShmLHkpLFQmJiFhJiZ5Lmxlbmd0aD4wJiZ2K3QubGVuZ3RoPjEmJm90LnVuaXF1ZVNvcnQoZil9cmV0dXJuIFQmJih3PU4sdT1DKSxifTtyZXR1cm4gbz9hdChhKTphfWE9b3QuY29tcGlsZT1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT1bXSxvPU5bZSsiICJdO2lmKCFvKXt0fHwodD1ndChlKSksbj10Lmxlbmd0aDt3aGlsZShuLS0pbz13dCh0W25dKSxvW3ZdP3IucHVzaChvKTppLnB1c2gobyk7bz1OKGUsVHQoaSxyKSl9cmV0dXJuIG99O2Z1bmN0aW9uIEN0KGUsdCxuKXt2YXIgcj0wLGk9dC5sZW5ndGg7Zm9yKDtpPnI7cisrKW90KGUsdFtyXSxuKTtyZXR1cm4gbn1mdW5jdGlvbiBrdChlLHQscixvKXt2YXIgcyx1LGwsYyxwLGY9Z3QoZSk7aWYoIW8mJjE9PT1mLmxlbmd0aCl7aWYodT1mWzBdPWZbMF0uc2xpY2UoMCksdS5sZW5ndGg+MiYmIklEIj09PShsPXVbMF0pLnR5cGUmJm4uZ2V0QnlJZCYmOT09PXQubm9kZVR5cGUmJmgmJmkucmVsYXRpdmVbdVsxXS50eXBlXSl7aWYodD0oaS5maW5kLklEKGwubWF0Y2hlc1swXS5yZXBsYWNlKG50LHJ0KSx0KXx8W10pWzBdLCF0KXJldHVybiByO2U9ZS5zbGljZSh1LnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1zPUoubmVlZHNDb250ZXh0LnRlc3QoZSk/MDp1Lmxlbmd0aDt3aGlsZShzLS0pe2lmKGw9dVtzXSxpLnJlbGF0aXZlW2M9bC50eXBlXSlicmVhaztpZigocD1pLmZpbmRbY10pJiYobz1wKGwubWF0Y2hlc1swXS5yZXBsYWNlKG50LHJ0KSxVLnRlc3QodVswXS50eXBlKSYmdC5wYXJlbnROb2RlfHx0KSkpe2lmKHUuc3BsaWNlKHMsMSksZT1vLmxlbmd0aCYmbXQodSksIWUpcmV0dXJuIE8uYXBwbHkocixvKSxyO2JyZWFrfX19cmV0dXJuIGEoZSxmKShvLHQsIWgscixVLnRlc3QoZSkpLHJ9bi5zb3J0U3RhYmxlPXYuc3BsaXQoIiIpLnNvcnQoUykuam9pbigiIik9PT12LG4uZGV0ZWN0RHVwbGljYXRlcz1FLGMoKSxuLnNvcnREZXRhY2hlZD11dChmdW5jdGlvbihlKXtyZXR1cm4gMSZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHAuY3JlYXRlRWxlbWVudCgiZGl2IikpfSksdXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IiwiIyI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIil9KXx8bHQoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbj91bmRlZmluZWQ6ZS5nZXRBdHRyaWJ1dGUodCwidHlwZSI9PT10LnRvTG93ZXJDYXNlKCk/MToyKX0pLG4uYXR0cmlidXRlcyYmdXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5uZXJIVE1MPSI8aW5wdXQvPiIsZS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSwiIj09PWUuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIil9KXx8bHQoInZhbHVlIixmdW5jdGlvbihlLHQsbil7cmV0dXJuIG58fCJpbnB1dCIhPT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/dW5kZWZpbmVkOmUuZGVmYXVsdFZhbHVlfSksdXQoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWUuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpfSl8fGx0KFIsZnVuY3Rpb24oZSx0LG4pe3ZhciByO3JldHVybiBuP3VuZGVmaW5lZDoocj1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZyLnNwZWNpZmllZD9yLnZhbHVlOmVbdF09PT0hMD90LnRvTG93ZXJDYXNlKCk6bnVsbH0pLHguZmluZD1vdCx4LmV4cHI9b3Quc2VsZWN0b3JzLHguZXhwclsiOiJdPXguZXhwci5wc2V1ZG9zLHgudW5pcXVlPW90LnVuaXF1ZVNvcnQseC50ZXh0PW90LmdldFRleHQseC5pc1hNTERvYz1vdC5pc1hNTCx4LmNvbnRhaW5zPW90LmNvbnRhaW5zfShlKTt2YXIgRD17fTtmdW5jdGlvbiBBKGUpe3ZhciB0PURbZV09e307cmV0dXJuIHguZWFjaChlLm1hdGNoKHcpfHxbXSxmdW5jdGlvbihlLG4pe3Rbbl09ITB9KSx0fXguQ2FsbGJhY2tzPWZ1bmN0aW9uKGUpe2U9InN0cmluZyI9PXR5cGVvZiBlP0RbZV18fEEoZSk6eC5leHRlbmQoe30sZSk7dmFyIHQsbixyLGksbyxzLGE9W10sdT0hZS5vbmNlJiZbXSxsPWZ1bmN0aW9uKHApe2Zvcih0PWUubWVtb3J5JiZwLG49ITAscz1pfHwwLGk9MCxvPWEubGVuZ3RoLHI9ITA7YSYmbz5zO3MrKylpZihhW3NdLmFwcGx5KHBbMF0scFsxXSk9PT0hMSYmZS5zdG9wT25GYWxzZSl7dD0hMTticmVha31yPSExLGEmJih1P3UubGVuZ3RoJiZsKHUuc2hpZnQoKSk6dD9hPVtdOmMuZGlzYWJsZSgpKX0sYz17YWRkOmZ1bmN0aW9uKCl7aWYoYSl7dmFyIG49YS5sZW5ndGg7KGZ1bmN0aW9uIHModCl7eC5lYWNoKHQsZnVuY3Rpb24odCxuKXt2YXIgcj14LnR5cGUobik7ImZ1bmN0aW9uIj09PXI/ZS51bmlxdWUmJmMuaGFzKG4pfHxhLnB1c2gobik6biYmbi5sZW5ndGgmJiJzdHJpbmciIT09ciYmcyhuKX0pfSkoYXJndW1lbnRzKSxyP289YS5sZW5ndGg6dCYmKGk9bixsKHQpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGEmJnguZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oZSx0KXt2YXIgbjt3aGlsZSgobj14LmluQXJyYXkodCxhLG4pKT4tMSlhLnNwbGljZShuLDEpLHImJihvPj1uJiZvLS0scz49biYmcy0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihlKXtyZXR1cm4gZT94LmluQXJyYXkoZSxhKT4tMTohKCFhfHwhYS5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBhPVtdLG89MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGE9dT10PXVuZGVmaW5lZCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFhfSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIHU9dW5kZWZpbmVkLHR8fGMuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiF1fSxmaXJlV2l0aDpmdW5jdGlvbihlLHQpe3JldHVybiFhfHxuJiYhdXx8KHQ9dHx8W10sdD1bZSx0LnNsaWNlP3Quc2xpY2UoKTp0XSxyP3UucHVzaCh0KTpsKHQpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGMuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFufX07cmV0dXJuIGN9LHguZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihlKXt2YXIgdD1bWyJyZXNvbHZlIiwiZG9uZSIseC5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIix4LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVqZWN0ZWQiXSxbIm5vdGlmeSIsInByb2dyZXNzIix4LkNhbGxiYWNrcygibWVtb3J5IildXSxuPSJwZW5kaW5nIixyPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBufSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gaS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuIHguRGVmZXJyZWQoZnVuY3Rpb24obil7eC5lYWNoKHQsZnVuY3Rpb24odCxvKXt2YXIgcz1vWzBdLGE9eC5pc0Z1bmN0aW9uKGVbdF0pJiZlW3RdO2lbb1sxXV0oZnVuY3Rpb24oKXt2YXIgZT1hJiZhLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlJiZ4LmlzRnVuY3Rpb24oZS5wcm9taXNlKT9lLnByb21pc2UoKS5kb25lKG4ucmVzb2x2ZSkuZmFpbChuLnJlamVjdCkucHJvZ3Jlc3Mobi5ub3RpZnkpOm5bcysiV2l0aCJdKHRoaXM9PT1yP24ucHJvbWlzZSgpOnRoaXMsYT9bZV06YXJndW1lbnRzKX0pfSksZT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lP3guZXh0ZW5kKGUscik6cn19LGk9e307cmV0dXJuIHIucGlwZT1yLnRoZW4seC5lYWNoKHQsZnVuY3Rpb24oZSxvKXt2YXIgcz1vWzJdLGE9b1szXTtyW29bMV1dPXMuYWRkLGEmJnMuYWRkKGZ1bmN0aW9uKCl7bj1hfSx0WzFeZV1bMl0uZGlzYWJsZSx0WzJdWzJdLmxvY2spLGlbb1swXV09ZnVuY3Rpb24oKXtyZXR1cm4gaVtvWzBdKyJXaXRoIl0odGhpcz09PWk/cjp0aGlzLGFyZ3VtZW50cyksdGhpc30saVtvWzBdKyJXaXRoIl09cy5maXJlV2l0aH0pLHIucHJvbWlzZShpKSxlJiZlLmNhbGwoaSxpKSxpfSx3aGVuOmZ1bmN0aW9uKGUpe3ZhciB0PTAsbj1kLmNhbGwoYXJndW1lbnRzKSxyPW4ubGVuZ3RoLGk9MSE9PXJ8fGUmJnguaXNGdW5jdGlvbihlLnByb21pc2UpP3I6MCxvPTE9PT1pP2U6eC5EZWZlcnJlZCgpLHM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBmdW5jdGlvbihyKXt0W2VdPXRoaXMsbltlXT1hcmd1bWVudHMubGVuZ3RoPjE/ZC5jYWxsKGFyZ3VtZW50cyk6cixuPT09YT9vLm5vdGlmeVdpdGgodCxuKTotLWl8fG8ucmVzb2x2ZVdpdGgodCxuKX19LGEsdSxsO2lmKHI+MSlmb3IoYT1BcnJheShyKSx1PUFycmF5KHIpLGw9QXJyYXkocik7cj50O3QrKyluW3RdJiZ4LmlzRnVuY3Rpb24oblt0XS5wcm9taXNlKT9uW3RdLnByb21pc2UoKS5kb25lKHModCxsLG4pKS5mYWlsKG8ucmVqZWN0KS5wcm9ncmVzcyhzKHQsdSxhKSk6LS1pO3JldHVybiBpfHxvLnJlc29sdmVXaXRoKGwsbiksby5wcm9taXNlKCl9fSkseC5zdXBwb3J0PWZ1bmN0aW9uKHQpe3ZhciBuPW8uY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxyPW8uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGk9by5jcmVhdGVFbGVtZW50KCJkaXYiKSxzPW8uY3JlYXRlRWxlbWVudCgic2VsZWN0IiksYT1zLmFwcGVuZENoaWxkKG8uY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO3JldHVybiBuLnR5cGU/KG4udHlwZT0iY2hlY2tib3giLHQuY2hlY2tPbj0iIiE9PW4udmFsdWUsdC5vcHRTZWxlY3RlZD1hLnNlbGVjdGVkLHQucmVsaWFibGVNYXJnaW5SaWdodD0hMCx0LmJveFNpemluZ1JlbGlhYmxlPSEwLHQucGl4ZWxQb3NpdGlvbj0hMSxuLmNoZWNrZWQ9ITAsdC5ub0Nsb25lQ2hlY2tlZD1uLmNsb25lTm9kZSghMCkuY2hlY2tlZCxzLmRpc2FibGVkPSEwLHQub3B0RGlzYWJsZWQ9IWEuZGlzYWJsZWQsbj1vLmNyZWF0ZUVsZW1lbnQoImlucHV0Iiksbi52YWx1ZT0idCIsbi50eXBlPSJyYWRpbyIsdC5yYWRpb1ZhbHVlPSJ0Ij09PW4udmFsdWUsbi5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJ0Iiksbi5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0Iiksci5hcHBlbmRDaGlsZChuKSx0LmNoZWNrQ2xvbmU9ci5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsdC5mb2N1c2luQnViYmxlcz0ib25mb2N1c2luImluIGUsaS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLGkuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIix0LmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09aS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCx4KGZ1bmN0aW9uKCl7dmFyIG4scixzPSJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpibG9jazstd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O2JveC1zaXppbmc6Y29udGVudC1ib3giLGE9by5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdO2EmJihuPW8uY3JlYXRlRWxlbWVudCgiZGl2Iiksbi5zdHlsZS5jc3NUZXh0PSJib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6LTk5OTlweDttYXJnaW4tdG9wOjFweCIsYS5hcHBlbmRDaGlsZChuKS5hcHBlbmRDaGlsZChpKSxpLmlubmVySFRNTD0iIixpLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtwYWRkaW5nOjFweDtib3JkZXI6MXB4O2Rpc3BsYXk6YmxvY2s7d2lkdGg6NHB4O21hcmdpbi10b3A6MSU7cG9zaXRpb246YWJzb2x1dGU7dG9wOjElIix4LnN3YXAoYSxudWxsIT1hLnN0eWxlLnpvb20/e3pvb206MX06e30sZnVuY3Rpb24oKXt0LmJveFNpemluZz00PT09aS5vZmZzZXRXaWR0aH0pLGUuZ2V0Q29tcHV0ZWRTdHlsZSYmKHQucGl4ZWxQb3NpdGlvbj0iMSUiIT09KGUuZ2V0Q29tcHV0ZWRTdHlsZShpLG51bGwpfHx7fSkudG9wLHQuYm94U2l6aW5nUmVsaWFibGU9IjRweCI9PT0oZS5nZXRDb21wdXRlZFN0eWxlKGksbnVsbCl8fHt3aWR0aDoiNHB4In0pLndpZHRoLHI9aS5hcHBlbmRDaGlsZChvLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxyLnN0eWxlLmNzc1RleHQ9aS5zdHlsZS5jc3NUZXh0PXMsci5zdHlsZS5tYXJnaW5SaWdodD1yLnN0eWxlLndpZHRoPSIwIixpLnN0eWxlLndpZHRoPSIxcHgiLHQucmVsaWFibGVNYXJnaW5SaWdodD0hcGFyc2VGbG9hdCgoZS5nZXRDb21wdXRlZFN0eWxlKHIsbnVsbCl8fHt9KS5tYXJnaW5SaWdodCkpLGEucmVtb3ZlQ2hpbGQobikpfSksdCk6dH0oe30pO3ZhciBMLHEsSD0vKD86XHtbXHNcU10qXH18XFtbXHNcU10qXF0pJC8sTz0vKFtBLVpdKS9nO2Z1bmN0aW9uIEYoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5jYWNoZT17fSwwLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57fX19KSx0aGlzLmV4cGFuZG89eC5leHBhbmRvK01hdGgucmFuZG9tKCl9Ri51aWQ9MSxGLmFjY2VwdHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUubm9kZVR5cGU/MT09PWUubm9kZVR5cGV8fDk9PT1lLm5vZGVUeXBlOiEwfSxGLnByb3RvdHlwZT17a2V5OmZ1bmN0aW9uKGUpe2lmKCFGLmFjY2VwdHMoZSkpcmV0dXJuIDA7dmFyIHQ9e30sbj1lW3RoaXMuZXhwYW5kb107aWYoIW4pe249Ri51aWQrKzt0cnl7dFt0aGlzLmV4cGFuZG9dPXt2YWx1ZTpufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLHQpfWNhdGNoKHIpe3RbdGhpcy5leHBhbmRvXT1uLHguZXh0ZW5kKGUsdCl9fXJldHVybiB0aGlzLmNhY2hlW25dfHwodGhpcy5jYWNoZVtuXT17fSksbn0sc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPXRoaXMua2V5KGUpLG89dGhpcy5jYWNoZVtpXTtpZigic3RyaW5nIj09dHlwZW9mIHQpb1t0XT1uO2Vsc2UgaWYoeC5pc0VtcHR5T2JqZWN0KG8pKXguZXh0ZW5kKHRoaXMuY2FjaGVbaV0sdCk7ZWxzZSBmb3IociBpbiB0KW9bcl09dFtyXTtyZXR1cm4gb30sZ2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5jYWNoZVt0aGlzLmtleShlKV07cmV0dXJuIHQ9PT11bmRlZmluZWQ/bjpuW3RdfSxhY2Nlc3M6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO3JldHVybiB0PT09dW5kZWZpbmVkfHx0JiYic3RyaW5nIj09dHlwZW9mIHQmJm49PT11bmRlZmluZWQ/KHI9dGhpcy5nZXQoZSx0KSxyIT09dW5kZWZpbmVkP3I6dGhpcy5nZXQoZSx4LmNhbWVsQ2FzZSh0KSkpOih0aGlzLnNldChlLHQsbiksbiE9PXVuZGVmaW5lZD9uOnQpfSxyZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbz10aGlzLmtleShlKSxzPXRoaXMuY2FjaGVbb107aWYodD09PXVuZGVmaW5lZCl0aGlzLmNhY2hlW29dPXt9O2Vsc2V7eC5pc0FycmF5KHQpP3I9dC5jb25jYXQodC5tYXAoeC5jYW1lbENhc2UpKTooaT14LmNhbWVsQ2FzZSh0KSx0IGluIHM/cj1bdCxpXToocj1pLHI9ciBpbiBzP1tyXTpyLm1hdGNoKHcpfHxbXSkpLG49ci5sZW5ndGg7d2hpbGUobi0tKWRlbGV0ZSBzW3Jbbl1dfX0saGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4heC5pc0VtcHR5T2JqZWN0KHRoaXMuY2FjaGVbZVt0aGlzLmV4cGFuZG9dXXx8e30pfSxkaXNjYXJkOmZ1bmN0aW9uKGUpe2VbdGhpcy5leHBhbmRvXSYmZGVsZXRlIHRoaXMuY2FjaGVbZVt0aGlzLmV4cGFuZG9dXX19LEw9bmV3IEYscT1uZXcgRix4LmV4dGVuZCh7YWNjZXB0RGF0YTpGLmFjY2VwdHMsaGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gTC5oYXNEYXRhKGUpfHxxLmhhc0RhdGEoZSl9LGRhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBMLmFjY2VzcyhlLHQsbil9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtMLnJlbW92ZShlLHQpfSxfZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHEuYWNjZXNzKGUsdCxuKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtxLnJlbW92ZShlLHQpfX0pLHguZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPXRoaXNbMF0sbz0wLHM9bnVsbDtpZihlPT09dW5kZWZpbmVkKXtpZih0aGlzLmxlbmd0aCYmKHM9TC5nZXQoaSksMT09PWkubm9kZVR5cGUmJiFxLmdldChpLCJoYXNEYXRhQXR0cnMiKSkpe2ZvcihuPWkuYXR0cmlidXRlcztuLmxlbmd0aD5vO28rKylyPW5bb10ubmFtZSwwPT09ci5pbmRleE9mKCJkYXRhLSIpJiYocj14LmNhbWVsQ2FzZShyLnNsaWNlKDUpKSxQKGkscixzW3JdKSk7cS5zZXQoaSwiaGFzRGF0YUF0dHJzIiwhMCl9cmV0dXJuIHN9cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP3RoaXMuZWFjaChmdW5jdGlvbigpe0wuc2V0KHRoaXMsZSl9KTp4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKHQpe3ZhciBuLHI9eC5jYW1lbENhc2UoZSk7aWYoaSYmdD09PXVuZGVmaW5lZCl7aWYobj1MLmdldChpLGUpLG4hPT11bmRlZmluZWQpcmV0dXJuIG47aWYobj1MLmdldChpLHIpLG4hPT11bmRlZmluZWQpcmV0dXJuIG47aWYobj1QKGkscix1bmRlZmluZWQpLG4hPT11bmRlZmluZWQpcmV0dXJuIG59ZWxzZSB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1MLmdldCh0aGlzLHIpO0wuc2V0KHRoaXMscix0KSwtMSE9PWUuaW5kZXhPZigiLSIpJiZuIT09dW5kZWZpbmVkJiZMLnNldCh0aGlzLGUsdCl9KX0sbnVsbCx0LGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7TC5yZW1vdmUodGhpcyxlKX0pfX0pO2Z1bmN0aW9uIFAoZSx0LG4pe3ZhciByO2lmKG49PT11bmRlZmluZWQmJjE9PT1lLm5vZGVUeXBlKWlmKHI9ImRhdGEtIit0LnJlcGxhY2UoTywiLSQxIikudG9Mb3dlckNhc2UoKSxuPWUuZ2V0QXR0cmlidXRlKHIpLCJzdHJpbmciPT10eXBlb2Ygbil7dHJ5e249InRydWUiPT09bj8hMDoiZmFsc2UiPT09bj8hMToibnVsbCI9PT1uP251bGw6K24rIiI9PT1uPytuOkgudGVzdChuKT9KU09OLnBhcnNlKG4pOm59Y2F0Y2goaSl7fUwuc2V0KGUsdCxuKX1lbHNlIG49dW5kZWZpbmVkO3JldHVybiBufXguZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIGU/KHQ9KHR8fCJmeCIpKyJxdWV1ZSIscj1xLmdldChlLHQpLG4mJighcnx8eC5pc0FycmF5KG4pP3I9cS5hY2Nlc3MoZSx0LHgubWFrZUFycmF5KG4pKTpyLnB1c2gobikpLHJ8fFtdKTp1bmRlZmluZWR9LGRlcXVldWU6ZnVuY3Rpb24oZSx0KXt0PXR8fCJmeCI7dmFyIG49eC5xdWV1ZShlLHQpLHI9bi5sZW5ndGgsaT1uLnNoaWZ0KCksbz14Ll9xdWV1ZUhvb2tzKGUsdCkscz1mdW5jdGlvbigpe3guZGVxdWV1ZShlLHQpfTsiaW5wcm9ncmVzcyI9PT1pJiYoaT1uLnNoaWZ0KCksci0tKSxpJiYoImZ4Ij09PXQmJm4udW5zaGlmdCgiaW5wcm9ncmVzcyIpLGRlbGV0ZSBvLnN0b3AsaS5jYWxsKGUscyxvKSksIXImJm8mJm8uZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihlLHQpe3ZhciBuPXQrInF1ZXVlSG9va3MiO3JldHVybiBxLmdldChlLG4pfHxxLmFjY2VzcyhlLG4se2VtcHR5OnguQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe3EucmVtb3ZlKGUsW3QrInF1ZXVlIixuXSl9KX0pfX0pLHguZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPTI7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlJiYodD1lLGU9ImZ4IixuLS0pLG4+YXJndW1lbnRzLmxlbmd0aD94LnF1ZXVlKHRoaXNbMF0sZSk6dD09PXVuZGVmaW5lZD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBuPXgucXVldWUodGhpcyxlLHQpO3guX3F1ZXVlSG9va3ModGhpcyxlKSwiZngiPT09ZSYmImlucHJvZ3Jlc3MiIT09blswXSYmeC5kZXF1ZXVlKHRoaXMsZSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7eC5kZXF1ZXVlKHRoaXMsZSl9KX0sZGVsYXk6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT14LmZ4P3guZnguc3BlZWRzW2VdfHxlOmUsdD10fHwiZngiLHRoaXMucXVldWUodCxmdW5jdGlvbih0LG4pe3ZhciByPXNldFRpbWVvdXQodCxlKTtuLnN0b3A9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQocil9fSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucXVldWUoZXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTEsaT14LkRlZmVycmVkKCksbz10aGlzLHM9dGhpcy5sZW5ndGgsYT1mdW5jdGlvbigpey0tcnx8aS5yZXNvbHZlV2l0aChvLFtvXSl9OyJzdHJpbmciIT10eXBlb2YgZSYmKHQ9ZSxlPXVuZGVmaW5lZCksZT1lfHwiZngiO3doaWxlKHMtLSluPXEuZ2V0KG9bc10sZSsicXVldWVIb29rcyIpLG4mJm4uZW1wdHkmJihyKyssbi5lbXB0eS5hZGQoYSkpO3JldHVybiBhKCksaS5wcm9taXNlKHQpfX0pO3ZhciBSLE0sVz0vW1x0XHJcblxmXS9nLCQ9L1xyL2csQj0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pO3guZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguYWNjZXNzKHRoaXMseC5hdHRyLGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt4LnJlbW92ZUF0dHIodGhpcyxlKX0pfSxwcm9wOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguYWNjZXNzKHRoaXMseC5wcm9wLGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkZWxldGUgdGhpc1t4LnByb3BGaXhbZV18fGVdfSl9LGFkZENsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLG8scz0wLGE9dGhpcy5sZW5ndGgsdT0ic3RyaW5nIj09dHlwZW9mIGUmJmU7aWYoeC5pc0Z1bmN0aW9uKGUpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCl7eCh0aGlzKS5hZGRDbGFzcyhlLmNhbGwodGhpcyx0LHRoaXMuY2xhc3NOYW1lKSl9KTtpZih1KWZvcih0PShlfHwiIikubWF0Y2godyl8fFtdO2E+cztzKyspaWYobj10aGlzW3NdLHI9MT09PW4ubm9kZVR5cGUmJihuLmNsYXNzTmFtZT8oIiAiK24uY2xhc3NOYW1lKyIgIikucmVwbGFjZShXLCIgIik6IiAiKSl7bz0wO3doaWxlKGk9dFtvKytdKTA+ci5pbmRleE9mKCIgIitpKyIgIikmJihyKz1pKyIgIik7bi5jbGFzc05hbWU9eC50cmltKHIpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLHM9MCxhPXRoaXMubGVuZ3RoLHU9MD09PWFyZ3VtZW50cy5sZW5ndGh8fCJzdHJpbmciPT10eXBlb2YgZSYmZTtpZih4LmlzRnVuY3Rpb24oZSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXt4KHRoaXMpLnJlbW92ZUNsYXNzKGUuY2FsbCh0aGlzLHQsdGhpcy5jbGFzc05hbWUpKX0pO2lmKHUpZm9yKHQ9KGV8fCIiKS5tYXRjaCh3KXx8W107YT5zO3MrKylpZihuPXRoaXNbc10scj0xPT09bi5ub2RlVHlwZSYmKG4uY2xhc3NOYW1lPygiICIrbi5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKFcsIiAiKToiIikpe289MDt3aGlsZShpPXRbbysrXSl3aGlsZShyLmluZGV4T2YoIiAiK2krIiAiKT49MClyPXIucmVwbGFjZSgiICIraSsiICIsIiAiKTtuLmNsYXNzTmFtZT1lP3gudHJpbShyKToiIn1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10eXBlb2YgZTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiB0JiYic3RyaW5nIj09PW4/dD90aGlzLmFkZENsYXNzKGUpOnRoaXMucmVtb3ZlQ2xhc3MoZSk6eC5pc0Z1bmN0aW9uKGUpP3RoaXMuZWFjaChmdW5jdGlvbihuKXt4KHRoaXMpLnRvZ2dsZUNsYXNzKGUuY2FsbCh0aGlzLG4sdGhpcy5jbGFzc05hbWUsdCksdCl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXtpZigic3RyaW5nIj09PW4pe3ZhciB0LGk9MCxvPXgodGhpcykscz1lLm1hdGNoKHcpfHxbXTt3aGlsZSh0PXNbaSsrXSlvLmhhc0NsYXNzKHQpP28ucmVtb3ZlQ2xhc3ModCk6by5hZGRDbGFzcyh0KX1lbHNlKG49PT1yfHwiYm9vbGVhbiI9PT1uKSYmKHRoaXMuY2xhc3NOYW1lJiZxLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGU9PT0hMT8iIjpxLmdldCh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKX0pfSxoYXNDbGFzczpmdW5jdGlvbihlKXt2YXIgdD0iICIrZSsiICIsbj0wLHI9dGhpcy5sZW5ndGg7Zm9yKDtyPm47bisrKWlmKDE9PT10aGlzW25dLm5vZGVUeXBlJiYoIiAiK3RoaXNbbl0uY2xhc3NOYW1lKyIgIikucmVwbGFjZShXLCIgIikuaW5kZXhPZih0KT49MClyZXR1cm4hMDtyZXR1cm4hMX0sdmFsOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHI9eC5pc0Z1bmN0aW9uKGUpLHRoaXMuZWFjaChmdW5jdGlvbihuKXt2YXIgaTsxPT09dGhpcy5ub2RlVHlwZSYmKGk9cj9lLmNhbGwodGhpcyxuLHgodGhpcykudmFsKCkpOmUsbnVsbD09aT9pPSIiOiJudW1iZXIiPT10eXBlb2YgaT9pKz0iIjp4LmlzQXJyYXkoaSkmJihpPXgubWFwKGksZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/IiI6ZSsiIn0pKSx0PXgudmFsSG9va3NbdGhpcy50eXBlXXx8eC52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLHQmJiJzZXQiaW4gdCYmdC5zZXQodGhpcyxpLCJ2YWx1ZSIpIT09dW5kZWZpbmVkfHwodGhpcy52YWx1ZT1pKSl9KTtpZihpKXJldHVybiB0PXgudmFsSG9va3NbaS50eXBlXXx8eC52YWxIb29rc1tpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLHQmJiJnZXQiaW4gdCYmKG49dC5nZXQoaSwidmFsdWUiKSkhPT11bmRlZmluZWQ/bjoobj1pLnZhbHVlLCJzdHJpbmciPT10eXBlb2Ygbj9uLnJlcGxhY2UoJCwiIik6bnVsbD09bj8iIjpuKX19fSkseC5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLmF0dHJpYnV0ZXMudmFsdWU7cmV0dXJuIXR8fHQuc3BlY2lmaWVkP2UudmFsdWU6ZS50ZXh0fX0sc2VsZWN0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPWUub3B0aW9ucyxpPWUuc2VsZWN0ZWRJbmRleCxvPSJzZWxlY3Qtb25lIj09PWUudHlwZXx8MD5pLHM9bz9udWxsOltdLGE9bz9pKzE6ci5sZW5ndGgsdT0wPmk/YTpvP2k6MDtmb3IoO2E+dTt1KyspaWYobj1yW3VdLCEoIW4uc2VsZWN0ZWQmJnUhPT1pfHwoeC5zdXBwb3J0Lm9wdERpc2FibGVkP24uZGlzYWJsZWQ6bnVsbCE9PW4uZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpKXx8bi5wYXJlbnROb2RlLmRpc2FibGVkJiZ4Lm5vZGVOYW1lKG4ucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2lmKHQ9eChuKS52YWwoKSxvKXJldHVybiB0O3MucHVzaCh0KX1yZXR1cm4gc30sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPWUub3B0aW9ucyxvPXgubWFrZUFycmF5KHQpLHM9aS5sZW5ndGg7d2hpbGUocy0tKXI9aVtzXSwoci5zZWxlY3RlZD14LmluQXJyYXkoeChyKS52YWwoKSxvKT49MCkmJihuPSEwKTtyZXR1cm4gbnx8KGUuc2VsZWN0ZWRJbmRleD0tMSksb319fSxhdHRyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxvLHM9ZS5ub2RlVHlwZTtpZihlJiYzIT09cyYmOCE9PXMmJjIhPT1zKXJldHVybiB0eXBlb2YgZS5nZXRBdHRyaWJ1dGU9PT1yP3gucHJvcChlLHQsbik6KDE9PT1zJiZ4LmlzWE1MRG9jKGUpfHwodD10LnRvTG93ZXJDYXNlKCksaT14LmF0dHJIb29rc1t0XXx8KHguZXhwci5tYXRjaC5ib29sLnRlc3QodCk/TTpSKSksbj09PXVuZGVmaW5lZD9pJiYiZ2V0ImluIGkmJm51bGwhPT0obz1pLmdldChlLHQpKT9vOihvPXguZmluZC5hdHRyKGUsdCksbnVsbD09bz91bmRlZmluZWQ6byk6bnVsbCE9PW4/aSYmInNldCJpbiBpJiYobz1pLnNldChlLG4sdCkpIT09dW5kZWZpbmVkP286KGUuc2V0QXR0cmlidXRlKHQsbisiIiksbik6KHgucmVtb3ZlQXR0cihlLHQpLHVuZGVmaW5lZCkpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPTAsbz10JiZ0Lm1hdGNoKHcpO2lmKG8mJjE9PT1lLm5vZGVUeXBlKXdoaWxlKG49b1tpKytdKXI9eC5wcm9wRml4W25dfHxuLHguZXhwci5tYXRjaC5ib29sLnRlc3QobikmJihlW3JdPSExKSxlLnJlbW92ZUF0dHJpYnV0ZShuKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oZSx0KXtpZigheC5zdXBwb3J0LnJhZGlvVmFsdWUmJiJyYWRpbyI9PT10JiZ4Lm5vZGVOYW1lKGUsImlucHV0Iikpe3ZhciBuPWUudmFsdWU7cmV0dXJuIGUuc2V0QXR0cmlidXRlKCJ0eXBlIix0KSxuJiYoZS52YWx1ZT1uKSx0fX19fSxwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn0scHJvcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLHM9ZS5ub2RlVHlwZTtpZihlJiYzIT09cyYmOCE9PXMmJjIhPT1zKXJldHVybiBvPTEhPT1zfHwheC5pc1hNTERvYyhlKSxvJiYodD14LnByb3BGaXhbdF18fHQsaT14LnByb3BIb29rc1t0XSksbiE9PXVuZGVmaW5lZD9pJiYic2V0ImluIGkmJihyPWkuc2V0KGUsbix0KSkhPT11bmRlZmluZWQ/cjplW3RdPW46aSYmImdldCJpbiBpJiZudWxsIT09KHI9aS5nZXQoZSx0KSk/cjplW3RdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaGFzQXR0cmlidXRlKCJ0YWJpbmRleCIpfHxCLnRlc3QoZS5ub2RlTmFtZSl8fGUuaHJlZj9lLnRhYkluZGV4Oi0xfX19fSksTT17c2V0OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdD09PSExP3gucmVtb3ZlQXR0cihlLG4pOmUuc2V0QXR0cmlidXRlKG4sbiksbn19LHguZWFjaCh4LmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihlLHQpe3ZhciBuPXguZXhwci5hdHRySGFuZGxlW3RdfHx4LmZpbmQuYXR0cjt4LmV4cHIuYXR0ckhhbmRsZVt0XT1mdW5jdGlvbihlLHQscil7dmFyIGk9eC5leHByLmF0dHJIYW5kbGVbdF0sbz1yP3VuZGVmaW5lZDooeC5leHByLmF0dHJIYW5kbGVbdF09dW5kZWZpbmVkKSE9bihlLHQscik/dC50b0xvd2VyQ2FzZSgpOm51bGw7cmV0dXJuIHguZXhwci5hdHRySGFuZGxlW3RdPWksb319KSx4LnN1cHBvcnQub3B0U2VsZWN0ZWR8fCh4LnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTtyZXR1cm4gdCYmdC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfX0pLHguZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7eC5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pLHguZWFjaChbInJhZGlvIiwiY2hlY2tib3giXSxmdW5jdGlvbigpe3gudmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihlLHQpe3JldHVybiB4LmlzQXJyYXkodCk/ZS5jaGVja2VkPXguaW5BcnJheSh4KGUpLnZhbCgpLHQpPj0wOnVuZGVmaW5lZH19LHguc3VwcG9ydC5jaGVja09ufHwoeC52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmUudmFsdWV9KX0pO3ZhciBJPS9ea2V5Lyx6PS9eKD86bW91c2V8Y29udGV4dG1lbnUpfGNsaWNrLyxfPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxYPS9eKFteLl0qKSg/OlwuKC4rKXwpJC87ZnVuY3Rpb24gVSgpe3JldHVybiEwfWZ1bmN0aW9uIFkoKXtyZXR1cm4hMX1mdW5jdGlvbiBWKCl7dHJ5e3JldHVybiBvLmFjdGl2ZUVsZW1lbnR9Y2F0Y2goZSl7fX14LmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGUsdCxuLGksbyl7dmFyIHMsYSx1LGwsYyxwLGYsaCxkLGcsbSx5PXEuZ2V0KGUpO2lmKHkpe24uaGFuZGxlciYmKHM9bixuPXMuaGFuZGxlcixvPXMuc2VsZWN0b3IpLG4uZ3VpZHx8KG4uZ3VpZD14Lmd1aWQrKyksKGw9eS5ldmVudHMpfHwobD15LmV2ZW50cz17fSksKGE9eS5oYW5kbGUpfHwoYT15LmhhbmRsZT1mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIHg9PT1yfHxlJiZ4LmV2ZW50LnRyaWdnZXJlZD09PWUudHlwZT91bmRlZmluZWQ6eC5ldmVudC5kaXNwYXRjaC5hcHBseShhLmVsZW0sYXJndW1lbnRzKX0sYS5lbGVtPWUpLHQ9KHR8fCIiKS5tYXRjaCh3KXx8WyIiXSxjPXQubGVuZ3RoO3doaWxlKGMtLSl1PVguZXhlYyh0W2NdKXx8W10sZD1tPXVbMV0sZz0odVsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLGQmJihmPXguZXZlbnQuc3BlY2lhbFtkXXx8e30sZD0obz9mLmRlbGVnYXRlVHlwZTpmLmJpbmRUeXBlKXx8ZCxmPXguZXZlbnQuc3BlY2lhbFtkXXx8e30scD14LmV4dGVuZCh7dHlwZTpkLG9yaWdUeXBlOm0sZGF0YTppLGhhbmRsZXI6bixndWlkOm4uZ3VpZCxzZWxlY3RvcjpvLG5lZWRzQ29udGV4dDpvJiZ4LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QobyksbmFtZXNwYWNlOmcuam9pbigiLiIpfSxzKSwoaD1sW2RdKXx8KGg9bFtkXT1bXSxoLmRlbGVnYXRlQ291bnQ9MCxmLnNldHVwJiZmLnNldHVwLmNhbGwoZSxpLGcsYSkhPT0hMXx8ZS5hZGRFdmVudExpc3RlbmVyJiZlLmFkZEV2ZW50TGlzdGVuZXIoZCxhLCExKSksZi5hZGQmJihmLmFkZC5jYWxsKGUscCkscC5oYW5kbGVyLmd1aWR8fChwLmhhbmRsZXIuZ3VpZD1uLmd1aWQpKSxvP2guc3BsaWNlKGguZGVsZWdhdGVDb3VudCsrLDAscCk6aC5wdXNoKHApLHguZXZlbnQuZ2xvYmFsW2RdPSEwKTtlPW51bGx9fSxyZW1vdmU6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbyxzLGEsdSxsLGMscCxmLGgsZCxnLG09cS5oYXNEYXRhKGUpJiZxLmdldChlKTtpZihtJiYodT1tLmV2ZW50cykpe3Q9KHR8fCIiKS5tYXRjaCh3KXx8WyIiXSxsPXQubGVuZ3RoO3doaWxlKGwtLSlpZihhPVguZXhlYyh0W2xdKXx8W10saD1nPWFbMV0sZD0oYVsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLGgpe3A9eC5ldmVudC5zcGVjaWFsW2hdfHx7fSxoPShyP3AuZGVsZWdhdGVUeXBlOnAuYmluZFR5cGUpfHxoLGY9dVtoXXx8W10sYT1hWzJdJiZSZWdFeHAoIihefFxcLikiK2Quam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIikscz1vPWYubGVuZ3RoO3doaWxlKG8tLSljPWZbb10sIWkmJmchPT1jLm9yaWdUeXBlfHxuJiZuLmd1aWQhPT1jLmd1aWR8fGEmJiFhLnRlc3QoYy5uYW1lc3BhY2UpfHxyJiZyIT09Yy5zZWxlY3RvciYmKCIqKiIhPT1yfHwhYy5zZWxlY3Rvcil8fChmLnNwbGljZShvLDEpLGMuc2VsZWN0b3ImJmYuZGVsZWdhdGVDb3VudC0tLHAucmVtb3ZlJiZwLnJlbW92ZS5jYWxsKGUsYykpO3MmJiFmLmxlbmd0aCYmKHAudGVhcmRvd24mJnAudGVhcmRvd24uY2FsbChlLGQsbS5oYW5kbGUpIT09ITF8fHgucmVtb3ZlRXZlbnQoZSxoLG0uaGFuZGxlKSxkZWxldGUgdVtoXSl9ZWxzZSBmb3IoaCBpbiB1KXguZXZlbnQucmVtb3ZlKGUsaCt0W2xdLG4sciwhMCk7eC5pc0VtcHR5T2JqZWN0KHUpJiYoZGVsZXRlIG0uaGFuZGxlLHEucmVtb3ZlKGUsImV2ZW50cyIpKX19LHRyaWdnZXI6ZnVuY3Rpb24odCxuLHIsaSl7dmFyIHMsYSx1LGwsYyxwLGYsaD1bcnx8b10sZD15LmNhbGwodCwidHlwZSIpP3QudHlwZTp0LGc9eS5jYWxsKHQsIm5hbWVzcGFjZSIpP3QubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYoYT11PXI9cnx8bywzIT09ci5ub2RlVHlwZSYmOCE9PXIubm9kZVR5cGUmJiFfLnRlc3QoZCt4LmV2ZW50LnRyaWdnZXJlZCkmJihkLmluZGV4T2YoIi4iKT49MCYmKGc9ZC5zcGxpdCgiLiIpLGQ9Zy5zaGlmdCgpLGcuc29ydCgpKSxjPTA+ZC5pbmRleE9mKCI6IikmJiJvbiIrZCx0PXRbeC5leHBhbmRvXT90Om5ldyB4LkV2ZW50KGQsIm9iamVjdCI9PXR5cGVvZiB0JiZ0KSx0LmlzVHJpZ2dlcj1pPzI6Myx0Lm5hbWVzcGFjZT1nLmpvaW4oIi4iKSx0Lm5hbWVzcGFjZV9yZT10Lm5hbWVzcGFjZT9SZWdFeHAoIihefFxcLikiK2cuam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCx0LnJlc3VsdD11bmRlZmluZWQsdC50YXJnZXR8fCh0LnRhcmdldD1yKSxuPW51bGw9PW4/W3RdOngubWFrZUFycmF5KG4sW3RdKSxmPXguZXZlbnQuc3BlY2lhbFtkXXx8e30saXx8IWYudHJpZ2dlcnx8Zi50cmlnZ2VyLmFwcGx5KHIsbikhPT0hMSkpe2lmKCFpJiYhZi5ub0J1YmJsZSYmIXguaXNXaW5kb3cocikpe2ZvcihsPWYuZGVsZWdhdGVUeXBlfHxkLF8udGVzdChsK2QpfHwoYT1hLnBhcmVudE5vZGUpO2E7YT1hLnBhcmVudE5vZGUpaC5wdXNoKGEpLHU9YTt1PT09KHIub3duZXJEb2N1bWVudHx8bykmJmgucHVzaCh1LmRlZmF1bHRWaWV3fHx1LnBhcmVudFdpbmRvd3x8ZSl9cz0wO3doaWxlKChhPWhbcysrXSkmJiF0LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpdC50eXBlPXM+MT9sOmYuYmluZFR5cGV8fGQscD0ocS5nZXQoYSwiZXZlbnRzIil8fHt9KVt0LnR5cGVdJiZxLmdldChhLCJoYW5kbGUiKSxwJiZwLmFwcGx5KGEsbikscD1jJiZhW2NdLHAmJnguYWNjZXB0RGF0YShhKSYmcC5hcHBseSYmcC5hcHBseShhLG4pPT09ITEmJnQucHJldmVudERlZmF1bHQoKTtyZXR1cm4gdC50eXBlPWQsaXx8dC5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8Zi5fZGVmYXVsdCYmZi5fZGVmYXVsdC5hcHBseShoLnBvcCgpLG4pIT09ITF8fCF4LmFjY2VwdERhdGEocil8fGMmJnguaXNGdW5jdGlvbihyW2RdKSYmIXguaXNXaW5kb3cocikmJih1PXJbY10sdSYmKHJbY109bnVsbCkseC5ldmVudC50cmlnZ2VyZWQ9ZCxyW2RdKCkseC5ldmVudC50cmlnZ2VyZWQ9dW5kZWZpbmVkLHUmJihyW2NdPXUpKSx0LnJlc3VsdH19LGRpc3BhdGNoOmZ1bmN0aW9uKGUpe2U9eC5ldmVudC5maXgoZSk7dmFyIHQsbixyLGksbyxzPVtdLGE9ZC5jYWxsKGFyZ3VtZW50cyksdT0ocS5nZXQodGhpcywiZXZlbnRzIil8fHt9KVtlLnR5cGVdfHxbXSxsPXguZXZlbnQuc3BlY2lhbFtlLnR5cGVdfHx7fTtpZihhWzBdPWUsZS5kZWxlZ2F0ZVRhcmdldD10aGlzLCFsLnByZURpc3BhdGNofHxsLnByZURpc3BhdGNoLmNhbGwodGhpcyxlKSE9PSExKXtzPXguZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGUsdSksdD0wO3doaWxlKChpPXNbdCsrXSkmJiFlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2UuY3VycmVudFRhcmdldD1pLmVsZW0sbj0wO3doaWxlKChvPWkuaGFuZGxlcnNbbisrXSkmJiFlLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpKCFlLm5hbWVzcGFjZV9yZXx8ZS5uYW1lc3BhY2VfcmUudGVzdChvLm5hbWVzcGFjZSkpJiYoZS5oYW5kbGVPYmo9byxlLmRhdGE9by5kYXRhLHI9KCh4LmV2ZW50LnNwZWNpYWxbby5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fG8uaGFuZGxlcikuYXBwbHkoaS5lbGVtLGEpLHIhPT11bmRlZmluZWQmJihlLnJlc3VsdD1yKT09PSExJiYoZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gbC5wb3N0RGlzcGF0Y2gmJmwucG9zdERpc3BhdGNoLmNhbGwodGhpcyxlKSxlLnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG8scz1bXSxhPXQuZGVsZWdhdGVDb3VudCx1PWUudGFyZ2V0O2lmKGEmJnUubm9kZVR5cGUmJighZS5idXR0b258fCJjbGljayIhPT1lLnR5cGUpKWZvcig7dSE9PXRoaXM7dT11LnBhcmVudE5vZGV8fHRoaXMpaWYodS5kaXNhYmxlZCE9PSEwfHwiY2xpY2siIT09ZS50eXBlKXtmb3Iocj1bXSxuPTA7YT5uO24rKylvPXRbbl0saT1vLnNlbGVjdG9yKyIgIixyW2ldPT09dW5kZWZpbmVkJiYocltpXT1vLm5lZWRzQ29udGV4dD94KGksdGhpcykuaW5kZXgodSk+PTA6eC5maW5kKGksdGhpcyxudWxsLFt1XSkubGVuZ3RoKSxyW2ldJiZyLnB1c2gobyk7ci5sZW5ndGgmJnMucHVzaCh7ZWxlbTp1LGhhbmRsZXJzOnJ9KX1yZXR1cm4gdC5sZW5ndGg+YSYmcy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6dC5zbGljZShhKX0pLHN9LHByb3BzOiJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2giLnNwbGl0KCIgIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOiJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlIi5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihlLHQpe3JldHVybiBudWxsPT1lLndoaWNoJiYoZS53aGljaD1udWxsIT10LmNoYXJDb2RlP3QuY2hhckNvZGU6dC5rZXlDb2RlKSxlfX0sbW91c2VIb29rczp7cHJvcHM6ImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudCIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGkscz10LmJ1dHRvbjtyZXR1cm4gbnVsbD09ZS5wYWdlWCYmbnVsbCE9dC5jbGllbnRYJiYobj1lLnRhcmdldC5vd25lckRvY3VtZW50fHxvLHI9bi5kb2N1bWVudEVsZW1lbnQsaT1uLmJvZHksZS5wYWdlWD10LmNsaWVudFgrKHImJnIuc2Nyb2xsTGVmdHx8aSYmaS5zY3JvbGxMZWZ0fHwwKS0ociYmci5jbGllbnRMZWZ0fHxpJiZpLmNsaWVudExlZnR8fDApLGUucGFnZVk9dC5jbGllbnRZKyhyJiZyLnNjcm9sbFRvcHx8aSYmaS5zY3JvbGxUb3B8fDApLShyJiZyLmNsaWVudFRvcHx8aSYmaS5jbGllbnRUb3B8fDApKSxlLndoaWNofHxzPT09dW5kZWZpbmVkfHwoZS53aGljaD0xJnM/MToyJnM/Mzo0JnM/MjowKSxlfX0sZml4OmZ1bmN0aW9uKGUpe2lmKGVbeC5leHBhbmRvXSlyZXR1cm4gZTt2YXIgdCxuLHIsaT1lLnR5cGUscz1lLGE9dGhpcy5maXhIb29rc1tpXTthfHwodGhpcy5maXhIb29rc1tpXT1hPXoudGVzdChpKT90aGlzLm1vdXNlSG9va3M6SS50ZXN0KGkpP3RoaXMua2V5SG9va3M6e30pLHI9YS5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChhLnByb3BzKTp0aGlzLnByb3BzLGU9bmV3IHguRXZlbnQocyksdD1yLmxlbmd0aDt3aGlsZSh0LS0pbj1yW3RdLGVbbl09c1tuXTtyZXR1cm4gZS50YXJnZXR8fChlLnRhcmdldD1vKSwzPT09ZS50YXJnZXQubm9kZVR5cGUmJihlLnRhcmdldD1lLnRhcmdldC5wYXJlbnROb2RlKSxhLmZpbHRlcj9hLmZpbHRlcihlLHMpOmV9LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOiEwfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzIT09VigpJiZ0aGlzLmZvY3VzPyh0aGlzLmZvY3VzKCksITEpOnVuZGVmaW5lZH0sZGVsZWdhdGVUeXBlOiJmb2N1c2luIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09VigpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp1bmRlZmluZWR9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2smJngubm9kZU5hbWUodGhpcywiaW5wdXQiKT8odGhpcy5jbGljaygpLCExKTp1bmRlZmluZWR9LF9kZWZhdWx0OmZ1bmN0aW9uKGUpe3JldHVybiB4Lm5vZGVOYW1lKGUudGFyZ2V0LCJhIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihlKXtlLnJlc3VsdCE9PXVuZGVmaW5lZCYmKGUub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1lLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9eC5leHRlbmQobmV3IHguRXZlbnQsbix7dHlwZTplLGlzU2ltdWxhdGVkOiEwLG9yaWdpbmFsRXZlbnQ6e319KTtyP3guZXZlbnQudHJpZ2dlcihpLG51bGwsdCk6eC5ldmVudC5kaXNwYXRjaC5jYWxsKHQsaSksaS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmbi5wcmV2ZW50RGVmYXVsdCgpfX0seC5yZW1vdmVFdmVudD1mdW5jdGlvbihlLHQsbil7ZS5yZW1vdmVFdmVudExpc3RlbmVyJiZlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxuLCExKX0seC5FdmVudD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgeC5FdmVudD8oZSYmZS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9ZSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWUuZGVmYXVsdFByZXZlbnRlZHx8ZS5nZXRQcmV2ZW50RGVmYXVsdCYmZS5nZXRQcmV2ZW50RGVmYXVsdCgpP1U6WSk6dGhpcy50eXBlPWUsdCYmeC5leHRlbmQodGhpcyx0KSx0aGlzLnRpbWVTdGFtcD1lJiZlLnRpbWVTdGFtcHx8eC5ub3coKSx0aGlzW3guZXhwYW5kb109ITAsdW5kZWZpbmVkKTpuZXcgeC5FdmVudChlLHQpfSx4LkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOlksaXNQcm9wYWdhdGlvblN0b3BwZWQ6WSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpZLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPVUsZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1VLGUmJmUuc3RvcFByb3BhZ2F0aW9uJiZlLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPVUsdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LHguZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCJ9LGZ1bmN0aW9uKGUsdCl7eC5ldmVudC5zcGVjaWFsW2VdPXtkZWxlZ2F0ZVR5cGU6dCxiaW5kVHlwZTp0LGhhbmRsZTpmdW5jdGlvbihlKXt2YXIgbixyPXRoaXMsaT1lLnJlbGF0ZWRUYXJnZXQsbz1lLmhhbmRsZU9iajtyZXR1cm4oIWl8fGkhPT1yJiYheC5jb250YWlucyhyLGkpKSYmKGUudHlwZT1vLm9yaWdUeXBlLG49by5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlLnR5cGU9dCksbn19fSkseC5zdXBwb3J0LmZvY3VzaW5CdWJibGVzfHx4LmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGUsdCl7dmFyIG49MCxyPWZ1bmN0aW9uKGUpe3guZXZlbnQuc2ltdWxhdGUodCxlLnRhcmdldCx4LmV2ZW50LmZpeChlKSwhMCl9O3guZXZlbnQuc3BlY2lhbFt0XT17c2V0dXA6ZnVuY3Rpb24oKXswPT09bisrJiZvLmFkZEV2ZW50TGlzdGVuZXIoZSxyLCEwKX0sdGVhcmRvd246ZnVuY3Rpb24oKXswPT09LS1uJiZvLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxyLCEwKX19fSkseC5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG8scztpZigib2JqZWN0Ij09dHlwZW9mIGUpeyJzdHJpbmciIT10eXBlb2YgdCYmKG49bnx8dCx0PXVuZGVmaW5lZCk7Zm9yKHMgaW4gZSl0aGlzLm9uKHMsdCxuLGVbc10saSk7cmV0dXJuIHRoaXN9aWYobnVsbD09biYmbnVsbD09cj8ocj10LG49dD11bmRlZmluZWQpOm51bGw9PXImJigic3RyaW5nIj09dHlwZW9mIHQ/KHI9bixuPXVuZGVmaW5lZCk6KHI9bixuPXQsdD11bmRlZmluZWQpKSxyPT09ITEpcj1ZO2Vsc2UgaWYoIXIpcmV0dXJuIHRoaXM7cmV0dXJuIDE9PT1pJiYobz1yLHI9ZnVuY3Rpb24oZSl7cmV0dXJuIHgoKS5vZmYoZSksby5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHIuZ3VpZD1vLmd1aWR8fChvLmd1aWQ9eC5ndWlkKyspKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt4LmV2ZW50LmFkZCh0aGlzLGUscixuLHQpfSl9LG9uZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5vbihlLHQsbixyLDEpfSxvZmY6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7aWYoZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5oYW5kbGVPYmopcmV0dXJuIHI9ZS5oYW5kbGVPYmoseChlLmRlbGVnYXRlVGFyZ2V0KS5vZmYoci5uYW1lc3BhY2U/ci5vcmlnVHlwZSsiLiIrci5uYW1lc3BhY2U6ci5vcmlnVHlwZSxyLnNlbGVjdG9yLHIuaGFuZGxlciksdGhpcztpZigib2JqZWN0Ij09dHlwZW9mIGUpe2ZvcihpIGluIGUpdGhpcy5vZmYoaSx0LGVbaV0pO3JldHVybiB0aGlzfXJldHVybih0PT09ITF8fCJmdW5jdGlvbiI9PXR5cGVvZiB0KSYmKG49dCx0PXVuZGVmaW5lZCksbj09PSExJiYobj1ZKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt4LmV2ZW50LnJlbW92ZSh0aGlzLGUsbix0KX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3guZXZlbnQudHJpZ2dlcihlLHQsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzWzBdO3JldHVybiBuP3guZXZlbnQudHJpZ2dlcihlLHQsbiwhMCk6dW5kZWZpbmVkfX0pO3ZhciBHPS9eLlteOiNcW1wuLF0qJC8sSj0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxRPXguZXhwci5tYXRjaC5uZWVkc0NvbnRleHQsSz17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTt4LmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihlKXt2YXIgdCxuPVtdLHI9dGhpcyxpPXIubGVuZ3RoO2lmKCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gdGhpcy5wdXNoU3RhY2soeChlKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodD0wO2k+dDt0KyspaWYoeC5jb250YWlucyhyW3RdLHRoaXMpKXJldHVybiEwfSkpO2Zvcih0PTA7aT50O3QrKyl4LmZpbmQoZSxyW3RdLG4pO3JldHVybiBuPXRoaXMucHVzaFN0YWNrKGk+MT94LnVuaXF1ZShuKTpuKSxuLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcisiICIrZTplLG59LGhhczpmdW5jdGlvbihlKXt2YXIgdD14KGUsdGhpcyksbj10Lmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZT0wO2Zvcig7bj5lO2UrKylpZih4LmNvbnRhaW5zKHRoaXMsdFtlXSkpcmV0dXJuITB9KX0sbm90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhldCh0aGlzLGV8fFtdLCEwKSl9LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZXQodGhpcyxlfHxbXSwhMSkpfSxpczpmdW5jdGlvbihlKXtyZXR1cm4hIWV0KHRoaXMsInN0cmluZyI9PXR5cGVvZiBlJiZRLnRlc3QoZSk/eChlKTplfHxbXSwhMSkubGVuZ3RofSxjbG9zZXN0OmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0wLGk9dGhpcy5sZW5ndGgsbz1bXSxzPVEudGVzdChlKXx8InN0cmluZyIhPXR5cGVvZiBlP3goZSx0fHx0aGlzLmNvbnRleHQpOjA7Zm9yKDtpPnI7cisrKWZvcihuPXRoaXNbcl07biYmbiE9PXQ7bj1uLnBhcmVudE5vZGUpaWYoMTE+bi5ub2RlVHlwZSYmKHM/cy5pbmRleChuKT4tMToxPT09bi5ub2RlVHlwZSYmeC5maW5kLm1hdGNoZXNTZWxlY3RvcihuLGUpKSl7bj1vLnB1c2gobik7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKG8ubGVuZ3RoPjE/eC51bmlxdWUobyk6byl9LGluZGV4OmZ1bmN0aW9uKGUpe3JldHVybiBlPyJzdHJpbmciPT10eXBlb2YgZT9nLmNhbGwoeChlKSx0aGlzWzBdKTpnLmNhbGwodGhpcyxlLmpxdWVyeT9lWzBdOmUpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGUsdCl7dmFyIG49InN0cmluZyI9PXR5cGVvZiBlP3goZSx0KTp4Lm1ha2VBcnJheShlJiZlLm5vZGVUeXBlP1tlXTplKSxyPXgubWVyZ2UodGhpcy5nZXQoKSxuKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeC51bmlxdWUocikpfSxhZGRCYWNrOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFkZChudWxsPT1lP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGUpKX19KTtmdW5jdGlvbiBaKGUsdCl7d2hpbGUoKGU9ZVt0XSkmJjEhPT1lLm5vZGVUeXBlKTtyZXR1cm4gZX14LmVhY2goe3BhcmVudDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJjExIT09dC5ub2RlVHlwZT90Om51bGx9LHBhcmVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIHguZGlyKGUsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4geC5kaXIoZSwicGFyZW50Tm9kZSIsbil9LG5leHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFooZSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihlKXtyZXR1cm4gWihlLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihlKXtyZXR1cm4geC5kaXIoZSwibmV4dFNpYmxpbmciKX0scHJldkFsbDpmdW5jdGlvbihlKXtyZXR1cm4geC5kaXIoZSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHguZGlyKGUsIm5leHRTaWJsaW5nIixuKX0scHJldlVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4geC5kaXIoZSwicHJldmlvdXNTaWJsaW5nIixuKX0sc2libGluZ3M6ZnVuY3Rpb24oZSl7cmV0dXJuIHguc2libGluZygoZS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxlKX0sY2hpbGRyZW46ZnVuY3Rpb24oZSl7cmV0dXJuIHguc2libGluZyhlLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm4gZS5jb250ZW50RG9jdW1lbnR8fHgubWVyZ2UoW10sZS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGUsdCl7eC5mbltlXT1mdW5jdGlvbihuLHIpe3ZhciBpPXgubWFwKHRoaXMsdCxuKTtyZXR1cm4iVW50aWwiIT09ZS5zbGljZSgtNSkmJihyPW4pLHImJiJzdHJpbmciPT10eXBlb2YgciYmKGk9eC5maWx0ZXIocixpKSksdGhpcy5sZW5ndGg+MSYmKEtbZV18fHgudW5pcXVlKGkpLEoudGVzdChlKSYmaS5yZXZlcnNlKCkpLHRoaXMucHVzaFN0YWNrKGkpfX0pLHguZXh0ZW5kKHtmaWx0ZXI6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRbMF07cmV0dXJuIG4mJihlPSI6bm90KCIrZSsiKSIpLDE9PT10Lmxlbmd0aCYmMT09PXIubm9kZVR5cGU/eC5maW5kLm1hdGNoZXNTZWxlY3RvcihyLGUpP1tyXTpbXTp4LmZpbmQubWF0Y2hlcyhlLHguZ3JlcCh0LGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5ub2RlVHlwZX0pKX0sZGlyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1bXSxpPW4hPT11bmRlZmluZWQ7d2hpbGUoKGU9ZVt0XSkmJjkhPT1lLm5vZGVUeXBlKWlmKDE9PT1lLm5vZGVUeXBlKXtpZihpJiZ4KGUpLmlzKG4pKWJyZWFrO3IucHVzaChlKX1yZXR1cm4gcn0sc2libGluZzpmdW5jdGlvbihlLHQpe3ZhciBuPVtdO2Zvcig7ZTtlPWUubmV4dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59fSk7ZnVuY3Rpb24gZXQoZSx0LG4pe2lmKHguaXNGdW5jdGlvbih0KSlyZXR1cm4geC5ncmVwKGUsZnVuY3Rpb24oZSxyKXtyZXR1cm4hIXQuY2FsbChlLHIsZSkhPT1ufSk7aWYodC5ub2RlVHlwZSlyZXR1cm4geC5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10IT09bn0pO2lmKCJzdHJpbmciPT10eXBlb2YgdCl7aWYoRy50ZXN0KHQpKXJldHVybiB4LmZpbHRlcih0LGUsbik7dD14LmZpbHRlcih0LGUpfXJldHVybiB4LmdyZXAoZSxmdW5jdGlvbihlKXtyZXR1cm4gZy5jYWxsKHQsZSk+PTAhPT1ufSl9dmFyIHR0PS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzpdKylbXj5dKilcLz4vZ2ksbnQ9LzwoW1x3Ol0rKS8scnQ9Lzx8JiM/XHcrOy8saXQ9LzwoPzpzY3JpcHR8c3R5bGV8bGluaykvaSxvdD0vXig/OmNoZWNrYm94fHJhZGlvKSQvaSxzdD0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSxhdD0vXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksdXQ9L150cnVlXC8oLiopLyxsdD0vXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2csY3Q9e29wdGlvbjpbMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6WzAsIiIsIiJdfTtjdC5vcHRncm91cD1jdC5vcHRpb24sY3QudGJvZHk9Y3QudGZvb3Q9Y3QuY29sZ3JvdXA9Y3QuY2FwdGlvbj1jdC50aGVhZCxjdC50aD1jdC50ZCx4LmZuLmV4dGVuZCh7dGV4dDpmdW5jdGlvbihlKXtyZXR1cm4geC5hY2Nlc3ModGhpcyxmdW5jdGlvbihlKXtyZXR1cm4gZT09PXVuZGVmaW5lZD94LnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHxvKS5jcmVhdGVUZXh0Tm9kZShlKSl9LG51bGwsZSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGUpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgdD1wdCh0aGlzLGUpO3QuYXBwZW5kQ2hpbGQoZSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oZSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciB0PXB0KHRoaXMsZSk7dC5pbnNlcnRCZWZvcmUoZSx0LmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcy5uZXh0U2libGluZyl9KX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1lP3guZmlsdGVyKGUsdGhpcyk6dGhpcyxpPTA7Zm9yKDtudWxsIT0obj1yW2ldKTtpKyspdHx8MSE9PW4ubm9kZVR5cGV8fHguY2xlYW5EYXRhKG10KG4pKSxuLnBhcmVudE5vZGUmJih0JiZ4LmNvbnRhaW5zKG4ub3duZXJEb2N1bWVudCxuKSYmZHQobXQobiwic2NyaXB0IikpLG4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKSk7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7dmFyIGUsdD0wO2Zvcig7bnVsbCE9KGU9dGhpc1t0XSk7dCsrKTE9PT1lLm5vZGVUeXBlJiYoeC5jbGVhbkRhdGEobXQoZSwhMSkpLGUudGV4dENvbnRlbnQ9IiIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPW51bGw9PWU/ITE6ZSx0PW51bGw9PXQ/ZTp0LHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHguY2xvbmUodGhpcyxlLHQpfSl9LGh0bWw6ZnVuY3Rpb24oZSl7cmV0dXJuIHguYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSl7dmFyIHQ9dGhpc1swXXx8e30sbj0wLHI9dGhpcy5sZW5ndGg7aWYoZT09PXVuZGVmaW5lZCYmMT09PXQubm9kZVR5cGUpcmV0dXJuIHQuaW5uZXJIVE1MO2lmKCJzdHJpbmciPT10eXBlb2YgZSYmIWl0LnRlc3QoZSkmJiFjdFsobnQuZXhlYyhlKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2U9ZS5yZXBsYWNlKHR0LCI8JDE+PC8kMj4iKTt0cnl7Zm9yKDtyPm47bisrKXQ9dGhpc1tuXXx8e30sMT09PXQubm9kZVR5cGUmJih4LmNsZWFuRGF0YShtdCh0LCExKSksdC5pbm5lckhUTUw9ZSk7dD0wfWNhdGNoKGkpe319dCYmdGhpcy5lbXB0eSgpLmFwcGVuZChlKX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBlPXgubWFwKHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuW2UubmV4dFNpYmxpbmcsZS5wYXJlbnROb2RlXX0pLHQ9MDtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24obil7dmFyIHI9ZVt0KytdLGk9ZVt0KytdO2kmJihyJiZyLnBhcmVudE5vZGUhPT1pJiYocj10aGlzLm5leHRTaWJsaW5nKSx4KHRoaXMpLnJlbW92ZSgpLGkuaW5zZXJ0QmVmb3JlKG4scikpfSwhMCksdD90aGlzOnRoaXMucmVtb3ZlKCl9LGRldGFjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZW1vdmUoZSwhMCl9LGRvbU1hbmlwOmZ1bmN0aW9uKGUsdCxuKXtlPWYuYXBwbHkoW10sZSk7dmFyIHIsaSxvLHMsYSx1LGw9MCxjPXRoaXMubGVuZ3RoLHA9dGhpcyxoPWMtMSxkPWVbMF0sZz14LmlzRnVuY3Rpb24oZCk7aWYoZ3x8ISgxPj1jfHwic3RyaW5nIiE9dHlwZW9mIGR8fHguc3VwcG9ydC5jaGVja0Nsb25lKSYmc3QudGVzdChkKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHIpe3ZhciBpPXAuZXEocik7ZyYmKGVbMF09ZC5jYWxsKHRoaXMscixpLmh0bWwoKSkpLGkuZG9tTWFuaXAoZSx0LG4pfSk7aWYoYyYmKHI9eC5idWlsZEZyYWdtZW50KGUsdGhpc1swXS5vd25lckRvY3VtZW50LCExLCFuJiZ0aGlzKSxpPXIuZmlyc3RDaGlsZCwxPT09ci5jaGlsZE5vZGVzLmxlbmd0aCYmKHI9aSksaSkpe2ZvcihvPXgubWFwKG10KHIsInNjcmlwdCIpLGZ0KSxzPW8ubGVuZ3RoO2M+bDtsKyspYT1yLGwhPT1oJiYoYT14LmNsb25lKGEsITAsITApLHMmJngubWVyZ2UobyxtdChhLCJzY3JpcHQiKSkpLHQuY2FsbCh0aGlzW2xdLGEsbCk7aWYocylmb3IodT1vW28ubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQseC5tYXAobyxodCksbD0wO3M+bDtsKyspYT1vW2xdLGF0LnRlc3QoYS50eXBlfHwiIikmJiFxLmFjY2VzcyhhLCJnbG9iYWxFdmFsIikmJnguY29udGFpbnModSxhKSYmKGEuc3JjP3guX2V2YWxVcmwoYS5zcmMpOnguZ2xvYmFsRXZhbChhLnRleHRDb250ZW50LnJlcGxhY2UobHQsIiIpKSl9cmV0dXJuIHRoaXN9fSkseC5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24oZSx0KXt4LmZuW2VdPWZ1bmN0aW9uKGUpe3ZhciBuLHI9W10saT14KGUpLG89aS5sZW5ndGgtMSxzPTA7Zm9yKDtvPj1zO3MrKyluPXM9PT1vP3RoaXM6dGhpcy5jbG9uZSghMCkseChpW3NdKVt0XShuKSxoLmFwcGx5KHIsbi5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHIpfX0pLHguZXh0ZW5kKHtjbG9uZTpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLHMsYT1lLmNsb25lTm9kZSghMCksdT14LmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKTtpZighKHguc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZHx8MSE9PWUubm9kZVR5cGUmJjExIT09ZS5ub2RlVHlwZXx8eC5pc1hNTERvYyhlKSkpZm9yKHM9bXQoYSksbz1tdChlKSxyPTAsaT1vLmxlbmd0aDtpPnI7cisrKXl0KG9bcl0sc1tyXSk7aWYodClpZihuKWZvcihvPW98fG10KGUpLHM9c3x8bXQoYSkscj0wLGk9by5sZW5ndGg7aT5yO3IrKylndChvW3JdLHNbcl0pO2Vsc2UgZ3QoZSxhKTtyZXR1cm4gcz1tdChhLCJzY3JpcHQiKSxzLmxlbmd0aD4wJiZkdChzLCF1JiZtdChlLCJzY3JpcHQiKSksYX0sYnVpbGRGcmFnbWVudDpmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvLHMsYSx1LGwsYz0wLHA9ZS5sZW5ndGgsZj10LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxoPVtdO2Zvcig7cD5jO2MrKylpZihpPWVbY10saXx8MD09PWkpaWYoIm9iamVjdCI9PT14LnR5cGUoaSkpeC5tZXJnZShoLGkubm9kZVR5cGU/W2ldOmkpO2Vsc2UgaWYocnQudGVzdChpKSl7bz1vfHxmLmFwcGVuZENoaWxkKHQuY3JlYXRlRWxlbWVudCgiZGl2IikpLHM9KG50LmV4ZWMoaSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCksYT1jdFtzXXx8Y3QuX2RlZmF1bHQsby5pbm5lckhUTUw9YVsxXStpLnJlcGxhY2UodHQsIjwkMT48LyQyPiIpK2FbMl0sbD1hWzBdO3doaWxlKGwtLSlvPW8ubGFzdENoaWxkO3gubWVyZ2UoaCxvLmNoaWxkTm9kZXMpLG89Zi5maXJzdENoaWxkLG8udGV4dENvbnRlbnQ9IiJ9ZWxzZSBoLnB1c2godC5jcmVhdGVUZXh0Tm9kZShpKSk7Zi50ZXh0Q29udGVudD0iIixjPTA7d2hpbGUoaT1oW2MrK10paWYoKCFyfHwtMT09PXguaW5BcnJheShpLHIpKSYmKHU9eC5jb250YWlucyhpLm93bmVyRG9jdW1lbnQsaSksbz1tdChmLmFwcGVuZENoaWxkKGkpLCJzY3JpcHQiKSx1JiZkdChvKSxuKSl7bD0wO3doaWxlKGk9b1tsKytdKWF0LnRlc3QoaS50eXBlfHwiIikmJm4ucHVzaChpKX1yZXR1cm4gZn0sY2xlYW5EYXRhOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLG8scyxhPXguZXZlbnQuc3BlY2lhbCx1PTA7Zm9yKDsobj1lW3VdKSE9PXVuZGVmaW5lZDt1Kyspe2lmKEYuYWNjZXB0cyhuKSYmKG89bltxLmV4cGFuZG9dLG8mJih0PXEuY2FjaGVbb10pKSl7aWYocj1PYmplY3Qua2V5cyh0LmV2ZW50c3x8e30pLHIubGVuZ3RoKWZvcihzPTA7KGk9cltzXSkhPT11bmRlZmluZWQ7cysrKWFbaV0/eC5ldmVudC5yZW1vdmUobixpKTp4LnJlbW92ZUV2ZW50KG4saSx0LmhhbmRsZSk7cS5jYWNoZVtvXSYmZGVsZXRlIHEuY2FjaGVbb119ZGVsZXRlIEwuY2FjaGVbbltMLmV4cGFuZG9dXX19LF9ldmFsVXJsOmZ1bmN0aW9uKGUpe3JldHVybiB4LmFqYXgoe3VybDplLHR5cGU6IkdFVCIsZGF0YVR5cGU6InNjcmlwdCIsYXN5bmM6ITEsZ2xvYmFsOiExLCJ0aHJvd3MiOiEwfSl9fSk7ZnVuY3Rpb24gcHQoZSx0KXtyZXR1cm4geC5ub2RlTmFtZShlLCJ0YWJsZSIpJiZ4Lm5vZGVOYW1lKDE9PT10Lm5vZGVUeXBlP3Q6dC5maXJzdENoaWxkLCJ0ciIpP2UuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRib2R5IilbMF18fGUuYXBwZW5kQ2hpbGQoZS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRib2R5IikpOmV9ZnVuY3Rpb24gZnQoZSl7cmV0dXJuIGUudHlwZT0obnVsbCE9PWUuZ2V0QXR0cmlidXRlKCJ0eXBlIikpKyIvIitlLnR5cGUsZX1mdW5jdGlvbiBodChlKXt2YXIgdD11dC5leGVjKGUudHlwZSk7cmV0dXJuIHQ/ZS50eXBlPXRbMV06ZS5yZW1vdmVBdHRyaWJ1dGUoInR5cGUiKSxlfWZ1bmN0aW9uIGR0KGUsdCl7dmFyIG49ZS5sZW5ndGgscj0wO2Zvcig7bj5yO3IrKylxLnNldChlW3JdLCJnbG9iYWxFdmFsIiwhdHx8cS5nZXQodFtyXSwiZ2xvYmFsRXZhbCIpKX1mdW5jdGlvbiBndChlLHQpe3ZhciBuLHIsaSxvLHMsYSx1LGw7aWYoMT09PXQubm9kZVR5cGUpe2lmKHEuaGFzRGF0YShlKSYmKG89cS5hY2Nlc3MoZSkscz1xLnNldCh0LG8pLGw9by5ldmVudHMpKXtkZWxldGUgcy5oYW5kbGUscy5ldmVudHM9e307Zm9yKGkgaW4gbClmb3Iobj0wLHI9bFtpXS5sZW5ndGg7cj5uO24rKyl4LmV2ZW50LmFkZCh0LGksbFtpXVtuXSl9TC5oYXNEYXRhKGUpJiYoYT1MLmFjY2VzcyhlKSx1PXguZXh0ZW5kKHt9LGEpLEwuc2V0KHQsdSkpfX1mdW5jdGlvbiBtdChlLHQpe3ZhciBuPWUuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0fHwiKiIpOmUucXVlcnlTZWxlY3RvckFsbD9lLnF1ZXJ5U2VsZWN0b3JBbGwodHx8IioiKTpbXTtyZXR1cm4gdD09PXVuZGVmaW5lZHx8dCYmeC5ub2RlTmFtZShlLHQpP3gubWVyZ2UoW2VdLG4pOm59ZnVuY3Rpb24geXQoZSx0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7ImlucHV0Ij09PW4mJm90LnRlc3QoZS50eXBlKT90LmNoZWNrZWQ9ZS5jaGVja2VkOigiaW5wdXQiPT09bnx8InRleHRhcmVhIj09PW4pJiYodC5kZWZhdWx0VmFsdWU9ZS5kZWZhdWx0VmFsdWUpfXguZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiB4LmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3godGhpcykud3JhcEFsbChlLmNhbGwodGhpcyx0KSl9KToodGhpc1swXSYmKHQ9eChlLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmdC5pbnNlcnRCZWZvcmUodGhpc1swXSksdC5tYXAoZnVuY3Rpb24oKXt2YXIgZT10aGlzO3doaWxlKGUuZmlyc3RFbGVtZW50Q2hpbGQpZT1lLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBlfSkuYXBwZW5kKHRoaXMpKSx0aGlzKX0sd3JhcElubmVyOmZ1bmN0aW9uKGUpe3JldHVybiB4LmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3godGhpcykud3JhcElubmVyKGUuY2FsbCh0aGlzLHQpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PXgodGhpcyksbj10LmNvbnRlbnRzKCk7bi5sZW5ndGg/bi53cmFwQWxsKGUpOnQuYXBwZW5kKGUpfSl9LHdyYXA6ZnVuY3Rpb24oZSl7dmFyIHQ9eC5pc0Z1bmN0aW9uKGUpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24obil7eCh0aGlzKS53cmFwQWxsKHQ/ZS5jYWxsKHRoaXMsbik6ZSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe3gubm9kZU5hbWUodGhpcywiYm9keSIpfHx4KHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KTt2YXIgdnQseHQsYnQ9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLHd0PS9ebWFyZ2luLyxUdD1SZWdFeHAoIl4oIitiKyIpKC4qKSQiLCJpIiksQ3Q9UmVnRXhwKCJeKCIrYisiKSg/IXB4KVthLXolXSskIiwiaSIpLGt0PVJlZ0V4cCgiXihbKy1dKT0oIitiKyIpIiwiaSIpLE50PXtCT0RZOiJibG9jayJ9LEV0PXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxTdD17bGV0dGVyU3BhY2luZzowLGZvbnRXZWlnaHQ6NDAwfSxqdD1bIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLER0PVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl07ZnVuY3Rpb24gQXQoZSx0KXtpZih0IGluIGUpcmV0dXJuIHQ7dmFyIG49dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpLHI9dCxpPUR0Lmxlbmd0aDt3aGlsZShpLS0paWYodD1EdFtpXStuLHQgaW4gZSlyZXR1cm4gdDtyZXR1cm4gcn1mdW5jdGlvbiBMdChlLHQpe3JldHVybiBlPXR8fGUsIm5vbmUiPT09eC5jc3MoZSwiZGlzcGxheSIpfHwheC5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSl9ZnVuY3Rpb24gcXQodCl7cmV0dXJuIGUuZ2V0Q29tcHV0ZWRTdHlsZSh0LG51bGwpfWZ1bmN0aW9uIEh0KGUsdCl7dmFyIG4scixpLG89W10scz0wLGE9ZS5sZW5ndGg7Zm9yKDthPnM7cysrKXI9ZVtzXSxyLnN0eWxlJiYob1tzXT1xLmdldChyLCJvbGRkaXNwbGF5Iiksbj1yLnN0eWxlLmRpc3BsYXksdD8ob1tzXXx8Im5vbmUiIT09bnx8KHIuc3R5bGUuZGlzcGxheT0iIiksIiI9PT1yLnN0eWxlLmRpc3BsYXkmJkx0KHIpJiYob1tzXT1xLmFjY2VzcyhyLCJvbGRkaXNwbGF5IixSdChyLm5vZGVOYW1lKSkpKTpvW3NdfHwoaT1MdChyKSwobiYmIm5vbmUiIT09bnx8IWkpJiZxLnNldChyLCJvbGRkaXNwbGF5IixpP246eC5jc3MociwiZGlzcGxheSIpKSkpO2ZvcihzPTA7YT5zO3MrKylyPWVbc10sci5zdHlsZSYmKHQmJiJub25lIiE9PXIuc3R5bGUuZGlzcGxheSYmIiIhPT1yLnN0eWxlLmRpc3BsYXl8fChyLnN0eWxlLmRpc3BsYXk9dD9vW3NdfHwiIjoibm9uZSIpKTtyZXR1cm4gZX14LmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz17fSxzPTA7aWYoeC5pc0FycmF5KHQpKXtmb3Iocj1xdChlKSxpPXQubGVuZ3RoO2k+cztzKyspb1t0W3NdXT14LmNzcyhlLHRbc10sITEscik7cmV0dXJuIG99cmV0dXJuIG4hPT11bmRlZmluZWQ/eC5zdHlsZShlLHQsbik6eC5jc3MoZSx0KX0sZSx0LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gSHQodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gSHQodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihlKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBlP2U/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7THQodGhpcyk/eCh0aGlzKS5zaG93KCk6eCh0aGlzKS5oaWRlKCl9KX19KSx4LmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihlLHQpe2lmKHQpe3ZhciBuPXZ0KGUsIm9wYWNpdHkiKTtyZXR1cm4iIj09PW4/IjEiOm59fX19LGNzc051bWJlcjp7Y29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOnsiZmxvYXQiOiJjc3NGbG9hdCJ9LHN0eWxlOmZ1bmN0aW9uKGUsdCxuLHIpe2lmKGUmJjMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZSYmZS5zdHlsZSl7dmFyIGksbyxzLGE9eC5jYW1lbENhc2UodCksdT1lLnN0eWxlO3JldHVybiB0PXguY3NzUHJvcHNbYV18fCh4LmNzc1Byb3BzW2FdPUF0KHUsYSkpLHM9eC5jc3NIb29rc1t0XXx8eC5jc3NIb29rc1thXSxuPT09dW5kZWZpbmVkP3MmJiJnZXQiaW4gcyYmKGk9cy5nZXQoZSwhMSxyKSkhPT11bmRlZmluZWQ/aTp1W3RdOihvPXR5cGVvZiBuLCJzdHJpbmciPT09byYmKGk9a3QuZXhlYyhuKSkmJihuPShpWzFdKzEpKmlbMl0rcGFyc2VGbG9hdCh4LmNzcyhlLHQpKSxvPSJudW1iZXIiKSxudWxsPT1ufHwibnVtYmVyIj09PW8mJmlzTmFOKG4pfHwoIm51bWJlciIhPT1vfHx4LmNzc051bWJlclthXXx8KG4rPSJweCIpLHguc3VwcG9ydC5jbGVhckNsb25lU3R5bGV8fCIiIT09bnx8MCE9PXQuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwodVt0XT0iaW5oZXJpdCIpLHMmJiJzZXQiaW4gcyYmKG49cy5zZXQoZSxuLHIpKT09PXVuZGVmaW5lZHx8KHVbdF09bikpLHVuZGVmaW5lZCl9fSxjc3M6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxzLGE9eC5jYW1lbENhc2UodCk7cmV0dXJuIHQ9eC5jc3NQcm9wc1thXXx8KHguY3NzUHJvcHNbYV09QXQoZS5zdHlsZSxhKSkscz14LmNzc0hvb2tzW3RdfHx4LmNzc0hvb2tzW2FdLHMmJiJnZXQiaW4gcyYmKGk9cy5nZXQoZSwhMCxuKSksaT09PXVuZGVmaW5lZCYmKGk9dnQoZSx0LHIpKSwibm9ybWFsIj09PWkmJnQgaW4gU3QmJihpPVN0W3RdKSwiIj09PW58fG4/KG89cGFyc2VGbG9hdChpKSxuPT09ITB8fHguaXNOdW1lcmljKG8pP298fDA6aSk6aX19KSx2dD1mdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLHM9bnx8cXQoZSksYT1zP3MuZ2V0UHJvcGVydHlWYWx1ZSh0KXx8c1t0XTp1bmRlZmluZWQsdT1lLnN0eWxlO3JldHVybiBzJiYoIiIhPT1hfHx4LmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKXx8KGE9eC5zdHlsZShlLHQpKSxDdC50ZXN0KGEpJiZ3dC50ZXN0KHQpJiYocj11LndpZHRoLGk9dS5taW5XaWR0aCxvPXUubWF4V2lkdGgsdS5taW5XaWR0aD11Lm1heFdpZHRoPXUud2lkdGg9YSxhPXMud2lkdGgsdS53aWR0aD1yLHUubWluV2lkdGg9aSx1Lm1heFdpZHRoPW8pKSxhfTtmdW5jdGlvbiBPdChlLHQsbil7dmFyIHI9VHQuZXhlYyh0KTtyZXR1cm4gcj9NYXRoLm1heCgwLHJbMV0tKG58fDApKSsoclsyXXx8InB4Iik6dH1mdW5jdGlvbiBGdChlLHQsbixyLGkpe3ZhciBvPW49PT0ocj8iYm9yZGVyIjoiY29udGVudCIpPzQ6IndpZHRoIj09PXQ/MTowLHM9MDtmb3IoOzQ+bztvKz0yKSJtYXJnaW4iPT09biYmKHMrPXguY3NzKGUsbitqdFtvXSwhMCxpKSkscj8oImNvbnRlbnQiPT09biYmKHMtPXguY3NzKGUsInBhZGRpbmciK2p0W29dLCEwLGkpKSwibWFyZ2luIiE9PW4mJihzLT14LmNzcyhlLCJib3JkZXIiK2p0W29dKyJXaWR0aCIsITAsaSkpKToocys9eC5jc3MoZSwicGFkZGluZyIranRbb10sITAsaSksInBhZGRpbmciIT09biYmKHMrPXguY3NzKGUsImJvcmRlciIranRbb10rIldpZHRoIiwhMCxpKSkpO3JldHVybiBzfWZ1bmN0aW9uIFB0KGUsdCxuKXt2YXIgcj0hMCxpPSJ3aWR0aCI9PT10P2Uub2Zmc2V0V2lkdGg6ZS5vZmZzZXRIZWlnaHQsbz1xdChlKSxzPXguc3VwcG9ydC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PXguY3NzKGUsImJveFNpemluZyIsITEsbyk7aWYoMD49aXx8bnVsbD09aSl7aWYoaT12dChlLHQsbyksKDA+aXx8bnVsbD09aSkmJihpPWUuc3R5bGVbdF0pLEN0LnRlc3QoaSkpcmV0dXJuIGk7cj1zJiYoeC5zdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlfHxpPT09ZS5zdHlsZVt0XSksaT1wYXJzZUZsb2F0KGkpfHwwfXJldHVybiBpK0Z0KGUsdCxufHwocz8iYm9yZGVyIjoiY29udGVudCIpLHIsbykrInB4In1mdW5jdGlvbiBSdChlKXt2YXIgdD1vLG49TnRbZV07cmV0dXJuIG58fChuPU10KGUsdCksIm5vbmUiIT09biYmbnx8KHh0PSh4dHx8eCgiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPiIpLmNzcygiY3NzVGV4dCIsImRpc3BsYXk6YmxvY2sgIWltcG9ydGFudCIpKS5hcHBlbmRUbyh0LmRvY3VtZW50RWxlbWVudCksdD0oeHRbMF0uY29udGVudFdpbmRvd3x8eHRbMF0uY29udGVudERvY3VtZW50KS5kb2N1bWVudCx0LndyaXRlKCI8IWRvY3R5cGUgaHRtbD48aHRtbD48Ym9keT4iKSx0LmNsb3NlKCksbj1NdChlLHQpLHh0LmRldGFjaCgpKSxOdFtlXT1uKSxufWZ1bmN0aW9uIE10KGUsdCl7dmFyIG49eCh0LmNyZWF0ZUVsZW1lbnQoZSkpLmFwcGVuZFRvKHQuYm9keSkscj14LmNzcyhuWzBdLCJkaXNwbGF5Iik7cmV0dXJuIG4ucmVtb3ZlKCkscn14LmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGUsdCl7eC5jc3NIb29rc1t0XT17Z2V0OmZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbj8wPT09ZS5vZmZzZXRXaWR0aCYmYnQudGVzdCh4LmNzcyhlLCJkaXNwbGF5IikpP3guc3dhcChlLEV0LGZ1bmN0aW9uKCl7cmV0dXJuIFB0KGUsdCxyKX0pOlB0KGUsdCxyKTp1bmRlZmluZWR9LHNldDpmdW5jdGlvbihlLG4scil7dmFyIGk9ciYmcXQoZSk7cmV0dXJuIE90KGUsbixyP0Z0KGUsdCxyLHguc3VwcG9ydC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PXguY3NzKGUsImJveFNpemluZyIsITEsaSksaSk6MCl9fX0pLHgoZnVuY3Rpb24oKXt4LnN1cHBvcnQucmVsaWFibGVNYXJnaW5SaWdodHx8KHguY3NzSG9va3MubWFyZ2luUmlnaHQ9e2dldDpmdW5jdGlvbihlLHQpe3JldHVybiB0P3guc3dhcChlLHtkaXNwbGF5OiJpbmxpbmUtYmxvY2sifSx2dCxbZSwibWFyZ2luUmlnaHQiXSk6dW5kZWZpbmVkfX0pLCF4LnN1cHBvcnQucGl4ZWxQb3NpdGlvbiYmeC5mbi5wb3NpdGlvbiYmeC5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGUsdCl7eC5jc3NIb29rc1t0XT17Z2V0OmZ1bmN0aW9uKGUsbil7cmV0dXJuIG4/KG49dnQoZSx0KSxDdC50ZXN0KG4pP3goZSkucG9zaXRpb24oKVt0XSsicHgiOm4pOnVuZGVmaW5lZH19fSl9KSx4LmV4cHImJnguZXhwci5maWx0ZXJzJiYoeC5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGUpe3JldHVybiAwPj1lLm9mZnNldFdpZHRoJiYwPj1lLm9mZnNldEhlaWdodH0seC5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihlKXtyZXR1cm4heC5leHByLmZpbHRlcnMuaGlkZGVuKGUpfSkseC5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oZSx0KXt4LmNzc0hvb2tzW2UrdF09e2V4cGFuZDpmdW5jdGlvbihuKXt2YXIgcj0wLGk9e30sbz0ic3RyaW5nIj09dHlwZW9mIG4/bi5zcGxpdCgiICIpOltuXTtmb3IoOzQ+cjtyKyspaVtlK2p0W3JdK3RdPW9bcl18fG9bci0yXXx8b1swXTtyZXR1cm4gaX19LHd0LnRlc3QoZSl8fCh4LmNzc0hvb2tzW2UrdF0uc2V0PU90KX0pO3ZhciBXdD0vJTIwL2csJHQ9L1xbXF0kLyxCdD0vXHI/XG4vZyxJdD0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksenQ9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO3guZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4geC5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXgucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBlP3gubWFrZUFycmF5KGUpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIXgodGhpcykuaXMoIjpkaXNhYmxlZCIpJiZ6dC50ZXN0KHRoaXMubm9kZU5hbWUpJiYhSXQudGVzdChlKSYmKHRoaXMuY2hlY2tlZHx8IW90LnRlc3QoZSkpfSkubWFwKGZ1bmN0aW9uKGUsdCl7dmFyIG49eCh0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09bj9udWxsOnguaXNBcnJheShuKT94Lm1hcChuLGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOnQubmFtZSx2YWx1ZTplLnJlcGxhY2UoQnQsIlxyXG4iKX19KTp7bmFtZTp0Lm5hbWUsdmFsdWU6bi5yZXBsYWNlKEJ0LCJcclxuIil9fSkuZ2V0KCl9fSkseC5wYXJhbT1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT1mdW5jdGlvbihlLHQpe3Q9eC5pc0Z1bmN0aW9uKHQpP3QoKTpudWxsPT10PyIiOnQscltyLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGUpKyI9IitlbmNvZGVVUklDb21wb25lbnQodCl9O2lmKHQ9PT11bmRlZmluZWQmJih0PXguYWpheFNldHRpbmdzJiZ4LmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCkseC5pc0FycmF5KGUpfHxlLmpxdWVyeSYmIXguaXNQbGFpbk9iamVjdChlKSl4LmVhY2goZSxmdW5jdGlvbigpe2kodGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IobiBpbiBlKV90KG4sZVtuXSx0LGkpO3JldHVybiByLmpvaW4oIiYiKS5yZXBsYWNlKFd0LCIrIil9O2Z1bmN0aW9uIF90KGUsdCxuLHIpe3ZhciBpO2lmKHguaXNBcnJheSh0KSl4LmVhY2godCxmdW5jdGlvbih0LGkpe258fCR0LnRlc3QoZSk/cihlLGkpOl90KGUrIlsiKygib2JqZWN0Ij09dHlwZW9mIGk/dDoiIikrIl0iLGksbixyKX0pO2Vsc2UgaWYobnx8Im9iamVjdCIhPT14LnR5cGUodCkpcihlLHQpO2Vsc2UgZm9yKGkgaW4gdClfdChlKyJbIitpKyJdIix0W2ldLG4scil9eC5lYWNoKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGUsdCl7eC5mblt0XT1mdW5jdGlvbihlLG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbih0LG51bGwsZSxuKTp0aGlzLnRyaWdnZXIodCl9fSkseC5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubW91c2VlbnRlcihlKS5tb3VzZWxlYXZlKHR8fGUpfSxiaW5kOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5vbihlLG51bGwsdCxuKX0sdW5iaW5kOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMub2ZmKGUsbnVsbCx0KX0sZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMub24odCxlLG4scil9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihlLCIqKiIpOnRoaXMub2ZmKHQsZXx8IioqIixuKX19KTt2YXIgWHQsVXQsWXQ9eC5ub3coKSxWdD0vXD8vLEd0PS8jLiokLyxKdD0vKFs/Jl0pXz1bXiZdKi8sUXQ9L14oLio/KTpbIFx0XSooW15cclxuXSopJC9nbSxLdD0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxadD0vXig/OkdFVHxIRUFEKSQvLGVuPS9eXC9cLy8sdG49L14oW1x3ListXSs6KSg/OlwvXC8oW15cLz8jOl0qKSg/OjooXGQrKXwpfCkvLG5uPXguZm4ubG9hZCxybj17fSxvbj17fSxzbj0iKi8iLmNvbmNhdCgiKiIpO3RyeXtVdD1pLmhyZWZ9Y2F0Y2goYW4pe1V0PW8uY3JlYXRlRWxlbWVudCgiYSIpLFV0LmhyZWY9IiIsVXQ9VXQuaHJlZn1YdD10bi5leGVjKFV0LnRvTG93ZXJDYXNlKCkpfHxbXTtmdW5jdGlvbiB1bihlKXtyZXR1cm4gZnVuY3Rpb24odCxuKXsic3RyaW5nIiE9dHlwZW9mIHQmJihuPXQsdD0iKiIpO3ZhciByLGk9MCxvPXQudG9Mb3dlckNhc2UoKS5tYXRjaCh3KXx8W107aWYoeC5pc0Z1bmN0aW9uKG4pKXdoaWxlKHI9b1tpKytdKSIrIj09PXJbMF0/KHI9ci5zbGljZSgxKXx8IioiLChlW3JdPWVbcl18fFtdKS51bnNoaWZ0KG4pKTooZVtyXT1lW3JdfHxbXSkucHVzaChuKX19ZnVuY3Rpb24gbG4oZSx0LG4scil7dmFyIGk9e30sbz1lPT09b247ZnVuY3Rpb24gcyhhKXt2YXIgdTtyZXR1cm4gaVthXT0hMCx4LmVhY2goZVthXXx8W10sZnVuY3Rpb24oZSxhKXt2YXIgbD1hKHQsbixyKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGx8fG98fGlbbF0/bz8hKHU9bCk6dW5kZWZpbmVkOih0LmRhdGFUeXBlcy51bnNoaWZ0KGwpLHMobCksITEpfSksdX1yZXR1cm4gcyh0LmRhdGFUeXBlc1swXSl8fCFpWyIqIl0mJnMoIioiKX1mdW5jdGlvbiBjbihlLHQpe3ZhciBuLHIsaT14LmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKG4gaW4gdCl0W25dIT09dW5kZWZpbmVkJiYoKGlbbl0/ZTpyfHwocj17fSkpW25dPXRbbl0pO3JldHVybiByJiZ4LmV4dGVuZCghMCxlLHIpLGV9eC5mbi5sb2FkPWZ1bmN0aW9uKGUsdCxuKXtpZigic3RyaW5nIiE9dHlwZW9mIGUmJm5uKXJldHVybiBubi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHIsaSxvLHM9dGhpcyxhPWUuaW5kZXhPZigiICIpO3JldHVybiBhPj0wJiYocj1lLnNsaWNlKGEpLGU9ZS5zbGljZSgwLGEpKSx4LmlzRnVuY3Rpb24odCk/KG49dCx0PXVuZGVmaW5lZCk6dCYmIm9iamVjdCI9PXR5cGVvZiB0JiYoaT0iUE9TVCIpLHMubGVuZ3RoPjAmJnguYWpheCh7dXJsOmUsdHlwZTppLGRhdGFUeXBlOiJodG1sIixkYXRhOnR9KS5kb25lKGZ1bmN0aW9uKGUpe289YXJndW1lbnRzLHMuaHRtbChyP3goIjxkaXY+IikuYXBwZW5kKHgucGFyc2VIVE1MKGUpKS5maW5kKHIpOmUpfSkuY29tcGxldGUobiYmZnVuY3Rpb24oZSx0KXtzLmVhY2gobixvfHxbZS5yZXNwb25zZVRleHQsdCxlXSl9KSx0aGlzfSx4LmVhY2goWyJhamF4U3RhcnQiLCJhamF4U3RvcCIsImFqYXhDb21wbGV0ZSIsImFqYXhFcnJvciIsImFqYXhTdWNjZXNzIiwiYWpheFNlbmQiXSxmdW5jdGlvbihlLHQpe3guZm5bdF09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub24odCxlKX19KSx4LmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6VXQsdHlwZToiR0VUIixpc0xvY2FsOkt0LnRlc3QoWHRbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6c24sdGV4dDoidGV4dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6L3htbC8saHRtbDovaHRtbC8sanNvbjovanNvbi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjohMCwidGV4dCBqc29uIjp4LnBhcnNlSlNPTiwidGV4dCB4bWwiOngucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihlLHQpe3JldHVybiB0P2NuKGNuKGUseC5hamF4U2V0dGluZ3MpLHQpOmNuKHguYWpheFNldHRpbmdzLGUpfSxhamF4UHJlZmlsdGVyOnVuKHJuKSxhamF4VHJhbnNwb3J0OnVuKG9uKSxhamF4OmZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBlJiYodD1lLGU9dW5kZWZpbmVkKSx0PXR8fHt9O3ZhciBuLHIsaSxvLHMsYSx1LGwsYz14LmFqYXhTZXR1cCh7fSx0KSxwPWMuY29udGV4dHx8YyxmPWMuY29udGV4dCYmKHAubm9kZVR5cGV8fHAuanF1ZXJ5KT94KHApOnguZXZlbnQsaD14LkRlZmVycmVkKCksZD14LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxnPWMuc3RhdHVzQ29kZXx8e30sbT17fSx5PXt9LHY9MCxiPSJjYW5jZWxlZCIsVD17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKDI9PT12KXtpZighbyl7bz17fTt3aGlsZSh0PVF0LmV4ZWMoaSkpb1t0WzFdLnRvTG93ZXJDYXNlKCldPXRbMl19dD1vW2UudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PXQ/bnVsbDp0fSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXY/aTpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS50b0xvd2VyQ2FzZSgpO3JldHVybiB2fHwoZT15W25dPXlbbl18fGUsbVtlXT10KSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGUpe3JldHVybiB2fHwoYy5taW1lVHlwZT1lKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKGUpaWYoMj52KWZvcih0IGluIGUpZ1t0XT1bZ1t0XSxlW3RdXTtlbHNlIFQuYWx3YXlzKGVbVC5zdGF0dXNdKTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZXx8YjtyZXR1cm4gbiYmbi5hYm9ydCh0KSxrKDAsdCksdGhpc319O2lmKGgucHJvbWlzZShUKS5jb21wbGV0ZT1kLmFkZCxULnN1Y2Nlc3M9VC5kb25lLFQuZXJyb3I9VC5mYWlsLGMudXJsPSgoZXx8Yy51cmx8fFV0KSsiIikucmVwbGFjZShHdCwiIikucmVwbGFjZShlbixYdFsxXSsiLy8iKSxjLnR5cGU9dC5tZXRob2R8fHQudHlwZXx8Yy5tZXRob2R8fGMudHlwZSxjLmRhdGFUeXBlcz14LnRyaW0oYy5kYXRhVHlwZXx8IioiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKHcpfHxbIiJdLG51bGw9PWMuY3Jvc3NEb21haW4mJihhPXRuLmV4ZWMoYy51cmwudG9Mb3dlckNhc2UoKSksYy5jcm9zc0RvbWFpbj0hKCFhfHxhWzFdPT09WHRbMV0mJmFbMl09PT1YdFsyXSYmKGFbM118fCgiaHR0cDoiPT09YVsxXT8iODAiOiI0NDMiKSk9PT0oWHRbM118fCgiaHR0cDoiPT09WHRbMV0/IjgwIjoiNDQzIikpKSksYy5kYXRhJiZjLnByb2Nlc3NEYXRhJiYic3RyaW5nIiE9dHlwZW9mIGMuZGF0YSYmKGMuZGF0YT14LnBhcmFtKGMuZGF0YSxjLnRyYWRpdGlvbmFsKSksbG4ocm4sYyx0LFQpLDI9PT12KXJldHVybiBUO3U9Yy5nbG9iYWwsdSYmMD09PXguYWN0aXZlKysmJnguZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0IiksYy50eXBlPWMudHlwZS50b1VwcGVyQ2FzZSgpLGMuaGFzQ29udGVudD0hWnQudGVzdChjLnR5cGUpLHI9Yy51cmwsYy5oYXNDb250ZW50fHwoYy5kYXRhJiYocj1jLnVybCs9KFZ0LnRlc3Qocik/IiYiOiI/IikrYy5kYXRhLGRlbGV0ZSBjLmRhdGEpLGMuY2FjaGU9PT0hMSYmKGMudXJsPUp0LnRlc3Qocik/ci5yZXBsYWNlKEp0LCIkMV89IitZdCsrKTpyKyhWdC50ZXN0KHIpPyImIjoiPyIpKyJfPSIrWXQrKykpLGMuaWZNb2RpZmllZCYmKHgubGFzdE1vZGlmaWVkW3JdJiZULnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIix4Lmxhc3RNb2RpZmllZFtyXSkseC5ldGFnW3JdJiZULnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLHguZXRhZ1tyXSkpLChjLmRhdGEmJmMuaGFzQ29udGVudCYmYy5jb250ZW50VHlwZSE9PSExfHx0LmNvbnRlbnRUeXBlKSYmVC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLGMuY29udGVudFR5cGUpLFQuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IixjLmRhdGFUeXBlc1swXSYmYy5hY2NlcHRzW2MuZGF0YVR5cGVzWzBdXT9jLmFjY2VwdHNbYy5kYXRhVHlwZXNbMF1dKygiKiIhPT1jLmRhdGFUeXBlc1swXT8iLCAiK3NuKyI7IHE9MC4wMSI6IiIpOmMuYWNjZXB0c1siKiJdKTtmb3IobCBpbiBjLmhlYWRlcnMpVC5zZXRSZXF1ZXN0SGVhZGVyKGwsYy5oZWFkZXJzW2xdKTtpZihjLmJlZm9yZVNlbmQmJihjLmJlZm9yZVNlbmQuY2FsbChwLFQsYyk9PT0hMXx8Mj09PXYpKXJldHVybiBULmFib3J0KCk7Yj0iYWJvcnQiO2ZvcihsIGlue3N1Y2Nlc3M6MSxlcnJvcjoxLGNvbXBsZXRlOjF9KVRbbF0oY1tsXSk7aWYobj1sbihvbixjLHQsVCkpe1QucmVhZHlTdGF0ZT0xLHUmJmYudHJpZ2dlcigiYWpheFNlbmQiLFtULGNdKSxjLmFzeW5jJiZjLnRpbWVvdXQ+MCYmKHM9c2V0VGltZW91dChmdW5jdGlvbigpe1QuYWJvcnQoInRpbWVvdXQiKX0sYy50aW1lb3V0KSk7dHJ5e3Y9MSxuLnNlbmQobSxrKX1jYXRjaChDKXtpZighKDI+dikpdGhyb3cgQztrKC0xLEMpfX1lbHNlIGsoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIGsoZSx0LG8sYSl7dmFyIGwsbSx5LGIsdyxDPXQ7MiE9PXYmJih2PTIscyYmY2xlYXJUaW1lb3V0KHMpLG49dW5kZWZpbmVkLGk9YXx8IiIsVC5yZWFkeVN0YXRlPWU+MD80OjAsbD1lPj0yMDAmJjMwMD5lfHwzMDQ9PT1lLG8mJihiPXBuKGMsVCxvKSksYj1mbihjLGIsVCxsKSxsPyhjLmlmTW9kaWZpZWQmJih3PVQuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSx3JiYoeC5sYXN0TW9kaWZpZWRbcl09dyksdz1ULmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIiksdyYmKHguZXRhZ1tyXT13KSksMjA0PT09ZXx8IkhFQUQiPT09Yy50eXBlP0M9Im5vY29udGVudCI6MzA0PT09ZT9DPSJub3Rtb2RpZmllZCI6KEM9Yi5zdGF0ZSxtPWIuZGF0YSx5PWIuZXJyb3IsbD0heSkpOih5PUMsKGV8fCFDKSYmKEM9ImVycm9yIiwwPmUmJihlPTApKSksVC5zdGF0dXM9ZSxULnN0YXR1c1RleHQ9KHR8fEMpKyIiLGw/aC5yZXNvbHZlV2l0aChwLFttLEMsVF0pOmgucmVqZWN0V2l0aChwLFtULEMseV0pLFQuc3RhdHVzQ29kZShnKSxnPXVuZGVmaW5lZCx1JiZmLnRyaWdnZXIobD8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFtULGMsbD9tOnldKSxkLmZpcmVXaXRoKHAsW1QsQ10pLHUmJihmLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW1QsY10pLC0teC5hY3RpdmV8fHguZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiBUfSxnZXRKU09OOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4geC5nZXQoZSx0LG4sImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguZ2V0KGUsdW5kZWZpbmVkLHQsInNjcmlwdCIpfX0pLHguZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihlLHQpe3hbdF09ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIHguaXNGdW5jdGlvbihuKSYmKGk9aXx8cixyPW4sbj11bmRlZmluZWQpLHguYWpheCh7dXJsOmUsdHlwZTp0LGRhdGFUeXBlOmksZGF0YTpuLHN1Y2Nlc3M6cn0pfX0pO2Z1bmN0aW9uIHBuKGUsdCxuKXt2YXIgcixpLG8scyxhPWUuY29udGVudHMsdT1lLmRhdGFUeXBlczt3aGlsZSgiKiI9PT11WzBdKXUuc2hpZnQoKSxyPT09dW5kZWZpbmVkJiYocj1lLm1pbWVUeXBlfHx0LmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKSk7aWYocilmb3IoaSBpbiBhKWlmKGFbaV0mJmFbaV0udGVzdChyKSl7dS51bnNoaWZ0KGkpO2JyZWFrfWlmKHVbMF1pbiBuKW89dVswXTtlbHNle2ZvcihpIGluIG4pe2lmKCF1WzBdfHxlLmNvbnZlcnRlcnNbaSsiICIrdVswXV0pe289aTticmVha31zfHwocz1pKX1vPW98fHN9cmV0dXJuIG8/KG8hPT11WzBdJiZ1LnVuc2hpZnQobyksbltvXSk6dW5kZWZpbmVkfWZ1bmN0aW9uIGZuKGUsdCxuLHIpe3ZhciBpLG8scyxhLHUsbD17fSxjPWUuZGF0YVR5cGVzLnNsaWNlKCk7aWYoY1sxXSlmb3IocyBpbiBlLmNvbnZlcnRlcnMpbFtzLnRvTG93ZXJDYXNlKCldPWUuY29udmVydGVyc1tzXTtvPWMuc2hpZnQoKTt3aGlsZShvKWlmKGUucmVzcG9uc2VGaWVsZHNbb10mJihuW2UucmVzcG9uc2VGaWVsZHNbb11dPXQpLCF1JiZyJiZlLmRhdGFGaWx0ZXImJih0PWUuZGF0YUZpbHRlcih0LGUuZGF0YVR5cGUpKSx1PW8sbz1jLnNoaWZ0KCkpaWYoIioiPT09bylvPXU7ZWxzZSBpZigiKiIhPT11JiZ1IT09byl7aWYocz1sW3UrIiAiK29dfHxsWyIqICIrb10sIXMpZm9yKGkgaW4gbClpZihhPWkuc3BsaXQoIiAiKSxhWzFdPT09byYmKHM9bFt1KyIgIithWzBdXXx8bFsiKiAiK2FbMF1dKSl7cz09PSEwP3M9bFtpXTpsW2ldIT09ITAmJihvPWFbMF0sYy51bnNoaWZ0KGFbMV0pKTticmVha31pZihzIT09ITApaWYocyYmZVsidGhyb3dzIl0pdD1zKHQpO2Vsc2UgdHJ5e3Q9cyh0KX1jYXRjaChwKXtyZXR1cm57c3RhdGU6InBhcnNlcmVycm9yIixlcnJvcjpzP3A6Ik5vIGNvbnZlcnNpb24gZnJvbSAiK3UrIiB0byAiK299fX1yZXR1cm57c3RhdGU6InN1Y2Nlc3MiLGRhdGE6dH19eC5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDoidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHQifSxjb250ZW50czp7c2NyaXB0Oi8oPzpqYXZhfGVjbWEpc2NyaXB0L30sY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbihlKXtyZXR1cm4geC5nbG9iYWxFdmFsKGUpLGV9fX0pLHguYWpheFByZWZpbHRlcigic2NyaXB0IixmdW5jdGlvbihlKXtlLmNhY2hlPT09dW5kZWZpbmVkJiYoZS5jYWNoZT0hMSksZS5jcm9zc0RvbWFpbiYmKGUudHlwZT0iR0VUIil9KSx4LmFqYXhUcmFuc3BvcnQoInNjcmlwdCIsZnVuY3Rpb24oZSl7aWYoZS5jcm9zc0RvbWFpbil7dmFyIHQsbjtyZXR1cm57c2VuZDpmdW5jdGlvbihyLGkpe3Q9eCgiPHNjcmlwdD4iKS5wcm9wKHthc3luYzohMCxjaGFyc2V0OmUuc2NyaXB0Q2hhcnNldCxzcmM6ZS51cmx9KS5vbigibG9hZCBlcnJvciIsbj1mdW5jdGlvbihlKXt0LnJlbW92ZSgpLG49bnVsbCxlJiZpKCJlcnJvciI9PT1lLnR5cGU/NDA0OjIwMCxlLnR5cGUpfSksby5oZWFkLmFwcGVuZENoaWxkKHRbMF0pfSxhYm9ydDpmdW5jdGlvbigpe24mJm4oKX19fX0pO3ZhciBobj1bXSxkbj0vKD0pXD8oPz0mfCQpfFw/XD8vO3guYWpheFNldHVwKHtqc29ucDoiY2FsbGJhY2siLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgZT1obi5wb3AoKXx8eC5leHBhbmRvKyJfIitZdCsrO3JldHVybiB0aGlzW2VdPSEwLGV9fSkseC5hamF4UHJlZmlsdGVyKCJqc29uIGpzb25wIixmdW5jdGlvbih0LG4scil7dmFyIGksbyxzLGE9dC5qc29ucCE9PSExJiYoZG4udGVzdCh0LnVybCk/InVybCI6InN0cmluZyI9PXR5cGVvZiB0LmRhdGEmJiEodC5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiZkbi50ZXN0KHQuZGF0YSkmJiJkYXRhIik7cmV0dXJuIGF8fCJqc29ucCI9PT10LmRhdGFUeXBlc1swXT8oaT10Lmpzb25wQ2FsbGJhY2s9eC5pc0Z1bmN0aW9uKHQuanNvbnBDYWxsYmFjayk/dC5qc29ucENhbGxiYWNrKCk6dC5qc29ucENhbGxiYWNrLGE/dFthXT10W2FdLnJlcGxhY2UoZG4sIiQxIitpKTp0Lmpzb25wIT09ITEmJih0LnVybCs9KFZ0LnRlc3QodC51cmwpPyImIjoiPyIpK3QuanNvbnArIj0iK2kpLHQuY29udmVydGVyc1sic2NyaXB0IGpzb24iXT1mdW5jdGlvbigpe3JldHVybiBzfHx4LmVycm9yKGkrIiB3YXMgbm90IGNhbGxlZCIpLHNbMF19LHQuZGF0YVR5cGVzWzBdPSJqc29uIixvPWVbaV0sZVtpXT1mdW5jdGlvbigpe3M9YXJndW1lbnRzfSxyLmFsd2F5cyhmdW5jdGlvbigpe2VbaV09byx0W2ldJiYodC5qc29ucENhbGxiYWNrPW4uanNvbnBDYWxsYmFjayxobi5wdXNoKGkpKSxzJiZ4LmlzRnVuY3Rpb24obykmJm8oc1swXSkscz1vPXVuZGVmaW5lZH0pLCJzY3JpcHQiKTp1bmRlZmluZWR9KSx4LmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH1jYXRjaChlKXt9fTt2YXIgZ249eC5hamF4U2V0dGluZ3MueGhyKCksbW49ezA6MjAwLDEyMjM6MjA0fSx5bj0wLHZuPXt9O2UuQWN0aXZlWE9iamVjdCYmeChlKS5vbigidW5sb2FkIixmdW5jdGlvbigpe2Zvcih2YXIgZSBpbiB2bil2bltlXSgpO3ZuPXVuZGVmaW5lZH0pLHguc3VwcG9ydC5jb3JzPSEhZ24mJiJ3aXRoQ3JlZGVudGlhbHMiaW4gZ24seC5zdXBwb3J0LmFqYXg9Z249ISFnbix4LmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHguc3VwcG9ydC5jb3JzfHxnbiYmIWUuY3Jvc3NEb21haW4/e3NlbmQ6ZnVuY3Rpb24obixyKXt2YXIgaSxvLHM9ZS54aHIoKTtpZihzLm9wZW4oZS50eXBlLGUudXJsLGUuYXN5bmMsZS51c2VybmFtZSxlLnBhc3N3b3JkKSxlLnhockZpZWxkcylmb3IoaSBpbiBlLnhockZpZWxkcylzW2ldPWUueGhyRmllbGRzW2ldO2UubWltZVR5cGUmJnMub3ZlcnJpZGVNaW1lVHlwZSYmcy5vdmVycmlkZU1pbWVUeXBlKGUubWltZVR5cGUpLGUuY3Jvc3NEb21haW58fG5bIlgtUmVxdWVzdGVkLVdpdGgiXXx8KG5bIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IoaSBpbiBuKXMuc2V0UmVxdWVzdEhlYWRlcihpLG5baV0pO3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dCYmKGRlbGV0ZSB2bltvXSx0PXMub25sb2FkPXMub25lcnJvcj1udWxsLCJhYm9ydCI9PT1lP3MuYWJvcnQoKToiZXJyb3IiPT09ZT9yKHMuc3RhdHVzfHw0MDQscy5zdGF0dXNUZXh0KTpyKG1uW3Muc3RhdHVzXXx8cy5zdGF0dXMscy5zdGF0dXNUZXh0LCJzdHJpbmciPT10eXBlb2Ygcy5yZXNwb25zZVRleHQ/e3RleHQ6cy5yZXNwb25zZVRleHR9OnVuZGVmaW5lZCxzLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxzLm9ubG9hZD10KCkscy5vbmVycm9yPXQoImVycm9yIiksdD12bltvPXluKytdPXQoImFib3J0Iikscy5zZW5kKGUuaGFzQ29udGVudCYmZS5kYXRhfHxudWxsKX0sYWJvcnQ6ZnVuY3Rpb24oKXt0JiZ0KCl9fTp1bmRlZmluZWR9KTt2YXIgeG4sYm4sd249L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLFRuPVJlZ0V4cCgiXig/OihbKy1dKT18KSgiK2IrIikoW2EteiVdKikkIiwiaSIpLENuPS9xdWV1ZUhvb2tzJC8sa249W0FuXSxObj17IioiOltmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuY3JlYXRlVHdlZW4oZSx0KSxyPW4uY3VyKCksaT1Ubi5leGVjKHQpLG89aSYmaVszXXx8KHguY3NzTnVtYmVyW2VdPyIiOiJweCIpLHM9KHguY3NzTnVtYmVyW2VdfHwicHgiIT09byYmK3IpJiZUbi5leGVjKHguY3NzKG4uZWxlbSxlKSksYT0xLHU9MjA7aWYocyYmc1szXSE9PW8pe289b3x8c1szXSxpPWl8fFtdLHM9K3J8fDE7ZG8gYT1hfHwiLjUiLHMvPWEseC5zdHlsZShuLmVsZW0sZSxzK28pO3doaWxlKGEhPT0oYT1uLmN1cigpL3IpJiYxIT09YSYmLS11KX1yZXR1cm4gaSYmKHM9bi5zdGFydD0rc3x8K3J8fDAsbi51bml0PW8sbi5lbmQ9aVsxXT9zKyhpWzFdKzEpKmlbMl06K2lbMl0pLG59XX07ZnVuY3Rpb24gRW4oKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3huPXVuZGVmaW5lZH0pLHhuPXgubm93KCl9ZnVuY3Rpb24gU24oZSx0LG4pe3ZhciByLGk9KE5uW3RdfHxbXSkuY29uY2F0KE5uWyIqIl0pLG89MCxzPWkubGVuZ3RoO2Zvcig7cz5vO28rKylpZihyPWlbb10uY2FsbChuLHQsZSkpcmV0dXJuIHJ9ZnVuY3Rpb24gam4oZSx0LG4pe3ZhciByLGksbz0wLHM9a24ubGVuZ3RoLGE9eC5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSB1LmVsZW19KSx1PWZ1bmN0aW9uKCl7aWYoaSlyZXR1cm4hMTt2YXIgdD14bnx8RW4oKSxuPU1hdGgubWF4KDAsbC5zdGFydFRpbWUrbC5kdXJhdGlvbi10KSxyPW4vbC5kdXJhdGlvbnx8MCxvPTEtcixzPTAsdT1sLnR3ZWVucy5sZW5ndGg7Zm9yKDt1PnM7cysrKWwudHdlZW5zW3NdLnJ1bihvKTtyZXR1cm4gYS5ub3RpZnlXaXRoKGUsW2wsbyxuXSksMT5vJiZ1P246KGEucmVzb2x2ZVdpdGgoZSxbbF0pLCExKX0sbD1hLnByb21pc2Uoe2VsZW06ZSxwcm9wczp4LmV4dGVuZCh7fSx0KSxvcHRzOnguZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9fSxuKSxvcmlnaW5hbFByb3BlcnRpZXM6dCxvcmlnaW5hbE9wdGlvbnM6bixzdGFydFRpbWU6eG58fEVuKCksZHVyYXRpb246bi5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24odCxuKXt2YXIgcj14LlR3ZWVuKGUsbC5vcHRzLHQsbixsLm9wdHMuc3BlY2lhbEVhc2luZ1t0XXx8bC5vcHRzLmVhc2luZyk7cmV0dXJuIGwudHdlZW5zLnB1c2gocikscn0sc3RvcDpmdW5jdGlvbih0KXt2YXIgbj0wLHI9dD9sLnR3ZWVucy5sZW5ndGg6MDtpZihpKXJldHVybiB0aGlzO2ZvcihpPSEwO3I+bjtuKyspbC50d2VlbnNbbl0ucnVuKDEpO3JldHVybiB0P2EucmVzb2x2ZVdpdGgoZSxbbCx0XSk6YS5yZWplY3RXaXRoKGUsW2wsdF0pLHRoaXN9fSksYz1sLnByb3BzO2ZvcihEbihjLGwub3B0cy5zcGVjaWFsRWFzaW5nKTtzPm87bysrKWlmKHI9a25bb10uY2FsbChsLGUsYyxsLm9wdHMpKXJldHVybiByO3JldHVybiB4Lm1hcChjLFNuLGwpLHguaXNGdW5jdGlvbihsLm9wdHMuc3RhcnQpJiZsLm9wdHMuc3RhcnQuY2FsbChlLGwpLHguZngudGltZXIoeC5leHRlbmQodSx7ZWxlbTplLGFuaW06bCxxdWV1ZTpsLm9wdHMucXVldWV9KSksbC5wcm9ncmVzcyhsLm9wdHMucHJvZ3Jlc3MpLmRvbmUobC5vcHRzLmRvbmUsbC5vcHRzLmNvbXBsZXRlKS5mYWlsKGwub3B0cy5mYWlsKS5hbHdheXMobC5vcHRzLmFsd2F5cyl9ZnVuY3Rpb24gRG4oZSx0KXt2YXIgbixyLGksbyxzO2ZvcihuIGluIGUpaWYocj14LmNhbWVsQ2FzZShuKSxpPXRbcl0sbz1lW25dLHguaXNBcnJheShvKSYmKGk9b1sxXSxvPWVbbl09b1swXSksbiE9PXImJihlW3JdPW8sZGVsZXRlIGVbbl0pLHM9eC5jc3NIb29rc1tyXSxzJiYiZXhwYW5kImluIHMpe289cy5leHBhbmQobyksZGVsZXRlIGVbcl07Zm9yKG4gaW4gbyluIGluIGV8fChlW25dPW9bbl0sdFtuXT1pKX1lbHNlIHRbcl09aX14LkFuaW1hdGlvbj14LmV4dGVuZChqbix7dHdlZW5lcjpmdW5jdGlvbihlLHQpe3guaXNGdW5jdGlvbihlKT8odD1lLGU9WyIqIl0pOmU9ZS5zcGxpdCgiICIpO3ZhciBuLHI9MCxpPWUubGVuZ3RoO2Zvcig7aT5yO3IrKyluPWVbcl0sTm5bbl09Tm5bbl18fFtdLE5uW25dLnVuc2hpZnQodCl9LHByZWZpbHRlcjpmdW5jdGlvbihlLHQpe3Q/a24udW5zaGlmdChlKTprbi5wdXNoKGUpfX0pO2Z1bmN0aW9uIEFuKGUsdCxuKXt2YXIgcixpLG8scyxhLHUsbD10aGlzLGM9e30scD1lLnN0eWxlLGY9ZS5ub2RlVHlwZSYmTHQoZSksaD1xLmdldChlLCJmeHNob3ciKTtuLnF1ZXVlfHwoYT14Ll9xdWV1ZUhvb2tzKGUsImZ4IiksbnVsbD09YS51bnF1ZXVlZCYmKGEudW5xdWV1ZWQ9MCx1PWEuZW1wdHkuZmlyZSxhLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXthLnVucXVldWVkfHx1KCl9KSxhLnVucXVldWVkKyssbC5hbHdheXMoZnVuY3Rpb24oKXtsLmFsd2F5cyhmdW5jdGlvbigpe2EudW5xdWV1ZWQtLSx4LnF1ZXVlKGUsImZ4IikubGVuZ3RofHxhLmVtcHR5LmZpcmUoKX0pfSkpLDE9PT1lLm5vZGVUeXBlJiYoImhlaWdodCJpbiB0fHwid2lkdGgiaW4gdCkmJihuLm92ZXJmbG93PVtwLm92ZXJmbG93LHAub3ZlcmZsb3dYLHAub3ZlcmZsb3dZXSwiaW5saW5lIj09PXguY3NzKGUsImRpc3BsYXkiKSYmIm5vbmUiPT09eC5jc3MoZSwiZmxvYXQiKSYmKHAuZGlzcGxheT0iaW5saW5lLWJsb2NrIikpLG4ub3ZlcmZsb3cmJihwLm92ZXJmbG93PSJoaWRkZW4iLGwuYWx3YXlzKGZ1bmN0aW9uKCl7cC5vdmVyZmxvdz1uLm92ZXJmbG93WzBdLHAub3ZlcmZsb3dYPW4ub3ZlcmZsb3dbMV0scC5vdmVyZmxvd1k9bi5vdmVyZmxvd1syXX0pKTtmb3IociBpbiB0KWlmKGk9dFtyXSx3bi5leGVjKGkpKXtpZihkZWxldGUgdFtyXSxvPW98fCJ0b2dnbGUiPT09aSxpPT09KGY/ImhpZGUiOiJzaG93Iikpe2lmKCJzaG93IiE9PWl8fCFofHxoW3JdPT09dW5kZWZpbmVkKWNvbnRpbnVlO2Y9ITB9Y1tyXT1oJiZoW3JdfHx4LnN0eWxlKGUscil9aWYoIXguaXNFbXB0eU9iamVjdChjKSl7aD8iaGlkZGVuImluIGgmJihmPWguaGlkZGVuKTpoPXEuYWNjZXNzKGUsImZ4c2hvdyIse30pLG8mJihoLmhpZGRlbj0hZiksZj94KGUpLnNob3coKTpsLmRvbmUoZnVuY3Rpb24oKXt4KGUpLmhpZGUoKX0pLGwuZG9uZShmdW5jdGlvbigpe3ZhciB0O3EucmVtb3ZlKGUsImZ4c2hvdyIpO2Zvcih0IGluIGMpeC5zdHlsZShlLHQsY1t0XSl9KTtmb3IociBpbiBjKXM9U24oZj9oW3JdOjAscixsKSxyIGluIGh8fChoW3JdPXMuc3RhcnQsZiYmKHMuZW5kPXMuc3RhcnQscy5zdGFydD0id2lkdGgiPT09cnx8ImhlaWdodCI9PT1yPzE6MCkpfX1mdW5jdGlvbiBMbihlLHQsbixyLGkpe3JldHVybiBuZXcgTG4ucHJvdG90eXBlLmluaXQoZSx0LG4scixpKX14LlR3ZWVuPUxuLExuLnByb3RvdHlwZT17Y29uc3RydWN0b3I6TG4saW5pdDpmdW5jdGlvbihlLHQsbixyLGksbyl7dGhpcy5lbGVtPWUsdGhpcy5wcm9wPW4sdGhpcy5lYXNpbmc9aXx8InN3aW5nIix0aGlzLm9wdGlvbnM9dCx0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9cix0aGlzLnVuaXQ9b3x8KHguY3NzTnVtYmVyW25dPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgZT1Mbi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gZSYmZS5nZXQ/ZS5nZXQodGhpcyk6TG4ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGUpe3ZhciB0LG49TG4ucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMucG9zPXQ9dGhpcy5vcHRpb25zLmR1cmF0aW9uP3guZWFzaW5nW3RoaXMuZWFzaW5nXShlLHRoaXMub3B0aW9ucy5kdXJhdGlvbiplLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOmUsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKnQrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksbiYmbi5zZXQ/bi5zZXQodGhpcyk6TG4ucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0sTG4ucHJvdG90eXBlLmluaXQucHJvdG90eXBlPUxuLnByb3RvdHlwZSxMbi5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIG51bGw9PWUuZWxlbVtlLnByb3BdfHxlLmVsZW0uc3R5bGUmJm51bGwhPWUuZWxlbS5zdHlsZVtlLnByb3BdPyh0PXguY3NzKGUuZWxlbSxlLnByb3AsIiIpLHQmJiJhdXRvIiE9PXQ/dDowKTplLmVsZW1bZS5wcm9wXX0sc2V0OmZ1bmN0aW9uKGUpe3guZnguc3RlcFtlLnByb3BdP3guZnguc3RlcFtlLnByb3BdKGUpOmUuZWxlbS5zdHlsZSYmKG51bGwhPWUuZWxlbS5zdHlsZVt4LmNzc1Byb3BzW2UucHJvcF1dfHx4LmNzc0hvb2tzW2UucHJvcF0pP3guc3R5bGUoZS5lbGVtLGUucHJvcCxlLm5vdytlLnVuaXQpOmUuZWxlbVtlLnByb3BdPWUubm93fX19LExuLnByb3BIb29rcy5zY3JvbGxUb3A9TG4ucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihlKXtlLmVsZW0ubm9kZVR5cGUmJmUuZWxlbS5wYXJlbnROb2RlJiYoZS5lbGVtW2UucHJvcF09ZS5ub3cpfX0seC5lYWNoKFsidG9nZ2xlIiwic2hvdyIsImhpZGUiXSxmdW5jdGlvbihlLHQpe3ZhciBuPXguZm5bdF07eC5mblt0XT1mdW5jdGlvbihlLHIsaSl7cmV0dXJuIG51bGw9PWV8fCJib29sZWFuIj09dHlwZW9mIGU/bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKHFuKHQsITApLGUscixpKX19KSx4LmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLmZpbHRlcihMdCkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTp0fSxlLG4scil9LGFuaW1hdGU6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9eC5pc0VtcHR5T2JqZWN0KGUpLG89eC5zcGVlZCh0LG4scikscz1mdW5jdGlvbigpe3ZhciB0PWpuKHRoaXMseC5leHRlbmQoe30sZSksbyk7KGl8fHEuZ2V0KHRoaXMsImZpbmlzaCIpKSYmdC5zdG9wKCEwKX07cmV0dXJuIHMuZmluaXNoPXMsaXx8by5xdWV1ZT09PSExP3RoaXMuZWFjaChzKTp0aGlzLnF1ZXVlKG8ucXVldWUscyl9LHN0b3A6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RvcDtkZWxldGUgZS5zdG9wLHQobil9O3JldHVybiJzdHJpbmciIT10eXBlb2YgZSYmKG49dCx0PWUsZT11bmRlZmluZWQpLHQmJmUhPT0hMSYmdGhpcy5xdWV1ZShlfHwiZngiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD0hMCxpPW51bGwhPWUmJmUrInF1ZXVlSG9va3MiLG89eC50aW1lcnMscz1xLmdldCh0aGlzKTtpZihpKXNbaV0mJnNbaV0uc3RvcCYmcihzW2ldKTtlbHNlIGZvcihpIGluIHMpc1tpXSYmc1tpXS5zdG9wJiZDbi50ZXN0KGkpJiZyKHNbaV0pO2ZvcihpPW8ubGVuZ3RoO2ktLTspb1tpXS5lbGVtIT09dGhpc3x8bnVsbCE9ZSYmb1tpXS5xdWV1ZSE9PWV8fChvW2ldLmFuaW0uc3RvcChuKSx0PSExLG8uc3BsaWNlKGksMSkpOyh0fHwhbikmJnguZGVxdWV1ZSh0aGlzLGUpfSl9LGZpbmlzaDpmdW5jdGlvbihlKXtyZXR1cm4gZSE9PSExJiYoZT1lfHwiZngiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdCxuPXEuZ2V0KHRoaXMpLHI9bltlKyJxdWV1ZSJdLGk9bltlKyJxdWV1ZUhvb2tzIl0sbz14LnRpbWVycyxzPXI/ci5sZW5ndGg6MDtmb3Iobi5maW5pc2g9ITAseC5xdWV1ZSh0aGlzLGUsW10pLGkmJmkuc3RvcCYmaS5zdG9wLmNhbGwodGhpcywhMCksdD1vLmxlbmd0aDt0LS07KW9bdF0uZWxlbT09PXRoaXMmJm9bdF0ucXVldWU9PT1lJiYob1t0XS5hbmltLnN0b3AoITApLG8uc3BsaWNlKHQsMSkpO2Zvcih0PTA7cz50O3QrKylyW3RdJiZyW3RdLmZpbmlzaCYmclt0XS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgbi5maW5pc2h9KX19KTtmdW5jdGlvbiBxbihlLHQpe3ZhciBuLHI9e2hlaWdodDplfSxpPTA7Zm9yKHQ9dD8xOjA7ND5pO2krPTItdCluPWp0W2ldLHJbIm1hcmdpbiIrbl09clsicGFkZGluZyIrbl09ZTtyZXR1cm4gdCYmKHIub3BhY2l0eT1yLndpZHRoPWUpLHJ9eC5lYWNoKHtzbGlkZURvd246cW4oInNob3ciKSxzbGlkZVVwOnFuKCJoaWRlIiksc2xpZGVUb2dnbGU6cW4oInRvZ2dsZSIpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24oZSx0KXt4LmZuW2VdPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gdGhpcy5hbmltYXRlKHQsZSxuLHIpfX0pLHguc3BlZWQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUmJiJvYmplY3QiPT10eXBlb2YgZT94LmV4dGVuZCh7fSxlKTp7Y29tcGxldGU6bnx8IW4mJnR8fHguaXNGdW5jdGlvbihlKSYmZSxkdXJhdGlvbjplLGVhc2luZzpuJiZ0fHx0JiYheC5pc0Z1bmN0aW9uKHQpJiZ0fTtyZXR1cm4gci5kdXJhdGlvbj14LmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2Ygci5kdXJhdGlvbj9yLmR1cmF0aW9uOnIuZHVyYXRpb24gaW4geC5meC5zcGVlZHM/eC5meC5zcGVlZHNbci5kdXJhdGlvbl06eC5meC5zcGVlZHMuX2RlZmF1bHQsKG51bGw9PXIucXVldWV8fHIucXVldWU9PT0hMCkmJihyLnF1ZXVlPSJmeCIpLHIub2xkPXIuY29tcGxldGUsci5jb21wbGV0ZT1mdW5jdGlvbigpe3guaXNGdW5jdGlvbihyLm9sZCkmJnIub2xkLmNhbGwodGhpcyksci5xdWV1ZSYmeC5kZXF1ZXVlKHRoaXMsci5xdWV1ZSl9LHJ9LHguZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn19LHgudGltZXJzPVtdLHguZng9TG4ucHJvdG90eXBlLmluaXQseC5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGUsdD14LnRpbWVycyxuPTA7Zm9yKHhuPXgubm93KCk7dC5sZW5ndGg+bjtuKyspZT10W25dLGUoKXx8dFtuXSE9PWV8fHQuc3BsaWNlKG4tLSwxKTt0Lmxlbmd0aHx8eC5meC5zdG9wKCkseG49dW5kZWZpbmVkfSx4LmZ4LnRpbWVyPWZ1bmN0aW9uKGUpe2UoKSYmeC50aW1lcnMucHVzaChlKSYmeC5meC5zdGFydCgpfSx4LmZ4LmludGVydmFsPTEzLHguZnguc3RhcnQ9ZnVuY3Rpb24oKXtibnx8KGJuPXNldEludGVydmFsKHguZngudGljayx4LmZ4LmludGVydmFsKSl9LHguZnguc3RvcD1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwoYm4pLGJuPW51bGx9LHguZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LHguZnguc3RlcD17fSx4LmV4cHImJnguZXhwci5maWx0ZXJzJiYoeC5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHguZ3JlcCh4LnRpbWVycyxmdW5jdGlvbih0KXtyZXR1cm4gZT09PXQuZWxlbX0pLmxlbmd0aH0pLHguZm4ub2Zmc2V0PWZ1bmN0aW9uKGUpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGU9PT11bmRlZmluZWQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24odCl7eC5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsZSx0KX0pO3ZhciB0LG4saT10aGlzWzBdLG89e3RvcDowLGxlZnQ6MH0scz1pJiZpLm93bmVyRG9jdW1lbnQ7aWYocylyZXR1cm4gdD1zLmRvY3VtZW50RWxlbWVudCx4LmNvbnRhaW5zKHQsaSk/KHR5cGVvZiBpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCE9PXImJihvPWkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLG49SG4ocykse3RvcDpvLnRvcCtuLnBhZ2VZT2Zmc2V0LXQuY2xpZW50VG9wLGxlZnQ6by5sZWZ0K24ucGFnZVhPZmZzZXQtdC5jbGllbnRMZWZ0fSk6b30seC5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLHMsYSx1LGwsYz14LmNzcyhlLCJwb3NpdGlvbiIpLHA9eChlKSxmPXt9OyJzdGF0aWMiPT09YyYmKGUuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIiksYT1wLm9mZnNldCgpLG89eC5jc3MoZSwidG9wIiksdT14LmNzcyhlLCJsZWZ0IiksbD0oImFic29sdXRlIj09PWN8fCJmaXhlZCI9PT1jKSYmKG8rdSkuaW5kZXhPZigiYXV0byIpPi0xLGw/KHI9cC5wb3NpdGlvbigpLHM9ci50b3AsaT1yLmxlZnQpOihzPXBhcnNlRmxvYXQobyl8fDAsaT1wYXJzZUZsb2F0KHUpfHwwKSx4LmlzRnVuY3Rpb24odCkmJih0PXQuY2FsbChlLG4sYSkpLG51bGwhPXQudG9wJiYoZi50b3A9dC50b3AtYS50b3ArcyksbnVsbCE9dC5sZWZ0JiYoZi5sZWZ0PXQubGVmdC1hLmxlZnQraSksInVzaW5nImluIHQ/dC51c2luZy5jYWxsKGUsZik6cC5jc3MoZil9fSx4LmZuLmV4dGVuZCh7cG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgZSx0LG49dGhpc1swXSxyPXt0b3A6MCxsZWZ0OjB9O3JldHVybiJmaXhlZCI9PT14LmNzcyhuLCJwb3NpdGlvbiIpP3Q9bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTooZT10aGlzLm9mZnNldFBhcmVudCgpLHQ9dGhpcy5vZmZzZXQoKSx4Lm5vZGVOYW1lKGVbMF0sImh0bWwiKXx8KHI9ZS5vZmZzZXQoKSksci50b3ArPXguY3NzKGVbMF0sImJvcmRlclRvcFdpZHRoIiwhMCksci5sZWZ0Kz14LmNzcyhlWzBdLCJib3JkZXJMZWZ0V2lkdGgiLCEwKSkse3RvcDp0LnRvcC1yLnRvcC14LmNzcyhuLCJtYXJnaW5Ub3AiLCEwKSxsZWZ0OnQubGVmdC1yLmxlZnQteC5jc3MobiwibWFyZ2luTGVmdCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXMub2Zmc2V0UGFyZW50fHxzO3doaWxlKGUmJiF4Lm5vZGVOYW1lKGUsImh0bWwiKSYmInN0YXRpYyI9PT14LmNzcyhlLCJwb3NpdGlvbiIpKWU9ZS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGV8fHN9KX19KSx4LmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24odCxuKXt2YXIgcj0icGFnZVlPZmZzZXQiPT09bjt4LmZuW3RdPWZ1bmN0aW9uKGkpe3JldHVybiB4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKHQsaSxvKXt2YXIgcz1Ibih0KTtyZXR1cm4gbz09PXVuZGVmaW5lZD9zP3Nbbl06dFtpXToocz9zLnNjcm9sbFRvKHI/ZS5wYWdlWE9mZnNldDpvLHI/bzplLnBhZ2VZT2Zmc2V0KTp0W2ldPW8sdW5kZWZpbmVkKX0sdCxpLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSk7ZnVuY3Rpb24gSG4oZSl7cmV0dXJuIHguaXNXaW5kb3coZSk/ZTo5PT09ZS5ub2RlVHlwZSYmZS5kZWZhdWx0Vmlld314LmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihlLHQpe3guZWFjaCh7cGFkZGluZzoiaW5uZXIiK2UsY29udGVudDp0LCIiOiJvdXRlciIrZX0sZnVuY3Rpb24obixyKXt4LmZuW3JdPWZ1bmN0aW9uKHIsaSl7dmFyIG89YXJndW1lbnRzLmxlbmd0aCYmKG58fCJib29sZWFuIiE9dHlwZW9mIHIpLHM9bnx8KHI9PT0hMHx8aT09PSEwPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4geC5hY2Nlc3ModGhpcyxmdW5jdGlvbih0LG4scil7dmFyIGk7cmV0dXJuIHguaXNXaW5kb3codCk/dC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrZV06OT09PXQubm9kZVR5cGU/KGk9dC5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgodC5ib2R5WyJzY3JvbGwiK2VdLGlbInNjcm9sbCIrZV0sdC5ib2R5WyJvZmZzZXQiK2VdLGlbIm9mZnNldCIrZV0saVsiY2xpZW50IitlXSkpOnI9PT11bmRlZmluZWQ/eC5jc3ModCxuLHMpOnguc3R5bGUodCxuLHIscyl9LHQsbz9yOnVuZGVmaW5lZCxvLG51bGwpfX0pfSkseC5mbi5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofSx4LmZuLmFuZFNlbGY9eC5mbi5hZGRCYWNrLCJvYmplY3QiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9eDoiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4geH0pLCJvYmplY3QiPT10eXBlb2YgZSYmIm9iamVjdCI9PXR5cGVvZiBlLmRvY3VtZW50JiYoZS5qUXVlcnk9ZS4kPXgpfSkod2luZG93KTsKICAgICAgICBsb2coJ1VzaW5nIGlubGluZSBqUXVlcnknKQogICAgfSBlbHNlIHsKICAgICAgICBsb2coJ1VzaW5nIEByZXF1aXJlIGpRdWVyeScpCiAgICB9CgogICAgLy8gR2VuZXJpYyBmdW5jdGlvbnMKCiAgICAvLyBBdm9pZHMgY29uZmxpY3RzIHdoZW4gdGhlIG1haW4gcGFnZSBpcyBhbHNvIHVzaW5nIGpRdWVyeSBvciBhbm90aGVyIGxpYnJhcnkgdXNpbmcgJyQnCiAgICAvLyB0aGlzLiQgPSB0aGlzLmpRdWVyeSA9IGpRdWVyeS5ub0NvbmZsaWN0KHRydWUpOwogICAgLy8gLS0+IEluc3RlYWQgSSB1c2UgQGdyYW50IEdNX2FkZFN0eWxlIHdoaWNoIHJlc3RvcmVzIHRoZSBzYW5kYm94IGFuZCB0aHVzIGF2b2lkIHVzIHRoaXMgdHJpY2sKICAgIAogICAgLy8gVGhpcyBqUXVlcnkgcGx1Z2luIHdpbGwgZ2F0aGVyIHRoZSBjb21tZW50cyB3aXRoaW4KICAgIC8vIHRoZSBjdXJyZW50IGpRdWVyeSBjb2xsZWN0aW9uLCByZXR1cm5pbmcgYWxsIHRoZQogICAgLy8gY29tbWVudHMgaW4gYSBuZXcgalF1ZXJ5IGNvbGxlY3Rpb24uCiAgICAvLwogICAgLy8gTk9URTogQ29tbWVudHMgYXJlIHdyYXBwZWQgaW4gRElWIHRhZ3MuCgogICAgalF1ZXJ5LmZuLmNvbW1lbnRzID0gZnVuY3Rpb24gKGJsbkRlZXApIHsKICAgICAgICB2YXIgYmxuRGVlcCA9IChibG5EZWVwIHx8IGZhbHNlKTsKICAgICAgICB2YXIgakNvbW1lbnRzID0gJChbXSk7CgogICAgICAgIC8vIExvb3Agb3ZlciBlYWNoIG5vZGUgdG8gc2VhcmNoIGl0cyBjaGlsZHJlbiBmb3IKICAgICAgICAvLyBjb21tZW50IG5vZGVzIGFuZCBlbGVtZW50IG5vZGVzIChpZiBkZWVwIHNlYXJjaCkuCiAgICAgICAgdGhpcy5lYWNoKAogICAgICAgICAgICBmdW5jdGlvbiAoaW50SSwgb2JqTm9kZSkgewogICAgICAgICAgICAgICAgdmFyIG9iakNoaWxkTm9kZSA9IG9iak5vZGUuZmlyc3RDaGlsZDsKICAgICAgICAgICAgICAgIHZhciBzdHJQYXJlbnRJRCA9ICQodGhpcykuYXR0cigiaWQiKTsKCiAgICAgICAgICAgICAgICAvLyBLZWVwIGxvb3Bpbmcgb3ZlciB0aGUgdG9wLWxldmVsIGNoaWxkcmVuCiAgICAgICAgICAgICAgICAvLyB3aGlsZSB3ZSBoYXZlIGEgbm9kZSB0byBleGFtaW5lLgogICAgICAgICAgICAgICAgd2hpbGUgKG9iakNoaWxkTm9kZSkgewoKICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhpcyBub2RlIGlzIGEgY29tbWVudC4KICAgICAgICAgICAgICAgICAgICBpZiAob2JqQ2hpbGROb2RlLm5vZGVUeXBlID09PSA4KSB7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBmb3VuZCBhIGNvbW1lbnQgbm9kZS4gQWRkIGl0IHRvCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBub2RlcyBjb2xsZWN0aW9uIHdyYXBwZWQgaW4gYQogICAgICAgICAgICAgICAgICAgICAgICAvLyBESVYgKGFzIHdlIG1heSBoYXZlIEhUTUwpLgogICAgICAgICAgICAgICAgICAgICAgICBqQ29tbWVudHMgPSBqQ29tbWVudHMuYWRkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIjxkaXYgcmVsPSciICsgc3RyUGFyZW50SUQgKyAiJz4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iakNoaWxkTm9kZS5ub2RlVmFsdWUgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgIjwvZGl2PiIKICAgICAgICAgICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgYmxuRGVlcCAmJgogICAgICAgICAgICAgICAgICAgICAgICAob2JqQ2hpbGROb2RlLm5vZGVUeXBlID09PSAxKQogICAgICAgICAgICAgICAgICAgICkgewoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJhdmVyc2UgdGhpcyBub2RlIGRlZXBseS4KICAgICAgICAgICAgICAgICAgICAgICAgakNvbW1lbnRzID0gakNvbW1lbnRzLmFkZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQob2JqQ2hpbGROb2RlKS5jb21tZW50cyh0cnVlKQogICAgICAgICAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIE1vdmUgdG8gdGhlIG5leHQgc2libGluZy4KICAgICAgICAgICAgICAgICAgICBvYmpDaGlsZE5vZGUgPSBvYmpDaGlsZE5vZGUubmV4dFNpYmxpbmc7CgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQogICAgICAgICk7CgogICAgICAgIC8vIFJldHVybiB0aGUgalF1ZXJ5IGNvbW1lbnRzIGNvbGxlY3Rpb24uCiAgICAgICAgcmV0dXJuIChqQ29tbWVudHMpOwogICAgfQoKICAgIC8vIFRlc3RzIGlmIGEgc3RyaW5nIGlzIHBhcnQgb2YgYW5vdGhlciBvbmUuCiAgICBTdHJpbmcucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKHRlc3RTdHJpbmcpIHsKICAgICAgICByZXR1cm4gdGhpcy5pbmRleE9mKHRlc3RTdHJpbmcpICE9IC0xCiAgICB9CgogICAgLy8gQWxsb3dzIHRvIHJlbW92ZSBhIHN1YnN0cmluZyBmcm9tIGEgc3RyaW5nIGV2ZW4gd2hlbiBwcmVzZW50IG11bHRpcGxlIHRpbWVzCiAgICBTdHJpbmcucHJvdG90eXBlLnJlbW92ZUFsbCA9IGZ1bmN0aW9uICh0ZXN0U3RyaW5nKSB7CiAgICAgICAgdmFyIHJldFN0cmluZyA9IHRoaXM7CiAgICAgICAgd2hpbGUgKChjdXJySW5kZXggPSByZXRTdHJpbmcuaW5kZXhPZih0ZXN0U3RyaW5nKSkgIT0gLTEpIHsKICAgICAgICAgICAgcmV0U3RyaW5nID0gcmV0U3RyaW5nLnJlbW92ZU9uY2UodGVzdFN0cmluZyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXRTdHJpbmcKICAgIH0KCiAgICAvLyBBbGxvd3MgdG8gcmVtb3ZlIGEgc3Vic3RyaW5nIGZyb20gYSBzdHJpbmcgb25lIHRpbWUuCiAgICBTdHJpbmcucHJvdG90eXBlLnJlbW92ZU9uY2UgPSBmdW5jdGlvbiAodGVzdFN0cmluZykgewogICAgICAgIHZhciBjdXJySW5kZXggPSB0aGlzLmluZGV4T2YodGVzdFN0cmluZykKICAgICAgICBpZiAoY3VyckluZGV4ICE9IC0xKSByZXR1cm4gdGhpcy5zdWJzdHJpbmcoMCwgY3VyckluZGV4KSArIHRoaXMuc3Vic3RyaW5nKGN1cnJJbmRleCArIHRlc3RTdHJpbmcubGVuZ3RoKQogICAgICAgIHJldHVybiB0aGlzCiAgICB9CgogICAgLy8gR2VuZXJpYyBsb2cgZnVuY3Rpb24KICAgIGZ1bmN0aW9uIGxvZyhzdHJpbmcpIHsKICAgICAgICBpZiAob19kZWJ1ZykgY29uc29sZS5sb2coc3RyaW5nKQogICAgfQoKICAgIC8vIENoZWNrIGlmIGEgSlFvYmplY3QgaXMgdmFsaWQKICAgIGZ1bmN0aW9uIGV4aXN0cyhKUW9iamVjdCkgewogICAgICAgIHJldHVybiAoSlFvYmplY3QubGVuZ3RoICE9IDApCiAgICB9CgogICAgLy8gQ2hlY2sgaWYgYW4gaW5wdXQgY2hlY2tib3ggaXMgY2hlY2tlZAogICAgZnVuY3Rpb24gaXNDaGVja2VkKEpRb2JqZWN0KSB7CiAgICAgICAgcmV0dXJuIEpRb2JqZWN0LnByb3AoImNoZWNrZWQiKQogICAgfQoKICAgIC8vIFVuY2hlY2sgYW4gaW5wdXQgY2hlY2tib3gKICAgIGZ1bmN0aW9uIHVuY2hlY2soSlFvYmplY3QpIHsKICAgICAgICBpZiAoIWV4aXN0cyhKUW9iamVjdCkpIHJldHVybiBmYWxzZQogICAgICAgIGlmIChpc0NoZWNrZWQoSlFvYmplY3QpKSBKUW9iamVjdC5jbGljaygpCiAgICAgICAgLy8gVGhlIG9iamVjdCBleGlzdHMsIHdlIGhhdmUgdW5jaGVja2VkIGl0IGlmIGl0IHdhcyBjaGVja2VkCiAgICAgICAgcmV0dXJuIHRydWUKICAgIH0KCiAgICAvLyBIaWRlIGFuIGVsZW1lbnQgKGRvZXNuJ3QgZGVsZXRlIGl0KQogICAgZnVuY3Rpb24gaGlkZShKUW9iamVjdCkgewogICAgICAgIGlmICghZXhpc3RzKEpRb2JqZWN0KSkgcmV0dXJuIGZhbHNlCiAgICAgICAgSlFvYmplY3QuYXR0cigic3R5bGUiLCAiZGlzcGxheSA6IG5vbmUgIWltcG9ydGFudCIpCiAgICAgICAgcmV0dXJuIHRydWUKICAgIH0KCiAgICAvLyBGb3JjZSBhbiBlbGVtZW50IHRvIHNob3cKICAgIGZ1bmN0aW9uIHNob3coSlFvYmplY3QpIHsKICAgICAgICBpZiAoIWV4aXN0cyhKUW9iamVjdCkpIHJldHVybiBmYWxzZQoKICAgICAgICAvLyBGSVhNRTogYXZvaWQgdG8gYmxpbmRseSBzZXQgdGhlIGRpc3BsYXkgdG8gYmxvY2sgKGNhbiBiZSBpbmxpbmUgdG9vKQogICAgICAgIEpRb2JqZWN0LmF0dHIoInN0eWxlIiwgImRpc3BsYXkgOiBibG9jayAhaW1wb3J0YW50IikKICAgICAgICByZXR1cm4gdHJ1ZQogICAgfQoKICAgIGZvciAodmFyIGkgaW4gYWR3YXJlUnVsZXMpIHsKICAgICAgICAvLyBDcmVhdGUgYSBSZWdFeHAgdG8gdGVzdCBpZiB3ZSBhcmUgb24gdGhpcyBkb21haW4KICAgICAgICB2YXIgdGVzdEhvc3RzID0gbmV3IFJlZ0V4cChhZHdhcmVSdWxlc1tpXS5ob3N0LmpvaW4oJ3wnKSwgJ2knKQogICAgICAgIC8vIElmIHdlIGFyZSBvbiBvbmUgb2YgdGhlIGRvbWFpbnMKICAgICAgICBpZiAodGVzdEhvc3RzLnRlc3QoZG9jdW1lbnQuZG9tYWluKSkgewogICAgICAgICAgICB2YXIgY3VyclJ1bGUgPSBhZHdhcmVSdWxlc1tpXQogICAgICAgICAgICBicmVhawogICAgICAgIH0KICAgIH0KCiAgICBpZiAodHlwZW9mIGN1cnJSdWxlID09ICJ1bmRlZmluZWQiKSByZXR1cm4KCiAgICB2YXIgYXBwbHlSdWxlcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBsb2coJ1RyeWluZyB0byBleGVjdXRlIGN1c3RvbSBmdW5jdGlvbjogJyArIGN1cnJSdWxlLmV4ZWMpCiAgICAgICAgaWYgKGN1cnJSdWxlLmV4ZWMgIT0gdW5kZWZpbmVkKSBjdXJyUnVsZS5leGVjKCk7CiAgICAgICAgbG9nKCJJdGVyYXRpbmcgdGhyb3VnaCB1bmNoZWNrcyIpCgogICAgICAgIC8vIElmIHRoZXJlIGlzIHNvbWV0aGluZyB0byB1bmNoZWNrCiAgICAgICAgaWYgKGN1cnJSdWxlLnVuY2hlY2sgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIC8vIEl0ZXJhdGUgZWFjaCBjaGVja2JveCB0byB1bmNoZWNrIGl0CiAgICAgICAgICAgICQuZWFjaChjdXJyUnVsZS51bmNoZWNrLCBmdW5jdGlvbiAoa2V5LCBjdXJyVW5jaGVjaykgewogICAgICAgICAgICAgICAgbG9nKCJUcnlpbmcgdG8gdW5jaGVjayBbIiArIGtleSArICddJyArIGN1cnJVbmNoZWNrKQogICAgICAgICAgICAgICAgLy8gQ29uc3RhbnRseSB0cnlpbmcgdG8gdW5jaGVjayB0aGUgY2hlY2tib3gKICAgICAgICAgICAgICAgIGlmIChjdXJyUnVsZS5vcHR1bmNoZWNrICE9IHVuZGVmaW5lZCAmJiBjdXJyUnVsZS5vcHR1bmNoZWNrLmNvbnN0YW50Y2hlY2sgPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIHVuY2hlY2soJChjdXJyVW5jaGVjaykpCiAgICAgICAgICAgICAgICAgICAgdmFyIHBlcmlvZGljSGlkZSA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVW5jaGVjayBpdAogICAgICAgICAgICAgICAgICAgICAgICB1bmNoZWNrKCQoY3VyclVuY2hlY2spKQogICAgICAgICAgICAgICAgICAgIH0sIDEwMCkKICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHVuY2hlY2tpbmcgaXQgb25jZQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY2hlY2tib3ggd2FzIHN1Y2Nlc3NmdWxseSB1bmNoZWNrZWQKICAgICAgICAgICAgICAgICAgICBpZiAodW5jaGVjaygkKGN1cnJVbmNoZWNrKSkpIHJldHVybgogICAgICAgICAgICAgICAgICAgIGxvZygiQ291bGRuJ3QgdW5jaGVjayB0aGUgY2hlY2tib3giKQogICAgICAgICAgICAgICAgICAgIC8vIFRyeSB0byB1bmNoZWNrIGl0IGxhdGVyCiAgICAgICAgICAgICAgICAgICAgdmFyIHBlcmlvZGljVW5jaGVjayA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHVuY2hlY2sgc3VjY2VlZGVkIHRoaXMgdGltZSwgd2Ugc3RvcCB0aGUgdW5jaGVja2luZwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodW5jaGVjaygkKGN1cnJVbmNoZWNrKSkpIGNsZWFySW50ZXJ2YWwocGVyaW9kaWNVbmNoZWNrKQogICAgICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIHdlIGNvbnRpbnVlIHRvIGNoZWNrCiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0KCiAgICAgICAgLy8gSWYgdGhlcmUgaXMgc29tZXRoaW5nIHRvIGhpZGUKICAgICAgICBpZiAoY3VyclJ1bGUuaGlkZSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgLy8gSXRlcmF0ZSBlYWNoIGhpZGUgdG8gaGlkZSBpdAogICAgICAgICAgICAkLmVhY2goY3VyclJ1bGUuaGlkZSwgZnVuY3Rpb24gKGtleSwgY3VyckhpZGUpIHsKICAgICAgICAgICAgICAgIGxvZygiVHJ5aW5nIHRvIGhpZGUgIiArIGN1cnJIaWRlKQogICAgICAgICAgICAgICAgLy8gSWYgd2UgdHJ5IHRvIGNvbnRpbnVlIGhpZGluZyBpdCBldmVuIGlmIHRoZSBoaWRpbmcgd2FzIGFscmVhZHkgc3VjY2Vzc2Z1bAogICAgICAgICAgICAgICAgaWYgKGN1cnJSdWxlLm9wdGhpZGUgIT0gdW5kZWZpbmVkICYmIGN1cnJSdWxlLm9wdGhpZGUuY29uc3RhbnRjaGVjayA9PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgaGlkZSgkKGN1cnJIaWRlKSkKICAgICAgICAgICAgICAgICAgICB2YXIgcGVyaW9kaWNIaWRlID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBIaWRlIGl0CiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGUoJChjdXJySGlkZSkpCiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKQogICAgICAgICAgICAgICAgICAgIC8vIEhpZGUgaXQgb25jZSwgdGhlbiBzdG9wIHRyeWluZyB0byBoaWRlIGl0ICh1c3VhbCBjYXNlLCBpdCBzdGF5cyBoaWRkZW4pCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBvYmplY3QgdG8gaGlkZSB3YXMgaGlkZGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGhpZGUoJChjdXJySGlkZSkpKSByZXR1cm4KICAgICAgICAgICAgICAgICAgICAvLyBUcnkgdG8gaGlkZSBpdCBsYXRlcgogICAgICAgICAgICAgICAgICAgIHZhciBwZXJpb2RpY0hpZGUgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBoaWRlIHN1Y2NlZWRlZCB0aGlzIHRpbWUsIHdlIHN0b3AgdG8gdHJ5IGhpZGluZyBpdAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGlkZSgkKGN1cnJIaWRlKSkpIGNsZWFySW50ZXJ2YWwocGVyaW9kaWNIaWRlKQogICAgICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIHdlIGNvbnRpbnVlIHRvIHRyeSBoaWRpbmcgaXQgICAgICAKICAgICAgICAgICAgICAgICAgICB9LCAxMDApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfQoKICAgICAgICAvLyBJZiB0aGVyZSBpcyBzb21ldGhpbmcgdG8gc2hvdwogICAgICAgIGlmIChjdXJyUnVsZS5zaG93ICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAvLyBJdGVyYXRlIGVhY2ggc2hvdyB0byBzaG93IGl0CiAgICAgICAgICAgICQuZWFjaChjdXJyUnVsZS5zaG93LCBmdW5jdGlvbiAoa2V5LCBjdXJyU2hvdykgewogICAgICAgICAgICAgICAgbG9nKCJUcnlpbmcgdG8gc2hvdyAiICsgY3VyclNob3cpCgogICAgICAgICAgICAgICAgLy8gSWYgdGhlIG9iamVjdCB0byBzaG93IHdhcyBzdWNjZXNzZnVsbHkgc2hvd24KICAgICAgICAgICAgICAgIGlmIChzaG93KCQoY3VyclNob3cpKSkgcmV0dXJuCgogICAgICAgICAgICAgICAgLy8gVHJ5IHRvIHNob3cgaXQgbGF0ZXIKICAgICAgICAgICAgICAgIHZhciBwZXJpb2RpY1Nob3cgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgc2hvdygkKGN1cnJTaG93KSkKICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgc2hvdyBzdWNjZWVkZWQgdGhpcyB0aW1lLCB3ZSBzdG9wIHRvIHRyeSBzaG93aW5nIGl0CiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3coJChjdXJyU2hvdykpKSBjbGVhckludGVydmFsKHBlcmlvZGljU2hvdykKICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIHdlIGNvbnRpbnVlIHRvIHRyeSBzaG93aW5nIGl0ICAgICAgCiAgICAgICAgICAgICAgICB9LCAxMDApCiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgfQogICAgCiAgICAvLyBHb29nbGUgQ2hyb21lIHRyaWNrOiBzb21ldGltZXMgdGhlIHNjcmlwdCBpcyBleGVjdXRlZCBhZnRlciB0aGF0IERPTUNvbnRlbnRMb2FkZWQgd2FzIHRyaWdnZXJlZCwgaW4gdGhpcyBjYXNlIHdlIGRpcmVjdGx5IHJ1biBvdXIgY29kZQogICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT0gImNvbXBsZXRlIikgewogICAgICAgIGFwcGx5UnVsZXMoKQogICAgICAgIGxvZygiRGlyZWN0bHkgYXBwbHlpbmcgcnVsZXMiKQogICAgfSBlbHNlIHsKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGFwcGx5UnVsZXMpCiAgICAgICAgbG9nKCJXYWl0aW5nIGZvciBET01Db250ZW50TG9hZGVkIHRvIGFwcGx5IHJ1bGVzIikKICAgIH0KfSgpCg=="},{"name":"琉神转","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["tts.baidu.com"],"orig_excludes":[],"orig_includes":["http*://www.hacg.*/wordpress/*","http*://hacg.*/wordpress/*","http*://www.hacg.*/wp/*","http*://hacg.*/wp/*","http*://www.hacg.lol/*","http*://hacg.lol/*","http*://hacg.riwee.com/*","http*://hacg.me/*","http*://hacg.in/*","http*://hacg.be/*","http*://hacg.club/*","http*://hacg.li/*","http*://hacg.fi/*","http*://hacg.red/*","http*://hacg.la/*","http*://hacg.tw/*","http*://hacg.at/*","http*://hacg.ch/*","http*://llss.*","http*://www.llss.*","http*://www.acgpy.com/*","http*://blog.reimu.net/*","http*://pan.baidu.com/share/*","http*://pan.baidu.com/s/*","http*://sexacg.com/*","http*://www.acg.tf/*","http*://acg.tf/*","http*://www.moxacg.com/*","http*://moxacg.*","http*://*.acggj.com/*","http*://acg12.com/*","http*://*.acg12.com/*","http*://www.acgnz.cc/*","http*://nacg.me/*","http*://www.tianshit.com/*","http*://www.oomoe.moe/*","http*://www.kaze5.com/*","http*://www.acg15.com/*","http*://www.acglover.top/*","http*://lifanmoe.com/*","http*://www.idanmu.*","http*://*.sijihuisuo.club/*","http*://sijihuisuo.club/*","http*://acg18.us/*","http*://*.acg18.us/*","http*://*.acg44.com/*","http*://zuiacg.*","http*://www.zuiacg.*","http*://www.galacg.me/*","http*://cangku.in/*","http*://www.mhecy.com/*","http*://acgzone.org/*","http*://www.acgzone.org/*","http*://uraban.me/*","http*://www.uraban.me/*","http*://acgmoon.*","http*://www.jiyue.*","http*://www.moe-acg.*/*","http*://huan.moe*","http*://www.mygalgame.com/*","http*://htai.*","http*://gmgard.com/*","http*://*.gmgard.com/*","http*://www.kou.moe/*","http*://www.91moe.com/*","http*://cefamilie.com/*","http*://yui-nya.com/*","http*://www.l-sj.cc/*","http*://htacg.cc/*","http*://www.htacg.cc/*","http*://www.xiu.moe/*","http*://www.cld1.net/*","http*://sjhs*.*","http*://www.dakashangche.*","http*://sleazyfork.org/*/scripts/*","http*://greasyfork.org/*/scripts/*","http*://sleazyfork.org/*/forum/*discussion*","http*://greasyfork.org/*/forum/*discussion*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-end","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1492505332316},"enabled":true,"position":13,"file_url":"https://sleazyfork.org/scripts/23316-%E7%90%89%E7%A5%9E%E8%BD%89/code/%E7%90%89%E7%A5%9E%E8%BD%89.user.js","uuid":"4d47e2bd-60b6-4fc3-8c85-69bae6929da1","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIOeQieelnui9rAovLyBAbmFtZTplbiAgICAgSGFjZ0dvZFR1cm4KLy8gQG5hbWU6emgtVFcgIOeQieelnui9iQovLyBAbmFtZTpqYSAgICAg55CJ55KD56We56S+5bel5YW344K744OD44OICi8vIEBuYW1lc3BhY2UgICBob290aGluCi8vIEBkZXNjcmlwdGlvbiAgICAgICAgIOiAgeWPuOacuuW3peWFt+euse+8jOaUr+aMgeeQieeSg+elnuekvuOAgeeBteaipuW+oeaJgOOAgee6r+eIseiuoeWIkuOAgee7heWjq+S6jOasoeWFg+OAgeiQjOW/g+asoeWFg+OAgeasoeWFg+i9qOi/ueOAgUFDR+iwg+afpeWwj+mYn+OAgeW5u+WkqemihuWfn+OAgeWkqeS9v+S6jOasoeWFg+OAgeaoseiKsea8q+iIjeOAgemjjumTg+eqneOAgeasoeWFg+OBruWco+WFieOAgeeIseW8ueW5leOAgeW5u+aDs+asoeWFg+OAgeWPuOacuuS8muaJgOOAgemHjOeVquiQjOOAgeacgEFDR+OAgee7heWjq+S7k+W6k+OAgee7heWjq+WbvuS5pummhuOAgUFDR+WSjOiwkOWMui/ph4zkuJbnlYzjgIHlr4LmnIjnpZ7npL7jgIHokIzlubvkuYvkuaHjgIHnu4Xlo6vkuYvluq3jgIHokIzlj6Pnu4TjgIHkuZ3lppbokIzjgIFDReWutuaXj+ekvuOAgeWWteeqneOAgeasoeWFg+iAgeWPuOacuuOAgee7heWjq0FDR+ekvuetie+8jOelnuenmOS7o+eggei9rOaNouaIkOS4i+i9vemTvuaOpe+8jOe9keebmOiHquWKqOWhq+WGmeaPkOWPluWvhuegge+8jEY444CBU2hpZnQrRjjnq5nngrnliIfmjaLvvIxBbHQrRjjliJfooajmtY/op4jvvIzlt6blj7PmlrnlkJHplK7mlofnq6Dot7PovazvvIxDdHJsK+W3puWPs+W/q+aNt+e/u+mhte+8jEN0cmwr5LiK5LiL6Lez5YWl6Lez5Ye677yM5LiL6L296ZO+5o6l5ZeF5o6i77yM57uV6L+H6YeN5a6a5ZCR6Lez6L2s77yM5ZCE56eN5ZKM6LCQ6KGl5LiBCi8vIEBkZXNjcmlwdGlvbjplbiAgICAgIFRvb2xzIGZvciBhZHVsdCBnZW50bGVtYW4gc2l0ZXMgKGdsYXplZCBzaHJpbmUsIHJlaW11IGltcGVyaWFsLCBwdXJlIGxvdmUgcGxhbiwgZ2VudGxlbWFuIHR3byBkaW1lbnNpb24sIGRpbWVuc2lvbiBhbmQgZGltZW5zaW9uIHRyYWplY3RvcnksIGFkb3JhYmxlIGhlYXJ0IEFDRyBzdXJ2ZXkgdGVhbSwgdGhlIG1hZ2ljIGRheSBpbiB0aGUgZmllbGQsIGxpZ2h0IGFnZW5jeSwgdHdvIGRpbWVuc2lvbmFsLCBhZG9yYWJsZSBBbmdlbCBTYWt1cmEgZGlmZnVzZSBob21lcywgU2hlbmdndWFuZywgbG92ZSBuZXN0LCBDYW1wYW51bGEgZGltZW5zaW9uIGJhcnJhZ2UsIGZhbnRhc3kgZWxlbWVudCwgb3VyIG9wcG9ydHVuaXRpZXMsIHNvbWUgYWRvcmFibGUpIG15c3RlcmlvdXMgY29kZSBpbnRvIHRoZSBkb3dubG9hZCBsaW5rLCBGOCAmIHNoaWZ0K0Y4IHN3aXRjaGluZyBzaXRlcywgQmFpZHUgZGlzayBhdXRvbWF0aW9uLCBoYXJtb25pb3VzIHBhdGNoCi8vIEBkZXNjcmlwdGlvbjp6aC1UVyAgIOiAgeWPuOapn+W3peWFt+euse+8jOaUr+aMgeeQieeSg+elnuekvuOAgemdiOWkouempuaJgOOAgee0lOaEm+ioiOWKg+OAgee0s+Wjq+S6jOasoeWFg+OAgeiQjOW/g+asoeWFg+OAgeasoeWFg+i7jOi3oeOAgUFDR+iqv+afpeWwj+maiuOAgeW5u+WkqemgmOWfn+OAgeWkqeS9v+S6jOasoeWFg+OAgearu+iKsea8q+iIjeOAgemiqOmItOeqqeOAgeasoeWFg+OBruiBluWFieOAgeaEm+W9iOW5leOAgeW5u+aDs+asoeWFg+OAgeWPuOapn+acg+aJgOOAgeijj+eVquiQjOOAgeacgEFDR+OAgee0s+Wjq+WAieW6q+OAgee0s+Wjq+WcluabuOmkqOOAgUFDR+WSjOirp+WNgC/oo4/kuJbnlYzjgIHlr4LmnIjnpZ7npL7jgIHokIzlubvkuYvphJXjgIHntLPlo6vjga7luq3jgIHokIzlj6PntYTjgIHkuZ3lppbokIzjgIFDReWutuaXj+ekvuOAgeWWteeqqeOAgeasoeWFg+iAgeWPuOapn+OAgee0s+Wjq0FDR+ekvuetie+8jOelnuenmOS7o+eivOi9ieaPm+aIkOS4i+i8iemPiOaOpe+8jOe2suebpOiHquWLleWhq+Wvq+aPkOWPluWvhueivO+8jEY444CBU2hpZnQrRjjnq5npu57liIfmj5vvvIxBbHQrRjjliJfooajngI/opr3vvIzlt6blj7PmlrnlkJHpjbXmlofnq6Dot7PovYnvvIxDdHJsK+W3puWPs+W/q+aNt+e/u+mgge+8jEN0cmwr5LiK5LiL6Lez5YWl6Lez5Ye677yM5LiL6LyJ6Y+I5o6l5ZeF5o6i77yM57me6YGO6YeN5a6a5ZCR6Lez6L2J77yM5ZCE56iu5ZKM6Kun6KOc5LiBCi8vIEBkZXNjcmlwdGlvbjpqYSAgICAgIOeQieeSg+elnuekvuW3peWFt+OCu+ODg+ODiOOAgeeni+OBruWQjeWxseiAgemBi+i7ouaJi+WwgueUqAovLyBAYXV0aG9yICAgICAgaG9vdGhpbgovLyBAaWNvbiAgICAgICAgaHR0cHM6Ly93d3cuaGFjZy5maS9mYXZpY29uLmljbwovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly93d3cuaGFjZy4qL3dvcmRwcmVzcy8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL2hhY2cuKi93b3JkcHJlc3MvKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly93d3cuaGFjZy4qL3dwLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vaGFjZy4qL3dwLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vd3d3LmhhY2cubG9sLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vaGFjZy5sb2wvKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly9oYWNnLnJpd2VlLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL2hhY2cubWUvKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly9oYWNnLmluLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vaGFjZy5iZS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL2hhY2cuY2x1Yi8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL2hhY2cubGkvKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly9oYWNnLmZpLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vaGFjZy5yZWQvKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly9oYWNnLmxhLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vaGFjZy50dy8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL2hhY2cuYXQvKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly9oYWNnLmNoLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vbGxzcy4qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3d3dy5sbHNzLioKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vd3d3LmFjZ3B5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL2Jsb2cucmVpbXUubmV0LyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vcGFuLmJhaWR1LmNvbS9zaGFyZS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3Bhbi5iYWlkdS5jb20vcy8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3NleGFjZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly93d3cuYWNnLnRmLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vYWNnLnRmLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vd3d3Lm1veGFjZy5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly9tb3hhY2cuKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly8qLmFjZ2dqLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL2FjZzEyLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovLyouYWNnMTIuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vd3d3LmFjZ256LmNjLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vbmFjZy5tZS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3d3dy50aWFuc2hpdC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly93d3cub29tb2UubW9lLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vd3d3LmthemU1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3d3dy5hY2cxNS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly93d3cuYWNnbG92ZXIudG9wLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vbGlmYW5tb2UuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vd3d3LmlkYW5tdS4qCi8vIEBpbmNsdWRlICAgICBodHRwKjovLyouc2lqaWh1aXN1by5jbHViLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vc2lqaWh1aXN1by5jbHViLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vYWNnMTgudXMvKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly8qLmFjZzE4LnVzLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vKi5hY2c0NC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly96dWlhY2cuKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly93d3cuenVpYWNnLioKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vd3d3LmdhbGFjZy5tZS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL2NhbmdrdS5pbi8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3d3dy5taGVjeS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly9hY2d6b25lLm9yZy8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3d3dy5hY2d6b25lLm9yZy8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3VyYWJhbi5tZS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3d3dy51cmFiYW4ubWUvKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly9hY2dtb29uLioKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vd3d3LmppeXVlLioKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vd3d3Lm1vZS1hY2cuKi8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL2h1YW4ubW9lKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly93d3cubXlnYWxnYW1lLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL2h0YWkuKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly9nbWdhcmQuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vKi5nbWdhcmQuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vd3d3LmtvdS5tb2UvKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly93d3cuOTFtb2UuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vY2VmYW1pbGllLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3l1aS1ueWEuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vd3d3Lmwtc2ouY2MvKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly9odGFjZy5jYy8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3d3dy5odGFjZy5jYy8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3d3dy54aXUubW9lLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vd3d3LmNsZDEubmV0LyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vc2pocyouKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly93d3cuZGFrYXNoYW5nY2hlLioKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vc2xlYXp5Zm9yay5vcmcvKi9zY3JpcHRzLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vZ3JlYXN5Zm9yay5vcmcvKi9zY3JpcHRzLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vc2xlYXp5Zm9yay5vcmcvKi9mb3J1bS8qZGlzY3Vzc2lvbioKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vZ3JlYXN5Zm9yay5vcmcvKi9mb3J1bS8qZGlzY3Vzc2lvbioKLy8gQHZlcnNpb24gICAgIDMuMjIuNDIKLy8gQGdyYW50ICAgICAgIEdNX25vdGlmaWNhdGlvbgovLyBAZ3JhbnQgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgICAgIEdNX3NldENsaXBib2FyZAovLyBAZ3JhbnQgICAgICAgR01fc2V0VmFsdWUKLy8gQGdyYW50ICAgICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICAgICB1bnNhZmVXaW5kb3cKLy8gQHJ1bi1hdCAgICAgIGRvY3VtZW50LWVuZAovLyBAcmVxdWlyZSAgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzIzNTIyL2NvZGUvb2QuanM/dmVyc2lvbj0yMDQyNTAKLy8gQHJlcXVpcmUgICAgIGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9jcnlwdG8tanMvMy4xLjIvY29tcG9uZW50cy9jb3JlLW1pbi5qcwovLyBAcmVxdWlyZSAgICAgaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2NyeXB0by1qcy8zLjEuMi9yb2xsdXBzL2Flcy5qcwovLyBAbGljZW5zZSAgICAgTUlUIExpY2Vuc2UKLy8gQGNvbm5lY3QgICAgIHR0cy5iYWlkdS5jb20KLy8gQGNvbXBhdGlibGUgICAgICAgIGNocm9tZQovLyBAY29tcGF0aWJsZSAgICAgICAgZmlyZWZveAovLyBAY29tcGF0aWJsZSAgICAgICAgb3BlcmEg5pyq5rWL6K+VCi8vIEBjb21wYXRpYmxlICAgICAgICBzYWZhcmkg5pyq5rWL6K+VCi8vIEBjb250cmlidXRpb25VUkwgaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9jZ2ktYmluL3dlYnNjcj9jbWQ9X2RvbmF0aW9ucyZidXNpbmVzcz1yaXhpeGlAc2luYS5jb20maXRlbV9uYW1lPUdyZWFzeStGb3JrK2RvbmF0aW9uCi8vIEBjb250cmlidXRpb25BbW91bnQgMQovLyA9PS9Vc2VyU2NyaXB0PT0KLyoK6YCa55So5b+r5o236ZSu77yaCiAgICBGOOaIluiAhXNoaWZ0K0Y45ZCR5YmN5oiW5ZCR5ZCO5b6q546v5a6F56uZ5YiX6KGoCiAgICDihpAg4oaS5b+r6YCf5a6a5L2N5Yiw5LiK5LiA56+H5oiW5LiL5LiA56+H5paH56ugCiAgICBDdHJsK+KGkCDihpLlv6vpgJ/nv7vpobUKICAgIEN0cmwr4oaRIOKGk+i/m+WFpeaWh+eroOWGheWuuemhteaIlui/lOWbngogICAgQWx0K0Y45omT5byA57uF5aOr56uZ54K55YiX6KGoCiAgICBDdHJsK0Y45omT5byA54Gr566t5ZeF5o6i56qX5Y+jCiAgICBDdHJsK1rlvIDlkK/miJblhbPpl61OU0ZX5qih5byPCgrmnIBBQ0flv6vmjbfplK7vvJoKICAgIOeCueWHu+WbvueJh+WOu+mZpOWSjOiwkOWKm+mHjwogICAg5oyJ5L2PQ3RybOeCueWHu+WbvumbhuaIluaWh+eroOmhtemdoueahOS4i+i9veaMiemSruebtOaOpei3s+i9rOiHs+eZvuW6puebmAoK54Gr566t5Yqf6IO977yM5ZeF5o6i5bm25pi+56S65omA5pyJ5LiL6L296ZO+5o6l77yM54K55Ye75bqP5Y+35a6a5L2N6Iez6aG16Z2i5Lit6LWE5rqQ5omA5Zyo5L2N572uCgrogIHlj7jmnLrovpPlhaXmoYbovpPlhaXpk77mjqU6aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MveHh4eHh4eHgg5a+G56CBOnl5eXnmiJbogIV4eHh4eHh4eCB5eXl5562J5Y+v6Lez6L2s6IezOmh0dHBzOi8vcGFuLmJhaWR1LmNvbS9zL3h4eHh4eHh4I3l5eXkKKi8KKGZ1bmN0aW9uKCl7CiAgICAndXNlIHN0cmljdCc7CiAgICB2YXIgY29uZmlnPXsKICAgICAgICBzaXRlczpbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG5hbWU6IueQieeSg+elnuekviIsCiAgICAgICAgICAgICAgICB1cmw6Imh0dHBzOi8vd3d3LmhhY2cuZmkvd3AvIiwKICAgICAgICAgICAgICAgIHJlZ2V4Oi9oYWNnXC58bGxzc1wuLywKICAgICAgICAgICAgICAgIHJ1bjpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIHZhciBmZWlaYW8sZmVpWmFvcz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJwMSIpLGk7CiAgICAgICAgICAgICAgICAgICAgZm9yKGk9MDtpPGZlaVphb3MubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGZlaVphbz1mZWlaYW9zW2ldOwogICAgICAgICAgICAgICAgICAgICAgICBpZihmZWlaYW8ucGFyZW50Tm9kZSlmZWlaYW8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChmZWlaYW8pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgaGFzOD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICB2YXIgY29tbSxjb21tcz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJzcGFuLmZuIiksY29tbUlkOwogICAgICAgICAgICAgICAgICAgIGZvcihpPTA7aTxjb21tcy5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgICAgICAgICAgY29tbT1jb21tc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29tbS5pbm5lckhUTUwgPT0gIlx1NWMwZlx1MDAzOFx1OTE3MSIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzOD10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbUlkPWNvbW0ucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZihoYXM4KXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlcj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJkaXYuZW50cnktbWV0YSIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihoZWFkZXIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmlubmVySFRNTCs9IjwvYnI+IDxhIGhyZWY9XCIjIitjb21tSWQrIlwiPlx1MjYwNVx1MDAyMFx1NzZmNFx1OGZiZVx1ODg2NVx1Njg2M1x1NTllY1x1MDAyMFx1MjYwNTxcL2E+IjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZihpc0h0dHBzKXsKICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlVXJsKHRydWUsW1siaWZyYW1lIl0sW1snaHR0cDonLCdodHRwczonXV1dKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlVXJsKHRydWUsW1siZW1iZWQiXSxbWydodHRwOicsJ2h0dHBzOiddXV0pOwogICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VVcmwodHJ1ZSxbWyJvYmplY3QiXSxbWydodHRwOicsJ2h0dHBzOiddXV0pOwogICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VVcmwodHJ1ZSxbWyJhIl0sW1snaHR0cDooLipoYWNnKScsJ2h0dHBzOiQxJ11dXSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5tZXRhc2xpZGVyLWZsZXgiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gZG9jdW1lbnQudGl0bGUucmVwbGFjZSgvXHU3NDA5XHU3NDgzXHU3OTVlXHU3OTNlLywiXHU3NDA5XHU3NDgzIOKZgiBcdTc5NWVcdTc5M2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImEiKSwgZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGFycikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5pbm5lckhUTUw9aXRlbS5pbm5lckhUTUwucmVwbGFjZSgvXHU3NDA5XHU3NDgzXHU3OTVlXHU3OTNlLywiXHU3NDA5XHU3NDgzIOKZgiBcdTc5NWVcdTc5M2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0udGl0bGU9Ilx1NjMwYVx1NTkxYVx1NGYxYVx1NWJmY1x1ODFmNFx1ODljNlx1N2ViZlx1NmEyMVx1N2NjYVx1ZmYwY1x1OGZkOVx1NjYyZlx1NTA0N1x1N2FkOVx1ZmYwMSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgdGFncz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJhcnRpY2xlPmZvb3Rlcj5hIik7CiAgICAgICAgICAgICAgICAgICAgZm9yKGk9MDtpPHRhZ3MubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWc9dGFnc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGFnLmlubmVySFRNTCA9PSAiXHU0ZjJhXHU1YTE4IiB8fCB0YWcuaW5uZXJIVE1MID09ICJcdTUzZWZcdTcyMzFcdTc2ODRcdTc1MzdcdTViNjlcdTViNTAiIHx8IHRhZy5pbm5lckhUTUwgPT0gIlx1NTk3M1x1ODhjNSIgfHwgdGFnLmlubmVySFRNTCA9PSAiXHU3NTM3XHUzMDZlXHU1YTE4Iil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJ0aWNsZVRpdGxlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5lbnRyeS10aXRsZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYXJ0aWNsZVRpdGxlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnRpY2xlVGl0bGUuaW5uZXJIVE1MPSI8Zm9udCBjb2xvcj0ncmVkJyB0aXRsZT0n77yBXHU1M2NkXHU5ZTIxXHU1OTBkXHU1OTc277yBJz5cdTI2NDJcdThkZWZcdTg5N2ZcdTZjZDVcdTI2NDI8L2ZvbnQ+ICIrYXJ0aWNsZVRpdGxlLmlubmVySFRNTDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5UaXRpbGUgPSBkb2N1bWVudC50aXRsZSA9IGRvY3VtZW50LnRpdGxlLnJlcGxhY2UoL1x1NzQwOVx1NzQ4M1x1Nzk1ZVx1NzkzZS8sIlx1NTkyN1x1NWM0Y1x1Nzk1ZVx1NzkzZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIGVtYmVkcz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIud3AtZW1iZWRkZWQtY29udGVudCIpOwogICAgICAgICAgICAgICAgICAgIGZvcihpPTA7aTxlbWJlZHMubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbWJlZD1lbWJlZHNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgIGVtYmVkLm9ubG9hZD1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYmVkLnJlbW92ZUF0dHJpYnV0ZSgiZGF0YS1zZWNyZXQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKHVuc2FmZVdpbmRvdy5xdW90ZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtc2cgPSAi4oCmIiArIHVuc2FmZVdpbmRvdy5xdW90ZSArICLigKYiLHBvcyA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNjcm9sbE1zZygpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gbXNnLnN1YnN0cmluZyhwb3MsIG1zZy5sZW5ndGgpICsgbXNnLnN1YnN0cmluZygwLCBwb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9zID4gIG1zZy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gb3JpZ2luVGl0aWxlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChzY3JvbGxNc2csMjUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxNc2coKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG5hbWU6IueBteaipuW+oeaJgCIsCiAgICAgICAgICAgICAgICB1cmw6Imh0dHBzOi8vYmxvZy5yZWltdS5uZXQvIiwKICAgICAgICAgICAgICAgIHJlZ2V4Oi9ibG9nXC5yZWltdVwuLywKICAgICAgICAgICAgICAgIHJ1bjpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIHZhciB0aXRsZVRpbWU7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuaGlkZGVuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9ICdcdTY3NjVcdTU1NmFcdTAwMzhcdTU1NjZ+KCrCtOKIh++9gCopICcgKyBvcmlnaW5UaXRpbGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGl0bGVUaW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gJ1x1NjI0ZFx1NGUwZFx1N2VkOVx1NTU2YSjila/igLXilqHigLIp4pWv77i14pS74pSB4pS7ICcgKyBvcmlnaW5UaXRpbGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZVRpbWUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gb3JpZ2luVGl0aWxlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVCbG9ja0J0bigpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigicHJlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdXRob3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuYXV0aG9yLWluZm8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF1dGhvciAmJiAhZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2Jsb2NrQnRuIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBibG9ja0J0bj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrQnRuLmlkPSJibG9ja0J0biI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja0J0bi50eXBlPSJidXR0b24iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tCdG4udGV4dENvbnRlbnQ9Ilx1NTk3ZFx1NWI2OVx1NWI1MFx1NzcwYlx1NGUwZFx1NTIzMCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja0J0bi5zdHlsZS5jc3NUZXh0PSJwYWRkaW5nOjRweCAwO3Bvc2l0aW9uOiByZWxhdGl2ZTt3aWR0aDoxMjBweDsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocHJlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYmxvY2tCdG4scHJlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrQnRuLnN0eWxlLmNzc1RleHQ9ImRpc3BsYXk6bm9uZTsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvci5hcHBlbmRDaGlsZChibG9ja0J0bik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja0J0bi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5uZXh0U2libGluZy5zdHlsZS5kaXNwbGF5ID09ICdibG9jaycpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRTaWJsaW5nLnN0eWxlLmRpc3BsYXkgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0U2libGluZy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjbWFpbiIpLmFkZEV2ZW50TGlzdGVuZXIoJ0RPTU5vZGVJbnNlcnRlZCcsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF1dGhvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5hdXRob3ItaW5mbyIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXV0aG9yICYmICFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjYmxvY2tCdG4iKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlQmxvY2tCdG4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkPXVuc2FmZVdpbmRvdy5qUXVlcnk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlPSQoIi50b2dnbGUiKVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRvZ2dsZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV2dHM9JC5fZGF0YSh0b2dnbGUsICJldmVudHMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighZXZ0cyB8fCAhZXZ0c1siY2xpY2siXSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoIi50b2dnbGUtYm94IikuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCIudG9nZ2xlIikudG9nZ2xlKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCJ0b2dnbGUtYWN0aXZlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoInRvZ2dsZS1hY3RpdmUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoIi50b2dnbGUiKS5jbGljayhmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5uZXh0KCIudG9nZ2xlLWJveCIpLnNsaWRlVG9nZ2xlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGNyZWF0ZUJsb2NrQnRuKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG5hbWU6IuasoeWFg+OBruWco+WFiSIsCiAgICAgICAgICAgICAgICB1cmw6Imh0dHA6Ly93d3cuYWNnbG92ZXIudG9wLyIsCiAgICAgICAgICAgICAgICByZWdleDovYWNnbG92ZXJcLnRvcC8sCiAgICAgICAgICAgICAgICBvZmZzZXQ6NjAsCiAgICAgICAgICAgICAgICBjb250ZW50QXJlYToiLmVudHJ5LWlubmVyIiwKICAgICAgICAgICAgICAgIHJ1bjpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIGNoYW5nZVVybCh0cnVlLFtbImEiLCJpbWciXSxbWydhY2dsb3ZlclxcXC5uZXQnLCdhY2dsb3ZlclxcXC50b3AnXV1dKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmFtZToi57uF5aOr5LqM5qyh5YWDIiwKICAgICAgICAgICAgICAgIHVybDoiaHR0cHM6Ly93d3cuYWNnLnRmLyIsCiAgICAgICAgICAgICAgICByZWdleDovYWNnXC50Zi8sCiAgICAgICAgICAgICAgICBvZmZzZXQ6NjAsCiAgICAgICAgICAgICAgICBhcnRpY2xlU2VsOiIubWFnYXppbmUtbGlzdD5saSwuYXJ0aWNsZV9saXN0PmxpIiwKICAgICAgICAgICAgICAgIGNvbnRlbnRBcmVhOiIuZW50cnksLmFtcC13cC1hcnRpY2xlLWNvbnRlbnQ+LmFtcC13cC1jb250ZW50IiwKICAgICAgICAgICAgICAgIHJ1bjpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbnRyeSwuYW1wLXdwLWFydGljbGUtY29udGVudD4uYW1wLXdwLWNvbnRlbnQnKTsKICAgICAgICAgICAgICAgICAgICBpZihjb250ZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsaXN0ID0gY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCJwIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxwbGlzdC5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwTm9kZT1wbGlzdFtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKC9cdTViYzZcdTUzMTlbOu+8ml0vaS50ZXN0KHBOb2RlLmlubmVySFRNTCkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmdTdHIgPSBwTm9kZS5pbm5lckhUTUwubWF0Y2goL1x1NWJjNlx1NTMxOVs677yaXVxzKlxTKi9pKVswXS5yZXBsYWNlKC9cdTViYzZcdTUzMTlbOu+8ml1ccyovLCIiKS5yZXBsYWNlKCcmYW1wOycsJyYnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9Q3J5cHRvSlMuZW5jLkJhc2U2NC5wYXJzZShvcmdTdHIpLnRvU3RyaW5nKENyeXB0b0pTLmVuYy5VdGY4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwTm9kZS5pbm5lckhUTUwgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZihrZXkgIT09ICIiKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBibG9ja3F1b3RlcyA9IGNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgiYmxvY2txdW90ZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxibG9ja3F1b3Rlcy5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmxvY2txdW90ZT1ibG9ja3F1b3Rlc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gYmxvY2txdW90ZS5xdWVyeVNlbGVjdG9yKCJwIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRhcmdldHx8dGFyZ2V0LmlubmVyVGV4dD09PSIifHwhL15bMC05YS16XCtcLz1cc10rJC9pLnRlc3QodGFyZ2V0LmlubmVyVGV4dCkpe2NvbnRpbnVlO30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGFyZ2V0LmlubmVySFRNTC5yZXBsYWNlKC88YnI+L2csIiIpLnJlcGxhY2UoL1xzL2csIiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IENyeXB0b0pTLkFFUy5kZWNyeXB0KHJlc3VsdCxrZXkpLnRvU3RyaW5nKENyeXB0b0pTLmVuYy5VdGY4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaW5uZXJIVE1MID0gcmVzdWx0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuYW1lOiLlpKnkvb/kuozmrKHlhYMiLAogICAgICAgICAgICAgICAgdXJsOiJodHRwczovL3d3dy50aWFuc2hpdC5jb20vIiwKICAgICAgICAgICAgICAgIHJlZ2V4Oi90aWFuc2hpdFwuLywKICAgICAgICAgICAgICAgIGNvbnRlbnRBcmVhOicuYXJ0aWNsZS1jb250ZW50JwogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuYW1lOiJBQ0fosIPmn6XlsI/pmJ8iLAogICAgICAgICAgICAgICAgdXJsOiJodHRwczovL2FjZzEyLmNvbS8iLAogICAgICAgICAgICAgICAgcmVnZXg6L2FjZzEyXC4vLAogICAgICAgICAgICAgICAgaGlkZU9kOnRydWUsCiAgICAgICAgICAgICAgICBkb3dubG9hZFVybDovYWNnMTJcLmNvbVwvZG93bmxvYWQvLAogICAgICAgICAgICAgICAgb2Zmc2V0OjU1LAogICAgICAgICAgICAgICAgYXJ0aWNsZVNlbDoic2VjdGlvbi5jYXJkIiwKICAgICAgICAgICAgICAgIHJ1bjpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIGlmKGlzSHR0cHMpCiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEluc2VydEhhbmRsZXIoW1siYSIsImltZyIsImxpbmsiLCJzY3JpcHQiXSxbWydwOihcXFwvXFxcL3xcXFxcXFwvXFxcXFxcLykod3d3XFxcLnxzdGF0aWNcXFwuKT9hY2cxMicsJ3BzOiQxJDJhY2cxMiddXV0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuYW1lOiLpo47pk4Pnqp0iLAogICAgICAgICAgICAgICAgdXJsOiJodHRwOi8vd3d3LmFjZzE1LmNvbS8iLAogICAgICAgICAgICAgICAgcmVnZXg6L2FjZzE1XC5jb20vLAogICAgICAgICAgICAgICAgaGlkZU9kOnRydWUsCiAgICAgICAgICAgICAgICBvZmZzZXQ6NTUsCiAgICAgICAgICAgICAgICBhcnRpY2xlU2VsOiJzZWN0aW9uLmNhcmQiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG5hbWU6IumHjOeVquiQjCIsCiAgICAgICAgICAgICAgICB1cmw6Imh0dHA6Ly9saWZhbm1vZS5jb20vIiwKICAgICAgICAgICAgICAgIHJlZ2V4Oi9saWZhbm1vZVwuLywKICAgICAgICAgICAgICAgIGRvd25sb2FkVXJsOi9saWZhbm1vZVwuY29tXC9kb3dubG9hZC8sCiAgICAgICAgICAgICAgICBvZmZzZXQ6NTUsCiAgICAgICAgICAgICAgICBhcnRpY2xlU2VsOiJzZWN0aW9uLmNhcmQiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG5hbWU6IueIseW8ueW5lSIsCiAgICAgICAgICAgICAgICB1cmw6Imh0dHA6Ly93d3cuaWRhbm11LmNvLyIsCiAgICAgICAgICAgICAgICByZWdleDovaWRhbm11XC4vLAogICAgICAgICAgICAgICAgZG93bmxvYWRVcmw6L2lkYW5tdVwuLipcL2Rvd25sb2FkLywKICAgICAgICAgICAgICAgIG9mZnNldDo1NSwKICAgICAgICAgICAgICAgIGFydGljbGVTZWw6InNlY3Rpb24uY2FyZCIsCiAgICAgICAgICAgICAgICBydW46ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVzZXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYm9keT5zdHlsZScpOwogICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8cmVzZXRzLmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzZXQ9cmVzZXRzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICBpZigvXC5jYXJkLWJnXHNpbWd8XC5jb250ZW50LXJlc2V0XHNpbWcvLnRlc3QocmVzZXQuaW5uZXJIVE1MKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHJlc2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgcjEwPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZW51LWl0ZW0tMTI3NDQnKTsKICAgICAgICAgICAgICAgICAgICBpZihyMTApewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcjE4PXIxMC5jbG9uZU5vZGUodHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHIxOC5pbm5lckhUTUwgPSByMTguaW5uZXJIVE1MLnJlcGxhY2UoL1x1OGQ0NFx1OGJhZi9nLCAnUjE4JykucmVwbGFjZSgvY2F0ZWdvcnlcL3YwMS9nLCAnY2F0ZWdvcnkvdjA5L3YxMycpOwogICAgICAgICAgICAgICAgICAgICAgICByMTAuYWZ0ZXIocjE4KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG5hbWU6IuWPuOacuuS8muaJgCIsCiAgICAgICAgICAgICAgICB1cmw6Imh0dHBzOi8vZGFrYXNoYW5nY2hlLm5ldCIsCiAgICAgICAgICAgICAgICByZWdleDovc2lqaWh1aXN1b1wuY2x1YnxkYWthc2hhbmdjaGVcLi8sCiAgICAgICAgICAgICAgICBpbm5lclBhZ2U6L1wvKHNqXC9cZHxcP3A9XGQpLywKICAgICAgICAgICAgICAgIG9mZnNldDoxMTUsCiAgICAgICAgICAgICAgICBjb250ZW50QXJlYToiI2NvbW1lbnRsaXN0LWNvbnRhaW5lciIsCiAgICAgICAgICAgICAgICBydW46ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICBpZihjdXJTaXRlLmlubmVyUGFnZS50ZXN0KGxvY2F0aW9uLmhyZWYpKXsKICAgICAgICAgICAgICAgICAgICAgICAgdD13aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5jb21tZW50bGlzdCIpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSw1MDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjaGFuZ2VVcmwodHJ1ZSxbWyJhIl0sW1snaHR0cHM/OlxcXC9cXFwvW15cXFwuXSooXFxcLik/c2lqaWh1aXN1b1xcXC5jbHViXFxcL2dvXFxcL1xcXD91cmw9JywnJ11dXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG5hbWU6IuW5u+aDs+asoeWFgyIsCiAgICAgICAgICAgICAgICB1cmw6Imh0dHBzOi8vYWNnMTgudXMvIiwKICAgICAgICAgICAgICAgIHJlZ2V4Oi9hY2cxOFwuLywKICAgICAgICAgICAgICAgIG9mZnNldDo1NSwKICAgICAgICAgICAgICAgIHJ1bjpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIGNoYW5nZVVybCh0cnVlLFtbImEiXSxbWydodHRwcz86XFxcL1xcXC9bXlxcXC5dKihcXFwuKT9hY2cxOFxcXC51c1xcXC9nb1xcXC9cXFw/dXJsPScsJyddXV0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuYW1lOiLmnIBBQ0fnvZEiLAogICAgICAgICAgICAgICAgdXJsOiJodHRwOi8venVpYWNnLmNjLyIsCiAgICAgICAgICAgICAgICByZWdleDovenVpYWNnXC4vLAogICAgICAgICAgICAgICAgaGlkZU9kOnRydWUsCiAgICAgICAgICAgICAgICBvZmZzZXQ6NzUsCiAgICAgICAgICAgICAgICBydW46ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICBsZXQgc2hpZWxkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaGllbGRjbGFzcycpOwogICAgICAgICAgICAgICAgICAgIGlmKHNoaWVsZCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNoaWVsZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNoaWVsZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWdzPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3A+aW1nJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wO2k8aW1ncy5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWc9aW1nc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZy5vbmNsaWNrPWZ1bmN0aW9uKCl7dGhpcy5jbGFzc05hbWU9IiI7fTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgZG93bmxvYWRCdG49ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYVtkYXRhLWFjdGlvbj1kb3dubG9hZF0nKTsKICAgICAgICAgICAgICAgICAgICBpZihkb3dubG9hZEJ0bil7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKC9cL2Rvd25sb2FkXC8vLnRlc3QobG9jYXRpb24uaHJlZikpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5zaW5nbGUtY29udGVudD5wPmlucHV0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjZCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRCdG4uaHJlZis9IiMiK2NkLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkQnRuLm9uY2xpY2s9ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZS5jdHJsS2V5KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1dpbj13aW5kb3cub3BlbignJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGRvd25sb2FkQnRuLmhyZWYucmVwbGFjZSgvXC9uZXdzXC8vLCIvZG93bmxvYWQvIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaHRtbD1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoJycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwuZG9jdW1lbnRFbGVtZW50LmlubmVySFRNTCA9IGQucmVzcG9uc2VUZXh0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkbD1odG1sLnF1ZXJ5U2VsZWN0b3IoJyNhZGRkb3dubG9hZD5hJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXJsPWRsLmhyZWY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjZD1odG1sLnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5zaW5nbGUtY29udGVudD5wPmlucHV0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNkKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCs9IiMiK2NkLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1dpbi5sb2NhdGlvbi5ocmVmPXVybDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3V2luLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdXaW4uY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuYW1lOiLnu4Xlo6vku5PlupMiLAogICAgICAgICAgICAgICAgdXJsOiJodHRwczovL2NhbmdrdS5pbi8iLAogICAgICAgICAgICAgICAgcmVnZXg6L2dhbGFjZ1wufGNhbmdrdVwuaW4vLAogICAgICAgICAgICAgICAgaGlkZU9kOnRydWUsCiAgICAgICAgICAgICAgICBhcnRpY2xlU2VsOiJzZWN0aW9uLnBvc3Qtd3JhcCIsCiAgICAgICAgICAgICAgICBydW46ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzKCk7CiAgICAgICAgICAgICAgICAgICAgfSw1MDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuYW1lOiLmqLHoirHmvKvoiI0iLAogICAgICAgICAgICAgICAgdXJsOiJodHRwczovL3d3dy5vb21vZS5tb2UvIiwKICAgICAgICAgICAgICAgIHJlZ2V4Oi9vb21vZVwubW9lLywKICAgICAgICAgICAgICAgIGhpZGVPZDp0cnVlLAogICAgICAgICAgICAgICAgb2Zmc2V0OjU1LAogICAgICAgICAgICAgICAgYXJ0aWNsZVNlbDoic2VjdGlvbi5jYXJkIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuYW1lOiJBQ0flkozosJDljLov6YeM5LiW55WML+avm+ermSIsCiAgICAgICAgICAgICAgICB1cmw6Imh0dHA6Ly93d3cudXJhYmFuLm1lL3dwLyIsCiAgICAgICAgICAgICAgICByZWdleDovYWNnem9uZVwub3JnfHVyYWJhblwubWUvLAogICAgICAgICAgICAgICAgY29udGVudEFyZWE6J2FydGljbGUnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG5hbWU6IuWvguaciOelnuekviIsCiAgICAgICAgICAgICAgICB1cmw6Imh0dHA6Ly93d3cuaml5dWUuY29tLyIsCiAgICAgICAgICAgICAgICByZWdleDovKGFjZ21vb258aml5dWUpXC4ob3JnfGNvbSkvLAogICAgICAgICAgICAgICAgb2Zmc2V0OjUwLAogICAgICAgICAgICAgICAgY29udGVudEFyZWE6ImRpdi5wb3N0LWNvbnRlbnQiLAogICAgICAgICAgICAgICAgYXJ0aWNsZVNlbDoiYXJ0aWNsZSIsCiAgICAgICAgICAgICAgICBydW46ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICB2YXIgcG9zdENvbnRlbnQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2LnBvc3QtY29udGVudCIpOwogICAgICAgICAgICAgICAgICAgIGlmKHBvc3RDb250ZW50ICYmIHBvc3RDb250ZW50LmNsYXNzTGlzdC5jb250YWlucygiaGV4aWUiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZXhpZUJ0bj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgICAgICAgICAgICAgICAgICAgaGV4aWVCdG4uaWQ9ImhleGllQnRuIjsKICAgICAgICAgICAgICAgICAgICAgICAgaGV4aWVCdG4udHlwZT0iYnV0dG9uIjsKICAgICAgICAgICAgICAgICAgICAgICAgaGV4aWVCdG4udGV4dENvbnRlbnQ9Ilx1NTk3ZFx1NWI2OVx1NWI1MFx1NzcwYlx1NGUwZFx1NTIzMCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGhleGllQnRuLnN0eWxlLmNzc1RleHQ9InBhZGRpbmc6NHB4IDA7cG9zaXRpb246IHJlbGF0aXZlO3dpZHRoOjEyMHB4OyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGhleGllQnRuLm9uY2xpY2s9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RDb250ZW50LmNsYXNzTGlzdC5jb250YWlucygiaGV4aWUiKT9wb3N0Q29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCJoZXhpZSIpOnBvc3RDb250ZW50LmNsYXNzTGlzdC5hZGQoImhleGllIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3YXJuPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImRpdi5raW5reS13YXJuaW5nIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHdhcm4pd2Fybi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShoZXhpZUJ0bix3YXJuLm5leHRTaWJsaW5nKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBwb3N0Q29udGVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShoZXhpZUJ0bixwb3N0Q29udGVudCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBlbGUsZWxlcz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuaGV4aWUiKSxpOwogICAgICAgICAgICAgICAgICAgIGZvcihpPTA7aTxlbGVzLmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgICAgICAgICBlbGU9ZWxlc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWVsZS5jbGFzc0xpc3QuY29udGFpbnMoInBvc3QtY29udGVudCIpKWVsZS5jbGFzc0xpc3QucmVtb3ZlKCJoZXhpZSIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbGVzPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImEiKTsKICAgICAgICAgICAgICAgICAgICBmb3IoaT0wO2k8ZWxlcy5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlPWVsZXNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKC9wYW5cLmJhaWR1XC5jb20vaS50ZXN0KGVsZS5ocmVmKSAmJiAvWzAtOWEtel17NH0vaS50ZXN0KGVsZS5pbm5lckhUTUwpICYmICEvIy9pLnRlc3QoZWxlLmhyZWYpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5ocmVmKz0iIyIrZWxlLmlubmVySFRNTDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgJD11bnNhZmVXaW5kb3cualF1ZXJ5OwogICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9mZigiY2xpY2siLCAiLnNvcmEtY2FyZCAuX19jb3B5Iik7CiAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oImNsaWNrIiwgIi5zb3JhLWNhcmQgLl9fY29weSIsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29kZSA9ICQodGhpcykuY2hpbGRyZW4oImNvZGUiKS50ZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaHJlZj10aGlzLmhyZWYuc3BsaXQoIiMiKVswXSsiIyIrY29kZTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmFtZToi6JCM5bm75LmL5LmhIiwKICAgICAgICAgICAgICAgIHVybDoiaHR0cHM6Ly9odWFuLm1vZS8iLAogICAgICAgICAgICAgICAgcmVnZXg6L21vZS1hY2dcLnxodWFuXC5tb2UvLAogICAgICAgICAgICAgICAgb2Zmc2V0OjU1LAogICAgICAgICAgICAgICAgaGlkZU9kOnRydWUsCiAgICAgICAgICAgICAgICBkb3dubG9hZFVybDovbW9lLWFjZ1wuLipcL2Rvd25sb2FkLywKICAgICAgICAgICAgICAgIGFydGljbGVTZWw6InNlY3Rpb24uY2FyZCIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmFtZToi57uF5aOr5Zu+5Lmm6aaGIiwKICAgICAgICAgICAgICAgIHVybDoiaHR0cDovL2h0YWkuY28vIiwKICAgICAgICAgICAgICAgIHJlZ2V4Oi9odGFpXC4oY298bWUpLywKICAgICAgICAgICAgICAgIGNvbnRlbnRBcmVhOiJkaXYucG9zdF9jb250ZW50IiwKICAgICAgICAgICAgICAgIGNvbW1BcmVhOidjb21tZW50bGlzdCcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmFtZToi57Sz5aOr44Gu5bqtIiwKICAgICAgICAgICAgICAgIHVybDoiaHR0cHM6Ly9nbWdhcmQuY29tLyIsCiAgICAgICAgICAgICAgICByZWdleDovZ21nYXJkXC5jb20vLAogICAgICAgICAgICAgICAgYXJ0aWNsZVNlbDoiZGl2LnBvc3QiLAogICAgICAgICAgICAgICAgbm9TY2FsZTp0cnVlLAogICAgICAgICAgICAgICAgcnVuOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgaWYoaXNIdHRwcylhZGRJbnNlcnRIYW5kbGVyKFtbImltZyJdLFtbJ3AoOlxcXC9cXFwvc3RhdGljXC5nbWdhcmRcLmNvbSknLCdwcyQxJ11dXSk7CiAgICAgICAgICAgICAgICAgICAgY3VyU2l0ZS5wcmVSb2NrZXQ9ZnVuY3Rpb24oKXt1bnNhZmVXaW5kb3cuJCgnI2RsbGlzdCBhJykubW91c2VlbnRlcigpO307CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG5hbWU6Ik15R2FsZ2FtZSAtIOW/p+mDgeeahOW8n+W8nyIsCiAgICAgICAgICAgICAgICB1cmw6Imh0dHBzOi8vd3d3Lm15Z2FsZ2FtZS5jb20vIiwKICAgICAgICAgICAgICAgIHJlZ2V4Oi9teWdhbGdhbWVcLmNvbS8sCiAgICAgICAgICAgICAgICBhcnRpY2xlU2VsOiIuYXJ0aWNsZSIsCiAgICAgICAgICAgICAgICBjb21tQXJlYTonY29tbWVudGxpc3QnLAogICAgICAgICAgICAgICAgcnVuOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgU3RyaW5nLnByb3RvdHlwZS5wbWF0Y2ggPSBmdW5jdGlvbihyZWcpewogICAgICAgICAgICAgICAgICAgICAgICBpZighKHJlZyBpbnN0YW5jZW9mIFJlZ0V4cCkpcmV0dXJuIDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFyZWcuZ2xvYmFsKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gdGhpcy5tYXRjaChyZWcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGE/IFthLnNsaWNlKDEsYS5sZW5ndGgpXSA6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGE9W10sYjsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUoYj1yZWcuZXhlYyh0aGlzKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnB1c2goYik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEubGVuZ3RoPjA/YTowOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgZG93bkJ0bj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhLmhpbnQtLXJpZ2h0Iik7CiAgICAgICAgICAgICAgICAgICAgaWYoZG93bkJ0bil7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbm5CdG49ZG93bkJ0bi5xdWVyeVNlbGVjdG9yKCIuYnRuLWRhbmdlciIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihpbm5CdG4pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9uY2xpY2tTdHI9aW5uQnRuLmdldEF0dHJpYnV0ZSgib25jbGljayIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoL1wvXC93d3dcLm15Z2FsZ2FtZVwuY29tXC9nb1wucGhwXD91cmxcPS8udGVzdChvbmNsaWNrU3RyKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5uQnRuLnNldEF0dHJpYnV0ZSgib25jbGljayIsICIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHJlZj1vbmNsaWNrU3RyLnJlcGxhY2UoLy4qd3d3XC5teWdhbGdhbWVcLmNvbVwvZ29cLnBocFw/dXJsXD0oW14nXSspJy4qLywiJDEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3duQnRuLnNldEF0dHJpYnV0ZSgiaHJlZiIsIGhyZWYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvd25CdG4uc2V0QXR0cmlidXRlKCJ0YXJnZXQiLCAiX2JsYW5rIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgYmdMaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaSIpOwogICAgICAgICAgICAgICAgICAgIGJnTGkuaW5uZXJIVE1MPSI8YT48aSBjbGFzcz0nZmEgZmEtc3Rhcic+PC9pPlx1NWY1M1x1NTI0ZFx1ODBjY1x1NjY2Zlx1NTZmZVx1NzI0NzwvYT4iOwogICAgICAgICAgICAgICAgICAgIHZhciBiZ3M9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmNiLXNsaWRlc2hvdz5saT5zcGFuIik7CiAgICAgICAgICAgICAgICAgICAgYmdMaS5vbmNsaWNrPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8YmdzLmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJnPWJnc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGdldENvbXB1dGVkU3R5bGUoYmcpLm9wYWNpdHk+LjUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmw9Z2V0Q29tcHV0ZWRTdHlsZShiZykuYmFja2dyb3VuZEltYWdlLnJlcGxhY2UoL3VybFwoIj8oW14iXSspIj9cKS8sIiQxIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4odXJsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBiZ0xpLm9ubW91c2VvdmVyPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGJnTGkuY2xhc3NMaXN0LmFkZCgib3BlbiIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBiZ0xpLm9ubW91c2VvdXQ9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgYmdMaS5jbGFzc0xpc3QucmVtb3ZlKCJvcGVuIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBiZ1VybHMsc3VtPTAsbWF4Q3NzPTU7CiAgICAgICAgICAgICAgICAgICAgdmFyIGJhdGNoQmc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidWwiKTsKICAgICAgICAgICAgICAgICAgICBiYXRjaEJnLmNsYXNzTGlzdC5hZGQoImRyb3Bkb3duLW1lbnUiKTsKICAgICAgICAgICAgICAgICAgICBiYXRjaEJnLmlubmVySFRNTD0iPGxpPjxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIj7lpI3liLblvZPnu4Tog4zmma/lm77pk77mjqU8L2E+PC9saT4iOwogICAgICAgICAgICAgICAgICAgIGJhdGNoQmcub25jbGljaz1mdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoYmdVcmxzPT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmdVcmxzPSIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoInN0eWxlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGo9MDtqPD1zdHlsZS5sZW5ndGg7aisrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzdHlsZVtqXS5pbm5lckhUTUwuaW5kZXhPZigiLmNiLXNsaWRlc2hvdyIpIT0tMSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXN0eWxlW2pdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VyUmVncz1zdHlsZS5pbm5lckhUTUwucG1hdGNoKC9iYWNrZ3JvdW5kXC1pbWFnZTpccyp1cmxcKCc/KFteXCcpXSspJz9cKS9naSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZ1VybHM9Y3VyUmVncy5qb2luKCJcblxyIikrIlxuXHIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJtQmc9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2LmxhcmdlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihybUJnKWJnVXJscys9Z2V0Q29tcHV0ZWRTdHlsZShybUJnKS5iYWNrZ3JvdW5kSW1hZ2UucmVwbGFjZSgvdXJsXCgiPyhbXiJdKykiP1wpLywiJDEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdNX3NldENsaXBib2FyZChiZ1VybHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKGJnVXJscyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgi6IOM5pmv5Zu+54mH6ZO+5o6l5aSN5Yi25a6M5q+VIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYmdVcmxzIT0iIil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR01fc2V0Q2xpcGJvYXJkKGJnVXJscyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuiDjOaZr+WbvueJh+mTvuaOpeWkjeWItuWujOavlSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJnTGkuYXBwZW5kQ2hpbGQoYmF0Y2hCZyk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigidWwubmF2YmFyLW5hdiIpLmFwcGVuZENoaWxkKGJnTGkpOwogICAgICAgICAgICAgICAgICAgIHZhciBjb21tZW50cz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjY29tbWVudHMiKSxwcm9jZXNzaW5nPWZhbHNlOwogICAgICAgICAgICAgICAgICAgIGlmKGNvbW1lbnRzKWNvbW1lbnRzLmFkZEV2ZW50TGlzdGVuZXIoJ0RPTU5vZGVJbnNlcnRlZCcsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocHJvY2Vzc2luZylyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3Npbmc9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VyaW91c1JlcGxhY2UoY29tbUFyZWEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2luZz1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSw1MDApOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciBwaWNUaXRsZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJoMT5hW2hyZWY9J2h0dHBzOi8vd3d3Lm15Z2FsZ2FtZS5jb20vZ2VuZ3hpbnJpemhpLmh0bWwnXSIpOwogICAgICAgICAgICAgICAgICAgIGlmKHBpY1RpdGxlKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZ1VybD1waWNUaXRsZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCJkaXYuaW1nPmltZyIpLnNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBpY0J0bj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHBpY0J0bi5ocmVmPWltZ1VybDsKICAgICAgICAgICAgICAgICAgICAgICAgcGljQnRuLnRhcmdldD0iX2JsYW5rIjsKICAgICAgICAgICAgICAgICAgICAgICAgcGljQnRuLmlubmVySFRNTD0iPHNwYW4gY2xhc3M9J2FuaW1hdGVkX2gxJz7lsIHpnaLlm748L3NwYW4+IjsKICAgICAgICAgICAgICAgICAgICAgICAgcGljVGl0bGUucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChwaWNCdG4pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmFtZToi5bm75aSp6aKG5Z+fIiwKICAgICAgICAgICAgICAgIHVybDoiaHR0cDovL3d3dy5hY2duei5jYy8iLAogICAgICAgICAgICAgICAgcmVnZXg6L2FjZ256XC5jYy8sCiAgICAgICAgICAgICAgICBoaWRlT2Q6dHJ1ZSwKICAgICAgICAgICAgICAgIG9mZnNldDo1NSwKICAgICAgICAgICAgICAgIGRvd25sb2FkVXJsOi9hY2duelwuY2NcL2Rvd25sb2FkLywKICAgICAgICAgICAgICAgIGFydGljbGVTZWw6InNlY3Rpb24uY2FyZCIsCiAgICAgICAgICAgICAgICBydW46ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICBpZihpc0h0dHBzKWFkZEluc2VydEhhbmRsZXIoW1siYSIsImltZyIsImxpbmsiLCJzY3JpcHQiXSxbWydwOihcXFwvXFxcL3xcXFxcXFwvXFxcXFxcLykod3d3XFxcLik/YWNnbnonLCdwczokMSQyYWNnbnonXV1dKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmFtZToi6JCM5b+D5qyh5YWDIiwKICAgICAgICAgICAgICAgIHVybDoiaHR0cHM6Ly9tb3hhY2cubW9lLyIsCiAgICAgICAgICAgICAgICByZWdleDovbW94YWNnXC4vLAogICAgICAgICAgICAgICAgaGlkZU9kOnRydWUsCiAgICAgICAgICAgICAgICBvZmZzZXQ6NTUsCiAgICAgICAgICAgICAgICBhcnRpY2xlU2VsOiJzZWN0aW9uLmNhcmQiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qewogICAgICAgICAgICAgICAgbmFtZToi6L276JCM56S+IiwKICAgICAgICAgICAgICAgIHVybDoiaHR0cDovL25hY2cubWUvIiwKICAgICAgICAgICAgICAgIHJlZ2V4Oi9uYWNnXC5tZS8sCiAgICAgICAgICAgICAgICBoaWRlT2Q6dHJ1ZSwKICAgICAgICAgICAgICAgIG9mZnNldDo2NSwKICAgICAgICAgICAgICAgIGNvbnRlbnRBcmVhOicuY29udGVudCcKICAgICAgICAgICAgfSwqLwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuYW1lOiLmrKHlhYPovajov7kiLAogICAgICAgICAgICAgICAgdXJsOiJodHRwczovL3d3dy5hY2c0NC5jb20vIiwKICAgICAgICAgICAgICAgIHJlZ2V4Oi93d3dcLihhY2dnanxhY2c0NClcLi8sCiAgICAgICAgICAgICAgICBkb3dubG9hZFVybDovY29tXC9cP3BhZ2VfaWQ9LywKICAgICAgICAgICAgICAgIGhpZGVPZDp0cnVlLAogICAgICAgICAgICAgICAgYmJzOi9iYnNcLmFjZ2dqXC4vLAogICAgICAgICAgICAgICAgb2Zmc2V0OjU1LAogICAgICAgICAgICAgICAgYXJ0aWNsZVNlbDoic2VjdGlvbi5jYXJkIiwKICAgICAgICAgICAgICAgIHJ1bjpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIGlmKGlzSHR0cHMpewogICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VVcmwodHJ1ZSxbWyJhIiwiaW1nIiwic2NyaXB0IiwibGluayJdLFtbJ3A6KFxcXC9cXFwvfFxcXFxcXC9cXFxcXFwvKSh3d3dcXFwufGJic1xcXC4pP2FjZ2dqJywncHM6JDEkMmFjZ2dqJ11dXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYXNlVXJsPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Jhc2UnKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoYmFzZVVybCliYXNlVXJsLmhyZWY9YmFzZVVybC5ocmVmLnJlcGxhY2UoL2h0dHA6LywiaHR0cHM6Iik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuYW1lOiLokIzlj6Pnu4QiLAogICAgICAgICAgICAgICAgdXJsOiJodHRwOi8vd3d3LmtvdS5tb2UvIiwKICAgICAgICAgICAgICAgIHJlZ2V4Oi9rb3VcLm1vZS8sCiAgICAgICAgICAgICAgICBvZmZzZXQ6MzUsCiAgICAgICAgICAgICAgICBhcnRpY2xlU2VsOiIuYXJyb3dfYm94IiwKICAgICAgICAgICAgICAgIGNvbnRlbnRBcmVhOicuYXJ0aWNsZV9jb250ZW50JwogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuYW1lOiLkuZ3lppbokIwiLAogICAgICAgICAgICAgICAgdXJsOiJodHRwOi8vd3d3LjkxbW9lLmNvbS8iLAogICAgICAgICAgICAgICAgcmVnZXg6LzkxbW9lXC5jb20vLAogICAgICAgICAgICAgICAgb2Zmc2V0OjU1LAogICAgICAgICAgICAgICAgaGlkZU9kOnRydWUsCiAgICAgICAgICAgICAgICBkb3dubG9hZFVybDovOTFtb2VcLmNvbVwvZG93bmxvYWQvLAogICAgICAgICAgICAgICAgYXJ0aWNsZVNlbDoic2VjdGlvbi5jYXJkIiwKICAgICAgICAgICAgICAgIGNvbnRlbnRBcmVhOicuYXJ0aWNsZV9jb250ZW50JwogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuYW1lOiJDReWutuaXj+ekviIsCiAgICAgICAgICAgICAgICB1cmw6Imh0dHBzOi8vY2VmYW1pbGllLmNvbS8iLAogICAgICAgICAgICAgICAgcmVnZXg6L2NlZmFtaWxpZVwuY29tLywKICAgICAgICAgICAgICAgIGFydGljbGVTZWw6ImxpLnBvc3Q+ZGl2LnRodW1ibmFpbCIsCiAgICAgICAgICAgICAgICBjb250ZW50QXJlYTonI3Bvc3RfY29udGVudCcsCiAgICAgICAgICAgICAgICBjb21tQXJlYToiY29tbWVudGxpc3QiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG5hbWU6IuWWteeqnSIsCiAgICAgICAgICAgICAgICB1cmw6Imh0dHA6Ly95dWktbnlhLmNvbS8iLAogICAgICAgICAgICAgICAgcmVnZXg6L3l1aVwtbnlhXC5jb20vLAogICAgICAgICAgICAgICAgYXJ0aWNsZVNlbDoiYXJ0aWNsZSIsCiAgICAgICAgICAgICAgICBjb250ZW50QXJlYTonLmFydGljbGUtY29udGVudCcsCiAgICAgICAgICAgICAgICBvZmZzZXQ6NTAsCiAgICAgICAgICAgICAgICBjb21tQXJlYToiY29tbWVudGxpc3QiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG5hbWU6IuasoeWFg+iAgeWPuOacuiIsCiAgICAgICAgICAgICAgICB1cmw6Imh0dHA6Ly93d3cubC1zai5jYy8iLAogICAgICAgICAgICAgICAgcmVnZXg6L2xcLXNqXC5jYy8sCiAgICAgICAgICAgICAgICBhcnRpY2xlU2VsOiJzZWN0aW9uLmNhcmQiLAogICAgICAgICAgICAgICAgaGlkZU9kOnRydWUsCiAgICAgICAgICAgICAgICBvZmZzZXQ6NTUsCiAgICAgICAgICAgICAgICBkb3dubG9hZFVybDovbFwtc2pcLmNjXC9kb3dubG9hZFw/aWQ9LwogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuYW1lOiLnu4Xlo6tBQ0fnpL4iLAogICAgICAgICAgICAgICAgdXJsOiJodHRwOi8vaHRhY2cuY2MvIiwKICAgICAgICAgICAgICAgIHJlZ2V4Oi9odGFjZ1wuY2MvLAogICAgICAgICAgICAgICAgYXJ0aWNsZVNlbDoic2VjdGlvbiIsCiAgICAgICAgICAgICAgICBvZmZzZXQ6NTUsCiAgICAgICAgICAgICAgICBoaWRlT2Q6dHJ1ZSwKICAgICAgICAgICAgICAgIGRvd25sb2FkVXJsOi9odGFjZ1wuY2NcL2Rvd25sb2FkXD9pZC8KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmFtZToi57uF5aOr5Lqk5piTIiwKICAgICAgICAgICAgICAgIHVybDoiaHR0cHM6Ly93d3cuYWNncHkuY29tL3dweC8iLAogICAgICAgICAgICAgICAgcmVnZXg6L2FjZ3B5XC5jb20vLAogICAgICAgICAgICAgICAgb2Zmc2V0OjQ1LAogICAgICAgICAgICAgICAgaGlkZU9kOnRydWUsCiAgICAgICAgICAgICAgICBydW46ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICBpZigvd3d3XC5hY2dweVwuY29tXC9sb2dpblxkK1wuLy50ZXN0KGxvY2F0aW9uLmhyZWYpKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGU9bmV3IERhdGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpKzE0NDAwKjYwKjEwMDApOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWU9InRyYWRlIitsb2NhdGlvbi5ocmVmLnJlcGxhY2UoLy4qLmNvbVwvbG9naW4oXGQrKVwuLiovLCIkMSIpKyI9QTMyOyBleHBpcmVzPSIrZGF0ZS50b0dNVFN0cmluZygpOwogICAgICAgICAgICAgICAgICAgICAgICAvL2RvY3VtZW50LmNvb2tpZT0idHJhZGUwNDIxPUEzMjsgZXhwaXJlcz0iK2RhdGUudG9HTVRTdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLmxvY2F0aW9uPSd3cHgnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgZG93bkJ0bj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhLmRvd25idG4iKTsKICAgICAgICAgICAgICAgICAgICBpZihkb3duQnRuKXsKICAgICAgICAgICAgICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogZG93bkJ0bi5ocmVmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRvYyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmRvY3VtZW50RWxlbWVudC5pbm5lckhUTUwgPSBkLnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3BhcnNlIGVycm9yJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZG9jKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG93bkJ0bi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkb2MucXVlcnlTZWxlY3RvcigiZGl2Lmxpc3QiKSxkb3duQnRuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25lcnJvcjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG5hbWU6Iue6r+eIseiuoeWIkiIsCiAgICAgICAgICAgICAgICB1cmw6Imh0dHBzOi8vc2V4YWNnLmNvbS8iLAogICAgICAgICAgICAgICAgcmVnZXg6L3NleGFjZ1wuLywKICAgICAgICAgICAgICAgIGNvbnRlbnRBcmVhOidhcnRpY2xlJywKICAgICAgICAgICAgICAgIGNvbW1BcmVhOidzdS1xdW90ZS1pbm5lcicKICAgICAgICAgICAgfQogICAgICAgICAgICAvKnsKICAgICAgICAgICAgICAgIG5hbWU6IuWSu+WSu+WKqOa8qyIsCiAgICAgICAgICAgICAgICB1cmw6Imh0dHA6Ly93d3cueGl1Lm1vZS8iLAogICAgICAgICAgICAgICAgcmVnZXg6L3hpdVwubW9lfGNsZDFcLm5ldC8sCiAgICAgICAgICAgICAgICBjb250ZW50QXJlYTonI3Bvc3QtY29udGVudCcsCiAgICAgICAgICAgICAgICBjb21tQXJlYTonY29tbWVudGxpc3QnLAogICAgICAgICAgICAgICAgb2Zmc2V0OjU1LAogICAgICAgICAgICAgICAgYXJ0aWNsZVNlbDoiYXJ0aWNsZSwuYXJ0aWNsZS1saW5rPmxpIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuYW1lOiLmoqblubvkuozmrKHlhYMiLAogICAgICAgICAgICAgICAgdXJsOiJodHRwOi8vd3d3Lm1oZWN5LmNvbS8iLAogICAgICAgICAgICAgICAgcmVnZXg6L21oZWN5XC4vLAogICAgICAgICAgICAgICAgZG93bmxvYWRVcmw6L3d3d1wubWhlY3lcLmNvbVwvXD9wYWdlX2lkPVxkKy8sCiAgICAgICAgICAgICAgICBoaWRlT2Q6dHJ1ZSwKICAgICAgICAgICAgICAgIG9mZnNldDo1NSwKICAgICAgICAgICAgICAgIGFydGljbGVTZWw6InNlY3Rpb24uY2FyZCIKICAgICAgICAgICAgfSovCiAgICAgICAgXSwKICAgICAgICByb2NrZXRSZWc6L21hZ25ldDpcP3h0fHBhblwuYmFpZHVcLmNvbVwvc3x5dW5wYW5cLmNufGhvd2ZpbGVcLmNvbVwvZmlsZXxtZWdhXC58ZWQyazpcL1wvXHxmaWxlfGJ0XC5jb3N4Y29zXC5jb21cL3ZpZXd8ZHVcLmFjZ2dldFwuY29tXC9nb1wvfFwubWVkaWFmaXJlXC5jb21cL2Rvd25sb2FkXC98XC50b3JyZW50JC8sCiAgICAgICAgZGlzYWJsZVNpdGVzOi9oYWNnLiphYm91dFwuaHRtbC8sCiAgICAgICAgaW1nUmVnczpbWy9eKD86aHR0cHM6KT8oXC9cL2ltZ1wuMmRmYW58d3d3XC5tb3h0dVwuY2N8KD86cGljfHRjKVwuKD86ZmZza3l8cnBnc2t5KXxcL1wvaVwudGlhbnNoaVwuaW5mbykvLCdodHRwOiQxJ10sWy9odHRwKDpcL1wvKD86W15cLl0qXC4pP2xvbGlcLmlvKS8sJ2h0dHBzJDEnXSxbL15odHRwczpcL1wvZ2FsYWNnLm1lLywnaHR0cHM6Ly93d3cuZ2FsYWNnLm1lLyddLFsvXmh0dHA6XC9cL3d3d1wubW9lcGljeFwuY2MvLCdodHRwczovL3d3dy5tb2VwaWN4LmNjJ11dCiAgICB9OwogICAgaWYgKCFBcnJheS5wcm90b3R5cGUuZmluZFNpdGUpIHsKICAgICAgICBBcnJheS5wcm90b3R5cGUuZmluZFNpdGUgPSBmdW5jdGlvbiAoc2l0ZU5hbWUpIHsKICAgICAgICAgICAgdmFyIGFyciA9IHRoaXM7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBhcnIubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmIChhcnJbaV0ubmFtZSA9PSBzaXRlTmFtZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJbaV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfQoKICAgIHZhciB0LCBjdXJTaXRlLCBjdXJBcnRpY2xlLCBzaXRlTGlzdEh0bWw7CiAgICB2YXIgb3JpZ2luVGl0aWxlID0gZG9jdW1lbnQudGl0bGU7CiAgICB2YXIgaXNIdHRwcz1sb2NhdGlvbi5wcm90b2NvbD09Imh0dHBzOiI7CiAgICB2YXIgaGVhZD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdOwogICAgaWYoaXNIdHRwcyl7CiAgICAgICAgdmFyIHJlZk1ldGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdtZXRhJyk7CiAgICAgICAgcmVmTWV0YS5uYW1lID0gJ3JlZmVycmVyJzsKICAgICAgICByZWZNZXRhLmNvbnRlbnQgPSAnYWx3YXlzJzsKICAgICAgICBoZWFkLmFwcGVuZENoaWxkKHJlZk1ldGEpOwogICAgfWVsc2V7CiAgICAgICAgaWYoZG9jdW1lbnQudGl0bGU9PSJTZXJ2aWNlIFVuYXZhaWxhYmxlIC0gQ29ubmVjdGlvbiBFcnJvciIpewogICAgICAgICAgICBsb2NhdGlvbi5ocmVmPWxvY2F0aW9uLmhyZWYucmVwbGFjZSgvXmh0dHA6LywiaHR0cHM6Iik7CiAgICAgICAgfQogICAgfQogICAgZm9yKHZhciBzaXRlIG9mIGNvbmZpZy5zaXRlcyl7CiAgICAgICAgaWYoc2l0ZS5yZWdleC50ZXN0KGxvY2F0aW9uLmhvc3RuYW1lKSl7CiAgICAgICAgICAgIGN1clNpdGU9c2l0ZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgfQogICAgdmFyIGNvbnRlbnRBcmVhPWN1clNpdGUmJmN1clNpdGUuY29udGVudEFyZWE/Y3VyU2l0ZS5jb250ZW50QXJlYTonLmVudHJ5LWNvbnRlbnQnLGNvbW1BcmVhPWN1clNpdGUmJmN1clNpdGUuY29tbUFyZWE/Y3VyU2l0ZS5jb21tQXJlYToiY29tbWVudC1jb250ZW50IixhcnRpY2xlU2VsPWN1clNpdGUmJmN1clNpdGUuYXJ0aWNsZVNlbD9jdXJTaXRlLmFydGljbGVTZWw6ImFydGljbGUiOwoKICAgIGlmKC8oc2xlYXp8Z3JlYXMpeWZvcmtcLm9yZy8udGVzdChsb2NhdGlvbi5ob3N0bmFtZSkpewogICAgICAgIGlmKC9zY3JpcHRzXC8yMzMxNi8udGVzdChsb2NhdGlvbi5ocmVmKSl7CiAgICAgICAgICAgIGxldCBwb3M9ZWxlbWVudFBvc2l0aW9uKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNhZGRpdGlvbmFsLWluZm8+ZGl2LnNjcmlwdC1hdXRob3ItZGVzY3JpcHRpb24+aDIiKSkueTsKICAgICAgICAgICAgc2Nyb2xsVG8oMCxwb3MpOwogICAgICAgIH1lbHNlIGlmKC9kaXNjdXNzaW9uLy50ZXN0KGxvY2F0aW9uLmhyZWYpKXsKICAgICAgICAgICAgdmFyIGdvb2RCdG49ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI0Zvcm1fUmF0aW5nMyIpOwogICAgICAgICAgICB2YXIgb2tCdG49ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI0Zvcm1fUmF0aW5nMiIpOwogICAgICAgICAgICB2YXIgYmFkQnRuPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNGb3JtX1JhdGluZzEiKTsKICAgICAgICAgICAgaWYoZ29vZEJ0bil7CiAgICAgICAgICAgICAgICB2YXIgc2NyaXB0SUQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaW5wdXRbbmFtZT1TY3JpcHRJRF0iKTsKICAgICAgICAgICAgICAgIHZhciBhYm91dD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjQ29udGVudD5kaXYuTWVzc2FnZUxpc3QuRGlzY3Vzc2lvbj5zcGFuPmEiKTsKICAgICAgICAgICAgICAgIGlmKChzY3JpcHRJRCAmJiBzY3JpcHRJRC52YWx1ZT09IjIzMzE2IikgfHwgKGFib3V0ICYmIGFib3V0LmdldEF0dHJpYnV0ZSgiaHJlZiIpPT0iL3NjcmlwdHMvMjMzMTYiKSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGlvbkJ0bj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJpbnB1dC5QcmltYXJ5Iil8fGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNGb3JtX1NhdmUiKTsKICAgICAgICAgICAgICAgICAgICBhY3Rpb25CdG4ub25jbGljaz1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlzY3Vzc1RpdGxlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNGb3JtX05hbWUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpc2N1c3NCb2R5PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNGb3JtX0JvZHkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZ29vZEJ0bi5jaGVja2VkPT1mYWxzZSAmJiAoKGRpc2N1c3NUaXRsZSAmJiAv5aOw6Z+zfOivremfsy8udGVzdChkaXNjdXNzVGl0bGUudmFsdWUpKSB8fCAoZGlzY3Vzc0JvZHkgJiYgL+WjsOmfs3zor63pn7MvLnRlc3QoZGlzY3Vzc0JvZHkudmFsdWUpKSkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYod2luZG93LmNvbmZpcm0oIlx1OGY5M1x1NTE2NVx1MDA2OFx1MDA2MVx1MDA3YVx1MDA3NVx1MDA2Ylx1MDA2MVx1MDA3M1x1MDA2OFx1MDA2OVx1MDA2OVx1NWMzMVx1ODBmZFx1NTIwN1x1NjM2Mlx1OGJlZFx1OTdmM1x1ZmYwY1x1OGJlNlx1ODljMVx1OGJmNFx1NjYwZVx1OTg3NVx1ZmYwY1x1NjYyZlx1NTQyNlx1N2VkOVx1NGUyYVx1NTk3ZFx1OGJjNFx1ZmYxZiIpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb29kQnRuLmNoZWNrZWQ9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgaWYoZG9jdW1lbnQuYm9keS5pbm5lckhUTUwuaW5kZXhPZigiXHU3NDA5XHU3NDgzXHU3OTVlXHU3OTNlIikhPS0xKXsKICAgICAgICAgICAgICAgIHZhciBpbnN0YWxsTGluaz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhLmluc3RhbGwtbGluayIpOwogICAgICAgICAgICAgICAgaWYoaW5zdGFsbExpbmspewogICAgICAgICAgICAgICAgICAgIGluc3RhbGxMaW5rLm9uY2xpY2s9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYod2luZG93LmNvbmZpcm0oJ1x1OGJlNVx1ODExYVx1NjcyY1x1NTNlZlx1ODBmZFx1NGUwZVx1MDAyMFx1MjYwNVx1NzQwOVx1Nzk1ZVx1OGY2Y1x1MjYwNVx1MDAyMFx1NGUwZFx1NTE3Y1x1NWJiOVx1NTRlNlx1ZmYwY1x1NjYyZlx1NTQyNlx1NTNkNlx1NmQ4OFx1NWI4OVx1ODhjNVx1ZmYxZicpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuOwogICAgfWVsc2UgaWYobG9jYXRpb24uaG9zdG5hbWU9PSJwYW4uYmFpZHUuY29tIil7CiAgICAgICAgaWYobG9jYXRpb24uaGFzaC5zbGljZSgxKSl7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNhY2Nlc3NDb2RlIikudmFsdWU9ZGVjb2RlVVJJKGxvY2F0aW9uLmhhc2guc2xpY2UoMSkuc3BsaXQoIj8iKVswXSk7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdWJtaXRCdG4nKS5jbGljaygpOwogICAgICAgIH0KICAgICAgICByZXR1cm47CiAgICB9ZWxzZSBpZihjb25maWcuZGlzYWJsZVNpdGVzLnRlc3QobG9jYXRpb24uaHJlZikpewogICAgICAgIHJldHVybjsKICAgIH1lbHNlIGlmKGN1clNpdGUpewogICAgICAgIGlmKGN1clNpdGUucnVuKWN1clNpdGUucnVuKCk7CiAgICB9CgogICAgaWYoY3VyU2l0ZSAmJiBjdXJTaXRlLmRvd25sb2FkVXJsICYmIGN1clNpdGUuZG93bmxvYWRVcmwudGVzdChsb2NhdGlvbi5ocmVmKSl7CiAgICAgICAgaWYoIWN1clNpdGUuZ2V0RG93blBhc3MpewogICAgICAgICAgICBjdXJTaXRlLmdldERvd25QYXNzPWZ1bmN0aW9uKHRhcmdldCl7CiAgICAgICAgICAgICAgICB2YXIgcGFzcz10YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignaW5wdXQuZm9ybS1jb250cm9sJyk7CiAgICAgICAgICAgICAgICBpZihwYXNzKXRhcmdldC5ocmVmPXRhcmdldC5ocmVmLnNwbGl0KCIjIilbMF0rJyMnK3Bhc3MudmFsdWU7CiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIHQ9d2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tc3VjY2VzcycpKXsKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodCk7CiAgICAgICAgICAgICAgICBwcm9jZXNzKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LDEwMDApOwogICAgfWVsc2V7CiAgICAgICAgcHJvY2VzcygpOwogICAgfQoKICAgIHZhciBoaWRlTm9kZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpOwogICAgaGlkZU5vZGUuaWQ9ImhpZGVOb2RlIjsKICAgIGhpZGVOb2RlLmlubmVySFRNTD0iaW1ne2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9IjsKICAgIGlmKEdNX2dldFZhbHVlKCJoYWNnR29kZVR1cm5IaWRlSW1nIikpewogICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoaGlkZU5vZGUpOwogICAgfQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZihjdXJBcnRpY2xlICYmIGUua2V5Q29kZSAhPSAxNyljdXJBcnRpY2xlLmNsYXNzTGlzdC5yZW1vdmUoIm9EX3NlbCIpOwogICAgICAgIGlmKGUua2V5Q29kZSA9PSAxMTkpIHsKICAgICAgICAgICAgaWYoZS5hbHRLZXkpewogICAgICAgICAgICAgICAgcm9ja2V0Q29udGVudC5zdHlsZS5kaXNwbGF5PSJibG9jayI7CiAgICAgICAgICAgICAgICB2YXIgcm9ja2V0TGlua3M9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2I3JvY2tldExpbmtzIik7CiAgICAgICAgICAgICAgICBpZighc2l0ZUxpc3RIdG1sKXsKICAgICAgICAgICAgICAgICAgICBzaXRlTGlzdEh0bWw9IiI7CiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxjb25maWcuc2l0ZXMubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaXRlPWNvbmZpZy5zaXRlc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgc2l0ZUxpc3RIdG1sKz0iPHNwYW4gc3R5bGU9J2ZvbnQtd2VpZ2h0OmJvbGQ7Y29sb3I6cmVkOyc+IisoaSsxKSsiOlx0PC9zcGFuPiIrIjxhIGhyZWY9IitzaXRlLnVybCsiPiIrc2l0ZS5uYW1lKyI8L2E+PGJyLz4iOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJvY2tldExpbmtzLmlubmVySFRNTD1zaXRlTGlzdEh0bWw7CiAgICAgICAgICAgIH1lbHNlIGlmKGUuY3RybEtleSl7CiAgICAgICAgICAgICAgICBsYXVuY2hSb2NrZXQoKTsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICB2YXIgaT0wOwogICAgICAgICAgICAgICAgaWYoY3VyU2l0ZSlpPWNvbmZpZy5zaXRlcy5pbmRleE9mKGN1clNpdGUpOwogICAgICAgICAgICAgICAgaWYoZS5zaGlmdEtleSkgaT1pPT09MD8oY29uZmlnLnNpdGVzLmxlbmd0aC0xKTooaS0xKTsKICAgICAgICAgICAgICAgIGVsc2UgaT1pPT0oY29uZmlnLnNpdGVzLmxlbmd0aC0xKT8wOihpKzEpOwogICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IGNvbmZpZy5zaXRlc1tpXS51cmw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH1lbHNlewogICAgICAgICAgICBpZihlLmtleUNvZGU+MzYgJiYgZS5rZXlDb2RlPDQxICYmICFlLnNoaWZ0S2V5ICYmICFlLmFsdEtleSl7CiAgICAgICAgICAgICAgICBpZigvSU5QVVR8VEVYVEFSRUEvLnRlc3QoZG9jdW1lbnQuYWN0aXZlRWxlbWVudC50YWdOYW1lKSlyZXR1cm47CiAgICAgICAgICAgICAgICB2YXIgYXJ0aWNsZSwgaXNGaW5kLCBpbmRleCwgYXJ0aWNsZXM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhcnRpY2xlU2VsKTsKICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCAgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgIHx8IDA7CiAgICAgICAgICAgICAgICBpZihlLmtleUNvZGU9PTM5KXsKICAgICAgICAgICAgICAgICAgICBpZihlLmN0cmxLZXkpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dD1nZXRQYWdlKCkubmV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYobmV4dCluZXh0LmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzRmluZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBpZihjdXJBcnRpY2xlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PUFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYXJ0aWNsZXMsIGN1ckFydGljbGUpKzE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpbmRleDxhcnRpY2xlcy5sZW5ndGgpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbEFydGljbGUoYXJ0aWNsZXNbaW5kZXhdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0ZpbmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wLGo9YXJ0aWNsZXMubGVuZ3RoO2k8ajtpKyspewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFydGljbGU9YXJ0aWNsZXNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbWVudFBvc2l0aW9uKGFydGljbGUpLnk+c2Nyb2xsVG9wKzUwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQXJ0aWNsZShhcnRpY2xlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNGaW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFpc0ZpbmQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyQXJ0aWNsZT1udWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG8oMCxkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9ZWxzZSBpZihlLmtleUNvZGU9PTM3KXsKICAgICAgICAgICAgICAgICAgICBpZihlLmN0cmxLZXkpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJlPWdldFBhZ2UoKS5wcmU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHByZSlwcmUuY2xpY2soKTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgaXNGaW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGN1ckFydGljbGUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg9QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChhcnRpY2xlcywgY3VyQXJ0aWNsZSktMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGluZGV4Pj0wKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxBcnRpY2xlKGFydGljbGVzW2luZGV4XSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNGaW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MCxqPWFydGljbGVzLmxlbmd0aDtpPGo7aSsrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnRpY2xlPWFydGljbGVzW2otaS0xXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbGVtZW50UG9zaXRpb24oYXJ0aWNsZSkueTxzY3JvbGxUb3AtNTApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxBcnRpY2xlKGFydGljbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0ZpbmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWlzRmluZCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJBcnRpY2xlPW51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUbygwLDApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfWVsc2UgaWYoZS5jdHJsS2V5ICYmIGUua2V5Q29kZT09MzgpewogICAgICAgICAgICAgICAgICAgIGhpc3RvcnkuZ28oLTEpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH1lbHNlIGlmKGUuY3RybEtleSAmJiBlLmtleUNvZGU9PTQwKXsKICAgICAgICAgICAgICAgICAgICBpZihjdXJBcnRpY2xlKXsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFMaW5rPWN1ckFydGljbGUucXVlcnlTZWxlY3RvcigiYTpub3QoLmxhYmVsKSIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihhTGluayl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhTGluay5jbGljaygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihjdXJBcnRpY2xlLnBhcmVudE5vZGUgJiYgY3VyQXJ0aWNsZS5wYXJlbnROb2RlLnRhZ05hbWU9PSJBIil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJBcnRpY2xlLnBhcmVudE5vZGUuY2xpY2soKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlzOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MCxqPWFydGljbGVzLmxlbmd0aDtpPGo7aSsrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFydGljbGU9YXJ0aWNsZXNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXM9ZWxlbWVudFBvc2l0aW9uKGFydGljbGUpLnkgLSBzY3JvbGxUb3A7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkaXMgPiAtNTAgJiYgZGlzIDwgNTApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhTGluaz1hcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoImE6bm90KC5sYWJlbCkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhTGluayl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFMaW5rLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihhcnRpY2xlLnBhcmVudE5vZGUgJiYgYXJ0aWNsZS5wYXJlbnROb2RlLnRhZ05hbWU9PSJBIil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFydGljbGUucGFyZW50Tm9kZS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ZWxzZSBpZihlLmtleUNvZGUgIT0gMTcpewogICAgICAgICAgICAgICAgaWYoZS5jdHJsS2V5ICYmIGUua2V5Q29kZT09OTApewogICAgICAgICAgICAgICAgICAgIGlmKGhpZGVOb2RlLnBhcmVudE5vZGUpewogICAgICAgICAgICAgICAgICAgICAgICBoZWFkLnJlbW92ZUNoaWxkKGhpZGVOb2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoImhhY2dHb2RlVHVybkhpZGVJbWciLGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZC5hcHBlbmRDaGlsZChoaWRlTm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJoYWNnR29kZVR1cm5IaWRlSW1nIix0cnVlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjdXJBcnRpY2xlPW51bGw7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKICAgIHZhciBtb3VzZXdoZWVsRXZlbnQ9bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2ZpcmVmb3gnKT09LTE/Im1vdXNld2hlZWwiOiJET01Nb3VzZVNjcm9sbCI7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKG1vdXNld2hlZWxFdmVudCxmdW5jdGlvbihlKXsKICAgICAgICBpZihjdXJBcnRpY2xlKWN1ckFydGljbGUuY2xhc3NMaXN0LnJlbW92ZSgib0Rfc2VsIik7CiAgICB9KTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNvcHkiLCBmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIGNvcHlEYXRhPWRvY3VtZW50LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCk7CiAgICAgICAgaWYoY29weURhdGEgJiYgb0RfdGV4dCl7CiAgICAgICAgICAgIG9EX3RleHQudmFsdWU9Y29weURhdGE7CiAgICAgICAgfQogICAgfSk7CgogICAgaGVhZC5hcHBlbmRDaGlsZChub2QpOwogICAgdmFyIHJvY2tldENvbnRlbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHJvY2tldENvbnRlbnQpOwogICAgcm9ja2V0Q29udGVudC5vdXRlckhUTUw9cm9ja2V0U3RyOwogICAgcm9ja2V0Q29udGVudD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcm9ja2V0Q29udGVudCIpOwogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3JvY2tldFF1aXQiKS5vbmNsaWNrPWZ1bmN0aW9uICgpewogICAgICAgIHJvY2tldENvbnRlbnQuc3R5bGUuZGlzcGxheT0ibm9uZSI7CiAgICB9OwogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3JvY2tldENvbnRlbnQ+ZGl2Iikub25jbGljaz1mdW5jdGlvbiAoKXsKICAgICAgICByb2NrZXRDb250ZW50LnN0eWxlLmRpc3BsYXk9Im5vbmUiOwogICAgfTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYoZS5rZXlDb2RlID09IDI3KSB7CiAgICAgICAgICAgIHJvY2tldENvbnRlbnQuc3R5bGUuZGlzcGxheT0ibm9uZSI7CiAgICAgICAgfQogICAgfSk7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI29EX2JveCIpLmxlbmd0aCA+IDEpewogICAgICAgICAgICBhbGVydCgiXHU2OGMwXHU2ZDRiXHU1MjMwXHUwMDQ5XHUwMDQ0XHU1MWIyXHU3YTgxXHVmZjBjXHU3NDA5XHU3OTVlXHU4ZjZjXHU4MTFhXHU2NzJjXHU1YzA2XHU2NWUwXHU2Y2Q1XHU2YjYzXHU1ZTM4XHU1ZGU1XHU0ZjVjXHVmZjAxXHU4YmY3XHU2OGMwXHU2N2U1XHU2NjJmXHU1NDI2XHU1YjU4XHU1NzI4XHU5MWNkXHU1OTBkXHU2MjE2XHU1NDBjXHU3YzdiXHU4MTFhXHU2NzJjIik7CiAgICAgICAgfQogICAgfSw1MDApOwogICAgdmFyIG9EX2JveCxvRF90ZXh0LG9EX2J1dHRvbjsKICAgIGlmKCghY3VyU2l0ZSB8fCAhY3VyU2l0ZS5oaWRlT2QpICYmICFmcmFtZUVsZW1lbnQpewogICAgICAgIG9EX2JveD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICBvRF9ib3guaWQ9Im9EX2JveCI7CiAgICAgICAgb0RfYm94LmNsYXNzTmFtZSA9ICJvRF9ib3giOwogICAgICAgIG9EX2JveC5vbm1vdXNlb3ZlciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgb0RfbGluay5zdHlsZS52aXNpYmlsaXR5ID0gInZpc2libGUiOwogICAgICAgICAgICBvRF9saW5rMi5zdHlsZS52aXNpYmlsaXR5ID0gInZpc2libGUiOwogICAgICAgICAgICByb2NrZXRCdG4uc3R5bGUudmlzaWJpbGl0eSA9ICJ2aXNpYmxlIjsKICAgICAgICB9OwogICAgICAgIG9EX2JveC5vbm1vdXNlb3V0ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICBvRF9saW5rLnN0eWxlLnZpc2liaWxpdHkgPSAiaGlkZGVuIjsKICAgICAgICAgICAgb0RfbGluazIuc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOwogICAgICAgICAgICByb2NrZXRCdG4uc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOwogICAgICAgIH07CiAgICAgICAgb0RfdGV4dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwogICAgICAgIG9EX3RleHQudHlwZT0idGV4dCI7CiAgICAgICAgb0RfdGV4dC5zdHlsZS5jc3NUZXh0PSJ3aWR0aDoyNDhweDtoZWlnaHQ6MzNweDtwb3NpdGlvbjpyZWxhdGl2ZTttYXJnaW4tdG9wOjBweDtwYWRkaW5nOjBweDtib3gtc2l6aW5nOmJvcmRlci1ib3g7ei1pbmRleDowIjsKICAgICAgICBvRF90ZXh0LnBsYWNlaG9sZGVyPSLovpPlhaVoYXNo5YC844CB572R55uY5Zyw5Z2A5oiWQmFzZTY05a+G5paHIjsKICAgICAgICBvRF90ZXh0LnRpdGxlPSflsIboh6rliqjmt7vliqAibWFnbmV0Oj94dD11cm46YnRpaDoi5bm25Y676Zmk6Z2e5rOV5a2X56ymJzsKICAgICAgICBvRF9idXR0b249ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CiAgICAgICAgb0RfYnV0dG9uLnR5cGU9ImJ1dHRvbiI7CiAgICAgICAgb0RfYnV0dG9uLnRleHRDb250ZW50PSLlvIDovaYiOwogICAgICAgIG9EX2J1dHRvbi5zdHlsZS5jc3NUZXh0PSJwYWRkaW5nOjRweCAwO3Bvc2l0aW9uOiBhYnNvbHV0ZTt0b3A6LTFweDtyaWdodDowcHg7d2lkdGg6NDBweDtoZWlnaHQ6MzVweCI7CiAgICAgICAgb0RfYnV0dG9uLm9uY2xpY2s9ZnVuY3Rpb24gKCl7CiAgICAgICAgICAgIG9EX2xpbmsudGV4dENvbnRlbnQ9b0RfbGluazIudGV4dENvbnRlbnQ9b0RfbGluazMudGV4dENvbnRlbnQ9IiI7CiAgICAgICAgICAgIHZhciBvRF9oYXNoPW9EX3RleHQudmFsdWU7CiAgICAgICAgICAgIGlmKG9EX2hhc2g9PT0iIil7CiAgICAgICAgICAgICAgICBhbGVydCgi6K+36L6T5YWlaGFzaOWAvOOAgee9keebmOaIlkJhc2U2NOWvhuaWhyIpOwogICAgICAgICAgICB9ZWxzZSBpZigvXGIxWzAtOWEtel17Niw3fShcYnwkKS9pLnRlc3Qob0RfaGFzaCkpewogICAgICAgICAgICAgICAgdmFyIHBhbk1hdGNoPW9EX2hhc2gubWF0Y2goL1xiMVswLTlhLXpdezYsN30vaSk7CiAgICAgICAgICAgICAgICB2YXIgZWNvZGU9b0RfaGFzaC50cmltKCksdXJsPSJodHRwczovL3Bhbi5iYWlkdS5jb20vcy8iK3Bhbk1hdGNoOwogICAgICAgICAgICAgICAgdmFyIHNob3J0TWF0Y2g9L1xiMVswLTlhLXpdezYsN31ccyooWzAtOWEteiFdezR9fFteXHMs77yM77yaOl17Miw0fSkoXGJ8JCkvaS5leGVjKGVjb2RlKTsKICAgICAgICAgICAgICAgIGlmKHNob3J0TWF0Y2gpewogICAgICAgICAgICAgICAgICAgIHVybCs9IiMiK3Nob3J0TWF0Y2hbMV07CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBlY29kZT1zaW1wbGVSdWxlLnRlc3QoZWNvZGUpP2Vjb2RlLm1hdGNoKHNpbXBsZVJ1bGUpWzFdOmNvZGVSdWxlLnRlc3QoZWNvZGUpP2Vjb2RlLm1hdGNoKGNvZGVSdWxlKVsxXToiIjsKICAgICAgICAgICAgICAgICAgICBpZihlY29kZSl1cmwrPSIjIitlY29kZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKHVybCk7CiAgICAgICAgICAgIH1lbHNlIGlmKC9eXHMqKGh0dHBzfGZ0cCk/OlwvXC8vLnRlc3Qob0RfaGFzaCkpewogICAgICAgICAgICAgICAgdmFyIHVybD1vRF9oYXNoLnJlcGxhY2UoL1teYS16MC05OlwvJVw/JlwuX1wtXCtcKl0vZ2ksIiIpOwogICAgICAgICAgICAgICAgd2luZG93Lm9wZW4odXJsKTsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBvRF9oYXNoPW9EX2hhc2gucmVwbGFjZSgvKFxbLipcXSl8W1xXX10vZywiIik7CiAgICAgICAgICAgICAgICBpZighcmVnT2JqLmJ0aWgudGVzdChvRF9oYXNoKSl7CiAgICAgICAgICAgICAgICAgICAgaWYoL15bXGRhLXpcL1wrXD1dKyQvaS50ZXN0KG9EX2hhc2gpKXsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgR01fc2V0Q2xpcGJvYXJkKENyeXB0b0pTLmVuYy5CYXNlNjQucGFyc2Uob0RfaGFzaCkudG9TdHJpbmcoQ3J5cHRvSlMuZW5jLlV0ZjgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJCYXNlNjTop6Plr4bnu5Pmnpzlt7LlpI3liLYiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWNhdGNoKGUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoZSsiIOagvOW8j+mUmeivryIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfWVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoImhhc2jlgLzmoLzlvI/plJnor68iKTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIG9EX2xpbmsuaHJlZj0ibWFnbmV0Oj94dD11cm46YnRpaDoiK29EX2hhc2g7CiAgICAgICAgICAgICAgICAgICAgb0RfbGluay50ZXh0Q29udGVudD0i56OB6ZO+IjsKICAgICAgICAgICAgICAgICAgICBvRF9saW5rMi5ocmVmPSJodHRwOi8vd3d3LnRvcnJlbnQub3JnLmNuL0hvbWUvdG9ycmVudC9kb3dubG9hZC5odG1sP2hhc2g9IitvRF9oYXNoOwogICAgICAgICAgICAgICAgICAgIG9EX2xpbmsyLnRleHRDb250ZW50PSLnp43lrZAiOwogICAgICAgICAgICAgICAgICAgIG9EX2xpbmsyLnN0eWxlLmNzc1RleHQ9Im1hcmdpbi1sZWZ0OjIwcHgiOwogICAgICAgICAgICAgICAgICAgIG9EX2xpbmszLmhyZWY9Imh0dHBzOi8vYnRzby5wdy9tYWduZXQvZGV0YWlsL2hhc2gvIitvRF9oYXNoOwogICAgICAgICAgICAgICAgICAgIG9EX2xpbmszLnRleHRDb250ZW50PSLor6bmg4UiOwogICAgICAgICAgICAgICAgICAgIG9EX2xpbmszLnN0eWxlLmNzc1RleHQ9Im1hcmdpbi1sZWZ0OjIwcHgiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB2YXIgb0RfbGluaz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgdmFyIG9EX2xpbmsyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICB2YXIgb0RfbGluazM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgIG9EX2xpbmsyLnRhcmdldD1vRF9saW5rMy50YXJnZXQ9Il9ibGFuayI7CiAgICAgICAgb0RfYm94LmFwcGVuZENoaWxkKG9EX3RleHQpOwogICAgICAgIG9EX2JveC5hcHBlbmRDaGlsZChvRF9idXR0b24pOwogICAgICAgIG9EX2JveC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdicicpKTsKICAgICAgICBvRF9ib3guYXBwZW5kQ2hpbGQob0RfbGluayk7CiAgICAgICAgb0RfYm94LmFwcGVuZENoaWxkKG9EX2xpbmsyKTsKICAgICAgICBvRF9ib3guYXBwZW5kQ2hpbGQob0RfbGluazMpOwogICAgICAgIHZhciByb2NrZXRCdG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CiAgICAgICAgcm9ja2V0QnRuLmlkPSJyb2NrZXRCdG4iOwogICAgICAgIHJvY2tldEJ0bi50eXBlPSJidXR0b24iOwogICAgICAgIHJvY2tldEJ0bi50ZXh0Q29udGVudD0iXHU3MDZiXHU3YmFkIjsKICAgICAgICByb2NrZXRCdG4uc3R5bGUuY3NzVGV4dD0icGFkZGluZzo0cHggMDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTM2cHg7cmlnaHQ6MHB4O3dpZHRoOjQwcHg7aGVpZ2h0OjM1cHg7dmlzaWJpbGl0eTpoaWRkZW4iOwogICAgICAgIHZhciBwcmVJbWdEYXRhPSJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUE4QUFBQVBDQU1BQUFBTUNHVjRBQUFBZ1ZCTVZFVUFBQURES2tQUE4xSExNMDIrSXozUFBGYlVRRnJESzBYY1IyTFRPbFhVTzFiSkwwckdMa2pITjFEWFNtUFJSbC9ETFVmSE0wek9PVlBhU0dQQ0swVElNVXJkUm1ISU1FbS9KVC9ESzBiSExraTdJVHZkUldISExVZStJenpZUFZtK0pEN09SMTdLUVZuUlRHVEpPMVRYVkd2UlNtTEtQbGZGTkUzTFAxZkhOay9Gc0lmNUFBQUFJWFJTVGxNQWRRd0d5c1c0bDM1aFJEc3Mvdmo0NXVYZTJNQ3pvWjZUaklCTFNrUXhLeGFFOWR4bEFBQUFaMGxFUVZRSTE1MkxWdzZBSUJBRkFYdnZ2U1BZN245QWNUVUdmNTJQbmN4TEZ2MmsvUlRKVFRtSGhNdHQrWnpyTm5uSzFwWlpzQVM2cFloMDR1bEZ1d2FTN1pUU2xhM2lGdkNCUGNZTXQ2c2pkcmd3T09HR2hSUmpxeEF3cGhoY3F1aWh2d1V0MFp5MUhnZERINENORVFBQUFBQkpSVTVFcmtKZ2dnPT0iOwogICAgICAgIHJvY2tldEJ0bi5vbmNsaWNrPWZ1bmN0aW9uICgpewogICAgICAgICAgICBsYXVuY2hSb2NrZXQoKTsKICAgICAgICB9OwogICAgICAgIG9EX2JveC5hcHBlbmRDaGlsZChyb2NrZXRCdG4pOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob0RfYm94KTsKICAgIH0KCiAgICBmdW5jdGlvbiBsYXVuY2hSb2NrZXQoKXsKICAgICAgICBpZighcm9ja2V0QnRuKXJldHVybjsKICAgICAgICBpZihjdXJTaXRlLnByZVJvY2tldCl7CiAgICAgICAgICAgIGN1clNpdGUucHJlUm9ja2V0KCk7CiAgICAgICAgfQogICAgICAgIHJvY2tldENvbnRlbnQuc3R5bGUuZGlzcGxheT0iYmxvY2siOwogICAgICAgIHZhciBsaW5rcz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJhIik7CiAgICAgICAgdmFyIHJvY2tldExpbmtzPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImRpdiNyb2NrZXRMaW5rcyIpOwogICAgICAgIHJvY2tldExpbmtzLmlubmVySFRNTD0iIjsKICAgICAgICB2YXIgaT0wOwogICAgICAgIGZvcihsZXQgaj0wO2o8bGlua3MubGVuZ3RoO2orKyl7CiAgICAgICAgICAgIGxldCBsaW5rPWxpbmtzW2pdOwogICAgICAgICAgICBpZihjb25maWcucm9ja2V0UmVnLnRlc3QobGluay5ocmVmKSYmbGluay5jbGFzc05hbWUuaW5kZXhPZigid2h4LWEiKT09LTEpewogICAgICAgICAgICAgICAgaWYocm9ja2V0TGlua3MuaW5uZXJIVE1MLmluZGV4T2YobGluay5vdXRlckhUTUwpIT0tMSljb250aW51ZTsKICAgICAgICAgICAgICAgIHJvY2tldExpbmtzLmlubmVySFRNTCs9IjxhIGlkPSdyb2NrZXRCYWNrJyBzdHlsZT0nZm9udC13ZWlnaHQ6Ym9sZDtjb2xvcjpyZWQ7JyBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCknPiIrKCsraSkrIjxpbWcgc3JjPSciK3ByZUltZ0RhdGErIic+PC9hPjogIjsKICAgICAgICAgICAgICAgIHJvY2tldExpbmtzLmFwcGVuZENoaWxkKGxpbmsuY2xvbmVOb2RlKHRydWUpKTsKICAgICAgICAgICAgICAgIHJvY2tldExpbmtzLmlubmVySFRNTCs9Ijxici8+IjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB2YXIgYmFja3M9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiZGl2I3JvY2tldExpbmtzPiNyb2NrZXRCYWNrIik7CiAgICAgICAgZm9yKGk9MDtpPGJhY2tzLmxlbmd0aDtpKyspewogICAgICAgICAgICBsZXQgYmFjaz1iYWNrc1tpXTsKICAgICAgICAgICAgYmFjay5vbmNsaWNrPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIltocmVmPSciK2JhY2submV4dFNpYmxpbmcubmV4dFNpYmxpbmcuZ2V0QXR0cmlidXRlKCJocmVmIikrIiddIik7CiAgICAgICAgICAgICAgICBsZXQgcG9zPWVsZW1lbnRQb3NpdGlvbih0YXJnZXQpLnk7CiAgICAgICAgICAgICAgICBpZihjdXJTaXRlICYmIGN1clNpdGUub2Zmc2V0KXBvcy09Y3VyU2l0ZS5vZmZzZXQ7CiAgICAgICAgICAgICAgICBzY3JvbGxUb0NvbnRyb2wocG9zKTsKICAgICAgICAgICAgICAgIHJvY2tldENvbnRlbnQuc3R5bGUuZGlzcGxheT0ibm9uZSI7CiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGlmKHJvY2tldExpbmtzLmlubmVySFRNTD09PSIiKXsKICAgICAgICAgICAgcm9ja2V0TGlua3MuaW5uZXJIVE1MPSJObyBsaW5rcyBmb3VuZCEiOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBwcm9jZXNzKCl7CiAgICAgICAgdmFyIGRvd25sb2FkQnRuOwogICAgICAgIGlmKGlzSHR0cHMgJiYgKGRvd25sb2FkQnRuPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImRpdiNwb3N0LXRvb2xiYXItZG93bmxvYWQtY291bnQtY29udGFpbmVyIikpKXsKICAgICAgICAgICAgdmFyIHQ9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGlmKGRvd25sb2FkQnRuLmlubmVySFRNTD09IjwhLS0gcmVhY3QtZW1wdHk6IDEgLS0+Iil7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRvd25sb2FkQ29udGVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRDb250ZW50LmhyZWY9d2luZG93LmxvY2F0aW9uLnByb3RvY29sKyIvLyIrd2luZG93LmxvY2F0aW9uLmhvc3QrIi9kb3dubG9hZD9pZD0iK3dpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgiLyIpLnBvcCgpOwogICAgICAgICAgICAgICAgICAgIGRvd25sb2FkQ29udGVudC5pbm5lckhUTUwrPSc8ZGl2IGNsYXNzPSJ0eCI+PHNwYW4+PGkgY2xhc3M9ImZhIGZhLWNsb3VkLWRvd25sb2FkIj48L2k+PC9zcGFuPlx1NGUwYlx1OGY3ZDwvZGl2Pic7CiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRCdG4uYXBwZW5kQ2hpbGQoZG93bmxvYWRDb250ZW50KTsKICAgICAgICAgICAgICAgIH1lbHNlIGlmKGRvd25sb2FkQnRuLmlubmVySFRNTD09PSIiKXsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHQsMTAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgc2V0VGltZW91dCh0LDEwMCk7CiAgICAgICAgfQogICAgICAgIHZhciBjb250ZW50PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGVudEFyZWEpOwogICAgICAgIGlmKGNvbnRlbnQpewogICAgICAgICAgICBwcm9jZXNzT2JqKGNvbnRlbnQpOwogICAgICAgIH0KICAgICAgICB2YXIgbGluaywgaW1ncywgaSwgazsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKSB7CiAgICAgICAgICAgICAgICBsaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYScpOwogICAgICAgICAgICAgICAgaW1ncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhJyk7CiAgICAgICAgICAgICAgICBpbWdzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2ltZycpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAoaSA9IDAsIGsgPSBsaW5rLmxlbmd0aDsgaSA8IGs7IGkrKykgewogICAgICAgICAgICAgICAgbGV0IHRhcmdldD1saW5rW2ldOwogICAgICAgICAgICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgaWYoL2JhaWR1LmNvbS9pLnRlc3QodGFyZ2V0LmhyZWYpJiYhLyg/OmV5dW58dGllYmEpXC5iYWlkdVwuY29tL2kudGVzdCh0YXJnZXQuaHJlZikmJiEvIy9pLnRlc3QodGFyZ2V0LmhyZWYpKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoL1wvc3RvcmFnZS1kb3dubG9hZC8udGVzdChsb2NhdGlvbi5ocmVmKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFzcz10YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0LnB3ZCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocGFzcyYmcGFzcy5pZC5pbmRleE9mKCJkb3dubG9hZC1wd2QiKSE9LTEpdGFyZ2V0LmhyZWY9dGFyZ2V0LmhyZWYuc3BsaXQoIiMiKVswXSsnIycrcGFzcy52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKGN1clNpdGUuZG93bmxvYWRVcmwgJiYgY3VyU2l0ZS5kb3dubG9hZFVybC50ZXN0KGxvY2F0aW9uLmhyZWYpICYmIGN1clNpdGUuZ2V0RG93blBhc3MpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyU2l0ZS5nZXREb3duUGFzcyh0YXJnZXQpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoY29kZVJ1bGUudGVzdCh0YXJnZXQudGV4dENvbnRlbnQpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5ocmVmKz0nIycrZXh0Q29kZSh0YXJnZXQpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoL15ccypbYS16XGRdezR9XHMqJC9pLnRlc3QodGFyZ2V0LnRleHRDb250ZW50KSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaHJlZis9JyMnK3RhcmdldC50ZXh0Q29udGVudC50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZih0YXJnZXQubmV4dFNpYmxpbmcmJmNvZGVSdWxlLnRlc3QodGFyZ2V0Lm5leHRTaWJsaW5nLnRleHRDb250ZW50KSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaHJlZis9LyMvaS50ZXN0KHRhcmdldC5ocmVmKT9leHRDb2RlKHRhcmdldC5uZXh0U2libGluZyk6KCcjJytleHRDb2RlKHRhcmdldC5uZXh0U2libGluZykpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYodGFyZ2V0Lm5leHRTaWJsaW5nJiYvXlxzKlthLXpcZF17NH1ccyokLy50ZXN0KHRhcmdldC5uZXh0U2libGluZy50ZXh0Q29udGVudCkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmhyZWYrPScjJyt0YXJnZXQubmV4dFNpYmxpbmcudGV4dENvbnRlbnQudHJpbSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoY29kZVJ1bGUudGVzdCh0YXJnZXQucGFyZW50Tm9kZS50ZXh0Q29udGVudCkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIS8jXFMrL2kudGVzdCh0YXJnZXQuaHJlZikpIHRhcmdldC5ocmVmKz0vIy9pLnRlc3QodGFyZ2V0LmhyZWYpP2V4dENvZGUodGFyZ2V0LnBhcmVudE5vZGUpOignIycrZXh0Q29kZSh0YXJnZXQucGFyZW50Tm9kZSkpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGogPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFBhcmVudCA9IDUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gdGFyZ2V0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUoajxtYXhQYXJlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocGFyZW50LnRhZ05hbWU9PSJUUiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29kZVJ1bGUudGVzdChwYXJlbnQubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50PXBhcmVudC5uZXh0RWxlbWVudFNpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaHJlZis9JyMnK2V4dENvZGUocGFyZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKGNvZGVSdWxlLnRlc3QocGFyZW50LnRleHRDb250ZW50KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaHJlZis9JyMnK2V4dENvZGUocGFyZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHBhcmVudD09ZG9jdW1lbnQuYm9keSkgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGkgPSAwLCBrID0gaW1ncy5sZW5ndGg7IGkgPCBrOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCBzcmM7CiAgICAgICAgICAgICAgICBmb3IobGV0IGltZ1JlZyBvZiBjb25maWcuaW1nUmVncyl7CiAgICAgICAgICAgICAgICAgICAgc3JjID0gaW1nc1tpXS5zcmMucmVwbGFjZShpbWdSZWdbMF0sIGltZ1JlZ1sxXSk7CiAgICAgICAgICAgICAgICAgICAgaWYoc3JjICE9IGltZ3NbaV0uc3JjKWltZ3NbaV0uc3JjID0gc3JjOwogICAgICAgICAgICAgICAgICAgIGlmKGltZ3NbaV0uZGF0YXNldC5zcmMpewogICAgICAgICAgICAgICAgICAgICAgICBzcmM9aW1nc1tpXS5kYXRhc2V0LnNyYy5yZXBsYWNlKGltZ1JlZ1swXSwgaW1nUmVnWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3JjICE9IGltZ3NbaV0uZGF0YXNldC5zcmMpaW1nc1tpXS5kYXRhc2V0LnNyYyA9IHNyYzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2VyaW91c1JlcGxhY2UoY29tbUFyZWEpOwogICAgICAgIH0sMik7CiAgICB9CgogICAgZnVuY3Rpb24gcHJvY2Vzc09iaihvYmopewogICAgICAgIGlmKG9iail7CiAgICAgICAgICAgIGlmKG9iai5ub2RlVHlwZT09MSAmJiBvYmoudGFnTmFtZSAhPSAiQSIpewogICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxvYmouY2hpbGROb2Rlcy5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgICAgICBwcm9jZXNzT2JqKG9iai5jaGlsZE5vZGVzW2ldKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2UgaWYob2JqLm5vZGVUeXBlPT0zKXsKICAgICAgICAgICAgICAgIHZhciBjdXJEYXRhPW9iai5kYXRhOwogICAgICAgICAgICAgICAgaWYob2JqLm5leHRTaWJsaW5nICYmIG9iai5uZXh0U2libGluZy5vdXRlckhUTUw9PSI8Yj5oYWNnPC9iPiIpewogICAgICAgICAgICAgICAgICAgIGN1ckRhdGErPSJoYWNnIjsKICAgICAgICAgICAgICAgICAgICBpZihvYmoubmV4dFNpYmxpbmcubmV4dFNpYmxpbmcgJiYgb2JqLm5leHRTaWJsaW5nLm5leHRTaWJsaW5nLm5vZGVUeXBlPT0zKXsKICAgICAgICAgICAgICAgICAgICAgICAgY3VyRGF0YSs9b2JqLm5leHRTaWJsaW5nLm5leHRTaWJsaW5nLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5uZXh0U2libGluZy5uZXh0U2libGluZy5kYXRhPSIiOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmoubmV4dFNpYmxpbmcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGV0IGRhdGE9cHJvY2Vzc1R4dChjdXJEYXRhKTsKICAgICAgICAgICAgICAgIGlmKGN1ckRhdGEgIT0gZGF0YSl7CiAgICAgICAgICAgICAgICAgICAgbGV0IGN1ck9iaj1vYmo7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RGF0YSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3VyT2JqLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld0RhdGEsIGN1ck9iaik7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGEub3V0ZXJIVE1MPWRhdGE7CiAgICAgICAgICAgICAgICAgICAgfSwxKTsKICAgICAgICAgICAgICAgIH1lbHNlIGlmKC9CfFNUUk9ORy8udGVzdChvYmoucGFyZW50Tm9kZS50YWdOYW1lKSl7CiAgICAgICAgICAgICAgICAgICAgbGV0IGFsbFN0cm9uZ3M9W107CiAgICAgICAgICAgICAgICAgICAgdmFyIG5leHQ9b2JqLnBhcmVudE5vZGUubmV4dFNpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUobmV4dCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKC9CfFNUUk9ORy8udGVzdChuZXh0LnRhZ05hbWUpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbFN0cm9uZ3MucHVzaChuZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckRhdGErPW5leHQuaW5uZXJIVE1MOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dD1uZXh0Lm5leHRTaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGRhdGE9cHJvY2Vzc1R4dChjdXJEYXRhKTsKICAgICAgICAgICAgICAgICAgICBpZihjdXJEYXRhICE9IGRhdGEpewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VyT2JqPW9iajsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsU3Ryb25ncy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGUuZGlzcGxheT0ibm9uZSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdEYXRhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgicCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyT2JqLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld0RhdGEsIGN1ck9iaik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdEYXRhLm91dGVySFRNTD1kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICB9LDEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRQYWdlKCl7CiAgICAgICAgbGV0IHByZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhLnByZXYiKTsKICAgICAgICBsZXQgbmV4dD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhLm5leHQiKTsKICAgICAgICBpZighcHJlKXByZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIucHJldj5hIik7CiAgICAgICAgaWYoIW5leHQpbmV4dD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIubmV4dD5hIik7CiAgICAgICAgaWYoIXByZSAmJiAhbmV4dCl7CiAgICAgICAgICAgIGxldCBhVGFncz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJhLGJ1dHRvbj5zcGFuIik7CiAgICAgICAgICAgIGlmKCFwcmUpewogICAgICAgICAgICAgICAgbGV0IHByZWYscHJlcyxwcmV0OwogICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxhVGFncy5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgICAgICBsZXQgYVRhZz1hVGFnc1tpXTsKICAgICAgICAgICAgICAgICAgICBpZihwcmVmICYmIHByZXMgJiYgcHJldClicmVhazsKICAgICAgICAgICAgICAgICAgICBpZighcHJlZil7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKC/kuIrkuIDpobUvLnRlc3QoYVRhZy5pbm5lckhUTUwpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWY9YVRhZzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZighcHJlcyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFUYWcuaW5uZXJIVE1MPT0iJmx0OyIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlcz1hVGFnOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKCFwcmV0KXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoYVRhZy5pbm5lckhUTUw9PSLCqyIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldD1hVGFnOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcHJlPXByZWZ8fHByZXN8fHByZXQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoIW5leHQpewogICAgICAgICAgICAgICAgbGV0IG5leHRmLG5leHRzLG5leHR0OwogICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxhVGFncy5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgICAgICBsZXQgYVRhZz1hVGFnc1tpXTsKICAgICAgICAgICAgICAgICAgICBpZihuZXh0ZiAmJiBuZXh0cyAmJiBuZXh0dClicmVhazsKICAgICAgICAgICAgICAgICAgICBpZighbmV4dGYpewogICAgICAgICAgICAgICAgICAgICAgICBpZigv5LiL5LiA6aG1Ly50ZXN0KGFUYWcuaW5uZXJIVE1MKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0Zj1hVGFnOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKCFuZXh0cyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFUYWcuaW5uZXJIVE1MPT0iJmd0OyIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dHM9YVRhZzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZighbmV4dHQpewogICAgICAgICAgICAgICAgICAgICAgICBpZihhVGFnLmlubmVySFRNTD09IsK7Iil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0dD1hVGFnOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbmV4dD1uZXh0Znx8bmV4dHN8fG5leHR0OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmKCFwcmUgJiYgIW5leHQpewogICAgICAgICAgICBsZXQgcGFnZURpdj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJkaXYud3AtcGFnZW5hdmkiKTsKICAgICAgICAgICAgaWYocGFnZURpdil7CiAgICAgICAgICAgICAgICB2YXIgY3VyPXBhZ2VEaXYucXVlcnlTZWxlY3Rvcigic3Bhbi5jdXJyZW50Iik7CiAgICAgICAgICAgICAgICBwcmU9Y3VyLnByZXZpb3VzU2libGluZzsKICAgICAgICAgICAgICAgIG5leHQ9Y3VyLm5leHRTaWJsaW5nOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB7cHJlOnByZSxuZXh0Om5leHR9OwogICAgfQoKICAgIGZ1bmN0aW9uIHNjcm9sbEFydGljbGUoYSl7CiAgICAgICAgY3VyQXJ0aWNsZT1hOwogICAgICAgIGlmKCFjdXJTaXRlLm5vU2NhbGUpY3VyQXJ0aWNsZS5jbGFzc0xpc3QuYWRkKCJvRF9zZWwiKTsKICAgICAgICBsZXQgcG9zPWVsZW1lbnRQb3NpdGlvbihjdXJBcnRpY2xlKS55OwogICAgICAgIGlmKGN1clNpdGUgJiYgY3VyU2l0ZS5vZmZzZXQpcG9zLT1jdXJTaXRlLm9mZnNldDsKICAgICAgICBzY3JvbGxUb0NvbnRyb2wocG9zKTsKICAgIH0KCiAgICB2YXIgaGFzVmlld2VkPWZhbHNlOwogICAgaWYoZG9jdW1lbnQucmVmZXJyZXIpewogICAgICAgIGZvcihzaXRlIG9mIGNvbmZpZy5zaXRlcyl7CiAgICAgICAgICAgIGlmKHNpdGUucmVnZXgudGVzdChkb2N1bWVudC5yZWZlcnJlcikpewogICAgICAgICAgICAgICAgaGFzVmlld2VkPXRydWU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGlmKCFoYXNWaWV3ZWQpewogICAgICAgIHZhciBub3RpZmljYXRpb25EZXRhaWxzID0gewogICAgICAgICAgICB0ZXh0OiAiXHUwMDQxXHUwMDZjXHUwMDc0XHUwMDJiXHUwMDQ2XHUwMDM4XHU2MjUzXHU1ZjAwXHU3ZWM1XHU1OGViXHU3YWQ5XHU1MjE3XHU4ODY4XG5cdTAwNDNcdTAwNzRcdTAwNzJcdTAwNmNcdTAwMmJcdTAwNGNcdTAwNjVcdTAwNjZcdTAwNzRcdTRlMGFcdTRlMDBcdTk4NzVcdWZmMGNcdTAwNDNcdTAwNzRcdTAwNzJcdTAwNmNcdTAwMmJcdTAwNTJcdTAwNjlcdTAwNjdcdTAwNjhcdTAwNzRcdTRlMGJcdTRlMDBcdTk4NzUiLAogICAgICAgICAgICB0aXRsZTogIlx1ODAwMVx1NTNmOFx1NjczYVx1NTNkMVx1OGY2Nlx1NGU4Nlx1MDAyMSIsCiAgICAgICAgICAgIHRpbWVvdXQ6IDEwMDAwLAogICAgICAgICAgICBpbWFnZTogImRhdGE6aW1hZ2UvanBlZztiYXNlNjQsLzlqLzRBQVFTa1pKUmdBQkFRRUJMQUVzQUFELzRRNUhhSFIwY0RvdkwyNXpMbUZrYjJKbExtTnZiUzk0WVhBdk1TNHdMd0E4UDNod1lXTnJaWFFnWW1WbmFXNDlJdSs3dnlJZ2FXUTlJbGMxVFRCTmNFTmxhR2xJZW5KbFUzcE9WR042YTJNNVpDSS9QaUE4ZURwNGJYQnRaWFJoSUhodGJHNXpPbmc5SW1Ga2IySmxPbTV6T20xbGRHRXZJaUI0T25odGNIUnJQU0pCWkc5aVpTQllUVkFnUTI5eVpTQTFMalV0WXpBeE5DQTNPUzR4TlRFME9ERXNJREl3TVRNdk1ETXZNVE10TVRJNk1EazZNVFVnSUNBZ0lDQWdJQ0krSUR4eVpHWTZVa1JHSUhodGJHNXpPbkprWmowaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1UazVPUzh3TWk4eU1pMXlaR1l0YzNsdWRHRjRMVzV6SXlJK0lEeHlaR1k2UkdWelkzSnBjSFJwYjI0Z2NtUm1PbUZpYjNWMFBTSWlJSGh0Ykc1ek9uaHRjRTFOUFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdmJXMHZJaUI0Yld4dWN6cHpkRVYyZEQwaWFIUjBjRG92TDI1ekxtRmtiMkpsTG1OdmJTOTRZWEF2TVM0d0wzTlVlWEJsTDFKbGMyOTFjbU5sUlhabGJuUWpJaUI0Yld4dWN6cGtZejBpYUhSMGNEb3ZMM0IxY213dWIzSm5MMlJqTDJWc1pXMWxiblJ6THpFdU1TOGlJSGh0Ykc1ek9uQm9iM1J2YzJodmNEMGlhSFIwY0RvdkwyNXpMbUZrYjJKbExtTnZiUzl3YUc5MGIzTm9iM0F2TVM0d0x5SWdlRzFzYm5NNmVHMXdQU0pvZEhSd09pOHZibk11WVdSdlltVXVZMjl0TDNoaGNDOHhMakF2SWlCNGJYQk5UVHBFYjJOMWJXVnVkRWxFUFNKRk5qYzVSVFpFUmpFNFJFVkVPVUk1UkRFeE9EVTNOMFEyTVRjMU16azVOaUlnZUcxd1RVMDZTVzV6ZEdGdVkyVkpSRDBpZUcxd0xtbHBaRG8zTjJaaU5HUmxNUzB6WVdaa0xUQmhORGd0T0dRMVppMDNOR1ppT1RObFpUWXpPR1FpSUhodGNFMU5Pazl5YVdkcGJtRnNSRzlqZFcxbGJuUkpSRDBpUlRZM09VVTJSRVl4T0VSRlJEbENPVVF4TVRnMU56ZEVOakUzTlRNNU9UWWlJR1JqT21admNtMWhkRDBpYVcxaFoyVXZhbkJsWnlJZ2NHaHZkRzl6YUc5d09rTnZiRzl5VFc5a1pUMGlNeUlnZUcxd09rTnlaV0YwWlVSaGRHVTlJakl3TVRZdE1UQXRNRGhVTURrNk16STZNamdyTURnNk1EQWlJSGh0Y0RwTmIyUnBabmxFWVhSbFBTSXlNREUyTFRFd0xUQTRWREE1T2pNM09qVXpLekE0T2pBd0lpQjRiWEE2VFdWMFlXUmhkR0ZFWVhSbFBTSXlNREUyTFRFd0xUQTRWREE1T2pNM09qVXpLekE0T2pBd0lqNGdQSGh0Y0UxTk9raHBjM1J2Y25rK0lEeHlaR1k2VTJWeFBpQThjbVJtT214cElITjBSWFowT21GamRHbHZiajBpYzJGMlpXUWlJSE4wUlhaME9tbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZObU5pTmpjeVkyUXRObVZrTnkwd1lUUmtMVGs0Wm1JdE1UQXpPR001TUdZME5UUmtJaUJ6ZEVWMmREcDNhR1Z1UFNJeU1ERTJMVEV3TFRBNFZEQTVPak0zT2pVekt6QTRPakF3SWlCemRFVjJkRHB6YjJaMGQyRnlaVUZuWlc1MFBTSkJaRzlpWlNCUWFHOTBiM05vYjNBZ1EwTWdLRmRwYm1SdmQzTXBJaUJ6ZEVWMmREcGphR0Z1WjJWa1BTSXZJaTgrSUR4eVpHWTZiR2tnYzNSRmRuUTZZV04wYVc5dVBTSnpZWFpsWkNJZ2MzUkZkblE2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRvM04yWmlOR1JsTVMwellXWmtMVEJoTkRndE9HUTFaaTAzTkdaaU9UTmxaVFl6T0dRaUlITjBSWFowT25kb1pXNDlJakl3TVRZdE1UQXRNRGhVTURrNk16YzZOVE1yTURnNk1EQWlJSE4wUlhaME9uTnZablIzWVhKbFFXZGxiblE5SWtGa2IySmxJRkJvYjNSdmMyaHZjQ0JEUXlBb1YybHVaRzkzY3lraUlITjBSWFowT21Ob1lXNW5aV1E5SWk4aUx6NGdQQzl5WkdZNlUyVnhQaUE4TDNodGNFMU5Pa2hwYzNSdmNuaytJRHh3YUc5MGIzTm9iM0E2VkdWNGRFeGhlV1Z5Y3o0Z1BISmtaanBDWVdjK0lEeHlaR1k2YkdrZ2NHaHZkRzl6YUc5d09reGhlV1Z5VG1GdFpUMGk1cktoNXBlMjZaZTA2S2VqNlllSzVMcUdJT1cvcStTNGl1aTlwdSs4Z2UrOGdTSWdjR2h2ZEc5emFHOXdPa3hoZVdWeVZHVjRkRDBpNXJLaDVwZTI2WmUwNktlajZZZUs1THFHSU9XL3ErUzRpdWk5cHUrOGdlKzhnU0l2UGlBOEwzSmtaanBDWVdjK0lEd3ZjR2h2ZEc5emFHOXdPbFJsZUhSTVlYbGxjbk0rSUR3dmNtUm1Pa1JsYzJOeWFYQjBhVzl1UGlBOEwzSmtaanBTUkVZK0lEd3ZlRHA0YlhCdFpYUmhQaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lEdy9lSEJoWTJ0bGRDQmxibVE5SW5jaVB6Ny8yd0JEQUVNdU1qb3lLa002TmpwTFIwTlBaS1pzWkZ4Y1pNeVNtbm1tOGRUKyt1M1U2ZVgvLy8vLy8vLy8vK1hwLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLzJ3QkRBVWRMUzJSWFpNUnNiTVQvLytuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vd2dBUkNBRzNBYmdEQVNJQUFoRUJBeEVCLzhRQUdBQUJBUUVCQVFBQUFBQUFBQUFBQUFBQUFBRUNBd1QveEFBWEFRRUJBUUVBQUFBQUFBQUFBQUFBQUFBQUFRSUQvOW9BREFNQkFBSVFBeEFBQUFIbUFXQlNBQUFLSktxVFVJb2dBQUFBQUFBQUFBQ1VTaUtBQUFVQzJFcFlsQUFBQUJMQWlyWlNTMk1ONXFBQUVLbElzRmxDQ3dBRkJZTEtJb1NpS0lDMUNhNytZYTFUQzlEaHBDUFJEaGZSd0t4WXEycGk0TzNQcmdqZE9ib09lZlR3TTljZHp5dlZ3RmR6Z2RqeTZuWTUzdnhNVjZEenRET2ZYNHkzcm80TzQ0TzQ0UFRzOFFONXZZODdyRHB4M3lPak9Ucnk3WU8vbDlYbE91czVPcno3TzdqUnZqMlBQclBvT2JJMXo5SG5PdU40UFJ4MWs3K2Zlamoxdm5OOXB4TWVuemR5NTZRNVIwSzBPTTY4aVc3akRwek1kT3VLNmVkb3cwTmMrdklPM0U5T2NaT3J6OWk4T2tPK04rWTlQRFdUdnd0SmM2TG9QUDZQUDZDT0E5WGw3OERyamVEZThaTzh4bzVkWEU5SEhyd0pjNlBWNS9SZzROZERrN2p6Ty9FN3RJY1BSNXp0eTY4NjFqcGlJMkp6M2FreFNkK0hjNTczeU1KSTlQbTlPS21lM0Uwa2tXTGVnUFA2T0dqcTRiTy9seU8yT25NNk5lYzlGNTZKZUk5WFBYbk5kZUZPdkR2d0xXalNqbE41T25Yam1QVDU1RDBjdXZDdXN6SW9KMDF4cmw2dWVEcnkzcU9kMk5jZ2w2RGpleE9QYkdWNjhkOVRPZW5FbmViRXVUejl1R2E5UG1VNjhkZGlUTkpucm1OOHAyTTU2d3p6dWlxT2EwTjh5NDBPcmhhVUtpS3lQVGplRXlDeXdUUXpOeGNyQllLZ3VzRTdNYk5BY3VtRGpuV2JRT3ZUanVLdUVwRmRlWFJMRVNxWE50WE1jU3dxd0NDd0FJRDE0NmM1TXJDckFCWlJLTVRvT2JXUVF2WGwwT2lCbldUenl5MERzM0pFc0lzSjE1ZGhOQ0dEV09lVnNLQUFFS2dxQUQyYytuS1JPZXpjdk0yNTlRQUJaek9zenN4bnJreDB4bzZITTZZNTZPVUxWbXp0Q1JGSUNkZWV6U2N6WENMUUFFQllMQUFOYU11bzYrYnY1WTc4K3ZtcjA4Ym9YWEk2emoxazBnbWREbjM0ZGk1MURFbE44dXU3ZVdPK1R6dlFQUHJ0NXowWGwxa3p6NjhoMDFnMXJISTNndEVGZHp6cFFBQmJzeHZkaVVRbzVzZExkWmNEV3NqcnkzeU8rZFlqWVNKVEU2eTNFNlpNeFV6MnZCWjE1K2c4MnM3T2VwMk9mVzJSeDdjVHJ5NjhMYUJBQXZiaDNQUFpRdWpQVGU0emFNckVzUTBEaG4wOERwejZjTGUydUhVM2pmbVBWNXc2YWpLSmE1OU9mUVNvempwenJ2UE9yMGRQSDZTUE5vMTI0ZEk2SmlUWEM1MWUvSFdRQUFCMjRiTTYxMWpIUWtGSW96blNzMkYyRXZEdndOOCtuQzI5NzV5N21qTzV4azZxWE9tNjRiMUNLamwyNVd1akEzMDh2Y2poczZjbURjQkxEZlByeUtBbEpkYU9lNW8zMDVkSkNDZ3FDQTVibFhZUng2dzVyVjVkcVJ6NkRuanNYazdFNHV0T1U3amhldzRkMUFPYzZjek84WlVTbGdBbFEzR2pOVTMwNVdOeVE2WnhCckdqb0VBQWxDZ2dJQUFBc0JUSlFCWlFXSXVhdkdSUXFBQVFHcllUZUJMRnVwMU9WWk5BbThkRFV1V2JjNkJrMGdvQlNBbG9paUtJMGpMU3N0RE5vaThTOGkwQkFFTEFXYUxwWXZQcGdtcFYzcVdNYyszT3NhZ3ZUbDBUZU9zVGxkaW9FdE1OaWF4c1oxa1dRMUlLZzB6WllTeXBSSnpXNUtBUUFJQUM5dVBmTElzdlBwaGN6dFZ6cTZqano5T2E1TlpIVG50T3lrek5ERGNYTTBJb3E1VFNVdzFrQWxSYkZpRXE0a0VXbzZjeEFBUUFBTDZPSGFNU3dxVXVzQzZ4VjZ6S000MUttODZUcHJsczBFSlFDS00zbU4zbEY3VGtPam5UV1ZKVU5ZM0k1dGJyaXVhNllRQU5VNXVtVElHczlEcGNXWFdhamxyV2JFQWhiY2ltak82SXNUZXVkTjR0TTJEVEpPZDJNMndYSTB5TlFHZEFvSUdOU3N0VWxuTTNqSmFnQWF6bzFjM04wem9Zc3BaUktKdWJLV0pLSXNKdkZzMENVSW81ckxBS0FDb2dnc2lpQ29OU2Mxc0FBQURUT2pWbXNhYnpwTVk2OGRMWlMxcUdzNkFBSk5RazFDUzRzMWNLNk9TTml3VVN3SUxJV3dDQ29Ca1FBQUFBR3MxZDd4dkZHRHFtck10akYwTXJDZ0pRQ0F6TlN6TEt0TWs2TFNVaG5XYXpOUlpMQUFCRUVBQUFBQUJZT204YnhxOHUzTXowNFhVOUxqcU9yRk5JS0ROc0xBaFNTam56NzhyTWl2UklTeUNnRkpOVTV6cms1eldGQXVldUNXYk9ZQUFBQU43NTd6ZHhjM3pyT2tXRTN2bFpldDUyT2pGTHFDeWdzQUpOWk9EYXpRc1dVQXNnSkRUR2k4dlJ6T2NwZGI1OVplSmJKTkRJQUFBTDA1Ymw2WE9zWGxqcnkzQXNxVXRsbDFjNk5XV0ZtaEtJc0VzT2JTb0xteUZxQ3lZTElOZGNkVTB6VXh4M2hidkZVWk5aZ0FkT2RMa0FHczJYcHJHczI4ZTNOTURjYXpwZDZ6cU5XV0FMQW9Jb2tzSW81RFVBekFnS0RwMkVtU09PU3JSYmtXQkFBQUFBWGVqTFVNM2tPa2xEZWlOVWhRQW9FQUNBLzhRQUtCQUFBUU1DQlFRREFRRUJBQUFBQUFBQUFRQUNFUU1TRUNBaE1USVRJakJBTTBGRFVFSncvOW9BQ0FFQkFBRUZBdjhBbTA0ei9FREpHMkFCY3JIS3h5c2N0aXBVcVZPTFJMbmlDanVXYVNvY29jb2NvY29kZ1ZhTGNMU3JIS3h5c09FRld1VmhWcG14eXRjclhLeDJHcTFXcTFXcTFXcTF4QnRPamg5MDkzT0lQVUtZNGxQNWxONDNOUXRLZnlsWEpuS3B2S0tZNVBpZW91b3VvdW9tdXVUdWJSSkxnaGFVL2xlVVREYnltR1FkNzAwM0s4emNaQmx0NVhVS25STmVBTHdyd3J3cndyd2c2Y1BzbFFZd1lJQjFjcWU3d2JqS2J3Q3ByUy9zWFloYWpDZGJGUGlnMlYweXVtVjB6aFNUdVlFRHBsUkFMQ0UwU1hxeHlhTFF1VEtlelIzUE1scHRMbXltdGhPZE9FS0ZDZ0xSTllpUTFFbDJCVFhTbk1USVQzb0ZYSUdEMUU1MGh2QlUxVTVRWURaVE9WVGN0MHA4VlQ0M3VWN2t3a283MGsvbFRVbStvU0YrZHdnek11Z3VKd0FjRTBFTHVDdE1pbXBEVkljdW1pMjNHRTlCb0NjOVJrSVJjU0J5aHE3RjJMc1R3TGZwdkhxQk5kS2Z5SGMxdWptYzZtN3VOUGlxZkhwcnBwcmJVZDZTZHpwTHRsMXFQQ21OWE5KVWR2VEtJdE43a05pWElQTWx4S3A4cW5JT0lVM0dNYW03dU5OSENNRHU1b2dDVlRLZUlPaXBoUE1sMnplRFZUVCtiREJxSm5LcHUvaFQ0cW54a3FTcWFPOUpQNVVsQnZxQmZtM1J0NVU5bHpsdW1pWFNnYmxGcjdtb0VGRWdLNXFQTVkxTjNjYWUyUnVycWhRMk9pRVBBWnE1MEpvVHRtOEljcVlUdWJteWd4TTUxTjM4S2ZGVStOalZZMUFBTDdwSi9LbXI5WE90UjFaWnAwMUhiMDA1a0xnMm50OXdTckhKalNDOXBKc2NvSVFLbkNwdTdpemJGMjFNYU9NdXVVT2NtdHRWd0tMRjNCRXltOGVvbXV1VHVaZXVvbWNxbTcrRlBpbXV0QWJLNlp4cHAvSm1qUnlxTDh0VnF2ejFXcWM2NVU5dnNPSVhVS2E0a3VjUWVvVVhGeUcwbVpjdFhGM0Z1MkwxY0xVTFlOUUxWeXRRY1FnOEo4VGVRR2hhdFdwY08xOXpWYzFjM1A0c0l0WnlnWUhaa0xzVnpRdHk1M2JDN0U1d2diT1g1dHdqU25zT1dET1QrV096N3dyd25PdVF5RUsxUnBhclJrdFFFWVNwVW9nRldoV2hEUkZkTk5iR0pNSWhSaTBha1NyVmJnUkt0UUdrS0ZZZzJNYlVHNVlVWko5T2N6dDhqUFFKOTBaWEk1QVlVK1VtRk0reEdjWkRsQTBoZldRWmk3M0l5dHlIT2NveUZFKy9HSXlISU56bkdKTUltZlJKaFhyZkF1aFg1NzBIVGljQmc1MEs5SEkzZndsM29RcmNLaS9OdXkvU29odGtPMU1BZzg4Z2NGZUZ5ZlVVNllqSnFTUVFocU1DNmNtNUxTUEZDakVtQTR5dnoxWFRLRENDOXNycGxGcENHMkIycDdINU1DbmJOYUNMQWcwQkZvS3NDc0NzQ3NDK3djUjhsVGkzWW5NM25VNDVvUUNqTFUyZ2RQWmhGd3VjbXVOenlRcm5LcHhidGdkcWV6Z2J1OWQ2N2x1TFUwU2FoMGpRTUJhQkt0T2I5S25FSFRNM2xVNDVRRkdkKzcrSitNT0lEWUNiOGxWZmRUaTNiQjIxUFl2ZzlSZFJGK2pVVG93UUNaSmRLYndCaFg0UmsvU3B4enQ1Vk9PSUNBOExocTUwby9HMXNqcG9NZ3ViY3VtaUpEbTJvYkk3VTluYzRDZ0tBb1RsZTFYTlZ6VU5ybXE1cWVRY2hNTC9BSFUyempsVTJHRVp6bHFJL0dBVVpDcHJrTlZEbGFjVHRUMlB5WWt3cEMwV2kwVGVDMFdpdXdMc1B0enBHZjdjNlEwS0k4dFJINDJiY3llMXJEQmUxTmRoSVVoRWlLZXp1Y2hTRklSMzdGMkxzWFloRWRpN0YySjhLY2R5V1FNKzVMSURUSTh0Ukg0d0NWbzBjeTRKams1a3JWZE5kTmROTkZxTEpQVFhUWFRUbTJvTVZpc1Rtd204R2lWWWkyRkdRR0M1OGpNQks0dWMrUXdRUEVNYWl1RmpYd05YSUNNQzFCOExWeDcxM3J2WGV1OWQ2NzEzcUhISS9acmhiVFJkNVFNWUdCT0E4bG9Wb3l4UG5zQ255Z3FWS2xTcHhIOERaRXo0b3pETVBmSmp4d3B5Z1lIS1BlTHZVT1Z1ZUZIcWwzb2ZlVTVHKzNLbWZLT09ZWUhLMzJpWTgvMWxqR0ZHUnZzejY4b1luRWU1SGtDSGdsU3A5U1ZjcmxjcmtKUGdQaUdTUFVuQ1ZLbFRocW9VS0ZHRXFjVHRtaFdxQmxiNW84a0tGSGhqTEdFS0ZHRXFmU2owcDhjNVNWUGtqMXA5TW56bjBKVnl1Vnl1SHBrL3dZVUtGSHZETkN0VUtQNlgzL1dkdktuMFQvRWRqS24wQ1BIR2VOTUkwOHYxNmg5RnFPQTg1OVErVTVBbmVpNzM1d2hGdVQvUGxHTHR2ZkF4ZGpPbWNJL3c1eUJERFpIMVhlODNEN2NqNnAyOVAvL0VBQllSQVFFQkFBQUFBQUFBQUFBQUFBQUFBQUZBa1AvYUFBZ0JBd0VCUHdITjhzSmYvOFFBR3hFQUFnSURBUUFBQUFBQUFBQUFBQUFBQVVBUmNBQVFNSUQvMmdBSUFRSUJBVDhCOHp4a1VHYU5EZ2JMaDBIQTJlbi94QUFqRUFBQkJBSUNBd0FEQVFBQUFBQUFBQUFBQVJBUklTQXhNRUZBVUlGaGNJQ2cvOW9BQ0FFQkFBWS9BdjNiVDFobzBhZVY0Tkdtank2NElVbzBhTkdzSVUwVmxyQ25sZkV0MUZrNk9paXl1QldwcUphT0dVSlhndkd5VWFFdzF5SzJ6Wllvcjc3ZWl5YXd0NzRxTHhnczBkSFIxd1JpcmJOc29yS2Zrc3A0d3Z4WWVTTUZhTWxiWnRsRlpUWGJ5YkpObHZDdlJiVnlRMHRaQ1lhZWk4VnhVVVVVaDlteURicTBtbjE0VllhZXNseVVWa0U0VjRLNDVLZTJvZ3RyNE5QWjA5TlpDZXIzL0p0ODlleGp5NDl2S1BYUEJKUG92amJaQk9EUnJDZlJ5M3p5SzVrOEg0VTArelErWXluSjBkSFIwM1IwZEZjc2VBaDh4aFNpK0xaczNoczM1OFkwWHhYNGwrcHIvQWJQdDRlUGF6L0FYLy9FQUNrUUFBSUJBd01EQlFBREFRRUFBQUFBQUFBQkVSQWhNU0JCY1RCUllZR1JvYkh3UU1IeFVPSC8yZ0FJQVFFQUFUOGg2OGY5cVA4QXN3Ui93NTY3YVJDcVIwZ2pWUDhBS2RrT21uZ3U4TVF3c2ZxVDlTZnFTSEd4dURpY1RpS2RFS2dZcFVLWFFJNVhFNFBBendzOHc4dzh3dW5Eb1JST0NSUFU2SzNLY0huZTFaOGtlRDVQRjhuaStUd2ZKaXpPQndad2ZzY1BnNE00UDJPRE9ERXhxUi9pR2hxMEprekViVUhoUXhjeFN4RlViSTRmWWJaZXhaVFNkcWVJaU5KL1NIOTBLQ2o3SDdrL2NuN2t2TFJCbU9QUXE4aHRWOWlBSktpdzZYYzR4cm16UHlUU2t4bmFCMnlnaG04akpzanhvNFJNaXU3YkVGT1RuT2M1em5PY1ZqTkZrUldHcVR3S2NMY3d2SmZIdU5PNlp1QzhKTmlSc2ZzWU9CSk13OXB4dlVMbUUrRHgvVTdWUGlnOHNlc3FEeW84cVBLaFdiVG9MTElzZVJLOG93Y3hBMmFIK0llWVhjOEJtUjNZdldNM0pNNzJSYVZzWnpBbnZCUGVFMkZnU3NRSUVhVDdCcnZZaEovUndnbEFybVJOdVJGOUFzNzVKRjhoQnNjQzRJaUxkQmc0RksyRnU2TFZKcXdwSm1uaUlKVFVadVQ4RWZnaGE1SHlxR1VadVpaaVlCZ29jRXpKM0lrUzNleEJMSTJxQlpkaUx3TFhFWEpqYzJKU0pKWE1ZN2oyR3ZId0plUGhqVFp3TzNDdWhLaXlFS1plZTVzKzhUdStoRmRFZ0VVbXdURktRa0pCU2NMNENsaVNveG5nWWpHYWJLOE5lR1F4YUFadVNJaUxpNThxaG1vUjY0d0dNOWhKUHNPYlJCTHpRZVZEcm1UeWZCT0c0VHZ0d0lTZHpkbzRQb1BvTUV4c3Vha2pCd1plQkZEZTlFVlhvaE9mWWdHNExwc3hxR1RkK2hZMndrSWpCd0luTW1ZdUY1YmtKVFR2VHhhQVp1VHlQYzhqM0diVGxueXFHV2hrUzlBeHRRbXpIcFB2cUtYa2lrYmJ5eHhTRkp2d0xrVUZUZy9jRDd1NEgwWmNIN2daT1dCQm9hRVkrREx3WmhtREl4Yi9BR3VXa0ZnTEtBMEZuQ0VYYytqY1ppTUhBa1liMkdKdVUxVGEwNUhkR1F4YUE1dWExalI2SVVueGJ3T1pXR2xmZ1hlWElqNGhFUVZEbVJlcWZNRzRkcnVMSFNmZ3lRdGJFaFNQd1k3OXFDMUloSmo0TXZCbUd6Smhqd0lKZHpnUjlpRndCTnpkeE1RbVQzYjNPNmlGZ3hrUmRXTVpDN0NYWkY3TXhjVkJLV2lMSkVqc1R5SXRvbGx2aytZWmorZ3BZWTRaYjl6K2dwYnYzSERMSkM3R2JrYWtFc1Fqd29qVGdqYWc4S0ZrTklzRGRBUTdQMklVbEZybWF0ek5DWFk4S2lMZzlSRHVHK01kdG5jczl3enZISXpRUmNpc0JHZG9LWndoSlpvT21UZzhpSWxrdkxzWnhTNXBHY2syZTFFbGtaTGZVai9RZzJhOUJ1NHhVRnVIQkppa2s0VHpTUllHMG40R0xJUTBUUU1rMHN5MWRLNXdNbmE1SWlxZHc4NTV6Q1NzSkMwSmF1TlNOaG5rU0t1K1JwdFlRM2NuUVdVdVR6c1hmWWlTRWlEVU1odDhCSE9zQVZOclVSU1c0UWtNU3ZjU0x6U0FjaU9vZmxVUU9aQzVvM2UxR2t5SkVoTEZKb2tZOUU2WjFxaGFNUTlHNGVERjlLd01sVWczcTdFblRlQjlDQnJvTUxSa3RLSVhvVGxhVmdlQ0tyTG9nTm02ajZjRDFFUG94SG5RbHBTMUdrbGlDQ0tMSkZaWk05WjFmUmdlbGxwdlJoQ3hwSXcwTzFjYS93Q0ErdEF4SFM3a3FlZE9GVmhqWDY4VVVod0U0VFNaRUM3bHJoMkVORmNOSDFJdTBOS2xhWGVtK2xZcHQ5WkJCSVNiMDJEUzJiR1kyRjloVWtvUmowNXhnbFNKRVZWNG9odWVVWHBEcUV0eElva29ra2FMb1dLdHd6RTh0L0k5Q1VsSTdER2hKd0lTeXhhNElFN0VxRzdVUkl6c3gvUXM3RHlvVVcyaGlxRHlvU3pLSGxIWE9adVQ3cUpWTTVaem1KR2t1VG5PYzV6bk1PaUp4UllQc3FhRU50NTA0cUN4cVFheElxdWoySWdsQ21DWUg0Rkl5YkhuK0JsRTJSc2k4cGZ4cFBPWnVTWGFSSGtlb2U5eUo1Q2ZkRmpJSU54dWtiY21DUm1CeEVDUkFwaWkreDloQkZhOEo5Z3NhRWhyd0pWcGRIbEVXeG9tQkl5SGNYVURvRHF5YTVUTnlLWW9JaUlTMlVaTENLSGN1YmN2TElzUVk2U1hZa1JoS3EreGk1RmpYaDVNWElzVVNPd0pXZEQwdVc4TVZUUkxtYkk5Mktta1JDV1E3c3R3cEZETVRJRnZNM05IeEk4U0gybFFrTkhrUDNCKzRHVGtzSDdnL2NFQUVySWlpZ25aeVkrUlkxL0tNZk5DUXU4eGpvRm11eWljVndpcGIrUkhEWmp1d0tUaWJubStTVExNS0taek55ZmRvUmtOMlVjV2NXUHNreGlqYzRzVFhaaVZ1a0ZsU1lWaTRraFkxcHdyRnhKRFdoSjBUWXM2Wk5EdGw0VmdkUkwwTFk4TS91aVN6eU8yVHpIbUhHdVp1YVBrUEllUWROZXhIK2hIK2hIK2hIK2hzTUVmNkVmNkVmNkNUVnZvTm5WSnhJZE5NaTFKQ1RqRHBwazlKNlR5TE9rVnRXQkliYjhKWmxiRXZjRVhXTWFrbElqM1pIdXlIZGtLd2hqbGtPN0k5MlI3c1VpaGtpVCtoK29QMUJEbVpNWkx6QitvRS84QWhwWE1UQWxrUkdoSVlOOFRBbGt5TzlHMGhPZGJWekoxMkQ4eEJaWHRndStCQ1FxVFhEckMzS0o3bVQzTW51WnlaNmoxSHFQVU1CS0VsWDd4Q0xkekprV01tWGZvdEVhRTBua1M4TFFQcmE3Q3NxdEpxSFM4QmpRMHlRa2xqcXU2aWkwVnVsV0t3YVpsWFA4QWlTUHB0cklidzZTa1JWaVlramVuTWorY2tOdHUvU1NLN29oOXg1R1JRU3NLSjZid1NLanBKUDhBR2lzdW1zakVvbzdNaWlWRUdxVFV4aUUzU0trT2tVZ2dnZ2dnZ2dnZ2dpbGlVU2lheXgxRXJTSlZZdFJPc05HZFlWWkpFNko2SnBKSkpOSkpKME5FTnVvV2kybzBLaUNhb2xhdVhSdWJpeFI2NTBwU2VvNnlQNjZNTVJBVkxzalVkYzlNRVVpakZSOVI5dlhRM3NZcEk3aXBZTk5IcEpyQmNta1VkSm8xMFcwaHVhb2lsNVkxRGpwb0xhUjFWSkc3Q29QUVJnVHJNRnF5SjBpa3J1U2lLb2FSUklZSUd0Q0U1WEEwdnBKTEVrcXZzSFlXT2lsVk1USm83RTBTcWVkYVgySUV1OU1DSFl4c05FN0NTQnRNU3ZnUU5SU2F3eVo1T2cxMjBXSjZXVHJnV2txWEpuT25DaU5idVJJME1ORUNJa01ETG8zMExBbUpra2oxb1JyWFJtaVdYNkUwVFZLUkt3T1dsMVdDQ0NPd21nZEZvUzZLMXBaSGtoZGRYTnRhM1JScVhUQWwwbkE0a0NIVkoxd0tGMDFwZUtvWFVhSW5NNTlMSlBRbU9xVlV4RFJrT3RNWkpKUDhKOVJDRlNZQ2VxQ09reGtrNklJSC9JUWhVc0NLRTlCOUJiYUkwTWdqK09oREV0TkU2VUV5ZXRFOU02WW9qVkx3VmRocnBvUnNOVG9JVEpKSkpKSjZMRWhrazlGb2dhalEyN2NTSFI4OTNUUWhVc2VtU1NhTHBNWG9TVFRoazk2SG9MaXA1NlNFS2lYMW9rVDBMVXg2cDBUVmdkaXFIZmpvYWpwbFJKMW9FbUpkTnJST2hzYm9qZUpheVo0SVVWaFhFYmxpUjZGV1daNlZYWWRucFFxeDFKN1Zra1liMEdTTXU5RFRSVm5WT3BDRlJMem9RaEM2cmVpU2F4dVNJblRZTnRVaVI5WkNvazZDRUxyZi85b0FEQU1CQUFJQUF3QUFBQkEzdnQvL0FQeVpWNTloSkRCQkJCQlY1NWR4QkJBQXRiaURERGVXSU11MXR0ZEpscDlWOWxsVjVaeDljUTB3NE1RZVFVZzRBYzhVd01rRTh3a3NNTUk5RWNzMGNBWTRRMElBYzQ0TWtVY280OEE3ZndKeDhrNDRBVVVZSWNvRTg0OElnb2NRa2dZVkc4OVAwNDRrK1FnSHM4bzRFZ1VrZ0EwMG9JUWorc1B6TU0rS21XMysyZVNHZ2dRQTJDZzY4Nkhyb3h6RERyWHpXeWlDL1hETFVIZUYwakhsZ2V4Wjk5QjluM25GcFZwUEhyTnB3RS9OMWpSTmVkeHhGTk54VFhWeEJWdFIzbkFIWVFWWnR0Sjh4QmR0ZGxWTWVFUVFiTnpQWmZZazhzem5EbkFGUWQ5MUZ1N3pBWU1FcTFENFVOWW9vZ3JYZ0JkNVk1RnE4Vk5CbnNBWXdrS01la2NnNGc5MG83aFJjV25KRjVtQno4OHc3eWtJeVl3bzhrQUVVSkwwQXQ5eGRCMkRQcW50Tzc3YmpKUVBhRnZqbnhkdWtNSnh4QlBEQnROTkZwOUZwN3hDQjdEZnVYaVlvQWdaSkZUenBOaEZOekJSaG44b2JIZjlDNk9Dc2loaDV4eE41ZGxkUnExcFNjb2RqN2pYRCtxU1VHbkJkZ1lBSGh0Rmthb1Nab1RqYkRIdHh6ZDArOEQ0dEpoQk4wODRhRmZLMGdHQ2pEQk1PeGJxa2c4eGt3NHh6bnJIVGZUYng5WjhERFJUelFxWXNZYWlCQW93bGRCeEQ3Wjl0c0xERGpkZW5rVXFxZ01pZVA0Tzk1UnBZUXNNMGZqRERIRW84OFVvTUE0TXVwOHhCRFZFYzR3YzkvckREWHRxa1NDTUVFa1k0Ty96WmRCNTVCVWg1UjdERER4OXFBRitTZXV3MG9tL1ZwWlY1NGNSQzVSZkhMak41TURkK2NpWVEwRzhaUU1rdWdCQVZGTkQ5ckRpMHZCZ1FDVWNBd1dDZ0E4L0FoQzk5QURCRGpEY2RlQThjaWc4QWNBKy84UUFIQkVCQUFJQ0F3RUFBQUFBQUFBQUFBQUFBUUJBRVRBUUlGQmcvOW9BQ0FFREFRRS9FUHJzZlRzekMzanpDT2dqU05KYnh1TldiV2RtSUYxcm5Wcm5WOGNqTStJYVdrY05vNGRMNXhTWU1OQncyaHcwWFVJNi93RC94QUFlRVFBREFBTUJBQU1CQUFBQUFBQUFBQUFBQVJFUUlFQXdJVEZRY1AvYUFBZ0JBZ0VCUHhEK0VMOEtsS1VwUzczRHhjWGxlODY1MXoxbUVQTTFReWVGM2VGNFVYaFM2SjdJWjhpdWpvcVRkcllXa0ptWXZIYzBwU2xMaFBzUzF2TE5ucXVDYnRtNFQ1MnJzdkNFSVFndnhHTjZ2bVl4TVhnaUU5MlB5TGhZejdFSjRKOFMvSXNRbXk0akgrT3BqUStYMGw5NWZoLy94QUFwRUFFQUFnRURBZ1VGQVFFQkFBQUFBQUFCQUJFaEVERkJVV0VnY1pHaHNUQ0IwZkR4d2VGQS85b0FDQUVCQUFFL0VHY3paaHZyenB0NFdWb1NWLzZyanBYMDg3UTc2Vk9kYThIRVRXdEZTdkRYL2d1WHJYMGFqcVZyejQrSTdlRG1WY1p3K2xjdnhYTGw2R2hwV3RhMUsxUWJwb2E4L1FkSGFkKzBFYTIwc0MzQkVxR1ZHRkV6NFVYRE8wcGlCcFV4TGpmaHJwNGFpYVZLbGF2SkdEcGZxamRPcWlFc2pBZTJkNTNDTzRSM0NFWjgrY0FXejlybjdYTC9BTlFsU1ZjWUxZbkd6TEJpZ1RyRGlXTnRGMW1VaXFESjFnVmVlc0ZMS0h0UDVVL2lUK1JQNUUyTFQzaW9xSHpScTdHV0kzTVlnNFZTV1puWVBXZGc5WjJUMWdTOXhxQ2JSQ2NvTHVCNXNSUkxIUm42eCtaMy9vL003LzBmbWQzNlB6TFc3aGlGc2lUc1Q5eHBubngrNDB6OXhLLzVvaTA3d3hVb2psYmt1MTQ0ZVNaZ0F6a250WW9LbEc1UDRrRmpnWGduK0Uydk9XMTJNdFR2K3IrSTRnVmJ3VEFVQWJTdlJoRzFSMjNxTTl2QXVHVzdvSlZUZWIvSW4xT2phNVNjSlg2cWZwL0UvVCtKK244UzE3cGM1dlUrSmtrNUg4UllHRzVWa3lXb2NwaEtBQUZVSE1GakFLTEp0cmlUOXhLSWNOWWl5OTBRYktlVnE0cUhBMUxnTjFHSTBlVktwSmhOanM3WEUybTA3VHNlbVlHalZvZkViMWx1WkxnWnhQM0UvY1Q5eFAzRS9jUkxIRG1vb0ZyUjFaazNHWlJwdXdvYmIyanFxMXVMM2xqQmxidlNJd1U5WEJBRTJ2NGpweXFjUXlGeklDT3JTZTZRYlhlQ2UySVZzRktpdjd5djd3ajM1QTAzZUlQZTBmT3dXdlRQdkc2Z0dzcy9zdjRuOWwvRS9zdjRnclExWjk1dSt5VkFtVU0rVTJXN25saWdycnZsL0VIanNNTDE2eDZDc3VXQ2wyN3YrUzg0dGZ5SmJCOGtpcU12SzlvckhxM0tWdXpIM0lLRjNpK3pLK3M2UFlmZUtodTcvbUUybHZSZ3RwVDBJdTBIYnZBd25ZaDBwMmZlZFE5NXhHKzhvZkpPV1ZmSFlSdk9PZzJnanZCVjhRM0VkUERDRHNtV0dKMjhsN1FFV3gzZ0w3bGxQNmorM3NLTXErekJJSXB2THBtVlN6MmlGNG1EZWJua1FVd1RXWmxhZmFHbWRCbnQ0RzlUNTJjK1gvU2U0L0JQMkQ4VDlnL0VRYktjWW51azNmWkJaL3UwZHVOQUh2Q3Rac1YydUNiMk9KYm9LMitjeEFKMkJ4NXpDeVd2SktyY1M5MkY3QmNFdFRrd3NEN25hR1lzakVPcUtVYnlUT0JieTNPZjdjVWZ4d3l5eXF6QisvMk9aVUtXOXEzaFFZc0l6QnRWekhwQmF1SWorcjdSUzF6MTNpVmcyMFlHUlhhQ2t3YnZXREVHMmIybDZFNmhPejZKK29pQUNYWWhjcVdCUkV4YTNZcWZvVDk4aTZBVjFqUkp1Qk80UlQyWWpiYTE5NTg2ZTNoNmVrK2RuUGwvMG51UHdUdVBTZHg2UWdCTnozU2J2c243ZktidnNobEZlWTczQ25EZkZyS2VnNGx6d0h2RDZnRGxpMmMyTzAvc3Y0Z3dSaFpVUjM5cjhUZGxvdGwvWkxvTklqekVwNG1FYU9tRUlxeThvQXFGWVRkR3VqbUJERGpFQUZCS3FXUTFwcVVvS084RlJ0TGRJa3VEdkdkRVJ1Y3N2WGsybGF0dmttUEhKNU1BVVN2RXkwZHZ5bFpsTVBOZ0djTTkwbUZyb3hQYkVPRHJSRWZ0UHZEV0hGSTdzOGpQYnplKzArZGp2KytTZTQvQkQvdEovYVM5eHlidHozU2J2c242L0tidnNoVXdjcnQxbTErT3hjUlFSRTJQbkNPdVMwVmJ3K3hIY3VXNSt3SU5BMGJzcGxPUmhIT1ZTZ2haWlhVbVVSemV2RThtYUxYRHNtQ21IZFBKbnFvRllxTFpablFncmZVcTl6SzIxRlgyZ2dzbUV6TGIrRW9CemxsQWN4eHc1NDRZcDNPVHBITXducHpEd21GWTRTdnJPMDk1cEZ6UnZERzErRzVVMnZ0TERCeW1lN3V4UG5UMjgzdnRQblp6NVA4QVNlNC9CTzQrczdqNndGSHYxWWI4NW03N0orN3lod3ZJaURUVGsrOE1BTm5NZFVwWUpHSUFwTzQ5SWh5NHd1ZHg2UWtJbFZWQUl2bTdzU283c0lvcEUzOTRPakk3MlQ5Zy9NYlV6RGNtVHNvNUord2ZtR2xSZFhaR1RGbThCcUZLdk4wTEJVOUtXZlZ4TGw3cjJoS3JnMTZRVGs4NXNJOTJ4TjBuVnNFZWxYNWw1eXVpL3dCaTd0WGZKNnl2R2lNVlAwSjNIckNRRVYxWjc0aUtBZzd2TU9lUmFYRk9uYjMybnpzYmZsUHlTODN6ZDNVdTdBSExFQzNIRUNnMzNDQ0Y3d3VWWXhQamZFRnZOY08wN2ZtZTJaK24zaE8xb3h2TWZkUXJsYmZPVjhTWXltSEdialVDZ2JkOU9RUnZiOHl0Nkw1R2Z5WDh4MlFLdkJLUklxOGsva3Y1Z0hFTjRJVUIzaVRnNEMxbk8rNUxmRHBkVlVaNUdvcTh5TGN6RldKZnMxS2htd0RpRzR0cGNOQUE4cVlnSzlDTFpmZ1JTMWtLVVU3Nytzd3JaMGcxZUc0TjJGQlFGWkc1ZVlCMnNtZldjWFYzSFNGSXFsYlM4RlpETC84QVlqaWc5Z2hScGg3RTk0Zk1wU2x1Rm1USFIrWXN0VjZvZ0FVQUhhZDRCSmVrVnhUSGY5S05IUTZSZTdhMjFHcDdQUWpkZWxuTUdiVXpuZkdOZ2o1TjNNMlFqQ3krK0MvTWl4VGtsZk0xS2hEUExEZEhWaVZvaVNGT1ZxQWtoUVdNVnVKY0dDVDJHZDE2TWVxZnRHbzR0OTJVSkUxUkFzbHV4UWxuUjZ3VFJGZVU0RzN2QWx5bUFFN3hQS0x4dStJZHM4a0QwWlRveXBBZXBQMFNYY3JLSWdsbUZqTEhLSGVCV2xWdXVvV09WNGlHN25FODN0QThzY2djSFNCekF6VVVRdk03SXZlZk5LZ1VPTzh2MFY1UVNETjVqRFlUaUplTU81TWh1MlU3UzBKS05RQ1RhYlNxbDNZbHpjU2ViNnp6ZldHd1ZGbmxpT0l1Yk5Gd2N4YWFyUW84UjdUN1M1U1dTeVhMSmNHY1RISkhyY3lodmpxTXI3VEJNUkFOK2RBMDRZY2Fpb3RORGk2akFaU3UwcnRFQzNCRnhNRU1hWExsNlBnR1dya2pkK0ZMRlBMd2M2ak9GMm02L0FjazNlQjBBRVk3Z29nc2wwZFlHRE1xVjNnVFp6TGJtZWFIQmlKQktvWm5mcExnN2RKdExseGRMbDZ1bXhqcDBpVStOTEVOb2xlRlM2endiWG5ON3dYRnZNc0RnZ0tFckVyUU40RlloTXlzdysybURoODNxNlJWV3R2Z3VYcmN2d096Qm8vU0lkeWRHSW1wdE56d2JTYm5VM2hoN0V3aklEcTZzVGFNMmZBVFJydEZhTUhiNmx5OUhhRE9qRjIwcVY5QkRCNGl4MDMrRGVSMzFORHZGZ05NajI4Q1RaMUJ6bDZTeGJPbjBMMXV0UVhhSFhwZW5QUWx2N2gwSW1DQlVzOHpKdzltRklKcytGYUxYQkVYQ1pYZ2ozMUdqZHBWQUxYV09OZWpCSkxFanZxYkhiTVcvSnBlZlk4RHRIaExsWEk5WTJ0cmE2WDlEYlVUeEFtOEdMREVxRGwyMDNmZi9rckdsMXpVOTVPRUlnY3hRWVpkaWV4anJjZm94UU5EekFyS0JNR3U5SEJjV3o3SjNIcER1ZnhCVVMyYnJJUTViUGxHVkpTV3JOb3hDY3dobFc5MllpdUF1cGhzRHBEaXUvTWRwa3pVd0dIeThBUGVkcGRZbzZNVmwrTVR0QW04NGlqcXpKdVhxemdFelJiR1cwUzBiS3ZtRlNCYW1JdDdWN1QreS9pVnhJOEwrSUdNS2VaL1pmeEx2M09GanViNiszMDdkOG54b2o1UVVKSzdIemgrKzdkbWZ1WlkxYzcyeFhlWHZQM00vY3o5elAzTVFFMkZKbW16TG92cEJoTVI1cHUrWk52ellMVzcwaUZyd3F2Tm03NW5pcXRtQzJiQVVkWms5M3ZMWGJUYnBSMVRjYkIxaXM1Z3h5Nk0yMitWMTdRWm9TOUtmaVlZeTVLQ2JSTHU4ZVVLaGMxdy9FK2Ntejk5ZmE2YzVQVmxQMm5haXYzSVNPQWJ3bUhudEJkcU84cGVPNzVTbjNQaEttSzRjd2lnVWRuRWRSQlhXSkYzRiswcnpMTzB1SStzMm1JajQwVU56cks1ZC9GajU4K040WlhmRTJoanF6TnVYdkZlTWVEaG94M0JIVjFvVFk4a1FPaDlwbUd0eEVBbVJYNG03Ny84akdodWdKODVCRkMrbHpmYlJVSGJUbGEydWJuY2VzN2oxaHRaU3Q1Z1dydUxRMytFTmNMazN3UzNLeThIYUlLQlRjOW8vTEZhaGR6QnQ5Wm01SVlGc05vUVNwYzJQSlBZZmhtMTlCdllmaG14b3I1UzFvV3pLTzMybDlOb2FiblJZNVRRc1NtR0NnQ3VuTTJQSkZTQ21zYU1NS1U2eFJJVjBnS08xQ3VxRjNpT0NOdk1zcTVJMjVKVXQ4YWNCWTdLZkUva1QrQktXTElQdEhzY2t4VSt4bmVJN3hIdzdUdkVkNGgvcDNlS2xSSm1pVTZTanBBc2x2UWpLN1daKzUyWnRlUGlkRS9VN01DaFVFN3NkemdkSUFLRXA1bVptWjBzV2p0Tndac2FaZ0RidmY4QWsyUEpFelFYMXFXNDFERUNPQzJJQzZiU3pxUlp1Yk1zNytMM0gzYmdVRFlLbVo3VFR0N3llQVE5aERhUmwvOEFUTC82WTZZaDd6Mmo4c3p0VjZWTC93QzBqOTNKMWxjYkw2eTUzajFpcTI1V0Z0TUNNSklLYnpNQjRydVdUc0l3a2dwdk1BZ1YzWjNoNnh0MzB1WEtsVG1iM1ppRVdGVE1PdjhBcC9rMlBKQmVVWE1UQVBZbTJWcW8vaVF4Vm96d1BtQ1JhNnVzUUxRSGVkak94Z2tHNjIwNUExd0NmRTdlZHZPM2xSSTRUdnk3OHUvTHZ5QXBYeXVKMzVkK1hma1RZS3phNGFCZzZ5cTBOeWNHbzN4VVZuZ3ZSWHNhSVhCeGI0cU9WNGNHYlRFeE1UR2w2TzBIcWhBQThhWFA5djhBSnNlU2Q5R1YySnZhamxkMldWd1BZaHBISXFqa2drVHNlc2NlNEhEQzBiZ3Z3TTNDZ2x0dk1mSkwwOEhNemdqYnpOakZsMUg3L3dCVDkvNmxEdW1xcXA3UitXV2hzZHJuN2YxQU01OEhMM2dPWHdNVmJPbmFJWEhKWWFJbzQwdUF1MEU3eERHM1dXNGxueVJDNDVMRzRDcjA1U0FMUEJ4clIyd3RqcGNDajRMamFWd20wQ2h0NE9ZdDl3UFFuNkFkTHppZVRyTUpMWFBKR2hOdGpwUDZNL296K2pML0FPbWJkL1hMNnZYTDZ2WFBQNjR1RmtPcnRDRTRLMHFGVDJnZFVvNHFibnNRTWN2aEZiRmI0TGpuZVVIR2wyUzNKRHJnZENGdjZJSlZHQWc5QVR2RmJHNWpyS01HOFZXNWtTWExseGRXVWVFR0RTNHlDeVo5bjFqZmZ6Z0FvS1BCdDA5NGJRb2xWSFFaZG5ndlM1Y0FpTEhpSVpiRHpoS1ZITDFtMzBGajJRaUprbHU2TGdGeVF2dExSb2JSWTZUempObVhxN2ZWSmVodzhBZENIaE10Um5wSGJ4M28yVlltSk5tTE4yaHVKUTB5N3FPSmN1RVZvY2N5N2FKU2I2WG9hVktsU3RLSlVyVThvOUpVclVoQ1ZLaEhWNlM1TDdUangzRE1KOWlMY0JOcGFKeEZWSU1kNEpsa3FwTTFrbzNnaVZFcmFadmFITE1FbTh5M3d4STR6THZjWnMybHNPcU5SZWtHd2ZvM041VTJsU3BVcVZwOXBjNmhldlNicXFxeCtoVTJDV1dwdkhmVE5oWnpLelVybkV1UEtQZHd4QkVYbU83cmlGcWlXTnlaZHFnZG1HUXVVWWlQUktOb0ZtaE16elR6enp5dldWbGVzcjE4QnJLeWlXT21oVVdvVHBYa3pieHVwSG9CM3FVNTVtMm1TWlk1Sllva0pKWkZJN1ZaS0p2QTZ3TjN0RWxITUEyaVMwMmd1U01oMWpLSFJNUzJXbHN0RlM4SEw3eFhXWDZzdDFaY3VYQUxYN1JqTzNUd1g5RGRBRjYzRjhESzBSek5SSXhzVzdSNFJZM2RkWm5NcE5Ic2xNU0pFWlRLZUdOOUpSQ2oyaVZDdlFLZkN6aTRRdGtjUzVjVFpMbGI5RVZXM2Y2d0tyQTJEb2JTb1o3eHIySVNjUktzUVJnaGZLcHhDZFhWUTNsREhRZEZRMDNGVDU2Q3laR3ZDUERLNlMyNml5NHVJbDA2N3p2ejRiK2lZQmdXMVZFU3RPOEZZVmxNaUpHRE02SkYybU9zdUtvN1ptNVdZcVJndUdEWkhNdzJaaE82WVk5RVJnczJtMjhPRHBZZDRpYnlwVDBpSnZLZ3BETHRFWnVqZmxIN0RwSFFXMUVXczlTTXk4TDRrY3dCTGVYVzYwV3BuekhlV09zQm9rcUFOb0I2d0tUTVc5RjRJY1FXUFQxYktTQ3BSTWs3aUlZWWx5M1NCVzZTamhIcnpnWEtkUGVNcFdZVjR1UEVFdEFsbHpLREJvaWI2Ym9sRjV5aUl2MHE4NG1BQ1hHbmVZSUN0bUdrNk14ektJT041ZG1aY1c4UlY3UUtJeWg3U255Z0htSlpUQmFvSTVoMUVFNWdnb1RFWEQzTXU3RExkb3NsMjhBNVdkcjNoMEVhTjByeWdsMjhzeTAyd1h5SlFFcDNXRzBITjd4UmU4dEdZK2N1OUJOaGcvRlREWVBLSmNzR3JYMjhDRWN3ZVlNdlI0aUtsK0UzZ3BkdkFveG95bytKVUViUkFvVk8wclE2bjBoMG9BMkRSVXFVVEVhNGcxRFNvUUFiRXFCS3hYRUI3TXBhUWkzRU9TMkEyQ1VETDlvWmd4RllxN3NHb2Q5WFZvT3pBMjZTaEMwZGtZYTFBdVhaWUExUVpVU2JOekl2U3RLOEZrU2JwRThXK1JMdGoxbHJtdktWMVdCNGJJa2owRVU4Ni9ZUUdvVGxMbDZkSnVkZGlCNWdkNHZ6UUhCaVRmZlRacldrYXBxNk9tcGN1Ynl0SHBGbHV3RXM3cjdRRGp4WExseTRzdVhMbHcyN1FLNFRuckZ2d2szUWc1VG5CaUJBZ1poTFN6UWh0S2hvQThGUklrQzV0dEZvMVpLZFVPa3c3OE9wOUM1ZWwxb1dYTGx5NFphbnZGRjhSSGZRWXJoRFEyaFZCR3hwaHZxVlVHb090YU1xVmlKQVNtT1RMSzNSRGpGczVNZUs1Y3ZReGN2eE5IZGkzOVVOQ1pTYm9hRmVKaEFxTVBCZmdjUzNFMlF6V1pKRERXcFVyUlpjV1hMbCtHK1lyZnFiNXMxbGdlc3VnK0JDSTBiUmwrSklNVkxGemREWktnUUlRaUNvNlBpdUxGK3VQSkhlREoxakdJYkNMbHk1YzNsU29LaHJ6S2xSSmJZbHk5b0VLU3dpeStzVjZHRWxlRlpjZnFqbldGQWt1QzQwUVlQYlR0aEF5NE11TXZSWVJsUmlZbVFOdExyYUxGclJlaEt2UXJpTklsYUxGMDJnaXBVTHJXSHora2J4eTBwYlhMZzdlQlZLNERpRWttaGFEalIzaHJVcUd5cFlSSEhpRXFCS2dNYnk1bUxxZE94aEVRZUk3UWtUYlo1eDMrazZpaWFyUVduZlVoQ2tJSXU5b0ppb011R2pxeTBKTDU4Uk1HOGVrbHVWbUp0dUVHdFV2ckJaU1ptN1dnam1FZ2NrdkZRd2lia3lUMStrbzR0S3I5ZkFhREZPeUpDOVBMUmVsYU9qTVR3NE40OENiNktFWkZCdUZ6ZWV6R00raUlqVHE5UWxSSzNnWENvN3piYVhwVEtyd0VXZ1prT25nSVFKYUsySXBEcEFwZ1psZUdva0RRbTI3SHBtOENiYWpkdzV1WE51T0k1bEs2UWI5WUdZbWVzU21LTHVzaWJKVnJTSk1FVjZrcFFRNGVBanBnd2lXanJCWWFrQ0VJQ0JLbEpYall4bGNzYTRoWmVpdWhib0Z0RUJnWVNqWTk1U2R0OHhjOFlseFhRWERiRWNSVG8rQzlWRjhLamloS2dPZkZMVmMzOFRFbFNvaTI2ckdGeTcwTUxZSmhRRlNqYmJKUTRTNHZwUzJGV05GVG95TGo0dVpUNFNPS0V1TzBxVnJ3TlpDWDRuVzZKLy85az0iLAogICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKCJodHRwczovL3NsZWF6eWZvcmsub3JnL3NjcmlwdHMvMjMzMTYiKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdmFyIGF1ZGlvQ29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTsKICAgICAgICBmdW5jdGlvbiBwbGF5U291bmQoYnVmZmVyKSB7CiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBhdWRpb0NvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7CiAgICAgICAgICAgIHNvdXJjZS5idWZmZXIgPSBidWZmZXI7CiAgICAgICAgICAgIHNvdXJjZS5jb25uZWN0KGF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbik7CiAgICAgICAgICAgIHNvdXJjZS5zdGFydCgwKTsKICAgICAgICB9CiAgICAgICAgdmFyIHR0c3M9WyLmnInlrrbvvIzmnInniLHvvIzmnInmrKfmtL4iLCLmnKrooqvnqb/ov4fnmoTog5bmrKHmmK/msqHmnInku7flgLznmoQiLCLlt6jkubPlj6rmnInkuIvlnoLnmoTmnKrmnaUiLCLnlLfkurrlj5jmgIHmnInku4DkuYjplJkiLCLkuLrku4DkuYjkvaDkvJrov5nkuYjnhp/nu4PllYoiLCLlvrflm73nmoTnp5HlrabmioDmnK/mmK/kuJbnlYznrKzkuIAiLCLlnKjomZrmnoTnmoTmlYXkuovlvZPkuK3lr7vmsYLnnJ/lrp7mhJ/nmoTkurrohJHooovkuIDlrprmnInpl67popgiLCIg6IO46YOo5LuA5LmI55qE77yM5piO5piO5Y+q5piv6KOF6aWwIiwi5YuH5aOr5Zac5qyi5beo5Lmz5pyJ5LuA5LmI6ZSZIiwi5ZOl5ZOl6K6p5byA77yB6L+Z5qC35oiR5p2A5LiN5LqG6YKj5a625LyZIiwi5oiR5Lus55qE5a6H5a6Z5YWF5ruh5LqG6LSo5a2QLOS4reWtkCznlLXlrZAs6L+Y5pyJ5aW25a2QIiwi5pyJ5Liq6IO95bmy55qE5aa55aa555yf5aW9Iiwi5Y+q6KaB5Y+v54ix5bCx566X5piv55S35a2p5a2Q5Lmf5rKh5YWz57O7Iiwi6YGT5q2J5pmC6Zyy5Ye66IO46YOo5piv5bi46K2YIiwi5oiR5bCx5piv5Y+r57Sr5aaI5oCO5LmI5LqGIOacieacrOS6i+eqgeeEtuS7juaIkeiDjOWQjuWHuueOsCDmiormiJHnmoTohLjmjInlnKjplK7nm5jkuIphcXN3ZGVjdGZydnRnaHVuaWpvcGlvaWpvaG51eWdieWZ2dGNkZXN4d2VkcmZ2dGJndXloaXVtaml1eXZmdHJzc2V4cnlidGdueXVobSIsIuWPjeWfuuWkjeiQjO+8jOWPjeWxjOWkjeWltiIsIuWTvO+8gemDveaAquS9oO+8jOS5n+S4jeWThOWThOS6uuWutu+8jOS6uuWutui2heaDs+WTreeahO+8jOaNtuS9oOiDuOWPo++8jOiAgeWFrO+8geWkp+Wdj+ibi++8geWSqVFBUSDmjbbkvaDog7jlj6PvvIzkvaDlpb3orqjljozvvIHopoHmirHmirHlmKTlmKTlmKTvvIzlk7zvvIzkurrlrrbmi7/lsI/mi7Pmi7PmjbbkvaDog7jlj6PvvIHlpKflnY/om4vvvIzmiZPmrbvkvaAiXTsKICAgICAgICB2YXIgdHRzUmFuZD1NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqdHRzcy5sZW5ndGgpOwogICAgICAgIHZhciB0dHM9dHRzc1t0dHNSYW5kXTsKICAgICAgICB2YXIgc1VybCA9ICJodHRwOi8vdHRzLmJhaWR1LmNvbS90ZXh0MmF1ZGlvP2xhbj16aCZpZT1VVEYtOCZzcGQ9NSZ0ZXh0PSIrdHRzOy8vYGh0dHA6Ly90dHMuYmFpZHUuY29tL3RleHQyYXVkaW8/bGFuPXpoJmllPVVURi04JnNwZD01JnRleHQ9JHt0dHN9YDsKICAgICAgICB2YXIgcCA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICB2YXIgcmV0ID0gR01feG1saHR0cFJlcXVlc3Qoe21ldGhvZDogIkdFVCIsdXJsOiBzVXJsLHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJywKICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9Db250ZXh0LmRlY29kZUF1ZGlvRGF0YShyZXMucmVzcG9uc2UsIGZ1bmN0aW9uKGJ1ZmZlcikge3Jlc29sdmUoYnVmZmVyKTt9KTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGNvbW1hbmQ9WzcyLDY1LDkwLDg1LDc1LDY1LDgzLDcyLDczLDczXSxpbmRleD0wOy8vImhhenVrYXNoaWkiCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgaWYoZS5rZXlDb2RlPT1jb21tYW5kW2luZGV4XSkgewogICAgICAgICAgICAgICAgaWYoaW5kZXg9PWNvbW1hbmQubGVuZ3RoLTEpewogICAgICAgICAgICAgICAgICAgIGluZGV4PTA7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5vd1ZhbHVlPUdNX2dldFZhbHVlKCJoYXp1a2FzaGlpIik7CiAgICAgICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoImhhenVrYXNoaWkiLCAhbm93VmFsdWUpOwogICAgICAgICAgICAgICAgICAgIGlmKG5vd1ZhbHVlKXsKICAgICAgICAgICAgICAgICAgICAgICAgcC50aGVuKHBsYXlTb3VuZCwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIGluZGV4Kys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgaW5kZXg9MDsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICAvL3JlZmVyIHRvICJNeSBNb3VzZSBHZXN0dXJlcyItdmVyLjAuMC43IG9mIFBlZXIgWmVuZyBhdCBbaHR0cDovL3VzZXJzY3JpcHRzLW1pcnJvci5vcmcvc2NyaXB0cy9zaG93LzQ2MzkwNF0sIHRoYW5rcyB0byBoaW0KICAgICAgICBjb25zdCBtaW5MZW5ndGg9MjU2LHRnPTAuNTsKICAgICAgICB2YXIgbGFzdFgsIGxhc3RZLCBzaWducywgbGFzdFNpZ247CiAgICAgICAgZnVuY3Rpb24gdHJhY2VyKGUpIHsKICAgICAgICAgICAgbGV0IGN1clg9ZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYLGN1clk9ZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZOwogICAgICAgICAgICBsZXQgZGlzdGFuY2VYPWN1clgtbGFzdFgsZGlzdGFuY2VZPWN1clktbGFzdFk7CiAgICAgICAgICAgIGxldCBkaXN0YW5jZT1kaXN0YW5jZVgqZGlzdGFuY2VYK2Rpc3RhbmNlWSpkaXN0YW5jZVk7CiAgICAgICAgICAgIGlmIChkaXN0YW5jZT5taW5MZW5ndGgpIHsKICAgICAgICAgICAgICAgIGxhc3RYPWN1clg7CiAgICAgICAgICAgICAgICBsYXN0WT1jdXJZOwogICAgICAgICAgICAgICAgbGV0IGRpcmVjdGlvbj0iIjsKICAgICAgICAgICAgICAgIGxldCBzbG9wZT1NYXRoLmFicyhkaXN0YW5jZVkvZGlzdGFuY2VYKTsKICAgICAgICAgICAgICAgIGlmKHNsb3BlPnRnKXsKICAgICAgICAgICAgICAgICAgICBpZihkaXN0YW5jZVk+MCkgewogICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb249IuKGkyI7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbj0i4oaRIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9ZWxzZSBpZihzbG9wZTw9MS90ZykgewogICAgICAgICAgICAgICAgICAgIGlmKGRpc3RhbmNlWD4wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbj0i4oaSIjsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uPSLihpAiOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGxhc3RTaWduIT1kaXJlY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICBzaWducys9ZGlyZWN0aW9uOwogICAgICAgICAgICAgICAgICAgIGxhc3RTaWduPWRpcmVjdGlvbjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0IiwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICBsYXN0WD1lLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7CiAgICAgICAgICAgIGxhc3RZPWUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WTsKICAgICAgICAgICAgbGFzdFNpZ249c2lnbnM9IiI7CiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsIHRyYWNlciwgZmFsc2UpOwogICAgICAgIH0sIGZhbHNlKTsKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaGVuZCIsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigidG91Y2htb3ZlIiwgdHJhY2VyLCBmYWxzZSk7CiAgICAgICAgICAgIGlmKHNpZ25zPT0i4oaT4oaS4oaR4oaQIil7CiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgaWYod2luZG93LmNvbmZpcm0oIlx1NjYyZlx1NTQyNlx1Nzk4MVx1NzUyOFx1N2Y5ZVx1ODAzYlx1MDA3MFx1MDA2Y1x1MDA2MVx1MDA3OVx1OGJlZFx1OTdmM1x1ZmYxZiIpKXsKICAgICAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgiaGF6dWthc2hpaSIsIHRydWUpOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoImhhenVrYXNoaWkiLCBmYWxzZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LCBmYWxzZSk7CiAgICAgICAgaWYoIUdNX2dldFZhbHVlKCJoYXp1a2FzaGlpIikpewogICAgICAgICAgICBwLnRoZW4ocGxheVNvdW5kLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgR01fbm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbkRldGFpbHMpOwogICAgICAgIH0KICAgIH0KfSkoKTs="},{"name":"挊","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http*://avio.pw/*","http*://avso.pw/*","http*://avxo.pw/*","http*://www.av28.com/*/movie/*","http*://*javlibrary.com/*","http*://*javlib.com/*","http*://*javl10.com/*","http*://*jav11b.com/*","http*://www.libredmm.com/products/*","http*://www.javbus.com/*","http*://www.javbus.me/*","http*://www.javbus2.com/*","http*://www.javbus3.com/*","http*://www.javbus5.com/*","http*://www.icpmp.com/fanhao/*.html","http*://blog.jav4you.com/*","http*://*1pondo.tv/*/index.htm","http*://www.dmm.co.jp/digital/videoa/*","http*://www.jade-net-home.com/products/*","http*://pan.baidu.com/disk/home*","http*://115.com/?tab=offline&mode=wangpan","http*://www.furk.net/users/files/add"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-end","use_blockers":[],"use_connects":["btso.pw","btdb.in"],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"magnet":"s","search_index":"s0"},"ts":1498566512486},"enabled":false,"position":14,"file_url":"https://sleazyfork.org/scripts/8392-%E6%8C%8A/code/%E6%8C%8A.user.js","uuid":"20d1cb55-a733-4bc4-9be3-81a084ab1875","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIOaMigovLyBAbmFtZXNwYWNlICAg5pK4Ci8vIEBkZXNjcmlwdGlvbiDoh6rliqjojrflj5bno4Hpk77mjqXlubboh6rliqjnprvnur/kuIvovb0KCi8vIEBpbmNsdWRlICAgICBodHRwKjovL2F2aW8ucHcvKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly9hdnNvLnB3LyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vYXZ4by5wdy8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3d3dy5hdjI4LmNvbS8qL21vdmllLyoKCi8vIEBpbmNsdWRlICAgICBodHRwKjovLypqYXZsaWJyYXJ5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovLypqYXZsaWIuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vKmphdmwxMC5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly8qamF2MTFiLmNvbS8qCgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly93d3cubGlicmVkbW0uY29tL3Byb2R1Y3RzLyoKCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3d3dy5qYXZidXMuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vd3d3LmphdmJ1cy5tZS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3d3dy5qYXZidXMyLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3d3dy5qYXZidXMzLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3d3dy5qYXZidXM1LmNvbS8qCgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly93d3cuaWNwbXAuY29tL2Zhbmhhby8qLmh0bWwKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vYmxvZy5qYXY0eW91LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovLyoxcG9uZG8udHYvKi9pbmRleC5odG0KLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vd3d3LmRtbS5jby5qcC9kaWdpdGFsL3ZpZGVvYS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3d3dy5qYWRlLW5ldC1ob21lLmNvbS9wcm9kdWN0cy8qCgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly9wYW4uYmFpZHUuY29tL2Rpc2svaG9tZSoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vMTE1LmNvbS8/dGFiPW9mZmxpbmUmbW9kZT13YW5ncGFuCi8vIEBpbmNsdWRlICAgICBodHRwKjovL3d3dy5mdXJrLm5ldC91c2Vycy9maWxlcy9hZGQKCi8vIEB2ZXJzaW9uICAgICAxLjQ4Ci8vIEBydW4tYXQgICAgICBkb2N1bWVudC1lbmQKLy8gQGdyYW50ICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vIEBncmFudCAgICAgICBHTV9zZXRDbGlwYm9hcmQKLy8gQGdyYW50ICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICBHTV9nZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgR01fYWRkU3R5bGUKLy8gQGdyYW50ICAgICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQKLy8gPT0vVXNlclNjcmlwdD09Cgp2YXIgbWFpbiA9IHsKICAvL2F25L+h5oGv5p+l6K+iIOexuwogIGphdjogewogICAgdHlwZTogMCwKICAgIHJlOiAvKGF2aW98YXZzb3xhdnhvfGF2MjgpLiptb3ZpZS4qLywKICAgIGluc2VydF93aGVyZTogIiNtb3ZpZS1zaGFyZSIsCiAgICB2aWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5oZWFkZXIiKS5uZXh0RWxlbWVudFNpYmxpbmcuaW5uZXJIVE1MOwogICAgfQogIH0sCiAgamF2bGlicmFyeTogewogICAgdHlwZTogMCwKICAgIHJlOiAvKGphdmxpYnJhcnl8amF2bGlifGphdmwxMHxqYXYxMWIpLipcP3Y9LiovLAogICAgaW5zZXJ0X3doZXJlOiAiI3ZpZGVvX2Zhdm9yaXRlX2VkaXQiLAogICAgdmlkOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdmlkZW9faWQiKS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ0ZXh0IilbMF0uaW5uZXJIVE1MOwogICAgfQogIH0sCiAgamF2YnVzOiB7CiAgICB0eXBlOiAwLAogICAgcmU6IC9qYXZidXMvLAogICAgaW5zZXJ0X3doZXJlOiAiI3N0YXItZGl2IiwKICAgIHZpZDogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmhlYWRlciIpLm5leHRFbGVtZW50U2libGluZy50ZXh0Q29udGVudDsKICAgIH0KICB9LAogIGZhbmhhb2t1OiB7CiAgICB0eXBlOiAwLAogICAgcmU6IC9pY3BtcC8sCiAgICBpbnNlcnRfd2hlcmU6ICIubW9kX2ZpbG0iLAogICAgdmlkOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIudGl0bGVfaW5uZXIiKS50aXRsZTsKICAgIH0KICB9LAogIGxpYnJlZG1tOiB7CiAgICB0eXBlOiAwLAogICAgcmU6IC9saWJyZWRtbS8sCiAgICBpbnNlcnRfd2hlcmU6ICIuY29udGFpbmVyIiwKICAgIHZpZDogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gbG9jYXRpb24uaHJlZi5tYXRjaCgvcHJvZHVjdHNcLyguKikvKVsxXTsKICAgIH0KICB9LAogIGJsb2dqYXY0eW91OiB7CiAgICB0eXBlOiAwLAogICAgcmU6IC9ibG9nXC5qYXY0eW91XC5jb20vLAogICAgaW5zZXJ0X3doZXJlOiAiLnBvc3R0ZXh0IiwKICAgIHZpZDogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnBvc3R0aXRsZSBhIikudGV4dENvbnRlbnQubWF0Y2goL1xbKC4qKVxdLylbMV07CiAgICB9LAogIH0sCiAgcG9uZG8xOiB7CiAgICB0eXBlOiAwLAogICAgcmU6IC8xcG9uZG9cLnR2LipcL2luZGV4Lmh0bS8sCiAgICBpbnNlcnRfd2hlcmU6ICIuaGRnMyIsCiAgICB2aWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCIvIilbM107CiAgICB9LAogIH0sCiAgamFkZW5ldGhvbWU6ewogICAgdHlwZTowLAogICAgcmU6L2phZGUtbmV0LWhvbWUvLAogICAgaW5zZXJ0X3doZXJlOiIuZGV0YWlsU3RvcnkiLAogICAgdmlkOmZ1bmN0aW9uKCl7CiAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjZGV0YWlsUmlnaHQgZGwgZGQiKS50ZXh0Q29udGVudDsKICAgIH0KICB9LAogIGRtbTogewogICAgdHlwZTogMCwKICAgIHJlOiAvZG1tXC5jb1wuanAvLAogICAgaW5zZXJ0X3doZXJlOiAiLmxoNCIsCiAgICB2aWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHJlc3VsdCA9IGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvLipjaWQ9LywgIiIpLnJlcGxhY2UoL1wvXD8/LiovLCAiIikubWF0Y2goL1teaF8wLTldLiovKTsKICAgICAgcmV0dXJuIHJlc3VsdFswXSA/IHJlc3VsdFswXS5yZXBsYWNlKCIwMCIsICIiKSA6ICIiOwogICAgfQogIH0sCgogIC8v572R55uY5LiL6L29IOexuwogIC8v6L+Z5LqbICQg5piv55yf5q2j55qEIGpxdWVyeQogIGJhaWR1OiB7CiAgICB0eXBlOiAxLAogICAgcmU6IC9wYW5cLmJhaWR1XC5jb20vLAogICAgZmlsbF9mb3JtOiBmdW5jdGlvbiAobWFnbmV0KSB7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5nLWJ1dHRvbltkYXRhLWJ1dHRvbi1pZD1iMTNdIikuY2xpY2soKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI19kaXNrX2lkXzIiKS5jbGljaygpOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NoYXJlLW9mZmxpbmUtbGluayIpLnZhbHVlID0gbWFnbmV0OwogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmctYnV0dG9uW2RhdGEtYnV0dG9uLWlkPWI2NV0iKS5jbGljaygpOwogICAgICAgIH0sIDUwMCk7CiAgICAgIH0sIDE1MDApOwogICAgfQogIH0sCiAgMTE1OiB7CiAgICB0eXBlOiAxLAogICAgcmU6IC8xMTVcLmNvbS8sCiAgICBmaWxsX2Zvcm06IGZ1bmN0aW9uIChsaW5rKSB7CiAgICAgIHZhciByc2MgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT0gImNvbXBsZXRlIikgewogICAgICAgICAgY2xlYXJJbnRlcnZhbChyc2MpOwogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIENvcmVbIk9GRkw1UGx1ZyJdLk9wZW5MaW5rKCk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICQoIiNqc19vZmZsaW5lX25ld19hZGQiKS52YWwobGluayk7CiAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9CiAgICAgIH0sIDQwMCk7CiAgICB9CiAgfSwKICBsZXR2OiB7CiAgICB0eXBlOiAxLAogICAgcmU6IC9jbG91ZFwubGV0dlwuY29tLywKICAgIGZpbGxfZm9ybTogZnVuY3Rpb24gKGxpbmspIHsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgJCgiI29mZmxpbmUtYnRuIikuY2xpY2soKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICQoIiNvZmZsaW5lX2NsZWFyX2NvbXBsZXRlIikucHJldigpLmNsaWNrKCk7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgJCgiI29mZmxpbmUtYWRkLWxpbmsiKS52YWwobGluayk7CiAgICAgICAgICB9LCA1MDApOwogICAgICAgIH0sIDEwMDApOwogICAgICB9LCAyMDAwKTsKICAgIH0KICB9LAogIGZ1cms6IHsKICAgIHR5cGU6IDEsCiAgICByZTogL3d3d1wuZnVya1wubmV0LywKICAgIGZpbGxfZm9ybTogZnVuY3Rpb24gKGxpbmspIHsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgJCgiI3VybCIpLnZhbChsaW5rLnJlcGxhY2UoIm1hZ25ldDo/eHQ9dXJuOmJ0aWg6IiwgIiIpKTsKICAgICAgfSwgMTUwMCk7CiAgICB9CiAgfSwKICAzNjA6IHsKICAgIHR5cGU6IDEsCiAgICByZTogL3l1bnBhblwuMzYwXC5jblwvbXkvLAogICAgZmlsbF9mb3JtOiBmdW5jdGlvbiAobGluaykgewogICAgICB5dW5wYW4uY21kQ2VudGVyLnNob3dPZmZsaW5lRGlhKCk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICQoIi5vZmZkbC1idG4tY3JlYXRlIikuY2xpY2soKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICQoIiNvZmZkbFVybCIpLnZhbChsaW5rKTsKICAgICAgICB9LCA1MDApOwogICAgICB9LCAxMDAwKTsKICAgIH0KICB9LAogIHVjOiB7CiAgICB0eXBlOiAxLAogICAgcmU6IC9kaXNrXC55dW5cLnVjXC5jblwvLywKICAgIGZpbGxfZm9ybTogZnVuY3Rpb24gKGxpbmspIHsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgJCgiI25ld3VjbHhidG5faW5kZXgiKS5jbGljaygpOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgJCgiI3VjbHh1cmwiKS52YWwobGluayk7CiAgICAgICAgfSwgMTAwMCk7CiAgICAgIH0sIDEyMDApOwogICAgfQogIH0sCgp9OwoKdmFyIG9mZmxpbmVfc2l0ZXMgPSB7CiAgYmFpZHU6IHsKICAgIHVybDogImh0dHA6Ly9wYW4uYmFpZHUuY29tL2Rpc2svaG9tZSIsCiAgICBuYW1lOiAi55m+5bqm5LqRIiwKICAgIGVuYWJsZTogdHJ1ZQogIH0sCiAgMTE1OiB7CiAgICBuYW1lOiAiMTE156a757q/IiwKICAgIHVybDogImh0dHA6Ly8xMTUuY29tLz90YWI9b2ZmbGluZSZtb2RlPXdhbmdwYW4iLAogICAgZW5hYmxlOiB0cnVlLAogIH0sCiAgdmFydjogewogICAgbmFtZTogIuS5kOinhuS6kSIsCiAgICB1cmw6ICJodHRwOi8vY2xvdWQubGV0di5jb20vd2ViZGlzay9ob21lL2luZGV4IiwKICAgIGVuYWJsZTogZmFsc2UKICB9LAogIDM2MDogewogICAgbmFtZTogIjM2MOS6kSIsCiAgICB1cmw6ICJodHRwOi8veXVucGFuLjM2MC5jbi9teS8iLAogICAgZW5hYmxlOiBmYWxzZQogIH0sCiAgdWM6IHsKICAgIG5hbWU6ICJVQ+emu+e6vyIsCiAgICB1cmw6ICJodHRwOi8vZGlzay55dW4udWMuY24vIiwKICAgIGVuYWJsZTogZmFsc2UKICB9LAogIGZ1cms6IHsKICAgIG5hbWU6ICJGdXJrIiwKICAgIHVybDogImh0dHBzOi8vd3d3LmZ1cmsubmV0L3VzZXJzL2ZpbGVzL2FkZCIsCiAgICBlbmFibGU6IHRydWUKICB9LAp9Owp2YXIgY29tbW9uID0gewogIGFkZF9zdHlsZTogZnVuY3Rpb24gKCkgewogICAgR01fYWRkU3R5bGUoWwogICAgICAiI25vbmctdGFibGV7Ym9yZGVyLWNvbGxhcHNlOiBpbml0aWFsICFpbXBvcnRhbnQ7YmFja2dyb3VuZC1jb2xvcjogd2hpdGUgIWltcG9ydGFudDt0ZXh0LWFsaWduOiBjZW50ZXIgIWltcG9ydGFudDttYXJnaW46MTBweCBhdXRvO2NvbG9yOiM2NjYgIWltcG9ydGFudDtmb250LXNpemU6MTNweDt0ZXh0LWFsaWduOmNlbnRlciAhaW1wb3J0YW50O2JvcmRlcjogMXB4IHNvbGlkICNjZmNmY2YgIWltcG9ydGFudDtib3JkZXItcmFkaXVzOiAxMHB4ICFpbXBvcnRhbnQ7fSIsCiAgICAgICIjbm9uZy10YWJsZSBhIHttYXJnaW4tcmlnaHQ6IDVweCAhaW1wb3J0YW50O2NvbG9yOmJsdWV9IiwKICAgICAgIiNub25nLXRhYmxlIGE6aG92ZXIge2NvbG9yOiNkMjBmMDAgIWltcG9ydGFudDt9IiwKICAgICAgIiNub25nLXRhYmxlIHRoLCNub25nLXRhYmxlIHRke3RleHQtYWxpZ246IGluaGVyaXQgIWltcG9ydGFudDtoZWlnaHQ6MzBweDtwYWRkaW5nOjAgMWVtIDAgIWltcG9ydGFudDt9IiwKICAgICAgIi5ub25nLXJvd3t0ZXh0LWFsaWduOiBpbmhlcml0ICFpbXBvcnRhbnQ7aGVpZ2h0OjMwcHg7cGFkZGluZzowIDFlbSAwICFpbXBvcnRhbnQ7Ym9yZGVyOiAxcHggc29saWQgI0VGRUZFRiAhaW1wb3J0YW50O30iLAogICAgICAiLm5vbmctcm93OmhvdmVye2JhY2tncm91bmQtY29sb3I6ICNkYWU4ZmYgIWltcG9ydGFudDt9IiwKICAgICAgIi5ub25nLW9mZmxpbmUtZG93bmxvYWR7Y29sb3I6IHJnYigwLCAxODAsIDMwKSAhaW1wb3J0YW50O30iLAogICAgICAiLm5vbmctb2ZmbGluZS1kb3dubG9hZDpob3Zlcntjb2xvcjpyZWQgIWltcG9ydGFudDt9IiwKICAgIF0uam9pbigiIikpOwogIH0sCiAgaGFuZGxlX2NvcHlfZXZlbnQ6IGZ1bmN0aW9uIChldmVudCkgewogICAgZXZlbnQudGFyZ2V0LmlubmVySFRNTCA9ICLmiJDlip8iOwogICAgR01fc2V0Q2xpcGJvYXJkKGV2ZW50LnRhcmdldC5ocmVmKTsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBldmVudC50YXJnZXQuaW5uZXJIVE1MID0gIuWkjeWItiI7CiAgICB9LCAxMDAwKTsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8v6Zi75q2i6Lez6L2sCiAgfSwKICBoYW5kbGVfZGxfZXZlbnQ6IGZ1bmN0aW9uIChldmVudCkgewogICAgdmFyIG1hZyA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoIm1hZyIpOwogICAgY29uc29sZS5pbmZvKCLno4Hpk77mjqUiLCBtYWcpOwogICAgLy9jb25zb2xlLmxvZygwKTsKICAgIEdNX3NldFZhbHVlKCJtYWduZXQiLCBtYWcpOwogIH0sCgogIHJlZ19ldmVudDogZnVuY3Rpb24gKCkgewogICAgdmFyIHNlbGVjdG9yX2V2ZW50X21hcCA9IFt7CiAgICAgIHNlbGVjdG9yOiAiLm5vbmctY29weSIsCiAgICAgIHR5cGU6ICJjbGljayIsCiAgICAgIGZuOiB0aGlzLmhhbmRsZV9jb3B5X2V2ZW50CiAgICB9LCB7CiAgICAgIHNlbGVjdG9yOiAiLm5vbmctb2ZmbGluZS1kb3dubG9hZCIsCiAgICAgIHR5cGU6ICJjbGljayIsCiAgICAgIGZuOiB0aGlzLmhhbmRsZV9kbF9ldmVudAogICAgfV07CiAgICBzZWxlY3Rvcl9ldmVudF9tYXAuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7CiAgICAgIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChvYmouc2VsZWN0b3IpKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7CiAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKG9iai50eXBlLCBvYmouZm4pOwogICAgICB9KQogICAgfSk7CiAgICAvKgogICAgZm9yICh2YXIgb2JqIG9mIHNlbGVjdG9yX2V2ZW50X21hcCkgewogICAgICBmb3IgKHZhciBlbGVtIG9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwob2JqLnNlbGVjdG9yKSkgewogICAgICAgIC8vY29uc29sZS5sb2coZWxlbSwgb2JqLnR5cGUsIG9iai5mbik7CiAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKG9iai50eXBlLCBvYmouZm4pOwogICAgICB9CiAgICB9Ki8KICB9LAogIHBhcnNldGV4dDogZnVuY3Rpb24gKHRleHQpIHsKICAgIHZhciBkb2MgPSBudWxsOwogICAgdHJ5IHsKICAgICAgZG9jID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTsKICAgICAgZG9jLmRvY3VtZW50RWxlbWVudC5pbm5lckhUTUwgPSB0ZXh0OwogICAgICByZXR1cm4gZG9jOwogICAgfQogICAgY2F0Y2ggKGUpIHsKICAgICAgYWxlcnQoInBhcnNlIGVycm9yIik7CiAgICB9CiAgfSwKfTsKdmFyIG1hZ25ldF90YWJsZSA9IHsKICB0ZW1wbGF0ZTogewogICAgY3JlYXRlX2hlYWQ6IGZ1bmN0aW9uIChzcmMpIHsKICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpOwogICAgICBhLmNsYXNzTmFtZSA9ICJub25nLXJvdyI7CiAgICAgIGEuaWQgPSAibm9uZy1oZWFkIjsKICAgICAgdmFyIGhlYWRfc3RyID0gWwogICAgICAgICLlpKflsI8iLAogICAgICAgICLmk43kvZwiLAogICAgICAgICLnprvnur/kuIvovb0iCiAgICAgIF07CiAgICAgIHZhciB0aF9saXN0ID0gW2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRoIiksIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRoIiksIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRoIiksIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRoIildOwoKICAgICAgdmFyIHNlbGVjdF9ib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKTsKICAgICAgdmFyIG9wdGlvbl9zdHIgPSBteV9zZWFyY2guc2VhcmNoX25hbWVfc3RyaW5nOwogICAgICAvL2NvbnNvbGUubG9nKCJnZXQiLCBHTV9nZXRWYWx1ZSgic2VhcmNoX2luZGV4IikpOwogICAgICB2YXIgaW5kZXggPSBHTV9nZXRWYWx1ZSgic2VhcmNoX2luZGV4IiwgMCk7CiAgICAgIHZhciBvcF92YWx1ZSA9IDA7CiAgICAgIG9wdGlvbl9zdHIuZm9yRWFjaChmdW5jdGlvbiAoc3RyKSB7CiAgICAgICAgdmFyIG9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7CiAgICAgICAgb3AudmFsdWUgPSBvcF92YWx1ZTsKICAgICAgICBvcC50ZXh0Q29udGVudCA9IHN0cjsKICAgICAgICBpZiAoaW5kZXggPT0gb3BfdmFsdWUpIHsKICAgICAgICAgIG9wLnNldEF0dHJpYnV0ZSgic2VsZWN0ZWQiLCAic2VsZWN0ZWQiKTsKICAgICAgICB9CiAgICAgICAgb3BfdmFsdWUrKzsKICAgICAgICBzZWxlY3RfYm94LmFwcGVuZENoaWxkKG9wKTsKICAgICAgfSk7CiAgICAgIC8qCiAgICAgIGZvciAodmFyIHN0ciBvZiBvcHRpb25fc3RyKSB7CiAgICAgICAgdmFyIG9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7CiAgICAgICAgb3AudmFsdWUgPSBvcF92YWx1ZTsKICAgICAgICBvcC50ZXh0Q29udGVudCA9IHN0cjsKICAgICAgICBpZiAoaW5kZXggPT0gb3BfdmFsdWUpIHsKICAgICAgICAgIG9wLnNldEF0dHJpYnV0ZSgic2VsZWN0ZWQiLCAic2VsZWN0ZWQiKTsKICAgICAgICB9CiAgICAgICAgb3BfdmFsdWUrKzsKICAgICAgICBzZWxlY3RfYm94LmFwcGVuZENoaWxkKG9wKTsKICAgICAgfSovCiAgICAgIHNlbGVjdF9ib3guYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICBHTV9zZXRWYWx1ZSgic2VhcmNoX2luZGV4IiwgdGhpcy52YWx1ZSk7CiAgICAgICAgcnVuKCk7CiAgICAgIH0pOwogICAgICB0aF9saXN0WzBdLmFwcGVuZENoaWxkKHNlbGVjdF9ib3gpOwoKICAgICAgdGhfbGlzdFsxXS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIikpOwogICAgICB0aF9saXN0WzFdLmxhc3RDaGlsZC5zZXRBdHRyaWJ1dGUoImhyZWYiLCBzcmMpOwogICAgICB0aF9saXN0WzFdLmxhc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInRhcmdldCIsICJfYmxhbmsiKTsKICAgICAgdGhfbGlzdFsxXS5sYXN0Q2hpbGQudGV4dENvbnRlbnQgPSBoZWFkX3N0clswXTsKCiAgICAgIHRoX2xpc3RbMl0uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpKTsKICAgICAgdGhfbGlzdFsyXS5sYXN0Q2hpbGQudGV4dENvbnRlbnQgPSBoZWFkX3N0clsxXTsKCiAgICAgIHRoX2xpc3RbM10uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpKTsKICAgICAgdGhfbGlzdFszXS5sYXN0Q2hpbGQudGV4dENvbnRlbnQgPSBoZWFkX3N0clsyXTsKCiAgICAgIHRoX2xpc3QuZm9yRWFjaChmdW5jdGlvbiAodGgpIHsKICAgICAgICBhLmFwcGVuZENoaWxkKHRoKTsKICAgICAgfSk7CiAgICAgIC8qCiAgICAgIGZvciAodmFyIHRoIG9mIHRoX2xpc3QpIHsKICAgICAgICBhLmFwcGVuZENoaWxkKHRoKTsKICAgICAgfQogICAgICAqLwogICAgICByZXR1cm4gYTsKICAgIH0sCiAgICBjcmVhdGVfcm93OiBmdW5jdGlvbiAoZGF0YSkgewogICAgICB2YXIgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpOwogICAgICB0ci5jbGFzc05hbWUgPSAibm9uZy1yb3ciOwogICAgICB0ci5zZXRBdHRyaWJ1dGUoIm1hZyIsIGRhdGEubWFnKTsKICAgICAgdmFyIHRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKTsKICAgICAgdmFyIGxpc3QgPSBbdGhpcy5jcmVhdGVfaW5mbyhkYXRhLnRpdGxlLCBkYXRhLm1hZyksIHRoaXMuY3JlYXRlX3NpemUoZGF0YS5zaXplLCBkYXRhLnNyYyksIHRoaXMuY3JlYXRlX29wZXJhdGlvbihkYXRhLm1hZyksIHRoaXMuY3JlYXRlX29mZmxpbmUoKV07CiAgICAgIGxpc3QuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkgewogICAgICAgIHZhciBjID0gdGQuY2xvbmVOb2RlKHRydWUpOwogICAgICAgIGMuYXBwZW5kQ2hpbGQoZWxlbSk7CiAgICAgICAgdHIuYXBwZW5kQ2hpbGQoYyk7CiAgICAgIH0pOwogICAgICAvKgogICAgICBmb3IgKHZhciBlbGVtIG9mIFt0aGlzLmNyZWF0ZV9pbmZvKGRhdGEudGl0bGUsIGRhdGEubWFnKSwgdGhpcy5jcmVhdGVfc2l6ZShkYXRhLnNpemUsIGRhdGEuc3JjKSwgdGhpcy5jcmVhdGVfb3BlcmF0aW9uKGRhdGEubWFnKSwgdGhpcy5jcmVhdGVfb2ZmbGluZSgpXSkgewogICAgICAgIHZhciBjID0gdGQuY2xvbmVOb2RlKHRydWUpOwogICAgICAgIGMuYXBwZW5kQ2hpbGQoZWxlbSk7CiAgICAgICAgdHIuYXBwZW5kQ2hpbGQoYyk7CiAgICAgIH0KICAgICAgKi8KICAgICAgcmV0dXJuIHRyOwogICAgfSwKICAgIGNyZWF0ZV9yb3dfZm9yX3N1a2ViZWk6IGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHZhciB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRyIik7CiAgICAgIHRyLmNsYXNzTmFtZSA9ICJub25nLXJvdyI7CiAgICAgIHRyLnNldEF0dHJpYnV0ZSgibWFnIiwgZGF0YS5tYWcpOwogICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpOwogICAgICB2YXIgYXBwZW5kX2VsZW1zID0gWwoKICAgICAgICAoZnVuY3Rpb24gKHRpdGxlLCBzcmMsIHNlbGYpIHsKICAgICAgICAgIHJldHVybiBzZWxmLmNyZWF0ZV9pbmZvKHRpdGxlLCBzcmMpOwogICAgICAgIH0pKGRhdGEudGl0bGUsIGRhdGEuc3JjLCB0aGlzKSwKCiAgICAgICAgKGZ1bmN0aW9uIChzaXplLCBzcmMsIHNlbGYpIHsKICAgICAgICAgIHJldHVybiBzZWxmLmNyZWF0ZV9zaXplKHNpemUsIHNyYyk7CiAgICAgICAgfSkoZGF0YS5zaXplLCBkYXRhLnNyYywgdGhpcyksCgogICAgICAgIChmdW5jdGlvbiAodG9ycmVudF91cmwsIHNlbGYpIHsKICAgICAgICAgIHZhciBvcGVyYXRlID0gc2VsZi5jcmVhdGVfb3BlcmF0aW9uKHRvcnJlbnRfdXJsKTsKICAgICAgICAgIG9wZXJhdGUuZmlyc3RDaGlsZC50ZXh0Q29udGVudCA9ICLnp43lrZAiOwogICAgICAgICAgb3BlcmF0ZS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAibm9uZy1jb3B5LXN1a2ViZWkiKTsKICAgICAgICAgIG9wZXJhdGUuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInRhcmdldCIsICJfYmxhbmsiKTsKICAgICAgICAgIHJldHVybiBvcGVyYXRlOwogICAgICAgIH0pKGRhdGEudG9ycmVudF91cmwsIHRoaXMpLAoKICAgICAgICAoZnVuY3Rpb24gKHNlbGYpIHsKICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgIGRpdi50ZXh0Q29udGVudCA9ICLmmoLkuI3mlK/mjIHnprvnur/kuIvovb0iOwogICAgICAgICAgcmV0dXJuIGRpdjsKICAgICAgICB9KSh0aGlzKV07CiAgICAgIGFwcGVuZF9lbGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7CiAgICAgICAgdmFyIGMgPSB0ZC5jbG9uZU5vZGUodHJ1ZSk7CiAgICAgICAgYy5hcHBlbmRDaGlsZChlbGVtKTsKICAgICAgICB0ci5hcHBlbmRDaGlsZChjKTsKICAgICAgfSk7CiAgICAgIC8qCiAgICAgIGZvciAodmFyIGVsZW0gb2YgYXBwZW5kX2VsZW1zKSB7CiAgICAgICAgdmFyIGMgPSB0ZC5jbG9uZU5vZGUodHJ1ZSk7CiAgICAgICAgYy5hcHBlbmRDaGlsZChlbGVtKTsKICAgICAgICB0ci5hcHBlbmRDaGlsZChjKTsKICAgICAgfQogICAgICAqLwogICAgICByZXR1cm4gdHI7CiAgICB9LAogICAgY3JlYXRlX2luZm86IGZ1bmN0aW9uICh0aXRsZSwgbWFnKSB7CiAgICAgIHZhciBhID0gdGhpcy5pbmZvLmNsb25lTm9kZSh0cnVlKTsKICAgICAgYS5maXJzdENoaWxkLnRleHRDb250ZW50ID0gdGl0bGUubGVuZ3RoIDwgbWF4X3RpdGxlX2xlbmd0aCA/IHRpdGxlIDogdGl0bGUuc3Vic3RyKDAsIG1heF90aXRsZV9sZW5ndGgpICsgIi4uLiI7CiAgICAgIGEuZmlyc3RDaGlsZC5ocmVmID0gbWFnOwogICAgICBhLnRpdGxlID0gdGl0bGU7CiAgICAgIHJldHVybiBhOwogICAgfSwKICAgIGNyZWF0ZV9zaXplOiBmdW5jdGlvbiAoc2l6ZSwgc3JjKSB7CiAgICAgIHZhciBhID0gdGhpcy5zaXplLmNsb25lTm9kZSh0cnVlKTsKICAgICAgYS50ZXh0Q29udGVudCA9IHNpemU7CiAgICAgIGEuaHJlZiA9IHNyYzsKICAgICAgcmV0dXJuIGE7CiAgICB9LAogICAgY3JlYXRlX29wZXJhdGlvbjogZnVuY3Rpb24gKG1hZykgewogICAgICB2YXIgYSA9IHRoaXMub3BlcmF0aW9uLmNsb25lTm9kZSh0cnVlKTsKICAgICAgYS5maXJzdENoaWxkLmhyZWYgPSBtYWc7CiAgICAgIHJldHVybiBhOwogICAgfSwKICAgIGNyZWF0ZV9vZmZsaW5lOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhID0gdGhpcy5vZmZsaW5lLmNsb25lTm9kZSh0cnVlKTsKICAgICAgYS5jbGFzc05hbWUgPSAibm9uZy1vZmZsaW5lIjsKICAgICAgcmV0dXJuIGE7CiAgICB9LAoKICAgIGluZm86IChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIHZhciBiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICBiLnRleHRDb250ZW50ID0gIm5hbWUiOwogICAgICBiLmhyZWYgPSAic3JjIjsKICAgICAgYi50YXJnZXQgPSAiX2JsYW5rIjsKICAgICAgYS5hcHBlbmRDaGlsZChiKTsKICAgICAgcmV0dXJuIGE7CiAgICB9KSgpLAogICAgc2l6ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgYS50ZXh0Q29udGVudCA9ICJzaXplIjsKICAgICAgcmV0dXJuIGE7CiAgICB9KCksCiAgICBvcGVyYXRpb246IChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIHZhciBjb3B5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICBjb3B5LmNsYXNzTmFtZSA9ICJub25nLWNvcHkiOwogICAgICBjb3B5LnRleHRDb250ZW50ID0gIuWkjeWItiI7CiAgICAgIGEuYXBwZW5kQ2hpbGQoY29weSk7CiAgICAgIHJldHVybiBhOwogICAgfSkoKSwKICAgIG9mZmxpbmU6IChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIHZhciBiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICBiLmNsYXNzTmFtZSA9ICJub25nLW9mZmxpbmUtZG93bmxvYWQiOwogICAgICBiLnRhcmdldCA9ICJfYmxhbmsiOwogICAgICBmb3IgKHZhciBrIGluIG9mZmxpbmVfc2l0ZXMpIHsKICAgICAgICBpZiAob2ZmbGluZV9zaXRlc1trXS5lbmFibGUpIHsKICAgICAgICAgIHZhciBjID0gYi5jbG9uZU5vZGUodHJ1ZSk7CiAgICAgICAgICBjLmhyZWYgPSBvZmZsaW5lX3NpdGVzW2tdLnVybDsKICAgICAgICAgIGMudGV4dENvbnRlbnQgPSBvZmZsaW5lX3NpdGVzW2tdLm5hbWU7CiAgICAgICAgICBhLmFwcGVuZENoaWxkKGMpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gYTsKICAgIH0pKCksCiAgfSwKICBnZW5lcmF0ZV9oZWFkOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdGFiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGFibGUiKTsKICAgIHRhYi5pZCA9ICJub25nLXRhYmxlIjsKICAgIHRhYi5hcHBlbmRDaGlsZCh0aGlzLnRlbXBsYXRlLmNyZWF0ZV9oZWFkKCJodHRwczovL2dyZWFzeWZvcmsub3JnL3poLUNOL3NjcmlwdHMvODM5Mi0lRTYlOEMlOEEiKSk7CiAgICByZXR1cm4gdGFiOwogIH0sCiAgZ2VuZXJhdGU6IGZ1bmN0aW9uIChzcmMsIGRhdGEpIHsKICAgIC8vY29uc29sZS5sb2coc3JjKTsKICAgIC8vY29uc29sZS5sb2coZGF0YSk7CiAgICB2YXIgdGFiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI25vbmctdGFibGUiKTsKICAgIHRhYi5xdWVyeVNlbGVjdG9yKCIjbm9uZy1oZWFkIHRoIGEiKS5ocmVmID0gc3JjOwogICAgaWYgKHNyYy5tYXRjaCgic3VrZWJlaS5ueWFhLnNlIikpIHsKICAgICAgZGF0YS5mb3JFYWNoKChkKSA9PiB7CiAgICAgICAgdGFiLmFwcGVuZENoaWxkKHRoaXMudGVtcGxhdGUuY3JlYXRlX3Jvd19mb3Jfc3VrZWJlaShkKSk7CiAgICAgIH0pOwogICAgICAvKgogICAgICBmb3IgKHZhciBkIG9mIGRhdGEpIHsKICAgICAgICB0YWIuYXBwZW5kQ2hpbGQodGhpcy50ZW1wbGF0ZS5jcmVhdGVfcm93X2Zvcl9zdWtlYmVpKGQpKTsKICAgICAgfQogICAgICAqLwogICAgfQogICAgZWxzZSB7CiAgICAgIGRhdGEuZm9yRWFjaCgoZCkgPT4gewogICAgICAgIHRhYi5hcHBlbmRDaGlsZCh0aGlzLnRlbXBsYXRlLmNyZWF0ZV9yb3coZCkpOwogICAgICB9KTsKICAgICAgLyoKICAgICAgZm9yICh2YXIgZCBvZiBkYXRhKSB7CiAgICAgICAgdGFiLmFwcGVuZENoaWxkKHRoaXMudGVtcGxhdGUuY3JlYXRlX3JvdyhkKSk7CiAgICAgIH0KICAgICAgKi8KICAgIH0KICAgIHJldHVybiB0YWI7CiAgfSwKCn07CnZhciBteV9zZWFyY2ggPSB7CiAgY3VycmVudDogZnVuY3Rpb24gKGt3LCBjYikgewogICAgdmFyIHNlYXJjaCA9IG15X3NlYXJjaFtHTV9nZXRWYWx1ZSgic2VhcmNoX2luZGV4IiwgMCldOwogICAgdHJ5IHsKICAgICAgcmV0dXJuIHNlYXJjaChrdywgY2IpOwogICAgfQogICAgY2F0Y2ggKGUpIHsKICAgICAgdGhpcy5zZWFyY2hfZXJyb3IoKTsKICAgIH0KICB9LAogIHNlYXJjaF9lcnJvcjogZnVuY3Rpb24gKHIpIHsKICAgIGFsZXJ0KCLmkJzntKLlh7rnjrDplJnor6/vvIzor7fmo4Dmn6XnvZHnu5wiKTsKICB9LAogIHNlYXJjaF9uYW1lX3N0cmluZzogWyJidHNvIiwgImJ0ZGIiLCAic3VrZWJlaS5ueWFhIiwgImJ0a2l0dHkiXSwKICAwOiBmdW5jdGlvbiAoa3csIGNiKSB7CiAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgIG1ldGhvZDogIkdFVCIsCiAgICAgIHVybDogImh0dHBzOi8vYnRzby5wdy9zZWFyY2gvIiArIGt3LAogICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICB2YXIgZG9jID0gY29tbW9uLnBhcnNldGV4dChyZXN1bHQucmVzcG9uc2VUZXh0KTsKICAgICAgICB2YXIgZGF0YSA9IFtdOwogICAgICAgIHZhciB0ID0gZG9jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImRhdGEtbGlzdCIpWzBdOwogICAgICAgIGlmICh0KSB7CiAgICAgICAgICBBcnJheS5mcm9tKHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKSkuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkgewogICAgICAgICAgICBpZiAoIWVsZW0uY2xhc3NOYW1lLm1hdGNoKCJidG4iKSkgewogICAgICAgICAgICAgIGRhdGEucHVzaCh7CiAgICAgICAgICAgICAgICAidGl0bGUiOiBlbGVtLnRpdGxlLAogICAgICAgICAgICAgICAgIm1hZyI6ICJtYWduZXQ6P3h0PXVybjpidGloOiIgKyBlbGVtLm91dGVySFRNTC5yZXBsYWNlKC8uKmhhc2hcLy8sICIiKS5yZXBsYWNlKC8iIC4qXG4uKlxuLipcbi4qLywgIiIpLAogICAgICAgICAgICAgICAgInNpemUiOiBlbGVtLm5leHRFbGVtZW50U2libGluZy50ZXh0Q29udGVudCwKICAgICAgICAgICAgICAgICJzcmMiOiBlbGVtLmhyZWYsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIGRhdGEucHVzaCh7CiAgICAgICAgICAgICJ0aXRsZSI6ICLmsqHmnInmib7liLDno4Hpk77mjqUiLAogICAgICAgICAgICAibWFnIjogIiIsCiAgICAgICAgICAgICJzaXplIjogIjAiLAogICAgICAgICAgICAic3JjIjogcmVzdWx0LmZpbmFsVXJsLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNiKHJlc3VsdC5maW5hbFVybCwgZGF0YSk7CiAgICAgIH0sCiAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICB0aHJvdyAic2VhcmNoIGVycm9yIjsKICAgICAgfQogICAgfSk7CiAgfSwKICAxOiBmdW5jdGlvbiAoa3csIGNiKSB7CiAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgIG1ldGhvZDogIkdFVCIsCiAgICAgIHVybDogImh0dHBzOi8vYnRkYi5pbi9xLyIgKyBrdyArICIvIiwKICAgICAgb25sb2FkOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgdmFyIGRvYyA9IGNvbW1vbi5wYXJzZXRleHQocmVzdWx0LnJlc3BvbnNlVGV4dCk7CiAgICAgICAgdmFyIGRhdGEgPSBbXTsKICAgICAgICB2YXIgdCA9IGRvYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJpdGVtLXRpdGxlIik7CiAgICAgICAgaWYgKHQpIHsKICAgICAgICAgIEFycmF5LmZyb20odCkuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkgewogICAgICAgICAgICBkYXRhLnB1c2goewogICAgICAgICAgICAgICJ0aXRsZSI6IGVsZW0uZmlyc3RDaGlsZC50aXRsZSwKICAgICAgICAgICAgICAibWFnIjogZWxlbS5uZXh0RWxlbWVudFNpYmxpbmcuZmlyc3RFbGVtZW50Q2hpbGQuaHJlZiwKICAgICAgICAgICAgICAic2l6ZSI6IGVsZW0ubmV4dEVsZW1lbnRTaWJsaW5nLmNoaWxkcmVuWzFdLnRleHRDb250ZW50LAogICAgICAgICAgICAgICJzcmMiOiAiaHR0cHM6Ly9idGRiLmluIiArIGVsZW0uZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICBkYXRhLnB1c2goewogICAgICAgICAgICAidGl0bGUiOiAi5rKh5pyJ5om+5Yiw56OB6ZO+5o6lIiwKICAgICAgICAgICAgIm1hZyI6ICIiLAogICAgICAgICAgICAic2l6ZSI6ICIwIiwKICAgICAgICAgICAgInNyYyI6IHJlc3VsdC5maW5hbFVybCwKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgY2IocmVzdWx0LmZpbmFsVXJsLCBkYXRhKTsKICAgICAgfSwKICAgICAgb25lcnJvcjogZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgIHRocm93ICJzZWFyY2ggZXJyb3IiOwogICAgICB9CiAgICB9KTsKICB9LAogIDI6IGZ1bmN0aW9uIChrdywgY2IpIHsKICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgdXJsOiAiaHR0cHM6Ly9zdWtlYmVpLm55YWEuc2UvP3BhZ2U9c2VhcmNoJmNhdHM9MF8wJmZpbHRlcj0wJnRlcm09IiArIGt3LAogICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICB2YXIgZG9jID0gY29tbW9uLnBhcnNldGV4dChyZXN1bHQucmVzcG9uc2VUZXh0KTsKICAgICAgICB2YXIgZGF0YSA9IFtdOwogICAgICAgIHZhciB0ID0gZG9jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInRsaXN0cm93Iik7CiAgICAgICAgaWYgKHQpIHsKICAgICAgICAgIEFycmF5LmZyb20odCkuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkgewogICAgICAgICAgICBkYXRhLnB1c2goewogICAgICAgICAgICAgICJ0aXRsZSI6IGVsZW0ucXVlcnlTZWxlY3RvcigiLnRsaXN0bmFtZSBhIikudGV4dENvbnRlbnQsCiAgICAgICAgICAgICAgIm1hZyI6ICIiLAogICAgICAgICAgICAgICJ0b3JyZW50X3VybCI6ICJodHRwczoiICsgZWxlbS5xdWVyeVNlbGVjdG9yKCIudGxpc3Rkb3dubG9hZCBhIikuZ2V0QXR0cmlidXRlKCJocmVmIiksCiAgICAgICAgICAgICAgInNpemUiOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoIi50bGlzdHNpemUiKS50ZXh0Q29udGVudCwKICAgICAgICAgICAgICAic3JjIjogImh0dHBzOiIgKyBlbGVtLnF1ZXJ5U2VsZWN0b3IoIi50bGlzdG5hbWUgYSIpLmdldEF0dHJpYnV0ZSgiaHJlZiIpLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIGRhdGEucHVzaCh7CiAgICAgICAgICAgICJ0aXRsZSI6ICLmsqHmnInmib7liLDno4Hpk77mjqUiLAogICAgICAgICAgICAibWFnIjogIiIsCiAgICAgICAgICAgICJ0b3JyZW50X3VybCI6ICIiLAogICAgICAgICAgICAic2l6ZSI6ICIwIiwKICAgICAgICAgICAgInNyYyI6IHJlc3VsdC5maW5hbFVybCwKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgY2IocmVzdWx0LmZpbmFsVXJsLCBkYXRhKTsKICAgICAgfSwKICAgICAgb25lcnJvcjogZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgIHRocm93ICJzZWFyY2ggZXJyb3IiOwogICAgICB9CiAgICB9KTsKICB9LAogIDM6IGZ1bmN0aW9uIChrdywgY2IpIHsKICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgIHVybDogImh0dHA6Ly9idGtpdHR5LmJpZC8iLAogICAgICBkYXRhOiAia2V5d29yZD0iICsga3csCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIKICAgICAgfSwKICAgICAgb25sb2FkOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgdmFyIGRvYyA9IGNvbW1vbi5wYXJzZXRleHQocmVzdWx0LnJlc3BvbnNlVGV4dCk7CiAgICAgICAgdmFyIGRhdGEgPSBbXTsKICAgICAgICB2YXIgdCA9IGRvYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJsaXN0LWNvbiIpOwogICAgICAgIGlmICh0KSB7CgogICAgICAgICAgQXJyYXkuZnJvbSh0KS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7CiAgICAgICAgICAgIGRhdGEucHVzaCh7CiAgICAgICAgICAgICAgInRpdGxlIjogZWxlbS5xdWVyeVNlbGVjdG9yKCJkdCBhIikudGV4dENvbnRlbnQsCiAgICAgICAgICAgICAgIm1hZyI6IGVsZW0ucXVlcnlTZWxlY3RvcigiZGQgYSIpLmhyZWYsCiAgICAgICAgICAgICAgInNpemUiOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoIi5vcHRpb24gc3BhbjpudGgtY2hpbGQoMykgYiIpLnRleHRDb250ZW50LAogICAgICAgICAgICAgICJzcmMiOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoImR0IGEiKS5ocmVmLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIGRhdGEucHVzaCh7CiAgICAgICAgICAgICJ0aXRsZSI6ICLmsqHmnInmib7liLDno4Hpk77mjqUiLAogICAgICAgICAgICAibWFnIjogIiIsCiAgICAgICAgICAgICJzaXplIjogIjAiLAogICAgICAgICAgICAic3JjIjogcmVzdWx0LmZpbmFsVXJsLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNiKHJlc3VsdC5maW5hbFVybCwgZGF0YSk7CiAgICAgIH0sCiAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICB0aHJvdyAic2VhcmNoIGVycm9yIjsKICAgICAgfQogICAgfSkKICB9LAoKfTsKCnZhciBkaXNwbGF5X3RhYmxlID0gZnVuY3Rpb24gKHZpZCwgaW5zZXJ0X3doZXJlKSB7CiAgY29tbW9uLmFkZF9zdHlsZSgpOwogIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI25vbmctaGVhZCIpKSB7CiAgICB2YXIgdGFiX3dpdGhfaGVhZCA9IG1hZ25ldF90YWJsZS5nZW5lcmF0ZV9oZWFkKCk7CiAgICBpZiAodHlwZW9mIGluc2VydF93aGVyZSA9PT0gInN0cmluZyIpIHsKICAgICAgdmFyIGVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGluc2VydF93aGVyZSk7CiAgICAgIC8vY29uc29sZS5sb2coImRpc3BsYXlfdGFibGUiLCB0YWIsIGVsZW0pOwogICAgICBpZiAoZWxlbSkgewogICAgICAgIGVsZW0ucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUodGFiX3dpdGhfaGVhZCwgZWxlbSk7CiAgICAgIH0KICAgIH0KICAgIGVsc2UgaWYgKHR5cGVvZiBpbnNlcnRfd2hlcmUgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgaW5zZXJ0X3doZXJlKHRhYl93aXRoX2hlYWQpOwogICAgfQogICAgZWxzZSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoIuaPkuWFpeihqOagvOmUmeivryIpOwogICAgICByZXR1cm47CiAgICB9CiAgfQogIGVsc2UgewogICAgdmFyIGhlYWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjbm9uZy1oZWFkIik7CiAgICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5ub25nLXJvdyIpKS5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHsKICAgICAgaWYgKHJvdyAhPT0gaGVhZCkgewogICAgICAgIHJvdy5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHJvdyk7CiAgICAgIH0KICAgIH0pOwogIH0KICBteV9zZWFyY2guY3VycmVudCh2aWQsIGZ1bmN0aW9uIChkYXRhLCBzcmMpIHsKICAgIHZhciB0YWIgPSBtYWduZXRfdGFibGUuZ2VuZXJhdGUoZGF0YSwgc3JjKTsKICAgIGNvbW1vbi5yZWdfZXZlbnQoKTsKICB9KTsKfTsKCnZhciB2aWRfbW9kZSA9IGZ1bmN0aW9uICh2KSB7CiAgdmFyIHZpZCA9ICIiOwogIHRyeSB7CiAgICB2aWQgPSB2LnZpZCgpOwogIH0KICBjYXRjaCAoZXJyb3IpIHsKICAgIHZpZCA9ICIiOwogICAgY29uc29sZS5lcnJvcigi5rKh5pyJ5om+5Yiw55Wq5Y+3Iiwgdi52aWQudG9TdHJpbmcoKSk7CiAgfQogIGlmICh2aWQpIHsKICAgIGNvbnNvbGUuaW5mbygi55Wq5Y+377yaIiwgdmlkKTsKICAgIGRpc3BsYXlfdGFibGUodmlkLCB2Lmluc2VydF93aGVyZSk7CiAgfQp9OwoKdmFyIGRsX21vZGUgPSBmdW5jdGlvbiAodikgewoKICB2YXIgbWFnID0gR01fZ2V0VmFsdWUoIm1hZ25ldCIsICIiKTsKICAvL2NvbnNvbGUuaW5mbygxLCAi5byA5aeL56a757q/5LiL6L29IiwgbWFnKTsKICBpZiAobWFnKSB7CiAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7CiAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCJ0eXBlIiwgInRleHQvamF2YXNjcmlwdCIpOwogICAgc2NyaXB0LmlubmVySFRNTCA9ICIoIiArIHYuZmlsbF9mb3JtLnRvU3RyaW5nKCkgKyAiKShcIiIgKyBtYWcgKyAiXCIpIjsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTsKICAgIC8vY29uc29sZS5pbmZvKGluZm8pOwogIH0KICBHTV9zZXRWYWx1ZSgibWFnbmV0IiwgIiIpOwp9OwoKdmFyIHJ1biA9IGZ1bmN0aW9uICgpIHsKICBtYXhfdGl0bGVfbGVuZ3RoID0gR01fZ2V0VmFsdWUoIm1heF90aXRsZV9sZW5ndGgiLCA0MCk7CiAgdmFyIG1haW5fa2V5cyA9IE9iamVjdC5rZXlzKG1haW4pOwogIGZvciAodmFyIGkgPSAwOyBpIDwgbWFpbl9rZXlzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgdiA9IG1haW5bbWFpbl9rZXlzW2ldXTsKCiAgICBpZiAodi5yZSAmJiB2LnJlLnRlc3QobG9jYXRpb24uaHJlZikpIHsKICAgICAgaWYgKHYudHlwZSA9PT0gMCkgewoKICAgICAgICAvLy0tLS0KCiAgICAgICAgLy9mb3IgamF2bGlicmFyeQogICAgICAgIGlmIChtYWluX2tleXNbaV0gPT09ICJqYXZsaWJyYXJ5IikgewogICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNhZHVsdHdhcm5pbmdwcm9tcHQiKSkgewogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIjYWR1bHR3YXJuaW5ncHJvbXB0IGlucHV0IilbMF0uY2xpY2soKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8tLS0tCgogICAgICAgIHZpZF9tb2RlKHYpOwogICAgICB9CiAgICAgIGVsc2UgaWYgKHYudHlwZSA9PSAxKSB7CiAgICAgICAgZGxfbW9kZSh2KTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICB9Cn07CnZhciBtYXhfdGl0bGVfbGVuZ3RoID0gR01fZ2V0VmFsdWUoIm1heF90aXRsZV9sZW5ndGgiLCA0MCk7CnZhciBzZXRfbWF4X3RpdGxlX2xlbmd0aCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgbGVuID0gcHJvbXB0KCLor7fovpPlhaXkvaDmg7PopoHnmoTmoIfpopjplb/luqYiLCBHTV9nZXRWYWx1ZSgibWF4X3RpdGxlX2xlbmd0aCIsIDQwKSk7CiAgaWYgKGxlbiAhPT0gbnVsbCAmJiBsZW4gIT09ICIiKSB7CiAgICBHTV9zZXRWYWx1ZSgibWF4X3RpdGxlX2xlbmd0aCIsIGxlbik7CiAgICBydW4oKTsKICB9Cn07CgpHTV9yZWdpc3Rlck1lbnVDb21tYW5kKCLmjIot5qCH6aKY6ZW/5bqmIiwgc2V0X21heF90aXRsZV9sZW5ndGgpOwpydW4oKTsKCgoK"},{"name":"JAV老司机","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_prototypes":true,"compat_uW_gmonkey":false,"compat_wrappedjsobject":true,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["blogjav.net","pixhost.org","115.com","btso.pw","btdb.to","sukebei.nyaa.si","btkitty.pet","www.torrentkitty.tv","btlibrary.pw","ja14b.com"],"orig_excludes":[],"orig_includes":["http*://*javlibrary.com/*","http*://*javlib.com/*","http*://*5avlib.com/*","http*://*look4lib.com/*","http*://*javlib3.com/*","http*://*javli6.com/*","http*://*j8vlib.com/*","http*://*j9lib.com/*","http*://*jav11b.com/*","http*://*ja14b.com/*","http*://*13vlib.com/*","https://www.javbus.com/*","https://www.javbus2.com/*","https://www.javbus3.com/*","https://www.javbus5.com/*","https://www.javbus.me/*","http*://www.javbus.com/*","http*://*avmo.pw/*","http*://*avio.pw/*","http*://*avso.pw/*","http*://*avxo.pw/*","http://115.com/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"jav_user_id":"n0","magnet":"onull","search_index":"s1"},"ts":1502177211376},"enabled":true,"position":15,"file_url":"https://sleazyfork.org/scripts/25781-jav%E8%80%81%E5%8F%B8%E6%9C%BA/code/JAV%E8%80%81%E5%8F%B8%E6%9C%BA.user.js","uuid":"1696c29f-d36d-4961-ad52-e8e4ec7a7194","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBKQVbogIHlj7jmnLoKLy8gQG5hbWVzcGFjZSAgICBodHRwczovL3NsZWF6eWZvcmsub3JnL3poLUNOL3VzZXJzLzg1MDY1Ci8vIEB2ZXJzaW9uICAgICAgMS4yLjAKLy8gQGRlc2NyaXB0aW9uICBKQVbogIHlj7jmnLrnpZ7lmags5pSv5oyBamF2bGlicmFyeS5jb23jgIFqYXZidXMuY29t44CBYXZpby5wd+OAgWF2c28ucHfnrYnogIHlj7jmnLrnq5nngrnjgILmi6XmnIlKQVbpq5jmuIXpooTop4jlpKflm77vvIxKQVbliJfooajml6DpmZDmu5rliqjoh6rliqjliqDovb3vvIzlkIjmiJDigJzmjIrigJ3nmoToh6rliqjojrflj5ZKQVbno4Hpk77mjqXvvIzkuIDplK7oh6rliqgxMTXnprvnur/kuIvovb3vvIzkvJjljJbmiJDpq5jmlYjmtY/op4jnmoTpobXpnaLmjpLniYjjgIIKLy8gQGF1dGhvciAgICAgICBIb2JieQoKLy8gQHJlcXVpcmUgICAgICBodHRwOi8vYWpheC5hc3BuZXRjZG4uY29tL2FqYXgvalF1ZXJ5L2pxdWVyeS0yLjEuNC5taW4uanMKLy8gQHJlcXVpcmUgICAgICBodHRwOi8vY2RuLmJvb3Rjc3MuY29tL2pxdWVyeS1jb29raWUvMS40LjEvanF1ZXJ5LmNvb2tpZS5taW4uanMKLy8gQHJlc291cmNlICAgICBpY29uIGh0dHA6Ly9nZWVrZHJlYW0uY29tL2ltYWdlLzExNWhlbHBlcl9pY29uXzAwMS5qcGcKCi8vIEBpbmNsdWRlICAgICBodHRwKjovLypqYXZsaWJyYXJ5LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovLypqYXZsaWIuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vKjVhdmxpYi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly8qbG9vazRsaWIuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vKmphdmxpYjMuY29tLyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vKmphdmxpNi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly8qajh2bGliLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovLypqOWxpYi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly8qamF2MTFiLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovLypqYTE0Yi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly8qMTN2bGliLmNvbS8qCgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly93d3cuamF2YnVzLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwczovL3d3dy5qYXZidXMyLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwczovL3d3dy5qYXZidXMzLmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwczovL3d3dy5qYXZidXM1LmNvbS8qCi8vIEBpbmNsdWRlICAgICBodHRwczovL3d3dy5qYXZidXMubWUvKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly93d3cuamF2YnVzLmNvbS8qCgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly8qYXZtby5wdy8qCi8vIEBpbmNsdWRlICAgICBodHRwKjovLyphdmlvLnB3LyoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vKmF2c28ucHcvKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly8qYXZ4by5wdy8qCgovLyBAaW5jbHVkZSAgICAgaHR0cDovLzExNS5jb20vKgoKLy8gQHJ1bi1hdCAgICAgICBkb2N1bWVudC1pZGxlCi8vIEBncmFudCAgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgICAgICBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgICAgICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICAgICAgR01fc2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICBHTV9ub3RpZmljYXRpb24KLy8gQGdyYW50ICAgICAgICBHTV9zZXRDbGlwYm9hcmQKLy8gQGdyYW50ICAgICAgICBHTV9nZXRSZXNvdXJjZVVSTAoKLy8gQGNvbm5lY3QgICAgICBibG9namF2Lm5ldAovLyBAY29ubmVjdCAgICAgIHBpeGhvc3Qub3JnCi8vIEBjb25uZWN0ICAgICAgMTE1LmNvbQovLyBAY29ubmVjdCAgICAgIGJ0c28ucHcKLy8gQGNvbm5lY3QgICAgICBidGRiLnRvCi8vIEBjb25uZWN0ICAgICAgc3VrZWJlaS5ueWFhLnNpCi8vIEBjb25uZWN0ICAgICAgYnRraXR0eS5wZXQKLy8gQGNvbm5lY3QgICAgICB3d3cudG9ycmVudGtpdHR5LnR2Ci8vIEBjb25uZWN0ICAgICAgYnRsaWJyYXJ5LnB3Ci8vIEBjb25uZWN0ICAgICAgamExNGIuY29tCgovLyBAY29weXJpZ2h0ICAgIGhvYmJ5IDIwMTYtMTItMTgKCi8vIOWkp+mZhueUqOaIt+aOqOiNkENocm9tZSArIFRhbXBlcm1vbmtlee+8iOW/hemhu+aJqeWxle+8iSArIFhYLU5ldCjku6PnkIYpICsgUHJveHkgU3dpdGNoeU9tZWdh77yI5omp5bGV77yJ55qE546v5aKD5LiL6YWN5ZCI5L2/55So44CCCgovLyB2MS4yLjAg6ZKI5a+5amF2bGlicmFyeeeahOmrmOivhOS7t+agj+ebru+8jOWinuWKoOi/h+a7pOKAnOWPqueci+W9k+WJjeaciOS7veKAneOAgeKAnOWPqueci+i/keS4pOaciOS7veKAneWKn+iDveOAguWPpum7mOiupOatpOagj+ebrui/keS4pOaciOS7veeahOWGheWuueWinuWKoOiDjOaZr+minOiJsuWMuuWIhuOAggovLyB2MS4yLjAg5pu05paw5LqG5ZCI5oiQ4oCc5oyK4oCd6ISa5pys55qE5pu05aSa572R56uZ55qE5pSv5oyB77yM5oSf6LCi5L2c6ICFdGh1bmRlcmhpdO+8jOWQjOaXtuS/ruWkjeWOn+iEmuacrOmDqOWIhue9keermeWKn+iDveWkseaViOmXrumimOOAggovLyB2MS4xLjQg5Y6fajEybGliLmNvbSjlpKfpmYYp6K6/6Zeu5aSx5pWI77yM5pS55Li6amExNGIuY29t55qE5pSv5oyB77yM6L+Y5pyJYnRkYi5pbuaUueS4umJ0ZGIudG8KLy8gdjEuMS4zIOWOn2F2bW8ucHforr/pl67lpLHmlYgs5pS55aKe5YqgYXZpby5wd+eahOaUr+aMgeOAggovLyB2MS4xLjIg5L+u5aSN5bey55+l6Zeu6aKY44CCCi8vIHYxLjEuMSDkv67lpI3lt7Lnn6Xpl67popjjgIIKLy8gdjEuMS4wIOS8mOWMluabtOaWsOS6hkpBVuWIl+ihqOaXoOmZkOa7muWKqOiHquWKqOWKoOi9veeahOS7o+eggSzlop7liqBKQVbliJfooajkuK3mmL7npLoi5Y+R6KGM5pel5pyfIuWSjCLor4TliIYi55qE5o6S54mILOS7peWPiuS/ruWkjeS6huW3suefpemXrumimOOAggovLyB2MS4wLjMg5LyY5YyW5LqG6auY5riF6aKE6KeI5aSn5Zu+55qE6I635Y+W44CCCi8vIHYxLjAuMiDkvJjljJbkuoZqYXZsaWJyYXJ55o6S54mILOWBmuS6huacgOS9juWIhui+qOeOhzEyODB4ODAw55qE5o6S54mI6YCC6YWN6LCD5pW077yM5Y+K5L+u5aSN5LqG5bey55+l6Zeu6aKY44CCCi8vIHYxLjAuMSDkv67lpI3lt7Lnn6Xpl67popjjgIIKLy8gdjEuMC4wIOaUr+aMgWphdmxpYnJhcnkuY29t44CBamF2YnVzLmNvbeOAgWF2bW8ucHfjgIFhdnNvLnB3562J6ICB5Y+45py656uZ54K577yM56ys5LiA54mI5Y+R5biD44CCCgovLyA9PS9Vc2VyU2NyaXB0PT0KLyoganNoaW50IC1XMDk3ICovCihmdW5jdGlvbigpIHsKCSd1c2Ugc3RyaWN0JzsKCXZhciBqYXZfdXNlcklEID0gR01fZ2V0VmFsdWUoJ2phdl91c2VyX2lkJywgMCk7IC8vMTE155So5oi3SUQKCS8vaWNvbuWbvuaghwoJdmFyIGljb24gPSBHTV9nZXRSZXNvdXJjZVVSTCgnaWNvbicpOwoKCXZhciBjb21tb24gPSB7CgkJcGFyc2V0ZXh0OiBmdW5jdGlvbih0ZXh0KSB7CgkJCXZhciBkb2MgPSBudWxsOwoJCQl0cnkgewoJCQkJZG9jID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCcnKTsKCQkJCWRvYy5kb2N1bWVudEVsZW1lbnQuaW5uZXJIVE1MID0gdGV4dDsKCQkJCXJldHVybiBkb2M7CgkJCX0KCQkJY2F0Y2ggKGUpIHsKCQkJCWFsZXJ0KCdwYXJzZSBlcnJvcicpOwoJCQl9CgkJfSwKCQkvL+WIpOaWreaXpeacn+aYr+WQpuacgOi/kVjkuKrmnIjku73nmoTml6XmnJ8KCQlpc0xhc3RYTW9udGg6IGZ1bmN0aW9uKERhdGVTdHIsTW9udGhOdW0pIHsKCQkJdmFyIG5vdyA9IG5ldyBEYXRlKCk7IC8v5b2T5YmN5pel5pyfIAoJCQl2YXIgY29tcERhdGUgPSBuZXcgRGF0ZShEYXRlU3RyKTsKCQkJaWYobm93LmdldEZ1bGxZZWFyKCkgPT0gY29tcERhdGUuZ2V0RnVsbFllYXIoKSl7CgkJCQl2YXIgdCA9IG5vdy5nZXRNb250aCgpIC0gY29tcERhdGUuZ2V0TW9udGgoKTsKCQkJCWlmKHQgPCBNb250aE51bSl7CgkJCQkJcmV0dXJuIHRydWU7CgkJCQl9CgkJCX0KCQkJcmV0dXJuIGZhbHNlOwoJCX0sCgkJLy/liKTmlq3ml6XmnJ/mmK/lkKbmnIDov5HkuKTkuKrmnIjku73nmoTml6XmnJ8KCQlpc0xhc3RUd29Nb250aDogZnVuY3Rpb24oRGF0ZVN0cikgewoJCQl2YXIgbm93ID0gbmV3IERhdGUoKTsgLy/lvZPliY3ml6XmnJ8gCgkJCXZhciBjb21wRGF0ZSA9IG5ldyBEYXRlKERhdGVTdHIpOwoJCQlpZihub3cuZ2V0RnVsbFllYXIoKSA9PSBjb21wRGF0ZS5nZXRGdWxsWWVhcigpKXsKCQkJCXZhciB0ID0gbm93LmdldE1vbnRoKCkgLSBjb21wRGF0ZS5nZXRNb250aCgpOwoJCQkJaWYodCA9PT0gMSB8fCB0ID09PSAwKXsKCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCX0KCQkJfQoJCQlyZXR1cm4gZmFsc2U7CgkJfSwKCQkvL+aWueazlTog6YCa55SoY2hyb21l6YCa55+lCgkJbm90aWZpeTpmdW5jdGlvbiAodGl0bGUsIGJvZHksIGljb24sIGNsaWNrX3VybCl7CgkJCXZhciBub3RpZmljYXRpb25EZXRhaWxzID0gewoJCQkJdGV4dDogYm9keSwKCQkJCXRpdGxlOiB0aXRsZSwKCQkJCXRpbWVvdXQ6IDEwMDAwLAoJCQkJaW1hZ2U6IGljb24sCgkJCQlvbmNsaWNrOiBmdW5jdGlvbigpIHsKCQkJCQl3aW5kb3cub3BlbihjbGlja191cmwpOwoJCQkJfQoJCQl9OwoJCQlHTV9ub3RpZmljYXRpb24obm90aWZpY2F0aW9uRGV0YWlscyk7CgkJfSwKCQlhZGRBdkltZzpmdW5jdGlvbihhdmlkLCBmdW5jKXsKCQkJLy/lvILmraXor7fmsYLmkJzntKJibG9namF2Lm5ldOeahOeVquWPtwoJCQlHTV94bWxodHRwUmVxdWVzdCh7CgkJCQltZXRob2Q6ICJHRVQiLAoJCQkJLy/lpKflm77lnLDlnYAKCQkJCXVybDogJ2h0dHA6Ly9ibG9namF2Lm5ldC8/cz0nK2F2aWQsCgkJCQlvbmxvYWQ6IGZ1bmN0aW9uKHJlc3VsdCkgewoJCQkJCS8vY29uc29sZS5sb2coIuaXtumXtDExMTExMToiKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSk7CgkJCQkJdmFyIGRvYyA9IGNvbW1vbi5wYXJzZXRleHQocmVzdWx0LnJlc3BvbnNlVGV4dCk7CgkJCQkJLy9jb25zb2xlLmxvZygi5pe26Ze0MjIyMjIyOiIrIG5ldyBEYXRlKCkuZ2V0VGltZSgpKTsKCQkJCQlsZXQgYV9hcnJheSA9ICQoZG9jKS5maW5kKCIubW9yZS1saW5rIik7CgkJCQkJbGV0IGEgPSBhX2FycmF5WzBdOwoJCQkJCWZvcihsZXQgaSA9IDA7IGkgPCBhX2FycmF5Lmxlbmd0aCA7IGkgKyspewoJCQkJCQl2YXIgZmhkX2lkeCA9IGFfYXJyYXlbaV0uaW5uZXJIVE1MLnNlYXJjaCgvRkhELyk7CgkJCQkJCS8vZGVidWdnZXI7CgkJCQkJCWlmKGZoZF9pZHggPiAwKXsKCQkJCQkJCWEgPSBhX2FycmF5W2ldOwoJCQkJCQkJYnJlYWs7CgkJCQkJCX0KCQkJCQl9CgoJCQkJCWlmIChhKSB7CgkJCQkJCS8v5byC5q2l6K+35rGC6LCD55So5YaF6aG16K+m5oOF55qE6K6/6Zeu5Zyw5Z2ACgkJCQkJCUdNX3htbGh0dHBSZXF1ZXN0KHsKCQkJCQkJCW1ldGhvZDogIkdFVCIsCgkJCQkJCQkvL+Wkp+WbvuWcsOWdgAoJCQkJCQkJdXJsOiBhLmhyZWYsCgkJCQkJCQloZWFkZXJzOnsKCQkJCQkJCQlyZWZlcnJlcjogICJodHRwOi8vcGl4aG9zdC5vcmcvIiAvL+e7lei/h+mYsuebl+WbvueahOWFs+mUrgoJCQkJCQkJfSwKCQkJCQkJCW9ubG9hZDogZnVuY3Rpb24oWE1MSHR0cFJlcXVlc3QpIHsKCQkJCQkJCQkvL2NvbnNvbGUubG9nKCLml7bpl7QzMzMzMzM6IisgbmV3IERhdGUoKS5nZXRUaW1lKCkpOwoJCQkJCQkJCXZhciBib2R5U3RyID0gWE1MSHR0cFJlcXVlc3QucmVzcG9uc2VUZXh0OwoJCQkJCQkJCXZhciB5aXhpZUJvZHkgPSBib2R5U3RyLnN1YnN0cmluZyhib2R5U3RyLnNlYXJjaCgvPHNwYW4gaWQ9Im1vcmUtKFxTKikiPjxcL3NwYW4+LyksYm9keVN0ci5zZWFyY2goLzxkaXYgY2xhc3M9ImNhdGVnb3J5LykpOwoKCQkJCQkJCQl2YXIgaW1nX3N0YXJ0X2lkeCA9IHlpeGllQm9keS5zZWFyY2goLyI+PGltZyAuKnNyYz0iaHR0cHMqOlwvXC8oXFMqKXBpeGhvc3Qub3JnXC90aHVtYnNcLy8pOwoJCQkJCQkJCS8v5aaC5p6c5om+5Yiw5YaF5a655aSn5Zu+CgkJCQkJCQkJaWYoIGltZ19zdGFydF9pZHggPiAwKQoJCQkJCQkJCXsKCQkJCQkJCQkJdmFyIG5ld19pbWdfc3JjID0geWl4aWVCb2R5LnN1YnN0cmluZyh5aXhpZUJvZHkuaW5kZXhPZignc3JjJyxpbWdfc3RhcnRfaWR4KSArIDUseWl4aWVCb2R5LmluZGV4T2YoJ2FsdCcpIC0gMik7CgkJCQkJCQkJCXZhciB0YXJnZXRJbWdVcmwgPSBuZXdfaW1nX3NyYy5yZXBsYWNlKCd0aHVtYnMnLCdpbWFnZXMnKS5yZXBsYWNlKCcvL3QnLCcvL2ltZycpLnJlcGxhY2UoJyInLCcnKTsKCgkJCQkJCQkJCS8v5aaC5p6c5om+5Yiw5YWo6auY5riF5aSn5Zu+5LyY5YWI5pi+56S65YWo6auY5riF55qEICAKCQkJCQkJCQkJY29uc29sZS5sb2coIuWbvueJh+WcsOWdgDoiK3RhcmdldEltZ1VybCk7CgoJCQkJCQkJCQkvL+WIm+W7umltZ+WFg+e0oCzliqDovb3nm67moIflm77niYflnLDlnYAKCQkJCQkJCQkJLy/liJvlu7rmlrBpbWflhYPntKAKCQkJCQkJCQkJdmFyICRpbWcgPSAkKCc8aW1nIG5hbWU9ImphdlJlYWxJbWciIHRpdGxlPSLngrnlh7vlj6/mlL7lpKfnvKnlsI8gKOWbvueJh+ato+W4uOaXtikiPjwvaW1nPicpOwoJCQkJCQkJCQkkaW1nLmF0dHIoInNyYyIsdGFyZ2V0SW1nVXJsKTsKCQkJCQkJCQkJJGltZy5hdHRyKCJzdHlsZSIsImZsb2F0OiBsZWZ0O2N1cnNvcjogcG9pbnRlcjsiKTsgCgoJCQkJCQkJCQkvL+WwhuaWsGltZ+WFg+e0oOaPkuWFpeaMh+WumuS9jee9rgoJCQkJCQkJCQlmdW5jKCRpbWcpOwoJCQkJCQkJCQljb25zb2xlLmxvZygi5pe26Ze0NDQ0NDQ0OiIrIG5ldyBEYXRlKCkuZ2V0VGltZSgpKTsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJb25lcnJvcjogZnVuY3Rpb24oZSkgewoJCQkJCQkJCWNvbnNvbGUubG9nKGUpOwoJCQkJCQkJfQoJCQkJCQl9KTsvL2VuZCAgR01feG1saHR0cFJlcXVlc3QKCQkJCQl9CgkJCQl9LAoJCQkJb25lcnJvcjogZnVuY3Rpb24oZSkgewoJCQkJCWNvbnNvbGUubG9nKGUpOwoJCQkJfQoJCQl9KTsvL2VuZCAgR01feG1saHR0cFJlcXVlc3QKCQl9LAoJfTsKCgl2YXIgbWFpbiA9IHsKCQkvL2F25L+h5oGv5p+l6K+iIOexuwoJCWphdjogewoJCQl0eXBlOiAwLAoJCQlyZTogLyhhdmlvfGF2bW98YXZzb3xhdnhvKS4qbW92aWUuKi8sCgkJCXZpZDogZnVuY3Rpb24oKSB7CgkJCQlyZXR1cm4gJCgnLmhlYWRlcicpWzBdLm5leHRFbGVtZW50U2libGluZy5pbm5lckhUTUw7CgkJCX0sCgkJCXByb2M6IGZ1bmN0aW9uKCkgewoJCQkJLy9pbnNlcnRfYWZ0ZXIoJyNtb3ZpZS1zaGFyZScpOwoJCQkJdmFyIGRpdkUgPSAkKCJkaXZbY2xhc3M9J2NvbC1tZC0zIGluZm8nXSIpWzBdOwoJCQkJJChkaXZFKS5hZnRlcihtYWluLmN1cl90YWIpOwoJCQkJLy8kKG1haW4uY3VyX3RhYikuYmVmb3JlKCQoJyNtb3ZpZS1zaGFyZScpWzBdKTsKCQkJfQoJCX0sCgkJamF2YnVzOiB7CgkJCXR5cGU6IDAsCgkJCXJlOiAvamF2YnVzLywKCQkJdmlkOiBmdW5jdGlvbigpIHsKCQkJCXZhciBhID0gJCgnLmhlYWRlcicpWzBdLm5leHRFbGVtZW50U2libGluZzsKCQkJCXJldHVybiBhID8gYS50ZXh0Q29udGVudCA6ICcnOwoJCQl9LAoJCQlwcm9jOiBmdW5jdGlvbigpIHsKCQkJCXZhciBkaXZFID0gJCgiZGl2W2NsYXNzPSdjb2wtbWQtMyBpbmZvJ10iKVswXTsKCQkJCS8vdmFyIHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7CgkJCQkvL3AuY2xhc3NOYW1lID0gJ2hvYmJ5JzsKCQkJCS8vZGl2RS5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHApOwoJCQkJJChkaXZFKS5hZnRlcihtYWluLmN1cl90YWIpOwoJCQl9CgkJfSwKCQlqYXZsaWJyYXJ5OiB7CgkJCXR5cGU6IDAsCgkJCXJlOiAvKGphdmxpYnJhcnl8amF2bGliM3xsb29rNGxpYnw1YXZsaWJ8amF2bGk2fGo4dmxpYnxqOWxpYnxqYXYxMWJ8amExNGJ8MTN2bGliKS4qXD92PS4qLywKCQkJdmlkOiBmdW5jdGlvbigpIHsKCQkJCXJldHVybiAkKCcjdmlkZW9faWQnKVswXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0ZXh0JylbMF0uaW5uZXJIVE1MOwoJCQl9LAoJCQlwcm9jOiBmdW5jdGlvbigpIHsKCQkJCS8vaW5zZXJ0X2FmdGVyKCcjdmlkZW9faW5mbycpOwoJCQkJLy88dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOiB0b3A7Ij4KCQkJCSQoJy5zb2NpYWxtZWRpYScpLnJlbW92ZSgpOwoJCQkJR01fYWRkU3R5bGUoWwoJCQkJCScjdmlkZW9faW5mb3t0ZXh0LWFsaWduOiBsZWZ0O2ZvbnQ6IDE0cHggQXJpYWw7bWluLXdpZHRoOiAyMjBweDttYXgtd2lkdGg6IDIyMHB4O3BhZGRpbmc6IDBweCAwcHggMHB4IDBweDt9JywKCQkJCQknI3ZpZGVvX2phY2tldF9pbmZvIHt3aWR0aDogMTAwJTtvdmVyZmxvdzogaGlkZGVuO30nLC8vdGFibGUtbGF5b3V0OiBmaXhlZDsKCQkJCQknI2NvdmVyaW1nIHt2ZXJ0aWNhbC1hbGlnbjogdG9wO292ZXJmbG93OiBoaWRkZW47bWF4LXdpZHRoOiA1MCU7fScsCgkJCQkJJyNqYXZ0ZXh0IHt2ZXJ0aWNhbC1hbGlnbjogdG9wO3dpZHRoOiAyMjBweDt9JywKCQkJCQknI3ZpZGVvX2luZm8gdGQuaGVhZGVyIHt3aWR0aDogNzVweDt9JywKCQkJCQknI3ZpZGVvX2luZm8gdGQuaWNvbiB7d2lkdGg6IDBweDt9JywKCQkJCQknI2NvbnRlbnQge3BhZGRpbmctdG9wOiAwcHg7fScsCgkJCQldLmpvaW4oJycpKTsKCgkJCQl2YXIgdGRFID0gJCgidGRbc3R5bGU9J3ZlcnRpY2FsLWFsaWduOiB0b3A7J10iKVswXTsKCQkJCXRkRS5pZCA9ICJjb3ZlcmltZyI7CgkJCQkkKCJ0ZFtzdHlsZT0ndmVydGljYWwtYWxpZ246IHRvcDsnXSIpWzFdLmlkID0gJ2phdnRleHQnOwoJCQkJJCgnI2xlZnRtZW51JykucmVtb3ZlKCk7CgkJCQkkKCcjcmlnaHRjb2x1bW4nKS5hdHRyKCJzdHlsZSIsIm1hcmdpbjogMHB4IDBweCAwcHggMHB4O3dpZHRoOiAxMDAlO3BhZGRpbmc6IGluaXRpYWw7Iik7CgkJCQkkKHRkRS5wYXJlbnRFbGVtZW50KS5hcHBlbmQoJzx0ZCBpZD0iaG9iYnkiIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjogdG9wO3dpZHRoOiAxMDAlOyI+PC90ZD4nKTsKCQkJCSQoJyNob2JieScpLmFwcGVuZChtYWluLmN1cl90YWIpOwoJCQl9CgkJfSwKCX07CgoJLy8g5oyKCgl2YXIgbWFpbl9rZXlzID0gT2JqZWN0LmtleXMobWFpbik7IC8v5LiL6Z2i55qE5LiN6KaB5Ye6546wCgltYWluLmN1cl90YWIgPSBudWxsOwoJbWFpbi5jdXJfdmlkID0gJyc7CgoJLy8g56ys5LiJ5pa56ISa5pys6LCD55SoCgl2YXIgdGhpcmRwYXJ0eSA9IHsKCQkvLyDmjIoKCQlvZmZsaW5lX3NpdGVzIDogewoJCQkxMTU6IHsKCQkJCW5hbWU6ICcxMTXnprvnur8nLAoJCQkJdXJsOiAnaHR0cDovLzExNS5jb20vP3RhYj1vZmZsaW5lJm1vZGU9d2FuZ3BhbicsCgkJCQllbmFibGU6IHRydWUsCgkJCX0sCgkJfSwKCQkvLyDmjIoKCQlzZWFyY2hNYWduZXRSdW46IGZ1bmN0aW9uKCkgewoJCQlmb3IgKHZhciBpID0gMDsgaSA8IG1haW5fa2V5cy5sZW5ndGg7IGkrKykgewoJCQkJdmFyIHYgPSBtYWluW21haW5fa2V5c1tpXV07CgoJCQkJLy9mb3IgamF2bGlicmFyeQoJCQkJaWYoJCgiI2FkdWx0d2FybmluZ3Byb21wdCIpWzBdICE9PSBudWxsKXsKCQkJCQkvLyQoIiNhZHVsdHdhcm5pbmdwcm9tcHQgaW5wdXQiKVswXS5jbGljaygpOwoJCQkJfQoKCQkJCWlmICh2LnJlLnRlc3QobG9jYXRpb24uaHJlZikpIHsKCQkJCQlpZiAodi50eXBlID09PSAwKSB7CgkJCQkJCXRyeSB7CgkJCQkJCQltYWluLmN1cl92aWQgPSB2LnZpZCgpOwoJCQkJCQl9CgkJCQkJCWNhdGNoIChlKSB7CgkJCQkJCQltYWluLmN1cl92aWQgPSAnJzsKCQkJCQkJfQoJCQkJCQlpZiAobWFpbi5jdXJfdmlkKSB7CgkJCQkJCQlHTV9hZGRTdHlsZShbCgkJCQkJCQkJJyNub25nLXRhYmxlLW5ld3ttYXJnaW46MTBweCBhdXRvO2NvbG9yOiM2NjYgIWltcG9ydGFudDtmb250LXNpemU6MTNweDt0ZXh0LWFsaWduOmNlbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiAjRjJGMkYyO30nLAoJCQkJCQkJCScjbm9uZy10YWJsZS1uZXcgdGgsI25vbmctdGFibGUtbmV3IHRke3RleHQtYWxpZ246IGNlbnRlcjtoZWlnaHQ6MzBweDtiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGO3BhZGRpbmc6MCAxZW0gMDtib3JkZXI6IDFweCBzb2xpZCAjRUZFRkVGO30nLAoJCQkJCQkJCScuamF2LW5vbmctcm93e3RleHQtYWxpZ246IGNlbnRlcjtoZWlnaHQ6MzBweDtiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGO3BhZGRpbmc6MCAxZW0gMDtib3JkZXI6IDFweCBzb2xpZCAjRUZFRkVGO30nLAoJCQkJCQkJCScubm9uZy1jb3B5e2NvbG9yOiMwOGMgIWltcG9ydGFudDt9JywKCQkJCQkJCQknLm5vbmctb2ZmbGluZXt0ZXh0LWFsaWduOiBjZW50ZXI7fScsCgkJCQkJCQkJJyNqYXYtbm9uZy1oZWFkIGEge21hcmdpbi1yaWdodDogNXB4O30nLAoJCQkJCQkJCScubm9uZy1vZmZsaW5lLWRvd25sb2Fke2NvbG9yOiByZ2IoMCwgMTgwLCAzMCkgIWltcG9ydGFudDsgbWFyZ2luLXJpZ2h0OiA0cHggIWltcG9ydGFudDt9JywKCQkJCQkJCQknLm5vbmctb2ZmbGluZS1kb3dubG9hZDpob3Zlcntjb2xvcjpyZWQgIWltcG9ydGFudDt9JywKCgkJCQkJCQldLmpvaW4oJycpKTsKCQkJCQkJCW1haW4uY3VyX3RhYiA9IHRoaXJkcGFydHkubWFnbmV0X3RhYmxlLmZ1bGwoKTsKCQkJCQkJCWNvbnNvbGUubG9nKCfnlarlj7fvvJonLCBtYWluLmN1cl92aWQpOwoJCQkJCQkJdi5wcm9jKCk7CgoJCQkJCQkJLy8gY29uc29sZS5sb2cobWFpbi5jdXJfdGFiKQoJCQkJCQkJdmFyIHQgPSAkKCcjamF2LW5vbmctaGVhZCcpWzBdLmZpcnN0Q2hpbGQ7CgkJCQkJCQl0LmZpcnN0Q2hpbGQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZSkgewoJCQkJCQkJCWNvbnNvbGUubG9nKGUudGFyZ2V0LnZhbHVlKTsKCQkJCQkJCQlHTV9zZXRWYWx1ZSgnc2VhcmNoX2luZGV4JywgZS50YXJnZXQudmFsdWUpOwoJCQkJCQkJCXZhciBzID0gJCgnI25vbmctdGFibGUtbmV3JylbMF07CgkJCQkJCQkJcy5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHMpOwoJCQkJCQkJCXRoaXJkcGFydHkuc2VhcmNoTWFnbmV0UnVuKCk7CgkJCQkJCQl9KTsKCgkJCQkJCQl0aGlyZHBhcnR5LnNlYXJjaF9lbmdpbmVzLmN1cl9lbmdpbmUobWFpbi5jdXJfdmlkLCBmdW5jdGlvbihzcmMsIGRhdGEpIHsKCQkJCQkJCQlpZiAoZGF0YS5sZW5ndGggPT09IDApIHsKCQkJCQkJCQkJJCgnI25vbmctdGFibGUtbmV3JylbMF0ucXVlcnlTZWxlY3RvckFsbCgnI25vdGljZScpWzBdLnRleHRDb250ZW50ID0gJ05vIHNlYXJjaCByZXN1bHQnOwoJCQkJCQkJCX0KCQkJCQkJCQllbHNlIHsKCQkJCQkJCQkJdGhpcmRwYXJ0eS5tYWduZXRfdGFibGUudXBkYXRhX3RhYmxlKHNyYywgZGF0YSwgJ2Z1bGwnKTsKCQkJCQkJCQkJLypkaXNwbGF5IHNlYXJjaCB1cmwqLwoJCQkJCQkJCQl2YXIgeSA9ICQoJyNqYXYtbm9uZy1oZWFkIHRoJylbMV0uZmlyc3RDaGlsZDsKCQkJCQkJCQkJeS5ocmVmID0gdGhpcmRwYXJ0eS5zZWFyY2hfZW5naW5lcy5mdWxsX3VybDsKCQkJCQkJCQl9CgkJCQkJCQl9KTsKCQkJCQkJfQoJCQkJCX0KCQkJCQlicmVhazsKCQkJCX0KCQkJfQoJCX0sCgkJLy8g5oyKCgkJc2VhcmNoX2VuZ2luZXMgOiB7CgkJCXN3aXRjaF9lbmdpbmU6IGZ1bmN0aW9uKGkpIHsKCQkJCS8vIHZhciBpbmRleCA9IEdNX2dldFZhbHVlKCJzZWFyY2hfaW5kZXgiLDApOwoJCQkJR01fc2V0VmFsdWUoJ3NlYXJjaF9pbmRleCcsIGkpOwoJCQkJcmV0dXJuIGk7CgkJCX0sCgkJCWN1cl9lbmdpbmU6IGZ1bmN0aW9uKGt3LCBjYikgewoJCQkJdmFyIHogPSB0aGlzW0dNX2dldFZhbHVlKCdzZWFyY2hfaW5kZXgnLCAwKV07CgkJCQlpZigheil7CgkJCQkJYWxlcnQoInNlYXJjaCBlbmdpbmUgbm90IGZvdW5kIik7CgkJCQl9CgkJCQlyZXR1cm4geihrdywgY2IpOwoJCQl9LAoJCQlwYXJzZV9lcnJvcjpmdW5jdGlvbihhKXsKCQkJCWFsZXJ0KCLosIPnlKjmkJzntKLlvJXmk47plJnor6/vvIzlj6/og73pnIDopoHmm7TmlrDvvIzor7flkJHkvZzogIXlj43ppojjgIJpPSIrIGEpOwoJCQl9LAoJCQlmdWxsX3VybDogJycsCgkJCTA6IGZ1bmN0aW9uKGt3LCBjYikgewoJCQkJR01feG1saHR0cFJlcXVlc3QoewoJCQkJCW1ldGhvZDogJ0dFVCcsCgkJCQkJdXJsOiAnaHR0cHM6Ly9idHNvLnB3L3NlYXJjaC8nICsga3csCgkJCQkJb25sb2FkOiBmdW5jdGlvbihyZXN1bHQpIHsKCQkJCQkJdGhpcmRwYXJ0eS5zZWFyY2hfZW5naW5lcy5mdWxsX3VybCA9IHJlc3VsdC5maW5hbFVybDsKCQkJCQkJdmFyIGRvYyA9IGNvbW1vbi5wYXJzZXRleHQocmVzdWx0LnJlc3BvbnNlVGV4dCk7CgkJCQkJCWlmICghZG9jKSB7CgkJCQkJCQl0aGlyZHBhcnR5LnNlYXJjaF9lbmdpbmVzLnBhcnNlX2Vycm9yKEdNX2dldFZhbHVlKCdzZWFyY2hfaW5kZXgnKSk7CgkJCQkJCX0KCQkJCQkJdmFyIGRhdGEgPSBbXTsKCQkJCQkJdmFyIHQgPSBkb2MuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZGF0YS1saXN0JylbMF07CgkJCQkJCWlmICh0KSB7CgkJCQkJCQl2YXIgYSA9IHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2EnKTsKCQkJCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykgewoJCQkJCQkJCWlmICghYVtpXS5jbGFzc05hbWUubWF0Y2goJ2J0bicpKSB7CgkJCQkJCQkJCWRhdGEucHVzaCh7CgkJCQkJCQkJCQkndGl0bGUnOiBhW2ldLnRpdGxlLAoJCQkJCQkJCQkJJ21hZ2xpbmsnOiAnbWFnbmV0Oj94dD11cm46YnRpaDonICsgYVtpXS5vdXRlckhUTUwucmVwbGFjZSgvLipoYXNoXC8vLCAnJykucmVwbGFjZSgvIiAuKlxuLipcbi4qXG4uKi8sICcnKSwKCQkJCQkJCQkJCSdzaXplJzogYVtpXS5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQsCgkJCQkJCQkJCQknc3JjJzogYVtpXS5ocmVmLAoJCQkJCQkJCQl9KTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJY2IocmVzdWx0LmZpbmFsVXJsLCBkYXRhKTsKCQkJCQl9LAoJCQkJCW9uZXJyb3I6IGZ1bmN0aW9uKGUpIHsKCQkJCQkJY29uc29sZS5sb2coZSk7CgkJCQkJfQoJCQkJfSk7CgkJCX0sCgkJCTE6IGZ1bmN0aW9uKGt3LCBjYikgewoJCQkJR01feG1saHR0cFJlcXVlc3QoewoJCQkJCW1ldGhvZDogJ0dFVCcsCgkJCQkJdXJsOiAnaHR0cHM6Ly9idGRiLnRvL3EvJyArIGt3ICsgJy8nLAoJCQkJCW9ubG9hZDogZnVuY3Rpb24ocmVzdWx0KSB7CgkJCQkJCXRoaXJkcGFydHkuc2VhcmNoX2VuZ2luZXMuZnVsbF91cmwgPSByZXN1bHQuZmluYWxVcmw7CgkJCQkJCXZhciBkb2MgPSBjb21tb24ucGFyc2V0ZXh0KHJlc3VsdC5yZXNwb25zZVRleHQpOwoJCQkJCQlpZighZG9jKXsKCQkJCQkJCXRoaXJkcGFydHkuc2VhcmNoX2VuZ2luZXMucGFyc2VfZXJyb3IoR01fZ2V0VmFsdWUoJ3NlYXJjaF9pbmRleCcpKTsKCQkJCQkJfQoJCQkJCQl2YXIgZGF0YSA9IFtdOwoJCQkJCQl2YXIgZWxlbXMgPSBkb2MuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnaXRlbS10aXRsZScpOwoJCQkJCQlmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1zLmxlbmd0aDsgaSsrKSB7CgkJCQkJCQlkYXRhLnB1c2goewoJCQkJCQkJCSd0aXRsZSc6IGVsZW1zW2ldLmZpcnN0Q2hpbGQudGl0bGUsCgkJCQkJCQkJJ21hZ2xpbmsnOiBlbGVtc1tpXS5uZXh0RWxlbWVudFNpYmxpbmcuZmlyc3RFbGVtZW50Q2hpbGQuaHJlZiwKCQkJCQkJCQknc2l6ZSc6IGVsZW1zW2ldLm5leHRFbGVtZW50U2libGluZy5jaGlsZHJlblsxXS50ZXh0Q29udGVudCwKCQkJCQkJCQknc3JjJzogJ2h0dHBzOi8vYnRkYi50bycgKyBlbGVtc1tpXS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgnaHJlZicpLAoJCQkJCQkJfSk7CgkJCQkJCX0KCQkJCQkJY29uc29sZS5sb2coZGF0YSk7CgkJCQkJCWNiKHJlc3VsdC5maW5hbFVybCwgZGF0YSk7CgkJCQkJfSwKCQkJCQlvbmVycm9yOiBmdW5jdGlvbihlKSB7CgkJCQkJCWNvbnNvbGUubG9nKGUpOwoJCQkJCX0KCQkJCX0pOwoJCQl9LAoJCQkyOiBmdW5jdGlvbiAoa3csIGNiKSB7CgkJCQlHTV94bWxodHRwUmVxdWVzdCh7CgkJCQkJbWV0aG9kOiAiR0VUIiwKCQkJCQl1cmw6ICJodHRwczovL3N1a2ViZWkubnlhYS5zaS8/Zj0wJmM9MF8wJnE9IiArIGt3LAoJCQkJCW9ubG9hZDogZnVuY3Rpb24gKHJlc3VsdCkgewoJCQkJCQl0aGlyZHBhcnR5LnNlYXJjaF9lbmdpbmVzLmZ1bGxfdXJsID0gcmVzdWx0LmZpbmFsVXJsOwoJCQkJCQlsZXQgZG9jID0gY29tbW9uLnBhcnNldGV4dChyZXN1bHQucmVzcG9uc2VUZXh0KTsKCQkJCQkJaWYoIWRvYyl7CgkJCQkJCQl0aGlyZHBhcnR5LnNlYXJjaF9lbmdpbmVzLnBhcnNlX2Vycm9yKEdNX2dldFZhbHVlKCdzZWFyY2hfaW5kZXgnKSk7CgkJCQkJCX0KCQkJCQkJbGV0IGRhdGEgPSBbXTsKCQkJCQkJbGV0IHQgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgidHIuZGVmYXVsdCIpOwoJCQkJCQlpZiAodC5sZW5ndGghPT0wKSB7CgkJCQkJCQlmb3IgKGxldCBlbGVtIG9mIHQpIHsKCQkJCQkJCQlkYXRhLnB1c2goewoJCQkJCQkJCQkidGl0bGUiOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoInRkOm50aC1jaGlsZCgyKT5hOm50aC1jaGlsZCgxKSIpLnRpdGxlLAoJCQkJCQkJCQkibWFnbGluayI6IGVsZW0ucXVlcnlTZWxlY3RvcigidGQ6bnRoLWNoaWxkKDMpPmE6bnRoLWNoaWxkKDEpIikuaHJlZiwKCQkJCQkJCQkJLy8idG9ycmVudF91cmwiOiAiaHR0cHM6Ly9ueWFhLnNpIiArIGVsZW0ucXVlcnlTZWxlY3RvcigidGQ6bnRoLWNoaWxkKDMpPmE6bnRoLWNoaWxkKDEpIikuaHJlZiwKCQkJCQkJCQkJInNpemUiOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoInRkOm50aC1jaGlsZCg0KSIpLnRleHRDb250ZW50LAoJCQkJCQkJCQkic3JjIjogImh0dHBzOi8vc3VrZWJlaS5ueWFhLnNpIiArIGVsZW0ucXVlcnlTZWxlY3RvcigidGQ6bnRoLWNoaWxkKDIpPmE6bnRoLWNoaWxkKDEpIikuZ2V0QXR0cmlidXRlKCdocmVmJyksCgkJCQkJCQkJfSk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJZWxzZSB7CgkJCQkJCQlkYXRhLnB1c2goewoJCQkJCQkJCSJ0aXRsZSI6ICLmsqHmnInmib7liLDno4Hpk77mjqUiLAoJCQkJCQkJCSJtYWdsaW5rIjogIiIsCgkJCQkJCQkJLy8idG9ycmVudF91cmwiOiAiIiwKCQkJCQkJCQkic2l6ZSI6ICIwIiwKCQkJCQkJCQkic3JjIjogcmVzdWx0LmZpbmFsVXJsLAoJCQkJCQkJfSk7CgkJCQkJCX0KCgkJCQkJCWNiKHJlc3VsdC5maW5hbFVybCwgZGF0YSk7CgkJCQkJfSwKCQkJCQlvbmVycm9yOiBmdW5jdGlvbiAoZSkgewoJCQkJCQljb25zb2xlLmVycm9yKGUpOwoJCQkJCQl0aHJvdyAic2VhcmNoIGVycm9yIjsKCQkJCQl9CgkJCQl9KTsKCQkJfSwKCQkJMzogZnVuY3Rpb24gKGt3LCBjYikgewoJCQkJR01feG1saHR0cFJlcXVlc3QoewoJCQkJCW1ldGhvZDogIlBPU1QiLAoJCQkJCXVybDogImh0dHA6Ly9idGtpdHR5LnBldC8iLAoJCQkJCWRhdGE6ICJrZXl3b3JkPSIgKyBrdysiJmhpZGRlbj10cnVlIiwKCQkJCQloZWFkZXJzOiB7CgkJCQkJCSJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIgoJCQkJCX0sCgkJCQkJb25sb2FkOiBmdW5jdGlvbiAocmVzdWx0KSB7CgkJCQkJCXRoaXJkcGFydHkuc2VhcmNoX2VuZ2luZXMuZnVsbF91cmwgPSByZXN1bHQuZmluYWxVcmw7CgkJCQkJCWxldCBkb2MgPSBjb21tb24ucGFyc2V0ZXh0KHJlc3VsdC5yZXNwb25zZVRleHQpOwoJCQkJCQlsZXQgZGF0YSA9IFtdOwoJCQkJCQlsZXQgdCA9IGRvYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJsaXN0LWNvbiIpOwoJCQkJCQlpZiAodCkgewoJCQkJCQkJZm9yIChsZXQgZWxlbSBvZiB0KSB7CgkJCQkJCQkJZGF0YS5wdXNoKHsKCQkJCQkJCQkJInRpdGxlIjogZWxlbS5xdWVyeVNlbGVjdG9yKCJkdCBhIikudGV4dENvbnRlbnQsCgkJCQkJCQkJCSJtYWdsaW5rIjogZWxlbS5xdWVyeVNlbGVjdG9yKCJkZCBhIikuaHJlZiwKCQkJCQkJCQkJInNpemUiOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoIi5vcHRpb24gc3BhbjpudGgtY2hpbGQoMykgYiIpLnRleHRDb250ZW50LAoJCQkJCQkJCQkic3JjIjogZWxlbS5xdWVyeVNlbGVjdG9yKCJkdCBhIikuaHJlZiwKCQkJCQkJCQl9KTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQllbHNlIHsKCQkJCQkJCWRhdGEucHVzaCh7CgkJCQkJCQkJInRpdGxlIjogIuayoeacieaJvuWIsOejgemTvuaOpSIsCgkJCQkJCQkJIm1hZ2xpbmsiOiAiIiwKCQkJCQkJCQkic2l6ZSI6ICIwIiwKCQkJCQkJCQkic3JjIjogcmVzdWx0LmZpbmFsVXJsLAoJCQkJCQkJfSk7CgkJCQkJCX0KCQkJCQkJY2IocmVzdWx0LmZpbmFsVXJsLCBkYXRhKTsKCQkJCQl9LAoJCQkJCW9uZXJyb3I6IGZ1bmN0aW9uIChlKSB7CgkJCQkJCWNvbnNvbGUuZXJyb3IoZSk7CgkJCQkJCXRocm93ICJzZWFyY2ggZXJyb3IiOwoJCQkJCX0KCQkJCX0pOwoJCQl9LAoJCQk0OiBmdW5jdGlvbiAoa3csIGNiKSB7CgkJCQlHTV94bWxodHRwUmVxdWVzdCh7CgkJCQkJbWV0aG9kOiAiR0VUIiwKCQkJCQl1cmw6ICJodHRwczovL3d3dy50b3JyZW50a2l0dHkudHYvc2VhcmNoLyIra3csCgkJCQkJb25sb2FkOiBmdW5jdGlvbiAocmVzdWx0KSB7CgkJCQkJCXRoaXJkcGFydHkuc2VhcmNoX2VuZ2luZXMuZnVsbF91cmwgPSByZXN1bHQuZmluYWxVcmw7CgkJCQkJCWxldCBkb2MgPSBjb21tb24ucGFyc2V0ZXh0KHJlc3VsdC5yZXNwb25zZVRleHQpOwoJCQkJCQlsZXQgZGF0YSA9IFtdOwoJCQkJCQlsZXQgdCA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCIjYXJjaGl2ZVJlc3VsdCB0ciIpOwoJCQkJCQlpZiAodCkgewoJCQkJCQkJdCA9IEFycmF5LnNsaWNlKHQsMSx0Lmxlbmd0aCk7CgkJCQkJCQlmb3IgKGxldCBlbGVtIG9mIHQpIHsKCQkJCQkJCQlkYXRhLnB1c2goewoJCQkJCQkJCQkidGl0bGUiOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoIi5uYW1lIikudGV4dENvbnRlbnQsCgkJCQkJCQkJCSJtYWdsaW5rIjogZWxlbS5xdWVyeVNlbGVjdG9yKCIuYWN0aW9uPmE6bnRoLWNoaWxkKDIpIikuaHJlZiwKCQkJCQkJCQkJInNpemUiOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoIi5zaXplIikudGV4dENvbnRlbnQsCgkJCQkJCQkJCSJzcmMiOiAiaHR0cHM6Ly93d3cudG9ycmVudGtpdHR5LnR2IiArIGVsZW0ucXVlcnlTZWxlY3RvcigiLmFjdGlvbj5hOm50aC1jaGlsZCgxKSIpLmdldEF0dHJpYnV0ZSgnaHJlZicpLAoJCQkJCQkJCX0pOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWVsc2UgewoJCQkJCQkJZGF0YS5wdXNoKHsKCQkJCQkJCQkidGl0bGUiOiAi5rKh5pyJ5om+5Yiw56OB6ZO+5o6lIiwKCQkJCQkJCQkibWFnbGluayI6ICIiLAoJCQkJCQkJCSJzaXplIjogIjAiLAoJCQkJCQkJCSJzcmMiOiByZXN1bHQuZmluYWxVcmwsCgkJCQkJCQl9KTsKCQkJCQkJfQoJCQkJCQljYihyZXN1bHQuZmluYWxVcmwsIGRhdGEpOwoJCQkJCX0sCgkJCQkJb25lcnJvcjogZnVuY3Rpb24gKGUpIHsKCQkJCQkJY29uc29sZS5lcnJvcihlKTsKCQkJCQkJdGhyb3cgInNlYXJjaCBlcnJvciI7CgkJCQkJfQoJCQkJfSk7CgkJCX0sCgkJCTU6IGZ1bmN0aW9uIChrdywgY2IpIHsKCQkJCUdNX3htbGh0dHBSZXF1ZXN0KHsKCQkJCQltZXRob2Q6ICJQT1NUIiwKCQkJCQl1cmw6ICJodHRwOi8vYnRsaWJyYXJ5LnB3IiwKCQkJCQlkYXRhOiAia2V5d29yZD0iICsga3csCgkJCQkJaGVhZGVyczogewoJCQkJCQkiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIKCQkJCQl9LAoJCQkJCW9ubG9hZDogZnVuY3Rpb24gKHJlc3VsdCkgewoJCQkJCQl0aGlyZHBhcnR5LnNlYXJjaF9lbmdpbmVzLmZ1bGxfdXJsID0gcmVzdWx0LmZpbmFsVXJsOwoJCQkJCQlsZXQgZG9jID0gY29tbW9uLnBhcnNldGV4dChyZXN1bHQucmVzcG9uc2VUZXh0KTsKCQkJCQkJbGV0IGRhdGEgPSBbXTsKCQkJCQkJbGV0IHQgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgiLml0ZW0iKTsKCQkJCQkJaWYgKHQpIHsKCQkJCQkJCWZvciAobGV0IGVsZW0gb2YgdCkgewoJCQkJCQkJCWRhdGEucHVzaCh7CgkJCQkJCQkJCSJ0aXRsZSI6IGVsZW0ucXVlcnlTZWxlY3RvcigiLml0ZW0tdGl0bGU+YSIpLnRleHRDb250ZW50LAoJCQkJCQkJCQkibWFnbGluayI6IGVsZW0ucXVlcnlTZWxlY3RvcigiLml0ZW0tZGV0YWlsPnNwYW46bnRoLWNoaWxkKDEpPmEiKS5ocmVmLAoJCQkJCQkJCQkic2l6ZSI6IGVsZW0ucXVlcnlTZWxlY3RvcigiLml0ZW0tZGV0YWlsPnNwYW46bnRoLWNoaWxkKDMpPmIiKS50ZXh0Q29udGVudCwKCQkJCQkJCQkJInNyYyI6IGVsZW0ucXVlcnlTZWxlY3RvcigiLml0ZW0tdGl0bGU+YSIpLmhyZWYsCgkJCQkJCQkJfSk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJZWxzZSB7CgkJCQkJCQlkYXRhLnB1c2goewoJCQkJCQkJCSJ0aXRsZSI6ICLmsqHmnInmib7liLDno4Hpk77mjqUiLAoJCQkJCQkJCSJtYWdsaW5rIjogIiIsCgkJCQkJCQkJInNpemUiOiAiMCIsCgkJCQkJCQkJInNyYyI6IHJlc3VsdC5maW5hbFVybCwKCQkJCQkJCX0pOwoJCQkJCQl9CgkJCQkJCWNiKHJlc3VsdC5maW5hbFVybCwgZGF0YSk7CgkJCQkJfSwKCQkJCQlvbmVycm9yOiBmdW5jdGlvbiAoZSkgewoJCQkJCQljb25zb2xlLmVycm9yKGUpOwoJCQkJCQl0aHJvdyAic2VhcmNoIGVycm9yIjsKCQkJCQl9CgkJCQl9KTsKCQkJfSwKCQl9LAoJCS8vIOaMigoJCW1hZ25ldF90YWJsZSA6IHsKCQkJdGVtcGxhdGU6IHsKCQkJCWNyZWF0ZV9oZWFkOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7CgkJCQkJYS5jbGFzc05hbWUgPSAnamF2LW5vbmctcm93JzsKCQkJCQlhLmlkID0gJ2phdi1ub25nLWhlYWQnOwoJCQkJCXZhciBsaXN0ID0gWwoJCQkJCQkn5qCH6aKYJywKCQkJCQkJJ+Wkp+WwjycsCgkJCQkJCSfmk43kvZwnLAoJCQkJCQkn56a757q/5LiL6L29JwoJCQkJCV07CgkJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CgkJCQkJCXZhciBiID0gdGhpcy5oZWFkLmNsb25lTm9kZSh0cnVlKTsKCQkJCQkJaWYgKGkgPT09IDApIHsKCQkJCQkJCXZhciBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKTsKCQkJCQkJCXZhciBvcHMgPSBbImJ0c28iLCAiYnRkYiIsICJueWFhLnNpIiwgImJ0a2l0dHkiLCJ0b3JyZW50a2l0dHkiLCJidGxpYnJhcnkiXTsKCQkJCQkJCXZhciBjdXJfaW5kZXggPSBHTV9nZXRWYWx1ZSgic2VhcmNoX2luZGV4IiwwKTsKCQkJCQkJCWZvciAodmFyIGogPSAwOyBqIDwgb3BzLmxlbmd0aDsgaisrKSB7CgkJCQkJCQkJdmFyIG9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7CgkJCQkJCQkJb3AudmFsdWUgPSBqLnRvU3RyaW5nKCk7CgkJCQkJCQkJb3AudGV4dENvbnRlbnQgPSBvcHNbal07CgkJCQkJCQkJaWYgKGN1cl9pbmRleCA9PSBqKSB7CgkJCQkJCQkJCW9wLnNldEF0dHJpYnV0ZSgic2VsZWN0ZWQiLCAic2VsZWN0ZWQiKTsKCQkJCQkJCQl9CgkJCQkJCQkJc2VsZWN0LmFwcGVuZENoaWxkKG9wKTsKCQkJCQkJCX0KCQkJCQkJCWIucmVtb3ZlQ2hpbGQoYi5maXJzdENoaWxkKTsKCQkJCQkJCWIuYXBwZW5kQ2hpbGQoc2VsZWN0KTsKCQkJCQkJCWEuYXBwZW5kQ2hpbGQoYik7CgkJCQkJCQljb250aW51ZTsKCQkJCQkJfQoJCQkJCQliLmZpcnN0Q2hpbGQudGV4dENvbnRlbnQgPSBsaXN0W2ldOwoJCQkJCQlhLmFwcGVuZENoaWxkKGIpOwoJCQkJCX0KCQkJCQkvLyB2YXIgc2VsZWN0X2JveCA9IHRoaXMuY3JlYXRlX3NlbGVjdF9ib3goKTsKCQkJCQkvLyBhLmZpcnN0Q2hpbGQuYXBwZW5kQ2hpbGQoc2VsZWN0X2JveCk7CgoJCQkJCXJldHVybiBhOwoJCQkJfSwKCQkJCWNyZWF0ZV9yb3c6IGZ1bmN0aW9uKGRhdGEpIHsKCQkJCQl2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7CgkJCQkJYS5jbGFzc05hbWUgPSAnamF2LW5vbmctcm93JzsKCQkJCQlhLnNldEF0dHJpYnV0ZSgnbWFnbGluaycsIGRhdGEubWFnbGluayk7CgkJCQkJdmFyIGIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwoJCQkJCXZhciBsaXN0ID0gWwoJCQkJCQl0aGlzLmNyZWF0ZV9pbmZvKGRhdGEudGl0bGUsIGRhdGEubWFnbGluayksCgkJCQkJCXRoaXMuY3JlYXRlX3NpemUoZGF0YS5zaXplLCBkYXRhLnNyYyksCgkJCQkJCXRoaXMuY3JlYXRlX29wZXJhdGlvbihkYXRhLm1hZ2xpbmspLAoJCQkJCQl0aGlzLmNyZWF0ZV9vZmZsaW5lKCkKCQkJCQldOwoJCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewoJCQkJCQl2YXIgYyA9IGIuY2xvbmVOb2RlKHRydWUpOwoJCQkJCQljLmFwcGVuZENoaWxkKGxpc3RbaV0pOwoJCQkJCQlhLmFwcGVuZENoaWxkKGMpOwoJCQkJCX0KCQkJCQlyZXR1cm4gYTsKCQkJCX0sCgkJCQljcmVhdGVfbG9hZGluZzogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOwoJCQkJCWEuY2xhc3NOYW1lID0gJ2phdi1ub25nLXJvdyc7CgkJCQkJdmFyIHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7CgkJCQkJcC50ZXh0Q29udGVudCA9ICdMb2FkaW5nJzsKCQkJCQlwLmlkID0gJ25vdGljZSc7CgkJCQkJYS5hcHBlbmRDaGlsZChwKTsKCQkJCQlyZXR1cm4gYTsKCQkJCX0sCgkJCQljcmVhdGVfaW5mbzogZnVuY3Rpb24odGl0bGUsIG1hZ2xpbmspIHsKCQkJCQl2YXIgYSA9IHRoaXMuaW5mby5jbG9uZU5vZGUodHJ1ZSk7CgkJCQkJYS5maXJzdENoaWxkLnRleHRDb250ZW50ID0gdGl0bGUubGVuZ3RoIDwgMjAgPyB0aXRsZSA6IHRpdGxlLnN1YnN0cigwLCAyMCkgKyAnLi4uJzsKCQkJCQlhLmZpcnN0Q2hpbGQuaHJlZiA9IG1hZ2xpbms7CgkJCQkJYS50aXRsZSA9IHRpdGxlOwoJCQkJCXJldHVybiBhOwoJCQkJfSwKCQkJCWNyZWF0ZV9zaXplOiBmdW5jdGlvbihzaXplLCBzcmMpIHsKCQkJCQl2YXIgYSA9IHRoaXMuc2l6ZS5jbG9uZU5vZGUodHJ1ZSk7CgkJCQkJYS50ZXh0Q29udGVudCA9IHNpemU7CgkJCQkJYS5ocmVmID0gc3JjOwoJCQkJCXJldHVybiBhOwoJCQkJfSwKCQkJCWNyZWF0ZV9vcGVyYXRpb246IGZ1bmN0aW9uKG1hZ2xpbmspIHsKCQkJCQl2YXIgYSA9IHRoaXMub3BlcmF0aW9uLmNsb25lTm9kZSh0cnVlKTsKCQkJCQlhLmZpcnN0Q2hpbGQuaHJlZiA9IG1hZ2xpbms7CgkJCQkJcmV0dXJuIGE7CgkJCQl9LAoJCQkJY3JlYXRlX29mZmxpbmU6IGZ1bmN0aW9uKCkgeyAgICAvL+acieeUqCBob2JieQoJCQkJCXZhciBhID0gdGhpcy5vZmZsaW5lKCk7CgkJCQkJYS5jbGFzc05hbWUgPSAnbm9uZy1vZmZsaW5lJzsKCQkJCQlyZXR1cm4gYTsKCQkJCX0sCgkJCQljcmVhdGVfc2VsZWN0X2JveDogZnVuY3Rpb24oKSB7CgkJCQkJdmFyIHNlbGVjdF9ib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTsKCQkJCQlzZWxlY3RfYm94LmlkID0gJ25vbmctc2VhcmNoLXNlbGVjdCc7CgkJCQkJc2VsZWN0X2JveC5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgJ+WIh+aNouaQnOe0oue7k+aenCcpOwoJCQkJCXZhciBzZWFyY2hfbmFtZSA9IEdNX2dldFZhbHVlKCdzZWFyY2gnLCBkZWZhdWx0X3NlYXJjaF9uYW1lKTsKCQkJCQlmb3IgKHZhciBrIGluIHRoaXJkcGFydHkuc2VhcmNoX2VuZ2luZXMpIHsKCQkJCQkJdmFyIG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsKCQkJCQkJaWYgKGsgPT0gc2VhcmNoX25hbWUpIHsKCQkJCQkJCW8uc2V0QXR0cmlidXRlKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpOwoJCQkJCQl9CgkJCQkJCW8uc2V0QXR0cmlidXRlKCd2YWx1ZScsIGspOwoJCQkJCQlvLnRleHRDb250ZW50ID0gazsKCQkJCQkJc2VsZWN0X2JveC5hcHBlbmRDaGlsZChvKTsKCQkJCQl9CgkJCQkJcmV0dXJuIHNlbGVjdF9ib3g7CgkJCQl9LAoJCQkJaGVhZDogKGZ1bmN0aW9uKCkgewoJCQkJCXZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGgnKTsKCQkJCQl2YXIgYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKCQkJCQlhLmFwcGVuZENoaWxkKGIpOwoJCQkJCXJldHVybiBhOwoJCQkJfSkoKSwKCQkJCWluZm86IChmdW5jdGlvbigpIHsKCQkJCQl2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwoJCQkJCXZhciBiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwoJCQkJCWIudGV4dENvbnRlbnQgPSAnbmFtZSc7CgkJCQkJYi5ocmVmID0gJ3NyYyc7CgkJCQkJYS5hcHBlbmRDaGlsZChiKTsKCQkJCQlyZXR1cm4gYTsKCQkJCX0pKCksCgkJCQlzaXplOiBmdW5jdGlvbigpIHsKCQkJCQl2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKCQkJCQlhLnRleHRDb250ZW50ID0gJ3NpemUnOwoJCQkJCXJldHVybiBhOwoJCQkJfSgpLAoJCQkJb3BlcmF0aW9uOiAoZnVuY3Rpb24oKSB7CgkJCQkJdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCQkJCQl2YXIgY29weSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKCQkJCQljb3B5LmNsYXNzTmFtZSA9ICdub25nLWNvcHknOwoJCQkJCWNvcHkudGV4dENvbnRlbnQgPSAn5aSN5Yi2JzsKCQkJCQlhLmFwcGVuZENoaWxkKGNvcHkpOwoJCQkJCXJldHVybiBhOwoJCQkJfSkoKSwKCQkJCW9mZmxpbmU6IGZ1bmN0aW9uKCkgewoJCQkJCXZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CgkJCQkJdmFyIGIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CgkJCQkJYi5jbGFzc05hbWUgPSAnbm9uZy1vZmZsaW5lLWRvd25sb2FkJzsKCQkJCQliLnRhcmdldCA9ICdfYmxhbmsnOwoJCQkJCS8vZGVidWdnZXI7CgkJCQkJZm9yICh2YXIgayBpbiB0aGlyZHBhcnR5Lm9mZmxpbmVfc2l0ZXMpIHsKCQkJCQkJaWYgKHRoaXJkcGFydHkub2ZmbGluZV9zaXRlc1trXS5lbmFibGUpIHsKCQkJCQkJCXZhciBjID0gYi5jbG9uZU5vZGUodHJ1ZSk7CgkJCQkJCQljLmhyZWYgPSB0aGlyZHBhcnR5Lm9mZmxpbmVfc2l0ZXNba10udXJsOwoJCQkJCQkJYy50ZXh0Q29udGVudCA9IHRoaXJkcGFydHkub2ZmbGluZV9zaXRlc1trXS5uYW1lOwoJCQkJCQkJYS5hcHBlbmRDaGlsZChjKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQlyZXR1cm4gYTsKCQkJCX0sCgkJCX0sCgkJCWNyZWF0ZV9lbXB0eV90YWJsZTogZnVuY3Rpb24oKSB7ICAgLy/mnInnlKggaG9iYnkKCQkJCXZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTsKCQkJCWEuaWQgPSAnbm9uZy10YWJsZS1uZXcnOwoJCQkJcmV0dXJuIGE7CgkJCX0sCgkJCXVwZGF0YV90YWJsZTogZnVuY3Rpb24oc3JjLCBkYXRhLCB0eXBlKSB7CgkJCQlpZiAodHlwZSA9PSAnZnVsbCcpIHsKCQkJCQl2YXIgdGFiID0gJCgnI25vbmctdGFibGUtbmV3JylbMF07CgkJCQkJdGFiLnJlbW92ZUNoaWxkKHRhYi5xdWVyeVNlbGVjdG9yKCIjbm90aWNlIikucGFyZW50RWxlbWVudCk7CgkJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7CgkJCQkJCXRhYi5hcHBlbmRDaGlsZCh0aGlyZHBhcnR5Lm1hZ25ldF90YWJsZS50ZW1wbGF0ZS5jcmVhdGVfcm93KGRhdGFbaV0pKTsKCQkJCQl9CgkJCQl9CgkJCQkvLyBlbHNlIGlmKHR5cGUgPT0nbWluaScpewoJCQkJLy8gfQoKCQkJCXRoaXMucmVnX2V2ZW50KCk7CgkJCX0sCgkJCWZ1bGw6IGZ1bmN0aW9uKHNyYywgZGF0YSkgewoJCQkJdmFyIHRhYiA9IHRoaXMuY3JlYXRlX2VtcHR5X3RhYmxlKCk7CgkJCQl0YWIuYXBwZW5kQ2hpbGQodGhpcmRwYXJ0eS5tYWduZXRfdGFibGUudGVtcGxhdGUuY3JlYXRlX2hlYWQoKSk7CgkJCQkvLyBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKCQkJCS8vICAgICB0YWIuYXBwZW5kQ2hpbGQodGhpcmRwYXJ0eS5tYWduZXRfdGFibGUudGVtcGxhdGUuY3JlYXRlX3JvdyhkYXRhW2ldKSkKCQkJCS8vIH0KCQkJCXZhciBsb2FkaW5nID0gdGhpcmRwYXJ0eS5tYWduZXRfdGFibGUudGVtcGxhdGUuY3JlYXRlX2xvYWRpbmcoKTsKCQkJCXRhYi5hcHBlbmRDaGlsZChsb2FkaW5nKTsKCQkJCXJldHVybiB0YWI7CgkJCX0sCgkJCWhhbmRsZV9ldmVudDogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWlmIChldmVudC50YXJnZXQuY2xhc3NOYW1lID09ICdub25nLWNvcHknKSB7CgkJCQkJZXZlbnQudGFyZ2V0LmlubmVySFRNTCA9ICfmiJDlip8nOwoJCQkJCUdNX3NldENsaXBib2FyZChldmVudC50YXJnZXQuaHJlZik7CgkJCQkJc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJZXZlbnQudGFyZ2V0LmlubmVySFRNTCA9ICflpI3liLYnOwoJCQkJCX0sIDEwMDApOwoJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8v6Zi75q2i6Lez6L2sCgkJCQl9CgkJCQllbHNlIGlmIChldmVudC50YXJnZXQuY2xhc3NOYW1lID09ICdub25nLW9mZmxpbmUtZG93bmxvYWQnKSB7CgkJCQkJdmFyIG1hZ2xpbmsgPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnbWFnbGluaycpIHx8IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ21hZ2xpbmsnKTsKCQkJCQlHTV9zZXRWYWx1ZSgnbWFnbmV0JywgbWFnbGluayk7CgoJCQkJCXZhciB0b2tlbl91cmwgPSAnaHR0cDovLzExNS5jb20vP2N0PW9mZmxpbmUmYWM9c3BhY2UmXz0nOyAvL+iOt+WPljExNSB0b2tlbuaOpeWPowoJCQkJCUdNX3htbGh0dHBSZXF1ZXN0KHsKCQkJCQkJbWV0aG9kOiAnR0VUJywKCQkJCQkJdXJsOiB0b2tlbl91cmwgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSwKCQkJCQkJb25sb2FkOiBmdW5jdGlvbiAocmVzcG9uc2VEZXRhaWxzKQoJCQkJCQl7CgkJCQkJCQlpZiAocmVzcG9uc2VEZXRhaWxzLnJlc3BvbnNlVGV4dC5pbmRleE9mKCdodG1sJykgPj0gMCkgewoJCQkJCQkJCS8v5pyq55m75b2V5aSE55CGCgkJCQkJCQkJY29tbW9uLm5vdGlmaXkoIjExNei/mOayoeacieeZu+W9lSIsCgkJCQkJCQkJCQkJICAgJ+ivt+WFiOeZu+W9lTExNei0puaIt+WQjizlho3nprvnur/kuIvovb3vvIEnLAoJCQkJCQkJCQkJCSAgIGljb24sCgkJCQkJCQkJCQkJICAgJ2h0dHA6Ly8xMTUuY29tLz9tb2RlPWxvZ2luJwoJCQkJCQkJCQkJCSAgKTsKCQkJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJCQl9CgkJCQkJCQl2YXIgc2lnbjExNSA9IEpTT04ucGFyc2UocmVzcG9uc2VEZXRhaWxzLnJlc3BvbnNlKS5zaWduOwoJCQkJCQkJdmFyIHRpbWUxMTUgPSBKU09OLnBhcnNlKHJlc3BvbnNlRGV0YWlscy5yZXNwb25zZSkudGltZTsKCQkJCQkJCWNvbnNvbGUubG9nKCJ1aWQ9IisgamF2X3VzZXJJRCsiIHNpZ246IitzaWduMTE1KyIgdGltZToiKyB0aW1lMTE1KTsKCQkJCQkJCWNvbnNvbGUubG9nKCJyc3A6IityZXNwb25zZURldGFpbHMucmVzcG9uc2UpOwoJCQkJCQkJR01feG1saHR0cFJlcXVlc3QoewoJCQkJCQkJCW1ldGhvZDogJ1BPU1QnLAoJCQkJCQkJCXVybDogJ2h0dHA6Ly8xMTUuY29tL3dlYi9saXhpYW4vP2N0PWxpeGlhbiZhYz1hZGRfdGFza191cmwnLCAvL+a3u+WKoDExNeemu+e6v+S7u+WKoeaOpeWPowoJCQkJCQkJCWhlYWRlcnM6ewoJCQkJCQkJCQkiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIgoJCQkJCQkJCX0sCgkJCQkJCQkJZGF0YToidXJsPSIrZW5jb2RlVVJJQ29tcG9uZW50KG1hZ2xpbmspKyImdWlkPSIrIGphdl91c2VySUQgKyAiJnNpZ249IitzaWduMTE1KyImdGltZT0iK3RpbWUxMTUsIC8vdWlkPTEwMzQxMTkgLGhvYmJ555qECgkJCQkJCQkJb25sb2FkOiBmdW5jdGlvbiAocmVzcG9uc2VEZXRhaWxzKSB7CgkJCQkJCQkJCXZhciBseFJzID0gSlNPTi5wYXJzZShyZXNwb25zZURldGFpbHMucmVzcG9uc2VUZXh0KTsgLy/nprvnur/nu5PmnpwKCQkJCQkJCQkJaWYgKGx4UnMuc3RhdGUpIHsKCQkJCQkJCQkJCS8v56a757q/5Lu75Yqh5re75Yqg5oiQ5YqfCgkJCQkJCQkJCQljb21tb24ubm90aWZpeSgiMTE16ICB5Y+45py66Ieq5Yqo5byA6L2mIiwKCQkJCQkJCQkJCQkJCSAgICfnprvnur/ku7vliqHmt7vliqDmiJDlip8nLAoJCQkJCQkJCQkJCQkJICAgaWNvbiwKCQkJCQkJCQkJCQkJCSAgICdodHRwOi8vMTE1LmNvbS8/dGFiPW9mZmxpbmUmbW9kZT13YW5ncGFuJwoJCQkJCQkJCQkJCQkJICApOwoJCQkJCQkJCQl9CgkJCQkJCQkJCWVsc2V7CgkJCQkJCQkJCQkvL+emu+e6v+S7u+WKoea3u+WKoOWksei0pQoJCQkJCQkJCQkJaWYobHhScy5lcnJjb2RlID09ICc5MTEnKXsKCQkJCQkJCQkJCQlseFJzLmVycm9yX21zZyA9ICfkvaDnmoTluJDlj7fkvb/nlKjlvILluLjvvIzpnIDopoHlnKjnur/miYvlt6Xph43mlrDpqozor4HljbPlj6/mraPluLjkvb/nlKjjgIInOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQkJY29tbW9uLm5vdGlmaXkoIuWksei0peS6hiIsCgkJCQkJCQkJCQkJCQkgICAn6K+36YeN5paw5omT5byAMTE1LCcrbHhScy5lcnJvcl9tc2csCgkJCQkJCQkJCQkJCQkgICBpY29uLAoJCQkJCQkJCQkJCQkJICAgJ2h0dHA6Ly8xMTUuY29tLz90YWI9b2ZmbGluZSZtb2RlPXdhbmdwYW4nCgkJCQkJCQkJCQkJCQkgICk7CgkJCQkJCQkJCX0KCQkJCQkJCQkJY29uc29sZS5sb2coInNpZ246IitzaWduMTE1KyIgdGltZToiKyB0aW1lMTE1KTsKCQkJCQkJCQkJY29uc29sZS5sb2coIuejgemTvjoiK21hZ2xpbmsrIiDkuIvovb3nu5Pmnpw6IisgbHhScy5zdGF0ZSsiIOWOn+WboDoiK2x4UnMuZXJyb3JfbXNnKTsKCQkJCQkJCQkJY29uc29sZS5sb2coInJzcDoiK3Jlc3BvbnNlRGV0YWlscy5yZXNwb25zZSk7CgkJCQkJCQkJfQoJCQkJCQkJfSk7CgkJCQkJCX0KCQkJCQl9KTsKCQkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvL+mYu+atoui3s+i9rAoJCQkJfQoJCQl9LAoJCQlyZWdfZXZlbnQ6IGZ1bmN0aW9uKCkgeyAvLyB0YXJnZXQg5aSE55CGIOabtOeyvuWHhgoJCQkJdmFyIGxpc3QgPSBbCgkJCQkJJy5ub25nLWNvcHknLAoJCQkJCScubm9uZy1vZmZsaW5lLWRvd25sb2FkJwoJCQkJXTsKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewoJCQkJCXZhciBhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChsaXN0W2ldKTsKCQkJCQlmb3IgKHZhciB1ID0gMDsgdSA8IGEubGVuZ3RoOyB1KyspIHsKCQkJCQkJYVt1XS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlX2V2ZW50LCBmYWxzZSk7CgkJCQkJfQoJCQkJfQoJCQkJLy8gdmFyIGIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjbm9uZy1zZWFyY2gtc2VsZWN0JylbMF07CgkJCQkvLyBiLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuaGFuZGxlX2V2ZW50LCBmYWxzZSk7CgoJCQl9LAoJCX0sCgkJLy8g55m75b2VMTE15omn6KGM6ISa5pys77yM6Ieq5Yqo56a757q/5LiL6L295YeG5aSH5q2l6aqkCgkJbG9naW4xMTVSdW46IGZ1bmN0aW9uKCl7CgkJCWphdl91c2VySUQgPSBHTV9nZXRWYWx1ZSgnamF2X3VzZXJfaWQnLCAwKTsgLy8xMTXnlKjmiLdJROe8k+WtmAoJCQkvL+iOt+WPljExNUlECgkJCWlmIChqYXZfdXNlcklEID09PSAwKSB7CgkJCQlpZiAobG9jYXRpb24uaG9zdC5pbmRleE9mKCcxMTUuY29tJykgPj0gMCkgewoJCQkJCWlmICh0eXBlb2YgKHdpbmRvdy53cmFwcGVkSlNPYmplY3QudXNlcl9pZCkgIT0gJ3VuZGVmaW5lZCcpIHsKCQkJCQkJamF2X3VzZXJJRCA9IHdpbmRvdy53cmFwcGVkSlNPYmplY3QudXNlcl9pZDsKCQkJCQkJR01fc2V0VmFsdWUoJ2phdl91c2VyX2lkJywgamF2X3VzZXJJRCk7CgkJCQkJCWFsZXJ0KCcxMTXnmbvpmYbmiJDlip/vvIEnKTsKCQkJCQkJcmV0dXJuOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJLy9hbGVydCgn6K+35YWI55m75b2VMTE16LSm5oi377yBJyk7CgkJCQkJY29tbW9uLm5vdGlmaXkoIjExNei/mOayoeacieeZu+W9lSIsCgkJCQkJCQkJICAgJ+ivt+WFiOeZu+W9lTExNei0puaIt+WQjizlho3nprvnur/kuIvovb3vvIEnLAoJCQkJCQkJCSAgIGljb24sCgkJCQkJCQkJICAgJ2h0dHA6Ly8xMTUuY29tLz9tb2RlPWxvZ2luJwoJCQkJCQkJCSAgKTsKCQkJCQlHTV9zZXRWYWx1ZSgnamF2X3VzZXJfaWQnLCAwKTsKCQkJCX0KCQkJfQoKCQkJaWYgKGxvY2F0aW9uLmhvc3QuaW5kZXhPZignMTE1LmNvbScpID49IDApCgkJCXsKCQkJCS8qaWYobG9jYXRpb24uaHJlZi5pbmRleE9mKCcjMTE1aGVscGVyJykgPCAwKQoJCQkJewoJCQkJCWNvbnNvbGUubG9nKCJqYXbogIHlj7jmnLo6MTE1LmNvbSwg5LiN5Yid5aeL5YyWLiIpOwoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0qLwoJCQkJY29uc29sZS5sb2coJ2phduiAgeWPuOacujoxMTUuY29tLOWwneivleiOt+WPlnVzZXJpZC4nKTsKCQkJCWphdl91c2VySUQgPSBHTV9nZXRWYWx1ZSgnamF2X3VzZXJfaWQnLCAwKTsKCQkJCS8vZGVidWdnZXI7CgkJCQlpZihqYXZfdXNlcklEICE9PSAwKQoJCQkJewoJCQkJCWNvbnNvbGUubG9nKCJqYXbogIHlj7jmnLo6IDExNei0puWPtzoiK2phdl91c2VySUQrIizml6DpnIDliJ3lp4vljJYuIik7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQkJamF2X3VzZXJJRCA9ICQuY29va2llKCJPT0ZMIik7CgkJCQljb25zb2xlLmxvZygiamF26ICB5Y+45py6OiAxMTXotKblj7c6IitqYXZfdXNlcklEKTsKCQkJCWlmKCFqYXZfdXNlcklEKQoJCQkJewoJCQkJCWNvbnNvbGUubG9nKCJqYXbogIHlj7jmnLo6IOWwmuacqueZu+W9lTExNei0puWPtyIpOwoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX1lbHNlewoJCQkJCWNvbnNvbGUubG9nKCJqYXbogIHlj7jmnLo6IOWIneWni+WMluaIkOWKnyIpOwoJCQkJCWNvbW1vbi5ub3RpZml5KCfogIHlj7jmnLroh6rliqjlvIDovaYnLCAn55m76ZmG5Yid5aeL5YyW5oiQ5YqfLOi1tue0p+S4iui9puaKiiEnLCBpY29uLCAiIik7CgkJCQkJR01fc2V0VmFsdWUoJ2phdl91c2VyX2lkJywgamF2X3VzZXJJRCk7CgkJCQl9CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQl9LAoJCS8vIOeAkeW4g+a1geiEmuacrAoJCXdhdGVyZmFsbDooZnVuY3Rpb24gKCkgewoJCQlmdW5jdGlvbiB3YXRlcmZhbGwoc2VsZWN0b3JjZmcgPSB7fSl7CgkJCQl0aGlzLmxvY2sgPSBuZXcgTG9jaygpOwoJCQkJdGhpcy5iYXNlVVJJID0gdGhpcy5nZXRCYXNlVVJJKCk7CgkJCQl0aGlzLnNlbGVjdG9yID0gewoJCQkJCW5leHQ6ICdhLm5leHQnLAoJCQkJCWl0ZW06ICcnLAoJCQkJCWNvbnQ6ICcnLCAvL2NvbnRhaW5lcgoJCQkJCXBhZ2k6ICcucGFnaW5hdGlvbicsCgkJCQl9OwoJCQkJT2JqZWN0LmFzc2lnbih0aGlzLnNlbGVjdG9yLCBzZWxlY3RvcmNmZyk7CgkJCQl0aGlzLnBhZ2VnZW4gPSB0aGlzLmZldGNoU3luYyhsb2NhdGlvbi5ocmVmKTsKCQkJCXRoaXMuYW5jaG9yID0gJCh0aGlzLnNlbGVjdG9yLnBhZ2kpWzBdOwoJCQkJdGhpcy5fY291bnQgPSAwOwoJCQkJdGhpcy5fMWZ1bmMgPSBmdW5jdGlvbihjb250LCBlbGVtcykgewoJCQkJCWNvbnQuZW1wdHkoKS5hcHBlbmQoZWxlbXMpOwoJCQkJfTsKCQkJCXRoaXMuXzJmdW5jID0gZnVuY3Rpb24oY29udCwgZWxlbXMpIHsKCQkJCQljb250LmFwcGVuZChlbGVtcyk7CgkJCQl9OwoJCQkJdGhpcy5fM2Z1bmMgPSBmdW5jdGlvbihlbGVtcykgewoJCQkJfTsKCgkJCQlpZiAoJCh0aGlzLnNlbGVjdG9yLml0ZW0pLmxlbmd0aCkgewoJCQkJCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsLmJpbmQodGhpcykpOwoJCQkJCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy53aGVlbC5iaW5kKHRoaXMpKTsKCQkJCQl0aGlzLmFwcGVuZEVsZW1zKHRoaXMuXzFmdW5jKTsKCQkJCX0KCQkJfQoJCQl3YXRlcmZhbGwucHJvdG90eXBlLmdldEJhc2VVUkkgPSBmdW5jdGlvbigpIHsKCQkJCWxldCBfID0gbG9jYXRpb247CgkJCQlyZXR1cm4gYCR7Xy5wcm90b2NvbH0vLyR7Xy5ob3N0bmFtZX0keyhfLnBvcnQgJiYgYDoke18ucG9ydH1gKX1gOwoJCQl9OwoJCQl3YXRlcmZhbGwucHJvdG90eXBlLmdldE5leHRVUkw9IGZ1bmN0aW9uKGhyZWYpIHsKCQkJCWxldCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwoJCQkJYS5ocmVmID0gaHJlZjsKCQkJCXJldHVybiBgJHt0aGlzLmJhc2VVUkl9JHthLnBhdGhuYW1lfSR7YS5zZWFyY2h9YDsKCQkJfTsKCQkJLy8g54CR5biD5rWB6ISa5pysCgkJCXdhdGVyZmFsbC5wcm90b3R5cGUuZmV0Y2hVUkw9IGZ1bmN0aW9uKHVybCkgewoJCQkJY29uc29sZS5sb2coYGZldGNoVXJsID0gJHt1cmx9YCk7CgkJCQljb25zdCBmZXRjaHdpdGhjb29raWUgPSBmZXRjaCh1cmwsIHsgY3JlZGVudGlhbHM6ICdzYW1lLW9yaWdpbicgfSk7CgkJCQlyZXR1cm4gZmV0Y2h3aXRoY29va2llCgkJCQkJLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKQoJCQkJCS50aGVuKGh0bWwgPT4gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhodG1sLCAndGV4dC9odG1sJykpCgkJCQkJLnRoZW4oZG9jID0+IHsKCQkJCQlsZXQgJGRvYyA9ICQoZG9jKTsKCQkJCQlsZXQgaHJlZiA9ICRkb2MuZmluZCh0aGlzLnNlbGVjdG9yLm5leHQpLmF0dHIoJ2hyZWYnKTsKCQkJCQlsZXQgbmV4dFVSTCA9IGhyZWYgPyB0aGlzLmdldE5leHRVUkwoaHJlZikgOiB1bmRlZmluZWQ7CgkJCQkJbGV0IGVsZW1zID0gJGRvYy5maW5kKHRoaXMuc2VsZWN0b3IuaXRlbSk7CgkJCQkJcmV0dXJuIHsKCQkJCQkJbmV4dFVSTCwKCQkJCQkJZWxlbXMKCQkJCQl9OwoJCQkJfSk7CgkJCX07CgkJCS8vIOeAkeW4g+a1geiEmuacrAoJCQl3YXRlcmZhbGwucHJvdG90eXBlLmZldGNoU3luYz0gZnVuY3Rpb24qICh1cmxpKSB7CgkJCQlsZXQgdXJsID0gdXJsaTsKCQkJCWRvIHsKCQkJCQl5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CgkJCQkJCWlmICh0aGlzLmxvY2subG9ja2VkKSB7CgkJCQkJCQlyZWplY3QoKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXRoaXMubG9jay5sb2NrKCk7CgkJCQkJCQlyZXNvbHZlKCk7CgkJCQkJCX0KCQkJCQl9KS50aGVuKCgpID0+IHsKCQkJCQkJcmV0dXJuIHRoaXMuZmV0Y2hVUkwodXJsKQoJCQkJCQkJLnRoZW4oaW5mbyA9PiB7CgkJCQkJCQl1cmwgPSBpbmZvLm5leHRVUkw7CgkJCQkJCQlyZXR1cm4gaW5mby5lbGVtczsKCQkJCQkJfSk7CgkJCQkJfSkudGhlbihlbGVtcyA9PiB7CgkJCQkJCXRoaXMubG9jay51bmxvY2soKTsKCQkJCQkJcmV0dXJuIGVsZW1zOwoJCQkJCX0pLmNhdGNoKChlcnIpID0+IHsKCQkJCQkJLy8gTG9ja2VkIQoJCQkJCX0pOwoJCQkJfSB3aGlsZSAodXJsKTsKCQkJfTsKCQkJLy8g54CR5biD5rWB6ISa5pysCgkJCXdhdGVyZmFsbC5wcm90b3R5cGUuYXBwZW5kRWxlbXM9IGZ1bmN0aW9uICgpIHsKCQkJCWxldCBuZXh0cGFnZSA9IHRoaXMucGFnZWdlbi5uZXh0KCk7CgkJCQlpZiAoIW5leHRwYWdlLmRvbmUpIHsKCQkJCQluZXh0cGFnZS52YWx1ZS50aGVuKGVsZW1zID0+IHsKCQkJCQkJY29uc3QgY2IgPSAodGhpcy5fY291bnQgPT09IDApID8gdGhpcy5fMWZ1bmMgOiB0aGlzLl8yZnVuYzsKCQkJCQkJY2IoJCh0aGlzLnNlbGVjdG9yLmNvbnQpLCBlbGVtcyk7CgkJCQkJCXRoaXMuX2NvdW50ICs9IDE7CgkJCQkJCS8vIGhvYmJ5IG1vZCBzY3JpcHQKCQkJCQkJdGhpcy5fM2Z1bmMoZWxlbXMpOwoJCQkJCX0pOwoJCQkJfQoJCQkJcmV0dXJuIG5leHRwYWdlLmRvbmU7CgkJCX07CgkJCS8vIOeAkeW4g+a1geiEmuacrAoJCQl3YXRlcmZhbGwucHJvdG90eXBlLmVuZD0gZnVuY3Rpb24gKCkgewoJCQkJY29uc29sZS5pbmZvKCdUaGUgRW5kJyk7CgkJCQlkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLnNjcm9sbC5iaW5kKHRoaXMpKTsKCQkJCWRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy53aGVlbC5iaW5kKHRoaXMpKTsKCQkJCSQodGhpcy5hbmNob3IpLnJlcGxhY2VXaXRoKCQoYDxoMT5UaGUgRW5kPC9oMT5gKSk7CgkJCX07CgkJCXdhdGVyZmFsbC5wcm90b3R5cGUucmVhY2hCb3R0b209IGZ1bmN0aW9uKGVsZW0sIGxpbWl0KSB7CgkJCQlyZXR1cm4gKGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gJCh3aW5kb3cpLmhlaWdodCgpKSA8IGxpbWl0OwoJCQl9OwoKCQkJd2F0ZXJmYWxsLnByb3RvdHlwZS5zY3JvbGw9CWZ1bmN0aW9uKCkgewoJCQkJaWYgKHRoaXMucmVhY2hCb3R0b20odGhpcy5hbmNob3IsIDUwMCkgJiYgdGhpcy5hcHBlbmRFbGVtcyh0aGlzLl8yZnVuYykpIHsKCQkJCQl0aGlzLmVuZCgpOwoJCQkJfQoJCQl9OwoKCQkJd2F0ZXJmYWxsLnByb3RvdHlwZS53aGVlbD0gZnVuY3Rpb24oKSB7CgkJCQlpZiAodGhpcy5yZWFjaEJvdHRvbSh0aGlzLmFuY2hvciwgMTAwMCkgJiYgdGhpcy5hcHBlbmRFbGVtcyh0aGlzLl8yZnVuYykpIHsKCQkJCQl0aGlzLmVuZCgpOwoJCQkJfQoJCQl9OwoJCQl3YXRlcmZhbGwucHJvdG90eXBlLnNldEZpcnN0Q2FsbGJhY2s9IGZ1bmN0aW9uKGYpIHsKCQkJCXRoaXMuXzFmdW5jID0gZjsKCQkJfTsKCQkJd2F0ZXJmYWxsLnByb3RvdHlwZS5zZXRTZWNvbmRDYWxsYmFjaz0gZnVuY3Rpb24oZikgewoJCQkJdGhpcy5fMmZ1bmMgPSBmOwoJCQl9OwoJCQl3YXRlcmZhbGwucHJvdG90eXBlLnNldFRoaXJkQ2FsbGJhY2s9IGZ1bmN0aW9uKGYpIHsKCQkJCXRoaXMuXzNmdW5jID0gZjsKCQkJfTsKCgkJCXJldHVybiB3YXRlcmZhbGw7CgkJfSkoKSwKCQkvLyDngJHluIPmtYHohJrmnKwKCQl3YXRlcmZhbGxTY3JvbGxJbml0OiBmdW5jdGlvbiAoKXsKCQkJdmFyIHcgPSBuZXcgdGhpcmRwYXJ0eS53YXRlcmZhbGwoe30pOwoJCQkvLyBqYXZidXMuY29t44CBYXZtby5wd+OAgWF2c28ucHcKCQkJdmFyICRwYWdlcyA9ICQoJ2RpdiN3YXRlcmZhbGwgZGl2Lml0ZW0nKTsKCQkJaWYgKCRwYWdlcy5sZW5ndGgpIHsKCQkJCS8vIGphdmJ1cy5jb20KCQkJCWlmKCQoJ2EjbmV4dCcpLmxlbmd0aCl7CgkJCQkJdyA9IG5ldyB0aGlyZHBhcnR5LndhdGVyZmFsbCh7CgkJCQkJCW5leHQ6ICdhI25leHQnLAoJCQkJCQlpdGVtOiAnZGl2I3dhdGVyZmFsbCBkaXYuaXRlbScsCgkJCQkJCWNvbnQ6ICcjd2F0ZXJmYWxsJywKCQkJCQkJcGFnaTogJy5wYWdpbmF0aW9uLWxnJywKCQkJCQl9KTsKCQkJCX0KCQkJCS8vYXZtby5wd+OAgWF2c28ucHcKCQkJCWlmKCQoJ2FbbmFtZT0ibmV4dHBhZ2UiXScpLmxlbmd0aCl7CgkJCQkJdyA9IG5ldyB0aGlyZHBhcnR5LndhdGVyZmFsbCh7CgkJCQkJCW5leHQ6ICdhW25hbWU9Im5leHRwYWdlIl0nLC8vbmV4dHBhZ2UKCQkJCQkJaXRlbTogJ2RpdiN3YXRlcmZhbGwgZGl2Lml0ZW0nLAoJCQkJCQljb250OiAnI3dhdGVyZmFsbCcsCgkJCQkJCXBhZ2k6ICcucGFnaW5hdGlvbicsCgkJCQkJfSk7CgkJCQl9CgkJCX0KCgkJCS8vIGphdmxpYnJhcnkKCQkJdmFyICRwYWdlczIgPSAkKCdkaXYudmlkZW9zIGRpdi52aWRlbycpOwoJCQlpZiAoJHBhZ2VzMi5sZW5ndGgpIHsKCQkJCSRwYWdlczJbMF0ucGFyZW50RWxlbWVudC5pZCA9ICJ3YXRlcmZhbGwiOwoJCQkJdyA9IG5ldyB0aGlyZHBhcnR5LndhdGVyZmFsbCh7CgkJCQkJbmV4dDogJ2FbY2xhc3M9InBhZ2UgbmV4dCJdJywKCQkJCQlpdGVtOiAnZGl2LnZpZGVvcyBkaXYudmlkZW8nLAoJCQkJCWNvbnQ6ICcjd2F0ZXJmYWxsJywKCQkJCQlwYWdpOiAnLnBhZ2Vfc2VsZWN0b3InLAoJCQkJfSk7CgkJCX0KCgkJCXcuc2V0U2Vjb25kQ2FsbGJhY2soZnVuY3Rpb24oY29udCwgZWxlbXMpIHsKCQkJCWlmKGxvY2F0aW9uLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9zdGFyLycpKSB7CgkJCQkJY29udC5hcHBlbmQoZWxlbXMuc2xpY2UoMSkpOwoJCQkJfSBlbHNlIHsKCQkJCQljb250LmFwcGVuZChlbGVtcyk7CgkJCQl9CgkJCX0pOwoKCQkJdy5zZXRUaGlyZENhbGxiYWNrKGZ1bmN0aW9uKGVsZW1zKSB7CgkJCQkvLyBob2JieSBtb2Qgc2NyaXB0CgkJCQlpZihkb2N1bWVudC50aXRsZS5zZWFyY2goL0pBVkxpYnJhcnkvKSA+IDAgJiYgZWxlbXMpewoJCQkJCWZvcihsZXQgaSA9IDA7IGkgPCBlbGVtcy5sZW5ndGggOyBpICsrKXsKCQkJCQkJbGV0IF92aWQgPSAkKGVsZW1zW2ldKS5hdHRyKCJpZCIpLnJlcGxhY2UoJ3ZpZF8nLCcnKTsvL3ZpZF9qYXZsaWtkNDJ5CgkJCQkJCS8vY29uc29sZS5sb2coYHZpZCA9ICR7X3ZpZH1gKTsKCQkJCQkJLy9kZWJ1Z2dlcjsKCQkJCQkJLy/lvILmraXor7fmsYLosIPnlKjlhoXpobXor6bmg4XnmoTorr/pl67lnLDlnYAKCQkJCQkJR01feG1saHR0cFJlcXVlc3QoewoJCQkJCQkJbWV0aG9kOiAiR0VUIiwKCQkJCQkJCS8v5YaF6aG15Zyw5Z2ACgkJCQkJCQl1cmw6ICJodHRwOi8vd3d3LmphMTRiLmNvbS9jbi8/dj0iICsgX3ZpZCwKCQkJCQkJCW9ubG9hZDogZnVuY3Rpb24ocmVzdWx0KSB7CgkJCQkJCQkJbGV0IHZpZCA9IHJlc3VsdC5maW5hbFVybC5zcGxpdCgiPSIpWzFdOy8v5L6L5aaC77yaaHR0cDovL3d3dy5qMTJsaWIuY29tL2NuLz92PWphdmxpa2Q0MmEKCQkJCQkJCQlsZXQgYm9keVN0ciA9IHJlc3VsdC5yZXNwb25zZVRleHQ7CgkJCQkJCQkJbGV0IGRhdGVfaWR4ID0gYm9keVN0ci5zZWFyY2goLyJ2aWRlb19kYXRlIiBjbGFzcz0iaXRlbSIvKTsvLzxzcGFuIGNsYXNzPSJzY29yZSI+KDkuNzApPC9zcGFuPgoJCQkJCQkJCWxldCB5aXhpZUJvZHkgPSBib2R5U3RyLnN1YnN0cmluZyhkYXRlX2lkeCxib2R5U3RyLnNlYXJjaCgvInZpZGVvX2dlbnJlcyIvKSk7CgkJCQkJCQkJbGV0IGRhdGVTdHJpbmcgPSB5aXhpZUJvZHkuc3Vic3RyaW5nKHlpeGllQm9keS5pbmRleE9mKCd2aWRlb19kYXRlJykgKyA5Mix5aXhpZUJvZHkuaW5kZXhPZigndmlkZW9fZGF0ZScpICsgMTAyKTsKCQkJCQkJCQlsZXQgcGluZ2ZlbmdTdHJpbmcgPSAiIjsKCQkJCQkJCQlpZih5aXhpZUJvZHkuaW5kZXhPZignc2NvcmUiPicpID4gMCl7CgkJCQkJCQkJCXBpbmdmZW5nU3RyaW5nID0geWl4aWVCb2R5LnN1YnN0cmluZyh5aXhpZUJvZHkuaW5kZXhPZignc2NvcmUiPicpICsgNyx5aXhpZUJvZHkuaW5kZXhPZignc2NvcmUiPicpICsgMTQpLnJlcGxhY2UoJzwvc3Bhbj4nLCcnKS5yZXBsYWNlKCc8JywnJyk7CgkJCQkJCQkJfQoJCQkJCQkJCSQoIiN2aWRfIit2aWQpLmNoaWxkcmVuKCJhIikuYXBwZW5kKCI8ZGl2IGNsYXNzPSdpZCdzdHlsZT0nY29sb3I6IHJlZDsnPiIrZGF0ZVN0cmluZysgIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyIrcGluZ2ZlbmdTdHJpbmcrIjwvZGl2PiIpOwoKCQkJCQkJCQkvLyDlpoLmnpzmmK/mnIDov5HkuKTkuKrmnIjku73nmoTlvbHniYfmoIfkuIrog4zmma/oibIKCQkJCQkJCQlpZigkKCIjdmlkXyIrdmlkKS5jb250ZXh0LlVSTC5pbmRleE9mKCJiZXN0cmF0ZWQiKSA+IDAgJiYgY29tbW9uLmlzTGFzdFhNb250aChkYXRlU3RyaW5nLDIpKXsKCQkJCQkJCQkJJCgiI3ZpZF8iK3ZpZCkuY3NzKCJiYWNrZ3JvdW5kLWNvbG9yIiwibGlnaHRza3libHVlIik7CgkJCQkJCQkJCS8vZGVidWdnZXI7CgkJCQkJCQkJfQoKCQkJCQkJCQkvL+i/h+a7pOacgOaWsFjmnIjku73nmoTlvbHniYcKCQkJCQkJCQlpZigkKCIjdmlkXyIrdmlkKS5jb250ZXh0LlVSTC5pbmRleE9mKCJiZXN0cmF0ZWQucGhwP2RlbGV0ZSIpID4gMCl7CgkJCQkJCQkJCWlmKCQoIiN2aWRfIit2aWQpLmNvbnRleHQuVVJMLmluZGV4T2YoImJlc3RyYXRlZC5waHA/ZGVsZXRlT25lTW9udGhBd2F5IikgPiAwICYmICFjb21tb24uaXNMYXN0WE1vbnRoKGRhdGVTdHJpbmcsMSkpIHsKCQkJCQkJCQkJCSQoIiN2aWRfIit2aWQpLnJlbW92ZSgpOwoJCQkJCQkJCQl9CgkJCQkJCQkJCWVsc2UgaWYoJCgiI3ZpZF8iK3ZpZCkuY29udGV4dC5VUkwuaW5kZXhPZigiYmVzdHJhdGVkLnBocD9kZWxldGVUd29Nb250aEF3YXkiKSA+IDAgJiYgIWNvbW1vbi5pc0xhc3RYTW9udGgoZGF0ZVN0cmluZywyKSkgewoJCQkJCQkJCQkJJCgiI3ZpZF8iK3ZpZCkucmVtb3ZlKCk7CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJb25lcnJvcjogZnVuY3Rpb24oZSkgewoJCQkJCQkJCWNvbnNvbGUubG9nKGUpOwoJCQkJCQkJfQoJCQkJCQl9KTsvL2VuZCAgR01feG1saHR0cFJlcXVlc3QJCgkJCQkJfQoJCQkJfQoJCQl9KTsKCQkJLy8gamF2YnVzLmNvbeOAgWF2bW8ucHfjgIFhdnNvLnB3IOagt+W8jwoJCQlHTV9hZGRTdHlsZShbCgkJCQknI3dhdGVyZmFsbCB7aGVpZ2h0OiBpbml0aWFsICFpbXBvcnRhbnQ7d2lkdGg6IGluaXRpYWwgIWltcG9ydGFudDtkaXNwbGF5OiBmbGV4O2ZsZXgtZGlyZWN0aW9uOiByb3c7ZmxleC13cmFwOiB3cmFwO30nLAoJCQkJJyN3YXRlcmZhbGwgLml0ZW0uaXRlbSB7cG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7dG9wOiBpbml0aWFsICFpbXBvcnRhbnQ7bGVmdDogaW5pdGlhbCAhaW1wb3J0YW50O2Zsb2F0OiBub25lO2ZsZXg6IDIwJTt9JywKCQkJCScjd2F0ZXJmYWxsIC5tb3ZpZS1ib3gsI3dhdGVyZmFsbCAuYXZhdGFyLWJveCB7d2lkdGg6IGluaXRpYWwgIWltcG9ydGFudDtkaXNwbGF5OiBmbGV4O30nLAoJCQkJJyN3YXRlcmZhbGwgLm1vdmllLWJveCAucGhvdG8tZnJhbWUge292ZXJmbG93OiB2aXNpYmxlO30nLAoJCQldLmpvaW4oJycpKTsKCQl9LAoKCX07CgoJaWYgKGxvY2F0aW9uLmhvc3QuaW5kZXhPZignMTE1LmNvbScpID49IDApewoJCXRoaXJkcGFydHkubG9naW4xMTVSdW4oKTsKCX0KCglpZiAoZG9jdW1lbnQudGl0bGUuc2VhcmNoKC9KQVZMaWJyYXJ5LykgPiAwKXsKCQlpZihkb2N1bWVudC5VUkwuaW5kZXhPZigiYmVzdHJhdGVkIikgPiAwKXsKCQkJJCgiLmRpc3BsYXltb2RlIC5yaWdodCIpLnByZXBlbmQoIjxhIGhyZWY9Jy9jbi92bF9iZXN0cmF0ZWQucGhwP2RlbGV0ZVR3b01vbnRoQXdheScgc3R5bGU9J2NvbG9yOiByZWQ7Jz7lj6rnnIvov5HkuKTmnIjku70mbmJzcDsmbmJzcDs8L2E+Iik7CgkJCSQoIi5kaXNwbGF5bW9kZSAucmlnaHQiKS5wcmVwZW5kKCI8YSBocmVmPScvY24vdmxfYmVzdHJhdGVkLnBocD9kZWxldGVPbmVNb250aEF3YXknIHN0eWxlPSdjb2xvcjogcmVkOyc+5Y+q55yL5b2T5YmN5pyI5Lu9Jm5ic3A7Jm5ic3A7PC9hPiIpOwoJCQkvLzxhIGhyZWY9Ii9jbi92bF9iZXN0cmF0ZWQucGhwP2RlbGV0ZSIgc3R5bGU9ImNvbG9yOiByZWQ7Ij7lj6rmmL7npLrmnIDov5Hlj5HooYznmoQmbmJzcDsmbmJzcDs8L2E+CgkJCS8vdG9kbwoJCX0KCX0KCglHTV9hZGRTdHlsZShbCgkJJy5taW4ge3dpZHRoOjY2cHg7bWluLWhlaWdodDogMjMzcHg7aGVpZ2h0OmF1dG87Y3Vyc29yOiBwb2ludGVyO30nLAoJCScuY29udGFpbmVyIHt3aWR0aDogMTAwJTtmbG9hdDogbGVmdDt9JywKCQknLmNvbC1tZC0zIHtmbG9hdDogbGVmdDttYXgtd2lkdGg6IDI2MHB4O30nLAoJCScuY29sLW1kLTkge3dpZHRoOiBpbmhlcml0O30nLAoJCScuZm9vdGVyIHtwYWRkaW5nOiAyMHB4IDA7YmFja2dyb3VuZDogIzFkMWExODtmbG9hdDogbGVmdDt9JywKCQknI25vbmctdGFibGUtbmV3IHttYXJnaW46IGluaXRpYWwgIWltcG9ydGFudDtpbXBvcnRhbnQ7Y29sb3I6ICM2NjYgIWltcG9ydGFudDtmb250LXNpemU6IDEzcHg7dGV4dC1hbGlnbjogY2VudGVyO2JhY2tncm91bmQtY29sb3I6ICNGMkYyRjI7ZmxvYXQ6IGxlZnQ7fScsCgldLmpvaW4oJycpKTsKCgkvLyDmjIoKCWlmKEdNX2dldFZhbHVlKCdzZWFyY2hfaW5kZXgnLG51bGwpID09PSBudWxsKXsKCQlHTV9zZXRWYWx1ZSgnc2VhcmNoX2luZGV4JywwKTsKCX0KCXRoaXJkcGFydHkuc2VhcmNoTWFnbmV0UnVuKCk7CgoJLy/ojrflj5bmiYDmnInnlarlj7flvbHniYfpk77mjqXnmoRh5YWD57SgCgl2YXIgYV9hcnJheSA9ICQoImRpdltjbGFzcz0naXRlbSddIGEiKTsKCWZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBhX2FycmF5Lmxlbmd0aDsgaW5kZXgrKykgewoJCXZhciBhRWxlID0gYV9hcnJheVtpbmRleF07CgkJJChhRWxlKS5hdHRyKCJ0YXJnZXQiLCJfYmxhbmsiKTsKCX0KCgl2YXIgQVZJRCA9ICIiOwoJLy/ojrflj5bnlarlj7flvbHniYfor6bmg4XpobXnmoTnlarlj7cgIOS+i+Wmgu+8mmh0dHBzOi8vYXZtby5wdy9jbi9tb3ZpZS81cmJuIAoJaWYoJCgnLmhlYWRlcicpLmxlbmd0aCApewoJCUFWSUQgPSAkKCcuaGVhZGVyJylbMF0ubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50OwoJCS8vZGVidWdnZXI7CgkJY29uc29sZS5sb2coIueVquWPt+i+k+WHujoiK0FWSUQpOwoJCS8vY29uc29sZS5sb2coIuaXtumXtDAwMDAwMDoiKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSk7CgkJY29tbW9uLmFkZEF2SW1nKEFWSUQsZnVuY3Rpb24gKCRpbWcpIHsKCQkJdmFyIGRpdkVsZSA9ICQoImRpdltjbGFzcz0nY29sLW1kLTMgaW5mbyddIilbMF07CgkJCWlmIChkaXZFbGUpIHsKCQkJCSQoZGl2RWxlLnBhcmVudEVsZW1lbnQpLmFwcGVuZCgkaW1nKTsKCQkJCSRpbWcuY2xpY2soZnVuY3Rpb24oKXsKCQkJCQkkKHRoaXMpLnRvZ2dsZUNsYXNzKCdtaW4nKTsKCQkJCQlpZigkKHRoaXMpLmF0dHIoImNsYXNzIikpewoJCQkJCQl0aGlzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5zY3JvbGxJbnRvVmlldygpOwoJCQkJCX0KCQkJCX0pOwoJCQkJLy8kaW1nLmxvYWQoZnVuY3Rpb24oKSB7CgkJCQkvLyAgICBjb25zb2xlLmxvZygnbG9hZCBjb21wZWxldGVkJyk7CgkJCQkvL30pOwoJCQl9CgkJCS8vIGh0dHA6Ly93d3cuamF2bGlicmFyeS5jb20vY24vP3Y9amF2bGlsem80ZQoJCQlkaXZFbGUgPSAkKCJkaXZbaWQ9J3ZpZGVvX2Zhdm9yaXRlX2VkaXQnXSIpWzBdOwoJCQlpZiAoZGl2RWxlKSB7CgkJCQkkaW1nLmF0dHIoInN0eWxlIiwiY3Vyc29yOiBwb2ludGVyOyIpOwoJCQkJJChkaXZFbGUpLmFmdGVyKCRpbWcpOwoJCQkJJGltZy5jbGljayhmdW5jdGlvbigpewoJCQkJCSQodGhpcykudG9nZ2xlQ2xhc3MoJ21pbicpOwoJCQkJCWlmKCQodGhpcykuYXR0cigiY2xhc3MiKSl7CgkJCQkJCXRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnNjcm9sbEludG9WaWV3KCk7CgkJCQkJfQoJCQkJfSk7CgkJCX0KCgkJfSk7Cgl9CgoJLy8g54CR5biD5rWB6ISa5pysCgljbGFzcyBMb2NrIHsKCQljb25zdHJ1Y3RvcihkID0gZmFsc2UpIHsKCQkJdGhpcy5sb2NrZWQgPSBkOwoJCX0KCQlsb2NrKCkgewoJCQl0aGlzLmxvY2tlZCA9IHRydWU7CgkJfQoJCXVubG9jaygpIHsKCQkJdGhpcy5sb2NrZWQgPSBmYWxzZTsKCQl9Cgl9CgkvLyDngJHluIPmtYHohJrmnKwKCXRoaXJkcGFydHkud2F0ZXJmYWxsU2Nyb2xsSW5pdCgpOwoKfSkoKTs="},{"name":"222号巴士通票","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["*://*avbus77.com/*op=view*","*://*avbus888.com/*op=view*","*://*bus222.com/*op=view*","*://*gogo5577.com/*op=view*","*://*gogo5588.com/*op=view*","*://*gogo7777.com/*op=view*","*://*gogo8866.com/*op=view*","*://*gogo8888.com/*op=view*","*://*jav513.com/*op=view*","*://*jav513.me/*op=view*","*://*kkk551.com/*op=view*","*://*mmav33.com/*op=view*","*://*uukk8811.com/*op=view*","*://*uukk8877.com/*op=view*","*://*uukk8888.com/*op=view*","*://*uuu557.com/*op=view*","*://*v101.co/*op=view*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-end","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1492505332331},"enabled":false,"position":16,"file_url":"https://sleazyfork.org/scripts/26927-222%E5%8F%B7%E5%B7%B4%E5%A3%AB%E9%80%9A%E7%A5%A8/code/222%E5%8F%B7%E5%B7%B4%E5%A3%AB%E9%80%9A%E7%A5%A8.user.js","uuid":"27095457-e424-490c-9e89-a098f31edfba","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAyMjLlj7flt7Tlo6vpgJrnpagKLy8gQG5hbWVzcGFjZSAgICB1bmRlZmluZWQKLy8gQHZlcnNpb24gICAgICAwLjMuMAovLyBAZGVzY3JpcHRpb24gIOW3tOWjq+mAmuelqO+8jOS4gOelqOWcqOaJi++8jOWkqeS4i+aIkeacieOAguaXoOiuuuaYr1ZJUOmZkOWItu+8jOi/mOaYr+S4pOS4quWwj+aXtumZkOWItu+8jOe7n+e7n+aXoOinhuOAggovLyBAYXV0aG9yICAgICAgIGMuYy7mnKjlpLQKLy8gQGhvbWVwYWdlICAgICBodHRwczovL3NsZWF6eWZvcmsub3JnL3poLUNOL3NjcmlwdHMvMjY5MjcKLy8gQGluY2x1ZGUgICAgICAqOi8vKmF2YnVzNzcuY29tLypvcD12aWV3KgovLyBAaW5jbHVkZSAgICAgICo6Ly8qYXZidXM4ODguY29tLypvcD12aWV3KgovLyBAaW5jbHVkZSAgICAgICo6Ly8qYnVzMjIyLmNvbS8qb3A9dmlldyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKmdvZ281NTc3LmNvbS8qb3A9dmlldyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKmdvZ281NTg4LmNvbS8qb3A9dmlldyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKmdvZ283Nzc3LmNvbS8qb3A9dmlldyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKmdvZ284ODY2LmNvbS8qb3A9dmlldyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKmdvZ284ODg4LmNvbS8qb3A9dmlldyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKmphdjUxMy5jb20vKm9wPXZpZXcqCi8vIEBpbmNsdWRlICAgICAgKjovLypqYXY1MTMubWUvKm9wPXZpZXcqCi8vIEBpbmNsdWRlICAgICAgKjovLypra2s1NTEuY29tLypvcD12aWV3KgovLyBAaW5jbHVkZSAgICAgICo6Ly8qbW1hdjMzLmNvbS8qb3A9dmlldyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKnV1a2s4ODExLmNvbS8qb3A9dmlldyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKnV1a2s4ODc3LmNvbS8qb3A9dmlldyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKnV1a2s4ODg4LmNvbS8qb3A9dmlldyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKnV1dTU1Ny5jb20vKm9wPXZpZXcqCi8vIEBpbmNsdWRlICAgICAgKjovLyp2MTAxLmNvLypvcD12aWV3KgovLyBAZ3JhbnQgICAgICAgIHVuc2FmZVdpbmRvdwovLyBAcnVuLWF0ICAgICAgIGRvY3VtZW50LWVuZAovLyBAbGljZW5zZSAgICAgIE1JVCBMaWNlbnNlCi8vIEBjb21wYXRpYmxlICAgc2FmYXJpCi8vIEBjb21wYXRpYmxlICAgY2hyb21lCi8vIEBjb21wYXRpYmxlICAgZmlyZWZveAovLyBAY29tcGF0aWJsZSAgIG9wZXJhIOacqua1i+ivlQovLyBAcmVxdWlyZSAgICAgIGh0dHA6Ly9jZG4uYm9vdGNzcy5jb20vanF1ZXJ5LzIuMS40L2pxdWVyeS5taW4uanMKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgc2hvd1RpdGxlKCk7CgogICAgaWYodHlwZW9mKGV4cG9ydEZ1bmN0aW9uKSA9PSAidW5kZWZpbmVkIil7CiAgICAgICAgdW5zYWZlV2luZG93LmRvX3BsYXlwMnA9aXNMb2FkaW5nOwogICAgICAgIHVuc2FmZVdpbmRvdy5kb19wbGF5Zmxhc2g9aXNMb2FkaW5nOwogICAgICAgIHVuc2FmZVdpbmRvdy5kb19wbGF5dHM9aXNMb2FkaW5nOwogICAgfWVsc2V7CiAgICAgICAgdmFyIGlzTG9hZGluZ0Z1bmM9ZXhwb3J0RnVuY3Rpb24oaXNMb2FkaW5nLHVuc2FmZVdpbmRvdyk7CiAgICAgICAgdW5zYWZlV2luZG93LmRvX3BsYXlwMnA9aXNMb2FkaW5nRnVuYzsKICAgICAgICB1bnNhZmVXaW5kb3cuZG9fcGxheWZsYXNoPWlzTG9hZGluZ0Z1bmM7CiAgICAgICAgdW5zYWZlV2luZG93LmRvX3BsYXl0cz1pc0xvYWRpbmdGdW5jOwogICAgfQoKICAgICQoZnVuY3Rpb24oKXsKICAgICAgICBpZih0eXBlb2YoZXhwb3J0RnVuY3Rpb24pID09ICJ1bmRlZmluZWQiKXsKICAgICAgICAgICAgdW5zYWZlV2luZG93LmRvX3BsYXlwMnA9Z2V0X3AycDsKICAgICAgICAgICAgdW5zYWZlV2luZG93LmRvX3BsYXlmbGFzaD1nZXRfZmxhc2g7CiAgICAgICAgICAgIHVuc2FmZVdpbmRvdy5kb19wbGF5dHM9Z2V0X21wNDsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgdW5zYWZlV2luZG93LmRvX3BsYXlwMnA9ZXhwb3J0RnVuY3Rpb24gKGdldF9wMnAsIHVuc2FmZVdpbmRvdyk7CiAgICAgICAgICAgIHVuc2FmZVdpbmRvdy5kb19wbGF5Zmxhc2g9ZXhwb3J0RnVuY3Rpb24gKGdldF9mbGFzaCwgdW5zYWZlV2luZG93KTsKICAgICAgICAgICAgdW5zYWZlV2luZG93LmRvX3BsYXl0cz1leHBvcnRGdW5jdGlvbiAoZ2V0X21wNCwgdW5zYWZlV2luZG93KTsKICAgICAgICB9CiAgICB9KTsKCiAgICBmdW5jdGlvbiBzaG93VGl0bGUoKXsKICAgICAgICB2YXIgaW5mb0VsZW1lbnQgPSAkKCJkaXYucGxheWVyYnRuIHRhYmxlIHRib2R5IHRyIHRkIikuZmlyc3QoKTsKICAgICAgICB2YXIgdGl0bGVIdG1sPSc8cD7lsIrmlaznmoTkuZjlrqLvvIzmrKLov47kuIrovaYhISHogIHlj7jmnLrluKbkvaDmt7HlpJzpo5novaY8cD4nOwogICAgICAgIHRpdGxlSHRtbCs9JzxwIHN0eWxlPSJjb2xvcjpyZWQiPuiEmuacrOWcqOmhtemdouWujOWFqOWKoOi9veWujOaIkOWQjuaJjeS8muaJp+ihjO+8jOivt+iAkOW/g+etieW+hemhtemdouWKoOi9vTwvcD4nOwogICAgICAgIHRpdGxlSHRtbCs9JzxwPjxzcGFuIHN0eWxlPSJjb2xvcjpyZWQiPuaWsOeJiOacrOS4jeiHquWKqOWKoOi9veaSreaUvuWZqDwvc3Bhbj7vvIzmkq3mlL7mqKHlvI/pmo/lv4PliIfmjaLvvIxGbGFzaO+8jEFuZHJvaWTvvIxpT1PvvIzllpzmrKLlk6rkuKrngrnlk6rkuKo8cD4nOwogICAgICAgIHRpdGxlSHRtbCs9JzxwPumcgOimgeWKoOmAn+WZqOeahOaooeW8j+i/mOayoeaciea1i+ivle+8jOaJi+WktOWunuWcqOayoeaciVdpbmRvd3PkuoY8L3A+JzsKICAgICAgICBpZihpbmZvRWxlbWVudC5sZW5ndGggPT09IDApewogICAgICAgICAgICBpbmZvRWxlbWVudCA9ICQoImRsLmRsX3RpcCBkZCIpLmZpcnN0KCk7CiAgICAgICAgICAgIHRpdGxlSHRtbCs9JzxwPuWKoOmAn+WZqOS4i+i9ve+8mjxhIGhyZWY9Ii4vc29nb2Z1bi1zZXR1cDAyMDUuZXhlIiB0YXJnZXQ9Il9ibGFuayI+SUXvvIxDaHJvbWXmkq3mlL7liqDpgJ/lmahleGXkuIvovb0oNi4yTSkoMjAxNjAyMDXmm7TmlrApPC9hPjwvcD4nOwogICAgICAgICAgICB0aXRsZUh0bWwrPSc8cD4o5pKt5pS+5b2x54mHMSnvvIzkvb/nlKjliqDpgJ/lmajmkq3mlL7vvIzor7fnlKjmiLfliqHlv4Xmm7TmlrAwMjA15paw54mI44CCPC9wPic7CiAgICAgICAgICAgIHRpdGxlSHRtbCs9JzxwPijmkq3mlL7lvbHniYcyKe+8jChBbmRyb2lk5a6J5Y2TKe+8jChpUGhvbmXoi7nmnpwp77yM54K55Ye75Y2z5Y+v5pKt5pS+77yM5peg6ZyA5a6J6KOF5Lu75L2V5pKt5pS+5Zmo44CCPC9wPic7CiAgICAgICAgfQogICAgICAgIGluZm9FbGVtZW50Lmh0bWwodGl0bGVIdG1sKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc0xvYWRpbmcoKXsKICAgICAgICBhbGVydCgn6aG16Z2i5Yqg6L295Lit77yM6K+36ICQ5b+D562J5b6FJyk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0X3BsYXlfdmlldygpewogICAgICAgIHZhciBwbGF5X3ZpZXcgPSAkKCcjcGxheV92aWV3Jyk7CiAgICAgICAgaWYocGxheV92aWV3Lmxlbmd0aCA9PT0gMCl7CiAgICAgICAgICAgIHBsYXlfdmlldyA9ICQoJyNwbGF5dmlkZW8nKTsKICAgICAgICB9CiAgICAgICAgcGxheV92aWV3LmF0dHIoe3dpZHRoOiAiNjk0cHgiLCBoZWlnaHQ6ICI0MzRweCJ9KTsKICAgICAgICBwbGF5X3ZpZXcuY3NzKCJiYWNrZ3JvdW5kLWltYWdlIiwgInVybCgnJykiKTsKICAgICAgICByZXR1cm4gcGxheV92aWV3OwogICAgfQoKICAgIGZ1bmN0aW9uIGdldF9wMnAoKXsKICAgICAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cCgnPG9iamVjdCBjbGFzc2lkPSguKik/PC9vYmplY3Q+Jyk7CiAgICAgICAgdmFyIGh0bWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaHRtbCcpWzBdLmlubmVySFRNTDsKICAgICAgICB2YXIgbWF0Y2ggPSBodG1sLm1hdGNoKHJlZylbMF07CgogICAgICAgIHZhciBwbGF5X3ZpZXcgPSBnZXRfcGxheV92aWV3KCk7CiAgICAgICAgdmFyIHBodG1sID0gbWF0Y2g7CiAgICAgICAgcGxheV92aWV3Lmh0bWwocGh0bWwpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldF9mbGFzaCgpewogICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKCdwMnBzX2VtYmVkXCgoLiopP1wpOycpOwogICAgICAgIHZhciBodG1sID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2h0bWwnKVswXS5pbm5lckhUTUw7CiAgICAgICAgdmFyIG1hdGNoID0gaHRtbC5tYXRjaChyZWcpWzBdOwogICAgICAgIG1hdGNoID0gbWF0Y2gucmVwbGFjZSgnZGF0YS5vbmVwd2QnLCAnIiInKTsKCiAgICAgICAgdmFyIHBsYXlfdmlldyA9IGdldF9wbGF5X3ZpZXcoKTsKICAgICAgICB2YXIgcGh0bWwgPSAnPGRpdiBpZD0icDJwc192aWRlbyI+PGgxPuaIkeS7rOmcgOimgUZsYXNoIHBsYXllciAxMC4x5oiW5Lul5LiK54mI5pys5p2l5pKt5pS+44CCPC9oMT48cD48YSBocmVmPSJodHRwOi8vd3d3LmFkb2JlLmNvbS9nby9nZXRmbGFzaHBsYXllciI+PGltZyBzcmM9Imh0dHA6Ly93d3cuYWRvYmUuY29tL2ltYWdlcy9zaGFyZWQvZG93bmxvYWRfYnV0dG9ucy9nZXRfZmxhc2hfcGxheWVyLmdpZiIgYWx0PSLlronoo4XmnIDmlrDnmoRGbGFzaCBwbGF5ZXIiIC8+PC9hPjwvcD48L2Rpdj4nOwogICAgICAgIHBsYXlfdmlldy5odG1sKHBodG1sKTsKICAgICAgICB1bnNhZmVXaW5kb3cuZXZhbChtYXRjaCk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0X21wNCgpewogICAgICAgIHZhciBybmRfaXAgPSAkKCIjcm5kX2lwIikudmFsKCk7CiAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoIjo4MDgwKC4qKT8ubTN1OCIpOwogICAgICAgIHZhciBodG1sID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2h0bWwnKVswXS5pbm5lckhUTUw7CiAgICAgICAgdmFyIG1hdGNoID0gaHRtbC5tYXRjaChyZWcpWzBdOwogICAgICAgIHZhciBtM3U4ID0gcm5kX2lwICsgbWF0Y2g7CgogICAgICAgIHZhciBwbGF5X3ZpZXcgPSBnZXRfcGxheV92aWV3KCk7CiAgICAgICAgdmFyIHBodG1sID0gJzx2aWRlbyB3aWR0aD0iNjk0cHgiIGhlaWdodD0iNDM0cHgiIGF1dG9wbGF5PSJhdXRvcGxheSIgY29udHJvbHM+PHNvdXJjZSBzcmM9IicgKyBtM3U4ICsgJyIgdHlwZT0iYXBwbGljYXRpb24veC1tcGVnVVJMIj5Zb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgdmlkZW8gdGFnLjwvdmlkZW8+JzsKICAgICAgICBwbGF5X3ZpZXcuaHRtbChwaHRtbCk7CiAgICB9Cgp9KSgpOw=="},{"name":"CL1024","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["http://*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1492505332336},"enabled":false,"position":17,"file_url":"https://sleazyfork.org/scripts/1983-cl1024/code/CL1024.user.js","uuid":"9158243a-d3e2-49a5-8735-77269c130c45","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgQ0wxMDI0Ci8vIEBuYW1lc3BhY2UgQ0wxMDI0Ci8vIEB2ZXJzaW9uIDEuMy4zCi8vIEBkZXNjcmlwdGlvbiDojYnmprTnpL7ljLogLSDjgIzlj5bmtoh2aWlkaWnot7PovazjgI3jgIznp43lrZDpk77mjqXovazljJbno4Hpk77mjqXjgI3jgIzljrvluJblrZDlub/lkYrjgI3jgIzpmIXor7vluJblrZDmjInmpbzmlbDlv6vpgJ/ot7PovazmpbzlsYLjgI3jgIzluJblrZDlhoXpmpDol48xMDI055qE5Zue5aSN44CN44CM5LuK5pel5biW5a2Q5Yqg5Lqu44CN44CM6LaF5aSn5Zu+54mH5qC55o2u5bGP5bmV57yp5pS+44CN44CM5b+r5o236ZSu77ya6K+m57uG6aG1Si9LIOS4ii/kuIvkuIDkuKrlm57lpI3vvIxGNui3s+i9rOaKgOacr+iuqOiuuuWMuu+8jOOAkC7jgJHov5Tlm57pobbpg6jjgI0KLy8gQGhvbWVwYWdlVVJMIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vc2NyaXB0cy8xOTgzLWNsMTAyNAovLyBAY29weXJpZ2h0IDIwMTItMjAxNSByb3NlMjAuOTkuY0BnbWFpbC5jb20KLy8gQHJlcXVpcmUgaHR0cDovL2Nkbi5zdGF0aWNmaWxlLm9yZy9qcXVlcnkvMS44LjMvanF1ZXJ5Lm1pbi5qcwovLyBAaW5jbHVkZSBodHRwOi8vKgovLyBAZ3JhbnQgIEdNX2FkZFN0eWxlCi8vID09L1VzZXJTY3JpcHQ9PQoKLy8gQGF1dGhvciAgICAgIHJvc2UxOTg4YwovLyBAY29kZSAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL3Jvc2UxOTg4Yy9DYW9saXUucGx1ZwovLyBAYmxvZyAgICAgICAgaHR0cDovL2NsLmFhY2MuaW4KLy8gQGRhdGUgICAgICAgIDIwMTIuMTEuMTUKLy8gQG1vZGlmaWVkICAgIDIwMTIuMTEuMTUgIOejgemTvuaOpei9rOWMlgovLyBAbW9kaWZpZWQgICAgMjAxMi4xMS4yOCAg5Y675bm/5ZGKCi8vIEBtb2RpZmllZCAgICAyMDEyLjEyLjIzICDluJblrZDmjInmpbzot7PovazpobXpnaLvvIzmlrnkvr/nlKjmiLflnKg85rGC54mH5rGC5Yqp6LS0PuaJvueJhwovLyBAbW9kaWZpZWQgICAgMjAxMy4wMS4wNSAg5oyJ5qW86Lez6L2s6aG16Z2iLOW5tiflrprkvY3mjIflrprmpbzlsYInCi8vIEBtb2RpZmllZCAgICAyMDEzLjAxLjE3ICDpmpDol48xMDI055qE5Zue5aSNCi8vIEBtb2RpZmllZCAgICAyMDEzLjAzLjExICDku4rml6XluJblrZDpq5jkuq4gLSDliJfooajmoIfpopjlt6bovrnigJwuOjrigJ3lsIbmlLnkuLrigJxUb2RheeKAnQovLyBAbW9kaWZpZWQgICAgMjAxMy4wMy4xMiAgW+aaguWkseaViF3mlrDlop7lv6vmjbfplK4gLSDmiZPlvIDluJblrZDvvIwgX19KX1/kuLrkuIvkuIDkuKrlm57lpI3vvIxfX0tfX+S4uuS4iuS4gOS4quWbnuWkje+8jOeCuV9fLl9f6L+U5Zue6aG26YOoCi8vIEBtb2RpZmllZCAgICAyMDEzLjAzLjE4ICDkv67lpI1idWcgLSDlm57lpI3lkI7mu5rliqjmnaHot7PliLDpobbpg6gKLy8gQDEuMS40ICAgMjAxNC4wMS4wMyAg5pu05pawIC0gdml2aei3s+i9rOabtOaWsAovLyBAMS4xLjUgICAyMDE0LTAxLTAzICDmm7TmlrAgLSDkv67lpI3ngrnlh7tb5pi+56S6XeaXoOaViAovLyBAMS4xLjYgICAyMDE0LTAxLTAzICBCVUcgLSDmjpLpmaTov4Xpm7fnprvnur/pobXpnaLliqDovb3ohJrmnKzjgILmhJ/osKJA5paH56eRCi8vIEAxLjEuNyAgIDIwMTQtMDEtMDMgIOabtOaWsCAtIOi2hemrmOa4heOAgeWkp+WbvuagueaNruWxj+W5leWwuuWvuOe8qeaUvuWIsOmAguWQiOWxj+W5leWkp+WwjwovLyBAMS4xLjcgICAyMDE0LTAxLTAzICBCVUcgLSDkv67lpI3ngrnlh7tb5pi+56S6XeaXoOaViAovLyBAMS4xLjggICAyMDE0LTAxLTA0ICDmm7TmlrAgLSDmlrDlop7ngrnlh7vkuIvovb3np43lrZAKLy8gQDEuMS45ICAgMjAxNC0xLTE0ICAg5aKe5Yqg57uf6K6hCi8vIEAxLjIuMiAgIDIwMTQtMS0xNCAgIOabtOaWsOWMuemFjemXrumimAovLyBAMS4yLjMgICAyMDE0LTItMjEgICDmm7TmlrBDaHJvbWUg5o+S5Lu25aSx5pWI6Zeu6aKY44CCQ0zpl7nlk6rmoLfvvJ/pnZ7lvpfliqDovb1odHRwOi8vNjkuMTc1LjQ0LjQ1Ojg4L3N0eWxlLmNzcz92PTEuMSDljaHmrbvkuobjgIIKLy8gQDEuMi40ICAgMjAxNC0yLTIxICAg6Ziy5q2iNjkuMTc1LjQ0LjQ1Ojg4IGNzc+WKoOi9veWksei0pQovLyBAMS4yLjUgICAyMDE0LTYtMiAgICDpmLLmraJqcXVlcnnliqDovb3lpLHotKUKLy8gQDEuMi42ICAgMjAxNC02LTIgICAgdXNlcnNjcmlwdHPliqDovb3lpLHotKUKLy8gQDEuMi44ICAgMjAxNC02LTE3ICAg5L+u5aSN5YG35oeS6YCg5oiQ55qE5peg5rOV6K6/6Zeu77yManPov4flpKcKLy8gQDEuMi45ICAgMjAxNC03LTcgICAg5L+u5aSN5YG35oeS5Yy56YWN572R56uZ6Zeu6aKYCi8vIEAxLjMuMCAgIDIwMTUtOS02ICAgIOS/ruWkjeWPjemmiOeahGJ1Z++8jOWMuemFjee9keermeOAgeWSjOesrOS6jOmhtem7keWxj++8jOWinuWKoGNocm9tZeaPkuS7tuaPkOekugovLyBAMS4zLjEgICAyMDE1LTktNiAgICDkv67mlLljaHJvbWXlj5HluIPnvZHlnYAKLy8gQDEuMy4yICAgMjAxNS05LTEwICAg5Y675o6JZ29vZ2xl57uf6K6hCi8vIEAxLjMuMyAgIDIwMTctMS0xOSAgIGZpeAoKKGZ1bmN0aW9uKCkgewogIGlmIChkb2N1bWVudC50aXRsZS5pbmRleE9mKCfojYnmprQnKSAhPSAtMSkgewoKICAgIHZhciBDT05TVEFOVFMgPSB7CiAgICAgICd2ZXJzaW9uJzogJzEuMy4xJywKICAgICAgJ2xvY2FsdXJsJzogd2luZG93LmxvY2F0aW9uLmhyZWYsCiAgICAgICdsb2NhbGhvc3QnOiB3aW5kb3cubG9jYXRpb24uaG9zdCwKICAgICAgJ3JlZ3VsYXJWaWknOiAvd3d3LnZpaWRpaS5jb218d3d3LnZpaWRpaS5pbmZvLywKICAgICAgJ3JlZ3VsYXJCbG9nJzogL2h0bV9kYXRhfHJlYWQucGhwL2dpLAogICAgICAncmVndWxhckxpc3QnOiAvdGhyZWFkL2dpLAogICAgICAncmVndWxhckNhdCc6IC9oYXNoL2dpLAogICAgICAncmVhZHVybCc6ICdodHRwOi8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0ICsgJy9yZWFkLnBocCcsCiAgICAgICd0aXBzJzogJzxkaXYgY2xhc3M9InRpcHNfY29udGFpbmVyIj48ZGl2IGNsYXNzPSJjbG9zZSI+WDwvZGl2PuWOuzxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iaW5wdXQtdzgwIiBwbGFjZWhvbGRlcj0iIiBpZD0id2FudGxjIiBuYW1lPSJ3YW50bGMiIC8+5qiTPGlucHV0IHR5cGU9ImJ1dHRvbiIgaWQ9ImdvdG9sYyIgdmFsdWU9IkdvIiAvPiBvciA8aW5wdXQgdHlwZT0iYnV0dG9uIiBpZD0iZ29iYWNrIiB2YWx1ZT0iQmFjayIgb25jbGljaz0iaGlzdG9yeS5nbygtMSk7Ij48YnIgLz48L2Rpdj4nLAogICAgICAnY3NzJzogJy50aXBzX2NvbnRhaW5lcntwb3NpdGlvbjpmaXhlZDtib3R0b206MmVtO3JpZ2h0OjJlbTtjb2xvcjpncmVlbjtvcGFjaXR5OjAuNDtiYWNrZ3JvdW5kOiNmZmY7cGFkZGluZzoxMHB4O3otaW5kZXg6OTk5OTl9LnRpcHNfY29udGFpbmVyOmhvdmVye29wYWNpdHk6MC45fS50aXBzX2NvbnRhaW5lciAuY2xvc2V7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6MDtjb2xvcjpyZWQ7Y3Vyc29yOnBvaW50ZXJ9LnRpcHNfY29udGFpbmVyIHNlbGVjdCwgLnRpcHNfY29udGFpbmVyIHNlbGVjdCBvcHRpb257bWF4LXdpZHRoOjE4ZW19IGlucHV0LmlucHV0LXc4MCB7YmFja2dyb3VuZDogbm9uZSByZXBlYXQgc2Nyb2xsIDAgMCAjRkZGRkZGOyBib3JkZXI6IDFweCBzb2xpZCAjQjJDQ0NDOyBoZWlnaHQ6IDE4cHg7bGluZS1oZWlnaHQ6IDE4cHg7bWFyZ2luOiAycHg7cGFkZGluZzogMCAzcHg7d2lkdGg6NDBweDt9LmhpZGRlbjEwMjR7aGVpZ2h0OjM2cHg7b3ZlcmZsb3c6aGlkZGVuO30nLAogICAgICAnaW5kZXhjc3MnOiAnLnBvc3R0b2RheXtjb2xvcjojZjYwO30nCiAgICB9OwoKICAgIHZhciBQTEFORVRXT1JLID0gewogICAgICBpc1BsYW5ldEhhc1dhdGVyOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gQ09OU1RBTlRTLnJlZ3VsYXJCbG9nLnRlc3QoQ09OU1RBTlRTLmxvY2FsdXJsKTsKICAgICAgfSwKICAgICAgaXNQbGFuZXRIYXNQZW9wbGU6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBDT05TVEFOVFMucmVndWxhckxpc3QudGVzdChDT05TVEFOVFMubG9jYWx1cmwpOwogICAgICB9LAogICAgICBLaWxsVmlsbDogZnVuY3Rpb24ob3JnaW5VcmwpIHsKICAgICAgICB2YXIgZGVjb2RlU3RyID0gLy4qXD9odHRwOi9nOwogICAgICAgIHZhciBkZWNvZGVTaWcgPSAvX19fX19fL2c7CiAgICAgICAgdmFyIGpzU3VmZml4ID0gJyZhbXA7eic7CiAgICAgICAgdmFyIGh0bWxTdWZmaXggPSAnJnonOwogICAgICAgIHZhciByZXR1cm5TdWZmaXggPSAncmV0dXJuIGZhbHNlJzsKICAgICAgICBpZiAob3JnaW5VcmwuaW5kZXhPZigndmlpZGlpJykgIT0gLTEpIHsKICAgICAgICAgIHZhciBwdXJlVXJsID0gb3JnaW5VcmwucmVwbGFjZShkZWNvZGVTdHIsICdodHRwOicpLnJlcGxhY2UoZGVjb2RlU2lnLCAnLicpLnJlcGxhY2UoanNTdWZmaXgsICcnKS5yZXBsYWNlKGh0bWxTdWZmaXgsICcnKS5yZXBsYWNlKHJldHVyblN1ZmZpeCwgJycpOwogICAgICAgICAgcmV0dXJuIHB1cmVVcmwKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIG9yZ2luVXJsOwogICAgICAgIH0KICAgICAgfSwKICAgICAgTWVyY3VyeTogZnVuY3Rpb24oKSB7CgogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAvLyDlpITnkIbpk77mjqUKICAgICAgICB2YXIgbGlua05vZGUgPSAkKCdhW2hyZWYqPVwndmlpZGlpXCddJyk7CiAgICAgICAgaWYgKGxpbmtOb2RlLmxlbmd0aCAhPSAwKSB7CiAgICAgICAgICBsaW5rTm9kZS5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHZhciBvcmdpbkxpbmsgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTsKICAgICAgICAgICAgICB2YXIgcHVyZUxpbmsgPSBzZWxmLktpbGxWaWxsKG9yZ2luTGluayk7CiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdocmVmJywgcHVyZUxpbmspOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHZhciBsaW5rTm9kZSA9ICQoJ2FbaHJlZio9XCdoYXNoXD1cJ10nKTsKICAgICAgICBpZiAobGlua05vZGUubGVuZ3RoICE9IDApIHsKICAgICAgICAgIGxpbmtOb2RlLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgdmFyIG9yZ2luTGluayA9ICQodGhpcykuYXR0cignaHJlZicpOwoKICAgICAgICAgICAgICB2YXIgdGVtcExpbmsgPSBvcmdpbkxpbmsuc3BsaXQoJ2hhc2g9Jyk7CiAgICAgICAgICAgICAgdmFyIGhyZWZNYWduZXQgPSAnbWFnbmV0Oj94dD11cm46YnRpaDonICsgdGVtcExpbmtbMV0uc3Vic3RyaW5nKDMpOwoKICAgICAgICAgICAgICAkKHRoaXMpLmFmdGVyKCc8YSBocmVmPSInICsgb3JnaW5MaW5rICsgJyIgdGFyZ2V0PSJfYmxhbmsiPuS4i+i9veenjeWtkDwvYT4nKTsKICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2hyZWYnLCBocmVmTWFnbmV0KS50ZXh0KGhyZWZNYWduZXQpOwogICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoJ2xpbmstYnJhY2VzJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgVmVudXM6IGZ1bmN0aW9uKCkgewogICAgICAgICQoJ2ltZyxpbnB1dFt0eXBlPWltYWdlXScpLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgdGhpeiA9ICQodGhpcyk7CiAgICAgICAgICB2YXIgdGhpem9uY2xpY2sgPSB0aGl6LmF0dHIoJ29uY2xpY2snKTsKICAgICAgICAgIGlmIChDT05TVEFOVFMucmVndWxhclZpaS50ZXN0KHRoaXpvbmNsaWNrKSkgewogICAgICAgICAgICB2YXIgbmV3b25jbGljayA9IHRoaXpvbmNsaWNrLnJlcGxhY2UoJ2h0dHA6Ly93d3cudmlpZGlpLmNvbS8/JywgJycpLnJlcGxhY2UoJ2h0dHA6Ly93d3cudmlpZGlpLmluZm8vPycsICcnKS5yZXBsYWNlKC9fX19fX18vZywgJy4nKS5yZXBsYWNlKC8mei9nLCAnJyk7CiAgICAgICAgICAgIHRoaXouYXR0cignb25jbGljaycsIG5ld29uY2xpY2spLmNzcygnY3Vyc29yJywgJ3BvaW50ZXInKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodGhpei5wYXJlbnQoKS5hdHRyKCdjbGFzcycpICE9ICd0YWMnKSB7CiAgICAgICAgICAgIHZhciBzZXR3aWR0aCA9IHBhcnNlSW50KHNjcmVlbi53aWR0aCkgLSAzOTU7CiAgICAgICAgICAgIGltZ1JlYWR5KHRoaXouYXR0cignc3JjJyksIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHZhciBpbWdXaWR0aCA9IHRoaXMud2lkdGg7CiAgICAgICAgICAgICAgdmFyIGltZ0hlaWdodCA9IHRoaXMuaGVpZ2h0OwogICAgICAgICAgICAgIGlmIChpbWdXaWR0aCA+IHNldHdpZHRoKSB7CiAgICAgICAgICAgICAgICBuZXdXaWR0aCA9IHNldHdpZHRoOwogICAgICAgICAgICAgICAgbmV3SGVpZ2h0ID0gKHNldHdpZHRoIC8gaW1nV2lkdGgpICogaW1nSGVpZ2h0OwogICAgICAgICAgICAgICAgdGhpei53aWR0aChuZXdXaWR0aCk7CiAgICAgICAgICAgICAgICB0aGl6LmhlaWdodChuZXdIZWlnaHQpOwogICAgICAgICAgICAgICAgdGhpei5jbG9zZXN0KCd0ZCcpLndpZHRoKHNldHdpZHRoICsgMTYpOwogICAgICAgICAgICAgICAgdGhpei5jbG9zZXN0KCdkaXYnKS53aWR0aChzZXR3aWR0aCArIDE2KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgRWFydGg6IGZ1bmN0aW9uKCkgewogICAgICAgICQoJy5zcHRhYmxlJykucmVtb3ZlKCk7CiAgICAgIH0sCiAgICAgIE1hcnM6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciB0YXJnZXQgPSBVVElMUy5nZXRRdWVyeVN0cmluZ0J5TmFtZSgndGFyZ2V0Jyk7CgogICAgICAgICQoJ2FbY2xhc3M9czNdJykuZWFjaChmdW5jdGlvbihpLCB2YWwpIHsKICAgICAgICAgIHZhciBhX2h0bWwgPSAkKHRoaXMpLmh0bWwoKTsKICAgICAgICAgIGlmIChhX2h0bWwuaW5kZXhPZign5qiTJykgPiAwKSB7CiAgICAgICAgICAgIHZhciBwYXJlbnRkaXYgPSAkKHRoaXMpLmNsb3Nlc3QoJ2Rpdi50MicpOwogICAgICAgICAgICBhX2h0bWwgPSBhX2h0bWwucmVwbGFjZSgvW14wLTldL2lnLCAnJyk7CiAgICAgICAgICAgIHBhcmVudGRpdi5hdHRyKCdpZCcsICdwb3N0XycgKyBwYXJzZUludChhX2h0bWwpKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgVVRJTFMuYWRkQ3NzKENPTlNUQU5UUy5jc3MpOwogICAgICAgIFVUSUxTLmFkZERvbShDT05TVEFOVFMudGlwcywgZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgICAgVVRJTFMub25seW51bSgnd2FudGxjJyk7CgogICAgICAgIC8vIEJpbmQgUXVpY2sgcmVkaXJjdCBieSBpbnB1dCBFbnRlciBLZXkgLSBjYXQKICAgICAgICAkKCcjd2FudGxjJykuYmluZCgna2V5dXAnLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gMTMpIHsKICAgICAgICAgICAgJCgnI2dvdG9sYycpLmNsaWNrKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vICQoIiN3YW50bGMiKS5mb2N1cygpOyDmgrLliafvvIzlhYjms6jph4rkuobjgIIKCiAgICAgICAgJCgnLmNsb3NlJykuY2xpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZSgpOwogICAgICAgIH0pOwoKICAgICAgICAkKCcjZ290b2xjJykuY2xpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgd2FudGxjID0gcGFyc2VJbnQoJCh0aGlzKS5wcmV2KCkudmFsKCkpOyAvLyDmg7PljrvnmoTmpbzlsYIgLSBjeXcKICAgICAgICAgIHZhciBsb2NhdGlvbnVybGFycmF5ID0gVVRJTFMuZ2V0UXVlcnlTdHJpbmcoQ09OU1RBTlRTLmxvY2FsdXJsKTsKCiAgICAgICAgICBpZiAod2FudGxjICE9ICcnKSB7CiAgICAgICAgICAgIHZhciB1cmxnZXRwYWdlID0gVVRJTFMuZ2V0UXVlcnlTdHJpbmdCeU5hbWUoJ3BhZ2UnKTsKICAgICAgICAgICAgdmFyIHBhZ2UgPSBNYXRoLmNlaWwoKHdhbnRsYyArIDEpIC8gMjUpOwoKICAgICAgICAgICAgaWYgKHVybGdldHBhZ2UgPT0gcGFnZSkgewogICAgICAgICAgICAgIFVUSUxTLmh0bWxfc2Nyb2xsVG9wX3RhcmdldCgncG9zdF8nICsgd2FudGxjKTsKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChsb2NhdGlvbnVybGFycmF5Lmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICB2YXIgcmVQYWdlID0gL3BhZ2UvZ2k7CiAgICAgICAgICAgICAgdmFyIHJlVGFyZ2V0ID0gL3RhcmdldC9naTsKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gbG9jYXRpb251cmxhcnJheS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgICAgICAgICAgLy8gcGFnZSBhbmQgdGFyZ2V0CiAgICAgICAgICAgICAgICBpZiAocmVQYWdlLnRlc3QobG9jYXRpb251cmxhcnJheVtpXSkpIHsKICAgICAgICAgICAgICAgICAgbG9jYXRpb251cmxhcnJheVtpXSA9ICdwYWdlPScgKyBwYWdlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHJlVGFyZ2V0LnRlc3QobG9jYXRpb251cmxhcnJheVtpXSkpIHsKICAgICAgICAgICAgICAgICAgbG9jYXRpb251cmxhcnJheSA9IFVUSUxTLmFycmF5X3Byb3RvdHlwZV9kZWwobG9jYXRpb251cmxhcnJheSwgaSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGxvY2F0aW9udXJsYXJyYXkgPSBsb2NhdGlvbnVybGFycmF5LmpvaW4oJyYnKTsKICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IENPTlNUQU5UUy5yZWFkdXJsICsgJz8nICsgbG9jYXRpb251cmxhcnJheSArICcmdGFyZ2V0PXBvc3RfJyArIHdhbnRsYzsKICAgICAgICAgICAgICAvLyB3aW5kb3cub3BlbigpOwogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBsb2NhdGlvbnVybGFycmF5ID0gQ09OU1RBTlRTLmxvY2FsdXJsLnNwbGl0KCcvJyk7IC8vIEdldCB0aWQKICAgICAgICAgICAgICB2YXIgdGlkID0gbG9jYXRpb251cmxhcnJheS5wb3AoKS5zcGxpdCgnLicpOwogICAgICAgICAgICAgIGlmICh0eXBlb2YodGlkWzBdKSAhPSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgdGlkID0gdGlkWzBdOwogICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBDT05TVEFOVFMucmVhZHVybCArICc/dGlkPScgKyB0aWQgKyAnJnBhZ2U9JyArIHBhZ2UgKyAnJnRhcmdldD1wb3N0XycgKyB3YW50bGM7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIFVUSUxTLmh0bWxfc2Nyb2xsVG9wX3RhcmdldCh0YXJnZXQpOwoKICAgICAgICAvL2hpZGUxMDI0CiAgICAgICAgJCgnZGl2LnQyJykuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciB0aGl6ID0gJCh0aGlzKTsKICAgICAgICAgIHZhciBodG1sID0gdGhpei5jaGlsZHJlbigpLmZpbmQoJy50cGNfY29udGVudCcpLmh0bWwoKTsKICAgICAgICAgIHZhciB0aGl6X2lkID0gdGhpei5hdHRyKCdpZCcpOwoKICAgICAgICAgIGlmIChodG1sID09ICcxMDI0JykgewogICAgICAgICAgICB0aGl6LmFkZENsYXNzKCdoaWRkZW4xMDI0Jyk7CgogICAgICAgICAgICB2YXIgdGlwdG9wID0gdGhpei5maW5kKCcudGlwdG9wJyk7CiAgICAgICAgICAgIHZhciB0aGl6X2xjID0gdGhpei5maW5kKCcudGlwYWQgPiBzcGFuOmxhc3QnKS5jaGlsZHJlbigpLmNsb25lKCk7CiAgICAgICAgICAgIHRpcHRvcC5hcHBlbmQoJzxhIGNsYXNzPSJzaG93MTAyNCIgY2xhc3M9ImFjdC1zaG93LTEwMjQiIHJlbD0iJyArIHRoaXpfaWQgKyAnIiBzdHlsZT0iY29sb3I6Z3JlZW4iIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPuaYvuekujwvYT4gfCAnKS5hcHBlbmQodGhpel9sYyk7CiAgICAgICAgICB9CgogICAgICAgIH0pOwoKICAgICAgICAkKCcuc2hvdzEwMjQnKS5jbGljayhmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciB0aGl6X2lkID0gJCh0aGlzKS5hdHRyKCdyZWwnKTsKICAgICAgICAgICQoJyMnICsgdGhpel9pZCkudG9nZ2xlQ2xhc3MoJ2hpZGRlbjEwMjQnKTsKICAgICAgICB9KTsKCiAgICAgICAgLy/lv6vmjbfplK4KICAgICAgICAkKGRvY3VtZW50KS5rZXlkb3duKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gS0VZX0FTQ0xMLmopIHsKICAgICAgICAgICAgVVRJTFMuc2hvcnRjdXRfa2V5X2N1cnJlbnQoKTsKICAgICAgICAgICAgVVRJTFMuc2hvcnRjdXRfa2V5X2p1bXAodHJ1ZSwgJ2N1cnJlbnQtY29tbWVudCcpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IEtFWV9BU0NMTC5rKSB7CiAgICAgICAgICAgIFVUSUxTLnNob3J0Y3V0X2tleV9jdXJyZW50KCk7CiAgICAgICAgICAgIFVUSUxTLnNob3J0Y3V0X2tleV9qdW1wKGZhbHNlLCAnY3VycmVudC1jb21tZW50Jyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gS0VZX0FTQ0xMLnBlcmlvZCkgewogICAgICAgICAgICBVVElMUy5odG1sX3Njcm9sbFRvcF90YXJnZXQoJ3RvcCcpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IEtFWV9BU0NMTC5mNikgewogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvJyArICd0aHJlYWQwODA2LnBocD9maWQ9Nyc7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgSnVwaXRlcjogZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gdG9kYXkg5qC35byPCiAgICAgICAgVVRJTFMuYWRkQ3NzKENPTlNUQU5UUy5pbmRleGNzcyk7CgogICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICAgICAgdG9kYXkgPSBVVElMUy5kYXRhX2Zvcm1hdCh0b2RheSwgJ3l5eXktTU0tZGQnKTsKCiAgICAgICAgJCgnLnRyMycpLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgdHIzID0gJCh0aGlzKTsKICAgICAgICAgIHZhciBwb3N0ZGF0YSA9ICQodGhpcykuZmluZCgnYVtjbGFzcz1ibF0nKS5uZXh0KCk7CiAgICAgICAgICBpZiAocG9zdGRhdGEudGV4dCgpID09IHRvZGF5KSB7CiAgICAgICAgICAgIHBvc3RkYXRhLmFkZENsYXNzKCdwb3N0dG9kYXknKTsKICAgICAgICAgICAgdHIzLmZpbmQoJ3RkOmZpcnN0JykuY2hpbGRyZW4oKS5odG1sKCdUb2RheScpLmFkZENsYXNzKCdwb3N0dG9kYXknKS5jc3MoJ2JvcmRlci1ib3R0b20nLCAnMXB4IGRvdHRlZCB0b21hdG8nKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgU2F0dXJuOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIganMgPSAndmFyIF9nYXEgPSBfZ2FxIHx8IFtdOyc7CiAgICAgICAganMgKz0gJ19nYXEucHVzaChbXCdfc2V0QWNjb3VudFwnLCBcJ1VBLTQ3MTE0NjU3LTFcJ10pOyc7CiAgICAgICAganMgKz0gJ19nYXEucHVzaChbXCdfdHJhY2tQYWdldmlld1wnXSk7JzsKICAgICAgICBqcyArPSAnZnVuY3Rpb24gZ29vZ2xlQW5hbHl0aWNzKCl7JzsKICAgICAgICBqcyArPSAnICAgICAgICB2YXIgZ2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwnc2NyaXB0XCcpO2dhLnR5cGUgPSBcJ3RleHQvamF2YXNjcmlwdFwnOyc7CiAgICAgICAganMgKz0gJyAgICAgICAgZ2EuYXN5bmMgPSB0cnVlO2dhLnNyYyA9IFwnaHR0cHM6Ly9zc2wuZ29vZ2xlLWFuYWx5dGljcy5jb20vZ2EuanNcJzsnOwogICAgICAgIGpzICs9ICcgICAgICAgIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCdzY3JpcHRcJylbMF07JzsKICAgICAgICBqcyArPSAnICAgICAgICBzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGdhLCBzKSc7CiAgICAgICAganMgKz0gJ30nOwogICAgICAgIGpzICs9ICdnb29nbGVBbmFseXRpY3MoKTsnOwogICAgICAgIGpzICs9ICdfZ2FxLnB1c2goW1wnX3RyYWNrRXZlbnRcJyxcJ2R1cGFubGlua19zY3JpcHRcJyxTdHJpbmcoXCcnICsgQ09OU1RBTlRTLnZlcnNpb24gKyAnXCcpXSk7JzsKICAgICAgICBVVElMUy5hZGRTY3JpcHQoanMpOwogICAgICB9LAogICAgICBVcmFudXM6IGZ1bmN0aW9uKCkge30sCiAgICAgIE5lcHR1bmU6IGZ1bmN0aW9uKCkge30sCiAgICAgIFBsdXRvOiBmdW5jdGlvbigpIHsKICAgICAgICAvLyBHTV9hZGRTdHlsZSBmdW5jdGlvbiBpcyBub3QgZXhpc3RlZCBpbiBjaHJvbWUgMjcKICAgICAgICB2YXIgR01fYWRkU3R5bGUgPSBHTV9hZGRTdHlsZSB8fAogICAgICAgICAgICBmdW5jdGlvbihjc3MpIHsKICAgICAgICAgICAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICAgICAgICAgIHN0eWxlLnR5cGUgPSAndGV4dC9jc3MnOwogICAgICAgICAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpOwogICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgICAgICAgICB9OwoKICAgICAgICAvLyDlop7liqDoh6rlrprkuYnmoLflvI8KICAgICAgICBHTV9hZGRTdHlsZSgnXAogICAgICAgICAgICAgICAgICAgIGJvZHkge1wKICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IFRhaG9tYTtcCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcCiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNGOUY5RUM7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgaDEsaDIsaDMsaDQsaDUsaDYsZm9ybSxib2R5IHtcCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7XAogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgdGQsdGgsZGl2IHtcCiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDtcCiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICB0YWJsZSB7XAogICAgICAgICAgICAgICAgICAgICAgICBlbXB0eS1jZWxsczogc2hvdztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBpbWcge1wKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAwO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIGgzLGgyIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZTtcCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBoMyB7XAogICAgICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogbm9ybWFsO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIGgyIGEsaDMgYSB7XAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzAwMDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBoNCB7XAogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDIwcHggMCAxMHB4O1wKICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxLjFlbTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICB0ZXh0YXJlYSxpbnB1dCxzZWxlY3Qge1wKICAgICAgICAgICAgICAgICAgICAgICAgZm9udDogMTJweCBBcmlhbDtcCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDFweCAzcHggMCAzcHg7XAogICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMXB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5jIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyOiBib3RoO1wKICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAwO1wKICAgICAgICAgICAgICAgICAgICAgICAgZm9udDogMC8wIEFyaWFsO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5iIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC50YWwge1wKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAudGFjIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAudGFyIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5mciB7XAogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdDogcmlnaHQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLmZsIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0OiBsZWZ0O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIGEge1wKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1wKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMyZjVmYTE7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgYTpob3ZlciB7XAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAuZjkge1wKICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5mMTAge1wKICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5mMTIge1wKICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5mMTQge1wKICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5mbiwuZm4gYSB7XAogICAgICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogbm9ybWFsO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5zMSB7XAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzAwODAwMDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAuczIge1wKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICM5ODRCOTg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnMzIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjRkE4OTFCO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5zNCB7XAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzAwMzNGRjtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAuczUge1wKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICM2NTlCMjg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLmdyYXkge1wKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICM4MThhODk7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLmZfb25lLC50X29uZSwucl9vbmUge1wKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogI0Y5RjlFQztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAuZl90d28sLnRfdHdvLC5yX3R3byB7XAogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjRjRGQkZGO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHRleHRhcmVhLGlucHV0LHNlbGVjdCB7XAogICAgICAgICAgICAgICAgICAgICAgICBmb250OiAxMnB4IEFyaWFsO1wKICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMXB4IDNweCAwIDNweDtcCiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XAogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxcHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgc2VsZWN0IHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogc29saWQgMXB4ICNENEVGRjc7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLmJ0biB7XAogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjQTZDQkU3O1wKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMwMDRjN2Q7XAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItd2lkdGg6IDFweDtcCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMTVweDtcCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IDE1cHg7XAogICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5pbnB1dCB7XAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IHNvbGlkIDFweCAjQTZDQkU3O1wKICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMnB4IDBweCAycHggMXB4O1wKICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxLjBlbTtcCiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgZm9ybSB7XAogICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWEge1wKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBzb2xpZCAxcHggI0E2Q0JFNztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAjaGVhZGVyIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA5OCU7XAogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IGF1dG87XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnRvcHRvb2wge1wKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkYWViY2Q7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnRvcHRvb2wgc3BhbiB7XAogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxcHggNXB4O1wKICAgICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDE1MCU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLmJhbm5lciB7XAogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAzJTtcCiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwRjc4ODQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLmJhbm5lciBpbWcge1wKICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAudCB7XAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjQTZDQkU3O1wKICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwcHggYXV0byA4cHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnQgdGFibGUge1wKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2ZmZjtcCiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1wKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDk5Ljk4JTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAudDIge1wKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogI0E2Q0JFNyAxcHggc29saWQ7XAogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDBweCBhdXRvIDVweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAudDMge1wKICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiBhdXRvO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC50NCB7XAogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxcHggMCAxcHggMXB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5oIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDRweCBzb2xpZCAjZGJlY0Y0O1wKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogI0IxRDNFMDtcCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzAwNGM3ZDtcCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDVweCA3cHggM3B4IDdweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAuaCBzcGFuIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLmggaDIge1wKICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLmggYSB7XAogICAgICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogQXJpYWw7XAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzAwNGM3ZDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAuaCBzcGFuIGEsLmggc3BhbiB7XAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzU1OTliYjtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAuaCBhLmEyIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxMnB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC50cjEgdGgge1wKICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNXB4IDEwcHg7XAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0O1wKICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IHRvcDtcCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnRyMSB0ZC50ZDEge1wKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI0Q0RUZGNztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAudHIyIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmM2Y4ZWY7XAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzY1OWIyODtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAudHIyIHRkLC50cjIgdGgge1wKICAgICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDIxcHg7XAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RhZWJjZDtcCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDBweCA2cHggMHB4O1wKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNBNkNCRTc7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnRyMiBhIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjNjU5YjI4O1wKICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAycHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnRyMyB0ZCwudHIzIHRoIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjRDRFRkY3O1wKICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNXB4IDhweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAudHIzIHRoIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XAogICAgICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogbm9ybWFsO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC50cjQge1wKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogI0IxRDNFMDtcCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMDA0YzdkO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC50cjQgdGQge1wKICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDEwcHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnRyIHRkLC50ciB0aCB7XAogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAycHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnRwY19jb250ZW50IHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBBcmlhbDtcCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMiUgMCAwLjUlO1wKICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwIDAgMiU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnRpcHMge1wKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogI0Y0RkJGRjtcCiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogI0Q0RUZGNyAxcHggc29saWQ7XAogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA1cHg7XAogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDAgMSUgMSUgMDtcCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0OiBsZWZ0O1wKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC50aXBzIGxpIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwIDVweDtcCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0OiBsZWZ0O1wKICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcCiAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnRpcHRvcCB7XAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0Q0RUZGNztcCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMCA1cHggMDtcCiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnRpcGFkIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjRDRFRkY3O1wKICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDAgMDtcCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDVweCAwIDA7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnF1b3RlIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogNzAlO1wKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMwMDRjN2Q7XAogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDJweDtcCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgYmxvY2txdW90ZSB7XAogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogOTIlO1wKICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiA4NSU7XAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzgxODg4YztcCiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNENEVGRjc7XAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItbGVmdC13aWR0aDogM3B4O1wKICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNXB4O1wKICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwIDAgMSU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLm1lbnUge1wKICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZjtcCiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNBNkNCRTc7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLm1lbnUgdGQsIC5tZW51IGxpLC5tZW51IHVsIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNCMUQzRTA7XAogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwO1wKICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5tZW51IGxpIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLm1lbnUgYSB7XAogICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDNweCAxNXB4IDNweCAxNXB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5tZW51IGE6aG92ZXIge1wKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzJmNWZhMTtcCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZmO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5tZW51IHVsLnVsMSBsaSBhIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZTtcCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnBhZ2VzIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogM3B4IDA7XAogICAgICAgICAgICAgICAgICAgICAgICBmb250OiAxMXB4LzEycHggVGFob21hO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wYWdlcyAqIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnBhZ2VzIGEge1wKICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMXB4IDRweCAxcHg7XAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjQTZDQkU3O1wKICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwIDFweCAwIDA7XAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XAogICAgICAgICAgICAgICAgICAgICAgICBmb250OiBub3JtYWwgMTJweC8xNHB4IHZlcmRhbmE7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnBhZ2VzIGE6aG92ZXIge1wKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAjNjU5YjI4IDFweCBzb2xpZDtcCiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmM2Y4ZWY7XAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzAwNGM3ZDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucGFnZXMgaW5wdXQge1wKICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMHB4O1wKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzY1OWIyODtcCiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTVweDtcCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQ6IGJvbGQgMTJweC8xNXB4IFZlcmRhbmE7XAogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMXB4O1wKICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiAxcHg7XAogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDFweDtcCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjNjU5YjI4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgICNmb290ZXIge1wKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDk4JTtcCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1wKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMnB4IHNvbGlkICNkYmVjRjQ7XAogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IGF1dG87XAogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA1cHggMDtcCiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206ICNmM2Y4ZWYgMTJweCBzb2xpZDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAjbWFpbiB7XAogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogOTglO1wKICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiBhdXRvO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC50cjMgdGQsLnRyMyB0aCB7XAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjRDRFRkY3O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC55LXN0eWxlIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAudCB0YWJsZSB7XAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDA7XAogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAudHIxIHRoIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNENEVGRjc7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnRyMSB0ZC50ZDEge1wKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDA7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnQge1wKICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMXB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5zaWduYXR1cmUge1wKICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBleHByZXNzaW9uKHRoaXMuc2Nyb2xsSGVpZ2h0PnBhcnNlSW50KHRoaXMuY3VycmVudFN0eWxlLm1heEhlaWdodCk/dGhpcy5jdXJyZW50U3R5bGUubWF4SGVpZ2h0OmF1dG8pO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5zcHRhYmxlIGg0IHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMGVtIDAgLS4xZW07XAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzY2NjZGRjtcCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA4cHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnNwdGFibGUgYSB7XAogICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Om5vbmU7XAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzMzOTkwMDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAuc3B0YWJsZSBoNDpob3ZlciB7XAogICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Om5vbmU7XAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAuc3B0YWJsZSB0ZCB7XAogICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Om5vbmU7XAogICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgJyk7CgogICAgICB9LAogICAgICBTb2xhcjogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIGlzUGxhbmV0SGFzV2F0ZXIgPSB0aGlzLmlzUGxhbmV0SGFzV2F0ZXIoKTsKICAgICAgICB2YXIgaXNQbGFuZXRIYXNQZW9wbGUgPSB0aGlzLmlzUGxhbmV0SGFzUGVvcGxlKCk7CiAgICAgICAgaWYgKGlzUGxhbmV0SGFzV2F0ZXIpIHsKICAgICAgICAgIHRoaXMuTWVyY3VyeSgpOwogICAgICAgICAgdGhpcy5WZW51cygpOwogICAgICAgICAgdGhpcy5NYXJzKCk7CiAgICAgICAgICB0aGlzLkVhcnRoKCk7CiAgICAgICAgICAvL3RoaXMuU2F0dXJuKCk7CiAgICAgICAgICB0aGlzLlBsdXRvKCk7Ly/moLflvI8KICAgICAgICB9IGVsc2UgaWYgKGlzUGxhbmV0SGFzUGVvcGxlKSB7CiAgICAgICAgICB0aGlzLkp1cGl0ZXIoKTsKICAgICAgICAgIHRoaXMuRWFydGgoKTsKICAgICAgICAgIC8vdGhpcy5TYXR1cm4oKTsKICAgICAgICAgIHRoaXMuUGx1dG8oKTsvL+agt+W8jwoKICAgICAgICAgIFVUSUxTLmFkZERvbU9iaignPHRyIGFsaWduPSJjZW50ZXIiIGNsYXNzPSJ0cjMgdF9vbmUiPjx0ZD48YSB0aXRsZT0i5LiL6L29Y2hyb21l5o+S5Lu2IiBocmVmPSJodHRwOi8vY2wuYWFjYy5pbi8iIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0icG9zdHRvZGF5IGhpZ2h0TGlnaHQgaGlnaHRMaWdodEZpcnN0IiBzdHlsZT0iYm9yZGVyLWJvdHRvbS13aWR0aDogMXB4OyBib3JkZXItYm90dG9tLXN0eWxlOiBkb3R0ZWQ7IGJvcmRlci1ib3R0b20tY29sb3I6IHJnYigyNTUsIDk5LCA3MSk7Ij5Ub2RheTwvYT48L3RkPlwKPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7cGFkZGluZy1sZWZ0OjhweCIgaWQ9IiI+IFwKPGgzPjxhIHN0eWxlPSJjb2xvcjpncmVlbjsiIGhyZWY9Imh0dHA6Ly9jbC5hYWNjLmluLyIgdGFyZ2V0PSJfYmxhbmsiIGlkPSIiPnJvc2UxOTg4Y+aOqOWHuuabtOW8uuWkp+eahENMMTAyNOiwt+atjOaPkuS7tu+8jOasoui/juS4i+i9vTwvYT48L2gzPiAgXAo8Zm9udCBjb2xvcj0iZ3JlZW4iPlvnqY3liIYrOTk5XTwvZm9udD48aSBzdHlsZT0iY29sb3I6cmVkIj5uZXc8L2k+PC90ZD5cCjx0ZCBjbGFzcz0idGFsIHktc3R5bGUiPjxhIGhyZWY9Imh0dHA6Ly9jbC5hYWNjLmluLyIgY2xhc3M9ImJsIj5yb3NlMTk4OGM8L2E+XAo8ZGl2IGNsYXNzPSJmMTAiPjIwMTUtMDktMDY8L2Rpdj48L3RkPlwKPHRkIGNsYXNzPSJ0YWwgZjEwIHktc3R5bGUiPk1hcmtUb3A8L3RkPlwKPHRkIGNsYXNzPSJ0YWwgeS1zdHlsZSI+PGEgaHJlZj0iaHR0cDovL2NsLmFhY2MuaW4vIiBjbGFzcz0iZjEwIj4gMjAxNS0wOS0wNiAxMTozOCA8L2E+PGJyPmJ5OiByb3NlMTk4OGM8L3RkPlwKPC90cj4nLCAkKCcudHIzOmZpcnN0JykpOwoKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgIH0KICAgIH07CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gSGVscGVyCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBob3Qga2V5CiAgICB2YXIgS0VZX0FTQ0xMID0gewogICAgICAvLyBTaGlmdCBrZXksIOKHpwogICAgICAn4oenJzogMTYsCiAgICAgICdzaGlmdCc6IDE2LAogICAgICAvLyBDVFJMIGtleSwgb24gTWFjOiDijIMKICAgICAgJ+KMgyc6IDE3LAogICAgICAnY3RybCc6IDE3LAogICAgICAvLyBBTFQga2V5LCBvbiBNYWM6IOKMpSAoQWx0KQogICAgICAn4oylJzogMTgsCiAgICAgICdhbHQnOiAxOCwKICAgICAgJ29wdGlvbic6IDE4LAogICAgICAvLyBNRVRBLCBvbiBNYWM6IOKMmCAoQ01EKSwgb24gV2luZG93cyAoV2luKSwgb24gTGludXggKFN1cGVyKQogICAgICAn4oyYJzogOTEsCiAgICAgICdtZXRhJzogOTEsCiAgICAgICdjbWQnOiA5MSwKICAgICAgJ3N1cGVyJzogOTEsCiAgICAgICd3aW4nOiA5MSwKICAgICAgLy8gQmFja3NwYWNlIGtleSwgb24gTWFjOiDijKsgKEJhY2tzcGFjZSkKICAgICAgJ+KMqyc6IDgsCiAgICAgICdiYWNrc3BhY2UnOiA4LAogICAgICAvLyBUYWIgS2V5LCBvbiBNYWM6IOKHpSAoVGFiKSwgb24gV2luZG93cyDih6Xih6UKICAgICAgJ+KHpSc6IDksCiAgICAgICfih4YnOiA5LAogICAgICAndGFiJzogOSwKICAgICAgLy8gUmV0dXJuIGtleSwg4oapCiAgICAgICfihqknOiAxMywKICAgICAgJ3JldHVybic6IDEzLAogICAgICAnZW50ZXInOiAxMywKICAgICAgJ+KMhSc6IDEzLAogICAgICAvLyBQYXVzZS9CcmVhayBrZXkKICAgICAgJ3BhdXNlJzogMTksCiAgICAgICdwYXVzZS1icmVhayc6IDE5LAogICAgICAvLyBDYXBzIExvY2sga2V5LCDih6oKICAgICAgJ+KHqic6IDIwLAogICAgICAnY2Fwcyc6IDIwLAogICAgICAnY2Fwcy1sb2NrJzogMjAsCiAgICAgIC8vIEVzY2FwZSBrZXksIG9uIE1hYzog4o6LLCBvbiBXaW5kb3dzOiBFc2MKICAgICAgJ+KOiyc6IDI3LAogICAgICAnZXNjYXBlJzogMjcsCiAgICAgICdlc2MnOiAyNywKICAgICAgLy8gU3BhY2Uga2V5CiAgICAgICdzcGFjZSc6IDMyLAogICAgICAvLyBQYWdlLVVwIGtleSwgb3IgcGd1cCwgb24gTWFjOiDihpYKICAgICAgJ+KGlic6IDMzLAogICAgICAncGd1cCc6IDMzLAogICAgICAncGFnZS11cCc6IDMzLAogICAgICAvLyBQYWdlLURvd24ga2V5LCBvciBwZ2Rvd24sIG9uIE1hYzog4oaYCiAgICAgICfihpgnOiAzNCwKICAgICAgJ3BnZG93bic6IDM0LAogICAgICAncGFnZS1kb3duJzogMzQsCiAgICAgIC8vIEVORCBrZXksIG9uIE1hYzog4oefCiAgICAgICfih58nOiAzNSwKICAgICAgJ2VuZCc6IDM1LAogICAgICAvLyBIT01FIGtleSwgb24gTWFjOiDih54KICAgICAgJ+KHnic6IDM2LAogICAgICAnaG9tZSc6IDM2LAogICAgICAvLyBJbnNlcnQga2V5LCBvciBpbnMKICAgICAgJ2lucyc6IDQ1LAogICAgICAnaW5zZXJ0JzogNDUsCiAgICAgIC8vIERlbGV0ZSBrZXksIG9uIE1hYzog4oyrIChEZWxldGUpCiAgICAgICdkZWwnOiA0NSwKICAgICAgJ2RlbGV0ZSc6IDQ1LAoKICAgICAgLy8gTGVmdCBBcnJvdyBLZXksIG9yIOKGkAogICAgICAn4oaQJzogMzcsCiAgICAgICdsZWZ0JzogMzcsCiAgICAgICdhcnJvdy1sZWZ0JzogMzcsCiAgICAgIC8vIFVwIEFycm93IEtleSwgb3Ig4oaRCiAgICAgICfihpEnOiAzOCwKICAgICAgJ3VwJzogMzgsCiAgICAgICdhcnJvdy11cCc6IDM4LAogICAgICAvLyBSaWdodCBBcnJvdyBLZXksIG9yIOKGkgogICAgICAn4oaSJzogMzksCiAgICAgICdyaWdodCc6IDM5LAogICAgICAnYXJyb3ctcmlnaHQnOiAzOSwKICAgICAgLy8gVXAgQXJyb3cgS2V5LCBvciDihpMKICAgICAgJ+KGkyc6IDQwLAogICAgICAnZG93bic6IDQwLAogICAgICAnYXJyb3ctZG93bic6IDQwLAoKICAgICAgLy8gb2RpdGllcywgcHJpbnRpbmcgY2hhcmFjdGVycyB0aGF0IGNvbWUgb3V0IHdyb25nOgogICAgICAvLyBOdW0tTXVsdGlwbHksIG9yICoKICAgICAgJyonOiAxMDYsCiAgICAgICdzdGFyJzogMTA2LAogICAgICAnYXN0ZXJpc2snOiAxMDYsCiAgICAgICdtdWx0aXBseSc6IDEwNiwKICAgICAgLy8gTnVtLVBsdXMgb3IgKwogICAgICAnKyc6IDEwNywKICAgICAgJ3BsdXMnOiAxMDcsCiAgICAgIC8vIE51bS1TdWJ0cmFjdCwgb3IgLQogICAgICAnLSc6IDEwOSwKICAgICAgJ3N1YnRyYWN0JzogMTA5LAogICAgICAvLyAnOyc6IDE4NiwgLy8/Pz8KICAgICAgLy8gPSBvciBlcXVhbHMKICAgICAgJz0nOiAxODcsCiAgICAgICdlcXVhbHMnOiAxODcsCiAgICAgIC8vIENvbW1hLCBvciAsCiAgICAgICcsJzogMTg4LAogICAgICAnY29tbWEnOiAxODgsCiAgICAgIC8vICctJzogMTg5LCAvLz8/PwogICAgICAvLyBQZXJpb2QsIG9yIC4sIG9yIGZ1bGwtc3RvcAogICAgICAnLic6IDE5MCwKICAgICAgJ3BlcmlvZCc6IDE5MCwKICAgICAgJ2Z1bGwtc3RvcCc6IDE5MCwKICAgICAgLy8gU2xhc2gsIG9yIC8sIG9yIGZvcndhcmQtc2xhc2gKICAgICAgJy8nOiAxOTEsCiAgICAgICdzbGFzaCc6IDE5MSwKICAgICAgJ2ZvcndhcmQtc2xhc2gnOiAxOTEsCiAgICAgIC8vIFRpY2ssIG9yIGAsIG9yIGJhY2stcXVvdGUKICAgICAgJ2AnOiAxOTIsCiAgICAgICd0aWNrJzogMTkyLAogICAgICAnYmFjay1xdW90ZSc6IDE5MiwKICAgICAgLy8gT3BlbiBicmFja2V0LCBvciBbCiAgICAgICdbJzogMjE5LAogICAgICAnb3Blbi1icmFja2V0JzogMjE5LAogICAgICAvLyBCYWNrIHNsYXNoLCBvciBcCiAgICAgICdcXCc6IDIyMCwKICAgICAgJ2JhY2stc2xhc2gnOiAyMjAsCiAgICAgIC8vIENsb3NlIGJhY2tldCwgb3IgXQogICAgICAnXSc6IDIyMSwKICAgICAgJ2Nsb3NlLWJyYWNrZXQnOiAyMjEsCiAgICAgIC8vIEFwb3N0cmFwaGUsIG9yIFF1b3RlLCBvciAnCiAgICAgICdcJyc6IDIyMiwKICAgICAgJ3F1b3RlJzogMjIyLAogICAgICAnYXBvc3RyYXBoZSc6IDIyMgogICAgfTsKCiAgICAvLyBUbyBtaW5pbWlzZSBjb2RlIGJsb2F0LCBhZGQgYWxsIG9mIHRoZSBOVU1QQUQgMC05IGtleXMgaW4gYSBsb29wCiAgICB2YXIgaSA9IDk1LAogICAgICAgIG4gPSAwOwogICAgd2hpbGUgKCsraSA8IDEwNikgewogICAgICBLRVlfQVNDTExbJ251bS0nICsgbl0gPSBpOwogICAgICArK247CiAgICB9CgogICAgLy8gVG8gbWluaW1pc2UgY29kZSBibG9hdCwgYWRkIGFsbCBvZiB0aGUgdG9wIHJvdyAwLTkga2V5cyBpbiBhIGxvb3AKICAgIHZhciBpID0gNDcsCiAgICAgICAgbiA9IDA7CiAgICB3aGlsZSAoKytpIDwgNTgpIHsKICAgICAgS0VZX0FTQ0xMW25dID0gaTsKICAgICAgKytuOwogICAgfQoKICAgIHZhciBpID0gMTExLAogICAgICAgIG4gPSAxOwogICAgd2hpbGUgKCsraSA8IDEzNikgewogICAgICBLRVlfQVNDTExbJ2YnICsgbl0gPSBpOwogICAgICArK247CiAgICB9CgogICAgdmFyIGkgPSA2NDsKICAgIHdoaWxlICgrK2kgPCA5MSkgewogICAgICBLRVlfQVNDTExbU3RyaW5nLmZyb21DaGFyQ29kZShpKS50b0xvd2VyQ2FzZSgpXSA9IGk7CiAgICB9CiAgICAvL2hvdGtleQoKICAgIHZhciBpbWdSZWFkeSA9IChmdW5jdGlvbigpIHsKICAgICAgdmFyIGxpc3QgPSBbXSwKICAgICAgICAgIGludGVydmFsSWQgPSBudWxsLAoKICAgICAgICAgIC8vIOeUqOadpeaJp+ihjOmYn+WIlwogICAgICAgICAgICB0aWNrID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgdmFyIGkgPSAwOwogICAgICAgICAgICAgIGZvciAoOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgbGlzdFtpXS5lbmQgPyBsaXN0LnNwbGljZShpLS0sIDEpIDogbGlzdFtpXSgpOwogICAgICAgICAgICAgIH0hbGlzdC5sZW5ndGggJiYgc3RvcCgpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8g5YGc5q2i5omA5pyJ5a6a5pe25Zmo6Zif5YiXCiAgICAgICAgICAgIHN0b3AgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTsKICAgICAgICAgICAgICBpbnRlcnZhbElkID0gbnVsbDsKICAgICAgICAgICAgfTsKCiAgICAgIHJldHVybiBmdW5jdGlvbih1cmwsIHJlYWR5LCBsb2FkLCBlcnJvcikgewogICAgICAgIHZhciBvbnJlYWR5LCB3aWR0aCwgaGVpZ2h0LCBuZXdXaWR0aCwgbmV3SGVpZ2h0LCBpbWcgPSBuZXcgSW1hZ2UoKTsKCiAgICAgICAgaW1nLnNyYyA9IHVybDsKCiAgICAgICAgLy8g5aaC5p6c5Zu+54mH6KKr57yT5a2Y77yM5YiZ55u05o6l6L+U5Zue57yT5a2Y5pWw5o2uCiAgICAgICAgaWYgKGltZy5jb21wbGV0ZSkgewogICAgICAgICAgcmVhZHkuY2FsbChpbWcpOwogICAgICAgICAgbG9hZCAmJiBsb2FkLmNhbGwoaW1nKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHdpZHRoID0gaW1nLndpZHRoOwogICAgICAgIGhlaWdodCA9IGltZy5oZWlnaHQ7CgogICAgICAgIC8vIOWKoOi9vemUmeivr+WQjueahOS6i+S7tgogICAgICAgIGltZy5vbmVycm9yID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICBlcnJvciAmJiBlcnJvci5jYWxsKGltZyk7CiAgICAgICAgICBvbnJlYWR5LmVuZCA9IHRydWU7CiAgICAgICAgICBpbWcgPSBpbWcub25sb2FkID0gaW1nLm9uZXJyb3IgPSBudWxsOwogICAgICAgIH07CgogICAgICAgIC8vIOWbvueJh+WwuuWvuOWwsee7qgogICAgICAgIG9ucmVhZHkgPSBmdW5jdGlvbigpIHsKICAgICAgICAgIG5ld1dpZHRoID0gaW1nLndpZHRoOwogICAgICAgICAgbmV3SGVpZ2h0ID0gaW1nLmhlaWdodDsKICAgICAgICAgIGlmIChuZXdXaWR0aCAhPT0gd2lkdGggfHwgbmV3SGVpZ2h0ICE9PSBoZWlnaHQgfHwKICAgICAgICAgIC8vIOWmguaenOWbvueJh+W3sue7j+WcqOWFtuS7luWcsOaWueWKoOi9veWPr+S9v+eUqOmdouenr+ajgOa1iwogICAgICAgICAgbmV3V2lkdGggKiBuZXdIZWlnaHQgPiAxMDI0KSB7CiAgICAgICAgICAgIHJlYWR5LmNhbGwoaW1nKTsKICAgICAgICAgICAgb25yZWFkeS5lbmQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgb25yZWFkeSgpOwoKICAgICAgICAvLyDlrozlhajliqDovb3lrozmr5XnmoTkuovku7YKICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAvLyBvbmxvYWTlnKjlrprml7blmajml7bpl7Tlt67ojIPlm7TlhoXlj6/og73mr5RvbnJlYWR55b+rCiAgICAgICAgICAvLyDov5nph4zov5vooYzmo4Dmn6Xlubbkv53or4FvbnJlYWR55LyY5YWI5omn6KGMCiAgICAgICAgICAhb25yZWFkeS5lbmQgJiYgb25yZWFkeSgpOwoKICAgICAgICAgIGxvYWQgJiYgbG9hZC5jYWxsKGltZyk7CgogICAgICAgICAgLy8gSUUgZ2lm5Yqo55S75Lya5b6q546v5omn6KGMb25sb2Fk77yM572u56m6b25sb2Fk5Y2z5Y+vCiAgICAgICAgICBpbWcgPSBpbWcub25sb2FkID0gaW1nLm9uZXJyb3IgPSBudWxsOwogICAgICAgIH07CgogICAgICAgIC8vIOWKoOWFpemYn+WIl+S4reWumuacn+aJp+ihjAogICAgICAgIGlmICghb25yZWFkeS5lbmQpIHsKICAgICAgICAgIGxpc3QucHVzaChvbnJlYWR5KTsKICAgICAgICAgIC8vIOaXoOiuuuS9leaXtuWPquWFgeiuuOWHuueOsOS4gOS4quWumuaXtuWZqO+8jOWHj+Wwkea1j+iniOWZqOaAp+iDveaNn+iAlwogICAgICAgICAgaWYgKGludGVydmFsSWQgPT09IG51bGwpIGludGVydmFsSWQgPSBzZXRJbnRlcnZhbCh0aWNrLCA0MCk7CiAgICAgICAgfQogICAgICB9OwogICAgfSkoKTsKCiAgICAvLyBVVElMUyBGdW5jCiAgICB2YXIgVVRJTFMgPSB7CiAgICAgIGFkZENzczogZnVuY3Rpb24oc3RyKSB7CiAgICAgICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IHN0cjsKICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTsKICAgICAgfSwKICAgICAgZ2V0U2NyaXB0OiBmdW5jdGlvbihzcmMpIHsKICAgICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICAgICAgc2NyaXB0LnNyYyA9IHNyYzsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7CiAgICAgIH0sCiAgICAgIGFkZFNjcmlwdDogZnVuY3Rpb24oanMpIHsKICAgICAgICB2YXIgb0hlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnSEVBRCcpWzBdLAogICAgICAgICAgICBvU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICAgICAgb1NjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7CiAgICAgICAgb1NjcmlwdC50ZXh0ID0ganM7CiAgICAgICAgb0hlYWQuYXBwZW5kQ2hpbGQob1NjcmlwdCk7CiAgICAgIH0sCiAgICAgIGFkZERvbTogZnVuY3Rpb24oaHRtbCwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgZGl2LmlubmVySFRNTCA9IGh0bWw7CiAgICAgICAgY2FsbGJhY2suY2FsbChkaXYsIGRpdik7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpOwogICAgICB9LAogICAgICBhZGREb21PYmo6IGZ1bmN0aW9uKGh0bWwsIG9iaikgewogICAgICAgIG9iai5iZWZvcmUoaHRtbCk7CiAgICAgIH0sCiAgICAgIHZhbGlkYXRlOiBmdW5jdGlvbih1cmwpIHsKICAgICAgICB2YXIgbWFnbmV0UGF0dGVybiA9IC9tYWduZXQ6XD94dD11cm46YnRpaDooW2EtekEtWjAtOV0rKS87CiAgICAgICAgaWYgKG1hZ25ldFBhdHRlcm4udGVzdCh1cmwpKSB7CiAgICAgICAgICByZXR1cm4gdXJsLm1hdGNoKG1hZ25ldFBhdHRlcm4pWzBdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdXJsOwogICAgICB9LAogICAgICBnZXRDb29raWU6IGZ1bmN0aW9uKGFlKSB7CiAgICAgICAgcmV0dXJuIChkb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCgnKF4nICsgYWUgKyAnfCAnICsgYWUgKyAnKT0oW147XSopJykpID09IG51bGwpID8gJycgOiBSZWdFeHAuJDIKICAgICAgfSwKICAgICAgcHJveHk6IGZ1bmN0aW9uKGZuKSB7CiAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgICAgIHNjcmlwdC50ZXh0Q29udGVudCA9ICcoJyArIGZuLnRvU3RyaW5nKCkgKyAnKSh3aW5kb3cpOyc7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgICB9LAogICAgICBpc0FycmF5OiBmdW5jdGlvbihvKSB7CiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5pbmRleE9mKCdBcnJheScpICE9PSAtMTsKICAgICAgfSwKICAgICAgYXJyYXlfcHJvdG90eXBlX2RlbDogZnVuY3Rpb24oYXJyYXksIG4pIHvjgIAgLy8gbuihqOekuuesrOWHoOmhue+8jOS7jjDlvIDlp4vnrpfotbfjgIIKICAgICAgICBpZiAobiA8IDApIHvjgIAgLy8g5aaC5p6cbjww77yM5YiZ5LiN6L+b6KGM5Lu75L2V5pON5L2c44CCCgogICAgICAgICAgcmV0dXJuIGFycmF5OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gYXJyYXkuc2xpY2UoMCwgbikuY29uY2F0KGFycmF5LnNsaWNlKG4gKyAxLCBhcnJheS5sZW5ndGgpKTsKICAgICAgICB9CiAgICAgICAgLyoKICAgICAqIGNvbmNhdOaWueazle+8mui/lOWbnuS4gOS4quaWsOaVsOe7hO+8jOi/meS4quaWsOaVsOe7hOaYr+eUseS4pOS4quaIluabtOWkmuaVsOe7hOe7hOWQiOiAjOaIkOeahOOAggogICAgICog6L+Z6YeM5bCx5piv6L+U5ZuedGhpcy5zbGljZSgwLG4pL3RoaXMuc2xpY2UobisxLHRoaXMubGVuZ3RoKQogICAgICog57uE5oiQ55qE5paw5pWw57uE77yM6L+Z5Lit6Ze077yM5Yia5aW95bCR5LqG56ysbumhueOAgiBzbGljZeaWueazle+8miDov5Tlm57kuIDkuKrmlbDnu4TnmoTkuIDmrrXvvIzkuKTkuKrlj4LmlbDvvIzliIbliKvmjIflrprlvIDlp4vlkoznu5PmnZ/nmoTkvY3nva7jgIIKICAgICAqLwogICAgICB9LAogICAgICBvbmx5bnVtOiBmdW5jdGlvbihpbnB1dCkgewogICAgICAgICQoJyMnICsgaW5wdXQpLmtleXVwKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICQodGhpcykudmFsKCQodGhpcykudmFsKCkucmVwbGFjZSgvW14wLTkpXSsvLCAnJykpOwogICAgICAgIH0pLmZvY3VzKGZ1bmN0aW9uKCkgewogICAgICAgICAgJCh0aGlzKS52YWwoJCh0aGlzKS52YWwoKS5yZXBsYWNlKC9bXjAtOV0rLywgJycpKTsKICAgICAgICB9KTsKICAgICAgfSwKICAgICAgZ2V0UXVlcnlTdHJpbmc6IGZ1bmN0aW9uKHVybCkgewogICAgICAgIHZhciB1cmwgPSB1cmwgfHwgbG9jYXRpb24uc2VhcmNoOwogICAgICAgIHZhciByZXN1bHQgPSB1cmwubWF0Y2gobmV3IFJlZ0V4cCgnW1w/XCZdW15cP1wmXSs9W15cP1wmXSsnLCAnZycpKTsKICAgICAgICBpZiAocmVzdWx0ID09IG51bGwpIHJldHVybiBuZXcgQXJyYXkoKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgcmVzdWx0W2ldID0gcmVzdWx0W2ldLnN1YnN0cmluZygxKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfSwKICAgICAgZ2V0UXVlcnlTdHJpbmdCeU5hbWU6IGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgICB2YXIgcmVzdWx0ID0gbG9jYXRpb24uc2VhcmNoLm1hdGNoKG5ldyBSZWdFeHAoJ1tcP1wmXScgKyBuYW1lICsgJz0oW15cJl0rKScsICdpJykpOwogICAgICAgIGlmIChyZXN1bHQgPT0gbnVsbCB8fCByZXN1bHQubGVuZ3RoIDwgMSkgewogICAgICAgICAgcmV0dXJuICcnOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0WzFdOwogICAgICB9LAogICAgICBnZXRRdWVyeVN0cmluZ0J5SW5kZXg6IGZ1bmN0aW9uKGluZGV4KSB7CiAgICAgICAgaWYgKGluZGV4ID09IG51bGwpIHsKICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9CiAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nTGlzdCA9IGdldFF1ZXJ5U3RyaW5nKCk7CiAgICAgICAgaWYgKGluZGV4ID49IHF1ZXJ5U3RyaW5nTGlzdC5sZW5ndGgpIHsKICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9CiAgICAgICAgdmFyIHJlc3VsdCA9IHF1ZXJ5U3RyaW5nTGlzdFtpbmRleF07CiAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSByZXN1bHQuaW5kZXhPZignPScpICsgMTsKICAgICAgICByZXN1bHQgPSByZXN1bHQuc3Vic3RyaW5nKHN0YXJ0SW5kZXgpOwogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0sCiAgICAgIGh0bWxfc2Nyb2xsVG9wX3RhcmdldDogZnVuY3Rpb24oKSB7CgogICAgICAgIHZhciB0YXJnZXQgPSBhcmd1bWVudHNbMF0gfHwgMDsKICAgICAgICB2YXIgdGltZXNldCA9IGFyZ3VtZW50c1sxXSB8fCA1MDA7CgogICAgICAgIGlmICh0YXJnZXQgPT0gJzAnKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiAodGFyZ2V0ID09ICd0b3AnKSB7CiAgICAgICAgICAkKCdodG1sLGJvZHknKS5hbmltYXRlKHsKICAgICAgICAgICAgc2Nyb2xsVG9wOiAwCiAgICAgICAgICB9LCB0aW1lc2V0KTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmICh0YXJnZXQubGVuZ3RoID4gMikgewogICAgICAgICAgdmFyICR0YXJnZXQgPSAkKCcjJyArIHRhcmdldCk7CiAgICAgICAgICBpZiAoJHRhcmdldC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHZhciB0YXJnZXRPZmZzZXQgPSAkdGFyZ2V0Lm9mZnNldCgpLnRvcDsKICAgICAgICAgICAgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7CiAgICAgICAgICAgICAgc2Nyb2xsVG9wOiB0YXJnZXRPZmZzZXQKICAgICAgICAgICAgfSwgdGltZXNldCk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9LAogICAgICAvKioKICAgICAgICoganPml7bpl7Tlr7nosaHnmoTmoLzlvI/ljJY7IHRoaXMgbmV3IERhdGEoKSBlZzpmb3JtYXQ9Inl5eXktTU0tZGQgaGg6bW06c3MiOwogICAgICAgKi8KICAgICAgZGF0YV9mb3JtYXQ6IGZ1bmN0aW9uKGRhdGEsIGZvcm1hdCkgewogICAgICAgIHZhciBvID0gewogICAgICAgICAgJ00rJzogZGF0YS5nZXRNb250aCgpICsgMSwKICAgICAgICAgIC8vIG1vbnRoCiAgICAgICAgICAnZCsnOiBkYXRhLmdldERhdGUoKSwKICAgICAgICAgIC8vIGRheQogICAgICAgICAgJ2grJzogZGF0YS5nZXRIb3VycygpLAogICAgICAgICAgLy8gaG91cgogICAgICAgICAgJ20rJzogZGF0YS5nZXRNaW51dGVzKCksCiAgICAgICAgICAvLyBtaW51dGUKICAgICAgICAgICdzKyc6IGRhdGEuZ2V0U2Vjb25kcygpLAogICAgICAgICAgLy8gc2Vjb25kCiAgICAgICAgICAncSsnOiBNYXRoLmZsb29yKChkYXRhLmdldE1vbnRoKCkgKyAzKSAvIDMpLAogICAgICAgICAgLy8gcXVhcnRlcgogICAgICAgICAgJ1MnOiBkYXRhLmdldE1pbGxpc2Vjb25kcygpIC8vIG1pbGxpc2Vjb25kCiAgICAgICAgfQogICAgICAgIGlmICgvKHkrKS8udGVzdChmb3JtYXQpKSB7CiAgICAgICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZShSZWdFeHAuJDEsIChkYXRhLmdldEZ1bGxZZWFyKCkgKyAnJykuc3Vic3RyKDQgLSBSZWdFeHAuJDEubGVuZ3RoKSk7CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGsgaW4gbykgewogICAgICAgICAgaWYgKG5ldyBSZWdFeHAoJygnICsgayArICcpJykudGVzdChmb3JtYXQpKSB7CiAgICAgICAgICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKFJlZ0V4cC4kMSwgUmVnRXhwLiQxLmxlbmd0aCA9PSAxID8gb1trXSA6ICgnMDAnICsgb1trXSkuc3Vic3RyKCgnJyArIG9ba10pLmxlbmd0aCkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZm9ybWF0OwogICAgICB9LAogICAgICBzaG9ydGN1dF9rZXlfanVtcDogZnVuY3Rpb24oaXNEb3duLCBjdXJyZW50Y2xhc3MpIHsKICAgICAgICB2YXIgY2xhc3NOYW1lID0gY3VycmVudGNsYXNzOwogICAgICAgIHZhciBjdXJyZW50ID0gJCgnLicgKyBjbGFzc05hbWUpLmZpcnN0KCksCiAgICAgICAgICAgIG5leHQgPSB1bmRlZmluZWQ7CiAgICAgICAgbmV4dCA9IGlzRG93biA/IGN1cnJlbnQubmV4dCgpLm5leHQoJy50MicpIDogY3VycmVudC5wcmV2KCkucHJldignLnQyJyk7CiAgICAgICAgaWYgKG5leHQgJiYgbmV4dC5sZW5ndGgpIHsKICAgICAgICAgIGN1cnJlbnQucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lKTsKICAgICAgICAgIG5leHQuYWRkQ2xhc3MoY2xhc3NOYW1lKTsKCiAgICAgICAgICAvLyB2YXIgbmV4dF9kaXYgPSBuZXh0WzBdOwogICAgICAgICAgVVRJTFMuaHRtbF9zY3JvbGxUb3BfdGFyZ2V0KG5leHQuYXR0cignaWQnKSwgMzAwKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgfQogICAgICB9LAogICAgICBzaG9ydGN1dF9rZXlfY3VycmVudDogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIF9jbGFzcyA9IGFyZ3VtZW50c1swXSB8fCAnLnQyJzsKICAgICAgICB2YXIgX3Njcm9sbFRvcCA9ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpOwogICAgICAgIGlmICgkKCcuY3VycmVudC1jb21tZW50JykubGVuZ3RoID4gMCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoX3Njcm9sbFRvcCA9PSAwKSB7CiAgICAgICAgICAkKF9jbGFzcykuZmlyc3QoKS5hZGRDbGFzcygnY3VycmVudC1jb21tZW50Jyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICQoX2NsYXNzKS5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBpZiAoJCh0aGlzKS5vZmZzZXQoKS50b3AgPiBfc2Nyb2xsVG9wICYmICQoJy5jdXJyZW50LWNvbW1lbnQnKS5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2N1cnJlbnQtY29tbWVudCcpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdjdXJyZW50LWNvbW1lbnQnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIC8v5aSq6Ziz57O76KGM5pif5bel5L2cCiAgICBQTEFORVRXT1JLLlNvbGFyKCk7CiAgfQoKfSkoKTsK"},{"name":"腾讯云","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["https://www.qcloud.com/act/campus"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":["https://www.qcloud.com/act/*"],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1492505332340},"enabled":false,"position":18,"uuid":"a69be74e-b246-4e31-ac84-e87bc29ad54a","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDohb7orq/kupEKLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vdGFtcGVybW9ua2V5Lm5ldC8KLy8gQHZlcnNpb24gICAgICAwLjEKLy8gQGRlc2NyaXB0aW9uICB0cnkgdG8gdGFrZSBvdmVyIHRoZSB3b3JsZCEKLy8gQGF1dGhvciAgICAgICBZb3UKLy8gQG1hdGNoICAgICAgICBodHRwczovL3d3dy5xY2xvdWQuY29tL2FjdC9jYW1wdXMKLy8gQGdyYW50ICAgICAgICBub25lCi8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uKCkgewogICAgdmFyIG15RGF0ZSA9IG5ldyBEYXRlKCk7CiAgICB2YXIgcmVmID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChteURhdGUuZ2V0SG91cnMoKT09MTIgJiYgbXlEYXRlLmdldE1pbnV0ZXMoKT09MCAmJiBteURhdGUuZ2V0U2Vjb25kcygpPT0wKSB7CiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICBjbGVhckludGVydmFsKHJlZik7CiAgICAgICAgfQogICAgICAgIG15RGF0ZSA9IG5ldyBEYXRlKCk7CiAgICB9LDEwMCk7CgogICAgdmFyIGJ0biA9ICQoJy5KX2FwcGxheUxpbWl0ZWRQYWNrYWdlJyk7CiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKGJ0bi50ZXh0KCkgIT0gIuacquW8gOWniyIpIHsKICAgICAgICAgICAgYnRuLmNsaWNrKCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfliKTmlq3miJDlip8nKTsKICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgIC8vIGJ0bi5jbGljaygpOwogICAgICAgICAgICBjb25zb2xlLmxvZygn5Yik5pat5aSx6LSlJyk7CiAgICAgICAgfQogICAgfSw1MDApOwp9KSgpOw=="},{"name":"apiv云播","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["https://btdigg.org/search*","http://btdigg.org/search*","http://www.mp4ba.com/*","http://*.jav*.*","https://*.jav*.*","http://*.torrent*.*/*","https://*.torrent*.*/*","http://*.bt*.*","https://*.bt*.*","http://*.cili*.*","https://*.cili*.*","http://torrentproject.*","https://torrentproject.*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-end","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1492505332344},"enabled":true,"position":19,"file_url":"https://sleazyfork.org/scripts/23759-apiv%E4%BA%91%E6%92%AD/code/apiv%E4%BA%91%E6%92%AD.user.js","uuid":"22c2c8bd-7333-45aa-8798-546f7bf1e432","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBhcGl25LqR5pKtCi8vIEBuYW1lc3BhY2UgICAgaHR0cDovL3RhbXBlcm1vbmtleS5uZXQvCi8vIEBpY29uICAgICAgICAgaHR0cDovL2FwaXYuZ2EvZmF2aWNvbi5pY28KLy8gQHZlcnNpb24gICAgICAxLjIKLy8gQGRlc2NyaXB0aW9uICDmib7lh7rpobXpnaLkuK3nmoTno4Hlipvpk77mjqXvvIzlubbmj5Dkvpvot7PovazliLBhcGl25LqR5pKt6aG16Z2iCi8vIEBhdXRob3IgICAgICAg5p6r5LiN5bmzCi8vIEBpbmNsdWRlICAgICAgaHR0cHM6Ly9idGRpZ2cub3JnL3NlYXJjaCoKLy8gQGluY2x1ZGUgICAgICBodHRwOi8vYnRkaWdnLm9yZy9zZWFyY2gqCi8vIEBpbmNsdWRlICAgICAgaHR0cDovL3d3dy5tcDRiYS5jb20vKgovLyBAaW5jbHVkZSAgICAgIGh0dHA6Ly8qLmphdiouKgovLyBAaW5jbHVkZSAgICAgIGh0dHBzOi8vKi5qYXYqLioKLy8gQGluY2x1ZGUgICAgICBodHRwOi8vKi50b3JyZW50Ki4qLyoKLy8gQGluY2x1ZGUgICAgICBodHRwczovLyoudG9ycmVudCouKi8qCi8vIEBpbmNsdWRlICAgICAgaHR0cDovLyouYnQqLioKLy8gQGluY2x1ZGUgICAgICBodHRwczovLyouYnQqLioKLy8gQGluY2x1ZGUgICAgICBodHRwOi8vKi5jaWxpKi4qCi8vIEBpbmNsdWRlICAgICAgaHR0cHM6Ly8qLmNpbGkqLioKLy8gQGluY2x1ZGUgICAgICBodHRwOi8vdG9ycmVudHByb2plY3QuKgovLyBAaW5jbHVkZSAgICAgIGh0dHBzOi8vdG9ycmVudHByb2plY3QuKgovLyBAcnVuLWF0ICAgICAgIGRvY3VtZW50LWVuZAovLyBAZ3JhbnQgICAgICAgIG5vbmUKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBmdW5jdGlvbiBnZXRBbGxNYWduZXQobm9kZXMpIHsKICAgICAgICB2YXIgc3R5RGl5ID0gJ3dpZHRoOjE2cHg7aGVpZ2h0OjE2cHg7YmFja2dyb3VuZC1pbWFnZTp1cmwoImh0dHBzOi8vYXBpdi5nYS9mYXZpY29uLmljbyIpO2JhY2tncm91bmQtc2l6ZToxNnB4IDE2cHg7ZGlzcGxheTogaW5saW5lLWJsb2NrJzsKICAgIAl2YXIgYW9iaiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgIAlhb2JqLnRhcmdldCA9ICdfYmxhbmsnOwogICAgCWFvYmouc3R5bGUuY3NzVGV4dCA9IHN0eURpeTsKICAgIAlmb3IodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoIDsgaSsrICl7CiAgICAgICAgICAgIHZhciBhZXhwID0gYW9iai5jbG9uZU5vZGUodHJ1ZSk7CiAgICAJCXZhciBtYWduZXQgPSBub2Rlc1tpXS5ocmVmLm1hdGNoKC9cd3s0MH0vLCdnJyk7CiAgICAJCWFleHAuaHJlZiA9ICdodHRwczovL2FwaXYuZ2EvbWFnbmV0LycgKyBtYWduZXQgKyAnLzAnOwogICAgCQlub2Rlc1tpXS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGFleHApOwogICAgCX0KICAgIH0KICAgIHZhciBjb3VudCA9IDA7CiAgICBmdW5jdGlvbiBpbml0KCkgewogICAgCXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgIAkJdmFyIG5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmXj0ibWFnbmV0Il0nKTsKICAgIAkJaWYoIG5vZGVzLmxlbmd0aCA+IDApewogICAgCQkJZ2V0QWxsTWFnbmV0KG5vZGVzKTsKICAgIAkJfWVsc2UgaWYoY291bnQgPCA1KXsKICAgIAkJCWluaXQoKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmYWlsJyk7CiAgICAgICAgICAgICAgICBjb3VudCsrOwogICAgCQl9CiAgICAJfSwyMDApOwogICAgfQogICAgd2luZG93Lm9ubG9hZCA9IGluaXQ7Cn0pKCk7"},{"name":"挊-随时开车","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http*://*"],"orig_matches":[],"orig_noframes":true,"orig_run_at":"document-end","use_blockers":[],"use_connects":["btso.pw","btdb.in"],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"enable_select_popup":"btrue","magnet":"s","search_index":"s0"},"ts":1502001592291},"enabled":false,"position":20,"file_url":"https://greasyfork.org/scripts/26779-%E6%8C%8A-%E9%9A%8F%E6%97%B6%E5%BC%80%E8%BD%A6/code/%E6%8C%8A-%E9%9A%8F%E6%97%B6%E5%BC%80%E8%BD%A6.user.js","uuid":"54b395dc-bb81-4e01-ba1b-fde5a72053c3","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIOaMii3pmo/ml7blvIDovaYKLy8gQG5hbWVzcGFjZSAgIOaSuAovLyBAZGVzY3JpcHRpb24g6Ieq5Yqo6I635Y+W56OB6ZO+5o6l5bm26Ieq5Yqo56a757q/5LiL6L29CgoKLy8gQGluY2x1ZGUgICAgIGh0dHAqOi8vKgoKLy8gQHZlcnNpb24gICAgIDEuMzYKLy8gQHJ1bi1hdCAgICAgIGRvY3VtZW50LWVuZAovLyBAZ3JhbnQgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgICAgIEdNX3NldENsaXBib2FyZAovLyBAZ3JhbnQgICAgICAgR01fc2V0VmFsdWUKLy8gQGdyYW50ICAgICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICAgICBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgICAgICAgdW5zYWZlV2luZG93Ci8vIEBncmFudCAgICAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kCi8vIEBub2ZyYW1lcwovLyA9PS9Vc2VyU2NyaXB0PT0KCmxldCBpX2FtX29sZF9kcml2ZXIgPSB7CiAgICBzdGFydDogZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuYWRkX2NzcygpOwogICAgICAgIHRoaXMuYWRkX3NtYWxsX2ljb24oKTsKICAgIH0sCiAgICBhZGRfY3NzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCF1bnNhZmVXaW5kb3cuYWRkX2Nzc19mbGFnKSB7CiAgICAgICAgICAgIHVuc2FmZVdpbmRvdy5hZGRfY3NzX2ZsYWcgPSB0cnVlOwogICAgICAgICAgICB2YXIgY3NzID0gJ1wKICAgICAgICAjbm9uZy1kcml2ZS1hbnl0aW1lLWljb257XAogICAgICAgICAgcG9zaXRpb246Zml4ZWQ7XAogICAgICAgICAgei1pbmRleDo2OTY5O1wKICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcCiAgICAgICAgICBib3JkZXItcmFkaXVzOiAzMnB4O1wKICAgICAgICAgIHdpZHRoOiAzMnB4O1wKICAgICAgICAgIGhlaWdodDogMzJweDtcCiAgICAgICAgICBsZWZ0OiAxMHB4O1wKICAgICAgICAgIGJvdHRvbTogMTVweDtcCiAgICAgICAgICBvcGFjaXR5OjAuMTtcCiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XAogICAgICAgICAgbGluZS1oZWlnaHQ6IDMycHg7XAogICAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOiBvcGFjaXR5IDAuNnMgZWFzZS1pbi1vdXQ7XAogICAgICAgICAgLW1vei10cmFuc2l0aW9uOiBvcGFjaXR5IDFzIGVhc2UtaW4tb3V0O1wKICAgICAgICAgIC1vLXRyYW5zaXRpb246IG9wYWNpdHkgMXMgZWFzZS1pbi1vdXQ7XAogICAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAxcyBlYXNlLWluLW91dDtcCiAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQ0FBQUFBZ0NBWUFBQUJ6ZW5yMEFcCiAgICAgICAgICBBQUFCR2RCVFVFQUFMR1BDL3hoQlFBQUFDQmpTRkpOQUFCNkpnQUFnSVFBQVBvQUFBQ0E2QUFBZFRBQUFPcGdBQUE2bUFBQUYzQ2N1bEU4QUFBQUJtSkxSMFFcCiAgICAgICAgICBBL3dEL0FQK2d2YWVUQUFBQUIzUkpUVVVIM2d3S0VCbzZKS3BhZ3dBQUEvbEpSRUZVV01QdGxrMW9YRlVVZ0wvejNwczNtVWxtSm1saTBpWjI2RTlLU0F1V3FcCiAgICAgICAgICB0U2RRa1FvS0tJVVhmaTNLbGhVa0pLZGFFUkV1ckhGalR0dGNhSFVnaUQrb0pDZHRJcTAxa3BCUzVNbXR2a2g2Y3drbWM1ZmtqZHpqNHVYS2Mxa3BwT09FUVFcCiAgICAgICAgICA5cTN2Zk8vZWU3NTV6N2prWC91c2k5UlFlZSs3UXVqWWEvdXlqalFXb1lyZ1ppQUVPb0VBR1NLK01Hd2FwQ2xCaGZBZndJakFBZEFNdVlJQWtjQUU0Q1p3SGlcCiAgICAgICAgICBvMUFyQUU0OE5KaGpER1lVc2tWa1VQQUVhQVhWVlRWWDZHQUNDTENDc2dwNEYzZ3h0MUNPSlhHQVd6YmRrWGtiVk1xSFVFMWhHVVJqTFlSYnQ5TXNMVWRMNThcCiAgICAgICAgICBsbjV4aGFTR0pLWG9kaUx3R2JBZGVCcVlhRGtFWkFIZ0ZlRitOQ1ZuQkVEMzdIK1dlM1EvZ3RzUVF4d0ZqOEFvNTB0ZEhtRGp6SGZuRU5QamUrQVI0RmNpdDFcCiAgICAgICAgICB3dDJGZU03Z1E5UjdYTERMZlFkZUlhdSt4OG1FSTRnbG9XSUlKYUZIUXpSMG5rdjBhMDd5RXovaVpkTmcwZ2ZjQkc0RERCMjZVSmRBS3ZLdHhlQVhpeUwrUDVcCiAgICAgICAgICBIMk5KL0g2NWxRTTFxTFZWVURTMmI0MndmZUJvbjNBS3FJZUF3RUZsdkNDb0Jtb0VCVkdtS3hPanEzK3VmbGhJQktWYTlNbW9NMGZndUl0M2IvQ1NGZlVDOFVcCiAgICAgICAgICBZQVkwSzJxaE5zN0NVWmk1VTF4eE5TRXNKMEFzZmd1eExJQW9rQlBvd0FPNENJUWltMUNiR2YxejFvUUlqUzFkaUMyWGQ2ajRSQW9ZRkR3OGpuVW1EVUxxa0lcCiAgICAgICAgICBvZUlVYytQb0dXR3dVSUFNa0VTR1htcVZZeUpXdjF4MGhqQ21TbWJ5S0taVUE4c0Jzb3dCcDRJS0lVRmlZWTM1aURLblJMbTVCaUZCSTNTQTljYlZjR2NlQmFcCiAgICAgICAgICAzOG5CQ2VCcENsNmpKOGRKak03V1U2dU5SS3dnTVUwMTMvNG1xVjBDa1FNOERHUWFCUUEvTVp5Q2hGeWlSbCsvL1p6VW1PWE1hWGlyU0lrWXFHcVpKTXpqSDVcCiAgICAgICAgICAvbXJtUlMzNG80R3pDY1UvdkxtUjVaK3JLdWdCcWxlSk80QVR3dUtyaWhwdUpib25URnQ5SlUrc21pb1U4QzVQakxFeU9zNWllQjJBcG4yTlBZdnFyTjViU25cCiAgICAgICAgICA0cklOOGJQQlhwK090Y1FBUGgzK1QzZ1dWUkRxdXFmM3JKQmpaOXdma2RVQTJmMkphZm1ubC9LUE5sUnlDK3E2Z2Y0M2JGUUQ4SytmVEw2MjNsNjl6NVlubWFcCiAgICAgICAgICBBWWVBaUltMGlFZ1ZzL01KVUZKR01pUHdCSEUySVBYUkNzOWxvTVBpRUlpSGpMVDhFQklBZmdlTGcxaDZPVDA3WDkwQU5UNEJmV09JclhvbmczL05aNEJwb1lcCiAgICAgICAgICBrL0pZMmh4TG16Z1RWUUh2VnpXOVRLWlpWU1AxZlBFSGQrRVZVQ3F5dEZDaW0zR0F3Z0JiNkU2V016blhPL216V1d0QTFIM1VicGVtVC80Vkhub1E4QmdNWmVcCiAgICAgICAgICB0QzJIZG5abmEwdmJGbCtWaFljWFlNYWU1WlRrUWpibGlXWVBBRUJDdVhMZGhBTFVobXBjRDBhZ3JsblVRMVRWZGNrTUJha0FjZDhMaGtVQWsrbnJxMTE5R0tcCiAgICAgICAgICAvVTNMQWNxNWJhY0NBTTlzYjcrMGVTNW45WExabGJsd0Q4R1VBRlJ6VVAveTc5RC9nS3RlYW82TS9BTVp3QUFBQ1YwUlZoMFpHRjBaVHBqY21WaGRHVUFNakFcCiAgICAgICAgICB4Tmkwd09TMHhOMVF4TlRveU1Ub3lOaXN3T0Rvd01IOWJNWllBQUFBbGRFVllkR1JoZEdVNmJXOWthV1o1QURJd01UUXRNVEl0TVRCVU1UWTZNalk2TlRnck1cCiAgICAgICAgICBEZzZNREFYMHgxR0FBQUFUWFJGV0hSemIyWjBkMkZ5WlFCSmJXRm5aVTFoWjJsamF5QTNMakF1TVMwMklGRXhOaUI0T0RaZk5qUWdNakF4Tmkwd09TMHhOeUJcCiAgICAgICAgICBvZEhSd09pOHZkM2QzTG1sdFlXZGxiV0ZuYVdOckxtOXlaOTNacFU0QUFBQVlkRVZZZEZSb2RXMWlPanBFYjJOMWJXVnVkRG82VUdGblpYTUFNYWYvdXk4QUFcCiAgICAgICAgICBBQVlkRVZZZEZSb2RXMWlPanBKYldGblpUbzZTR1ZwWjJoMEFERXlPRU44UVlBQUFBQVhkRVZZZEZSb2RXMWlPanBKYldGblpUbzZWMmxrZEdnQU1USTQwSTBcCiAgICAgICAgICBSM1FBQUFCbDBSVmgwVkdoMWJXSTZPazFwYldWMGVYQmxBR2x0WVdkbEwzQnVaeit5Vms0QUFBQVhkRVZZZEZSb2RXMWlPanBOVkdsdFpRQXhOREU0TWpBd01cCiAgICAgICAgICBERTRpYlFCWkFBQUFCSjBSVmgwVkdoMWJXSTZPbE5wZW1VQU1pNHpNMHRDU1Y4NC9nQUFBRjkwUlZoMFZHaDFiV0k2T2xWU1NRQm1hV3hsT2k4dkwyaHZiV1VcCiAgICAgICAgICB2ZDNkM2NtOXZkQzl6YVhSbEwzZDNkeTVsWVhONWFXTnZiaTV1WlhRdlkyUnVMV2x0Wnk1bFlYTjVhV052Ymk1amJpOXpjbU12TVRFNE1qRXZNVEU0TWpFNU1cCiAgICAgICAgICBTNXdibWQ4ZkRRbkFBQUFBRWxGVGtTdVFtQ0MiKTtcCiAgICAgICAgfVwKICAgICAgICAjbm9uZy1kcml2ZS1hbnl0aW1lLWRpYWxvZ3tcCiAgICAgICAgICBwb3NpdGlvbjpmaXhlZDtcCiAgICAgICAgICBsZWZ0OjglO1wKICAgICAgICAgIHRvcDoxMCU7XAogICAgICAgICAgei1pbmRleDo2OTY5OTtcCiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHggOHB4O1wKICAgICAgICAgIHBhZGRpbmctdG9wOiAxMHB4O1wKICAgICAgICAgIHBhZGRpbmctbGVmdDoxMHB4O1wKICAgICAgICAgIHBhZGRpbmctcmlnaHQ6MTBweDtcCiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDIzNywgMjM3LCAyMzcsIDAuOCk7XAogICAgICAgIH1cCiAgICAgICAgI25vbmctZHJpdmUtYW55dGltZS1kaWFsb2c+c3BhbntcCiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA0MHB4O1wKICAgICAgICB9XAogICAgICAgICNub25nLWRyaXZlLWFueXRpbWUtZGlhbG9nICNub25nLW1vdmV7XAogICAgICAgICAgICB3aWR0aDogMTZweDtcCiAgICAgICAgICAgIGhlaWdodDogMTZweDtcCiAgICAgICAgICAgIGRpc3BsYXk6bm9uZTtcCiAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiZGF0YTppbWFnZS9wbmc7YmFcCiAgICAgICAgc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQkFBQUFBUUNBUUFBQUMxK2pmcUFBQUFCR2RCVFVFQUFMR1BDL3hoQlFBQUFDQmpTRkpOQUFCNkpnQUFnSVFcCiAgICAgICAgQUFQb0FBQUNBNkFBQWRUQUFBT3BnQUFBNm1BQUFGM0NjdWxFOEFBQUFBbUpMUjBRQS80ZVB6TDhBQUFBSGRFbE5SUWZlQ2hvTElpd0l5NzJIQUFBQTNFbEVRVlFcCiAgICAgICAgb3ozWFJzVXJEWUJRRjRDOU5WbkZSQjhmaUxGaEVjSkFPSFJKdzZGQXBkTEJ2NEVQNEFuMFFRZXlhdFpNZHNqaW9rK0RpQTdqRUpjU2hhWnMwZW9iL0hnNkgrOTlcCiAgICAgICAgN2JxaUpxVk12L2tWaWFTbXVTMkdOOTExNzl1cE03ck50Q0p5YjIvUHR5WW4zM2VaQlZTY21UYVZUTlIrMTVobnBydzJKb2F5U0MwWEZNa01Ka1Z0M0hseTRST0VcCiAgICAgICAgS2dSQ0ZML2NPSTVRby8zZzNpTTEwS3o0MnJsalhURXlFVks3blkyZnRucm5GeXNCaXMrWVdqNnRQNmtIZCtIR3NsQnQ0Vzg5UWovckFWTWUrZ1d3YmRSTngrMWhcCiAgICAgICAgUnc1QTZRbHFYZmdGdU96U1ZhbFJvYWdBQUFDVjBSVmgwWkdGMFpUcGpjbVZoZEdVQU1qQXhOaTB3T1MweE4xUXhOVG95TVRveE55c3dPRG93TUZlalBjRUFBQUFcCiAgICAgICAgbGRFVllkR1JoZEdVNmJXOWthV1o1QURJd01UUXRNVEF0TWpaVU1URTZNelE2TkRRck1EZzZNRERRYmtxWUFBQUFUWFJGV0hSemIyWjBkMkZ5WlFCSmJXRm5aVTFcCiAgICAgICAgaFoybGpheUEzTGpBdU1TMDJJRkV4TmlCNE9EWmZOalFnTWpBeE5pMHdPUzB4TnlCb2RIUndPaTh2ZDNkM0xtbHRZV2RsYldGbmFXTnJMbTl5WjkzWnBVNEFBQUFcCiAgICAgICAgWWRFVllkRlJvZFcxaU9qcEViMk4xYldWdWREbzZVR0ZuWlhNQU1hZi91eThBQUFBWWRFVllkRlJvZFcxaU9qcEpiV0ZuWlRvNlNHVnBaMmgwQURVeE1vK05VNEVcCiAgICAgICAgQUFBQVhkRVZZZEZSb2RXMWlPanBKYldGblpUbzZWMmxrZEdnQU5URXlISHdEM0FBQUFCbDBSVmgwVkdoMWJXSTZPazFwYldWMGVYQmxBR2x0WVdkbEwzQnVaeitcCiAgICAgICAgeVZrNEFBQUFYZEVWWWRGUm9kVzFpT2pwTlZHbHRaUUF4TkRFME1qazBORGcwRXh2QmlBQUFBQkowUlZoMFZHaDFiV0k2T2xOcGVtVUFNVFV1TWt0Q2Uwb0p0Z0FcCiAgICAgICAgQUFGOTBSVmgwVkdoMWJXSTZPbFZTU1FCbWFXeGxPaTh2TDJodmJXVXZkM2QzY205dmRDOXphWFJsTDNkM2R5NWxZWE41YVdOdmJpNXVaWFF2WTJSdUxXbHRaeTVcCiAgICAgICAgbFlYTjVhV052Ymk1amJpOXpjbU12TVRFM056UXZNVEUzTnpRM05pNXdibWY4TTNtMkFBQUFBRWxGVGtTdVFtQ0MiXCk7XAogICAgICAgICAgICBkaXNwbGF5OiBub25lO1wKICAgICAgICAgICAgZmxvYXQ6IHJpZ2h0O29wYWNpdHk6IDAuNDtcCiAgICAgICAgICAgIGN1cnNvcjpwb2ludGVyO1wKICAgICAgICB9XAogICAgICAgICNub25nLWRyaXZlLWFueXRpbWUtZGlhbG9nPmJ1dHRvbntcCiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxMnB4O1wKICAgICAgICB9XAogICAgICAgICNub25nLWRyaXZlLWFueXRpbWUtZGlhbG9nID4gdGFibGV7XAogICAgICAgICAgICBcCiAgICAgICAgfVwKICAgICAgICAjbm9uZy10YWJsZS13cmFwcGVyIHtcCiAgICAgICAgICBvdmVyZmxvdy14OiBoaWRkZW47XAogICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcCiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XAogICAgICAgICAgbWF4LWhlaWdodDogMzBlbTtcCiAgICAgICAgfVwKICAgICAgICAjbm9uZy1kcml2ZS1hbnl0aW1lLWljb246aG92ZXJ7XAogICAgICAgICAgICBvcGFjaXR5OjE7XAogICAgICAgIH1cCiAgICAgICAgJzsKICAgICAgICAgICAgR01fYWRkU3R5bGUoY3NzKTsKICAgICAgICB9CiAgICB9LAogICAgc2VsZWN0aW9uOiAiIiwKICAgIGFkZF9zbWFsbF9pY29uOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgbGV0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICBpY29uLnNldEF0dHJpYnV0ZSgiaWQiLCAibm9uZy1kcml2ZS1hbnl0aW1lLWljb24iKTsKICAgICAgICBpY29uLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsIChlKSA9PiB7CiAgICAgICAgICAgIGxldCB0ZXh0ID0gdW5zYWZlV2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygi6YCJ5Lit55qE5paH5pysOiIsIHRleHQpOwogICAgICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IHRleHQ7CiAgICAgICAgfSk7CiAgICAgICAgaWNvbi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIChlKSA9PiB7CiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbiA9PT0gIiIpIHsKICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uID0gdW5zYWZlV2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5kaXNwbGF5X2RpYWxvZygpOwogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWNvbik7CiAgICB9LAogICAgZGlzcGxheV9kaWFsb2c6IGZ1bmN0aW9uICgpIHsKICAgICAgICBsZXQgZGlhbG9nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgZGlhbG9nLnNldEF0dHJpYnV0ZSgiaWQiLCAibm9uZy1kcml2ZS1hbnl0aW1lLWRpYWxvZyIpOwogICAgICAgIGRpYWxvZy5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIChldmVudCkgPT4gewogICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB9KTsKICAgICAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gIueVquWPt++8miI7CiAgICAgICAgZGlhbG9nLmFwcGVuZENoaWxkKHNwYW4pOwogICAgICAgIGxldCB2aWRfaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwogICAgICAgIHZpZF9pbnB1dC52YWx1ZSA9IHRoaXMuc2VsZWN0aW9uOwogICAgICAgIHZpZF9pbnB1dC5hZGRFdmVudExpc3RlbmVyKCJrZXlwcmVzcyIsIChlKSA9PiB7CiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gIkVudGVyIikgewogICAgICAgICAgICAgICAgZS50YXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nLmNsaWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBkaWFsb2cuYXBwZW5kQ2hpbGQodmlkX2lucHV0KTsKCiAgICAgICAgbGV0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwogICAgICAgIGJ0bi50ZXh0Q29udGVudCA9ICLnoa7lrpoiOwogICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIChlKSA9PiB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uID0gdmlkX2lucHV0LnZhbHVlOwogICAgICAgICAgICBkaXNwbGF5X3RhYmxlKHRoaXMuc2VsZWN0aW9uLCBudWxsKTsKICAgICAgICB9KTsKICAgICAgICBkaWFsb2cuYXBwZW5kQ2hpbGQoYnRuKTsKCiAgICAgICAgbGV0IG1vdmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCiAgICAgICAgbW92ZS5zZXRBdHRyaWJ1dGUoImlkIiwgIm5vbmctbW92ZSIpOwogICAgICAgIG1vdmUuc2V0QXR0cmlidXRlKCJkcmFnZ2FibGUiLCJ0cnVlIik7CiAgICAgICAgewogICAgICAgICAgICBsZXQgaXNtb3ZpbmcgPSBmYWxzZTsKICAgICAgICAgICAgLy8gbW92ZS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLChlKT0+ewogICAgICAgICAgICAvLyAgICAgaXNtb3ZpbmcgPSB0cnVlOwogICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coImRvd24iKTsKICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgIG1vdmUuYWRkRXZlbnRMaXN0ZW5lcigiZHJhZ3N0YXJ0IiwoZSk9PnsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJkcmFnIixlKTsKICAgICAgICAgICAgICAgIGRpYWxvZy5zdHlsZS5sZWZ0ID0gKGRpYWxvZy5vZmZzZXRMZWZ0K2UubW92ZW1lbnRYKSsicHgiOwogICAgICAgICAgICAgICAgZGlhbG9nLnN0eWxlLnRvcCA9IChkaWFsb2cub2Zmc2V0VG9wK2UubW92ZW1lbnRZKSsicHgiOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy8gbW92ZS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIiwoZSk9PnsKICAgICAgICAgICAgLy8gICAgIGlzbW92aW5nID1mYWxzZTsKICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCJ1cCIpCiAgICAgICAgICAgIC8vIH0pOwoKICAgICAgICB9CgoKICAgICAgICBkaWFsb2cuYXBwZW5kQ2hpbGQobW92ZSk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaWFsb2cpOwoKICAgICAgICBkaXNwbGF5X3RhYmxlKHRoaXMuc2VsZWN0aW9uLCBmdW5jdGlvbiAodGFiKSB7CgogICAgICAgICAgICBsZXQgb3V0ZXJfdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0YWJsZSIpOwogICAgICAgICAgICBvdXRlcl90YWJsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpKTsKICAgICAgICAgICAgb3V0ZXJfdGFibGUubGFzdENoaWxkLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRoIikpOwogICAgICAgICAgICBvdXRlcl90YWJsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpKTsKICAgICAgICAgICAgb3V0ZXJfdGFibGUubGFzdENoaWxkLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIikpOwogICAgICAgICAgICBsZXQgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICB3cmFwcGVyLmlkID0gIm5vbmctdGFibGUtd3JhcHBlciI7CiAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQodGFiKTsKICAgICAgICAgICAgb3V0ZXJfdGFibGUucXVlcnlTZWxlY3RvcigidGQiKS5hcHBlbmRDaGlsZCh3cmFwcGVyKTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI25vbmctZHJpdmUtYW55dGltZS1kaWFsb2ciKS5hcHBlbmRDaGlsZChvdXRlcl90YWJsZSk7CgogICAgICAgIH0pOwogICAgfSwKfTsKbGV0IG1haW4gPSB7CiAgICBiYWlkdTogewogICAgICAgIHR5cGU6IDEsCiAgICAgICAgcmU6IC9wYW5cLmJhaWR1XC5jb21cL2Rpc2tcL2hvbWUvLAogICAgICAgIGZpbGxfZm9ybTogZnVuY3Rpb24gKG1hZ25ldCkgewogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuZy1idXR0b25bZGF0YS1idXR0b24taWQ9YjEzXSIpLmNsaWNrKCk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI19kaXNrX2lkXzIiKS5jbGljaygpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NoYXJlLW9mZmxpbmUtbGluayIpLnZhbHVlID0gbWFnbmV0OwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5nLWJ1dHRvbltkYXRhLWJ1dHRvbi1pZD1iNjVdIikuY2xpY2soKTsKICAgICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgIH0sIDE1MDApOwogICAgICAgIH0KICAgIH0sCiAgICAxMTU6IHsKICAgICAgICB0eXBlOiAxLAogICAgICAgIHJlOiAvMTE1XC5jb21cL1w/dGFiXD1vZmZsaW5lXCZtb2RlXD13YW5ncGFuLywKICAgICAgICBmaWxsX2Zvcm06IGZ1bmN0aW9uIChsaW5rKSB7CiAgICAgICAgICAgIGxldCByc2MgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PSAiY29tcGxldGUiKSB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChyc2MpOwogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBDb3JlWyJPRkZMNVBsdWciXS5PcGVuTGluaygpOwogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoIiNqc19vZmZsaW5lX25ld19hZGQiKS52YWwobGluayk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIDQwMCk7CiAgICAgICAgfQogICAgfSwKICAgIGZ1cms6IHsKICAgICAgICB0eXBlOiAxLAogICAgICAgIHJlOiAvd3d3XC5mdXJrXC5uZXRcL3VzZXJzXC9maWxlc1wvYWRkLywKICAgICAgICBmaWxsX2Zvcm06IGZ1bmN0aW9uIChsaW5rKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgJCgiI3VybCIpLnZhbChsaW5rLnJlcGxhY2UoIm1hZ25ldDo/eHQ9dXJuOmJ0aWg6IiwgIiIpKTsKICAgICAgICAgICAgfSwgMTUwMCk7CiAgICAgICAgfQogICAgfQp9OwoKbGV0IG9mZmxpbmVfc2l0ZXMgPSB7CiAgICBiYWlkdTogewogICAgICAgIHVybDogImh0dHA6Ly9wYW4uYmFpZHUuY29tL2Rpc2svaG9tZSIsCiAgICAgICAgbmFtZTogIueZvuW6puS6kSIsCiAgICAgICAgZW5hYmxlOiB0cnVlCiAgICB9LAogICAgMTE1OiB7CiAgICAgICAgbmFtZTogIjExNeemu+e6vyIsCiAgICAgICAgdXJsOiAiaHR0cDovLzExNS5jb20vP3RhYj1vZmZsaW5lJm1vZGU9d2FuZ3BhbiIsCiAgICAgICAgZW5hYmxlOiB0cnVlLAogICAgfSwKICAgIGxldHY6IHsKICAgICAgICBuYW1lOiAi5LmQ6KeG5LqRIiwKICAgICAgICB1cmw6ICJodHRwOi8vY2xvdWQubGV0di5jb20vd2ViZGlzay9ob21lL2luZGV4IiwKICAgICAgICBlbmFibGU6IGZhbHNlCiAgICB9LAogICAgMzYwOiB7CiAgICAgICAgbmFtZTogIjM2MOS6kSIsCiAgICAgICAgdXJsOiAiaHR0cDovL3l1bnBhbi4zNjAuY24vbXkvIiwKICAgICAgICBlbmFibGU6IGZhbHNlCiAgICB9LAogICAgdWM6IHsKICAgICAgICBuYW1lOiAiVUPnprvnur8iLAogICAgICAgIHVybDogImh0dHA6Ly9kaXNrLnl1bi51Yy5jbi8iLAogICAgICAgIGVuYWJsZTogZmFsc2UKICAgIH0sCiAgICBmdXJrOiB7CiAgICAgICAgbmFtZTogIkZ1cmsiLAogICAgICAgIHVybDogImh0dHBzOi8vd3d3LmZ1cmsubmV0L3VzZXJzL2ZpbGVzL2FkZCIsCiAgICAgICAgZW5hYmxlOiB0cnVlCiAgICB9LAp9OwpsZXQgY29tbW9uID0gewogICAgYWRkX3N0eWxlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgR01fYWRkU3R5bGUoWwogICAgICAgICAgICAiI25vbmctdGFibGV7Ym9yZGVyLWNvbGxhcHNlOiBpbml0aWFsICFpbXBvcnRhbnQ7YmFja2dyb3VuZC1jb2xvcjogd2hpdGUgIWltcG9ydGFudDt0ZXh0LWFsaWduOiBjZW50ZXIgIWltcG9ydGFudDttYXJnaW46MTBweCBhdXRvO2NvbG9yOiM2NjYgIWltcG9ydGFudDtmb250LXNpemU6MTNweDt0ZXh0LWFsaWduOmNlbnRlciAhaW1wb3J0YW50O2JvcmRlcjogMXB4IHNvbGlkICNjZmNmY2YgIWltcG9ydGFudDtib3JkZXItcmFkaXVzOiAxMHB4ICFpbXBvcnRhbnQ7fSIsCiAgICAgICAgICAgICIjbm9uZy10YWJsZSBhIHttYXJnaW4tcmlnaHQ6IDVweCAhaW1wb3J0YW50O2NvbG9yOmJsdWV9IiwKICAgICAgICAgICAgIiNub25nLXRhYmxlIGE6aG92ZXIge2NvbG9yOiNkMjBmMDAgIWltcG9ydGFudDt9IiwKICAgICAgICAgICAgIiNub25nLXRhYmxlIHRoLCNub25nLXRhYmxlIHRke3RleHQtYWxpZ246IGluaGVyaXQgIWltcG9ydGFudDtoZWlnaHQ6MzBweDtwYWRkaW5nOjAgMWVtIDAgIWltcG9ydGFudDt9IiwKICAgICAgICAgICAgIi5ub25nLXJvd3t0ZXh0LWFsaWduOiBpbmhlcml0ICFpbXBvcnRhbnQ7aGVpZ2h0OjMwcHg7cGFkZGluZzowIDFlbSAwICFpbXBvcnRhbnQ7Ym9yZGVyOiAxcHggc29saWQgI0VGRUZFRiAhaW1wb3J0YW50O30iLAogICAgICAgICAgICAiLm5vbmctcm93OmhvdmVye2JhY2tncm91bmQtY29sb3I6ICNkYWU4ZmYgIWltcG9ydGFudDt9IiwKICAgICAgICAgICAgIi5ub25nLW9mZmxpbmUtZG93bmxvYWR7Y29sb3I6IHJnYigwLCAxODAsIDMwKSAhaW1wb3J0YW50O30iLAogICAgICAgICAgICAiLm5vbmctb2ZmbGluZS1kb3dubG9hZDpob3Zlcntjb2xvcjpyZWQgIWltcG9ydGFudDt9IiwKICAgICAgICBdLmpvaW4oIiIpKTsKICAgIH0sCiAgICBoYW5kbGVfY29weV9ldmVudDogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgZXZlbnQudGFyZ2V0LmlubmVySFRNTCA9ICLmiJDlip8iOwogICAgICAgIEdNX3NldENsaXBib2FyZChldmVudC50YXJnZXQuaHJlZik7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5pbm5lckhUTUwgPSAi5aSN5Yi2IjsKICAgICAgICB9LCAxMDAwKTsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvL+mYu+atoui3s+i9rAogICAgfSwKICAgIGhhbmRsZV9kbF9ldmVudDogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgbGV0IG1hZyA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoIm1hZyIpOwogICAgICAgIEdNX3NldFZhbHVlKCJtYWduZXQiLCBtYWcpOwogICAgfSwKICAgIGhhbmRsZV9jbG9zZV9ldmVudDogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgbGV0IGRpYWxvZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNub25nLWRyaXZlLWFueXRpbWUtZGlhbG9nIik7CiAgICAgICAgaWYgKGRpYWxvZykgewogICAgICAgICAgICBkaWFsb2cucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChkaWFsb2cpOwogICAgICAgIH0KICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoImNsaWNrIiwgY29tbW9uLmhhbmRsZV9jbG9zZV9ldmVudCk7CiAgICB9LAoKICAgIHJlZ19ldmVudDogZnVuY3Rpb24gKCkgewoKICAgICAgICBsZXQgc2VsZWN0b3JfZXZlbnRfbWFwID0gW3sKICAgICAgICAgICAgc2VsZWN0b3I6ICIjbm9uZy1kcml2ZS1hbnl0aW1lLWRpYWxvZyAubm9uZy1jb3B5IiwKICAgICAgICAgICAgdHlwZTogImNsaWNrIiwKICAgICAgICAgICAgZm46IHRoaXMuaGFuZGxlX2NvcHlfZXZlbnQKICAgICAgICB9LCB7CiAgICAgICAgICAgIHNlbGVjdG9yOiAiI25vbmctZHJpdmUtYW55dGltZS1kaWFsb2cgLm5vbmctb2ZmbGluZS1kb3dubG9hZCIsCiAgICAgICAgICAgIHR5cGU6ICJjbGljayIsCiAgICAgICAgICAgIGZuOiB0aGlzLmhhbmRsZV9kbF9ldmVudAogICAgICAgIH1dOwoKICAgICAgICBzZWxlY3Rvcl9ldmVudF9tYXAucHVzaCh7IHNlbGVjdG9yOiAiYm9keSIsIHR5cGU6ICJjbGljayIsIGZuOiB0aGlzLmhhbmRsZV9jbG9zZV9ldmVudCB9KTsKICAgICAgICBmb3IgKGxldCBvYmogb2Ygc2VsZWN0b3JfZXZlbnRfbWFwKSB7CiAgICAgICAgICAgIGZvciAobGV0IGVsZW0gb2YgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChvYmouc2VsZWN0b3IpKSB7CiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGVsZW0sIG9iai50eXBlLCBvYmouZm4pOwogICAgICAgICAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKG9iai50eXBlLCBvYmouZm4pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIHBhcnNldGV4dDogZnVuY3Rpb24gKHRleHQpIHsKICAgICAgICBsZXQgZG9jID0gbnVsbDsKICAgICAgICB0cnkgewogICAgICAgICAgICBkb2MgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpOwogICAgICAgICAgICBkb2MuZG9jdW1lbnRFbGVtZW50LmlubmVySFRNTCA9IHRleHQ7CiAgICAgICAgICAgIHJldHVybiBkb2M7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBhbGVydCgicGFyc2UgZXJyb3IiKTsKICAgICAgICB9CiAgICB9LAp9OwoKCmxldCBtYWduZXRfdGFibGUgPSB7CiAgICB0ZW1wbGF0ZTogewogICAgICAgIGNyZWF0ZV9oZWFkOiBmdW5jdGlvbiAoc3JjKSB7CiAgICAgICAgICAgIGxldCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTsKICAgICAgICAgICAgYS5jbGFzc05hbWUgPSAibm9uZy1yb3ciOwogICAgICAgICAgICBhLmlkID0gIm5vbmctaGVhZCI7CiAgICAgICAgICAgIGxldCBoZWFkX3N0ciA9IFsKICAgICAgICAgICAgICAgICLlpKflsI8iLAogICAgICAgICAgICAgICAgIuaTjeS9nCIsCiAgICAgICAgICAgICAgICAi56a757q/5LiL6L29IgogICAgICAgICAgICBdOwogICAgICAgICAgICBsZXQgdGhfbGlzdCA9IFtkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0aCIpLCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0aCIpLCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0aCIpLCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0aCIpXTsKCiAgICAgICAgICAgIGxldCBzZWxlY3RfYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VsZWN0Iik7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMpOwogICAgICAgICAgICBsZXQgb3B0aW9uX3N0ciA9IG15X3NlYXJjaC5zZWFyY2hfbmFtZV9zdHJpbmc7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coImdldCIsIEdNX2dldFZhbHVlKCJzZWFyY2hfaW5kZXgiKSk7CiAgICAgICAgICAgIGxldCBpbmRleCA9IEdNX2dldFZhbHVlKCJzZWFyY2hfaW5kZXgiLCAwKTsKICAgICAgICAgICAgbGV0IG9wX3ZhbHVlID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgc3RyIG9mIG9wdGlvbl9zdHIpIHsKICAgICAgICAgICAgICAgIGxldCBvcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICAgICAgICAgICAgb3AudmFsdWUgPSBvcF92YWx1ZTsKICAgICAgICAgICAgICAgIG9wLnRleHRDb250ZW50ID0gc3RyOwogICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IG9wX3ZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgb3Auc2V0QXR0cmlidXRlKCJzZWxlY3RlZCIsICJzZWxlY3RlZCIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgb3BfdmFsdWUrKzsKICAgICAgICAgICAgICAgIHNlbGVjdF9ib3guYXBwZW5kQ2hpbGQob3ApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNlbGVjdF9ib3guYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJzZWFyY2hfaW5kZXgiLCB0aGlzLnZhbHVlKTsKICAgICAgICAgICAgICAgIGRpc3BsYXlfdGFibGUoaV9hbV9vbGRfZHJpdmVyLnNlbGVjdGlvbiwgbnVsbCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aF9saXN0WzBdLmFwcGVuZENoaWxkKHNlbGVjdF9ib3gpOwoKICAgICAgICAgICAgdGhfbGlzdFsxXS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIikpOwogICAgICAgICAgICB0aF9saXN0WzFdLmxhc3RDaGlsZC5zZXRBdHRyaWJ1dGUoImhyZWYiLCBzcmMpOwogICAgICAgICAgICB0aF9saXN0WzFdLmxhc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInRhcmdldCIsICJfYmxhbmsiKTsKICAgICAgICAgICAgdGhfbGlzdFsxXS5sYXN0Q2hpbGQudGV4dENvbnRlbnQgPSBoZWFkX3N0clswXTsKCiAgICAgICAgICAgIHRoX2xpc3RbMl0uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpKTsKICAgICAgICAgICAgdGhfbGlzdFsyXS5sYXN0Q2hpbGQudGV4dENvbnRlbnQgPSBoZWFkX3N0clsxXTsKCiAgICAgICAgICAgIHRoX2xpc3RbM10uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpKTsKICAgICAgICAgICAgdGhfbGlzdFszXS5sYXN0Q2hpbGQudGV4dENvbnRlbnQgPSBoZWFkX3N0clsyXTsKCiAgICAgICAgICAgIGZvciAobGV0IHRoIG9mIHRoX2xpc3QpIHsKICAgICAgICAgICAgICAgIGEuYXBwZW5kQ2hpbGQodGgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBhOwogICAgICAgIH0sCiAgICAgICAgY3JlYXRlX3JvdzogZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgbGV0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTsKICAgICAgICAgICAgdHIuY2xhc3NOYW1lID0gIm5vbmctcm93IjsKICAgICAgICAgICAgdHIuc2V0QXR0cmlidXRlKCJtYWciLCBkYXRhLm1hZyk7CiAgICAgICAgICAgIGxldCB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7CiAgICAgICAgICAgIGZvciAobGV0IGVsZW0gb2YgW3RoaXMuY3JlYXRlX2luZm8oZGF0YS50aXRsZSwgZGF0YS5tYWcpLCB0aGlzLmNyZWF0ZV9zaXplKGRhdGEuc2l6ZSwgZGF0YS5zcmMpLCB0aGlzLmNyZWF0ZV9vcGVyYXRpb24oZGF0YS5tYWcpLCB0aGlzLmNyZWF0ZV9vZmZsaW5lKCldKSB7CiAgICAgICAgICAgICAgICBsZXQgYyA9IHRkLmNsb25lTm9kZSh0cnVlKTsKICAgICAgICAgICAgICAgIGMuYXBwZW5kQ2hpbGQoZWxlbSk7CiAgICAgICAgICAgICAgICB0ci5hcHBlbmRDaGlsZChjKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdHI7CiAgICAgICAgfSwKICAgICAgICBjcmVhdGVfcm93X2Zvcl9zdWtlYmVpOiBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICBsZXQgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpOwogICAgICAgICAgICB0ci5jbGFzc05hbWUgPSAibm9uZy1yb3ciOwogICAgICAgICAgICB0ci5zZXRBdHRyaWJ1dGUoIm1hZyIsIGRhdGEubWFnKTsKICAgICAgICAgICAgbGV0IHRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKTsKICAgICAgICAgICAgbGV0IGFwcGVuZF9lbGVtcyA9IFsKICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlX2luZm8oZGF0YS50aXRsZSwgZGF0YS5zcmMpLAogICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVfc2l6ZShkYXRhLnNpemUsIGRhdGEuc3JjKSwKICAgICAgICAgICAgICAgICgodG9ycmVudF91cmwgPSBkYXRhLnRvcnJlbnRfdXJsKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGV0IG9wZXJhdGUgPSB0aGlzLmNyZWF0ZV9vcGVyYXRpb24odG9ycmVudF91cmwpOwogICAgICAgICAgICAgICAgICAgIG9wZXJhdGUuZmlyc3RDaGlsZC50ZXh0Q29udGVudCA9ICLnp43lrZAiOwogICAgICAgICAgICAgICAgICAgIG9wZXJhdGUuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgIm5vbmctY29weS1zdWtlYmVpIik7CiAgICAgICAgICAgICAgICAgICAgb3BlcmF0ZS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidGFyZ2V0IiwgIl9ibGFuayIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBvcGVyYXRlOwogICAgICAgICAgICAgICAgfSkoKSwKICAgICAgICAgICAgICAgICgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICAgICAgICAgIGRpdi50ZXh0Q29udGVudCA9ICLmmoLkuI3mlK/mjIHnprvnur/kuIvovb0iOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBkaXY7CiAgICAgICAgICAgICAgICB9KSgpCiAgICAgICAgICAgIF07CiAgICAgICAgICAgIGZvciAobGV0IGVsZW0gb2YgYXBwZW5kX2VsZW1zKSB7CiAgICAgICAgICAgICAgICBsZXQgYyA9IHRkLmNsb25lTm9kZSh0cnVlKTsKICAgICAgICAgICAgICAgIGMuYXBwZW5kQ2hpbGQoZWxlbSk7CiAgICAgICAgICAgICAgICB0ci5hcHBlbmRDaGlsZChjKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdHI7CiAgICAgICAgfSwKICAgICAgICBjcmVhdGVfaW5mbzogZnVuY3Rpb24gKHRpdGxlLCBtYWcpIHsKICAgICAgICAgICAgbGV0IGEgPSB0aGlzLmluZm8uY2xvbmVOb2RlKHRydWUpOwogICAgICAgICAgICBhLmZpcnN0Q2hpbGQudGV4dENvbnRlbnQgPSB0aXRsZS5sZW5ndGggPCBtYXhfdGl0bGVfbGVuZ3RoID8gdGl0bGUgOiB0aXRsZS5zdWJzdHIoMCwgbWF4X3RpdGxlX2xlbmd0aCkgKyAiLi4uIjsKICAgICAgICAgICAgYS5maXJzdENoaWxkLmhyZWYgPSBtYWc7CiAgICAgICAgICAgIGEudGl0bGUgPSB0aXRsZTsKICAgICAgICAgICAgcmV0dXJuIGE7CiAgICAgICAgfSwKICAgICAgICBjcmVhdGVfc2l6ZTogZnVuY3Rpb24gKHNpemUsIHNyYykgewogICAgICAgICAgICBsZXQgYSA9IHRoaXMuc2l6ZS5jbG9uZU5vZGUodHJ1ZSk7CiAgICAgICAgICAgIGEudGV4dENvbnRlbnQgPSBzaXplOwogICAgICAgICAgICBhLmhyZWYgPSBzcmM7CiAgICAgICAgICAgIHJldHVybiBhOwogICAgICAgIH0sCiAgICAgICAgY3JlYXRlX29wZXJhdGlvbjogZnVuY3Rpb24gKG1hZykgewogICAgICAgICAgICBsZXQgYSA9IHRoaXMub3BlcmF0aW9uLmNsb25lTm9kZSh0cnVlKTsKICAgICAgICAgICAgYS5maXJzdENoaWxkLmhyZWYgPSBtYWc7CiAgICAgICAgICAgIHJldHVybiBhOwogICAgICAgIH0sCiAgICAgICAgY3JlYXRlX29mZmxpbmU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbGV0IGEgPSB0aGlzLm9mZmxpbmUuY2xvbmVOb2RlKHRydWUpOwogICAgICAgICAgICBhLmNsYXNzTmFtZSA9ICJub25nLW9mZmxpbmUiOwogICAgICAgICAgICByZXR1cm4gYTsKICAgICAgICB9LAoKICAgICAgICBpbmZvOiAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICBsZXQgYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgICAgYi50ZXh0Q29udGVudCA9ICJuYW1lIjsKICAgICAgICAgICAgYi5ocmVmID0gInNyYyI7CiAgICAgICAgICAgIGIudGFyZ2V0ID0gIl9ibGFuayI7CiAgICAgICAgICAgIGEuYXBwZW5kQ2hpbGQoYik7CiAgICAgICAgICAgIHJldHVybiBhOwogICAgICAgIH0pKCksCiAgICAgICAgc2l6ZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgICAgYS50ZXh0Q29udGVudCA9ICJzaXplIjsKICAgICAgICAgICAgcmV0dXJuIGE7CiAgICAgICAgfSgpLAogICAgICAgIG9wZXJhdGlvbjogKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbGV0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgbGV0IGNvcHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICAgIGNvcHkuY2xhc3NOYW1lID0gIm5vbmctY29weSI7CiAgICAgICAgICAgIGNvcHkudGV4dENvbnRlbnQgPSAi5aSN5Yi2IjsKICAgICAgICAgICAgYS5hcHBlbmRDaGlsZChjb3B5KTsKICAgICAgICAgICAgcmV0dXJuIGE7CiAgICAgICAgfSkoKSwKICAgICAgICBvZmZsaW5lOiAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICBsZXQgYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgICAgYi5jbGFzc05hbWUgPSAibm9uZy1vZmZsaW5lLWRvd25sb2FkIjsKICAgICAgICAgICAgYi50YXJnZXQgPSAiX2JsYW5rIjsKICAgICAgICAgICAgZm9yIChsZXQgayBpbiBvZmZsaW5lX3NpdGVzKSB7CiAgICAgICAgICAgICAgICBpZiAob2ZmbGluZV9zaXRlc1trXS5lbmFibGUpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgYyA9IGIuY2xvbmVOb2RlKHRydWUpOwogICAgICAgICAgICAgICAgICAgIGMuaHJlZiA9IG9mZmxpbmVfc2l0ZXNba10udXJsOwogICAgICAgICAgICAgICAgICAgIGMudGV4dENvbnRlbnQgPSBvZmZsaW5lX3NpdGVzW2tdLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgYS5hcHBlbmRDaGlsZChjKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gYTsKICAgICAgICB9KSgpLAogICAgfSwKICAgIGdlbmVyYXRlX2hlYWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICBsZXQgdGFiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGFibGUiKTsKICAgICAgICB0YWIuaWQgPSAibm9uZy10YWJsZSI7CiAgICAgICAgdGFiLmFwcGVuZENoaWxkKHRoaXMudGVtcGxhdGUuY3JlYXRlX2hlYWQoImh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vc2NyaXB0cy84MzkyLSVFNiU4QyU4QSIpKTsKICAgICAgICByZXR1cm4gdGFiOwogICAgfSwKICAgIGdlbmVyYXRlOiBmdW5jdGlvbiAoc3JjLCBkYXRhKSB7CiAgICAgICAgbGV0IHRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNub25nLWRyaXZlLWFueXRpbWUtZGlhbG9nICNub25nLXRhYmxlIik7CiAgICAgICAgdGFiLnF1ZXJ5U2VsZWN0b3IoIiNub25nLWhlYWQgYSIpLmhyZWYgPSBzcmM7CiAgICAgICAgaWYgKHNyYy5tYXRjaCgic3VrZWJlaS5ueWFhLnNlIikpIHsKICAgICAgICAgICAgZGF0YS5mb3JFYWNoKChkKSA9PiB7CiAgICAgICAgICAgICAgICB0YWIuYXBwZW5kQ2hpbGQodGhpcy50ZW1wbGF0ZS5jcmVhdGVfcm93X2Zvcl9zdWtlYmVpKGQpKTsKICAgICAgICAgICAgfSk7CgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRhdGEuZm9yRWFjaCgoZCkgPT4gewogICAgICAgICAgICAgICAgdGFiLmFwcGVuZENoaWxkKHRoaXMudGVtcGxhdGUuY3JlYXRlX3JvdyhkKSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRhYjsKICAgIH0sCgp9OwpsZXQgbXlfc2VhcmNoID0gewoKICAgIHNlYXJjaF9uYW1lX3N0cmluZzogWyJidHNvIiwgImJ0ZGIiLCAic3VrZWJlaS5ueWFhIiwgImJ0a2l0dHkiXSwKICAgIGN1cnJlbnQ6IGZ1bmN0aW9uIChrdywgY2IpIHsKICAgICAgICBsZXQgc2VhcmNoID0gbXlfc2VhcmNoW0dNX2dldFZhbHVlKCJzZWFyY2hfaW5kZXgiLCAwKV07CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIHNlYXJjaChrdywgY2IpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICB0aGlzLnNlYXJjaF9lcnJvcigpOwogICAgICAgIH0KICAgIH0sCiAgICBzZWFyY2hfZXJyb3I6IGZ1bmN0aW9uIChyKSB7CiAgICAgICAgYWxlcnQoIuaQnOe0ouWHuueOsOmUmeivr++8jOivt+ajgOafpee9kee7nCIpOwogICAgfSwKICAgIDA6IGZ1bmN0aW9uIChrdywgY2IpIHsKICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgIG1ldGhvZDogIkdFVCIsCiAgICAgICAgICAgIHVybDogImh0dHBzOi8vYnRzby5wdy9zZWFyY2gvIiArIGt3LAogICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgIGxldCBkb2MgPSBjb21tb24ucGFyc2V0ZXh0KHJlc3VsdC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgbGV0IGRhdGEgPSBbXTsKICAgICAgICAgICAgICAgIGxldCB0ID0gZG9jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImRhdGEtbGlzdCIpWzBdOwogICAgICAgICAgICAgICAgaWYgKHQpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBlbGVtIG9mIHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVsZW0uY2xhc3NOYW1lLm1hdGNoKCJidG4iKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidGl0bGUiOiBlbGVtLnRpdGxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtYWciOiAibWFnbmV0Oj94dD11cm46YnRpaDoiICsgZWxlbS5vdXRlckhUTUwucmVwbGFjZSgvLipoYXNoXC8vLCAiIikucmVwbGFjZSgvIiAuKlxuLipcbi4qXG4uKi8sICIiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2l6ZSI6IGVsZW0ubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzcmMiOiBlbGVtLmhyZWYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICJ0aXRsZSI6ICLmsqHmnInmib7liLDno4Hpk77mjqUiLAogICAgICAgICAgICAgICAgICAgICAgICAibWFnIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJzaXplIjogIjAiLAogICAgICAgICAgICAgICAgICAgICAgICAic3JjIjogcmVzdWx0LmZpbmFsVXJsLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2IocmVzdWx0LmZpbmFsVXJsLCBkYXRhKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25lcnJvcjogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgICAgICB0aHJvdyAic2VhcmNoIGVycm9yIjsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIDE6IGZ1bmN0aW9uIChrdywgY2IpIHsKICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgIG1ldGhvZDogIkdFVCIsCiAgICAgICAgICAgIHVybDogImh0dHBzOi8vYnRkYi5pbi9xLyIgKyBrdyArICIvIiwKICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICBsZXQgZG9jID0gY29tbW9uLnBhcnNldGV4dChyZXN1bHQucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgIGxldCBkYXRhID0gW107CiAgICAgICAgICAgICAgICBsZXQgdCA9IGRvYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJpdGVtLXRpdGxlIik7CiAgICAgICAgICAgICAgICBpZiAodCkgewogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGVsZW0gb2YgdCkgewogICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgInRpdGxlIjogZWxlbS5maXJzdENoaWxkLnRpdGxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hZyI6IGVsZW0ubmV4dEVsZW1lbnRTaWJsaW5nLmZpcnN0RWxlbWVudENoaWxkLmhyZWYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2l6ZSI6IGVsZW0ubmV4dEVsZW1lbnRTaWJsaW5nLmNoaWxkcmVuWzFdLnRleHRDb250ZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInNyYyI6ICJodHRwczovL2J0ZGIuaW4iICsgZWxlbS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpLAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBkYXRhLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAidGl0bGUiOiAi5rKh5pyJ5om+5Yiw56OB6ZO+5o6lIiwKICAgICAgICAgICAgICAgICAgICAgICAgIm1hZyI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAic2l6ZSI6ICIwIiwKICAgICAgICAgICAgICAgICAgICAgICAgInNyYyI6IHJlc3VsdC5maW5hbFVybCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjYihyZXN1bHQuZmluYWxVcmwsIGRhdGEpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBvbmVycm9yOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICAgICAgICAgIHRocm93ICJzZWFyY2ggZXJyb3IiOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgMjogZnVuY3Rpb24gKGt3LCBjYikgewogICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICAgICAgdXJsOiAiaHR0cHM6Ly9zdWtlYmVpLm55YWEuc2UvP3BhZ2U9c2VhcmNoJmNhdHM9MF8wJmZpbHRlcj0wJnRlcm09IiArIGt3LAogICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgIGxldCBkb2MgPSBjb21tb24ucGFyc2V0ZXh0KHJlc3VsdC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgbGV0IGRhdGEgPSBbXTsKICAgICAgICAgICAgICAgIGxldCB0ID0gZG9jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInRsaXN0cm93Iik7CiAgICAgICAgICAgICAgICBpZiAodCkgewogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGVsZW0gb2YgdCkgewogICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgInRpdGxlIjogZWxlbS5xdWVyeVNlbGVjdG9yKCIudGxpc3RuYW1lIGEiKS50ZXh0Q29udGVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtYWciOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0b3JyZW50X3VybCI6ICJodHRwczoiICsgZWxlbS5xdWVyeVNlbGVjdG9yKCIudGxpc3Rkb3dubG9hZCBhIikuZ2V0QXR0cmlidXRlKCJocmVmIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2l6ZSI6IGVsZW0ucXVlcnlTZWxlY3RvcigiLnRsaXN0c2l6ZSIpLnRleHRDb250ZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInNyYyI6ICJodHRwczoiICsgZWxlbS5xdWVyeVNlbGVjdG9yKCIudGxpc3RuYW1lIGEiKS5nZXRBdHRyaWJ1dGUoImhyZWYiKSwKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgInRpdGxlIjogIuayoeacieaJvuWIsOejgemTvuaOpSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJtYWciOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgInRvcnJlbnRfdXJsIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJzaXplIjogIjAiLAogICAgICAgICAgICAgICAgICAgICAgICAic3JjIjogcmVzdWx0LmZpbmFsVXJsLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNiKHJlc3VsdC5maW5hbFVybCwgZGF0YSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgICAgICAgICAgdGhyb3cgInNlYXJjaCBlcnJvciI7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICAzOiBmdW5jdGlvbiAoa3csIGNiKSB7CiAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgdXJsOiAiaHR0cDovL2J0a2l0dHkuYmlkLyIsCiAgICAgICAgICAgIGRhdGE6ICJrZXl3b3JkPSIgKyBrdywKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgICAgbGV0IGRvYyA9IGNvbW1vbi5wYXJzZXRleHQocmVzdWx0LnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IFtdOwogICAgICAgICAgICAgICAgbGV0IHQgPSBkb2MuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgibGlzdC1jb24iKTsKICAgICAgICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZWxlbSBvZiB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidGl0bGUiOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoImR0IGEiKS50ZXh0Q29udGVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtYWciOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoImRkIGEiKS5ocmVmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInNpemUiOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoIi5vcHRpb24gc3BhbjpudGgtY2hpbGQoMykgYiIpLnRleHRDb250ZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInNyYyI6IGVsZW0ucXVlcnlTZWxlY3RvcigiZHQgYSIpLmhyZWYsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICJ0aXRsZSI6ICLmsqHmnInmib7liLDno4Hpk77mjqUiLAogICAgICAgICAgICAgICAgICAgICAgICAibWFnIjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJzaXplIjogIjAiLAogICAgICAgICAgICAgICAgICAgICAgICAic3JjIjogcmVzdWx0LmZpbmFsVXJsLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2IocmVzdWx0LmZpbmFsVXJsLCBkYXRhKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25lcnJvcjogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgICAgICB0aHJvdyAic2VhcmNoIGVycm9yIjsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKCn07CgoKbGV0IGRpc3BsYXlfdGFibGUgPSBmdW5jdGlvbiAodmlkLCBpbnNlcnRfd2hlcmUpIHsKICAgIGNvbW1vbi5hZGRfc3R5bGUoKTsKICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI25vbmctZHJpdmUtYW55dGltZS1kaWFsb2cgI25vbmctaGVhZCIpKSB7CiAgICAgICAgbGV0IHRhYl93aXRoX2hlYWQgPSBtYWduZXRfdGFibGUuZ2VuZXJhdGVfaGVhZCgpOwogICAgICAgIGlmICh0eXBlb2YgaW5zZXJ0X3doZXJlID09PSAic3RyaW5nIikgewogICAgICAgICAgICBsZXQgZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaW5zZXJ0X3doZXJlKTsKICAgICAgICAgICAgLy9jb25zb2xlLmxvZygiZGlzcGxheV90YWJsZSIsIHRhYiwgZWxlbSk7CiAgICAgICAgICAgIGlmIChlbGVtKSB7CiAgICAgICAgICAgICAgICBlbGVtLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRhYl93aXRoX2hlYWQsIGVsZW0pOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaW5zZXJ0X3doZXJlID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgIGluc2VydF93aGVyZSh0YWJfd2l0aF9oZWFkKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCLmj5LlhaXooajmoLzplJnor68iKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgbGV0IGhlYWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjbm9uZy1kcml2ZS1hbnl0aW1lLWRpYWxvZyAjbm9uZy1oZWFkIik7CiAgICAgICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIjbm9uZy1kcml2ZS1hbnl0aW1lLWRpYWxvZyAubm9uZy1yb3ciKSkuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7CiAgICAgICAgICAgIGlmIChyb3cgIT09IGhlYWQpIHsKICAgICAgICAgICAgICAgIHJvdy5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KICAgIG15X3NlYXJjaC5jdXJyZW50KHZpZCwgZnVuY3Rpb24gKGRhdGEsIHNyYykgewogICAgICAgIGxldCB0YWIgPSBtYWduZXRfdGFibGUuZ2VuZXJhdGUoZGF0YSwgc3JjKTsKICAgICAgICBjb21tb24ucmVnX2V2ZW50KCk7CiAgICB9KTsKfTsKCgpsZXQgZGxfbW9kZSA9IGZ1bmN0aW9uICh2KSB7CiAgICBsZXQgbWFnID0gR01fZ2V0VmFsdWUoIm1hZ25ldCIsICIiKTsKICAgIGlmIChtYWcpIHsKICAgICAgICBsZXQgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7CiAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgidHlwZSIsICJ0ZXh0L2phdmFzY3JpcHQiKTsKICAgICAgICBzY3JpcHQuaW5uZXJIVE1MID0gIigiICsgdi5maWxsX2Zvcm0udG9TdHJpbmcoKSArICIpKFwiIiArIG1hZyArICJcIikiOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTsKICAgIH0KICAgIEdNX3NldFZhbHVlKCJtYWduZXQiLCAiIik7Cn07CgpsZXQgcnVuID0gZnVuY3Rpb24gKCkgewogICAgbWF4X3RpdGxlX2xlbmd0aCA9IEdNX2dldFZhbHVlKCJtYXhfdGl0bGVfbGVuZ3RoIiwgNjApOwogICAgbGV0IG1haW5fa2V5cyA9IE9iamVjdC5rZXlzKG1haW4pOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYWluX2tleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBsZXQgdiA9IG1haW5bbWFpbl9rZXlzW2ldXTsKICAgICAgICBpZiAodi5yZSAmJiB2LnJlLnRlc3QobG9jYXRpb24uaHJlZikpIHsKICAgICAgICAgICAgaWYgKHYudHlwZSA9PSAxKSB7CiAgICAgICAgICAgICAgICBkbF9tb2RlKHYpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0KfTsKCmxldCBtYXhfdGl0bGVfbGVuZ3RoID0gR01fZ2V0VmFsdWUoIm1heF90aXRsZV9sZW5ndGgiLCA0MCk7CmxldCBzZXRfbWF4X3RpdGxlX2xlbmd0aCA9IGZ1bmN0aW9uICgpIHsKICAgIGxldCBsZW4gPSBwcm9tcHQoIuivt+i+k+WFpeS9oOaDs+imgeeahOagh+mimOmVv+W6piIsIEdNX2dldFZhbHVlKCJtYXhfdGl0bGVfbGVuZ3RoIiwgNDApKTsKICAgIGlmIChsZW4gIT09IG51bGwgJiYgbGVuICE9PSAiIikgewogICAgICAgIEdNX3NldFZhbHVlKCJtYXhfdGl0bGVfbGVuZ3RoIiwgbGVuKTsKICAgICAgICBydW4oKTsKICAgIH0KfTsKbGV0IHNlbGVjdF9wb3B1cCA9IGZ1bmN0aW9uICgpIHsKICAgIGxldCBlbmFibGUgPSBHTV9nZXRWYWx1ZSgiZW5hYmxlX3NlbGVjdF9wb3B1cCIsIGZhbHNlKTsKICAgIGlmIChlbmFibGUpIHsKICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAodW5zYWZlV2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCkgIT09ICIiKSB7CiAgICAgICAgICAgICAgICBsZXQgZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNub25nLWRyaXZlLWFueXRpbWUtaWNvbiIpOwogICAgICAgICAgICAgICAgZWxlbS5zdHlsZS5sZWZ0ID0gZS5jbGllbnRYICsgInB4IjsKICAgICAgICAgICAgICAgIGVsZW0uc3R5bGUudG9wID0gZS5jbGllbnRZICsgInB4IjsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL2VsZW0uc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmlkICE9PSAibm9uZy1kcml2ZS1hbnl0aW1lLWljb24iKSB7CiAgICAgICAgICAgICAgICBsZXQgZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNub25nLWRyaXZlLWFueXRpbWUtaWNvbiIpOwogICAgICAgICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgIiIpOwogICAgICAgICAgICB9CgogICAgICAgIH0pOwogICAgICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQoIuaMiumaj+aXtuW8gOi9pi3lhbPpl63pgInkuK3ml7blvLnlh7rlm77moIciLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIEdNX3NldFZhbHVlKCJlbmFibGVfc2VsZWN0X3BvcHVwIiwgZmFsc2UpOwogICAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kKCLmjIrpmo/ml7blvIDovaYt5byA5ZCv6YCJ5Lit5pe25by55Ye65Zu+5qCHIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBHTV9zZXRWYWx1ZSgiZW5hYmxlX3NlbGVjdF9wb3B1cCIsIHRydWUpOwogICAgICAgIH0pOwogICAgfQp9OwpHTV9yZWdpc3Rlck1lbnVDb21tYW5kKCLmjIrpmo/ml7blvIDovaYt5qCH6aKY6ZW/5bqmIiwgc2V0X21heF90aXRsZV9sZW5ndGgpOwoKc2VsZWN0X3BvcHVwKCk7CnJ1bigpOwoKaWYgKHdpbmRvdyA9PT0gd2luZG93LnRvcCkgewogICAgaV9hbV9vbGRfZHJpdmVyLnN0YXJ0KCk7Cn0="},{"name":"破解VIP会员视频集合","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":["*://*.bilibili.com/blackboard/*"],"orig_includes":[],"orig_matches":["*://*.iqiyi.com/*","*://*.youku.com/*","*://*.le.com/*","*://*.letv.com/*","*://v.qq.com/*","*://*.tudou.com/*","*://*.mgtv.com/*","*://film.sohu.com/*","*://tv.sohu.com/*","*://*.acfun.cn/v/*","*://*.bilibili.com/*","*://vip.1905.com/play/*","*://*.pptv.com/*","*://v.yinyuetai.com/video/*","*://v.yinyuetai.com/playlist/*","*://*.fun.tv/vplay/*","*://*.wasu.cn/Play/show/*","*://*.56.com/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"replaceRaw":"bfalse"},"ts":1499835648840},"enabled":false,"position":21,"file_url":"https://greasyfork.org/scripts/27530-%E7%A0%B4%E8%A7%A3vip%E4%BC%9A%E5%91%98%E8%A7%86%E9%A2%91%E9%9B%86%E5%90%88/code/%E7%A0%B4%E8%A7%A3VIP%E4%BC%9A%E5%91%98%E8%A7%86%E9%A2%91%E9%9B%86%E5%90%88.user.js","uuid":"6423e2ae-16fe-47f6-9e55-09f524fcf096","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDnoLTop6NWSVDkvJrlkZjop4bpopHpm4blkIgKLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vdGFtcGVybW9ua2V5Lm5ldC8KLy8gQHZlcnNpb24gICAgICAzLjAuMgovLyBAZGVzY3JpcHRpb24gIOegtOino1vkvJjphbd86IW+6K6vfOS5kOinhnzniLHlpYfoibp86IqS5p6cfEFC56uZfOmfs+aCpuWPsF3nrYlWSVDmiJbkvJrlkZjop4bpopHvvIzop6PmnpDmjqXlj6PotLXnsr7kuI3otLXlpJrvvIznu53lr7nlpJ/nlKjjgILmnInnm7TmjqXot7PovazvvIvlpIfnlKjmjqXlj6PliJfooajjgILor6bnu4bmlrnms5XnnIvor7TmmI7ov5jmnInlm77niYfjgILljIXlkKvkuoZb44CQ56iz5a6a44CR5YWo572RVklQ6KeG6aKR5Zyo57q/6Kej5p6Q4pa2dHRtc2p4XVtWSVDkvJrlkZjop4bpopHop6PmnpDilrbpvpnovald5Lul5Y+KW1ZJUOinhumikeegtOino+KWtmhvb3RoaW5d55qE6YOo5YiG5o6l5Y+j44CCCi8vIEBhdXRob3IgICAgICAg6buE55uQCi8vIEBtYXRjaCAgICAgICAgKjovLyouaXFpeWkuY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi55b3VrdS5jb20vKgovLyBAbWF0Y2ggICAgICAgICo6Ly8qLmxlLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgKjovLyoubGV0di5jb20vKgovLyBAbWF0Y2ggICAgICAgICo6Ly92LnFxLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgKjovLyoudHVkb3UuY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi5tZ3R2LmNvbS8qCi8vIEBtYXRjaCAgICAgICAgKjovL2ZpbG0uc29odS5jb20vKgovLyBAbWF0Y2ggICAgICAgICo6Ly90di5zb2h1LmNvbS8qCi8vIEBtYXRjaCAgICAgICAgKjovLyouYWNmdW4uY24vdi8qCi8vIEBtYXRjaCAgICAgICAgKjovLyouYmlsaWJpbGkuY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8vdmlwLjE5MDUuY29tL3BsYXkvKgovLyBAbWF0Y2ggICAgICAgICo6Ly8qLnBwdHYuY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8vdi55aW55dWV0YWkuY29tL3ZpZGVvLyoKLy8gQG1hdGNoICAgICAgICAqOi8vdi55aW55dWV0YWkuY29tL3BsYXlsaXN0LyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi5mdW4udHYvdnBsYXkvKgovLyBAbWF0Y2ggICAgICAgICo6Ly8qLndhc3UuY24vUGxheS9zaG93LyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi41Ni5jb20vKgovLyBAZXhjbHVkZSAgICAgICo6Ly8qLmJpbGliaWxpLmNvbS9ibGFja2JvYXJkLyoKLy8gQGdyYW50ICAgICAgICBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgICAgICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICAgICAgR01fc2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICB1bnNhZmVXaW5kb3cKLy8gQGdyYW50ICAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgICAgIEdNX29wZW5JblRhYgovLyA9PS9Vc2VyU2NyaXB0PT0KCihmdW5jdGlvbigpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHZhciByZXBsYWNlUmF3PUdNX2dldFZhbHVlKCJyZXBsYWNlUmF3Iik7CiAgICB2YXIgZXBpc29kZXM9R01fZ2V0VmFsdWUoImVwaXNvZGVzIik7CiAgICBHTV9hZGRTdHlsZSgnI1RNYW5heXN7ei1pbmRleDo5OTk5OTk7IHBvc2l0aW9uOmFic29sdXRlOyBsZWZ0OjBweDsgdG9wOjBweDsgd2lkdGg6MTAwcHg7IGhlaWdodDphdXRvOyBib3JkZXI6MDsgbWFyZ2luOjA7fScrCiAgICAgICAgICAgICAgICAnI3BhcnNlVWx7cG9zaXRpb246Zml4ZWQ7dG9wOjgwcHg7IGxlZnQ6MHB4O30nKwogICAgICAgICAgICAgICAgJyNwYXJzZVVsIGxpe2xpc3Qtc3R5bGU6bm9uZTt9JysKICAgICAgICAgICAgICAgICcuVE0xe29wYWNpdHk6MC40OyBwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nOiAwIDdweCAwIDA7IG1pbi13aWR0aDogMTlweDt9JysKICAgICAgICAgICAgICAgICcuVE0xOmhvdmVye29wYWNpdHk6MTt9JysKICAgICAgICAgICAgICAgICcuVE0xIHNwYW57ZGlzcGxheTpibG9jazsgYm9yZGVyLXJhZGl1czowIDVweCA1cHggMDsgYmFja2dyb3VuZC1jb2xvcjojZmZmZjAwOyBib3JkZXI6MDsgZm9udDpib2xkIDE1cHggIuW+rui9r+mbhem7kSIgIWltcG9ydGFudDsgY29sb3I6I2ZmMDAwMDsgbWFyZ2luOjA7IHBhZGRpbmc6MTVweCAycHg7fScrCiAgICAgICAgICAgICAgICAnLlRNM3twb3NpdGlvbjphYnNvbHV0ZTsgdG9wOjA7IGxlZnQ6MTlweDsgZGlzcGxheTpub25lOyBib3JkZXItcmFkaXVzOjVweDsgbWFyZ2luOjA7IHBhZGRpbmc6MDt9JysKICAgICAgICAgICAgICAgICcuVE0zIGxpe2Zsb2F0Om5vbmU7IHdpZHRoOjgwcHg7IG1hcmdpbjowOyBmb250LXNpemU6MTRweDsgcGFkZGluZzozcHggMTBweCAycHggMTVweDsgY3Vyc29yOnBvaW50ZXI7IGNvbG9yOiMzYTNhM2EgIWltcG9ydGFudDsgYmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMCwwLjgpfScrCiAgICAgICAgICAgICAgICAnLlRNMyBsaTpob3Zlcntjb2xvcjp3aGl0ZSAhaW1wb3J0YW50OyBiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC44KTt9JysKICAgICAgICAgICAgICAgICcuVE0zIGxpOmxhc3QtY2hpbGR7Ym9yZGVyLXJhZGl1czogMCAwIDVweCA1cHg7fScrCiAgICAgICAgICAgICAgICAnLlRNMyBsaTpmaXJzdC1jaGlsZHtib3JkZXItcmFkaXVzOiA1cHggNXB4IDAgMDt9JysKICAgICAgICAgICAgICAgICcuVE0yOmhvdmVyIC5UTTN7ZGlzcGxheTpibG9ja30nKTsKICAgIHZhciBhcGlzPVsKICAgICAgICB7Im5hbWUiOiJW5LqRW+iFvuiur10iLCJ1cmwiOiJodHRwOi8vd3d3LnZpeXVuLm1lL2ppZXhpLnBocD91cmw9IiwidGl0bGUiOiLohb7orq/pppbpgIkifSwKICAgICAgICB7Im5hbWUiOiLlmZflmZfnlLXlvbEiLCJ1cmwiOiJodHRwOi8vcHVwdWR5LmNvbS9wbGF5P21ha2U9dXJsJmlkPSIsInRpdGxlIjoi57u85ZCI5o6l5Y+j77yMdHRtc2p46ISa5pys55qE5o6l5Y+jIn0sCiAgICAgICAgeyJuYW1lIjoiMTYz5Lq6IiwidXJsIjoiaHR0cDovL2p4LmFwaS4xNjNyZW4uY29tL3ZvZC5waHA/dXJsPSIsInRpdGxlIjoi5YG25bCU5pSv5oyB6IW+6K6vIn0sCiAgICAgICAgeyJuYW1lIjoi55+z5aS06Kej5p6QIiwidXJsIjoiaHR0cHM6Ly9qaWV4aS4wNzE4MTEuY2MvangucGhwP3VybD0iLCJ0aXRsZSI6IuaJi+WKqOeCueaSreaUviJ9LAogICAgICAgIHsibmFtZSI6IuaXoOWQjeWwj+ermSIsInVybCI6Imh0dHA6Ly93d3cuc2ZzZnQuY29tL2FkbWluLnBocD91cmw9IiwidGl0bGUiOiLml6DlkI3lsI/nq5nlkIzmupAifSwKICAgICAgICB7Im5hbWUiOiJPREZMViIsInVybCI6Imh0dHA6Ly9haWthbi10di5jb20vP3VybD0iLCJ0aXRsZSI6IuW5v+WRiui/h+a7pOi9r+S7tuWPr+iDveacieW9seWTjSJ9LAogICAgICAgIHsibmFtZSI6IuaXi+mjjuino+aekCIsInVybCI6Imh0dHA6Ly9hcGkueGZzdWIuY29tL2luZGV4LnBocD91cmw9IiwidGl0bGUiOiIxOTA15LyY5YWI5L2/55SoIn0sCiAgICAgICAgeyJuYW1lIjoiQ0tGTFYiLCJ1cmwiOiJodHRwOi8vd3d3LjAzMzVoYWliby5jb20vdG9uZy5waHA/dXJsPSIsInRpdGxlIjoiQ0tGTFbkupEs5pWI546H5o6l6L+RNDflvbHop4bkupEifSwKICAgICAgICB7Im5hbWUiOiI2NVlXIiwidXJsIjoiaHR0cDovL3d3dy42NXl3LmNvbS82NXl3Lz92aWQ9IiwidGl0bGUiOiLmlrDmjqXlj6PvvIznqLPlrprmgKfmnKrnn6UifSwKICAgICAgICB7Im5hbWUiOiLkupHop6PmnpAiLCJ1cmwiOiJodHRwOi8vd3d3LmVmdW5maWxtLmNvbS95dW5wYXJzZS9pbmRleC5waHA/dXJsPSIsInRpdGxlIjoi5paw5o6l5Y+j77yM56iz5a6a5oCn5pyq55+lIn0sCiAgICAgICAgeyJuYW1lIjoi55m+5Z+f6ZiBIiwidXJsIjoiaHR0cDovL2FwaS5iYWl5dWcuY24vdmlwL2luZGV4LnBocD91cmw9IiwidGl0bGUiOiLovazlnIjlnIjlsLHmjaLnur/ot68ifSwKICAgICAgICB7Im5hbWUiOiLoiJ7liqjnp4vlpKkiLCJ1cmwiOiJodHRwOi8vcXR6ci5uZXQvcy8/cXQ9IiwidGl0bGUiOiJxdHpyLm5ldCJ9LAogICAgICAgIHsibmFtZSI6Iue0q+eLkCIsInVybCI6Imh0dHA6Ly95dW4uemlodS50di9wbGF5Lmh0bWw/dXJsPSIsInRpdGxlIjoi5pWI5p6c5Y+v6IO95LiN56iz5a6aIn0sCiAgICAgICAgeyJuYW1lIjoiVklQ55yL55yLIiwidXJsIjoiaHR0cDovL3Euei52aXAudG90di43MmR1LmNvbS8/dXJsPSIsInRpdGxlIjoi5pu05o2i57q/6Lev5oiQ5Yqf546H5Lya5o+Q6auYIn0sCiAgICAgICAgeyJuYW1lIjoi5peg5ZCN5bCP56uZMiIsInVybCI6Imh0dHA6Ly93d3cud214ei53YW5nL3ZpZGVvLnBocD91cmw9IiwidGl0bGUiOiLovazlnIjlnIjlsLHmjaLnur/ot68ifSwKICAgICAgICB7Im5hbWUiOiLnnLznnZvkvJrkuIvpm6giLCJ1cmwiOiJodHRwOi8vd3d3LnZpcGppZXhpLmNvbS95dW4ucGhwP3VybD0iLCJ0aXRsZSI6Ind3dy52aXBqaWV4aS5jb20ifSwKICAgICAgICB7Im5hbWUiOiLlprnlhL/kupEiLCJ1cmwiOiJodHRwczovL3d3dy55eW1laWVyLmNvbS9hcGkucGhwP3VybD0iLCJ0aXRsZSI6IuS4jeeos+WumiJ9CiAgICBdOwogICAgdmFyIGRlZmF1bHRhcGk9eyJ0aXRsZSI6Ium+mei9qeiEmuacrOeahOaOpeWPo++8jOm7mOiupOeUqOa1ruepuuino+aekO+8jOWkseaViOivt+abtOaNouaOpeWPoyIsInVybCI6Imh0dHA6Ly9pZmtqeC5jb20vP3VybD0ifTsKICAgIC8v5bWM5YWl6aG16Z2i5pKt5pS+CiAgICBmdW5jdGlvbiBvcGVuSW5UYWIoZXZ0KXsKICAgICAgICB2YXIgaWZyYW1lPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpOwogICAgICAgIGlmcmFtZS5pZD0iVE1pZnJhbWUiOwogICAgICAgIHZhciB2aWRlbzsKICAgICAgICAvL2lmcmFtZS5zdHlsZS5jc3NUZXh0PSJ3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3RleHQtYWxpZ246Y2VudGVyO2JvcmRlcjpub25lOyI7CiAgICAgICAgaWZyYW1lLnN0eWxlLmJvcmRlcj0ibm9uZSI7CiAgICAgICAgaWZyYW1lLnRleHRBbGlnbj0iY2VudGVyIjsKICAgICAgICBpZnJhbWUuc3JjPWV2dC50YXJnZXQuZGF0YXNldC51cmwrbG9jYXRpb24uaHJlZjsKICAgICAgICB2YXIgdGltZXI9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0t5qOA5rWL6KeG6aKR5YWD57Sg5oCd6Lev5YCf6Ym05LuW5Lq6IExpY2Vuc2UgTUlUIEJlZ2luLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgW10uZXZlcnkuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJvYmplY3QsZW1iZWQsdmlkZW8iKSxmdW5jdGlvbihpdGVtKXsgICAgICAgICAgICAgICAgLy9MSU5LOmh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vc2NyaXB0cy8yNjU1Ni12aXDop4bpopHnoLTop6MKICAgICAgICAgICAgICAgIHZhciBzdHlsZT1nZXRDb21wdXRlZFN0eWxlKGl0ZW0sIG51bGwpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9Ib21lcGFnZTogaHR0cDovL2hvb3RoaW4uY29tCiAgICAgICAgICAgICAgICBpZihzdHlsZS53aWR0aC5yZXBsYWNlKCJweCIsIiIpPjEwMCAmJiBzdHlsZS5oZWlnaHQucmVwbGFjZSgicHgiLCIiKT4xMDApeyAgICAgICAgICAgICAgIC8vRW1haWw6IHJpeGl4aUBnbWFpbC5jb20KICAgICAgICAgICAgICAgICAgICB2aWRlbz1pdGVtOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsvL+acieaSreaUvueqlwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZih2aWRlb3x8ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI1RNaWZyYW1lIikpewogICAgICAgICAgICAgICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI1RNaWZyYW1lIikpe3ZpZGVvPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNUTWlmcmFtZSIpO30KICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgICAgICAgICAgdmFyIHZpZGVvU3R5bGU9Z2V0Q29tcHV0ZWRTdHlsZSh2aWRlbywgbnVsbCk7CiAgICAgICAgICAgICAgICBpZnJhbWUud2lkdGg9dmlkZW9TdHlsZS53aWR0aDsKICAgICAgICAgICAgICAgIGlmcmFtZS5oZWlnaHQ9dmlkZW9TdHlsZS5oZWlnaHQ7CiAgICAgICAgICAgICAgICB2YXIgdmlkZW9QYXJlbnQ9dmlkZW8ucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgIGlmcmFtZS5zdHlsZS5saW5lSGVpZ2h0PWdldENvbXB1dGVkU3R5bGUodmlkZW9QYXJlbnQpLmhlaWdodDsKICAgICAgICAgICAgICAgIGlmKHZpZGVvLnBhcmVudE5vZGUpe3ZpZGVvLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGlmcmFtZSx2aWRlbyk7fQogICAgICAgICAgICB9CiAgICAgICAgfSw1MDApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0t5qOA5rWL6KeG6aKR5YWD57Sg5oCd6Lev5YCf6Ym05LuW5Lq6ICBFbmQtLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoInlvdWt1IikhPS0xKXsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnZwYWN0aW9udjVfaWZyYW1lX3dyYXAiKS5zdHlsZS5kaXNwbGF5PSJub25lIjsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBub05ld1RhYkNoZWNrKCl7CiAgICAgICAgdmFyIHgsIGFycj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuVE00IGxpIik7CiAgICAgICAgcmVwbGFjZVJhdz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjaW5UYWJDaGVrYngiKS5jaGVja2VkOwogICAgICAgIEdNX3NldFZhbHVlKCJyZXBsYWNlUmF3IixyZXBsYWNlUmF3KTsKICAgICAgICBmb3IoeD0wO3g8YXJyLmxlbmd0aDt4KyspewogICAgICAgICAgICBpZihyZXBsYWNlUmF3KXsKICAgICAgICAgICAgICAgIGFyclt4XS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsb3BlbkluVGFiLGZhbHNlKTsKICAgICAgICAgICAgICAgIGFyclt4XS5vbmNsaWNrPScnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIlRNR29idG4iKS5zdHlsZS5kaXNwbGF5PSJub25lIjsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBhcnJbeF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2xpY2siLG9wZW5JblRhYixmYWxzZSk7CiAgICAgICAgICAgICAgICBhcnJbeF0ub25jbGljaz1mdW5jdGlvbigpe3dpbmRvdy5vcGVuKHRoaXMuZGF0YXNldC51cmwrbG9jYXRpb24uaHJlZik7fTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJUTUdvYnRuIikuc3R5bGUuZGlzcGxheT0iYmxvY2siOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIlRNU2V0IikuY2xpY2soKTsvL+aUtue8qeWbnuWOuwogICAgfQogICAgZnVuY3Rpb24gcmlnaHRFcHNMaW5rQ2hlY2soKSB7CiAgICAgICAgZXBpc29kZXM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3JlYWxMaW5rQ2hla2J4IikuY2hlY2tlZDsKICAgICAgICBHTV9zZXRWYWx1ZSgiZXBpc29kZXMiLGVwaXNvZGVzKTsKICAgICAgICBpZihlcGlzb2Rlcyl7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3aWRnZXQtZHJhbWFzZXJpZXMnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIGdldExpbmsgKGUpeyAgICAgIC8vLS0tLS0tLS0tLS0tLWlxaXlp5Ymn6ZuG55yf5a6e5pKt5pS+6aG16Z2i5pa55rOVICBCZWdpbi0tLS0tLS0tLS0tLS0tLS0tLS8vSG9tZXBhZ2U6IGh0dHA6Ly9ob290aGluLmNvbSAgICBFbWFpbDogcml4aXhpQGdtYWlsLmNvbQogICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldC5wYXJlbnROb2RlLnRhZ05hbWU9PSJMSSI/ZS50YXJnZXQucGFyZW50Tm9kZTooZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnRhZ05hbWU9PSJMSSI/ZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlOmUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlKTsKICAgICAgICAgICAgICAgIGlmKHRhcmdldC50YWdOYW1lIT0iTEkiKXJldHVybjsKICAgICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgICAgIHVybDogImh0dHA6Ly9jYWNoZS52aWRlby5xaXlpLmNvbS9qcC92aS8iK3RhcmdldC5kYXRhc2V0LnZpZGVvbGlzdFR2aWQrIi8iK3RhcmdldC5kYXRhc2V0LnZpZGVvbGlzdFZpZCsiLz9jYWxsYmFjaz1jcmFja0lxaXlpIiwKICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uKHJlc3VsdCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3JhY2tJcWl5aT1mdW5jdGlvbihkKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWY9ZC52dTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgZXZhbChyZXN1bHQucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0taXFpeWnliafpm4bnnJ/lrp7mkq3mlL7pobXpnaLmlrnms5UgIEVuZC0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIH0KICAgICAgICBlbHNle2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3aWRnZXQtZHJhbWFzZXJpZXMnKS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGdldExpbmspO30KICAgIH0KCiAgICBpZih0b3AubG9jYXRpb249PWxvY2F0aW9uKXsvL+WPquWcqOmhtuWxgumhtemdoui/kOihjO+8jOWcqGlmcmFtZeS4reS4jei1t+S9nOeUqAogICAgICAgIHZhciBkaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgZGl2LmlkPSJUTWFuYXlzIjsKICAgICAgICB2YXIgdHh0PScnLGk9MDsKICAgICAgICBmb3IgKGkgaW4gYXBpcykgewogICAgICAgICAgICB0eHQgKz0nPGxpIGRhdGEtb3JkZXI9JytpKycgZGF0YS11cmw9IicrYXBpc1tpXS51cmwrJyIgdGl0bGU9IicrYXBpc1tpXS50aXRsZSsnIiBvbmNsaWNrPSJ3aW5kb3cub3Blbih0aGlzLmRhdGFzZXQudXJsK2xvY2F0aW9uLmhyZWYpIj4nK2FwaXNbaV0ubmFtZSsnPC9saT4nOwogICAgICAgIH0KICAgICAgICBkaXYuaW5uZXJIVE1MPSc8dWwgaWQ9InBhcnNlVWwiPicrCiAgICAgICAgICAgICc8bGkgY2xhc3M9IlRNMSIgdGl0bGU9IicrZGVmYXVsdGFwaS50aXRsZSsnIiBvbmNsaWNrPSJ3aW5kb3cub3BlbihcJycrZGVmYXVsdGFwaS51cmwrJ1wnK3dpbmRvdy5sb2NhdGlvbi5ocmVmKSI+PHNwYW4gaWQ9IlRNR29idG4iPuKWtjwvc3Bhbj48L2xpPicrCiAgICAgICAgICAgICc8bGkgY2xhc3M9IlRNMSBUTTIiPjxzcGFuIGlkPSJUTUxpc3QiID7ilrc8L3NwYW4+PHVsIGNsYXNzPSJUTTMgVE00Ij4nK3R4dCsnPC91bD48L2xpPicrCiAgICAgICAgICAgICc8bGkgY2xhc3M9IlRNMSBUTTIiPjxzcGFuIGlkPSJUTVNldCI+4pi4PC9zcGFuPjx1bCBjbGFzcz0iVE0zIj48bGk+PGxhYmVsPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImluVGFiQ2hla2J4Ij7mnKzpobXop6PmnpA8L2xhYmVsPjwvbGk+PGxpPjxsYWJlbD48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJyZWFsTGlua0NoZWtieCI+54ix5aWH6Im65q2j56Gu6YCJ6ZuGPC9sYWJlbD48L2xpPjwvdWw+PC9saT4nKwogICAgICAgICAgICAnPC91bD4nOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTsKICAgICAgICBjb25zb2xlLmxvZyhkaXYucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUudGFnTmFtZSk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2luVGFiQ2hla2J4IikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLG5vTmV3VGFiQ2hlY2ssZmFsc2UpOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNpblRhYkNoZWtieCIpLmNoZWNrZWQ9cmVwbGFjZVJhdzsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjcmVhbExpbmtDaGVrYngiKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIscmlnaHRFcHNMaW5rQ2hlY2ssZmFsc2UpOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNyZWFsTGlua0NoZWtieCIpLmNoZWNrZWQ9ZXBpc29kZXM7CgogICAgICAgIGlmKGVwaXNvZGVzICYmIHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoImlxaXlpIikhPS0xKXsKICAgICAgICAgICAgcmlnaHRFcHNMaW5rQ2hlY2soKTsKICAgICAgICB9CiAgICAgICAgaWYocmVwbGFjZVJhdyAmJiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2whPSJodHRwczoiKXtub05ld1RhYkNoZWNrKCk7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIlRNU2V0IikuY2xpY2soKTt9ICAgIC8vaHR0cHPlkoxodHRw6aG16Z2i5LiN6IO96ZW25bWM44CCCiAgICB9Cn0pKCk7CgovLyDotYTmupDlj4LogINodHRwOi8vd3d3LjVpZnh3LmNvbS92aXAvCi8vIOi1hOa6kOWPguiAg2h0dHA6Ly9saXZlLmdvcGFydG9vay5jb20vCi8vIOi1hOa6kOWPguiAg2h0dHA6Ly90di5kc3FuZGguY29tCi8vIOi1hOa6kOWPguiAg2h0dHA6Ly81MS5ydXlvLm5ldC9wLzMxMjcuaHRtbAovL+acieaViOaAp+acquefpXx85LiN6IO955u05o6l5byV55So5o6l5Y+jCi8vaHR0cDovL3d3dy55eWR5OC5jb20vY29tbW9uLz91cmw9Ci8vaHJlZj0iaHR0cDovL210MnQuY29tL3l1bj91cmw9Ci8vaHR0cHM6Ly9hcGkuNDdrcy5jb20vd2ViY2xvdWQvP3Y9CgovLzfmnIg55pel5paw5o6l5Y+jCi8vaHR0cDovLzY1eXcuMm0udmMvcm9vb2cvaW5kZXgucGhwP2lkPQoKLy9odHRwc+WNj+iurumhtemdou+8mmZpbG0uc29odS5jb20KCi8vdjAuNDPniYjmnKzlnLDlnYDvvJpodHRwczovL3Bhbi5iYWlkdS5jb20vcy8xY3RudzFnCi8vdjEuMC4154mI5pys5Zyw5Z2A77yaaHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMWVTQ2NpUUkKLy92MS4xLjPniYjmnKzlnLDlnYDvvJpodHRwczovL3Bhbi5iYWlkdS5jb20vcy8xaTVidkZjTAovL3YxLjEuNueJiOacrOWcsOWdgO+8mmh0dHBzOi8vcGFuLmJhaWR1LmNvbS9zLzFpNEhkeGl0Ci8vdjEuMi4054mI5pys5Zyw5Z2A77yaaHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMWk0OFhVYjcKLy92Mi4wLjDniYjmnKzlnLDlnYDvvJpodHRwczovL3Bhbi5iYWlkdS5jb20vcy8xc2tLbnFQWgoKCi8vaHR0cDovL3d3dy5ndXFpYW5rdW4uY29tL3Rvb2xzL3ZpcHZpZGVvCg=="},{"name":"youku-html5","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://*.youku.com/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1496880511998,"data":{}},"enabled":false,"position":22,"uuid":"36ba9542-d5db-437f-8cd0-501edba06bb6","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgeW91a3UtaHRtbDUKLy8gQG5hbWVzcGFjZSBodHRwOi8vdGFtcGVybW9ua2V5Lm5ldC8KLy8gQHZlcnNpb24gMC4xCi8vIEBkZXNjcmlwdGlvbiB5b3VrdS1odG1sNQovLyBAYXV0aG9yIGpzd2gKLy8gQG1hdGNoICo6Ly8qLnlvdWt1LmNvbS8qCi8vIEBncmFudCBub25lCi8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uKCkgewogICAgJ3VzZSBzdHJpY3QnOwogICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oIlBfbF9oNSIsIHRydWUpOwp9KSgpOw=="},{"name":"京东","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["http://coupon.m.jd.com/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1497668409236,"data":{}},"enabled":false,"position":23,"uuid":"598baf4d-8430-40d6-acbd-aba6b6d54974","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDkuqzkuJwKLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vdGFtcGVybW9ua2V5Lm5ldC8KLy8gQHZlcnNpb24gICAgICAwLjEKLy8gQGRlc2NyaXB0aW9uICB0cnkgdG8gdGFrZSBvdmVyIHRoZSB3b3JsZCEKLy8gQGF1dGhvciAgICAgICBZb3UKLy8gQG1hdGNoICAgICAgICBodHRwOi8vY291cG9uLm0uamQuY29tLyoKLy8gQGdyYW50ICAgICAgICBub25lCi8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uKCkgewogICAgdmFyIGJ0biA9ICQoJyNidG5TdWJtaXQnKTsKICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgaWYoYnRuLnRleHQoKSAhPSAn5LiN5Y+v6aKG5Y+WJyl7CiAgICAgICAgICAgIGJ0bi5jbGljaygpOwogICAgICAgICAgICBjb25zb2xlLmxvZygn5Yik5pat5oiQ5YqfJyk7CiAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgY29uc29sZS5sb2coJ+WIpOaWreWksei0pScpOwogICAgICAgICB9CiAgICB9LDIwMCk7CgogICAgdmFyIG15RGF0ZSA9IG5ldyBEYXRlKCk7CiAgICB2YXIgcmVmID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChteURhdGUuZ2V0SG91cnMoKT09MTQgJiYgbXlEYXRlLmdldE1pbnV0ZXMoKT09MCAmJiBteURhdGUuZ2V0U2Vjb25kcygpPT0wKSB7CiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICBjbGVhckludGVydmFsKHJlZik7CiAgICAgICAgfQogICAgICAgIG15RGF0ZSA9IG5ldyBEYXRlKCk7CiAgICB9LDEwMCk7Cn0pKCk7"},{"name":"网页限制解除(改)","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://*/*"],"orig_noframes":null,"orig_run_at":"document-end","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"black_list":"o{\"status\":1,\"version\":1.1,\"message\":\"0.1測試版，2017-05-16發佈\",\"data\":[\"b.faloo.com\",\"book.hjsm.tom.com\",\"book.zhulang.com\",\"book.zongheng.com\",\"chokstick.com\",\"chuangshi.qq.com\",\"cutelisa55.pixnet.net\",\"huayu.baidu.com\",\"imac.hk\",\"life.tw\",\"news.missevan.com\",\"read.qidian.com\",\"www.15yan.com\",\"www.17k.com\",\"www.18183.com\",\"www.360doc.com\",\"www.99lib.net\",\"www.coco01.net\",\"www.eyu.com\",\"www.hongshu.com\",\"www.hongxiu.com\",\"www.jjwxc.net\",\"www.readnovel.com\",\"www.tadu.com\",\"www.xxsy.net\",\"www.z3z4.com\",\"www.zhihu.com\",\"yuedu.163.com\"]}"},"ts":1503036396894},"enabled":false,"position":24,"file_url":"https://greasyfork.org/scripts/28497-%E7%BD%91%E9%A1%B5%E9%99%90%E5%88%B6%E8%A7%A3%E9%99%A4-%E6%94%B9/code/%E7%BD%91%E9%A1%B5%E9%99%90%E5%88%B6%E8%A7%A3%E9%99%A4(%E6%94%B9).user.js","uuid":"b8e15d2c-f321-4ba7-a311-4c7f341fd78f","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWVzcGFjZSAgICAgICAgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vdXNlcnMvMTA2MjIyLXF4aW4taQoKLy8gQG5hbWUgICAgICAgICAgICAgIOe9kemhtemZkOWItuino+mZpCjmlLkpCi8vIEBuYW1lOmVuICAgICAgICAgICBSZW1vdmUgd2ViIGxpbWl0cwovLyBAbmFtZTp6aCAgICAgICAgICAg572R6aG16ZmQ5Yi26Kej6ZmkCi8vIEBuYW1lOmphICAgICAgICAgICDjgqbjgqfjg5bjga7opo/liLbnt6nlkowKCi8vIEBhdXRob3IgICAgICAgICAgICBDYXQ3MyZpcXhpbijkv67mlLkpCgovLyBAZGVzY3JpcHRpb24gICAgICAg6YCa5p2A5aSn6YOo5YiG572R56uZ77yM5Y+v5Lul6Kej6Zmk56aB5q2i5aSN5Yi244CB5Ymq5YiH44CB6YCJ5oup5paH5pys44CB5Y+z6ZSu6I+c5Y2V55qE6ZmQ5Yi244CC5Y6f5L2c6ICFY2F0NzPvvIzlm6DkuLrlkozmkJzntKLot7PovazohJrmnKzlhrLnqoHvvIzpgYLov5vooYzkuobmlLnliqjvvIzmlLnkuLrpu5HlkI3ljZXliLbjgIIKLy8gQGRlc2NyaXB0aW9uOmVuICAgIFBhc3MgdG8ga2lsbCBtb3N0IG9mIHRoZSBzaXRlLCB5b3UgY2FuIGxpZnQgdGhlIHJlc3RyaWN0aW9ucyBwcm9oaWJpdGVkIHRvIGNvcHksIGN1dCwgc2VsZWN0IHRoZSB0ZXh0LCByaWdodC1jbGljayBtZW51LgovLyBAZGVzY3JpcHRpb246emggICAg6YCa5p2A5aSn6YOo5YiG572R56uZ77yM5Y+v5Lul6Kej6Zmk56aB5q2i5aSN5Yi244CB5Ymq5YiH44CB6YCJ5oup5paH5pys44CB5Y+z6ZSu6I+c5Y2V55qE6ZmQ5Yi244CC5Y6f5L2c6ICFY2F0NzPvvIzlm6DkuLrlkozmkJzntKLot7PovazohJrmnKzlhrLnqoHvvIzpgYLov5vooYzkuobmlLnliqjvvIzmlLnkuLrpu5HlkI3ljZXliLbjgIIKLy8gQGRlc2NyaXB0aW9uOnpoLUNOIOmAmuadgOWkp+mDqOWIhue9keerme+8jOWPr+S7peino+mZpOemgeatouWkjeWItuOAgeWJquWIh+OAgemAieaLqeaWh+acrOOAgeWPs+mUruiPnOWNleeahOmZkOWItuOAguWOn+S9nOiAhWNhdDcz77yM5Zug5Li65ZKM5pCc57Si6Lez6L2s6ISa5pys5Yay56qB77yM6YGC6L+b6KGM5LqG5pS55Yqo77yM5pS55Li66buR5ZCN5Y2V5Yi244CCCi8vIEBkZXNjcmlwdGlvbjp6aC1UVyDpgJrmrrrlpKfpg6jliIbntrLnq5nvvIzlj6/ku6Xop6PpmaTnpoHmraLlvqnliLbjgIHliarliIfjgIHpgbjmk4fmlofmnKzjgIHlj7PpjbXoj5zllq7nmoTpmZDliLbjgIIKLy8gQGRlc2NyaXB0aW9uOmphICAgIOOCteOCpOODiOOBruOBu+OBqOOCk+OBqeOCkuauuuOBmeOBn+OCgeOBq+a4oeOBl+OAgeOBguOBquOBn+OBr+OAgeOCs+ODlOODvOWIh+OCiuWPluOCiuOAgeODhuOCreOCueODiOOAgeWPs+OCr+ODquODg+OCr+ODoeODi+ODpeODvOOCkumBuOaKnuOBmeOCi+OBk+OBqOOBr+emgeatouOBruWItumZkOOCkuino+mZpOOBmeOCi+OBk+OBqOOBjOOBp+OBjeOBvuOBmeOAggoKLy8gQGRlc2NyaXB0aW9uICAgICAgIOWOn+S9nOiAhWh0dHBzOi8vd3d3LmdpdGh1Yi5jb20vQ2F0NzM3My/vvIzlm6DkuLrlkozmkJzntKLot7PovazohJrmnKzlhrLnqoHvvIzpgYLov5vooYzkuobmlLnliqgKLy8gQGhvbWVwYWdlVVJMICAgICAgIGh0dHBzOi8vY2F0NzM3My5naXRodWIuaW8vcmVtb3ZlLXdlYi1saW1pdHMvCi8vIEBzdXBwb3J0VVJMICAgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3poLUNOL3NjcmlwdHMvMjg0OTcKCi8vIEBpY29uICAgICAgICAgICAgICAgZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDQUFBQUFnQ0FRQUFBRFpjN0ovQUFBQnBFbEVRVlI0bk8zVnYydVVRUkRHOGMvZWJTTVdxYXkwdHJBVEF4clVTaTFTMkFpV0ZvSllwTkNnb0JqVVJzSFdKS2VOUmZBdnNEZ0ZpeFFxS2RQWjJWaUVpQ0pZQk9RdThmMWhFWE81OTcxM2o3TVVmTFo2ZDJhL084dk1PME96RG5pbjlLdTJNanZ1YXcwN3hnU0FZRVZYZTJpbmRNaGo5MnpwS0pMbkJoRjhNRGV5ZTlobjZ6Yk43MGVSaXFDdzAyQnJhM3VwOEJCTHUxRkVCeHNCdWNYcVc0Y3N6MFVMZTRqb3JTQ011UFU4OWJvUkVMRE1IaUk2WThWNjViYkNVVGNjYzcwUmthT3dLTE9nMElreVhhOXFUak91MkxBczZOWnVEODZocmRUeXhSTlRrVXFxZGhYbEhybmdHUlZFWnNNcEp3ZXg5RHhJWlNIWWNsZXNJYjY1TENvSGdJczY2VUpxNmJ0REJaSFpyUGg4VjZZQk9YNjZMYk9rVEdja0JZaW1CVzJGVlROZXVPWk55ckZKMjM2WWw0TlN5NVNiVm0xUER2aG9kcWd5TWxlZFRkUmxBdER6cWZMOXRma3dVdHlhUmt2OUx3Rmo5Qi93N3dQeWNYT2hxbEoweVpIS1BDaE1pNU1DaU00N1hoc29wYlZKQVVIZnJZYm1OL0VUb04rMDJlTFBmejlPWXlaaEZKelcxSm4zbFRzeGFLUWpDa3A1Mmp5NDVyMVp2U2JUYjlNMGQ0UEJvekdaQUFBQUFFbEZUa1N1UW1DQwoKLy8gQHZlcnNpb24gICAgICAgICAgIDIuNC4yCi8vIEBsaWNlbnNlICAgICAgICAgICBMR1BMdjMKCi8vIEBjb21wYXRpYmxlICAgICAgICBjaHJvbWUgQ2hyb21lXzQ2LjAuMjQ5MC44NiArIFRhbXBlck1vbmtleSArIOiEmuacrF8xLjMg5rWL6K+V6YCa6L+HCi8vIEBjb21wYXRpYmxlICAgICAgICBmaXJlZm94IEZpcmVmb3hfNDIuMCArIEdyZWFzZU1vbmtleSArIOiEmuacrF8xLjIuMSDmtYvor5XpgJrov4cKLy8gQGNvbXBhdGlibGUgICAgICAgIG9wZXJhIE9wZXJhXzMzLjAuMTk5MC4xMTUgKyBUYW1wZXJNb25rZXkgKyDohJrmnKxfMS4xLjMg5rWL6K+V6YCa6L+HCi8vIEBjb21wYXRpYmxlICAgICAgICBzYWZhcmkg5pyq5rWL6K+VCgovLyBAbWF0Y2ggICAgICAgICAgICAgKjovLyovKgovLyBAZ3JhbnQgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgICAgICAgR01fZGVsZXRlVmFsdWUKLy8gQHJ1bi1hdCAgICAgIGRvY3VtZW50LWVuZAovLyA9PS9Vc2VyU2NyaXB0PT0KKGZ1bmN0aW9uKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKCgovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS3mt7vliqAgc3RhcnQKICAgIGZ1bmN0aW9uIHRlc3QoKXsKICAgICAgICB2YXIgYmxhY2tfbGlzdF91c2VyID0gR01fZ2V0VmFsdWUoImxpc3RfdXNlciIpOwogICAgICAgIGNvbnNvbGUubG9nKGJsYWNrX2xpc3RfdXNlcik7CiAgICB9CgogIC8vIOajgOafpSwg5q2k6JmV5oeJ5bCH5pW457WE5pS554K6IFNldCDntZDmp4soMjAxNy0wNS0xNu+8jOWboOeCuuaHtu+8jOaJgOS7peS4jeaDs+WLlSkKICAgIGZ1bmN0aW9uIGJsYWNrX2NoZWNrKGJvb2wpewogICAgICAgIHZhciBob3N0bmFtZSA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZTsKICAgICAgICB2YXIgY2hlY2sgPSBjaGVja19ibGFja19saXN0KGxpc3QsaG9zdG5hbWUpOwoKICAgICAgICAvLyBjb25zb2xlLmxvZygiY2hlY2s6ICIsY2hlY2spOwogICAgICAgIC8vIGNvbnNvbGUubG9nKGxpc3QpOwoKICAgICAgICBpZiAoYm9vbCAmJiAhY2hlY2spIHsKICAgICAgICAgICAgbGlzdCA9IGxpc3QuY29uY2F0KGhvc3RuYW1lKTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIumAieS4rSDkuI3lnKjpu5HlkI3ljZUsIOWinuWKoCIsaG9zdG5hbWUsbGlzdCk7CiAgICAgICAgfWVsc2UgaWYoIWJvb2wgJiYgY2hlY2spewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjaGVjay0xKTsKICAgICAgICAgICAgbGlzdC5zcGxpY2UoY2hlY2stMSwxKTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIuacqumAieS4rSDlnKjpu5HlkI3ljZXvvIwg5Yiq6ZmkIixsaXN0KTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIui/lOWbnmZhbHNlIik7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIC8vIGNvbnNvbGUubG9nKGxpc3QpOwogICAgICAgIHNhdmVEYXRhKGxpc3QpOwogICAgICAgIC8vIHRlc3QoKTsKICAgICAgICAvLyDliLfmlrDpobXpnaIKICAgICAgICAvLyB3aW5kb3cubG9jYXRpb24ucmVsb2FkKHRydWUpOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCh0cnVlKTsKICAgICAgICAgICAgY29uc29sZS5sb2coImxvYWRpbmciKTsKICAgICAgICB9LDQwMCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2F2ZURhdGEobGlzdCx2ZXJzaW9uKXsKICAgICAgICAvLyBjb25zb2xlLmxvZyhsaXN0KTsKICAgICAgICB2YXIgdXNlckRhdGEgPSB7CiAgICAgICAgICAgICJzdGF0dXMiOjEsCiAgICAgICAgICAgICJ2ZXJzaW9uIjpibGFja19saXN0X3ZlcnNpb24sCiAgICAgICAgICAgICJtZXNzYWdlIjoiMC4x5ris6Kmm54mI77yMMjAxNy0wNS0xNueZvOS9iCIsCiAgICAgICAgICAgICJkYXRhIjpsaXN0LnNvcnQoKQogICAgICAgIH07CiAgICAgICAgR01fc2V0VmFsdWUoImJsYWNrX2xpc3QiLHVzZXJEYXRhKTsKICAgICAgICAvLyBjb25zb2xlLmxvZyh1c2VyRGF0YSk7CiAgICAgICAgY29uc29sZS5sb2coR01fZ2V0VmFsdWUoImJsYWNrX2xpc3QiKSk7CiAgICAgICAgcmV0dXJuIHVzZXJEYXRhOwogICAgfQoKICAgIC8vIOaVuOaTmuW6q+eJiOacrOWNh+e0mu+8jOmRkuaWvOS5i+WJjTIuMS5454mI5pys5Y+q5piv6Zqo5omL5a+r55qE77yM5pyJ5aSq5aSa55qE5ZWP6aGM77yM5L+d5a2Y5pW45pOa5pyq6ICD5oWu5ZGo5YWo77yM6YGC5YaN5qyh5pS55YuVCiAgICBmdW5jdGlvbiB2ZXJzaW9uVXAoKXsKICAgICAgICB2YXIgYmxhY2tfbGlzdDsKICAgICAgICB2YXIgYmxhY2tfbGlzdF91c2VyID0gR01fZ2V0VmFsdWUoImxpc3RfdXNlciIpOwogICAgICAgIC8vIHZhciB2ZXJzaW9uMiA9IEdNX2dldFZhbHVlKCJibGFja19saXN0Iik7CiAgICAgICAgLy8gY29uc29sZS5sb2coYmxhY2tfbGlzdF91c2VyKTsKICAgICAgICBpZihibGFja19saXN0X3VzZXIpewogICAgICAgICAgICAvLyDlrZjlnKjniYjmnKzkuIDvvIzmhI/lkbPokZflvp7oiIrniYjljYfliLDmlrDniYgKICAgICAgICAgICAgYmxhY2tfbGlzdF91c2VyID0gYmxhY2tfbGlzdF91c2VyLnNwbGl0KCJ8Iik7CiAgICAgICAgICAgIGJsYWNrX2xpc3QgPSBBcnJheS5mcm9tKCBuZXcgU2V0KGJsYWNrX2xpc3RfZGVmYXVsdC5jb25jYXQoYmxhY2tfbGlzdF91c2VyKSkpOwoKICAgICAgICAgICAgLy8g5Yiq6Zmk6IiK54mI5pysCiAgICAgICAgICAgIEdNX2RlbGV0ZVZhbHVlKCJsaXN0X3VzZXIiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDkuI3lrZjlnKjniYjmnKzkuIDvvIzkuZ/kuI3lrZjlnKjniYjmnKzkuozvvIwg5oSP5ZGz6JGX5paw55So5oi2CiAgICAgICAgICAgIGJsYWNrX2xpc3QgPSBibGFja19saXN0X2RlZmF1bHQ7CiAgICAgICAgfQoKICAgICAgICAvLyBibGFja19saXN0LmNvbmNhdAoKICAgICAgICAvLyDkv53lrZjmlbjmk5oKICAgICAgICByZXR1cm4gc2F2ZURhdGEoYmxhY2tfbGlzdCk7CiAgICB9CgogICAgLy8g6I635Y+W6buR5ZCN5Y2VCiAgICBmdW5jdGlvbiBnZXRfYmxhY2tfbGlzdCgpewoKICAgICAgICB2YXIgYmxhY2tfbGlzdCA9IEdNX2dldFZhbHVlKCJibGFja19saXN0Iik7CgogICAgICAgIGlmKCFibGFja19saXN0KXsKICAgICAgICAgICAgYmxhY2tfbGlzdCA9IHZlcnNpb25VcCgpOwogICAgICAgICAgICAvLyBibGFja19saXN0ID0gR01fZ2V0VmFsdWUoImJsYWNrX2xpc3QiKTsKICAgICAgICB9CgogICAgICAgIC8vIOm7keWQjeWWruaVuOaTmuabtOaWsAogICAgICAgIC8vIGNvbnNvbGUubG9nKCLmnKzlnLDpu5HlkI3llq7niYjmnKzvvJogIixibGFja19saXN0LnZlcnNpb24sIGJsYWNrX2xpc3RfdmVyc2lvbikKICAgICAgICBpZihibGFja19saXN0LnZlcnNpb24gPCBibGFja19saXN0X3ZlcnNpb24pewogICAgICAgICAgICBjb25zb2xlLmxvZygi5L2O54mI5pys77yM5pu05paw5pW45pOaIik7CiAgICAgICAgICAgIHZhciBuZXdfbGlzdCA9IEFycmF5LmZyb20oIG5ldyBTZXQoYmxhY2tfbGlzdF9kZWZhdWx0LmNvbmNhdChibGFja19saXN0LmRhdGEpKSk7CiAgICAgICAgICAgIGJsYWNrX2xpc3QgPSBzYXZlRGF0YShuZXdfbGlzdCk7CiAgICAgICAgfQoKICAgICAgICAvLyBjb25zb2xlLmxvZyhibGFja19saXN0KTsKICAgICAgICByZXR1cm4gYmxhY2tfbGlzdC5kYXRhOwogICAgfQogICAvLyDmo4Dmn6XmmK/lkKblrZjlnKjkuo7pu5HlkI3ljZXkuK0KICAgIGZ1bmN0aW9uIGNoZWNrX2JsYWNrX2xpc3QobGlzdCxob3N0KXsKICAgICAgICBmb3IobGV0IGk9MDtpPGxpc3QubGVuZ3RoO2krKyl7CiAgICAgICAgICAgIC8vIGlmKGhvc3RuYW1lPT09bGlzdFtpXSl7CiAgICAgICAgICAgIGlmKH5ob3N0bmFtZS5pbmRleE9mKGxpc3RbaV0pKXsKICAgICAgICAgICAgICAgIHJldHVybiBpKzE7ICAvL+S4h+S4gOWMuemFjeWIsOesrOS4gOS4qu+8jOi/lOWbnjAKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Ci8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t5re75YqgIGVuZAogIC8vIOWfn+WQjeinhOWImeWIl+ihqAogICAgdmFyIHJ1bGVzID0gewogICAgICAgIGJsYWNrX3J1bGU6IHsKICAgICAgICAgICAgbmFtZTogImJsYWNrIiwKICAgICAgICAgICAgaG9va19ldmVudE5hbWVzOiAiIiwKICAgICAgICAgICAgdW5ob29rX2V2ZW50TmFtZXM6ICIiCiAgICAgICAgfSwKICAgICAgICBkZWZhdWx0X3J1bGU6IHsKICAgICAgICAgICAgbmFtZTogImRlZmF1bHQiLAogICAgICAgICAgICBob29rX2V2ZW50TmFtZXM6ICJjb250ZXh0bWVudXxzZWxlY3R8c2VsZWN0c3RhcnR8Y29weXxjdXR8ZHJhZ3N0YXJ0IiwKICAgICAgICAgICAgdW5ob29rX2V2ZW50TmFtZXM6ICJrZXlkb3dufGtleXVwfG1vdXNlZG93bnxtb3VzZXVwIiwKICAgICAgICAgICAgZG9tMDogdHJ1ZSwKICAgICAgICAgICAgaG9va19hZGRFdmVudExpc3RlbmVyOiB0cnVlLAogICAgICAgICAgICBob29rX3ByZXZlbnREZWZhdWx0OiB0cnVlLAogICAgICAgICAgICBob29rX3NldF9yZXR1cm5WYWx1ZTogdHJ1ZSwKICAgICAgICAgICAgYWRkX2NzczogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgcnVsZV9wbHVzOiB7CiAgICAgICAgICAgIG5hbWU6ICJkZWZhdWx0IiwKICAgICAgICAgICAgaG9va19ldmVudE5hbWVzOiAiY29udGV4dG1lbnV8c2VsZWN0fHNlbGVjdHN0YXJ0fGNvcHl8Y3V0fGRyYWdzdGFydHxtb3VzZWRvd258bW91c2V1cCIsCiAgICAgICAgICAgIHVuaG9va19ldmVudE5hbWVzOiAia2V5ZG93bnxrZXl1cCIsCiAgICAgICAgICAgIGRvbTA6IHRydWUsCiAgICAgICAgICAgIGhvb2tfYWRkRXZlbnRMaXN0ZW5lcjogdHJ1ZSwKICAgICAgICAgICAgaG9va19wcmV2ZW50RGVmYXVsdDogdHJ1ZSwKICAgICAgICAgICAgaG9va19zZXRfcmV0dXJuVmFsdWU6IHRydWUsCiAgICAgICAgICAgIGFkZF9jc3M6IHRydWUKICAgICAgICB9CiAgICB9OwoKCiAgLy8g6KaB5aSE55CG55qEIGV2ZW50IOWIl+ihqAogICAgdmFyIGhvb2tfZXZlbnROYW1lcywgdW5ob29rX2V2ZW50TmFtZXMsIGV2ZW50TmFtZXM7CiAgICAvLyDlgqjlrZjlkI3np7AKICAgIHZhciBzdG9yYWdlTmFtZSA9IGdldFJhbmRTdHIoJ3F3ZXJ0eXVpb3Bhc2RmZ2hqa2x6eGN2Ym5tUVdFUlRZVUlPUEFTREZHSEpLTFpYQ1ZCTk0nLCBwYXJzZUludChNYXRoLnJhbmRvbSgpICogMTIgKyA4KSk7CiAgICAvLyDlgqjlrZjooqsgSG9vayDnmoTlh73mlbAKICAgIHZhciBFdmVudFRhcmdldF9hZGRFdmVudExpc3RlbmVyID0gRXZlbnRUYXJnZXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI7CiAgICB2YXIgZG9jdW1lbnRfYWRkRXZlbnRMaXN0ZW5lciA9IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXI7CiAgICB2YXIgRXZlbnRfcHJldmVudERlZmF1bHQgPSBFdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQ7CgogICAgLy8gSG9vayBhZGRFdmVudExpc3RlbmVyIHByb2MKICAgIGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuYywgdXNlQ2FwdHVyZSkgewogICAgICAgIHZhciBfYWRkRXZlbnRMaXN0ZW5lciA9IHRoaXMgPT09IGRvY3VtZW50ID8gZG9jdW1lbnRfYWRkRXZlbnRMaXN0ZW5lciA6IEV2ZW50VGFyZ2V0X2FkZEV2ZW50TGlzdGVuZXI7CiAgICAgICAgaWYoaG9va19ldmVudE5hbWVzLmluZGV4T2YodHlwZSkgPj0gMCkgewogICAgICAgICAgICBfYWRkRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBbdHlwZSwgcmV0dXJuVHJ1ZSwgdXNlQ2FwdHVyZV0pOwogICAgICAgIH0gZWxzZSBpZih1bmhvb2tfZXZlbnROYW1lcy5pbmRleE9mKHR5cGUpID49IDApIHsKICAgICAgICAgICAgdmFyIGZ1bmNzTmFtZSA9IHN0b3JhZ2VOYW1lICsgdHlwZSArICh1c2VDYXB0dXJlID8gJ3QnIDogJ2YnKTsKCiAgICAgICAgICAgIGlmKHRoaXNbZnVuY3NOYW1lXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB0aGlzW2Z1bmNzTmFtZV0gPSBbXTsKICAgICAgICAgICAgICAgIF9hZGRFdmVudExpc3RlbmVyLmFwcGx5KHRoaXMsIFt0eXBlLCB1c2VDYXB0dXJlID8gdW5ob29rX3QgOiB1bmhvb2tfZiwgdXNlQ2FwdHVyZV0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzW2Z1bmNzTmFtZV0ucHVzaChmdW5jKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfYWRkRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgIH0KCiAgLy8g5riF55CG5b6q546vCiAgICBmdW5jdGlvbiBjbGVhckxvb3AoKSB7CiAgICAgICAgdmFyIGVsZW1lbnRzID0gZ2V0RWxlbWVudHMoKTsKCiAgICAgICAgZm9yKHZhciBpIGluIGVsZW1lbnRzKSB7CiAgICAgICAgICBmb3IodmFyIGogaW4gZXZlbnROYW1lcykgewogICAgICAgICAgICB2YXIgbmFtZSA9ICdvbicgKyBldmVudE5hbWVzW2pdOwogICAgICAgICAgICBpZihlbGVtZW50c1tpXVtuYW1lXSAhPT0gbnVsbCAmJiBlbGVtZW50c1tpXVtuYW1lXSAhPT0gb254eHgpIHsKICAgICAgICAgICAgICAgIGlmKHVuaG9va19ldmVudE5hbWVzLmluZGV4T2YoZXZlbnROYW1lc1tqXSkgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldW3N0b3JhZ2VOYW1lICsgbmFtZV0gPSBlbGVtZW50c1tpXVtuYW1lXTsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50c1tpXVtuYW1lXSA9IG9ueHh4OwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNbaV1bbmFtZV0gPSBudWxsOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgLy8g6L+U5ZuedHJ1ZeeahOWHveaVsAogICAgZnVuY3Rpb24gcmV0dXJuVHJ1ZShlKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICBmdW5jdGlvbiB1bmhvb2tfdChlKSB7CiAgICAgICAgcmV0dXJuIHVuaG9vayhlLCB0aGlzLCBzdG9yYWdlTmFtZSArIGUudHlwZSArICd0Jyk7CiAgICB9CiAgICBmdW5jdGlvbiB1bmhvb2tfZihlKSB7CiAgICAgICAgcmV0dXJuIHVuaG9vayhlLCB0aGlzLCBzdG9yYWdlTmFtZSArIGUudHlwZSArICdmJyk7CiAgICB9CiAgICBmdW5jdGlvbiB1bmhvb2soZSwgc2VsZiwgZnVuY3NOYW1lKSB7CiAgICAgICAgdmFyIGxpc3QgPSBzZWxmW2Z1bmNzTmFtZV07CiAgICAgICAgZm9yKHZhciBpIGluIGxpc3QpIHsKICAgICAgICAgICAgbGlzdFtpXShlKTsKICAgICAgICB9CgogICAgICAgIGUucmV0dXJuVmFsdWUgPSB0cnVlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgZnVuY3Rpb24gb254eHgoZSkgewogICAgICAgIHZhciBuYW1lID0gc3RvcmFnZU5hbWUgKyAnb24nICsgZS50eXBlOwogICAgICAgIHRoaXNbbmFtZV0oZSk7CgogICAgICAgIGUucmV0dXJuVmFsdWUgPSB0cnVlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAvLyDojrflj5bpmo/mnLrlrZfnrKbkuLIKICAgIGZ1bmN0aW9uIGdldFJhbmRTdHIoY2hzLCBsZW4pIHsKICAgICAgICB2YXIgc3RyID0gJyc7CgogICAgICAgIHdoaWxlKGxlbi0tKSB7CiAgICAgICAgICAgIHN0ciArPSBjaHNbcGFyc2VJbnQoTWF0aC5yYW5kb20oKSAqIGNocy5sZW5ndGgpXTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzdHI7CiAgICB9CgogIC8vIOiOt+WPluaJgOacieWFg+e0oCDljIXmi6xkb2N1bWVudAogICAgZnVuY3Rpb24gZ2V0RWxlbWVudHMoKSB7CiAgICAgICAgdmFyIGVsZW1lbnRzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJyonKSk7CiAgICAgICAgLy8gdmFyIGVsZW1lbnRzQXJyID0gQXJyYXkuZnJvbShlbGVtZW50cyk7CiAgICAgICAgdmFyIGVsZW1lbnRzU2V0ID0gbmV3IFNldChlbGVtZW50cyk7CgogICAgICAgIC8vIGNvbnNvbGUubG9nKCLmiYDmnInlhYPntKDvvJoiLGVsZW1lbnRzKTsKICAgICAgICB2YXIgZXhlbXB0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiW2NsYXNzKj0ncndsLWV4ZW1wdCddLFtjbGFzcyo9J3J3bC1leGVtcHQnXSAqIikpOwogICAgICAgIC8vIGNvbnNvbGUubG9nKCLmjpLpmaQx77yaIixleGVtcHQpOwoKICAgICAgICAvLyB2YXIgZXhlbXB0QXJyID0gQXJyYXkuZnJvbShleGVtcHQpOwogICAgICAgIHZhciBleGVtcHRTZXQgPSBuZXcgU2V0KGV4ZW1wdCk7CgogICAgICAgIC8vIGNvbnNvbGUubG9nKCLmjpLpmaTlhYPntKDvvJsiLGV4ZW1wdCk7CgogICAgICAgIGVsZW1lbnRzID0gQXJyYXkuZnJvbShuZXcgU2V0KGVsZW1lbnRzLmNvbmNhdChleGVtcHQpLmZpbHRlcih2ID0+ICFlbGVtZW50c1NldC5oYXModikgfHwgIWV4ZW1wdFNldC5oYXModikpKSkKICAgICAgICBlbGVtZW50cy5wdXNoKGRvY3VtZW50KTsKICAgICAgICAvLyBjb25zb2xlLmxvZygi5pyA5ZCO57uT5p6c77yaIixlbGVtZW50cyk7CgogICAgICAgIHJldHVybiBlbGVtZW50czsKICAgIH0KCgogIC8v5re75Yqg5oyJ6ZKuCiAgICBmdW5jdGlvbiBhZGRCdG4oKXsKICAgICAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInJlbW92ZS13ZWItbGltaXRzLWlxeGluIik7CiAgICAgICAgbm9kZS5pZCA9ICJyd2wtaXF4aW4iOwogICAgICAgIG5vZGUuY2xhc3NOYW1lID0gInJ3bC1leGVtcHQiOwogICAgICAgIC8vIG5vZGUuaW5uZXJIVE1MID0gJzxsYWJlbD48aW5wdXQgdHlwZT0iY2hlY2tib3giIG5hbWU9IiIgaWQ9ImJsYWNrX25vZGUiPum7keWQjeWNlTwvbGFiZWw+PGJ1dHRvbiBpZD0iZGVsZXRlIj5kZWxldGU8L2J0dG9uPic7CiAgICAgICAgbm9kZS5pbm5lckhUTUwgPSAnPGxhYmVsPumZkOWItuino+mZpCA8aW5wdXQgdHlwZT0iY2hlY2tib3giIG5hbWU9IiIgaWQ9ImJsYWNrX25vZGUiPjwvbGFiZWw+JzsKICAgICAgICBpZih3aW5kb3cuc2VsZiA9PT0gd2luZG93LnRvcCl7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJib2R5IikpewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub2RlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChub2RlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3ZlciIsZnVuY3Rpb24oKXsKICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCJyd2wtYWN0aXZlLWlxeGluIik7CiAgICAgICAgICAgIC8vIGxpc3QgPSBnZXRfYmxhY2tfbGlzdCgpOwogICAgICAgIH0pOwogICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VsZWF2ZSIsZnVuY3Rpb24oKXsKICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QucmVtb3ZlKCJyd2wtYWN0aXZlLWlxeGluIik7CiAgICAgICAgICAgIGJsYWNrX2NoZWNrKGJsYWNrX25vZGUuY2hlY2tlZCk7CiAgICAgICAgfSk7CiAgICAgICAgLy8g5Yig6Zmk5pys5Zyw5a2Y55qE6buR5ZCN5Y2VCiAgICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRlbGV0ZSIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbigpewogICAgICAgIC8vICBHTV9kZWxldGVWYWx1ZSAoImxpc3RfdXNlciIpOwogICAgICAgIC8vICB0ZXN0KCk7CiAgICAgICAgLy8gfSk7IAogICAgICAgIEdNX2FkZFN0eWxlKAogICAgICAgICAgICAiI3J3bC1pcXhpbnsiICsKICAgICAgICAgICAgICAgICJwb3NpdGlvbjpmaXhlZDsiICsKICAgICAgICAgICAgICAgICJ0b3A6MDsiICsKICAgICAgICAgICAgICAgICJsZWZ0Oi02MnB4OyIgKwogICAgICAgICAgICAgICAgIndpZHRoOjU4cHg7IiArCiAgICAgICAgICAgICAgICAiaGVpZ2h0OjI1cHg7IiArCiAgICAgICAgICAgICAgICAiZm9udC1zaXplOjEycHg7IiArCiAgICAgICAgICAgICAgICAiZm9udC13ZWlnaHQ6IDUwMDsiICsKICAgICAgICAgICAgICAgICJmb250LWZhbWlseTpWZXJkYW5hLCBBcmlhbCwgJ+Wui+S9kyc7IiArCiAgICAgICAgICAgICAgICAiY29sb3I6I2ZmZjsiICsKICAgICAgICAgICAgICAgICJiYWNrZ3JvdW5kOiMzMzM7IiArCiAgICAgICAgICAgICAgICAiei1pbmRleDoyMTQ3NDgzNjQ3OyIgKwogICAgICAgICAgICAgICAgIm1hcmdpbjogMDsiICsKICAgICAgICAgICAgICAgICJvcGFjaXR5OjAuMDU7IiArCiAgICAgICAgICAgICAgICAidHJhbnNpdGlvbjowLjNzOyIgKwogICAgICAgICAgICAgICAgIm92ZXJmbG93OmhpZGRlbjsiICsKICAgICAgICAgICAgICAgICJ1c2VyLXNlbGVjdDpub25lOyIgKwogICAgICAgICAgICAgICAgInRleHQtYWxpZ246Y2VudGVyOyIgKwogICAgICAgICAgICAgICAgIndoaXRlLXNwYWNlOm5vd3JhcDsiICsKICAgICAgICAgICAgICAgICJsaW5lLWhlaWdodDoyNXB4OyIgKwogICAgICAgICAgICAgICAgInBhZGRpbmc6MCAxNnB4OyIgKwogICAgICAgICAgICAgICAgImJvcmRlcjoxcHggc29saWQgI2NjYzsiICsKICAgICAgICAgICAgICAgICJib3JkZXItd2lkdGg6MXB4IDFweCAxcHggMDsiICsKICAgICAgICAgICAgICAgICJib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czo1cHg7IiArCiAgICAgICAgICAgICAgICAiYm94LXNpemluZzogY29udGVudC1ib3g7IiArCiAgICAgICAgICAgICJ9IiArCiAgICAgICAgICAgICIjcndsLWlxeGluIGlucHV0eyIgKwogICAgICAgICAgICAgICAgIm1hcmdpbjogMDsiICsKICAgICAgICAgICAgICAgICJwYWRkaW5nOiAwOyIgKwogICAgICAgICAgICAgICAgInZlcnRpY2FsLWFsaWduOm1pZGRsZTsiICsKICAgICAgICAgICAgICAgICItd2Via2l0LWFwcGVhcmFuY2U6Y2hlY2tib3g7IiArCiAgICAgICAgICAgICAgICAiLW1vei1hcHBlYXJhbmNlOmNoZWNrYm94OyIgKwogICAgICAgICAgICAgICAgInBvc2l0aW9uOiBzdGF0aWM7IiArCiAgICAgICAgICAgICAgICAiY2xpcDogYXV0bzsiICsKICAgICAgICAgICAgICAgICJvcGFjaXR5OiAxOyIgKwogICAgICAgICAgICAifSIgKwogICAgICAgICAgICAiI3J3bC1pcXhpbi5yd2wtYWN0aXZlLWlxeGlueyIgKwogICAgICAgICAgICAgICAgInRvcDogMTBweDsiICsKICAgICAgICAgICAgICAgICJsZWZ0OiAwcHg7IiArCiAgICAgICAgICAgICAgICAib3BhY2l0eTogMC45OyIgKwogICAgICAgICAgICAgICAgImhlaWdodDogMzJweDsiICsKICAgICAgICAgICAgICAgICJsaW5lLWhlaWdodDogMzJweCIgKwogICAgICAgICAgICAifSIgKwogICAgICAgICAgICAiI3J3bC1pcXhpbiBsYWJlbHsiICsKICAgICAgICAgICAgICAgICJtYXJnaW46MDsiICsKICAgICAgICAgICAgICAgICJwYWRkaW5nOjA7IiArCiAgICAgICAgICAgICAgICAiZm9udC13ZWlnaHQ6NTAwOyIgKwogICAgICAgICAgICAifSIKICAgICAgICApOwogICAgfTsKCiAgICAvLyDpg6jliIbnvZHnq5nph4fnlKjkuoblhbbku5bnmoTpmLLlpI3liLbmiYvmrrUKICAgIGZ1bmN0aW9uIGNsZWFyKCl7CiAgICAgICAgLy8gY29uc29sZS5sb2coaG9zdG5hbWUpOwogICAgICAgIHN3aXRjaCAoaG9zdG5hbWUpewogICAgICAgICAgICBjYXNlICJ3d3cuejN6NC5jb20iOiBjbGVhcl96M3o0KCk7IGJyZWFrOwogICAgICAgICAgICBjYXNlICJodWF5dS5iYWlkdS5jb20iOiBjbGVhcl9odWF5dSgpOyBicmVhazsKICAgICAgICAgICAgLy8gY2FzZSAibmV3cy5pZmVuZy5jb20iOgogICAgICAgICAgICAvLyBjYXNlICJ3d3cuMTV5YW4uY29tIjogcnVsZSA9IGNsZWFyXzE1eWFuKCk7YnJlYWs7CiAgICAgICAgfQogICAgICAgIHJldHVybiBydWxlcy5ydWxlX3BsdXM7CiAgICB9CiAgICAvLyB3d3cuejN6NC5jb20g5YaN5LiJ5YaN5ZubLCDmloflrZfkuIrpnaLopobnm5bkuIDlsYLpgI/mmI7nmoRkaXYKICAgIGZ1bmN0aW9uIGNsZWFyX3ozejQoKXsKICAgICAgICB2YXIgb0RpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5tb3ZpZWRvd25hZGRpdiIpOwogICAgICAgIGlmIChvRGl2KSB7CiAgICAgICAgICAgIG9EaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvRGl2KTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBjbGVhcl9odWF5dSgpewogICAgICAgIHZhciBvRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2pxQ29udGV4dE1lbnUiKTsKICAgICAgICBpZiAob0RpdikgewogICAgICAgICAgICBvRGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob0Rpdik7CiAgICAgICAgfQogICAgfQogICAgLy8gd3d3LjE1eWFuLmNvbSAxNeiogO+8jCDnm5HmjqcgbW91c2Vkb3duCiAgICBmdW5jdGlvbiBjbGVhcl8xNXlhbigpewogICAgICAgIHJldHVybiBydWxlcy5ydWxlX3BsdXM7CiAgICB9CgoKICAgIC8vIOWIneWni+WMlgogICAgZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZygi5L2/55So6KeE5YiZLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWlxeGluIik7CiAgICAgICAgLy8g6ZKI5a+55Liq5Yir572R56uZ6YeH5Y+W5LiN5ZCM55qE562W55WlCiAgICAgICAgdmFyIHJ1bGUgPSBjbGVhcigpOwogICAgICAgIC8vIOiuvue9riBldmVudCDliJfooagKICAgICAgICBob29rX2V2ZW50TmFtZXMgPSBydWxlLmhvb2tfZXZlbnROYW1lcy5zcGxpdCgifCIpOwogICAgICAgIC8vIFRPRE8gQWxsb3dlZCB0byByZXR1cm4gdmFsdWUKICAgICAgICB1bmhvb2tfZXZlbnROYW1lcyA9IHJ1bGUudW5ob29rX2V2ZW50TmFtZXMuc3BsaXQoInwiKTsKICAgICAgICBldmVudE5hbWVzID0gaG9va19ldmVudE5hbWVzLmNvbmNhdCh1bmhvb2tfZXZlbnROYW1lcyk7CgogICAgICAgIC8vIOiwg+eUqOa4heeQhiBET00wIGV2ZW50IOaWueazleeahOW+queOrwogICAgICAgIGlmKHJ1bGUuZG9tMCkgewogICAgICAgICAgICBzZXRJbnRlcnZhbChjbGVhckxvb3AsIDMwICogMTAwMCk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoY2xlYXJMb29wLCAyNTAwKTsKICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBjbGVhckxvb3AsIHRydWUpOwogICAgICAgICAgICBjbGVhckxvb3AoKTsKICAgICAgICB9CgogICAgICAgIC8vIGhvb2sgYWRkRXZlbnRMaXN0ZW5lcgogICAgICAgIGlmKHJ1bGUuaG9va19hZGRFdmVudExpc3RlbmVyKSB7CiAgICAgICAgICAgIEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gYWRkRXZlbnRMaXN0ZW5lcjsKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciA9IGFkZEV2ZW50TGlzdGVuZXI7CiAgICAgICAgfQoKICAgICAgICAvLyBob29rIHByZXZlbnREZWZhdWx0CiAgICAgICAgaWYocnVsZS5ob29rX3ByZXZlbnREZWZhdWx0KSB7CiAgICAgICAgICAgIEV2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgaWYoZXZlbnROYW1lcy5pbmRleE9mKHRoaXMudHlwZSkgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgRXZlbnRfcHJldmVudERlZmF1bHQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIC8vIEhvb2sgc2V0IHJldHVyblZhbHVlCiAgICAgICAgaWYocnVsZS5ob29rX3NldF9yZXR1cm5WYWx1ZSkgewogICAgICAgICAgICBFdmVudC5wcm90b3R5cGUuX19kZWZpbmVTZXR0ZXJfXygncmV0dXJuVmFsdWUnLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGlmKHRoaXMucmV0dXJuVmFsdWUgIT09IHRydWUgJiYgZXZlbnROYW1lcy5pbmRleE9mKHRoaXMudHlwZSkgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMucmV0dXJuVmFsdWUgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgLy8gY29uc29sZS5kZWJ1ZygndXJsOiAnICsgdXJsLCAnc3RvcmFnZU5hbWXvvJonICsgc3RvcmFnZU5hbWUsICdydWxlOiAnICsgcnVsZS5uYW1lKTsKCiAgICAvLyDmt7vliqBDU1MKICAgICAgICBpZihydWxlLmFkZF9jc3MpIHsKICAgICAgICAgICAgR01fYWRkU3R5bGUoJ2h0bWwsIDpub3QoW2NsYXNzKj0icndsLWV4ZW1wdCJdKSB7LXdlYmtpdC11c2VyLXNlbGVjdDp0ZXh0IWltcG9ydGFudDsgLW1vei11c2VyLXNlbGVjdDp0ZXh0IWltcG9ydGFudDt9Jyk7CiAgICAgICAgfQoKICAgIH0KCi8vLS3lvIDlp4vmiafooYwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1pcXhpbgogICAgCiAgICB2YXIgYmxhY2tfbGlzdF92ZXJzaW9uID0gMS4xOwogICAgdmFyIGJsYWNrX2xpc3RfZGVmYXVsdCA9IFsKICAgICAgICAiYi5mYWxvby5jb20iLAogICAgICAgICJib29rLnpodWxhbmcuY29tIiwKICAgICAgICAiYm9vay56b25naGVuZy5jb20iLAogICAgICAgICJjaG9rc3RpY2suY29tIiwKICAgICAgICAiY3V0ZWxpc2E1NS5waXhuZXQubmV0IiwKICAgICAgICAiaHVheXUuYmFpZHUuY29tIiwKICAgICAgICAiaW1hYy5oayIsCiAgICAgICAgImxpZmUudHciLAogICAgICAgICJuZXdzLm1pc3NldmFuLmNvbSIsCiAgICAgICAgInJlYWQucWlkaWFuLmNvbSIsCiAgICAgICAgInd3dy4xNXlhbi5jb20iLAogICAgICAgICJ3d3cuMTdrLmNvbSIsCiAgICAgICAgInd3dy4xODE4My5jb20iLAogICAgICAgICJ3d3cuMzYwZG9jLmNvbSIsCiAgICAgICAgInd3dy5jb2NvMDEubmV0IiwKICAgICAgICAid3d3LmV5dS5jb20iLAogICAgICAgICJ3d3cuaG9uZ3NodS5jb20iLAogICAgICAgICJ3d3cuaG9uZ3hpdS5jb20iLAogICAgICAgICJ3d3cuamp3eGMubmV0IiwKICAgICAgICAid3d3LnJlYWRub3ZlbC5jb20iLAogICAgICAgICJ3d3cudGFkdS5jb20iLAogICAgICAgICJ3d3cueHhzeS5uZXQiLAogICAgICAgICJ3d3cuejN6NC5jb20iLAogICAgICAgICJ3d3cuemhpaHUuY29tIiwKICAgICAgICAieXVlZHUuMTYzLmNvbSIsCiAgICAgICAgImJvb2suaGpzbS50b20uY29tIiwKICAgICAgICAiY2h1YW5nc2hpLnFxLmNvbSIKICAgIF07CgogICAgYWRkQnRuKCk7ICAgLy/pobXpnaLlt6bkuIrop5LmjInpkq7vvIzkuI3mg7PopoHmjInpkq7lj6/ku6Xmiorov5nooYzms6jph4rmjokKICAgIHZhciBibGFja19ub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJsYWNrX25vZGUiKTsKCiAgICB2YXIgbGlzdCA9IGdldF9ibGFja19saXN0KCk7CgogICAgdmFyIGhvc3RuYW1lID0gd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lOyAKICAgIGlmKGNoZWNrX2JsYWNrX2xpc3QobGlzdCxob3N0bmFtZSkpewogICAgICAgIC8vIOWmguaenOazqOmHiuaOieaMiemSru+8jOatpOWkhOS8muiOt+WPluS4jeWIsAogICAgICAgIGlmKGJsYWNrX25vZGUpewogICAgICAgICAgICBibGFja19ub2RlLmNoZWNrZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgICAvL2NvbnNvbGUubG9nKCLkvY3kuo7pu5HlkI3ljZXkuK0tLS0tLS0tLS0tLS0tLS0tcmV2b3ZlX3dlYl9saW1pdHMtLS0tLS1pcXhpbiIpOwogICAgICAgIGluaXQoKTsKICAgIH0KfSkoKTs="},{"name":"bilibili merged flv+mp4+ass+enhance","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http://www.bilibili.com/video/av*","https://www.bilibili.com/video/av*","http://bangumi.bilibili.com/anime/*/play*","https://bangumi.bilibili.com/anime/*/play*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-begin","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1498965419488,"data":{}},"enabled":false,"position":25,"file_url":"https://greasyfork.org/scripts/27819-bilibili-merged-flv-mp4-ass-enhance/code/bilibili%20merged%20flv+mp4+ass+enhance.user.js","uuid":"95acdcf7-7cfb-4aa1-aca0-c1a608379e92","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIGJpbGliaWxpIG1lcmdlZCBmbHYrbXA0K2FzcytlbmhhbmNlCi8vIEBuYW1lc3BhY2UgICBodHRwOi8vcWxpNS50ay8KLy8gQGhvbWVwYWdlVVJMIGh0dHBzOi8vZ2l0aHViLmNvbS9saXFpMDgxNi9iaWxpdHdpbi8KLy8gQGRlc2NyaXB0aW9uIGJpbGliaWxpL+WTlOWTqeWTlOWTqTrotoXmuIVGTFbkuIvovb0sRkxW5ZCI5bm2LOWOn+eUn01QNOS4i+i9vSzlvLnluZVBU1PkuIvovb0s5pKt5pS+5L2T6aqM5aKe5by6LEhUVFBTLOWOn+eUn2FwcHNlY3JldCzkuI3lgJ/liqnlhbbku5bnvZHnq5kKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL2F2KgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL2F2KgovLyBAaW5jbHVkZSAgICAgaHR0cDovL2Jhbmd1bWkuYmlsaWJpbGkuY29tL2FuaW1lLyovcGxheSoKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vYmFuZ3VtaS5iaWxpYmlsaS5jb20vYW5pbWUvKi9wbGF5KgovLyBAdmVyc2lvbiAgICAgMS4zCi8vIEBhdXRob3IgICAgICBxbGk1Ci8vIEBjb3B5cmlnaHQgICBxbGk1LCAyMDE0Kywg55Sw55SfLCBncmVwbXVzaWMKLy8gQGxpY2Vuc2UgICAgIE1vemlsbGEgUHVibGljIExpY2Vuc2UgMi4wOyBodHRwOi8vd3d3Lm1vemlsbGEub3JnL01QTC8yLjAvCi8vIEBydW4tYXQgICAgICBkb2N1bWVudC1iZWdpbgovLyBAZ3JhbnQgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgIEdNX3NldFZhbHVlCi8vID09L1VzZXJTY3JpcHQ9PQoKbGV0IGRlYnVnT3B0aW9uID0gewogICAgLy8gY29uc29sZeS8mua4heepuu+8jOeUn+aIkCB3aW5kb3cubSDlkowgd2luZG93LnAKICAgIC8vZGVidWc6IDEsCgogICAgLy8g5Yir5ouW5ZWmfgogICAgLy9iZXRhYmV0YTogMSwKCiAgICAvLyBVUOS4u+S4jeWuueaYk++8jELnq5nkuZ/kuI3lrrnmmJPvvIzlhYXnlLXmmK/mnInnm4rnmoTlsJ3or5XvvIzmiJHkuI3pvJPlirHot7PjgIIKICAgIC8vYXV0b05leHRUaW1lb3V0OiAwLAp9OwoKLyoqCiAqIEJpbGlUd2luIGNvbnNpc3Qgb2YgdHdvIHBhcnRzIC0gQmlsaU1vbmtleSBhbmQgQmlsaVBvbHlmaWxsLiAKICogVGhleSBhcmUgYnVuZGxlZCBiZWNhdXNlIEkgYW0gdG9vIGxhenkgdG8gd3JpdGUgdHdvIHVzZXIgaW50ZXJmYWNlcy4KICogCiAqIFNvIHdoYXQgaXMgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBCaWxpTW9ua2V5IGFuZCBCaWxpUG9seWZpbGw/CiAqIAogKiBCaWxpTW9ua2V5IGRlYWxzIHdpdGggbmV0d29yay4gSXQgaXMgYSAobmFJdmUpIFNlcnZpY2UgV29ya2VyLiAKICogVGhpcyBpcyBhbHNvIHdoeSBpdCB1c2VzIEluZGV4ZWREQiBpbnN0ZWFkIG9mIGxvY2FsU3RvcmFnZS4KICogQmlsaVBvbHlmaWxsIGRlYWxzIHdpdGggZXhwZXJpZW5jZS4gSXQgaXMgbW9yZSBhICJ1c2VyIHNjcmlwdCIuIAogKiBFdmVyeXRoaW5nIGl0IGNhbiBkbyBjYW4gYmUgZG9uZSBieSBoYW5kLgogKiAKICogQmlsaVBvbHlmaWxsIHdpbGwgYmUgcG9pbnRsZXNzIGluIHRoZSBsb25nIHJ1biAtIEkgYmVsaWV2ZSBiaWxpYmlsaSAKICogd2lsbCBmaW5hbGx5IHByb3ZpZGUgdGhlc2UgZnVuY3Rpb25zIHRoZW1zZWx2ZXMuCiAqICAKICogVGhpcyBzY3JpcHQgaXMgbGljZW5zZWQgdW5kZXIgTW96aWxsYSBQdWJsaWMgTGljZW5zZSAyLjAKICogaHR0cHM6Ly93d3cubW96aWxsYS5vcmcvTVBMLzIuMC8KICogCiAqIENvdmVyZWQgU29mdHdhcmUgaXMgcHJvdmlkZWQgdW5kZXIgdGhpcyBMaWNlbnNlIG9uIGFuIOKAnGFzIGlz4oCdIGJhc2lzLCAKICogd2l0aG91dCB3YXJyYW50eSBvZiBhbnkga2luZCwgZWl0aGVyIGV4cHJlc3NlZCwgaW1wbGllZCwgb3Igc3RhdHV0b3J5LCAKICogaW5jbHVkaW5nLCB3aXRob3V0IGxpbWl0YXRpb24sIHdhcnJhbnRpZXMgdGhhdCB0aGUgQ292ZXJlZCBTb2Z0d2FyZSAKICogaXMgZnJlZSBvZiBkZWZlY3RzLCBtZXJjaGFudGFibGUsIGZpdCBmb3IgYSBwYXJ0aWN1bGFyIHB1cnBvc2Ugb3IgCiAqIG5vbi1pbmZyaW5naW5nLiBUaGUgZW50aXJlIHJpc2sgYXMgdG8gdGhlIHF1YWxpdHkgYW5kIHBlcmZvcm1hbmNlIG9mIAogKiB0aGUgQ292ZXJlZCBTb2Z0d2FyZSBpcyB3aXRoIFlvdS4gU2hvdWxkIGFueSBDb3ZlcmVkIFNvZnR3YXJlIHByb3ZlIAogKiBkZWZlY3RpdmUgaW4gYW55IHJlc3BlY3QsIFlvdSAobm90IGFueSBDb250cmlidXRvcikgYXNzdW1lIHRoZSBjb3N0IAogKiBvZiBhbnkgbmVjZXNzYXJ5IHNlcnZpY2luZywgcmVwYWlyLCBvciBjb3JyZWN0aW9uLiBUaGlzIGRpc2NsYWltZXIgCiAqIG9mIHdhcnJhbnR5IGNvbnN0aXR1dGVzIGFuIGVzc2VudGlhbCBwYXJ0IG9mIHRoaXMgTGljZW5zZS4gTm8gdXNlIG9mIAogKiBhbnkgQ292ZXJlZCBTb2Z0d2FyZSBpcyBhdXRob3JpemVkIHVuZGVyIHRoaXMgTGljZW5zZSBleGNlcHQgdW5kZXIgCiAqIHRoaXMgZGlzY2xhaW1lci4KICogCiAqIFVuZGVyIG5vIGNpcmN1bXN0YW5jZXMgYW5kIHVuZGVyIG5vIGxlZ2FsIHRoZW9yeSwgd2hldGhlciB0b3J0IAogKiAoaW5jbHVkaW5nIG5lZ2xpZ2VuY2UpLCBjb250cmFjdCwgb3Igb3RoZXJ3aXNlLCBzaGFsbCBhbnkgQ29udHJpYnV0b3IsIAogKiBvciBhbnlvbmUgd2hvIGRpc3RyaWJ1dGVzIENvdmVyZWQgU29mdHdhcmUgYXMgcGVybWl0dGVkIGFib3ZlLCBiZSAKICogbGlhYmxlIHRvIFlvdSBmb3IgYW55IGRpcmVjdCwgaW5kaXJlY3QsIHNwZWNpYWwsIGluY2lkZW50YWwsIG9yIAogKiBjb25zZXF1ZW50aWFsIGRhbWFnZXMgb2YgYW55IGNoYXJhY3RlciBpbmNsdWRpbmcsIHdpdGhvdXQgbGltaXRhdGlvbiwgCiAqIGRhbWFnZXMgZm9yIGxvc3QgcHJvZml0cywgbG9zcyBvZiBnb29kd2lsbCwgd29yayBzdG9wcGFnZSwgY29tcHV0ZXIgCiAqIGZhaWx1cmUgb3IgbWFsZnVuY3Rpb24sIG9yIGFueSBhbmQgYWxsIG90aGVyIGNvbW1lcmNpYWwgZGFtYWdlcyBvciAKICogbG9zc2VzLCBldmVuIGlmIHN1Y2ggcGFydHkgc2hhbGwgaGF2ZSBiZWVuIGluZm9ybWVkIG9mIHRoZSBwb3NzaWJpbGl0eSAKICogb2Ygc3VjaCBkYW1hZ2VzLiBUaGlzIGxpbWl0YXRpb24gb2YgbGlhYmlsaXR5IHNoYWxsIG5vdCBhcHBseSB0byAKICogbGlhYmlsaXR5IGZvciBkZWF0aCBvciBwZXJzb25hbCBpbmp1cnkgcmVzdWx0aW5nIGZyb20gc3VjaCBwYXJ0eeKAmXMgCiAqIG5lZ2xpZ2VuY2UgdG8gdGhlIGV4dGVudCBhcHBsaWNhYmxlIGxhdyBwcm9oaWJpdHMgc3VjaCBsaW1pdGF0aW9uLiAKICogU29tZSBqdXJpc2RpY3Rpb25zIGRvIG5vdCBhbGxvdyB0aGUgZXhjbHVzaW9uIG9yIGxpbWl0YXRpb24gb2YgCiAqIGluY2lkZW50YWwgb3IgY29uc2VxdWVudGlhbCBkYW1hZ2VzLCBzbyB0aGlzIGV4Y2x1c2lvbiBhbmQgbGltaXRhdGlvbiAKICogbWF5IG5vdCBhcHBseSB0byBZb3UuCiAqLwoKLyoqCiAqIEJpbGlNb25rZXkKICogQSBiaWxpYmlsaSB1c2VyIHNjcmlwdAogKiBieSBxbGk1IGdvb2RscTExW2F0XShnbWFpbHwxNjMpLmNvbQogKiAKICogVGhlIEZMViBtZXJnZSB1dGlsaXR5IGlzIGEgSmF2YXNjcmlwdCB0cmFuc2xhdGlvbiBvZiAKICogaHR0cHM6Ly9naXRodWIuY29tL2dyZXBtdXNpYy9mbHZtZXJnZQogKiBieSBncmVwbXVzaWMKICogCiAqIFRoZSBBU1MgY29udmVydCB1dGlsaXR5IGlzIGEgd3JhcHBlciBvZgogKiBodHRwczovL3RpYW5zaC5naXRodWIuaW8vdXMtZGFubWFrdS9iaWxpYmlsaS8KICogYnkgdGlhbnNoCiAqIChUaGlzIHNjcmlwdCBpcyBsb2FkZWQgZHluYW1pY2FsbHkgc28gdGhhdCB1cGRhdGVzIGNhbiBiZSBhcHBsaWVkIAogKiBpbnN0YW50bHkuIElmIGdpdGh1YiBnZXRzIGJsb2NrZWQgZnJvbSB5b3VyIHJlZ2lvbiwgcGxlYXNlIGdpdmUgCiAqIEJpbGlNb25rZXk6OmxvYWRBU1NTY3JpcHQgYSBuZXcgZGVmYXVsdCBzcmMuKQogKiDvvIjlpoLmnpxnaXRodWLooqvlopnkuobvvIxDdHJsK0bmkJzntKJsb2FkQVNTU2NyaXB077yM57uZ5a6D5LiA5Liq5paw55qE572R5Z2A44CC77yJCiAqIAogKiBUaGlzIHNjcmlwdCBpcyBsaWNlbnNlZCB1bmRlciBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlIDIuMAogKiBodHRwczovL3d3dy5tb3ppbGxhLm9yZy9NUEwvMi4wLwogKi8KCi8qKgogKiBCaWxpUG9seWZpbGwKICogQSBiaWxpYmlsaSB1c2VyIHNjcmlwdAogKiBieSBxbGk1IGdvb2RscTExW2F0XShnbWFpbHwxNjMpLmNvbQogKiAKICogVGhpcyBzY3JpcHQgaXMgbGljZW5zZWQgdW5kZXIgTW96aWxsYSBQdWJsaWMgTGljZW5zZSAyLjAKICogaHR0cHM6Ly93d3cubW96aWxsYS5vcmcvTVBMLzIuMC8KICovCgpjbGFzcyBUd2VudHlGb3VyRGF0YVZpZXcgZXh0ZW5kcyBEYXRhVmlldyB7CiAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7CiAgICAgICAgaWYgKFR3ZW50eUZvdXJEYXRhVmlldy5lczYpIHsKICAgICAgICAgICAgc3VwZXIoLi4uYXJncyk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAvLyBFUzUgcG9seWZpbGwKICAgICAgICAgICAgLy8gSXQgaXMgZGlydHkuIFZlcnkgZGlydHkuCiAgICAgICAgICAgIGlmIChUd2VudHlGb3VyRGF0YVZpZXcuZXM2ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgVHdlbnR5Rm91ckRhdGFWaWV3LmVzNiA9IDE7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyKC4uLmFyZ3MpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZS5uYW1lID09ICdUeXBlRXJyb3InKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZW50eUZvdXJEYXRhVmlldy5lczYgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gKG9iaiwgcHJvdG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5fX3Byb3RvX18gPSBwcm90bzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmo7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHNldFByb3RvdHlwZU9mKFR3ZW50eUZvdXJEYXRhVmlldywgT2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHN1cGVyKCk7CiAgICAgICAgICAgIGxldCBfZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoLi4uYXJncyk7CiAgICAgICAgICAgIF9kYXRhVmlldy5nZXRVaW50MjQgPSBUd2VudHlGb3VyRGF0YVZpZXcucHJvdG90eXBlLmdldFVpbnQyNDsKICAgICAgICAgICAgX2RhdGFWaWV3LnNldFVpbnQyNCA9IFR3ZW50eUZvdXJEYXRhVmlldy5wcm90b3R5cGUuc2V0VWludDI0OwogICAgICAgICAgICBfZGF0YVZpZXcuaW5kZXhPZiA9IFR3ZW50eUZvdXJEYXRhVmlldy5wcm90b3R5cGUuaW5kZXhPZjsKICAgICAgICAgICAgcmV0dXJuIF9kYXRhVmlldzsKICAgICAgICB9CiAgICB9CgogICAgZ2V0VWludDI0KGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikgewogICAgICAgIGlmIChsaXR0bGVFbmRpYW4pIHRocm93ICdsaXR0bGVFbmRpYW4gaW50MjQgbm90IHN1cHBvcnRlZCc7CiAgICAgICAgbGV0IG1zYiA9IHRoaXMuZ2V0VWludDgoYnl0ZU9mZnNldCk7CiAgICAgICAgcmV0dXJuIChtc2IgPDwgMTYgfCB0aGlzLmdldFVpbnQxNihieXRlT2Zmc2V0ICsgMSkpOwogICAgfQoKICAgIHNldFVpbnQyNChieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKSB7CiAgICAgICAgaWYgKGxpdHRsZUVuZGlhbikgdGhyb3cgJ2xpdHRsZUVuZGlhbiBpbnQyNCBub3Qgc3VwcG9ydGVkJzsKICAgICAgICBpZiAodmFsdWUgPiAweDAwRkZGRkZGKSB0aHJvdyAnc2V0VWludDI0OiBudW1iZXIgb3V0IG9mIHJhbmdlJzsKICAgICAgICBsZXQgbXNiID0gdmFsdWUgPj4gMTY7CiAgICAgICAgbGV0IGxzYiA9IHZhbHVlICYgMHhGRkZGOwogICAgICAgIHRoaXMuc2V0VWludDgoYnl0ZU9mZnNldCwgbXNiKTsKICAgICAgICB0aGlzLnNldFVpbnQxNihieXRlT2Zmc2V0ICsgMSwgbHNiKTsKICAgIH0KCiAgICBpbmRleE9mKHNlYXJjaCwgc3RhcnRPZmZzZXQgPSAwLCBlbmRPZmZzZXQgPSB0aGlzLmJ5dGVMZW5ndGggLSBzZWFyY2gubGVuZ3RoICsgMSkgewogICAgICAgIC8vIEkga25vdyBpdCBpcyBOQUlWRQogICAgICAgIGlmIChzZWFyY2guY2hhckNvZGVBdCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRPZmZzZXQ7IGkgPCBlbmRPZmZzZXQ7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VWludDgoaSkgIT0gc2VhcmNoLmNoYXJDb2RlQXQoMCkpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gMTsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2VhcmNoLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VWludDgoaSArIGopICE9IHNlYXJjaC5jaGFyQ29kZUF0KGopKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGZvdW5kKSByZXR1cm4gaTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRPZmZzZXQ7IGkgPCBlbmRPZmZzZXQ7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VWludDgoaSkgIT0gc2VhcmNoWzBdKSBjb250aW51ZTsKICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IDE7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNlYXJjaC5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdldFVpbnQ4KGkgKyBqKSAhPSBzZWFyY2hbal0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoZm91bmQpIHJldHVybiBpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9CiAgICB9Cn0KCmNsYXNzIEZMVlRhZyB7CiAgICBjb25zdHJ1Y3RvcihkYXRhVmlldywgY3VycmVudE9mZnNldCkgewogICAgICAgIHRoaXMudGFnSGVhZGVyID0gbmV3IFR3ZW50eUZvdXJEYXRhVmlldyhkYXRhVmlldy5idWZmZXIsIGRhdGFWaWV3LmJ5dGVPZmZzZXQgKyBjdXJyZW50T2Zmc2V0LCAxMSk7CiAgICAgICAgdGhpcy50YWdEYXRhID0gbmV3IFR3ZW50eUZvdXJEYXRhVmlldyhkYXRhVmlldy5idWZmZXIsIGRhdGFWaWV3LmJ5dGVPZmZzZXQgKyBjdXJyZW50T2Zmc2V0ICsgMTEsIHRoaXMuZGF0YVNpemUpOwogICAgICAgIHRoaXMucHJldmlvdXNTaXplID0gbmV3IFR3ZW50eUZvdXJEYXRhVmlldyhkYXRhVmlldy5idWZmZXIsIGRhdGFWaWV3LmJ5dGVPZmZzZXQgKyBjdXJyZW50T2Zmc2V0ICsgMTEgKyB0aGlzLmRhdGFTaXplLCA0KTsKICAgIH0KCiAgICBnZXQgdGFnVHlwZSgpIHsKICAgICAgICByZXR1cm4gdGhpcy50YWdIZWFkZXIuZ2V0VWludDgoMCk7CiAgICB9CgogICAgZ2V0IGRhdGFTaXplKCkgewogICAgICAgIHJldHVybiB0aGlzLnRhZ0hlYWRlci5nZXRVaW50MjQoMSk7CiAgICB9CgogICAgZ2V0IHRpbWVzdGFtcCgpIHsKICAgICAgICByZXR1cm4gdGhpcy50YWdIZWFkZXIuZ2V0VWludDI0KDQpOwogICAgfQoKICAgIGdldCB0aW1lc3RhbXBFeHRlbnNpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudGFnSGVhZGVyLmdldFVpbnQ4KDcpOwogICAgfQoKICAgIGdldCBzdHJlYW1JRCgpIHsKICAgICAgICByZXR1cm4gdGhpcy50YWdIZWFkZXIuZ2V0VWludDI0KDgpOwogICAgfQoKICAgIHN0cmlwS2V5ZnJhbWVzU2NyaXB0RGF0YSgpIHsKICAgICAgICBsZXQgaGFzS2V5ZnJhbWVzID0gJ2hhc0tleWZyYW1lc1x4MDEnOwogICAgICAgIGxldCBrZXlmcmFtZXMgPSAnXHgwMFx4MDlrZXlmcmFtc1x4MDMnOwogICAgICAgIGlmICh0aGlzLnRhZ1R5cGUgIT0gMHgxMikgdGhyb3cgJ2NhbiBub3Qgc3RyaXAgbm9uLXNjcmlwdGRhdGFcJ3Mga2V5ZnJhbWVzJzsKCiAgICAgICAgbGV0IGluZGV4OwogICAgICAgIGluZGV4ID0gdGhpcy50YWdEYXRhLmluZGV4T2YoaGFzS2V5ZnJhbWVzKTsKICAgICAgICBpZiAoaW5kZXggIT0gLTEpIHsKICAgICAgICAgICAgLy8weDAxMDEgPT4gMHgwMTAwCiAgICAgICAgICAgIHRoaXMudGFnRGF0YS5zZXRVaW50OChpbmRleCArIGhhc0tleWZyYW1lcy5sZW5ndGgsIDB4MDApOwogICAgICAgIH0KCiAgICAgICAgLy8gV2VsbCwgSSB0aGluayBpdCBpcyB1bm5lY2Vzc2FyeQogICAgICAgIC8qaW5kZXggPSB0aGlzLnRhZ0RhdGEuaW5kZXhPZihrZXlmcmFtZXMpCiAgICAgICAgaWYgKGluZGV4ICE9IC0xKSB7CiAgICAgICAgICAgIHRoaXMuZGF0YVNpemUgPSBpbmRleDsKICAgICAgICAgICAgdGhpcy50YWdIZWFkZXIuc2V0VWludDI0KDEsIGluZGV4KTsKICAgICAgICAgICAgdGhpcy50YWdEYXRhID0gbmV3IFR3ZW50eUZvdXJEYXRhVmlldyh0aGlzLnRhZ0RhdGEuYnVmZmVyLCB0aGlzLnRhZ0RhdGEuYnl0ZU9mZnNldCwgaW5kZXgpOwogICAgICAgIH0qLwogICAgfQoKICAgIGdldER1cmF0aW9uKCkgewogICAgICAgIGlmICh0aGlzLnRhZ1R5cGUgIT0gMHgxMikgdGhyb3cgJ2NhbiBub3QgZmluZCBub24tc2NyaXB0ZGF0YVwncyBkdXJhdGlvbic7CgogICAgICAgIGxldCBkdXJhdGlvbiA9ICdkdXJhdGlvblx4MDAnOwogICAgICAgIGxldCBpbmRleCA9IHRoaXMudGFnRGF0YS5pbmRleE9mKGR1cmF0aW9uKTsKICAgICAgICBpZiAoaW5kZXggPT0gLTEpIHRocm93ICdjYW4gbm90IGdldCBmbHYgbWV0YSBkdXJhdGlvbic7CgogICAgICAgIGluZGV4ICs9IDk7CiAgICAgICAgcmV0dXJuIHRoaXMudGFnRGF0YS5nZXRGbG9hdDY0KGluZGV4KTsKICAgIH0KCiAgICBnZXREdXJhdGlvbkFuZFZpZXcoKSB7CiAgICAgICAgaWYgKHRoaXMudGFnVHlwZSAhPSAweDEyKSB0aHJvdyAnY2FuIG5vdCBmaW5kIG5vbi1zY3JpcHRkYXRhXCdzIGR1cmF0aW9uJzsKCiAgICAgICAgbGV0IGR1cmF0aW9uID0gJ2R1cmF0aW9uXHgwMCc7CiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy50YWdEYXRhLmluZGV4T2YoZHVyYXRpb24pOwogICAgICAgIGlmIChpbmRleCA9PSAtMSkgdGhyb3cgJ2NhbiBub3QgZ2V0IGZsdiBtZXRhIGR1cmF0aW9uJzsKCiAgICAgICAgaW5kZXggKz0gOTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkdXJhdGlvbjogdGhpcy50YWdEYXRhLmdldEZsb2F0NjQoaW5kZXgpLAogICAgICAgICAgICBkdXJhdGlvbkRhdGFWaWV3OiBuZXcgVHdlbnR5Rm91ckRhdGFWaWV3KHRoaXMudGFnRGF0YS5idWZmZXIsIHRoaXMudGFnRGF0YS5ieXRlT2Zmc2V0ICsgaW5kZXgsIDgpCiAgICAgICAgfTsKICAgIH0KCiAgICBnZXRDb21iaW5lZFRpbWVzdGFtcCgpIHsKICAgICAgICByZXR1cm4gKHRoaXMudGltZXN0YW1wRXh0ZW5zaW9uIDw8IDI0IHwgdGhpcy50aW1lc3RhbXApOwogICAgfQoKICAgIHNldENvbWJpbmVkVGltZXN0YW1wKHRpbWVzdGFtcCkgewogICAgICAgIGlmICh0aW1lc3RhbXAgPCAwKSB0aHJvdyAndGltZXN0YW1wIDwgMCc7CiAgICAgICAgdGhpcy50YWdIZWFkZXIuc2V0VWludDgoNywgdGltZXN0YW1wID4+IDI0KTsKICAgICAgICB0aGlzLnRhZ0hlYWRlci5zZXRVaW50MjQoNCwgdGltZXN0YW1wICYgMHgwMEZGRkZGRik7CiAgICB9Cn0KCmNsYXNzIEZMViB7CiAgICBjb25zdHJ1Y3RvcihkYXRhVmlldykgewogICAgICAgIGlmIChkYXRhVmlldy5pbmRleE9mKCdGTFYnLCAwLCAxKSAhPSAwKSB0aHJvdyAnSW52YWxpZCBGTFYgaGVhZGVyJzsKICAgICAgICB0aGlzLmhlYWRlciA9IG5ldyBUd2VudHlGb3VyRGF0YVZpZXcoZGF0YVZpZXcuYnVmZmVyLCBkYXRhVmlldy5ieXRlT2Zmc2V0LCA5KTsKICAgICAgICB0aGlzLmZpcnN0UHJldmlvdXNUYWdTaXplID0gbmV3IFR3ZW50eUZvdXJEYXRhVmlldyhkYXRhVmlldy5idWZmZXIsIGRhdGFWaWV3LmJ5dGVPZmZzZXQgKyA5LCA0KTsKCiAgICAgICAgdGhpcy50YWdzID0gW107CiAgICAgICAgbGV0IG9mZnNldCA9IHRoaXMuaGVhZGVyTGVuZ3RoICsgNDsKICAgICAgICB3aGlsZSAob2Zmc2V0IDwgZGF0YVZpZXcuYnl0ZUxlbmd0aCkgewogICAgICAgICAgICBsZXQgdGFnID0gbmV3IEZMVlRhZyhkYXRhVmlldywgb2Zmc2V0KTsKICAgICAgICAgICAgLy8gZGVidWcgZm9yIHNjcnBpdCBkYXRhIHRhZwogICAgICAgICAgICAvLyBpZiAodGFnLnRhZ1R5cGUgIT0gMHgwOCAmJiB0YWcudGFnVHlwZSAhPSAweDA5KSAKICAgICAgICAgICAgb2Zmc2V0ICs9IDExICsgdGFnLmRhdGFTaXplICsgNDsKICAgICAgICAgICAgdGhpcy50YWdzLnB1c2godGFnKTsKICAgICAgICB9CgogICAgICAgIGlmIChvZmZzZXQgIT0gZGF0YVZpZXcuYnl0ZUxlbmd0aCkgdGhyb3cgJ0ZMViB1bmV4cGVjdGVkIGVuZCBvZiBmaWxlJzsKICAgIH0KCiAgICBnZXQgdHlwZSgpIHsKICAgICAgICByZXR1cm4gJ0ZMVic7CiAgICB9CgogICAgZ2V0IHZlcnNpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyLmdldFVpbnQ4KDMpOwogICAgfQoKICAgIGdldCB0eXBlRmxhZygpIHsKICAgICAgICByZXR1cm4gdGhpcy5oZWFkZXIuZ2V0VWludDgoNCk7CiAgICB9CgogICAgZ2V0IGhlYWRlckxlbmd0aCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5oZWFkZXIuZ2V0VWludDMyKDUpOwogICAgfQoKICAgIHN0YXRpYyBtZXJnZShmbHZzKSB7CiAgICAgICAgaWYgKGZsdnMubGVuZ3RoIDwgMSkgdGhyb3cgJ1VzYWdlOiBGTFYubWVyZ2UoW2ZsdnNdKSc7CiAgICAgICAgbGV0IGJsb2JQYXJ0cyA9IFtdOwogICAgICAgIGxldCBiYXNldGltZXN0YW1wID0gWzAsIDBdOwogICAgICAgIGxldCBsYXN0dGltZXN0YW1wID0gWzAsIDBdOwogICAgICAgIGxldCBkdXJhdGlvbiA9IDAuMDsKICAgICAgICBsZXQgZHVyYXRpb25EYXRhVmlldzsKCiAgICAgICAgYmxvYlBhcnRzLnB1c2goZmx2c1swXS5oZWFkZXIpOwogICAgICAgIGJsb2JQYXJ0cy5wdXNoKGZsdnNbMF0uZmlyc3RQcmV2aW91c1RhZ1NpemUpOwoKICAgICAgICBmb3IgKGxldCBmbHYgb2YgZmx2cykgewogICAgICAgICAgICBsZXQgYnRzID0gZHVyYXRpb24gKiAxMDAwOwogICAgICAgICAgICBiYXNldGltZXN0YW1wWzBdID0gbGFzdHRpbWVzdGFtcFswXTsKICAgICAgICAgICAgYmFzZXRpbWVzdGFtcFsxXSA9IGxhc3R0aW1lc3RhbXBbMV07CiAgICAgICAgICAgIGJ0cyA9IE1hdGgubWF4KGJ0cywgYmFzZXRpbWVzdGFtcFswXSwgYmFzZXRpbWVzdGFtcFsxXSk7CiAgICAgICAgICAgIGxldCBmb3VuZER1cmF0aW9uID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgdGFnIG9mIGZsdi50YWdzKSB7CiAgICAgICAgICAgICAgICBpZiAodGFnLnRhZ1R5cGUgPT0gMHgxMiAmJiAhZm91bmREdXJhdGlvbikgewogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uICs9IHRhZy5nZXREdXJhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIGZvdW5kRHVyYXRpb24gPSAxOwogICAgICAgICAgICAgICAgICAgIGlmIChmbHYgPT0gZmx2c1swXSkgewogICAgICAgICAgICAgICAgICAgICAgICAoeyBkdXJhdGlvbiwgZHVyYXRpb25EYXRhVmlldyB9ID0gdGFnLmdldER1cmF0aW9uQW5kVmlldygpKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGFnLnN0cmlwS2V5ZnJhbWVzU2NyaXB0RGF0YSgpOwogICAgICAgICAgICAgICAgICAgICAgICBibG9iUGFydHMucHVzaCh0YWcudGFnSGVhZGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgYmxvYlBhcnRzLnB1c2godGFnLnRhZ0RhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICBibG9iUGFydHMucHVzaCh0YWcucHJldmlvdXNTaXplKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh0YWcudGFnVHlwZSA9PSAweDA4IHx8IHRhZy50YWdUeXBlID09IDB4MDkpIHsKICAgICAgICAgICAgICAgICAgICBsYXN0dGltZXN0YW1wW3RhZy50YWdUeXBlIC0gMHgwOF0gPSBidHMgKyB0YWcuZ2V0Q29tYmluZWRUaW1lc3RhbXAoKTsKICAgICAgICAgICAgICAgICAgICB0YWcuc2V0Q29tYmluZWRUaW1lc3RhbXAobGFzdHRpbWVzdGFtcFt0YWcudGFnVHlwZSAtIDB4MDhdKTsKICAgICAgICAgICAgICAgICAgICBibG9iUGFydHMucHVzaCh0YWcudGFnSGVhZGVyKTsKICAgICAgICAgICAgICAgICAgICBibG9iUGFydHMucHVzaCh0YWcudGFnRGF0YSk7CiAgICAgICAgICAgICAgICAgICAgYmxvYlBhcnRzLnB1c2godGFnLnByZXZpb3VzU2l6ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZHVyYXRpb25EYXRhVmlldy5zZXRGbG9hdDY0KDAsIGR1cmF0aW9uKTsKCiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKGJsb2JQYXJ0cyk7CiAgICB9CgogICAgc3RhdGljIGFzeW5jIG1lcmdlQmxvYnMoYmxvYnMpIHsKICAgICAgICAvLyBCbG9icyBjYW4gYmUgc3dhcHBlZCB0byBkaXNrLCB3aGlsZSBBcnJheWJ1ZmZlcnMgY2FuIG5vdC4KICAgICAgICAvLyBUaGlzIGlzIGEgUkFNIHNhdmluZyB3b3JrYXJvdW5kLiBTb21ld2hhdC4KICAgICAgICBpZiAoYmxvYnMubGVuZ3RoIDwgMSkgdGhyb3cgJ1VzYWdlOiBGTFYubWVyZ2VCbG9icyhbYmxvYnNdKSc7CiAgICAgICAgbGV0IHJlc3VsdFBhcnRzID0gW107CiAgICAgICAgbGV0IGJhc2V0aW1lc3RhbXAgPSBbMCwgMF07CiAgICAgICAgbGV0IGxhc3R0aW1lc3RhbXAgPSBbMCwgMF07CiAgICAgICAgbGV0IGR1cmF0aW9uID0gMC4wOwogICAgICAgIGxldCBkdXJhdGlvbkRhdGFWaWV3OwoKICAgICAgICBmb3IgKGxldCBibG9iIG9mIGJsb2JzKSB7CiAgICAgICAgICAgIGxldCBidHMgPSBkdXJhdGlvbiAqIDEwMDA7CiAgICAgICAgICAgIGJhc2V0aW1lc3RhbXBbMF0gPSBsYXN0dGltZXN0YW1wWzBdOwogICAgICAgICAgICBiYXNldGltZXN0YW1wWzFdID0gbGFzdHRpbWVzdGFtcFsxXTsKICAgICAgICAgICAgYnRzID0gTWF0aC5tYXgoYnRzLCBiYXNldGltZXN0YW1wWzBdLCBiYXNldGltZXN0YW1wWzFdKTsKICAgICAgICAgICAgbGV0IGZvdW5kRHVyYXRpb24gPSAwOwoKICAgICAgICAgICAgbGV0IGZsdiA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgICAgIGxldCBmciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgICAgICBmci5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKG5ldyBGTFYobmV3IFR3ZW50eUZvdXJEYXRhVmlldyhmci5yZXN1bHQpKSk7CiAgICAgICAgICAgICAgICBmci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKTsKICAgICAgICAgICAgICAgIGZyLm9uZXJyb3IgPSByZWplY3Q7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgZm9yIChsZXQgdGFnIG9mIGZsdi50YWdzKSB7CiAgICAgICAgICAgICAgICBpZiAodGFnLnRhZ1R5cGUgPT0gMHgxMiAmJiAhZm91bmREdXJhdGlvbikgewogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uICs9IHRhZy5nZXREdXJhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIGZvdW5kRHVyYXRpb24gPSAxOwogICAgICAgICAgICAgICAgICAgIGlmIChibG9iID09IGJsb2JzWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFBhcnRzLnB1c2gobmV3IEJsb2IoW2Zsdi5oZWFkZXIsIGZsdi5maXJzdFByZXZpb3VzVGFnU2l6ZV0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgKHsgZHVyYXRpb24sIGR1cmF0aW9uRGF0YVZpZXcgfSA9IHRhZy5nZXREdXJhdGlvbkFuZFZpZXcoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhZy5zdHJpcEtleWZyYW1lc1NjcmlwdERhdGEoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0UGFydHMucHVzaChuZXcgQmxvYihbdGFnLnRhZ0hlYWRlcl0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0UGFydHMucHVzaCh0YWcudGFnRGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFBhcnRzLnB1c2gobmV3IEJsb2IoW3RhZy5wcmV2aW91c1NpemVdKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodGFnLnRhZ1R5cGUgPT0gMHgwOCB8fCB0YWcudGFnVHlwZSA9PSAweDA5KSB7CiAgICAgICAgICAgICAgICAgICAgbGFzdHRpbWVzdGFtcFt0YWcudGFnVHlwZSAtIDB4MDhdID0gYnRzICsgdGFnLmdldENvbWJpbmVkVGltZXN0YW1wKCk7CiAgICAgICAgICAgICAgICAgICAgdGFnLnNldENvbWJpbmVkVGltZXN0YW1wKGxhc3R0aW1lc3RhbXBbdGFnLnRhZ1R5cGUgLSAweDA4XSk7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0UGFydHMucHVzaChuZXcgQmxvYihbdGFnLnRhZ0hlYWRlciwgdGFnLnRhZ0RhdGEsIHRhZy5wcmV2aW91c1NpemVdKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZHVyYXRpb25EYXRhVmlldy5zZXRGbG9hdDY0KDAsIGR1cmF0aW9uKTsKCiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKHJlc3VsdFBhcnRzKTsKICAgIH0KfQoKY2xhc3MgQ2FjaGVEQiB7CiAgICBjb25zdHJ1Y3RvcihkYk5hbWUgPSAnYmlsaU1vbmtleScsIG9zTmFtZSA9ICdmbHYnLCBrZXlQYXRoID0gJ25hbWUnLCBtYXhJdGVtU2l6ZSA9IDEwMCAqIDEwMjQgKiAxMDI0KSB7CiAgICAgICAgdGhpcy5kYk5hbWUgPSBkYk5hbWU7CiAgICAgICAgdGhpcy5vc05hbWUgPSBvc05hbWU7CiAgICAgICAgdGhpcy5rZXlQYXRoID0ga2V5UGF0aDsKICAgICAgICB0aGlzLm1heEl0ZW1TaXplID0gbWF4SXRlbVNpemU7CiAgICAgICAgdGhpcy5kYiA9IG51bGw7CiAgICB9CgogICAgYXN5bmMgZ2V0REIoKSB7CiAgICAgICAgaWYgKHRoaXMuZGIpIHJldHVybiB0aGlzLmRiOwogICAgICAgIHRoaXMuZGIgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgIGxldCBvcGVuUmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKHRoaXMuZGJOYW1lKTsKICAgICAgICAgICAgb3BlblJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgZGIgPSBlLnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICAgICAgICBpZiAoIWRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnModGhpcy5vc05hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUodGhpcy5vc05hbWUsIHsga2V5UGF0aDogdGhpcy5rZXlQYXRoIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIG9wZW5SZXF1ZXN0Lm9uc3VjY2VzcyA9IGUgPT4gewogICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLmRiID0gZS50YXJnZXQucmVzdWx0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBvcGVuUmVxdWVzdC5vbmVycm9yID0gcmVqZWN0OwogICAgICAgIH0pOwogICAgICAgIHJldHVybiB0aGlzLmRiOwogICAgfQoKICAgIGFzeW5jIGFkZERhdGEoaXRlbSwgbmFtZSA9IGl0ZW0ubmFtZSwgZGF0YSA9IGl0ZW0uZGF0YSkgewogICAgICAgIGlmICghZGF0YSBpbnN0YW5jZW9mIEJsb2IpIHRocm93ICdDYWNoZURCOiBkYXRhIG11c3QgYmUgYSBCbG9iJzsKICAgICAgICBsZXQgZGIgPSBhd2FpdCB0aGlzLmdldERCKCk7CiAgICAgICAgbGV0IGl0ZW1DaHVua3MgPSBbXTsKICAgICAgICBsZXQgbnVtQ2h1bmtzID0gTWF0aC5jZWlsKGRhdGEuc2l6ZSAvIHRoaXMubWF4SXRlbVNpemUpOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtQ2h1bmtzOyBpKyspIHsKICAgICAgICAgICAgaXRlbUNodW5rcy5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6IGAke25hbWV9X3BhcnRfJHtpfWAsCiAgICAgICAgICAgICAgICBudW1DaHVua3MsCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLnNsaWNlKGkgKiB0aGlzLm1heEl0ZW1TaXplLCAoaSArIDEpICogdGhpcy5tYXhJdGVtU2l6ZSkKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGxldCByZXFBcnIgPSBbXTsKICAgICAgICBmb3IgKGxldCBjaHVuayBvZiBpdGVtQ2h1bmtzKSB7CiAgICAgICAgICAgIHJlcUFyci5wdXNoKG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgICAgIGxldCByZXEgPSBkYgogICAgICAgICAgICAgICAgICAgIC50cmFuc2FjdGlvbihbdGhpcy5vc05hbWVdLCAncmVhZHdyaXRlJykKICAgICAgICAgICAgICAgICAgICAub2JqZWN0U3RvcmUodGhpcy5vc05hbWUpCiAgICAgICAgICAgICAgICAgICAgLmFkZChjaHVuayk7CiAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gcmVzb2x2ZTsKICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gcmVqZWN0OwogICAgICAgICAgICB9KSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocmVxQXJyKTsKICAgIH0KCiAgICBhc3luYyBwdXREYXRhKGl0ZW0sIG5hbWUgPSBpdGVtLm5hbWUsIGRhdGEgPSBpdGVtLmRhdGEpIHsKICAgICAgICBpZiAoIWRhdGEgaW5zdGFuY2VvZiBCbG9iKSB0aHJvdyAnQ2FjaGVEQjogZGF0YSBtdXN0IGJlIGEgQmxvYic7CiAgICAgICAgbGV0IGRiID0gYXdhaXQgdGhpcy5nZXREQigpOwogICAgICAgIGxldCBpdGVtQ2h1bmtzID0gW107CiAgICAgICAgbGV0IG51bUNodW5rcyA9IE1hdGguY2VpbChkYXRhLnNpemUgLyB0aGlzLm1heEl0ZW1TaXplKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNodW5rczsgaSsrKSB7CiAgICAgICAgICAgIGl0ZW1DaHVua3MucHVzaCh7CiAgICAgICAgICAgICAgICBuYW1lOiBgJHtuYW1lfV9wYXJ0XyR7aX1gLAogICAgICAgICAgICAgICAgbnVtQ2h1bmtzLAogICAgICAgICAgICAgICAgZGF0YTogZGF0YS5zbGljZShpICogdGhpcy5tYXhJdGVtU2l6ZSwgKGkgKyAxKSAqIHRoaXMubWF4SXRlbVNpemUpCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBsZXQgcmVxQXJyID0gW107CiAgICAgICAgZm9yIChsZXQgY2h1bmsgb2YgaXRlbUNodW5rcykgewogICAgICAgICAgICByZXFBcnIucHVzaChuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgcmVxID0gZGIKICAgICAgICAgICAgICAgICAgICAudHJhbnNhY3Rpb24oW3RoaXMub3NOYW1lXSwgJ3JlYWR3cml0ZScpCiAgICAgICAgICAgICAgICAgICAgLm9iamVjdFN0b3JlKHRoaXMub3NOYW1lKQogICAgICAgICAgICAgICAgICAgIC5wdXQoY2h1bmspOwogICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IHJlc29sdmU7CiAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IHJlamVjdDsKICAgICAgICAgICAgfSkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHJlcUFycik7CiAgICB9CgogICAgYXN5bmMgZ2V0RGF0YShpbmRleCkgewogICAgICAgIGxldCBkYiA9IGF3YWl0IHRoaXMuZ2V0REIoKTsKICAgICAgICBsZXQgaXRlbV8wID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgICAgICBsZXQgcmVxID0gZGIKICAgICAgICAgICAgICAgIC50cmFuc2FjdGlvbihbdGhpcy5vc05hbWVdKQogICAgICAgICAgICAgICAgLm9iamVjdFN0b3JlKHRoaXMub3NOYW1lKQogICAgICAgICAgICAgICAgLmdldChgJHtpbmRleH1fcGFydF8wYCk7CiAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSAoKSA9PiByZXNvbHZlKHJlcS5yZXN1bHQpOwogICAgICAgICAgICByZXEub25lcnJvciA9IHJlamVjdDsKICAgICAgICB9KTsKICAgICAgICBpZiAoIWl0ZW1fMCkgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgICBsZXQgeyBudW1DaHVua3MsIGRhdGE6IGRhdGFfMCB9ID0gaXRlbV8wOwoKICAgICAgICBsZXQgcmVxQXJyID0gW1Byb21pc2UucmVzb2x2ZShkYXRhXzApXTsKICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IG51bUNodW5rczsgaSsrKSB7CiAgICAgICAgICAgIHJlcUFyci5wdXNoKG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgICAgIGxldCByZXEgPSBkYgogICAgICAgICAgICAgICAgICAgIC50cmFuc2FjdGlvbihbdGhpcy5vc05hbWVdKQogICAgICAgICAgICAgICAgICAgIC5vYmplY3RTdG9yZSh0aGlzLm9zTmFtZSkKICAgICAgICAgICAgICAgICAgICAuZ2V0KGAke2luZGV4fV9wYXJ0XyR7aX1gKTsKICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSAoKSA9PiByZXNvbHZlKHJlcS5yZXN1bHQuZGF0YSk7CiAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IHJlamVjdDsKICAgICAgICAgICAgfSkpOwogICAgICAgIH0KCiAgICAgICAgbGV0IGl0ZW1DaHVua3MgPSBhd2FpdCBQcm9taXNlLmFsbChyZXFBcnIpOwogICAgICAgIHJldHVybiB7IG5hbWU6IGluZGV4LCBkYXRhOiBuZXcgQmxvYihpdGVtQ2h1bmtzKSB9OwogICAgfQoKICAgIGFzeW5jIGRlbGV0ZURhdGEoaW5kZXgpIHsKICAgICAgICBsZXQgZGIgPSBhd2FpdCB0aGlzLmdldERCKCk7CiAgICAgICAgbGV0IGl0ZW1fMCA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgbGV0IHJlcSA9IGRiCiAgICAgICAgICAgICAgICAudHJhbnNhY3Rpb24oW3RoaXMub3NOYW1lXSkKICAgICAgICAgICAgICAgIC5vYmplY3RTdG9yZSh0aGlzLm9zTmFtZSkKICAgICAgICAgICAgICAgIC5nZXQoYCR7aW5kZXh9X3BhcnRfMGApOwogICAgICAgICAgICByZXEub25zdWNjZXNzID0gKCkgPT4gcmVzb2x2ZShyZXEucmVzdWx0KTsKICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSByZWplY3Q7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKCFpdGVtXzApIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgbGV0IG51bUNodW5rcyA9IGl0ZW1fMC5udW1DaHVua3M7CgogICAgICAgIGxldCByZXFBcnIgPSBbXTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNodW5rczsgaSsrKSB7CiAgICAgICAgICAgIHJlcUFyci5wdXNoKG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgICAgIGxldCByZXEgPSBkYgogICAgICAgICAgICAgICAgICAgIC50cmFuc2FjdGlvbihbdGhpcy5vc05hbWVdLCAncmVhZHdyaXRlJykKICAgICAgICAgICAgICAgICAgICAub2JqZWN0U3RvcmUodGhpcy5vc05hbWUpCiAgICAgICAgICAgICAgICAgICAgLmRlbGV0ZShgJHtpbmRleH1fcGFydF8ke2l9YCk7CiAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gcmVzb2x2ZTsKICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gcmVqZWN0OwogICAgICAgICAgICB9KSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBQcm9taXNlLmFsbChyZXFBcnIpOwogICAgfQoKICAgIGFzeW5jIGRlbGV0ZUVudGlyZURCKCkgewogICAgICAgIGxldCByZXEgPSBpbmRleGVkREIuZGVsZXRlRGF0YWJhc2UodGhpcy5kYk5hbWUpOwogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSAoKSA9PiByZXNvbHZlKHRoaXMuZGIgPSBudWxsKTsKICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSByZWplY3Q7CiAgICAgICAgfSk7CiAgICB9Cn0KCmNsYXNzIERldGFpbGVkRmV0Y2hCbG9iIHsKICAgIGNvbnN0cnVjdG9yKGlucHV0LCBpbml0ID0ge30sIG9ucHJvZ3Jlc3MgPSBpbml0Lm9ucHJvZ3Jlc3MsIG9uYWJvcnQgPSBpbml0Lm9uYWJvcnQsIG9uZXJyb3IgPSBpbml0Lm9uZXJyb3IpIHsKICAgICAgICAvLyBGaXJlIGluIHRoZSBGb3ggZml4CiAgICAgICAgaWYgKHRoaXMuZmlyZWZveENvbnN0cnVjdG9yKGlucHV0LCBpbml0LCBvbnByb2dyZXNzLCBvbmFib3J0LCBvbmVycm9yKSkgcmV0dXJuOwogICAgICAgIC8vIE5vdyBJIGtub3cgd2h5IHN0YW5kYXJkaXppbmcgY2FuY2VsYWJsZSBQcm9taXNlIGlzIHRoYXQgZGlmZmljdWx0CiAgICAgICAgLy8gUExFQVNFIHJlZmFjdG9yIG1lIQogICAgICAgIHRoaXMub25wcm9ncmVzcyA9IG9ucHJvZ3Jlc3M7CiAgICAgICAgdGhpcy5vbmFib3J0ID0gb25hYm9ydDsKICAgICAgICB0aGlzLm9uZXJyb3IgPSBvbmVycm9yOwogICAgICAgIHRoaXMuYWJvcnQgPSBudWxsOwogICAgICAgIHRoaXMubG9hZGVkID0gaW5pdC5jYWNoZUxvYWRlZCB8fCAwOwogICAgICAgIHRoaXMudG90YWwgPSBpbml0LmNhY2hlTG9hZGVkIHx8IDA7CiAgICAgICAgdGhpcy5sZW5ndGhDb21wdXRhYmxlID0gZmFsc2U7CiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTsKICAgICAgICB0aGlzLmJsb2IgPSBudWxsOwogICAgICAgIHRoaXMucmVhZGVyID0gbnVsbDsKICAgICAgICB0aGlzLmJsb2JQcm9taXNlID0gZmV0Y2goaW5wdXQsIGluaXQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgaWYgKHRoaXMucmVhZGVyID09ICdhYm9ydCcpIHJldHVybiByZXMuYm9keS5nZXRSZWFkZXIoKS5jYW5jZWwoKS50aGVuKCgpID0+IG51bGwpOwogICAgICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgYEhUVFAgRXJyb3IgJHtyZXMuc3RhdHVzfTogJHtyZXMuc3RhdHVzVGV4dH1gOwogICAgICAgICAgICB0aGlzLmxlbmd0aENvbXB1dGFibGUgPSByZXMuaGVhZGVycy5oYXMoJ0NvbnRlbnQtTGVuZ3RoJyk7CiAgICAgICAgICAgIHRoaXMudG90YWwgKz0gcGFyc2VJbnQocmVzLmhlYWRlcnMuZ2V0KCdDb250ZW50LUxlbmd0aCcpKSB8fCBJbmZpbml0eTsKICAgICAgICAgICAgaWYgKHRoaXMubGVuZ3RoQ29tcHV0YWJsZSkgewogICAgICAgICAgICAgICAgdGhpcy5yZWFkZXIgPSByZXMuYm9keS5nZXRSZWFkZXIoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJsb2IgPSB0aGlzLmNvbnN1bWUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm9ucHJvZ3Jlc3MpIHRoaXMub25wcm9ncmVzcyh0aGlzLmxvYWRlZCwgdGhpcy50b3RhbCwgdGhpcy5sZW5ndGhDb21wdXRhYmxlKTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJsb2IgPSByZXMuYmxvYigpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5ibG9iUHJvbWlzZS50aGVuKCgpID0+IHRoaXMuYWJvcnQgPSAoKSA9PiB7IH0pOwogICAgICAgIHRoaXMuYmxvYlByb21pc2UuY2F0Y2goZSA9PiB0aGlzLm9uZXJyb3IoeyB0YXJnZXQ6IHRoaXMsIHR5cGU6IGUgfSkpOwogICAgICAgIHRoaXMucHJvbWlzZSA9IFByb21pc2UucmFjZShbCiAgICAgICAgICAgIHRoaXMuYmxvYlByb21pc2UsCiAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gdGhpcy5hYm9ydCA9ICgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMub25hYm9ydCh7IHRhcmdldDogdGhpcywgdHlwZTogJ2Fib3J0JyB9KTsKICAgICAgICAgICAgICAgIHJlc29sdmUoJ2Fib3J0Jyk7CiAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy5ibG9iID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlYWRlcikgdGhpcy5yZWFkZXIuY2FuY2VsKCk7CiAgICAgICAgICAgICAgICBlbHNlIHRoaXMucmVhZGVyID0gJ2Fib3J0JzsKICAgICAgICAgICAgfSkKICAgICAgICBdKS50aGVuKHMgPT4gcyA9PSAnYWJvcnQnID8gbmV3IFByb21pc2UoKCkgPT4geyB9KSA6IHMpOwogICAgICAgIHRoaXMudGhlbiA9IHRoaXMucHJvbWlzZS50aGVuLmJpbmQodGhpcy5wcm9taXNlKTsKICAgICAgICB0aGlzLmNhdGNoID0gdGhpcy5wcm9taXNlLmNhdGNoLmJpbmQodGhpcy5wcm9taXNlKTsKICAgIH0KCiAgICBnZXRQYXJ0aWFsQmxvYigpIHsKICAgICAgICByZXR1cm4gbmV3IEJsb2IodGhpcy5idWZmZXIpOwogICAgfQoKICAgIGFzeW5jIGdldEJsb2IoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucHJvbWlzZTsKICAgIH0KCiAgICBhc3luYyBwdW1wKCkgewogICAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgICAgIGxldCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCB0aGlzLnJlYWRlci5yZWFkKCk7CiAgICAgICAgICAgIGlmIChkb25lKSByZXR1cm4gdGhpcy5sb2FkZWQ7CiAgICAgICAgICAgIHRoaXMubG9hZGVkICs9IHZhbHVlLmJ5dGVMZW5ndGg7CiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2gobmV3IEJsb2IoW3ZhbHVlXSkpOwogICAgICAgICAgICBpZiAodGhpcy5vbnByb2dyZXNzKSB0aGlzLm9ucHJvZ3Jlc3ModGhpcy5sb2FkZWQsIHRoaXMudG90YWwsIHRoaXMubGVuZ3RoQ29tcHV0YWJsZSk7CiAgICAgICAgfQogICAgfQoKICAgIGFzeW5jIGNvbnN1bWUoKSB7CiAgICAgICAgYXdhaXQgdGhpcy5wdW1wKCk7CiAgICAgICAgdGhpcy5ibG9iID0gbmV3IEJsb2IodGhpcy5idWZmZXIpOwogICAgICAgIHRoaXMuYnVmZmVyID0gbnVsbDsKICAgICAgICByZXR1cm4gdGhpcy5ibG9iOwogICAgfQoKICAgIGZpcmVmb3hDb25zdHJ1Y3RvcihpbnB1dCwgaW5pdCA9IHt9LCBvbnByb2dyZXNzID0gaW5pdC5vbnByb2dyZXNzLCBvbmFib3J0ID0gaW5pdC5vbmFib3J0LCBvbmVycm9yID0gaW5pdC5vbmVycm9yKSB7CiAgICAgICAgaWYgKHRvcC5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSA9PSAtMSkgcmV0dXJuIGZhbHNlOwogICAgICAgIHRoaXMub25wcm9ncmVzcyA9IG9ucHJvZ3Jlc3M7CiAgICAgICAgdGhpcy5vbmFib3J0ID0gb25hYm9ydDsKICAgICAgICB0aGlzLm9uZXJyb3IgPSBvbmVycm9yOwogICAgICAgIHRoaXMuYWJvcnQgPSBudWxsOwogICAgICAgIHRoaXMubG9hZGVkID0gaW5pdC5jYWNoZUxvYWRlZCB8fCAwOwogICAgICAgIHRoaXMudG90YWwgPSBpbml0LmNhY2hlTG9hZGVkIHx8IDA7CiAgICAgICAgdGhpcy5sZW5ndGhDb21wdXRhYmxlID0gZmFsc2U7CiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTsKICAgICAgICB0aGlzLmJsb2IgPSBudWxsOwogICAgICAgIHRoaXMucmVhZGVyID0gdW5kZWZpbmVkOwogICAgICAgIHRoaXMuYmxvYlByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdtb3otY2h1bmtlZC1hcnJheWJ1ZmZlcic7CiAgICAgICAgICAgIHhoci5vbmxvYWQgPSAoKSA9PiB7IHJlc29sdmUodGhpcy5ibG9iID0gbmV3IEJsb2IodGhpcy5idWZmZXIpKTsgdGhpcy5idWZmZXIgPSBudWxsOyB9CiAgICAgICAgICAgIGxldCBjYWNoZUxvYWRlZCA9IHRoaXMubG9hZGVkOwogICAgICAgICAgICB4aHIub25wcm9ncmVzcyA9IGUgPT4gewogICAgICAgICAgICAgICAgdGhpcy5sb2FkZWQgPSBlLmxvYWRlZCArIGNhY2hlTG9hZGVkOwogICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IGUudG90YWwgKyBjYWNoZUxvYWRlZDsKICAgICAgICAgICAgICAgIHRoaXMubGVuZ3RoQ29tcHV0YWJsZSA9IGUubGVuZ3RoQ29tcHV0YWJsZTsKICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2gobmV3IEJsb2IoW3hoci5yZXNwb25zZV0pKTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm9ucHJvZ3Jlc3MpIHRoaXMub25wcm9ncmVzcyh0aGlzLmxvYWRlZCwgdGhpcy50b3RhbCwgdGhpcy5sZW5ndGhDb21wdXRhYmxlKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgeGhyLm9uYWJvcnQgPSBlID0+IHRoaXMub25hYm9ydCh7IHRhcmdldDogdGhpcywgdHlwZTogJ2Fib3J0JyB9KTsKICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBlID0+IHsgdGhpcy5vbmVycm9yKHsgdGFyZ2V0OiB0aGlzLCB0eXBlOiBlLnR5cGUgfSk7IHJlamVjdChlKTsgfTsKICAgICAgICAgICAgdGhpcy5hYm9ydCA9IHhoci5hYm9ydC5iaW5kKHhocik7CiAgICAgICAgICAgIHhoci5vcGVuKCdnZXQnLCBpbnB1dCk7CiAgICAgICAgICAgIHhoci5zZW5kKCk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5ibG9iUHJvbWlzZTsKICAgICAgICB0aGlzLnRoZW4gPSB0aGlzLnByb21pc2UudGhlbi5iaW5kKHRoaXMucHJvbWlzZSk7CiAgICAgICAgdGhpcy5jYXRjaCA9IHRoaXMucHJvbWlzZS5jYXRjaC5iaW5kKHRoaXMucHJvbWlzZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICAgIC8qICoqKipvYnNvbGV0ZSoqKioKICAgICAgICAvLyBPYnNvbGV0ZTogbW96LWJsb2Igd2lsbCBkcmFpbiB5b3VyIFJBTQogICAgICAgIHRoaXMub25wcm9ncmVzcyA9IG9ucHJvZ3Jlc3M7CiAgICAgICAgdGhpcy5vbmFib3J0ID0gb25hYm9ydDsKICAgICAgICB0aGlzLm9uZXJyb3IgPSBvbmVycm9yOwogICAgICAgIHRoaXMuYWJvcnQgPSBudWxsOwogICAgICAgIHRoaXMubG9hZGVkID0gaW5pdC5jYWNoZUxvYWRlZCB8fCAwOwogICAgICAgIHRoaXMudG90YWwgPSBpbml0LmNhY2hlTG9hZGVkIHx8IDA7CiAgICAgICAgdGhpcy5sZW5ndGhDb21wdXRhYmxlID0gZmFsc2U7CiAgICAgICAgdGhpcy5idWZmZXIgPSBudWxsOwogICAgICAgIHRoaXMuYmxvYiA9IG51bGw7CiAgICAgICAgdGhpcy5yZWFkZXIgPSB1bmRlZmluZWQ7CiAgICAgICAgdGhpcy5ibG9iUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ21vei1ibG9iJzsKICAgICAgICAgICAgeGhyLm9ubG9hZCA9ICgpID0+IHJlc29sdmUodGhpcy5ibG9iID0geGhyLnJlc3BvbnNlKTsKICAgICAgICAgICAgeGhyLm9ubG9hZHN0YXJ0ID0gZSA9PiBhbGVydChgJHtlLmxvYWRlZH0gJHtlLnRvdGFsfSAke2UubGVuZ3RoQ29tcHV0YWJsZX1gKTsKICAgICAgICAgICAgbGV0IGNhY2hlTG9hZGVkID0gdGhpcy5sb2FkZWQ7CiAgICAgICAgICAgIHhoci5vbnByb2dyZXNzID0gZSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRlZCA9IGUubG9hZGVkICsgY2FjaGVMb2FkZWQ7CiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsID0gZS50b3RhbCArIGNhY2hlTG9hZGVkOwogICAgICAgICAgICAgICAgdGhpcy5sZW5ndGhDb21wdXRhYmxlID0gZS5sZW5ndGhDb21wdXRhYmxlOwogICAgICAgICAgICAgICAgdGhpcy5vbnByb2dyZXNzKHRoaXMubG9hZGVkLCB0aGlzLnRvdGFsLCB0aGlzLmxlbmd0aENvbXB1dGFibGUpOwogICAgICAgICAgICB9OwogICAgICAgICAgICB4aHIub25hYm9ydCA9IGUgPT4gdGhpcy5vbmFib3J0KHsgdGFyZ2V0OiB0aGlzLCB0eXBlOiAnYWJvcnQnIH0pOwogICAgICAgICAgICB4aHIub25lcnJvciA9IGUgPT4geyB0aGlzLm9uZXJyb3IoeyB0YXJnZXQ6IHRoaXMsIHR5cGU6IGUudHlwZSB9KTsgcmVqZWN0KGUpOyB9OwogICAgICAgICAgICB0aGlzLmFib3J0ID0gKCkgPT4geyB0aGlzLmJ1ZmZlciA9IFt4aHIucmVzcG9uc2VdOyB4aHIuYWJvcnQoKTsgfTsKICAgICAgICAgICAgeGhyLm9wZW4oJ2dldCcsIGlucHV0KTsKICAgICAgICAgICAgeGhyLnNlbmQoKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnByb21pc2UgPSB0aGlzLmJsb2JQcm9taXNlOwogICAgICAgIHRoaXMudGhlbiA9IHRoaXMucHJvbWlzZS50aGVuLmJpbmQodGhpcy5wcm9taXNlKTsKICAgICAgICB0aGlzLmNhdGNoID0gdGhpcy5wcm9taXNlLmNhdGNoLmJpbmQodGhpcy5wcm9taXNlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsqLwogICAgfQp9CgpjbGFzcyBNdXRleCB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgICB0aGlzLnF1ZXVlVGFpbCA9IFByb21pc2UucmVzb2x2ZSgpOwogICAgICAgIHRoaXMucmVzb2x2ZUhlYWQgPSBudWxsOwogICAgfQoKICAgIGFzeW5jIGxvY2soKSB7CiAgICAgICAgbGV0IG15UmVzb2x2ZTsKICAgICAgICBsZXQgX3F1ZXVlVGFpbCA9IHRoaXMucXVldWVUYWlsOwogICAgICAgIHRoaXMucXVldWVUYWlsID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBteVJlc29sdmUgPSByZXNvbHZlKTsKICAgICAgICBhd2FpdCBfcXVldWVUYWlsOwogICAgICAgIHRoaXMucmVzb2x2ZUhlYWQgPSBteVJlc29sdmU7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIHVubG9jaygpIHsKICAgICAgICB0aGlzLnJlc29sdmVIZWFkKCk7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIGFzeW5jIGxvY2tBbmRBd2FpdChhc3luY0Z1bmMpIHsKICAgICAgICBhd2FpdCB0aGlzLmxvY2soKTsKICAgICAgICBsZXQgcmV0OwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldCA9IGF3YWl0IGFzeW5jRnVuYygpOwogICAgICAgIH0KICAgICAgICBmaW5hbGx5IHsKICAgICAgICAgICAgdGhpcy51bmxvY2soKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJldDsKICAgIH0KCiAgICBzdGF0aWMgX1VOSVRfVEVTVCgpIHsKICAgICAgICBsZXQgbSA9IG5ldyBNdXRleCgpOwogICAgICAgIGZ1bmN0aW9uIHNsZWVwKHRpbWUpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCB0aW1lKSk7CiAgICAgICAgfQogICAgICAgIG0ubG9ja0FuZEF3YWl0KCgpID0+IHsKICAgICAgICAgICAgY29uc29sZS53YXJuKCdDaGVjayBtZXNzYWdlIHRpbWVzdGFtcHMuJyk7CiAgICAgICAgICAgIGNvbnNvbGUud2FybignQmFkOicpOwogICAgICAgICAgICBjb25zb2xlLndhcm4oJzEgMSAxIDEgMTo1cycpOwogICAgICAgICAgICBjb25zb2xlLndhcm4oJyAxIDEgMSAxIDE6MTBzJyk7CiAgICAgICAgICAgIGNvbnNvbGUud2FybignR29vZDonKTsKICAgICAgICAgICAgY29uc29sZS53YXJuKCcxIDEgMSAxIDE6NXMnKTsKICAgICAgICAgICAgY29uc29sZS53YXJuKCcgICAgICAgICAxIDEgMSAxIDE6MTBzJyk7CiAgICAgICAgfSk7CiAgICAgICAgbS5sb2NrQW5kQXdhaXQoYXN5bmMgKCkgPT4gewogICAgICAgICAgICBhd2FpdCBzbGVlcCgxMDAwKTsKICAgICAgICAgICAgYXdhaXQgc2xlZXAoMTAwMCk7CiAgICAgICAgICAgIGF3YWl0IHNsZWVwKDEwMDApOwogICAgICAgICAgICBhd2FpdCBzbGVlcCgxMDAwKTsKICAgICAgICAgICAgYXdhaXQgc2xlZXAoMTAwMCk7CiAgICAgICAgfSk7CiAgICAgICAgbS5sb2NrQW5kQXdhaXQoYXN5bmMgKCkgPT4gY29uc29sZS5sb2coJzVzIScpKTsKICAgICAgICBtLmxvY2tBbmRBd2FpdChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIGF3YWl0IHNsZWVwKDEwMDApOwogICAgICAgICAgICBhd2FpdCBzbGVlcCgxMDAwKTsKICAgICAgICAgICAgYXdhaXQgc2xlZXAoMTAwMCk7CiAgICAgICAgICAgIGF3YWl0IHNsZWVwKDEwMDApOwogICAgICAgICAgICBhd2FpdCBzbGVlcCgxMDAwKTsKICAgICAgICB9KTsKICAgICAgICBtLmxvY2tBbmRBd2FpdChhc3luYyAoKSA9PiBjb25zb2xlLmxvZygnMTBzIScpKTsKICAgIH0KfQoKY2xhc3MgQXN5bmNDb250YWluZXIgewogICAgLy8gWWVzLCB0aGlzIGlzIHNvbWV0aGluZyBsaWtlIGNhbmNlbGFibGUgUHJvbWlzZS4gQnV0IEkgaW5zaXN0IHRoZXkgYXJlIGRpZmZlcmVudC4KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICAgIC8vdGhpcy5zdGF0ZSA9IDA7IC8vIEkgZG8gbm90IGtub3cgd2h5IHdpbGwgSSBuZWVkIHRoaXMuCiAgICAgICAgdGhpcy5yZXNvbHZlID0gbnVsbDsKICAgICAgICB0aGlzLnJlamVjdCA9IG51bGw7CiAgICAgICAgdGhpcy5oYW5nID0gbnVsbDsKICAgICAgICB0aGlzLmhhbmdSZXR1cm4gPSBTeW1ib2woKTsKICAgICAgICB0aGlzLnByaW1hcnlQcm9taXNlID0gbmV3IFByb21pc2UoKHMsIGopID0+IHsKICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gYXJnID0+IHsgcyhhcmcpOyByZXR1cm4gYXJnOyB9CiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gYXJnID0+IHsgaihhcmcpOyByZXR1cm4gYXJnOyB9CiAgICAgICAgfSk7CiAgICAgICAgLy90aGlzLnByaW1hcnlQcm9taXNlLnRoZW4oKCkgPT4gdGhpcy5zdGF0ZSA9IDEpOwogICAgICAgIC8vdGhpcy5wcmltYXJ5UHJvbWlzZS5jYXRjaCgoKSA9PiB0aGlzLnN0YXRlID0gMik7CiAgICAgICAgdGhpcy5oYW5nUHJvbWlzZSA9IG5ldyBQcm9taXNlKHMgPT4gdGhpcy5oYW5nID0gKCkgPT4gcyh0aGlzLmhhbmdSZXR1cm4pKTsKICAgICAgICAvL3RoaXMuaGFuZ1Byb21pc2UudGhlbigoKSA9PiB0aGlzLnN0YXRlID0gMyk7CiAgICAgICAgdGhpcy5wcm9taXNlID0gUHJvbWlzZQogICAgICAgICAgICAucmFjZShbdGhpcy5wcmltYXJ5UHJvbWlzZSwgdGhpcy5oYW5nUHJvbWlzZV0pCiAgICAgICAgICAgIC50aGVuKHMgPT4gcyA9PSB0aGlzLmhhbmdSZXR1cm4gPyBuZXcgUHJvbWlzZSgoKSA9PiB7IH0pIDogcyk7CiAgICAgICAgdGhpcy50aGVuID0gdGhpcy5wcm9taXNlLnRoZW4uYmluZCh0aGlzLnByb21pc2UpOwogICAgICAgIHRoaXMuY2F0Y2ggPSB0aGlzLnByb21pc2UuY2F0Y2guYmluZCh0aGlzLnByb21pc2UpOwogICAgICAgIHRoaXMuZGVzdHJvaWVkVGhlbiA9IHRoaXMuaGFuZ1Byb21pc2UudGhlbi5iaW5kKHRoaXMuaGFuZ1Byb21pc2UpOwogICAgfQoKICAgIGRlc3Ryb3koKSB7CiAgICAgICAgdGhpcy5oYW5nKCk7CiAgICAgICAgdGhpcy5yZXNvbHZlID0gKCkgPT4geyB9OwogICAgICAgIHRoaXMucmVqZWN0ID0gdGhpcy5yZXNvbHZlOwogICAgICAgIHRoaXMuaGFuZyA9IHRoaXMucmVzb2x2ZTsKICAgICAgICB0aGlzLnByaW1hcnlQcm9taXNlID0gbnVsbDsKICAgICAgICB0aGlzLmhhbmdQcm9taXNlID0gbnVsbDsKICAgICAgICB0aGlzLnByb21pc2UgPSBudWxsOwogICAgICAgIHRoaXMudGhlbiA9IHRoaXMucmVzb2x2ZTsKICAgICAgICB0aGlzLmNhdGNoID0gdGhpcy5yZXNvbHZlOwogICAgICAgIHRoaXMuZGVzdHJvaWVkVGhlbiA9IGYgPT4gZigpOwogICAgICAgIC8vIERvIE5FVkVSIE5FVkVSIE5FVkVSIGRlcmVmZXJlbmNlIGhhbmdSZXR1cm4uCiAgICAgICAgLy8gTXlzdGVyaW91c2x5IHRoaXMgdGlueSBzeW1ib2wgd2lsbCBrZWVwIHlvdSBmcm9tIE1lbW9yeSBMRUFLLgogICAgICAgIC8vdGhpcy5oYW5nUmV0dXJuID0gbnVsbDsKICAgIH0KCiAgICBzdGF0aWMgX1VOSVRfVEVTVCgpIHsKICAgICAgICBsZXQgY29udGFpbmVycyA9IFtdOwogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGZvbygpIHsKICAgICAgICAgICAgbGV0IGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcig2MDAwMDAwMDApOwogICAgICAgICAgICBsZXQgYWMgPSBuZXcgQXN5bmNDb250YWluZXIoKTsKICAgICAgICAgICAgYWMuZGVzdHJvaWVkVGhlbigoKSA9PiBjb25zb2xlLmxvZygnYXN5bmNDb250YWluZXIgZGVzdHJvaWVkJykpCiAgICAgICAgICAgIGNvbnRhaW5lcnMucHVzaChhYyk7CiAgICAgICAgICAgIGF3YWl0IGFjOwogICAgICAgICAgICByZXR1cm4gYnVmOwogICAgICAgIH0KICAgICAgICBsZXQgZm9vcyA9IFtmb28oKSwgZm9vKCksIGZvbygpXTsKICAgICAgICBjb250YWluZXJzLm1hcChlID0+IGUuZGVzdHJveSgpKTsKICAgICAgICBjb25zb2xlLndhcm4oJ0NoZWNrIHlvdXIgUkFNIHVzYWdlLiBJIGFsbG9jYXRlZCAxLjhHQiBpbiB0aHJlZSBkZWFkLWVuZCBwcm9taXNlcy4nKQogICAgICAgIHJldHVybiBbZm9vcywgY29udGFpbmVyc107CiAgICB9Cn0KCmNsYXNzIEJpbGlNb25rZXkgewogICAgY29uc3RydWN0b3IocGxheWVyV2luLCBvcHRpb24gPSB7IGNhY2hlOiBudWxsLCBwYXJ0aWFsOiBmYWxzZSwgcHJveHk6IGZhbHNlLCBibG9ja2VyOiBmYWxzZSB9KSB7CiAgICAgICAgdGhpcy5wbGF5ZXJXaW4gPSBwbGF5ZXJXaW47CiAgICAgICAgdGhpcy5wcm90b2NvbCA9IHBsYXllcldpbi5sb2NhdGlvbi5wcm90b2NvbDsKICAgICAgICB0aGlzLmNpZCA9IG51bGw7CiAgICAgICAgdGhpcy5mbHZzID0gbnVsbDsKICAgICAgICB0aGlzLm1wNCA9IG51bGw7CiAgICAgICAgdGhpcy5hc3MgPSBudWxsOwogICAgICAgIHRoaXMuY2lkQXN5bmNDb250YWluZXIgPSBuZXcgQXN5bmNDb250YWluZXIoKTsKICAgICAgICB0aGlzLmNpZEFzeW5jQ29udGFpbmVyLnRoZW4oY2lkID0+IHsgdGhpcy5jaWQgPSBjaWQ7IHRoaXMuYXNzID0gdGhpcy5nZXRBU1MoKTsgfSk7CiAgICAgICAgaWYgKHR5cGVvZiB0b3AuY2lkID09PSAnc3RyaW5nJykgdGhpcy5jaWRBc3luY0NvbnRhaW5lci5yZXNvbHZlKHRvcC5jaWQpOwoKICAgICAgICAvKiBjYWNoZSArIHByb3h5ID0gU2VydmljZSBXb3JrZXIKICAgICAgICAgKiBIb3BlIGJpbGliaWxpIHdpbGwgaGF2ZSBhIFNXIGFzIHNvb24gYXMgcG9zc2libGUuCiAgICAgICAgICogcGFydGlhbCA9IFN0cmVhbQogICAgICAgICAqIEhvcGUgdGhlIGZldGNoIEFQSSB3aWxsIGJlIHN0YWJpbGl6ZWQgYXMgc29vbiBhcyBwb3NzaWJsZS4KICAgICAgICAgKiBJZiB5b3UgYXJlIHVzaW5nIHlvdXIgZ3JhbmRwYSdzIGJyb3dzZXIsIGRvIG5vdCBlbmFibGUgdGhlc2UgZnVuY3Rpb25zLgogICAgICAgICoqLwogICAgICAgIHRoaXMuY2FjaGUgPSBvcHRpb24uY2FjaGU7CiAgICAgICAgdGhpcy5wYXJ0aWFsID0gb3B0aW9uLnBhcnRpYWw7CiAgICAgICAgdGhpcy5wcm94eSA9IG9wdGlvbi5wcm94eTsKICAgICAgICB0aGlzLmJsb2NrZXIgPSBvcHRpb24uYmxvY2tlcjsKICAgICAgICB0aGlzLm9wdGlvbiA9IG9wdGlvbjsKICAgICAgICBpZiAodGhpcy5jYWNoZSAmJiAoISh0aGlzLmNhY2hlIGluc3RhbmNlb2YgQ2FjaGVEQikpKSB0aGlzLmNhY2hlID0gbmV3IENhY2hlREIoJ2JpbGlNb25rZXknLCAnZmx2JywgJ25hbWUnKTsKCiAgICAgICAgdGhpcy5mbHZzRGV0YWlsZWRGZXRjaCA9IFtdOwogICAgICAgIHRoaXMuZmx2c0Jsb2IgPSBbXTsKCiAgICAgICAgdGhpcy5kZWZhdWx0Rm9ybWF0UHJvbWlzZSA9IG51bGw7CiAgICAgICAgdGhpcy5hc3NBc3luY1NjcmlwdCA9IEJpbGlNb25rZXkubG9hZEFTU1NjcmlwdCgpOwogICAgICAgIHRoaXMucXVlcnlJbmZvTXV0ZXggPSBuZXcgTXV0ZXgoKTsKICAgICAgICB0aGlzLnF1ZXJ5SW5mb011dGV4LmxvY2tBbmRBd2FpdCgoKSA9PiB0aGlzLmdldFBsYXllcigpKTsKICAgIH0KCiAgICBsb2NrRm9ybWF0KGZvcm1hdCkgewogICAgICAgIC8vIG51bGwgPT4gdW5pbml0aWFsaXplZAogICAgICAgIC8vIGFzeW5jIHBlbmRpbmcgPT4gYW5vdGhlciBvbmUgaXMgd29ya2luZyBvbiBpdAogICAgICAgIC8vIGFzeW5jIHJlc29sdmUgPT4gdGhhdCBndXkganVzdCBmaW5pc2hlZCB3b3JrCiAgICAgICAgLy8gc3luYyB2YWx1ZSA9PiBzb21lb25lIGFscmVhZHkgZmluaXNoZWQgd29yawogICAgICAgIGxldCBoID0gdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYmlsaWJpbGktcGxheWVyLXZpZGVvLXRvYXN0LXRvcCcpWzBdOwogICAgICAgIGlmIChoKSBoLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsKICAgICAgICBzd2l0Y2ggKGZvcm1hdCkgewogICAgICAgICAgICBjYXNlICdmbHYnOgogICAgICAgICAgICAgICAgLy8gU2luZ2xlIHdyaXRlciBpcyBub3QgYSBtdXN0LgogICAgICAgICAgICAgICAgLy8gUGx1cywgaWYgb25lIHdyaXRlciBmYWlsZWQsIG90aGVycyBzaG91bGQgYmUgYWJsZSB0byBvdmVyd3JpdGUgaXRzIGdhcmJhZ2UuCiAgICAgICAgICAgICAgICAvL2lmICh0aGlzLmZsdnMpIHJldHVybiB0aGlzLmZsdnM7IAogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmx2cyA9IG5ldyBBc3luY0NvbnRhaW5lcigpOwogICAgICAgICAgICBjYXNlICdoZG1wNCc6CiAgICAgICAgICAgICAgICAvL2lmICh0aGlzLm1wNCkgcmV0dXJuIHRoaXMubXA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubXA0ID0gbmV3IEFzeW5jQ29udGFpbmVyKCk7CiAgICAgICAgICAgIGNhc2UgJ21wNCc6CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICB0aHJvdyBgbG9ja0Zvcm1hdCBlcnJvcjogJHtmb3JtYXR9IGlzIGEgdW5yZWNvZ25pemFibGUgZm9ybWF0YDsKICAgICAgICB9CiAgICB9CgogICAgcmVzb2x2ZUZvcm1hdChyZXMsIHNob3VsZEJlKSB7CiAgICAgICAgbGV0IGggPSB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiaWxpYmlsaS1wbGF5ZXItdmlkZW8tdG9hc3QtdG9wJylbMF07CiAgICAgICAgaWYgKGgpIHsKICAgICAgICAgICAgaC5zdHlsZS52aXNpYmlsaXR5ID0gJyc7CiAgICAgICAgICAgIGlmIChoLmNoaWxkcmVuLmxlbmd0aCkgaC5jaGlsZHJlblswXS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7CiAgICAgICAgICAgIGxldCBpID0gKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKGguY2hpbGRyZW4ubGVuZ3RoKSBoLmNoaWxkcmVuWzBdLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsKICAgICAgICAgICAgICAgIHRoaXMucGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd2aWRlbycpWzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VtcHRpZWQnLCBpKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgbGV0IGogPSB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndmlkZW8nKVswXTsKICAgICAgICAgICAgaWYgKGopIGouYWRkRXZlbnRMaXN0ZW5lcignZW1wdGllZCcsIGkpOwogICAgICAgIH0KICAgICAgICBpZiAoc2hvdWxkQmUgJiYgc2hvdWxkQmUgIT0gcmVzLmZvcm1hdCkgdGhyb3cgYFVSTCBpbnRlcmZhY2UgZXJyb3I6IHJlc3BvbnNlIGlzIG5vdCAke3Nob3VsZEJlfWA7CiAgICAgICAgc3dpdGNoIChyZXMuZm9ybWF0KSB7CiAgICAgICAgICAgIGNhc2UgJ2Zsdic6CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mbHZzID0gdGhpcy5mbHZzLnJlc29sdmUocmVzLmR1cmwubWFwKGUgPT4gZS51cmwucmVwbGFjZSgnaHR0cDonLCB0aGlzLnByb3RvY29sKSkpOwogICAgICAgICAgICBjYXNlICdoZG1wNCc6CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tcDQgPSB0aGlzLm1wNC5yZXNvbHZlKHJlcy5kdXJsWzBdLnVybC5yZXBsYWNlKCdodHRwOicsIHRoaXMucHJvdG9jb2wpKTsKICAgICAgICAgICAgY2FzZSAnbXA0JzoKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHRocm93IGByZXNvbHZlRm9ybWF0IGVycm9yOiAke3Jlcy5mb3JtYXR9IGlzIGEgdW5yZWNvZ25pemFibGUgZm9ybWF0YDsKICAgICAgICB9CiAgICB9CgogICAgYXN5bmMgZXhlY09wdGlvbnMoKSB7CiAgICAgICAgaWYgKHRoaXMuY2FjaGUpIGF3YWl0IHRoaXMuY2FjaGUuZ2V0REIoKTsKICAgICAgICBpZiAodGhpcy5vcHRpb24uYXV0b0RlZmF1bHQpIGF3YWl0IHRoaXMuc25pZmZEZWZhdWx0Rm9ybWF0KCk7CiAgICAgICAgaWYgKHRoaXMub3B0aW9uLmF1dG9GTFYpIHRoaXMucXVlcnlJbmZvKCdmbHYnKTsKICAgICAgICBpZiAodGhpcy5vcHRpb24uYXV0b01QNCkgdGhpcy5xdWVyeUluZm8oJ21wNCcpOwogICAgfQoKICAgIGFzeW5jIHNuaWZmRGVmYXVsdEZvcm1hdCgpIHsKICAgICAgICBpZiAodGhpcy5kZWZhdWx0Rm9ybWF0UHJvbWlzZSkgcmV0dXJuIHRoaXMuZGVmYXVsdEZvcm1hdFByb21pc2U7CiAgICAgICAgaWYgKHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLmJpbGliaWxpLXBsYXllci12aWRlby1idG4tcXVhbGl0eSA+IGRpdiA+IHVsID4gbGk6bnRoLWNoaWxkKDIpJykpIHJldHVybiB0aGlzLmRlZmF1bHRGb3JtYXRQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7CgogICAgICAgIGNvbnN0IGpxID0gdGhpcy5wbGF5ZXJXaW4gPT0gd2luZG93ID8gJCA6IHRoaXMucGxheWVyV2luLiQ7CiAgICAgICAgY29uc3QgX2FqYXggPSBqcS5hamF4OwogICAgICAgIGNvbnN0IGRlZnF1YWxpdHkgPSB0aGlzLnBsYXllcldpbi5sb2NhbFN0b3JhZ2UgJiYgdGhpcy5wbGF5ZXJXaW4ubG9jYWxTdG9yYWdlLmJpbGliaWxpX3BsYXllcl9zZXR0aW5ncyA/IEpTT04ucGFyc2UodGhpcy5wbGF5ZXJXaW4ubG9jYWxTdG9yYWdlLmJpbGliaWxpX3BsYXllcl9zZXR0aW5ncykuc2V0dGluZ19jb25maWcuZGVmcXVhbGl0eSA6IHVuZGVmaW5lZDsKCiAgICAgICAgdGhpcy5kZWZhdWx0Rm9ybWF0UHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICBsZXQgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4geyBqcS5hamF4ID0gX2FqYXg7IHJlc29sdmUoKTsgfSwgNTAwMCk7CiAgICAgICAgICAgIGxldCBzZWxmID0gdGhpczsKICAgICAgICAgICAganEuYWpheCA9IGZ1bmN0aW9uIChhLCBjKSB7CiAgICAgICAgICAgICAgICBpZiAoYykgeyBpZiAoYSkgYy51cmwgPSBhOyBhID0gYyB9OwogICAgICAgICAgICAgICAgaWYgKGEudXJsLmluZGV4T2YoJ2ludGVyZmFjZS5iaWxpYmlsaS5jb20vcGxheXVybD8nKSAhPSAtMSB8fCBhLnVybC5pbmRleE9mKCdiYW5ndW1pLmJpbGliaWxpLmNvbS9wbGF5ZXIvd2ViX2FwaS9wbGF5dXJsPycpICE9IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpOwogICAgICAgICAgICAgICAgICAgIGxldCBmb3JtYXQgPSBhLnVybC5tYXRjaCgvcXVhbGl0eT1cZCovKVswXS5zbGljZSg4KTsKICAgICAgICAgICAgICAgICAgICBmb3JtYXQgPSBmb3JtYXQgPT0gODAgfHwgZm9ybWF0ID09IDQgfHwgZm9ybWF0ID09IDMgPyAnZmx2JyA6IGZvcm1hdCA9PSAyIHx8IGZvcm1hdCA9PSA0OCA/ICdoZG1wNCcgOiBmb3JtYXQgPT0gMSB8fCBmb3JtYXQgPT0gMTYgPyAnbXA0JyA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgICAgICBpZiAoIWZvcm1hdCkgeyBjb25zb2xlLmVycm9yKGBsb2NrRm9ybWF0IGVycm9yOiAke2EudXJsLm1hdGNoKC9xdWFsaXR5PVxkKi8pWzBdLnNsaWNlKDgpfSBpcyBhIHVucmVjb2duaXphYmxlIGZvcm1hdGApOyBqcS5hamF4ID0gX2FqYXg7IHJlc29sdmUoKTsgcmV0dXJuIF9hamF4LmNhbGwoanEsIGEsIGMpOyB9CiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2NrRm9ybWF0KGZvcm1hdCk7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5jaWRBc3luY0NvbnRhaW5lci5yZXNvbHZlKGEudXJsLm1hdGNoKC9jaWQ9XGQrLylbMF0uc2xpY2UoNCkpOwogICAgICAgICAgICAgICAgICAgIGxldCBfc3VjY2VzcyA9IGEuc3VjY2VzczsKICAgICAgICAgICAgICAgICAgICBhLnN1Y2Nlc3MgPSByZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5wcm94eSAmJiByZXMuZm9ybWF0ID09ICdmbHYnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlc29sdmVGb3JtYXQocmVzLCBmb3JtYXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXR1cFByb3h5KHJlcywgX3N1Y2Nlc3MpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N1Y2Nlc3MocmVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVzb2x2ZUZvcm1hdChyZXMsIGZvcm1hdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXMpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAganEuYWpheCA9IF9hamF4OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIF9hamF4LmNhbGwoanEsIGEsIGMpOwogICAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRGb3JtYXRQcm9taXNlOwogICAgfQoKICAgIGFzeW5jIGdldFNpeHRlZW5NUDQoKSB7CiAgICAgICAgbGV0IHNyYyA9IHRoaXMucGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd2aWRlbycpWzBdLnNyYzsKICAgICAgICBpZiAoc3JjLmluZGV4T2YoJy5tcDQnKSAhPSAtMSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZShzcmMpOwogICAgICAgIGNvbnN0IGpxID0gdGhpcy5wbGF5ZXJXaW4gPT0gd2luZG93ID8gJCA6IHRoaXMucGxheWVyV2luLiQ7CiAgICAgICAgY29uc3QgX2FqYXggPSBqcS5hamF4OwoKICAgICAgICBsZXQgcGVuZGluZ0Zvcm1hdCA9IG5ldyBBc3luY0NvbnRhaW5lcigpOwogICAgICAgIGxldCBzZWxmID0gdGhpczsKICAgICAgICBqcS5hamF4ID0gZnVuY3Rpb24gKGEsIGMpIHsKICAgICAgICAgICAgaWYgKGMpIHsgaWYgKGEpIGMudXJsID0gYTsgYSA9IGMgfTsKICAgICAgICAgICAgaWYgKGEudXJsLmluZGV4T2YoJ2ludGVyZmFjZS5iaWxpYmlsaS5jb20vcGxheXVybD8nKSAhPSAtMSB8fCBhLnVybC5pbmRleE9mKCdiYW5ndW1pLmJpbGliaWxpLmNvbS9wbGF5ZXIvd2ViX2FwaS9wbGF5dXJsPycpICE9IC0xKSB7CiAgICAgICAgICAgICAgICBzZWxmLmNpZEFzeW5jQ29udGFpbmVyLnJlc29sdmUoYS51cmwubWF0Y2goL2NpZD1cZCsvKVswXS5zbGljZSg0KSk7CiAgICAgICAgICAgICAgICBsZXQgX3N1Y2Nlc3MgPSBhLnN1Y2Nlc3M7CiAgICAgICAgICAgICAgICBfc3VjY2Vzcyh7fSk7CiAgICAgICAgICAgICAgICBhLnN1Y2Nlc3MgPSByZXMgPT4gcGVuZGluZ0Zvcm1hdC5yZXNvbHZlKHNlbGYubXA0ID0gcmVzLmR1cmxbMF0udXJsLnJlcGxhY2UoJ2h0dHA6Jywgc2VsZi5wcm90b2NvbCkpOwogICAgICAgICAgICAgICAganEuYWpheCA9IF9hamF4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBfYWpheC5jYWxsKGpxLCBhLCBjKTsKICAgICAgICB9OwogICAgICAgIHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGRpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLXF1YWxpdHkgPiBkaXYgPiB1bCA+IGxpOm50aC1jaGlsZCg0KWApLmNsaWNrKCk7CiAgICAgICAgcmV0dXJuIHBlbmRpbmdGb3JtYXQ7CiAgICB9CgogICAgYXN5bmMgZ2V0QmFja2dyb3VuZEZvcm1hdChmb3JtYXQpIHsKICAgICAgICBpZiAoZm9ybWF0ID09ICdoZG1wNCcpIHsKICAgICAgICAgICAgbGV0IHNyYyA9IHRoaXMucGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd2aWRlbycpWzBdLnNyYzsKICAgICAgICAgICAgaWYgKHNyYy5pbmRleE9mKCdoZCcpICE9IC0xICYmIHNyYy5pbmRleE9mKCcubXA0JykgIT0gLTEpIHsKICAgICAgICAgICAgICAgIGxldCBwZW5kaW5nRm9ybWF0ID0gdGhpcy5sb2NrRm9ybWF0KGZvcm1hdCk7CiAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmVGb3JtYXQoeyBkdXJsOiBbeyB1cmw6IHNyYyB9XSB9LCBmb3JtYXQpOwogICAgICAgICAgICAgICAgcmV0dXJuIHBlbmRpbmdGb3JtYXQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGNvbnN0IGpxID0gdGhpcy5wbGF5ZXJXaW4gPT0gd2luZG93ID8gJCA6IHRoaXMucGxheWVyV2luLiQ7CiAgICAgICAgY29uc3QgX2FqYXggPSBqcS5hamF4OwoKICAgICAgICBsZXQgcGVuZGluZ0Zvcm1hdCA9IHRoaXMubG9ja0Zvcm1hdChmb3JtYXQpOwogICAgICAgIGxldCBzZWxmID0gdGhpczsKICAgICAgICBqcS5hamF4ID0gZnVuY3Rpb24gKGEsIGMpIHsKICAgICAgICAgICAgaWYgKGMpIHsgaWYgKGEpIGMudXJsID0gYTsgYSA9IGMgfTsKICAgICAgICAgICAgaWYgKGEudXJsLmluZGV4T2YoJ2ludGVyZmFjZS5iaWxpYmlsaS5jb20vcGxheXVybD8nKSAhPSAtMSB8fCBhLnVybC5pbmRleE9mKCdiYW5ndW1pLmJpbGliaWxpLmNvbS9wbGF5ZXIvd2ViX2FwaS9wbGF5dXJsPycpICE9IC0xKSB7CiAgICAgICAgICAgICAgICBzZWxmLmNpZEFzeW5jQ29udGFpbmVyLnJlc29sdmUoYS51cmwubWF0Y2goL2NpZD1cZCsvKVswXS5zbGljZSg0KSk7CiAgICAgICAgICAgICAgICBsZXQgX3N1Y2Nlc3MgPSBhLnN1Y2Nlc3M7CiAgICAgICAgICAgICAgICBhLnN1Y2Nlc3MgPSByZXMgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChmb3JtYXQgPT0gJ2hkbXA0JykgcmVzLmR1cmwgPSBbcmVzLmR1cmxbMF0uYmFja3VwX3VybC5maW5kKGUgPT4gZS5pbmRleE9mKCdoZCcpICE9IC0xICYmIGUuaW5kZXhPZignLm1wNCcpICE9IC0xKV07CiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm1hdCA9PSAnbXA0JykgcmVzLmR1cmwgPSBbcmVzLmR1cmxbMF0uYmFja3VwX3VybC5maW5kKGUgPT4gZS5pbmRleE9mKCdoZCcpID09IC0xICYmIGUuaW5kZXhPZignLm1wNCcpICE9IC0xKV07CiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZXNvbHZlRm9ybWF0KHJlcywgZm9ybWF0KTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBqcS5hamF4ID0gX2FqYXg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIF9hamF4LmNhbGwoanEsIGEsIGMpOwogICAgICAgIH07CiAgICAgICAgdGhpcy5wbGF5ZXJXaW4ucGxheWVyLnJlbG9hZEFjY2VzcygpOwoKICAgICAgICByZXR1cm4gcGVuZGluZ0Zvcm1hdDsKICAgIH0KCiAgICBhc3luYyBnZXRDdXJyZW50Rm9ybWF0KGZvcm1hdCkgewogICAgICAgIGNvbnN0IGpxID0gdGhpcy5wbGF5ZXJXaW4gPT0gd2luZG93ID8gJCA6IHRoaXMucGxheWVyV2luLiQ7CiAgICAgICAgY29uc3QgX2FqYXggPSBqcS5hamF4OwogICAgICAgIGNvbnN0IGJ1dHRvbk51bWJlciA9IGZvcm1hdCA9PSAnZmx2JyA/IDEgOiAyOwogICAgICAgIGNvbnN0IHNpYmxpbmdGb3JtYXQgPSBmb3JtYXQgPT0gJ2ZsdicgPyAnaGRtcDQnIDogJ2Zsdic7CiAgICAgICAgY29uc3QgdHJpdmlhbFJlcyA9IHsgJ2Zyb20nOiAnbG9jYWwnLCAncmVzdWx0JzogJ3N1ZWUnLCAnZm9ybWF0Jzogc2libGluZ0Zvcm1hdCwgJ3RpbWVsZW5ndGgnOiAxMCwgJ2FjY2VwdF9mb3JtYXQnOiAnZmx2LGhkbXA0LG1wNCcsICdhY2NlcHRfcXVhbGl0eSc6IFszLCAyLCAxXSwgJ3NlZWtfcGFyYW0nOiAnc3RhcnQnLCAnc2Vla190eXBlJzogJ3NlY29uZCcsICdkdXJsJzogW3sgJ29yZGVyJzogMSwgJ2xlbmd0aCc6IDEwMDAsICdzaXplJzogMzAwMDAsICd1cmwnOiAnJywgJ2JhY2t1cF91cmwnOiBbJycsICcnXSB9XSB9OwoKICAgICAgICBsZXQgcGVuZGluZ1NpYmxpbmdGb3JtYXQgPSB0aGlzLmxvY2tGb3JtYXQoc2libGluZ0Zvcm1hdCk7CiAgICAgICAgbGV0IHNlbGYgPSB0aGlzOwogICAgICAgIGpxLmFqYXggPSBmdW5jdGlvbiAoYSwgYykgewogICAgICAgICAgICBpZiAoYykgeyBpZiAoYSkgYy51cmwgPSBhOyBhID0gYyB9OwogICAgICAgICAgICBpZiAoYS51cmwuaW5kZXhPZignaW50ZXJmYWNlLmJpbGliaWxpLmNvbS9wbGF5dXJsPycpICE9IC0xIHx8IGEudXJsLmluZGV4T2YoJ2Jhbmd1bWkuYmlsaWJpbGkuY29tL3BsYXllci93ZWJfYXBpL3BsYXl1cmw/JykgIT0gLTEpIHsKICAgICAgICAgICAgICAgIHNlbGYuY2lkQXN5bmNDb250YWluZXIucmVzb2x2ZShhLnVybC5tYXRjaCgvY2lkPVxkKy8pWzBdLnNsaWNlKDQpKTsKICAgICAgICAgICAgICAgIGxldCBfc3VjY2VzcyA9IGEuc3VjY2VzczsKICAgICAgICAgICAgICAgIGEuc3VjY2VzcyA9IHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgX3N1Y2Nlc3MocmVzKTsKICAgICAgICAgICAgICAgICAgICBzZWxmLnJlc29sdmVGb3JtYXQocmVzLCBzaWJsaW5nRm9ybWF0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGpxLmFqYXggPSBfYWpheDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gX2FqYXguY2FsbChqcSwgYSwgYyk7CiAgICAgICAgfTsKICAgICAgICB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBkaXYuYmlsaWJpbGktcGxheWVyLXZpZGVvLWJ0bi1xdWFsaXR5ID4gZGl2ID4gdWwgPiBsaTpudGgtY2hpbGQoJHszIC0gYnV0dG9uTnVtYmVyfSlgKS5jbGljaygpOwogICAgICAgIGF3YWl0IHBlbmRpbmdTaWJsaW5nRm9ybWF0OwoKICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgbGV0IHZpZGVvID0gdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3ZpZGVvJylbMF07CiAgICAgICAgICAgIGxldCBoID0gKCkgPT4gewogICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW1wdGllZCcsIGgpOwogICAgICAgICAgICB9OwogICAgICAgICAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKCdlbXB0aWVkJywgaCk7CiAgICAgICAgfSk7CgogICAgICAgIGxldCBwZW5kaW5nRm9ybWF0ID0gdGhpcy5sb2NrRm9ybWF0KGZvcm1hdCk7CiAgICAgICAganEuYWpheCA9IGZ1bmN0aW9uIChhLCBjKSB7CiAgICAgICAgICAgIGlmIChjKSB7IGlmIChhKSBjLnVybCA9IGE7IGEgPSBjIH07CiAgICAgICAgICAgIGlmIChhLnVybC5pbmRleE9mKCdpbnRlcmZhY2UuYmlsaWJpbGkuY29tL3BsYXl1cmw/JykgIT0gLTEgfHwgYS51cmwuaW5kZXhPZignYmFuZ3VtaS5iaWxpYmlsaS5jb20vcGxheWVyL3dlYl9hcGkvcGxheXVybD8nKSAhPSAtMSkgewogICAgICAgICAgICAgICAgc2VsZi5jaWRBc3luY0NvbnRhaW5lci5yZXNvbHZlKGEudXJsLm1hdGNoKC9jaWQ9XGQrLylbMF0uc2xpY2UoNCkpOwogICAgICAgICAgICAgICAgbGV0IF9zdWNjZXNzID0gYS5zdWNjZXNzOwogICAgICAgICAgICAgICAgYS5zdWNjZXNzID0gcmVzID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5wcm94eSAmJiByZXMuZm9ybWF0ID09ICdmbHYnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVzb2x2ZUZvcm1hdChyZXMsIGZvcm1hdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0dXBQcm94eShyZXMsIF9zdWNjZXNzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9zdWNjZXNzKHJlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVzb2x2ZUZvcm1hdChyZXMsIGZvcm1hdCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGpxLmFqYXggPSBfYWpheDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gX2FqYXguY2FsbChqcSwgYSwgYyk7CiAgICAgICAgfTsKICAgICAgICB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBkaXYuYmlsaWJpbGktcGxheWVyLXZpZGVvLWJ0bi1xdWFsaXR5ID4gZGl2ID4gdWwgPiBsaTpudGgtY2hpbGQoJHtidXR0b25OdW1iZXJ9KWApLmNsaWNrKCk7CgogICAgICAgIHJldHVybiBwZW5kaW5nRm9ybWF0OwogICAgfQoKICAgIGFzeW5jIGdldE5vbkN1cnJlbnRGb3JtYXQoZm9ybWF0KSB7CiAgICAgICAgY29uc3QganEgPSB0aGlzLnBsYXllcldpbiA9PSB3aW5kb3cgPyAkIDogdGhpcy5wbGF5ZXJXaW4uJDsKICAgICAgICBjb25zdCBfYWpheCA9IGpxLmFqYXg7CiAgICAgICAgY29uc3QgYnV0dG9uTnVtYmVyID0gZm9ybWF0ID09ICdmbHYnID8gMSA6IDI7CgogICAgICAgIGxldCBwZW5kaW5nRm9ybWF0ID0gdGhpcy5sb2NrRm9ybWF0KGZvcm1hdCk7CiAgICAgICAgbGV0IHNlbGYgPSB0aGlzOwogICAgICAgIGpxLmFqYXggPSBmdW5jdGlvbiAoYSwgYykgewogICAgICAgICAgICBpZiAoYykgeyBpZiAoYSkgYy51cmwgPSBhOyBhID0gYyB9OwogICAgICAgICAgICBpZiAoYS51cmwuaW5kZXhPZignaW50ZXJmYWNlLmJpbGliaWxpLmNvbS9wbGF5dXJsPycpICE9IC0xIHx8IGEudXJsLmluZGV4T2YoJ2Jhbmd1bWkuYmlsaWJpbGkuY29tL3BsYXllci93ZWJfYXBpL3BsYXl1cmw/JykgIT0gLTEpIHsKICAgICAgICAgICAgICAgIHNlbGYuY2lkQXN5bmNDb250YWluZXIucmVzb2x2ZShhLnVybC5tYXRjaCgvY2lkPVxkKy8pWzBdLnNsaWNlKDQpKTsKICAgICAgICAgICAgICAgIGxldCBfc3VjY2VzcyA9IGEuc3VjY2VzczsKICAgICAgICAgICAgICAgIF9zdWNjZXNzKHt9KTsKICAgICAgICAgICAgICAgIGEuc3VjY2VzcyA9IHJlcyA9PiBzZWxmLnJlc29sdmVGb3JtYXQocmVzLCBmb3JtYXQpOwogICAgICAgICAgICAgICAganEuYWpheCA9IF9hamF4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBfYWpheC5jYWxsKGpxLCBhLCBjKTsKICAgICAgICB9OwogICAgICAgIHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGRpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLXF1YWxpdHkgPiBkaXYgPiB1bCA+IGxpOm50aC1jaGlsZCgke2J1dHRvbk51bWJlcn0pYCkuY2xpY2soKTsKICAgICAgICByZXR1cm4gcGVuZGluZ0Zvcm1hdDsKICAgIH0KCiAgICBhc3luYyBnZXRBU1MoY2xpY2thYmxlRm9ybWF0KSB7CiAgICAgICAgaWYgKHRoaXMuYXNzKSByZXR1cm4gdGhpcy5hc3M7CiAgICAgICAgdGhpcy5hc3MgPSBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHsKICAgICAgICAgICAgaWYgKCF0aGlzLmNpZCkgdGhpcy5jaWQgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIGlmICghY2xpY2thYmxlRm9ybWF0KSByZWplY3QoJ2dldCBBU1MgRXJyb3I6IGNpZCB1bmF2YWlsYWJsZSwgbm9yIGNsaWNrYWJsZSBmb3JtYXQgZ2l2ZW4uJyk7CiAgICAgICAgICAgICAgICBjb25zdCBqcSA9IHRoaXMucGxheWVyV2luID09IHdpbmRvdyA/ICQgOiB0aGlzLnBsYXllcldpbi4kOwogICAgICAgICAgICAgICAgY29uc3QgX2FqYXggPSBqcS5hamF4OwogICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uTnVtYmVyID0gY2xpY2thYmxlRm9ybWF0ID09ICdmbHYnID8gMSA6IDI7CgogICAgICAgICAgICAgICAgdGhpcy5sb2NrRm9ybWF0KGNsaWNrYWJsZUZvcm1hdCk7CiAgICAgICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7CiAgICAgICAgICAgICAgICBqcS5hamF4ID0gZnVuY3Rpb24gKGEsIGMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYykgeyBpZiAoYSkgYy51cmwgPSBhOyBhID0gYyB9OwogICAgICAgICAgICAgICAgICAgIGlmIChhLnVybC5pbmRleE9mKCdpbnRlcmZhY2UuYmlsaWJpbGkuY29tL3BsYXl1cmw/JykgIT0gLTEgfHwgYS51cmwuaW5kZXhPZignYmFuZ3VtaS5iaWxpYmlsaS5jb20vcGxheWVyL3dlYl9hcGkvcGxheXVybD8nKSAhPSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHNlbGYuY2lkID0gYS51cmwubWF0Y2goL2NpZD1cZCsvKVswXS5zbGljZSg0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBfc3VjY2VzcyA9IGEuc3VjY2VzczsKICAgICAgICAgICAgICAgICAgICAgICAgX3N1Y2Nlc3Moe30pOwogICAgICAgICAgICAgICAgICAgICAgICBhLnN1Y2Nlc3MgPSByZXMgPT4gc2VsZi5yZXNvbHZlRm9ybWF0KHJlcywgY2xpY2thYmxlRm9ybWF0KTsKICAgICAgICAgICAgICAgICAgICAgICAganEuYWpheCA9IF9hamF4OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2FqYXguY2FsbChqcSwgYSwgYyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgZGl2LmJpbGliaWxpLXBsYXllci12aWRlby1idG4tcXVhbGl0eSA+IGRpdiA+IHVsID4gbGk6bnRoLWNoaWxkKCR7YnV0dG9uTnVtYmVyfSlgKS5jbGljaygpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbGV0IFt7IGZldGNoRGFubWFrdSwgZ2VuZXJhdGVBU1MsIHNldFBvc2l0aW9uIH0sIGNpZF0gPSBhd2FpdCBQcm9taXNlLmFsbChbdGhpcy5hc3NBc3luY1NjcmlwdCwgdGhpcy5jaWRdKTsKCiAgICAgICAgICAgIGZldGNoRGFubWFrdShjaWQsIGRhbm1ha3UgPT4gewogICAgICAgICAgICAgICAgaWYgKHRoaXMuYmxvY2tlcikgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsYXllcldpbi5sb2NhbFN0b3JhZ2UuYmlsaWJpbGlfcGxheWVyX3NldHRpbmdzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdleHBzID0gbmV3IFJlZ0V4cChKU09OLnBhcnNlKHRoaXMucGxheWVyV2luLmxvY2FsU3RvcmFnZS5iaWxpYmlsaV9wbGF5ZXJfc2V0dGluZ3MpLmJsb2NrLmxpc3QubWFwKGUgPT4gZS52KS5qb2luKCd8JykpOwogICAgICAgICAgICAgICAgICAgICAgICBkYW5tYWt1ID0gZGFubWFrdS5maWx0ZXIoZCA9PiAhcmVnZXhwcy50ZXN0KGQudGV4dCkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxldCBhc3MgPSBnZW5lcmF0ZUFTUyhzZXRQb3NpdGlvbihkYW5tYWt1KSwgewogICAgICAgICAgICAgICAgICAgICd0aXRsZSc6IGRvY3VtZW50LnRpdGxlLAogICAgICAgICAgICAgICAgICAgICdvcmknOiBsb2NhdGlvbi5ocmVmLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAvLyBJIHdvdWxkIGFzc3VtZSBtb3N0IHVzZXJzIGFyZSB1c2luZyBXaW5kb3dzCiAgICAgICAgICAgICAgICBsZXQgYmxvYiA9IG5ldyBCbG9iKFsnXHVmZWZmJyArIGFzc10sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScgfSk7CiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMuYXNzID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYikpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gdGhpcy5hc3M7CiAgICB9CgogICAgYXN5bmMgcXVlcnlJbmZvKGZvcm1hdCkgewogICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5SW5mb011dGV4LmxvY2tBbmRBd2FpdChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIHN3aXRjaCAoZm9ybWF0KSB7CiAgICAgICAgICAgICAgICBjYXNlICdmbHYnOgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZsdnMpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZsdnM7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LmJpbGliaWxpLXBsYXllci12aWRlby1idG4tcXVhbGl0eSA+IGRpdiA+IHVsID4gbGk6bnRoLWNoaWxkKDEpJykuZ2V0QXR0cmlidXRlKCdkYXRhLXNlbGVjdGVkJykpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRGb3JtYXQoJ2ZsdicpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Tm9uQ3VycmVudEZvcm1hdCgnZmx2Jyk7CiAgICAgICAgICAgICAgICBjYXNlICdtcDQnOgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1wNCkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubXA0OwogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLXF1YWxpdHkgPiBkaXYgPiB1bCcpLmNoaWxkcmVuLmxlbmd0aCA9PSA0KQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTaXh0ZWVuTVA0KCk7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LmJpbGliaWxpLXBsYXllci12aWRlby1idG4tcXVhbGl0eSA+IGRpdiA+IHVsID4gbGk6bnRoLWNoaWxkKDIpJykuZ2V0QXR0cmlidXRlKCdkYXRhLXNlbGVjdGVkJykpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRGb3JtYXQoJ2hkbXA0Jyk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXROb25DdXJyZW50Rm9ybWF0KCdoZG1wNCcpOwogICAgICAgICAgICAgICAgY2FzZSAnYXNzJzoKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hc3MpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFzczsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYuYmlsaWJpbGktcGxheWVyLXZpZGVvLWJ0bi1xdWFsaXR5ID4gZGl2ID4gdWwgPiBsaTpudGgtY2hpbGQoMSknKS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2VsZWN0ZWQnKSkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QVNTKCdoZG1wNCcpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QVNTKCdmbHYnKTsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgYEJpbGltb25rZXk6IFdoYXQgaXMgZm9ybWF0ICR7Zm9ybWF0fT9gOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CgogICAgYXN5bmMgZ2V0UGxheWVyKCkgewogICAgICAgIGlmICh0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYuYmlsaWJpbGktcGxheWVyLXZpZGVvLWJ0bi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLXF1YWxpdHkgPiBkaXYgPiB1bCA+IGxpOm50aC1jaGlsZCgyKScpKSB7CiAgICAgICAgICAgIHRoaXMucGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JpbGliaWxpLXBsYXllci12aWRlby1wYW5lbCcpWzBdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnBsYXllcldpbjsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoTXV0YXRpb25PYnNlcnZlcikgewogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLmJpbGliaWxpLXBsYXllci12aWRlby1idG4tcXVhbGl0eSA+IGRpdiA+IHVsID4gbGk6bnRoLWNoaWxkKDIpJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiaWxpYmlsaS1wbGF5ZXItdmlkZW8tcGFuZWwnKVswXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMucGxheWVyV2luKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUodGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpbGliaWxpUGxheWVyJyksIHsgY2hpbGRMaXN0OiB0cnVlIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIGxldCB0ID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYuYmlsaWJpbGktcGxheWVyLXZpZGVvLWJ0bi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLXF1YWxpdHkgPiBkaXYgPiB1bCA+IGxpOm50aC1jaGlsZCgyKScpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JpbGliaWxpLXBsYXllci12aWRlby1wYW5lbCcpWzBdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5wbGF5ZXJXaW4pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDYwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KCiAgICBhc3luYyBoYW5nUGxheWVyKCkgewogICAgICAgIGF3YWl0IHRoaXMuZ2V0UGxheWVyKCk7CgogICAgICAgIGxldCB0cml2aWFsUmVzID0geyAnZnJvbSc6ICdsb2NhbCcsICdyZXN1bHQnOiAnc3VlZScsICdmb3JtYXQnOiAnaGRtcDQnLCAndGltZWxlbmd0aCc6IDEwLCAnYWNjZXB0X2Zvcm1hdCc6ICdmbHYsaGRtcDQsbXA0JywgJ2FjY2VwdF9xdWFsaXR5JzogWzMsIDIsIDFdLCAnc2Vla19wYXJhbSc6ICdzdGFydCcsICdzZWVrX3R5cGUnOiAnc2Vjb25kJywgJ2R1cmwnOiBbeyAnb3JkZXInOiAxLCAnbGVuZ3RoJzogMTAwMCwgJ3NpemUnOiAzMDAwMCwgJ3VybCc6ICcnLCAnYmFja3VwX3VybCc6IFsnJywgJyddIH1dIH07CiAgICAgICAgY29uc3QgcXVhbGl0eVRvRm9ybWF0ID0gWydtcDQnLCAnaGRtcDQnLCAnZmx2J107CiAgICAgICAgY29uc3QganEgPSB0aGlzLnBsYXllcldpbiA9PSB3aW5kb3cgPyAkIDogdGhpcy5wbGF5ZXJXaW4uJDsKICAgICAgICBjb25zdCBfYWpheCA9IGpxLmFqYXg7CgogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHsKICAgICAgICAgICAgbGV0IGJsb2NrZXJUaW1lb3V0OwogICAgICAgICAgICBqcS5hamF4ID0gZnVuY3Rpb24gKGEsIGMpIHsKICAgICAgICAgICAgICAgIGlmIChjKSB7IGlmIChhKSBjLnVybCA9IGE7IGEgPSBjIH07CiAgICAgICAgICAgICAgICBpZiAoYS51cmwuaW5kZXhPZignaW50ZXJmYWNlLmJpbGliaWxpLmNvbS9wbGF5dXJsPycpICE9IC0xIHx8IGEudXJsLmluZGV4T2YoJ2Jhbmd1bWkuYmlsaWJpbGkuY29tL3BsYXllci93ZWJfYXBpL3BsYXl1cmw/JykgIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYmxvY2tlclRpbWVvdXQpOwogICAgICAgICAgICAgICAgICAgIHRyaXZpYWxSZXMuZm9ybWF0ID0gcXVhbGl0eVRvRm9ybWF0W2EudXJsLm1hdGNoKC9xdWFsaXR5PShcZCkvKVsxXV07CiAgICAgICAgICAgICAgICAgICAgYS5zdWNjZXNzKHRyaXZpYWxSZXMpOwogICAgICAgICAgICAgICAgICAgIGJsb2NrZXJUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGpxLmFqYXggPSBfYWpheDsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICAgIH0sIDI1MDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9hamF4LmNhbGwoanEsIGEsIGMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBsZXQgYnV0dG9uID0gQXJyYXkKICAgICAgICAgICAgICAgIC5mcm9tKHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLmJpbGliaWxpLXBsYXllci12aWRlby1idG4tcXVhbGl0eSA+IGRpdiA+IHVsJykuY2hpbGRyZW4pCiAgICAgICAgICAgICAgICAuZmluZChlID0+ICFlLmdldEF0dHJpYnV0ZSgnZGF0YS1zZWxlY3RlZCcpKTsKICAgICAgICAgICAgYnV0dG9uLmNsaWNrKCk7CiAgICAgICAgfSk7CgogICAgICAgIC8qICoqKipvYnNvbGV0ZSoqKioKICAgICAgICAvLyBPYnNvbGV0ZTogSSBmb3VuZCBhIGxlc3MgZGVzdHJ1Y3RpdmUgd2F5CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIHJlc29sdmUgPT4gewogICAgICAgICAgICAvLyBNYWdpYyBudW1iZXIuIERvIG5vdCBrbm93IHdoeS4KICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCB0cml2aWFsUmVzU2VudCA9IG5ldyBQcm9taXNlKHIgPT4gewogICAgICAgICAgICAgICAgICAgIGpxLmFqYXggPSBmdW5jdGlvbiAoYSwgYykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYykgeyBpZiAoYSkgYy51cmwgPSBhOyBhID0gYyB9OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS51cmwuaW5kZXhPZignaW50ZXJmYWNlLmJpbGliaWxpLmNvbS9wbGF5dXJsPycpICE9IC0xIHx8IGEudXJsLmluZGV4T2YoJ2Jhbmd1bWkuYmlsaWJpbGkuY29tL3BsYXllci93ZWJfYXBpL3BsYXl1cmw/JykgIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlbmQgYmFjayBhIGZha2UgcmVzcG9uc2UgdG8gYWJvcnQgY3VycmVudCBsb2FkaW5nLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpdmlhbFJlcy5mb3JtYXQgPSBxdWFsaXR5VG9Gb3JtYXRbYS51cmwubWF0Y2goL3F1YWxpdHk9KFxkKS8pWzFdXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuc3VjY2Vzcyh0cml2aWFsUmVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVldWUuIEFnYWluLCBtYWdpYyBudW1iZXIuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHIsIDQwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2FqYXguY2FsbChqcSwgYSwgYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAvLyBGaW5kIGEgcmFuZG9tIGF2YWlsYWJsZSBidXR0b24KICAgICAgICAgICAgICAgIGxldCBidXR0b24gPSBBcnJheQogICAgICAgICAgICAgICAgICAgIC5mcm9tKHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLmJpbGliaWxpLXBsYXllci12aWRlby1idG4tcXVhbGl0eSA+IGRpdiA+IHVsJykuY2hpbGRyZW4pCiAgICAgICAgICAgICAgICAgICAgLmZpbmQoZSA9PiAhZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2VsZWN0ZWQnKSk7CiAgICAgICAgICAgICAgICBidXR0b24uY2xpY2soKTsKICAgICAgICAgICAgICAgIGF3YWl0IHRyaXZpYWxSZXNTZW50OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlc29sdmUodGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JpbGliaWxpUGxheWVyIHZpZGVvJykpOwogICAgICAgICAgICBqcS5hamF4ID0gX2FqYXg7CiAgICAgICAgfSk7Ki8KICAgIH0KCiAgICBhc3luYyBsb2FkRkxWRnJvbUNhY2hlKGluZGV4KSB7CiAgICAgICAgaWYgKCF0aGlzLmNhY2hlKSByZXR1cm47CiAgICAgICAgaWYgKCF0aGlzLmZsdnMpIHRocm93ICdCaWxpTW9ua2V5OiBpbmZvIHVuaW5pdGlhbGl6ZWQnOwogICAgICAgIGxldCBuYW1lID0gdGhpcy5mbHZzW2luZGV4XS5tYXRjaCgvXGQrLVxkKy5mbHYvKVswXTsKICAgICAgICBsZXQgaXRlbSA9IGF3YWl0IHRoaXMuY2FjaGUuZ2V0RGF0YShuYW1lKTsKICAgICAgICBpZiAoIWl0ZW0pIHJldHVybjsKICAgICAgICByZXR1cm4gdGhpcy5mbHZzQmxvYltpbmRleF0gPSBpdGVtLmRhdGE7CiAgICB9CgogICAgYXN5bmMgbG9hZFBhcnRpYWxGTFZGcm9tQ2FjaGUoaW5kZXgpIHsKICAgICAgICBpZiAoIXRoaXMuY2FjaGUpIHJldHVybjsKICAgICAgICBpZiAoIXRoaXMuZmx2cykgdGhyb3cgJ0JpbGlNb25rZXk6IGluZm8gdW5pbml0aWFsaXplZCc7CiAgICAgICAgbGV0IG5hbWUgPSB0aGlzLmZsdnNbaW5kZXhdLm1hdGNoKC9cZCstXGQrLmZsdi8pWzBdOwogICAgICAgIG5hbWUgPSAnUENfJyArIG5hbWU7CiAgICAgICAgbGV0IGl0ZW0gPSBhd2FpdCB0aGlzLmNhY2hlLmdldERhdGEobmFtZSk7CiAgICAgICAgaWYgKCFpdGVtKSByZXR1cm47CiAgICAgICAgcmV0dXJuIGl0ZW0uZGF0YTsKICAgIH0KCiAgICBhc3luYyBsb2FkQWxsRkxWRnJvbUNhY2hlKCkgewogICAgICAgIGlmICghdGhpcy5jYWNoZSkgcmV0dXJuOwogICAgICAgIGlmICghdGhpcy5mbHZzKSB0aHJvdyAnQmlsaU1vbmtleTogaW5mbyB1bmluaXRpYWxpemVkJzsKCiAgICAgICAgbGV0IHByb21pc2VzID0gW107CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZsdnMubGVuZ3RoOyBpKyspIHByb21pc2VzLnB1c2godGhpcy5sb2FkRkxWRnJvbUNhY2hlKGkpKTsKCiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTsKICAgIH0KCiAgICBhc3luYyBzYXZlRkxWVG9DYWNoZShpbmRleCwgYmxvYikgewogICAgICAgIGlmICghdGhpcy5jYWNoZSkgcmV0dXJuOwogICAgICAgIGlmICghdGhpcy5mbHZzKSB0aHJvdyAnQmlsaU1vbmtleTogaW5mbyB1bmluaXRpYWxpemVkJzsKICAgICAgICBsZXQgbmFtZSA9IHRoaXMuZmx2c1tpbmRleF0ubWF0Y2goL1xkKy1cZCsuZmx2LylbMF07CiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUuYWRkRGF0YSh7IG5hbWUsIGRhdGE6IGJsb2IgfSk7CiAgICB9CgogICAgYXN5bmMgc2F2ZVBhcnRpYWxGTFZUb0NhY2hlKGluZGV4LCBibG9iKSB7CiAgICAgICAgaWYgKCF0aGlzLmNhY2hlKSByZXR1cm47CiAgICAgICAgaWYgKCF0aGlzLmZsdnMpIHRocm93ICdCaWxpTW9ua2V5OiBpbmZvIHVuaW5pdGlhbGl6ZWQnOwogICAgICAgIGxldCBuYW1lID0gdGhpcy5mbHZzW2luZGV4XS5tYXRjaCgvXGQrLVxkKy5mbHYvKVswXTsKICAgICAgICBuYW1lID0gJ1BDXycgKyBuYW1lOwogICAgICAgIHJldHVybiB0aGlzLmNhY2hlLnB1dERhdGEoeyBuYW1lLCBkYXRhOiBibG9iIH0pOwogICAgfQoKICAgIGFzeW5jIGNsZWFuUGFydGlhbEZMVkluQ2FjaGUoaW5kZXgpIHsKICAgICAgICBpZiAoIXRoaXMuY2FjaGUpIHJldHVybjsKICAgICAgICBpZiAoIXRoaXMuZmx2cykgdGhyb3cgJ0JpbGlNb25rZXk6IGluZm8gdW5pbml0aWFsaXplZCc7CiAgICAgICAgbGV0IG5hbWUgPSB0aGlzLmZsdnNbaW5kZXhdLm1hdGNoKC9cZCstXGQrLmZsdi8pWzBdOwogICAgICAgIG5hbWUgPSAnUENfJyArIG5hbWU7CiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUuZGVsZXRlRGF0YShuYW1lKTsKICAgIH0KCiAgICBhc3luYyBnZXRGTFYoaW5kZXgsIHByb2dyZXNzSGFuZGxlcikgewogICAgICAgIGlmICh0aGlzLmZsdnNCbG9iW2luZGV4XSkgcmV0dXJuIHRoaXMuZmx2c0Jsb2JbaW5kZXhdOwoKICAgICAgICBpZiAoIXRoaXMuZmx2cykgdGhyb3cgJ0JpbGlNb25rZXk6IGluZm8gdW5pbml0aWFsaXplZCc7CiAgICAgICAgdGhpcy5mbHZzQmxvYltpbmRleF0gPSAoYXN5bmMgKCkgPT4gewogICAgICAgICAgICBsZXQgY2FjaGUgPSBhd2FpdCB0aGlzLmxvYWRGTFZGcm9tQ2FjaGUoaW5kZXgpOwogICAgICAgICAgICBpZiAoY2FjaGUpIHJldHVybiB0aGlzLmZsdnNCbG9iW2luZGV4XSA9IGNhY2hlOwogICAgICAgICAgICBsZXQgcGFydGlhbENhY2hlID0gYXdhaXQgdGhpcy5sb2FkUGFydGlhbEZMVkZyb21DYWNoZShpbmRleCk7CgogICAgICAgICAgICBsZXQgYnVybCA9IHRoaXMuZmx2c1tpbmRleF07CiAgICAgICAgICAgIGlmIChwYXJ0aWFsQ2FjaGUpIGJ1cmwgKz0gYCZic3RhcnQ9JHtwYXJ0aWFsQ2FjaGUuc2l6ZX1gOwogICAgICAgICAgICBsZXQgb3B0ID0gewogICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgICAgIG1vZGU6ICdjb3JzJywKICAgICAgICAgICAgICAgIGNhY2hlOiAnZGVmYXVsdCcsCiAgICAgICAgICAgICAgICByZWZlcnJlclBvbGljeTogJ25vLXJlZmVycmVyLXdoZW4tZG93bmdyYWRlJywKICAgICAgICAgICAgICAgIGNhY2hlTG9hZGVkOiBwYXJ0aWFsQ2FjaGUgPyBwYXJ0aWFsQ2FjaGUuc2l6ZSA6IDAsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiBwYXJ0aWFsQ2FjaGUgJiYgKGJ1cmwuaW5kZXhPZignd3NUaW1lJykgPT0gLTEpID8geyBSYW5nZTogYGJ5dGVzPSR7cGFydGlhbENhY2hlLnNpemV9LWAgfSA6IHVuZGVmaW5lZAogICAgICAgICAgICB9OwogICAgICAgICAgICBvcHQub25wcm9ncmVzcyA9IHByb2dyZXNzSGFuZGxlcjsKICAgICAgICAgICAgb3B0Lm9uZXJyb3IgPSBvcHQub25hYm9ydCA9ICh7IHRhcmdldCwgdHlwZSB9KSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgcEJsb2IgPSB0YXJnZXQuZ2V0UGFydGlhbEJsb2IoKTsKICAgICAgICAgICAgICAgIGlmIChwYXJ0aWFsQ2FjaGUpIHBCbG9iID0gbmV3IEJsb2IoW3BhcnRpYWxDYWNoZSwgcEJsb2JdKTsKICAgICAgICAgICAgICAgIHRoaXMuc2F2ZVBhcnRpYWxGTFZUb0NhY2hlKGluZGV4LCBwQmxvYik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBmY2ggPSBuZXcgRGV0YWlsZWRGZXRjaEJsb2IoYnVybCwgb3B0KTsKICAgICAgICAgICAgdGhpcy5mbHZzRGV0YWlsZWRGZXRjaFtpbmRleF0gPSBmY2g7CiAgICAgICAgICAgIGxldCBmdWxsUmVzcG9uc2UgPSBhd2FpdCBmY2guZ2V0QmxvYigpOwogICAgICAgICAgICB0aGlzLmZsdnNEZXRhaWxlZEZldGNoW2luZGV4XSA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgaWYgKHBhcnRpYWxDYWNoZSkgewogICAgICAgICAgICAgICAgZnVsbFJlc3BvbnNlID0gbmV3IEJsb2IoW3BhcnRpYWxDYWNoZSwgZnVsbFJlc3BvbnNlXSk7CiAgICAgICAgICAgICAgICB0aGlzLmNsZWFuUGFydGlhbEZMVkluQ2FjaGUoaW5kZXgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuc2F2ZUZMVlRvQ2FjaGUoaW5kZXgsIGZ1bGxSZXNwb25zZSk7CiAgICAgICAgICAgIHJldHVybiAodGhpcy5mbHZzQmxvYltpbmRleF0gPSBmdWxsUmVzcG9uc2UpOwoKICAgICAgICAgICAgLyogKioqKm9ic29sZXRlKioqKgogICAgICAgICAgICAvLyBPYnNvbGV0ZTogY2Fubm90IHNhdmUgcGFydGlhbCBibG9iCiAgICAgICAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgdGhpcy5mbHZzWEhSW2luZGV4XSA9IHhocjsKICAgICAgICAgICAgeGhyLm9ubG9hZCA9ICgpID0+IHsKICAgICAgICAgICAgICAgIGxldCBmdWxsUmVzcG9uc2UgPSB4aHIucmVzcG9uc2U7CiAgICAgICAgICAgICAgICBpZiAocGFydGlhbENhY2hlKSBmdWxsUmVzcG9uc2UgPSBuZXcgQmxvYihbcGFydGlhbENhY2hlLCB4aHIucmVzcG9uc2VdKTsKICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUZMVlRvQ2FjaGUoaW5kZXgsIGZ1bGxSZXNwb25zZSk7CiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMuZmx2c0Jsb2JbaW5kZXhdID0gZnVsbFJlc3BvbnNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB4aHIub25lcnJvciA9IHJlamVjdDsKICAgICAgICAgICAgeGhyLm9uYWJvcnQgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnNhdmVQYXJ0aWFsRkxWVG9DYWNoZShpbmRleCwgeGhyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB4aHIub25wcm9ncmVzcyA9IGV2ZW50ID0+IHByb2dyZXNzSGFuZGxlcihldmVudC5sb2FkZWQsIGV2ZW50LnRvdGFsLCBpbmRleCk7CiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09IHRoaXMuSEVBREVSU19SRUNFSVZFRCkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTaXplIG9mICR7aW5kZXh9OiAke3hoci5nZXRSZXNwb25zZUhlYWRlcignQ29udGVudC1MZW5ndGgnKX1gKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InOwogICAgICAgICAgICB4aHIub3BlbignR0VUJywgdGhpcy5mbHZzW2luZGV4XSwgdHJ1ZSk7CiAgICAgICAgICAgIGlmIChwYXJ0aWFsQ2FjaGUpIHsKICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdSYW5nZScsIGBieXRlcz0ke3BhcnRpYWxDYWNoZS5zaXplfS1gKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB4aHIuc2VuZCgpOyovCiAgICAgICAgfSkoKTsKICAgICAgICByZXR1cm4gdGhpcy5mbHZzQmxvYltpbmRleF07CiAgICB9CgogICAgYXN5bmMgYWJvcnRGTFYoaW5kZXgpIHsKICAgICAgICBpZiAodGhpcy5mbHZzRGV0YWlsZWRGZXRjaFtpbmRleF0pIHJldHVybiB0aGlzLmZsdnNEZXRhaWxlZEZldGNoW2luZGV4XS5hYm9ydCgpOwogICAgfQoKICAgIGFzeW5jIGdldEFsbEZMVnMocHJvZ3Jlc3NIYW5kbGVyKSB7CiAgICAgICAgaWYgKCF0aGlzLmZsdnMpIHRocm93ICdCaWxpTW9ua2V5OiBpbmZvIHVuaW5pdGlhbGl6ZWQnOwogICAgICAgIGxldCBwcm9taXNlcyA9IFtdOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mbHZzLmxlbmd0aDsgaSsrKSBwcm9taXNlcy5wdXNoKHRoaXMuZ2V0RkxWKGksIHByb2dyZXNzSGFuZGxlcikpOwogICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7CiAgICB9CgogICAgYXN5bmMgY2xlYW5BbGxGTFZzSW5DYWNoZSgpIHsKICAgICAgICBpZiAoIXRoaXMuY2FjaGUpIHJldHVybjsKICAgICAgICBpZiAoIXRoaXMuZmx2cykgdGhyb3cgJ0JpbGlNb25rZXk6IGluZm8gdW5pbml0aWFsaXplZCc7CiAgICAgICAgbGV0IHByb21pc2VzID0gW107CiAgICAgICAgZm9yIChsZXQgZmx2IG9mIHRoaXMuZmx2cykgewogICAgICAgICAgICBsZXQgbmFtZSA9IGZsdi5tYXRjaCgvXGQrLVxkKy5mbHYvKVswXTsKICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLmNhY2hlLmRlbGV0ZURhdGEobmFtZSkpOwogICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuY2FjaGUuZGVsZXRlRGF0YSgnUENfJyArIG5hbWUpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTsKICAgIH0KCiAgICBhc3luYyBzZXR1cFByb3h5KHJlcywgb25zdWNjZXNzKSB7CiAgICAgICAgKCgpID0+IHsKICAgICAgICAgICAgbGV0IF9mZXRjaCA9IHRoaXMucGxheWVyV2luLmZldGNoOwogICAgICAgICAgICB0aGlzLnBsYXllcldpbi5mZXRjaCA9IGZ1bmN0aW9uIChpbnB1dCwgaW5pdCkgewogICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5zbGljZSB8fCBpbnB1dC5zbGljZSgwLCA1KSAhPSAnYmxvYjonKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9mZXRjaChpbnB1dCwgaW5pdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBsZXQgYnN0YXJ0ID0gaW5wdXQuaW5kZXhPZignP2JzdGFydD0nKTsKICAgICAgICAgICAgICAgIGlmIChic3RhcnQgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9mZXRjaChpbnB1dCwgaW5pdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoIWluaXQuaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpIGluaXQuaGVhZGVycyA9IG5ldyBIZWFkZXJzKGluaXQuaGVhZGVycyB8fCB7fSk7CiAgICAgICAgICAgICAgICBpbml0LmhlYWRlcnMuc2V0KCdSYW5nZScsIGBieXRlcz0ke2lucHV0LnNsaWNlKGJzdGFydCArIDgpfS1gKTsKICAgICAgICAgICAgICAgIHJldHVybiBfZmV0Y2goaW5wdXQuc2xpY2UoMCwgYnN0YXJ0KSwgaW5pdCkKICAgICAgICAgICAgfQogICAgICAgIH0pKCk7CiAgICAgICAgYXdhaXQgdGhpcy5sb2FkQWxsRkxWRnJvbUNhY2hlKCk7CiAgICAgICAgbGV0IHJlc1Byb3h5ID0ge307CiAgICAgICAgT2JqZWN0LmFzc2lnbihyZXNQcm94eSwgcmVzKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmx2c0Jsb2IubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHRoaXMuZmx2c0Jsb2JbaV0pIHJlc1Byb3h5LmR1cmxbaV0udXJsID0gdGhpcy5wbGF5ZXJXaW4uVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLmZsdnNCbG9iW2ldKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG9uc3VjY2VzcyhyZXNQcm94eSk7CiAgICB9CgogICAgc3RhdGljIGFzeW5jIGxvYWRBU1NTY3JpcHQoc3JjID0gJ2h0dHBzOi8vdGlhbnNoLmdpdGh1Yi5pby91cy1kYW5tYWt1L2JpbGliaWxpL2JpbGliaWxpX0FTU19EYW5tYWt1X0Rvd25sb2FkZXIudXNlci5qcycpIHsKICAgICAgICBsZXQgc2NyaXB0ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgICAgICBsZXQgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgIHJlcS5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKHJlcS5yZXNwb25zZVRleHQpOwogICAgICAgICAgICByZXEub25lcnJvciA9IHJlamVjdDsKICAgICAgICAgICAgcmVxLm9wZW4oJ2dldCcsIHNyYyk7CiAgICAgICAgICAgIHJlcS5zZW5kKCk7CiAgICAgICAgfSk7CiAgICAgICAgc2NyaXB0ID0gc2NyaXB0LnNsaWNlKDAsIHNjcmlwdC5pbmRleE9mKCd2YXIgaW5pdCA9IGZ1bmN0aW9uICgpJykpOwogICAgICAgIGxldCBoZWFkID0gYAogICAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgYDsKICAgICAgICBsZXQgZm9vdCA9IGAKICAgICAgICAgICAgZmV0Y2hYTUwgPSBmdW5jdGlvbiAoY2lkLCBjYWxsYmFjaykgewogICAgICAgICAgICAgICAgdmFyIG9SZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgICAgIG9SZXEub3BlbignR0VUJywgJ2h0dHBzOi8vY29tbWVudC5iaWxpYmlsaS5jb20ve3tjaWR9fS54bWwnLnJlcGxhY2UoJ3t7Y2lkfX0nLCBjaWQpKTsKICAgICAgICAgICAgICAgIG9SZXEub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gb1JlcS5yZXNwb25zZVRleHQucmVwbGFjZSgvKD86W1wwLVx4MDhceDBCXGZceDBFLVx4MUZcdUZGRkVcdUZGRkZdfFtcdUQ4MDAtXHVEQkZGXSg/IVtcdURDMDAtXHVERkZGXSl8KD86W15cdUQ4MDAtXHVEQkZGXXxeKVtcdURDMDAtXHVERkZGXSkvZywgIiIpOwogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGNvbnRlbnQpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIG9SZXEuc2VuZCgpOwogICAgICAgICAgICB9OwogICAgICAgICAgICBpbml0Rm9udCgpOwogICAgICAgICAgICByZXR1cm4geyBmZXRjaERhbm1ha3U6IGZldGNoRGFubWFrdSwgZ2VuZXJhdGVBU1M6IGdlbmVyYXRlQVNTLCBzZXRQb3NpdGlvbjogc2V0UG9zaXRpb24gfTsKICAgICAgICB9KSgpCiAgICAgICAgYDsKICAgICAgICBzY3JpcHQgPSBgJHtoZWFkfSR7c2NyaXB0fSR7Zm9vdH1gOwogICAgICAgIGxldCBpbmRpcmVjdEV2YWxXcmFwcGVyID0geyAnZXZhbCc6IGV2YWwgfTsKICAgICAgICByZXR1cm4gaW5kaXJlY3RFdmFsV3JhcHBlci5ldmFsKHNjcmlwdCk7CiAgICB9CgogICAgc3RhdGljIF9VTklUX1RFU1QoKSB7CiAgICAgICAgKGFzeW5jICgpID0+IHsKICAgICAgICAgICAgbGV0IHBsYXllcldpbiA9IGF3YWl0IEJpbGlVc2VySlMuZ2V0UGxheWVyV2luKCk7CiAgICAgICAgICAgIHdpbmRvdy5tID0gbmV3IEJpbGlNb25rZXkocGxheWVyV2luKTsKCiAgICAgICAgICAgIGNvbnNvbGUud2Fybignc25pZmZEZWZhdWx0Rm9ybWF0IHRlc3QnKTsKICAgICAgICAgICAgYXdhaXQgbS5zbmlmZkRlZmF1bHRGb3JtYXQoKTsKICAgICAgICAgICAgY29uc29sZS5sb2cobSk7CgogICAgICAgICAgICBjb25zb2xlLndhcm4oJ2RhdGEgcmFjZSB0ZXN0Jyk7CiAgICAgICAgICAgIG0ucXVlcnlJbmZvKCdtcDQnKTsKICAgICAgICAgICAgY29uc29sZS5sb2cobS5xdWVyeUluZm8oJ21wNCcpKTsKCiAgICAgICAgICAgIGNvbnNvbGUud2FybignZ2V0Tm9uQ3VycmVudEZvcm1hdCB0ZXN0Jyk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGF3YWl0IG0ucXVlcnlJbmZvKCdtcDQnKSk7CgogICAgICAgICAgICBjb25zb2xlLndhcm4oJ2dldEN1cnJlbnRGb3JtYXQgdGVzdCcpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhhd2FpdCBtLnF1ZXJ5SW5mbygnZmx2JykpOwoKICAgICAgICAgICAgLy9sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9KSgpOwogICAgfQp9CgpjbGFzcyBCaWxpUG9seWZpbGwgewogICAgY29uc3RydWN0b3IocGxheWVyV2luLAogICAgICAgIG9wdGlvbiA9IHsKICAgICAgICAgICAgc2V0U3RvcmFnZTogKG4sIGkpID0+IHBsYXllcldpbi5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShuLCBpKSwKICAgICAgICAgICAgZ2V0U3RvcmFnZTogbiA9PiBwbGF5ZXJXaW4ubG9jYWxTdG9yYWdlLmdldEl0ZW0obiksCiAgICAgICAgICAgIGRibGNsaWNrOiB0cnVlLAogICAgICAgICAgICBzY3JvbGw6IHRydWUsCiAgICAgICAgICAgIHJlY29tbWVuZDogdHJ1ZSwKICAgICAgICAgICAgYXV0b05leHQ6IHRydWUsCiAgICAgICAgICAgIGF1dG9OZXh0VGltZW91dDogMjAwMCwKICAgICAgICAgICAgbGlmdDogdHJ1ZSwKICAgICAgICAgICAgYXV0b1Jlc3VtZTogdHJ1ZSwKICAgICAgICAgICAgYXV0b1BsYXk6IGZhbHNlLAogICAgICAgICAgICBhdXRvRnVsbFNjcmVlbjogZmFsc2UsCiAgICAgICAgICAgIG9wZWQ6IHRydWUsCiAgICAgICAgICAgIHNwZWVjaDogZmFsc2UsCiAgICAgICAgICAgIHNlcmllczogdHJ1ZSwKICAgICAgICB9LCBoaW50SW5mbyA9ICgpID0+IHsgfSkgewogICAgICAgIHRoaXMucGxheWVyV2luID0gcGxheWVyV2luOwogICAgICAgIHRoaXMudmlkZW8gPSBudWxsOwogICAgICAgIHRoaXMudmFuaWxsYVBsYXllciA9IG51bGw7CiAgICAgICAgdGhpcy5vcHRpb24gPSBvcHRpb247CiAgICAgICAgdGhpcy5zZXRTdG9yYWdlID0gb3B0aW9uLnNldFN0b3JhZ2U7CiAgICAgICAgdGhpcy5nZXRTdG9yYWdlID0gb3B0aW9uLmdldFN0b3JhZ2U7CiAgICAgICAgdGhpcy5oaW50SW5mbyA9IGhpbnRJbmZvOwogICAgICAgIHRoaXMuYXV0b05leHREZXN0aW5hdGlvbiA9IG51bGw7CiAgICAgICAgdGhpcy5hdXRvTmV4dFRpbWVvdXQgPSBvcHRpb24uYXV0b05leHRUaW1lb3V0OwogICAgICAgIHRoaXMuc2VyaWVzID0gW107CiAgICAgICAgdGhpcy51c2VyZGF0YSA9IG51bGw7CiAgICB9CgogICAgc2F2ZVVzZXJkYXRhKCkgewogICAgICAgIHRoaXMuc2V0U3RvcmFnZSgnYmlsaVBvbHlmaWxsJywgSlNPTi5zdHJpbmdpZnkodGhpcy51c2VyZGF0YSkpOwogICAgfQoKICAgIHJldHJpdmVVc2VyZGF0YSgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICB0aGlzLnVzZXJkYXRhID0gdGhpcy5nZXRTdG9yYWdlKCdiaWxpUG9seWZpbGwnKTsKICAgICAgICAgICAgaWYgKHRoaXMudXNlcmRhdGEubGVuZ3RoID4gMTA3Mzc0MTgyNCkgdG9wLmFsZXJ0KCdCaWxpUG9seWZpbGzohJrmnKzmlbDmja7lt7Lnu4/lv6vmu6HkuobvvIzlnKjmkq3mlL7lmajkuIrlj7PplK4tPkJpbGlQb2x5ZmlsbC0+54mH5aS054mH5bC+LT7mo4Dop4bmlbDmja7vvIzliKDmjonkuIDkupvlkKfjgIInKTsKICAgICAgICAgICAgdGhpcy51c2VyZGF0YSA9IEpTT04ucGFyc2UodGhpcy51c2VyZGF0YSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7IH0KICAgICAgICBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKCF0aGlzLnVzZXJkYXRhKSB0aGlzLnVzZXJkYXRhID0ge307CiAgICAgICAgICAgIGlmICghKHRoaXMudXNlcmRhdGEub3BlZCBpbnN0YW5jZW9mIE9iamVjdCkpIHRoaXMudXNlcmRhdGEub3BlZCA9IHt9OwogICAgICAgIH0KICAgIH0KCiAgICBhc3luYyBzZXRGdW5jdGlvbnMoKSB7CiAgICAgICAgdGhpcy5yZXRyaXZlVXNlcmRhdGEoKTsKICAgICAgICB0aGlzLnZpZGVvID0gYXdhaXQgdGhpcy5nZXRQbGF5ZXJWaWRlbygpOwogICAgICAgIGlmICghdGhpcy5vcHRpb24uYmV0YWJldGEpIHJldHVybiB0aGlzLmF1dG9OZXh0RGVzdGluYXRpb24gPSAn5Yiw6K6+572u5byA5ZCvJzsKICAgICAgICBpZiAodGhpcy5vcHRpb24uZGJsY2xpY2spIHRoaXMuZGJsY2xpY2tGdWxsU2NyZWVuKCk7CiAgICAgICAgaWYgKHRoaXMub3B0aW9uLnNjcm9sbCkgdGhpcy5zY3JvbGxUb1BsYXllcigpOwogICAgICAgIGlmICh0aGlzLm9wdGlvbi5yZWNvbW1lbmQpIHRoaXMuc2hvd1JlY29tbWVuZFRhYigpOwogICAgICAgIGlmICh0aGlzLm9wdGlvbi5hdXRvTmV4dCkgdGhpcy5hdXRvTmV4dCgpOwogICAgICAgIGlmICh0aGlzLm9wdGlvbi5saWZ0KSB0aGlzLmxpZnRCb3R0b21EYW5tdWt1KCk7CiAgICAgICAgaWYgKHRoaXMub3B0aW9uLmF1dG9SZXN1bWUpIHRoaXMuYXV0b1Jlc3VtZSgpOwogICAgICAgIGlmICh0aGlzLm9wdGlvbi5hdXRvUGxheSkgdGhpcy5hdXRvUGxheSgpOwogICAgICAgIGlmICh0aGlzLm9wdGlvbi5hdXRvRnVsbFNjcmVlbikgdGhpcy5hdXRvRnVsbFNjcmVlbigpOwogICAgICAgIGlmICh0aGlzLm9wdGlvbi5vcGVkKSB0aGlzLnNraXBPUEVEKCk7CiAgICAgICAgbGV0IGggPSAoKSA9PiB0aGlzLnNhdmVVc2VyZGF0YSgpOwogICAgICAgIHRoaXMucGxheWVyV2luLmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGgpOwogICAgICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignZW1wdGllZCcsICgpID0+IHsgdGhpcy5wbGF5ZXJXaW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgaCk7IHRoaXMub3B0aW9uLnNjcm9sbCA9IHVuZGVmaW5lZDsgdGhpcy5zZXRGdW5jdGlvbnMoKTsgfSk7CiAgICAgICAgLy8gYmV0YQogICAgICAgIGlmICh0aGlzLm9wdGlvbi5zcGVlY2gpIHRvcC5kb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiBlLmRldGFpbCA+IDIgPyB0aGlzLnNwZWVjaFJlY29nbml0aW9uKCkgOiB1bmRlZmluZWQpOwogICAgICAgIGlmICh0aGlzLm9wdGlvbi5zZXJpZXMpIHRoaXMuaW5mZXJOZXh0SW5TZXJpZXMoKTsKICAgIH0KCiAgICBhc3luYyBpbmZlck5leHRJblNlcmllcygpIHsKICAgICAgICBsZXQgdGl0bGUgPSB0b3AuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndi10aXRsZScpWzBdLnRleHRDb250ZW50OwogICAgICAgIGlmICh0aGlzLnBsYXllcldpbi5wYWdlbm8gJiYgdGhpcy5wbGF5ZXJXaW4ucGFnZW5vICE9IDEpIHsKICAgICAgICAgICAgbGV0IGggPSB0aXRsZS5sYXN0SW5kZXhPZihgKCR7dGhpcy5wbGF5ZXJXaW4ucGFnZW5vfSlgKTsKICAgICAgICAgICAgaWYgKGggIT0gLTEpIHsKICAgICAgICAgICAgICAgIHRpdGxlID0gdGl0bGUuc2xpY2UoMCwgaCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIDEuIEZpbmQgc2VyaWVzIG5hbWUKICAgICAgICBsZXQgZXBOdW1iZXJUZXh0ID0gdGl0bGUubWF0Y2goL1xkKy9nKTsKICAgICAgICBpZiAoIWVwTnVtYmVyVGV4dCkgcmV0dXJuIHRoaXMuc2VyaWVzID0gW107CiAgICAgICAgZXBOdW1iZXJUZXh0ID0gZXBOdW1iZXJUZXh0LnBvcCgpOwogICAgICAgIGxldCBzZXJpZXNUaXRsZSA9IHRpdGxlLnNsaWNlKDAsIHRpdGxlLmxhc3RJbmRleE9mKGVwTnVtYmVyVGV4dCkpLnRyaW0oKTsKICAgICAgICAvLyAyLiBTdWJzdGl0dWRlIGVwIG51bWJlcgogICAgICAgIGxldCBlcCA9IHBhcnNlSW50KGVwTnVtYmVyVGV4dCk7CiAgICAgICAgaWYgKGVwTnVtYmVyVGV4dCA9PT0gJzA5JykgZXAgPSBbYDA4YCwgYDEwYF07CiAgICAgICAgZWxzZSBpZiAoZXBOdW1iZXJUZXh0WzBdID09PSAnMCcpIGVwID0gW2AwJHtlcCAtIDF9YCwgYDAke2VwICsgMX1gXTsKICAgICAgICBlbHNlIGVwID0gW2Ake2VwIC0gMX1gLCBgJHtlcCArIDF9YF07CiAgICAgICAgZXAgPSBbLi4uZXAubWFwKGUgPT4gc2VyaWVzVGl0bGUgKyBlKSwgLi4uZXBdOwoKICAgICAgICBsZXQgbWlkID0gdG9wLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyLWluZm8tcmFuaycpLmNoaWxkcmVuWzBdLmhyZWYubWF0Y2goL1xkKy8pWzBdOwogICAgICAgIGxldCB2bGlzdCA9IGF3YWl0IFByb21pc2UuYWxsKFt0aXRsZSwgLi4uZXBdLm1hcChrZXl3b3JkID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgbGV0IHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICByZXEub25sb2FkID0gKCkgPT4gcmVzb2x2ZSgocmVxLnJlc3BvbnNlLnN0YXR1cyAmJiByZXEucmVzcG9uc2UuZGF0YS52bGlzdCkgfHwgW10pOwogICAgICAgICAgICByZXEub25lcnJvciA9IHJlamVjdDsKICAgICAgICAgICAgcmVxLm9wZW4oJ2dldCcsIGBodHRwczovL3NwYWNlLmJpbGliaWxpLmNvbS9hamF4L21lbWJlci9nZXRTdWJtaXRWaWRlb3M/bWlkPSR7bWlkfSZrZXl3b3JkPSR7a2V5d29yZH1gKTsKICAgICAgICAgICAgcmVxLnJlc3BvbnNlVHlwZSA9ICdqc29uJzsKICAgICAgICAgICAgcmVxLnNlbmQoKTsKICAgICAgICB9KSkpOwoKICAgICAgICB2bGlzdFswXSA9IFt2bGlzdFswXS5maW5kKGUgPT4gZS50aXRsZSA9PSB0aXRsZSldOwogICAgICAgIHRoaXMuc2VyaWVzID0gW3ZsaXN0WzFdLmZpbmQoZSA9PiBlLmNyZWF0ZWQgPCB2bGlzdFswXVswXS5jcmVhdGVkKSwgdmxpc3RbMl0ucmV2ZXJzZSgpLmZpbmQoZSA9PiBlLmNyZWF0ZWQgPiB2bGlzdFswXVswXS5jcmVhdGVkKV07CiAgICAgICAgaWYgKCF0aGlzLnNlcmllc1swXSkgdGhpcy5zZXJpZXNbMF0gPSB2bGlzdFszXS5maW5kKGUgPT4gZS5jcmVhdGVkIDwgdmxpc3RbMF1bMF0uY3JlYXRlZCkgfHwgbnVsbDsKICAgICAgICBpZiAoIXRoaXMuc2VyaWVzWzFdKSB0aGlzLnNlcmllc1sxXSA9IHZsaXN0WzRdLnJldmVyc2UoKS5maW5kKGUgPT4gZS5jcmVhdGVkID4gdmxpc3RbMF1bMF0uY3JlYXRlZCkgfHwgbnVsbDsKCiAgICAgICAgcmV0dXJuIHRoaXMuc2VyaWVzOwogICAgfQoKICAgIGRibGNsaWNrRnVsbFNjcmVlbigpIHsKICAgICAgICB0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgKCkgPT4KICAgICAgICAgICAgdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JpbGliaWxpUGxheWVyIGRpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLWZ1bGxzY3JlZW4nKS5jbGljaygpCiAgICAgICAgKTsKICAgIH0KCiAgICBzY3JvbGxUb1BsYXllcigpIHsKICAgICAgICBpZiAodG9wLnNjcm9sbFkgPCAyMDApIHRvcC5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9mcWknKS5zY3JvbGxJbnRvVmlldygpOwogICAgfQoKICAgIHNob3dSZWNvbW1lbmRUYWIoKSB7CiAgICAgICAgdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JpbGliaWxpUGxheWVyIGRpdi5iaWxpYmlsaS1wbGF5ZXItZmlsdGVyLWJ0bi1yZWNvbW1lbmQnKS5jbGljaygpOwogICAgfQoKICAgIGdldENvdmVySW1hZ2UoKSB7CiAgICAgICAgaWYgKHRvcC5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY292ZXJfaW1hZ2UnKSkKICAgICAgICAgICAgcmV0dXJuIHRvcC5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY292ZXJfaW1hZ2UnKS5zcmM7CiAgICAgICAgZWxzZSBpZiAodG9wLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi52MS1iYW5ndW1pLWluZm8taW1nID4gYSA+IGltZycpKQogICAgICAgICAgICByZXR1cm4gdG9wLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi52MS1iYW5ndW1pLWluZm8taW1nID4gYSA+IGltZycpLnNyYy5zbGljZSgwLCB0b3AuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LnYxLWJhbmd1bWktaW5mby1pbWcgPiBhID4gaW1nJykuc3JjLmluZGV4T2YoJy5qcGcnKSArIDQpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgYXV0b05leHQoKSB7CiAgICAgICAgLy8gMSBOZXh0IFBhcnQKICAgICAgICAvLyAvLyAyIFdhdGNoIExhdGVyOiBob3cgdG8gY29vcGVyYXRlIHdpdGggYmlsaWJpbGkncyB2YW5pbGxhIHdhdGNobGF0ZXI/IGl0IGlzIG1vcmUgYSBwbGF5bGlzdAogICAgICAgIC8vIDMgUmVjb21tZW5kYXRpb25zCiAgICAgICAgaWYgKHRoaXMuYXV0b05leHREZXN0aW5hdGlvbiAmJiB0aGlzLmF1dG9OZXh0RGVzdGluYXRpb24gIT0gJ+ayoeacieS6hicpIHJldHVybjsKICAgICAgICBsZXQgZGVzdGluYXRpb24sIG5leHRMb2NhdGlvbjsKICAgICAgICBpZiAoIW5leHRMb2NhdGlvbiAmJiB0b3AubG9jYXRpb24uaG9zdCA9PSAnYmFuZ3VtaS5iaWxpYmlsaS5jb20nKSB7CiAgICAgICAgICAgIGRlc3RpbmF0aW9uID0gJ+S4i+S4gFAnOyAvL+eVquWJpzoKICAgICAgICAgICAgbmV4dExvY2F0aW9uID0gKG5leHRMb2NhdGlvbiA9IHRvcC5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd1bC5zbGlkZXItbGlzdCAuY3VyICsgbGknKSkgPyAoKSA9PiBuZXh0TG9jYXRpb24uY2xpY2soKSA6IHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgICAgaWYgKCFuZXh0TG9jYXRpb24pIHsKICAgICAgICAgICAgZGVzdGluYXRpb24gPSAn5LiL5LiAUCc7IC8v6KeG6aKROgogICAgICAgICAgICBuZXh0TG9jYXRpb24gPSAobmV4dExvY2F0aW9uID0gdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsaXN0IC5jdXJQYWdlICsgYScpKSA/CiAgICAgICAgICAgICAgICB0aGlzLnBsYXllcldpbi5wbGF5ZXIubmV4dCBpbnN0YW5jZW9mIEZ1bmN0aW9uID8gdGhpcy5wbGF5ZXJXaW4ucGxheWVyLm5leHQgOiBuZXh0TG9jYXRpb24uaHJlZiA6IHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgICAgaWYgKCFuZXh0TG9jYXRpb24pIHsKICAgICAgICAgICAgZGVzdGluYXRpb24gPSAn56iN5ZCO6KeC55yLJzsgLy/liJfooag6CiAgICAgICAgICAgIG5leHRMb2NhdGlvbiA9IChuZXh0TG9jYXRpb24gPSB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdsaS5iaWxpYmlsaS1wbGF5ZXItd2F0Y2hsYXRlci1pdGVtW2RhdGEtc3RhdGUtcGxheT0idHJ1ZSJdICsgbGknKSkgPwogICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJXaW4ucGxheWVyLm5leHQgaW5zdGFuY2VvZiBGdW5jdGlvbiA/CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJXaW4ucGxheWVyLm5leHQgOiBgaHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3dhdGNobGF0ZXIvIy9hdiR7bmV4dExvY2F0aW9uLmdldEF0dHJpYnV0ZSgnZGF0YS1haWQnKX1gIDogdW5kZWZpbmVkOwogICAgICAgIH0KICAgICAgICBpZiAoIW5leHRMb2NhdGlvbikgewogICAgICAgICAgICBkZXN0aW5hdGlvbiA9ICdC56uZ5o6o6I2QJzsgLy/liJfooag6CiAgICAgICAgICAgIG5leHRMb2NhdGlvbiA9IHRoaXMub3B0aW9uLmF1dG9OZXh0UmVjb21tZW5kID8gKG5leHRMb2NhdGlvbiA9IHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5iaWxpYmlsaS1wbGF5ZXItcmVjb21tZW5kIGEnKSkgPwogICAgICAgICAgICAgICAgbmV4dExvY2F0aW9uLmhyZWYgOiB1bmRlZmluZWQgOiB1bmRlZmluZWQ7CiAgICAgICAgfQogICAgICAgIGlmICghbmV4dExvY2F0aW9uKSByZXR1cm4gdGhpcy5hdXRvTmV4dERlc3RpbmF0aW9uID0gJ+ayoeacieS6hic7CgogICAgICAgIGxldCBoID0gKCkgPT4gewogICAgICAgICAgICB0aGlzLmhpbnRJbmZvKGBCaWxpUG9seWZpbGw6ICR7QmlsaVBvbHlmaWxsLnNlY29uZFRvUmVhZGFibGUodGhpcy5hdXRvTmV4dFRpbWVvdXQgLyAxMDAwKX3lkI7mkq3mlL7kuIvkuIDkuKoo5Lu75oSP54K55Ye75Y+W5raIKWApOwogICAgICAgICAgICBsZXQgdCA9IHNldFRpbWVvdXQoKCkgPT4gbmV4dExvY2F0aW9uIGluc3RhbmNlb2YgRnVuY3Rpb24gPyBuZXh0TG9jYXRpb24oKSA6IHRvcC53aW5kb3cubG9jYXRpb24uYXNzaWduKG5leHRMb2NhdGlvbiksIHRoaXMuYXV0b05leHRUaW1lb3V0KTsKICAgICAgICAgICAgbGV0IGh0ID0gKCkgPT4geyBjbGVhclRpbWVvdXQodCk7IHRoaXMucGxheWVyV2luLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaHQpOyB9CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5wbGF5ZXJXaW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBodCksIDApOwogICAgICAgICAgICB0aGlzLnZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgaCk7CiAgICAgICAgfTsKICAgICAgICB0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgaCk7CiAgICAgICAgcmV0dXJuIHRoaXMuYXV0b05leHREZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uOwogICAgfQoKICAgIGxpZnRCb3R0b21EYW5tdWt1KCkgewogICAgICAgIGlmICghdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ2N0bGJhcl9kYW5tdWt1X3ByZXZlbnQnKVswXS5jaGVja2VkKQogICAgICAgICAgICB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgnY3RsYmFyX2Rhbm11a3VfcHJldmVudCcpWzBdLmNsaWNrKCk7CiAgICB9CgogICAgbG9hZE9mZmluZVN1YnRpdGxlcygpIHsKICAgICAgICAvLyBOTy4gTk9CT0RZIFdJTEwgTkVFRCBUSElT44CCCiAgICAgICAgLy8gSGludDogaHR0cHM6Ly9naXRodWIuY29tL2phbWllZXMyL2Fzcy10by12dHQKICAgICAgICB0aHJvdyAnTm90IGltcGxlbWVudGVkJzsKICAgIH0KCiAgICBhdXRvUmVzdW1lKCkgewogICAgICAgIGxldCBoID0gKCkgPT4gewogICAgICAgICAgICBpZiAodGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JpbGliaWxpUGxheWVyIGRpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tdG9hc3QtYm90dG9tIGRpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tdG9hc3QtaXRlbScpKSB7CiAgICAgICAgICAgICAgICBsZXQgW21pbiwgc2VjXSA9IHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNiaWxpYmlsaVBsYXllciBkaXYuYmlsaWJpbGktcGxheWVyLXZpZGVvLXRvYXN0LWJvdHRvbSBkaXYuYmlsaWJpbGktcGxheWVyLXZpZGVvLXRvYXN0LWl0ZW0tdGV4dCcpLmNoaWxkcmVuWzFdLnRleHRDb250ZW50LnNwbGl0KCc6Jyk7CiAgICAgICAgICAgICAgICBsZXQgdGltZSA9IHBhcnNlSW50KG1pbikgKiA2MCArIHBhcnNlSW50KHNlYyk7CiAgICAgICAgICAgICAgICBpZiAodGltZSA8IHRoaXMudmlkZW8uZHVyYXRpb24gLSAxMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNiaWxpYmlsaVBsYXllciBkaXYuYmlsaWJpbGktcGxheWVyLXZpZGVvLXRvYXN0LWJvdHRvbSBkaXYuYmlsaWJpbGktcGxheWVyLXZpZGVvLXRvYXN0LWl0ZW0tanVtcCcpLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy52aWRlby5hdXRvcGxheSAmJiAhdGhpcy52aWRlby5wYXVzZWQpIHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNiaWxpYmlsaVBsYXllciBkaXYuYmlsaWJpbGktcGxheWVyLXZpZGVvLWJ0bicpLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmlsaWJpbGlQbGF5ZXIgZGl2LmJpbGliaWxpLXBsYXllci12aWRlby10b2FzdC1ib3R0b20gZGl2LmJpbGliaWxpLXBsYXllci12aWRlby10b2FzdC1pdGVtLWNsb3NlJykuY2xpY2soKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdGhpcy52aWRlby5hZGRFdmVudExpc3RlbmVyKCdjYW5wbGF5JywgaCk7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBoKSwgNTAwMCk7CiAgICB9CgogICAgYXV0b1BsYXkoKSB7CiAgICAgICAgdGhpcy52aWRlby5hdXRvcGxheSA9IHRydWU7CiAgICAgICAgaWYgKHRoaXMudmlkZW8ucGF1c2VkKQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNiaWxpYmlsaVBsYXllciBkaXYuYmlsaWJpbGktcGxheWVyLXZpZGVvLWJ0bicpLmNsaWNrKCksIDApOwogICAgfQoKICAgIGF1dG9GdWxsU2NyZWVuKCkgewogICAgICAgIGlmICh0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmlsaWJpbGlQbGF5ZXIgZGl2LnZpZGVvLXN0YXRlLWZ1bGxzY3JlZW4tb2ZmJykpCiAgICAgICAgICAgIHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNiaWxpYmlsaVBsYXllciBkaXYuYmlsaWJpbGktcGxheWVyLXZpZGVvLWJ0bi1mdWxsc2NyZWVuJykuY2xpY2soKTsKICAgIH0KCiAgICBnZXRDb2xsZWN0aW9uSWQoKSB7CiAgICAgICAgcmV0dXJuICh0b3AubG9jYXRpb24ucGF0aG5hbWUubWF0Y2goL2F2XGQrLykgfHwgdG9wLmxvY2F0aW9uLnBhdGhuYW1lLm1hdGNoKC9hbmltZVwvXGQrLykpWzBdOwogICAgfQoKICAgIG1hcmtPUFBvc2l0aW9uKCkgewogICAgICAgIGxldCBjb2xsZWN0aW9uSWQgPSB0aGlzLmdldENvbGxlY3Rpb25JZCgpOwogICAgICAgIGlmICghKHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdIGluc3RhbmNlb2YgQXJyYXkpKSB0aGlzLnVzZXJkYXRhLm9wZWRbY29sbGVjdGlvbklkXSA9IFtdOwogICAgICAgIHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdWzBdID0gdGhpcy52aWRlby5jdXJyZW50VGltZTsKICAgIH0KCiAgICBtYXJrRURQb3N0aW9uKCkgewogICAgICAgIGxldCBjb2xsZWN0aW9uSWQgPSB0aGlzLmdldENvbGxlY3Rpb25JZCgpOwogICAgICAgIGlmICghKHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdIGluc3RhbmNlb2YgQXJyYXkpKSB0aGlzLnVzZXJkYXRhLm9wZWRbY29sbGVjdGlvbklkXSA9IFtdOwogICAgICAgIHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdWzFdID0gKHRoaXMudmlkZW8uY3VycmVudFRpbWUpOwogICAgfQoKICAgIGNsZWFyT1BFRFBvc2l0aW9uKCkgewogICAgICAgIGxldCBjb2xsZWN0aW9uSWQgPSB0aGlzLmdldENvbGxlY3Rpb25JZCgpOwogICAgICAgIHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdID0gdW5kZWZpbmVkOwogICAgfQoKICAgIHNraXBPUEVEKCkgewogICAgICAgIGxldCBjb2xsZWN0aW9uSWQgPSB0aGlzLmdldENvbGxlY3Rpb25JZCgpOwogICAgICAgIGlmICghKHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdIGluc3RhbmNlb2YgQXJyYXkpKSByZXR1cm47CiAgICAgICAgaWYgKHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdWzBdKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvLmN1cnJlbnRUaW1lIDwgdGhpcy51c2VyZGF0YS5vcGVkW2NvbGxlY3Rpb25JZF1bMF0pIHsKICAgICAgICAgICAgICAgIHRoaXMudmlkZW8uY3VycmVudFRpbWUgPSB0aGlzLnVzZXJkYXRhLm9wZWRbY29sbGVjdGlvbklkXVswXTsKICAgICAgICAgICAgICAgIHRoaXMuaGludEluZm8oJ0JpbGlQb2x5ZmlsbDog5bey6Lez6L+H54mH5aS0Jyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdWzFdKSB7CiAgICAgICAgICAgIGxldCBlZEhhbmRsZXIgPSB2ID0+IHsKICAgICAgICAgICAgICAgIGlmICh2LnRhcmdldC5jdXJyZW50VGltZSA+IHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdWzFdKSB7CiAgICAgICAgICAgICAgICAgICAgdi50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsIGVkSGFuZGxlcik7CiAgICAgICAgICAgICAgICAgICAgdi50YXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2VuZGVkJykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsIGVkSGFuZGxlcik7CiAgICAgICAgfQogICAgfQoKICAgIHNldFZpZGVvU3BlZWQoc3BlZWQpIHsKICAgICAgICBpZiAoc3BlZWQgPCAwIHx8IHNwZWVkID4gMTApIHJldHVybjsKICAgICAgICB0aGlzLnZpZGVvLnBsYXliYWNrUmF0ZSA9IHNwZWVkOwogICAgfQoKICAgIHNwZWVjaFJlY29nbml0aW9uKCkgewogICAgICAgIGxldCByLCBnOwogICAgICAgIHRyeSB7IFtyLCBnXSA9IFtTcGVlY2hSZWNvZ25pdGlvbiwgU3BlZWNoR3JhbW1hckxpc3RdIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdHJ5IHsgW3IsIGddID0gW3dlYmtpdFNwZWVjaFJlY29nbml0aW9uLCB3ZWJraXRTcGVlY2hHcmFtbWFyTGlzdF0gfSBjYXRjaCAoZSkgeyB9CiAgICAgICAgfQogICAgICAgIGxldCBbU3BlZWNoUmVjb2duaXRpb24sIFNwZWVjaEdyYW1tYXJMaXN0XSA9IFtyLCBnXTsKICAgICAgICBhbGVydCgnWWFoYWhhISBZb3UgZm91bmQgbWUhXG5CaWxpVHdpbuaUr+aMgeeahOivremfs+WRveS7pDog5pKt5pS+IOaaguWBnCDlhajlsY8g5YWz6ZetIOWKoOmAnyDlh4/pgJ8g5LiL5LiA6ZuGXG5DaHJvbWUgbWF5IHN1cHBvcnQgQ2FudG9uZXNlIG9yIEhha2thIGFzIHdlbGwuIFNlZSBCaWxpUG9seWZpbGw6OnNwZWVjaFJlY29nbml0aW9uLicpOwogICAgICAgIGlmICghU3BlZWNoUmVjb2duaXRpb24gfHwgIVNwZWVjaEdyYW1tYXJMaXN0KSBhbGVydCgn5rWP6KeI5Zmo5aSq5pen5ZWmfuW9qeibi+ayoeazlei/kOihjH4nKTsKICAgICAgICBsZXQgcGxheWVyID0gWyfmkq3mlL4nLCAn5pqC5YGcJywgJ+WFqOWxjycsICflhbPpl60nLCAn5Yqg6YCfJywgJ+WHj+mAnycsICfkuIvkuIDpm4YnXTsKICAgICAgICBsZXQgZ3JhbW1hciA9ICcjSlNHRiBWMS4wOyBncmFtbWFyIHBsYXllcjsgcHVibGljIDxwbGF5ZXI+ID0gJyArIHBsYXllci5qb2luKCcgfCAnKSArICcgOyc7CiAgICAgICAgbGV0IHJlY29nbml0aW9uID0gbmV3IFNwZWVjaFJlY29nbml0aW9uKCk7CiAgICAgICAgbGV0IHNwZWVjaFJlY29nbml0aW9uTGlzdCA9IG5ldyBTcGVlY2hHcmFtbWFyTGlzdCgpOwogICAgICAgIHNwZWVjaFJlY29nbml0aW9uTGlzdC5hZGRGcm9tU3RyaW5nKGdyYW1tYXIsIDEpOwogICAgICAgIHJlY29nbml0aW9uLmdyYW1tYXJzID0gc3BlZWNoUmVjb2duaXRpb25MaXN0OwogICAgICAgIC8vIGNtbjogTWFuZGFyaW4oUHV0b25naHVhKSwgeXVlOiBDYW50b25lc2UsIGhhazogSGFra2EKICAgICAgICAvLyBTZWUgaHR0cHM6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvbGFuZ3VhZ2Utc3VidGFnLXJlZ2lzdHJ5L2xhbmd1YWdlLXN1YnRhZy1yZWdpc3RyeQogICAgICAgIHJlY29nbml0aW9uLmxhbmcgPSAnY21uJzsKICAgICAgICByZWNvZ25pdGlvbi5jb250aW51b3VzID0gdHJ1ZTsKICAgICAgICByZWNvZ25pdGlvbi5pbnRlcmltUmVzdWx0cyA9IGZhbHNlOwogICAgICAgIHJlY29nbml0aW9uLm1heEFsdGVybmF0aXZlcyA9IDE7CiAgICAgICAgcmVjb2duaXRpb24uc3RhcnQoKTsKICAgICAgICByZWNvZ25pdGlvbi5vbnJlc3VsdCA9IGUgPT4gewogICAgICAgICAgICBsZXQgbGFzdCA9IGUucmVzdWx0cy5sZW5ndGggLSAxOwogICAgICAgICAgICBsZXQgdHJhbnNjcmlwdCA9IGUucmVzdWx0c1tsYXN0XVswXS50cmFuc2NyaXB0OwogICAgICAgICAgICBzd2l0Y2ggKHRyYW5zY3JpcHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgJ+aSreaUvic6CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlkZW8ucGF1c2VkKSB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmlsaWJpbGlQbGF5ZXIgZGl2LmJpbGliaWxpLXBsYXllci12aWRlby1idG4nKS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaGludEluZm8oYEJpbGlQb2x5ZmlsbDog6K+t6Z+zOuaSreaUvmApOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAn5pqC5YGcJzoKICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMudmlkZW8ucGF1c2VkKSB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmlsaWJpbGlQbGF5ZXIgZGl2LmJpbGliaWxpLXBsYXllci12aWRlby1idG4nKS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaGludEluZm8oYEJpbGlQb2x5ZmlsbDog6K+t6Z+zOuaaguWBnGApOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAn5YWo5bGPJzoKICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmlsaWJpbGlQbGF5ZXIgZGl2LmJpbGliaWxpLXBsYXllci12aWRlby1idG4tZnVsbHNjcmVlbicpLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaW50SW5mbyhgQmlsaVBvbHlmaWxsOiDor63pn7M65YWo5bGPYCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICflhbPpl60nOgogICAgICAgICAgICAgICAgICAgIHRvcC53aW5kb3cuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ+WKoOmAnyc6CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRWaWRlb1NwZWVkKDIpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaGludEluZm8oYEJpbGlQb2x5ZmlsbDog6K+t6Z+zOuWKoOmAn2ApOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAn5YeP6YCfJzoKICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFZpZGVvU3BlZWQoMC41KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhpbnRJbmZvKGBCaWxpUG9seWZpbGw6IOivremfszrlh4/pgJ9gKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ+S4i+S4gOmbhic6CiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlby5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnZW5kZWQnKSk7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHRoaXMuaGludEluZm8oYEJpbGlQb2x5ZmlsbDog6K+t6Z+zOiIke3RyYW5zY3JpcHR9Iu+8n2ApOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUucmVzdWx0cyk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGB0cmFuc2NyaXB0OiR7dHJhbnNjcmlwdH0gY29uZmlkZW5jZToke2UucmVzdWx0c1swXVswXS5jb25maWRlbmNlfWApOwogICAgICAgIH07CiAgICB9CgogICAgYXN5bmMgZ2V0UGxheWVyVmlkZW8oKSB7CiAgICAgICAgaWYgKHRoaXMucGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd2aWRlbycpLmxlbmd0aCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlbyA9IHRoaXMucGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd2aWRlbycpWzBdOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChNdXRhdGlvbk9ic2VydmVyKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3ZpZGVvJykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnZpZGVvID0gdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3ZpZGVvJylbMF0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmlsaWJpbGlQbGF5ZXInKSwgeyBjaGlsZExpc3Q6IHRydWUgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgbGV0IHQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd2aWRlbycpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMudmlkZW8gPSB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndmlkZW8nKVswXSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgNjAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQoKICAgIHN0YXRpYyBwYXJzZUhyZWYoaHJlZiA9IHRvcC5sb2NhdGlvbi5ocmVmKSB7CiAgICAgICAgaWYgKGhyZWYuaW5kZXhPZignYmFuZ3VtaScpICE9IC0xKSB7CiAgICAgICAgICAgIGxldCBhbmltZSwgcGxheTsKICAgICAgICAgICAgYW5pbWUgPSAoYW5pbWUgPSAvYW5pbWVcL1xkKy8uZXhlYyhocmVmKSkgPyBhbmltZVswXS5zbGljZSg2KSA6IG51bGw7CiAgICAgICAgICAgIHBsYXkgPSAocGxheSA9IC9wbGF5I1xkKy8uZXhlYyhocmVmKSkgPyBwbGF5WzBdLnNsaWNlKDUpIDogbnVsbDsKICAgICAgICAgICAgaWYgKCFhbmltZSB8fCAhcGxheSkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIHJldHVybiBgYmFuZ3VtaS5iaWxpYmlsaS5jb20vYW5pbWUvJHthbmltZX0vcGxheSMke3BsYXl9YDsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGxldCBhaWQsIHBpZDsKICAgICAgICAgICAgYWlkID0gKGFpZCA9IC9hdlxkKy8uZXhlYyhocmVmKSkgPyBhaWRbMF0uc2xpY2UoMikgOiBudWxsOwogICAgICAgICAgICBpZiAoIWFpZCkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIHBpZCA9IChwaWQgPSAvcGFnZT1cZCsvLmV4ZWMoaHJlZikpID8gcGlkWzBdLnNsaWNlKDUpIDogKHBpZCA9IC9pbmRleF9cZCsuaHRtbC8uZXhlYyhocmVmKSkgPyBwaWRbMF0uc2xpY2UoNiwgLTUpIDogbnVsbDsKICAgICAgICAgICAgaWYgKCFwaWQpIHJldHVybiBgd3d3LmJpbGliaWxpLmNvbS92aWRlby9hdiR7YWlkfWA7CiAgICAgICAgICAgIHJldHVybiBgd3d3LmJpbGliaWxpLmNvbS92aWRlby9hdiR7YWlkfS9pbmRleF8ke3BpZH0uaHRtbGA7CiAgICAgICAgfQogICAgfQoKICAgIHN0YXRpYyBzZWNvbmRUb1JlYWRhYmxlKHMpIHsKICAgICAgICBpZiAocyA+IDYwKSByZXR1cm4gYCR7cGFyc2VJbnQocyAvIDYwKX3liIYke3BhcnNlSW50KHMgJSA2MCl956eSYDsKICAgICAgICBlbHNlIHJldHVybiBgJHtwYXJzZUludChzICUgNjApfeenkmA7CiAgICB9CgogICAgc3RhdGljIGNsZWFyQWxsVXNlcmRhdGEocGxheWVyV2luID0gdG9wKSB7CiAgICAgICAgaWYgKHBsYXllcldpbi5HTV9zZXRWYWx1ZSkgcmV0dXJuIEdNX3NldFZhbHVlKCdiaWxpUG9seWZpbGwnLCAnJyk7CiAgICAgICAgcGxheWVyV2luLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdiaWxpUG9seWZpbGwnKTsKICAgIH0KCiAgICBzdGF0aWMgX1VOSVRfVEVTVCgpIHsKICAgICAgICBjb25zb2xlLndhcm4oJ1RoaXMgdGVzdCBpcyBpbXBvc3NpYmxlLicpOwogICAgICAgIGNvbnNvbGUud2FybignWW91IG5lZWQgdG8gY2xvc2UgdGhlIHRhYiwgcmVvcGVuIGl0LCBldGMuJyk7CiAgICAgICAgY29uc29sZS53YXJuKCdNYXliZSB5b3UgYWxzbyB3YW50IHRvIHRlc3QgYmV0d2VlbiBiaWRlbyBwYXJ0cywgZXRjLicpOwogICAgICAgIGNvbnNvbGUud2FybignSSBhbSB0b28gbGF6eSB0byBmaW5kIHdvcmthcm91bmRzLicpOwogICAgfQp9CgpjbGFzcyBCaWxpVXNlckpTIHsKICAgIHN0YXRpYyBhc3luYyBnZXRJZnJhbWVXaW4oKSB7CiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNib2ZxaSA+IGlmcmFtZScpLmNvbnRlbnREb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmlsaWJpbGlQbGF5ZXInKSkgewogICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JvZnFpID4gaWZyYW1lJykuY29udGVudFdpbmRvdzsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNib2ZxaSA+IGlmcmFtZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9mcWkgPiBpZnJhbWUnKS5jb250ZW50V2luZG93KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9CgogICAgc3RhdGljIGFzeW5jIGdldFBsYXllcldpbigpIHsKICAgICAgICBpZiAobG9jYXRpb24uaG9zdCA9PSAnYmFuZ3VtaS5iaWxpYmlsaS5jb20nKSB7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9mcWkgPiBpZnJhbWUnKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIEJpbGlVc2VySlMuZ2V0SWZyYW1lV2luKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoTXV0YXRpb25PYnNlcnZlcikgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgICAgIGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNib2ZxaSA+IGlmcmFtZScpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKEJpbGlVc2VySlMuZ2V0SWZyYW1lV2luKCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNib2ZxaSA+IG9iamVjdCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAnTmVlZCBINSBQbGF5ZXInOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvZnFpJyksIHsgY2hpbGRMaXN0OiB0cnVlIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9mcWkgPiBpZnJhbWUnKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoQmlsaVVzZXJKUy5nZXRJZnJhbWVXaW4oKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JvZnFpID4gb2JqZWN0JykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAnTmVlZCBINSBQbGF5ZXInOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgNjAwKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JvZnFpID4gb2JqZWN0JykpIHsKICAgICAgICAgICAgICAgIHRocm93ICdOZWVkIEg1IFBsYXllcic7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9CgpjbGFzcyBVSSBleHRlbmRzIEJpbGlVc2VySlMgewogICAgLy8gVGl0bGUgQXBwZW5kCiAgICBzdGF0aWMgdGl0bGVBcHBlbmQobW9ua2V5KSB7CiAgICAgICAgbGV0IGggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYudmlld2JveCBkaXYuaW5mbycpOwogICAgICAgIGxldCB0bWluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYudG1pbmZvJyk7CiAgICAgICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGxldCBmbHZBID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGxldCBtcDRBID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGxldCBhc3NBID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGZsdkEudGV4dENvbnRlbnQgPSAn6LaF5riFRkxWJzsKICAgICAgICBtcDRBLnRleHRDb250ZW50ID0gJ+WOn+eUn01QNCc7CiAgICAgICAgYXNzQS50ZXh0Q29udGVudCA9ICflvLnluZVBU1MnOwoKICAgICAgICBmbHZBLm9ubW91c2VvdmVyID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICBmbHZBLnRleHRDb250ZW50ID0gJ+ato+WcqEZMVic7CiAgICAgICAgICAgIGZsdkEub25tb3VzZW92ZXIgPSBudWxsOwogICAgICAgICAgICBhd2FpdCBtb25rZXkucXVlcnlJbmZvKCdmbHYnKTsKICAgICAgICAgICAgZmx2QS50ZXh0Q29udGVudCA9ICfotoXmuIVGTFYnOwogICAgICAgICAgICBsZXQgZmx2RGl2ID0gVUkuZ2VuRkxWRGl2KG1vbmtleSk7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZmx2RGl2KTsKICAgICAgICAgICAgZmx2QS5vbmNsaWNrID0gKCkgPT4gZmx2RGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIH07CiAgICAgICAgbXA0QS5vbm1vdXNlb3ZlciA9IGFzeW5jICgpID0+IHsKICAgICAgICAgICAgbXA0QS50ZXh0Q29udGVudCA9ICfmraPlnKhNUDQnOwogICAgICAgICAgICBtcDRBLm9ubW91c2VvdmVyID0gbnVsbDsKICAgICAgICAgICAgbXA0QS5ocmVmID0gYXdhaXQgbW9ua2V5LnF1ZXJ5SW5mbygnbXA0Jyk7CiAgICAgICAgICAgIC8vbXA0QS50YXJnZXQgPSAnX2JsYW5rJzsgLy8gWW91IGtub3cgcG9wIHVwIGJsb2NrZXI/IDopCiAgICAgICAgICAgIG1wNEEudGV4dENvbnRlbnQgPSAn5Y6f55SfTVA0JzsKICAgICAgICAgICAgbXA0QS5kb3dubG9hZCA9ICcnOwogICAgICAgIH07CiAgICAgICAgYXNzQS5vbm1vdXNlb3ZlciA9IGFzeW5jICgpID0+IHsKICAgICAgICAgICAgYXNzQS50ZXh0Q29udGVudCA9ICfmraPlnKhBU1MnOwogICAgICAgICAgICBhc3NBLm9ubW91c2VvdmVyID0gbnVsbDsKICAgICAgICAgICAgYXNzQS5ocmVmID0gYXdhaXQgbW9ua2V5LnF1ZXJ5SW5mbygnYXNzJyk7CiAgICAgICAgICAgIGFzc0EudGV4dENvbnRlbnQgPSAn5by55bmVQVNTJzsKICAgICAgICAgICAgaWYgKG1vbmtleS5tcDQgJiYgbW9ua2V5Lm1wNC5tYXRjaCkgYXNzQS5kb3dubG9hZCA9IG1vbmtleS5tcDQubWF0Y2goL1xkKFxkfC18aGQpKig/PVwubXA0KS8pWzBdICsgJy5hc3MnOwogICAgICAgICAgICBlbHNlIGFzc0EuZG93bmxvYWQgPSBtb25rZXkuY2lkICsgJy5hc3MnOwogICAgICAgIH07CgogICAgICAgIGZsdkEuc3R5bGUuZm9udFNpemUgPSBtcDRBLnN0eWxlLmZvbnRTaXplID0gYXNzQS5zdHlsZS5mb250U2l6ZSA9ICcxNnB4JzsKICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZmx2QSk7CiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgJykpOwogICAgICAgIGRpdi5hcHBlbmRDaGlsZChtcDRBKTsKICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJyAnKSk7CiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGFzc0EpOwogICAgICAgIGRpdi5jbGFzc05hbWUgPSAnaW5mbyBiaWxpdHdpbic7CiAgICAgICAgZGl2LnN0eWxlLnpJbmRleCA9ICcxJzsKICAgICAgICBkaXYuc3R5bGUud2lkdGggPSAnMzIlJzsKICAgICAgICB0bWluZm8uc3R5bGUuZmxvYXQgPSAnbGVmdCc7CiAgICAgICAgdG1pbmZvLnN0eWxlLndpZHRoID0gJzY4JSc7CiAgICAgICAgaC5pbnNlcnRCZWZvcmUoZGl2LCB0bWluZm8pOwogICAgICAgIHJldHVybiB7IGZsdkEsIG1wNEEsIGFzc0EgfTsKICAgIH0KCiAgICBzdGF0aWMgZ2VuRkxWRGl2KG1vbmtleSwgZmx2cyA9IG1vbmtleS5mbHZzLCBjYWNoZSA9IG1vbmtleS5jYWNoZSkgewogICAgICAgIGxldCBkaXYgPSBVSS5nZW5EaXYoKTsKCiAgICAgICAgbGV0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTsKICAgICAgICB0YWJsZS5zdHlsZS53aWR0aCA9ICcxMDAlJzsKICAgICAgICB0YWJsZS5zdHlsZS5saW5lSGVpZ2h0ID0gJzJlbSc7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbHZzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGxldCB0ciA9IHRhYmxlLmluc2VydFJvdygtMSk7CiAgICAgICAgICAgIHRyLmluc2VydENlbGwoMCkuaW5uZXJIVE1MID0gYDxhIGhyZWY9IiR7Zmx2c1tpXX0iPkZMVuWIhuautSAke2kgKyAxfTwvYT5gOwogICAgICAgICAgICB0ci5pbnNlcnRDZWxsKDEpLmlubmVySFRNTCA9ICc8YT7nvJPlrZjmnKzmrrU8L2E+JzsKICAgICAgICAgICAgdHIuaW5zZXJ0Q2VsbCgyKS5pbm5lckhUTUwgPSAnPHByb2dyZXNzIHZhbHVlPSIwIiBtYXg9IjEwMCI+6L+b5bqm5p2hPC9wcm9ncmVzcz4nOwogICAgICAgICAgICB0ci5jaGlsZHJlblsxXS5jaGlsZHJlblswXS5vbmNsaWNrID0gKCkgPT4gewogICAgICAgICAgICAgICAgVUkuZG93bmxvYWRGTFYodHIuY2hpbGRyZW5bMV0uY2hpbGRyZW5bMF0sIG1vbmtleSwgaSwgdHIuY2hpbGRyZW5bMl0uY2hpbGRyZW5bMF0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGxldCB0ciA9IHRhYmxlLmluc2VydFJvdygtMSk7CiAgICAgICAgdHIuaW5zZXJ0Q2VsbCgwKS5pbm5lckhUTUwgPSBgPHNwYW4+5aSN5Yi26ZO+5o6l5Zyw5Z2A5peg5pWIPC9zcGFuPmA7CiAgICAgICAgdHIuaW5zZXJ0Q2VsbCgxKS5pbm5lckhUTUwgPSAnPGE+57yT5a2Y5YWo6YOoK+iHquWKqOWQiOW5tjwvYT4nOwogICAgICAgIHRyLmluc2VydENlbGwoMikuaW5uZXJIVE1MID0gYDxwcm9ncmVzcyB2YWx1ZT0iMCIgbWF4PSIke2ZsdnMubGVuZ3RoICsgMX0iPui/m+W6puadoTwvcHJvZ3Jlc3M+YDsKICAgICAgICB0ci5jaGlsZHJlblsxXS5jaGlsZHJlblswXS5vbmNsaWNrID0gKCkgPT4gewogICAgICAgICAgICBVSS5kb3dubG9hZEFsbEZMVnModHIuY2hpbGRyZW5bMV0uY2hpbGRyZW5bMF0sIG1vbmtleSwgdGFibGUpOwogICAgICAgIH0KICAgICAgICB0YWJsZS5pbnNlcnRSb3coLTEpLmlubmVySFRNTCA9ICc8dGQgY29sc3Bhbj0iMyI+5ZCI5bm25Yqf6IO95o6o6I2Q6YWN572u77ya6Iez5bCROEcgUkFN44CC5oqK6Ieq5bex5LiL6L2955qE5YiG5q61RkxW5ouW5Yqo5Yiw6L+Z6YeM77yM5Lmf5Y+v5Lul5ZCI5bm25ZOmfjwvdGQ+JzsKICAgICAgICB0YWJsZS5pbnNlcnRSb3coLTEpLmlubmVySFRNTCA9IGNhY2hlID8gJzx0ZCBjb2xzcGFuPSIzIj7kuIvovb3nmoTnvJPlrZjliIbmrrXkvJrmmoLml7blgZznlZnlnKjnlLXohJHph4zvvIzov4fkuIDmrrXml7bpl7TkvJroh6rliqjmtojlpLHjgILlu7rorq7lj6rlvIDkuIDkuKrmoIfnrb7pobXjgII8L3RkPicgOiAnPHRkIGNvbHNwYW49IjMiPuW7uuiuruWPquW8gOS4gOS4quagh+etvumhteOAguWFs+aOieagh+etvumhteWQju+8jOe8k+WtmOWwseS8muiiq+a4heeQhuOAguWIq+W/mOS6huWPpuWtmOS4uu+8gTwvdGQ+JzsKICAgICAgICBVSS5kaXNwbGF5UXVvdGEodGFibGUuaW5zZXJ0Um93KC0xKSk7CiAgICAgICAgZGl2LmFwcGVuZENoaWxkKHRhYmxlKTsKCiAgICAgICAgZGl2Lm9uZHJhZ2VudGVyID0gZGl2Lm9uZHJhZ292ZXIgPSBlID0+IFVJLmFsbG93RHJhZyhlKTsKICAgICAgICBkaXYub25kcm9wID0gYXN5bmMgZSA9PiB7CiAgICAgICAgICAgIFVJLmFsbG93RHJhZyhlKTsKICAgICAgICAgICAgbGV0IGZpbGVzID0gQXJyYXkuZnJvbShlLmRhdGFUcmFuc2Zlci5maWxlcyk7CiAgICAgICAgICAgIGlmIChmaWxlcy5ldmVyeShlID0+IGUubmFtZS5zZWFyY2goL1xkKy1cZCsuZmx2LykgIT0gLTEpKSB7CiAgICAgICAgICAgICAgICBmaWxlcy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubWF0Y2goL1xkKy0oXGQrKS5mbHYvKVsxXSAtIGIubmFtZS5tYXRjaCgvXGQrLShcZCspLmZsdi8pWzFdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7CiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnRSb3coLTEpLmlubmVySFRNTCA9IGA8dGQgY29sc3Bhbj0iMyI+JHtmaWxlLm5hbWV9PC90ZD5gOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBvdXRwdXROYW1lID0gZmlsZXNbMF0ubmFtZS5tYXRjaCgvXGQrLVxkLmZsdi8pOwogICAgICAgICAgICBpZiAob3V0cHV0TmFtZSkgb3V0cHV0TmFtZSA9IG91dHB1dE5hbWVbMF0ucmVwbGFjZSgvLVxkLywgIiIpOwogICAgICAgICAgICBlbHNlIG91dHB1dE5hbWUgPSAnbWVyZ2VfJyArIGZpbGVzWzBdLm5hbWU7CiAgICAgICAgICAgIGxldCB1cmwgPSBhd2FpdCBVSS5tZXJnZUZMVkZpbGVzKGZpbGVzKTsKICAgICAgICAgICAgdGFibGUuaW5zZXJ0Um93KC0xKS5pbm5lckhUTUwgPSBgPHRkIGNvbHNwYW49IjMiPjxhIGhyZWY9IiR7dXJsfSIgZG93bmxvYWQ9IiR7b3V0cHV0TmFtZX0iPiR7b3V0cHV0TmFtZX08L2E+PC90ZD5gOwogICAgICAgIH0KCiAgICAgICAgbGV0IGJ1dHRvbnMgPSBbXTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykgYnV0dG9ucy5wdXNoKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpKTsKICAgICAgICBidXR0b25zLmZvckVhY2goYnRuID0+IGJ0bi5zdHlsZS5wYWRkaW5nID0gJzAuNWVtJyk7CiAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ0biA9PiBidG4uc3R5bGUubWFyZ2luID0gJzAuMmVtJyk7CiAgICAgICAgYnV0dG9uc1swXS50ZXh0Q29udGVudCA9ICflhbPpl60nOwogICAgICAgIGJ1dHRvbnNbMF0ub25jbGljayA9ICgpID0+IHsKICAgICAgICAgICAgZGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgfQogICAgICAgIGJ1dHRvbnNbMV0udGV4dENvbnRlbnQgPSAn5riF56m66L+Z5Liq6KeG6aKR55qE57yT5a2YJzsKICAgICAgICBidXR0b25zWzFdLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgICAgIG1vbmtleS5jbGVhbkFsbEZMVnNJbkNhY2hlKCk7CiAgICAgICAgfQogICAgICAgIGJ1dHRvbnNbMl0udGV4dENvbnRlbnQgPSAn5riF56m65omA5pyJ6KeG6aKR55qE57yT5a2YJzsKICAgICAgICBidXR0b25zWzJdLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgICAgIFVJLmNsZWFyQ2FjaGVEQihjYWNoZSk7CiAgICAgICAgfQogICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidG4gPT4gZGl2LmFwcGVuZENoaWxkKGJ0bikpOwoKICAgICAgICByZXR1cm4gZGl2OwogICAgfQoKICAgIHN0YXRpYyBhc3luYyBkb3dubG9hZEFsbEZMVnMoYSwgbW9ua2V5LCB0YWJsZSkgewogICAgICAgIGlmICh0YWJsZS5yb3dzWzBdLmNlbGxzLmxlbmd0aCA8IDMpIHJldHVybjsKICAgICAgICBtb25rZXkuaGFuZ1BsYXllcigpOwogICAgICAgIHRhYmxlLmluc2VydFJvdygtMSkuaW5uZXJIVE1MID0gJzx0ZCBjb2xzcGFuPSIzIj7lt7LlsY/olL3nvZHpobXmkq3mlL7lmajnmoTnvZHnu5zpk77mjqXjgILliIfmjaLmuIXmmbDluqblj6/ph43mlrDmv4DmtLvmkq3mlL7lmajjgII8L3RkPic7CgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW9ua2V5LmZsdnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHRhYmxlLnJvd3NbaV0uY2VsbHNbMV0uY2hpbGRyZW5bMF0udGV4dENvbnRlbnQgPT0gJ+e8k+WtmOacrOautScpCiAgICAgICAgICAgICAgICB0YWJsZS5yb3dzW2ldLmNlbGxzWzFdLmNoaWxkcmVuWzBdLmNsaWNrKCk7CiAgICAgICAgfQoKICAgICAgICBsZXQgYmFyID0gYS5wYXJlbnROb2RlLm5leHRTaWJsaW5nLmNoaWxkcmVuWzBdOwogICAgICAgIGJhci5tYXggPSBtb25rZXkuZmx2cy5sZW5ndGggKyAxOwogICAgICAgIGJhci52YWx1ZSA9IDA7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtb25rZXkuZmx2cy5sZW5ndGg7IGkrKykgbW9ua2V5LmdldEZMVihpKS50aGVuKGUgPT4gYmFyLnZhbHVlKyspOwoKICAgICAgICBsZXQgYmxvYnM7CiAgICAgICAgYmxvYnMgPSBhd2FpdCBtb25rZXkuZ2V0QWxsRkxWcygpOwogICAgICAgIGxldCBtZXJnZWRGTFYgPSBhd2FpdCBGTFYubWVyZ2VCbG9icyhibG9icyk7CiAgICAgICAgbGV0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwobWVyZ2VkRkxWKTsKICAgICAgICBsZXQgb3V0cHV0TmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3YtdGl0bGUnKVswXS50ZXh0Q29udGVudDsKCiAgICAgICAgYmFyLnZhbHVlKys7CiAgICAgICAgdGFibGUuaW5zZXJ0Um93KDApLmlubmVySFRNTCA9IGAKICAgICAgICA8dGQgY29sc3Bhbj0iMyIgc3R5bGU9ImJvcmRlcjogMXB4IHNvbGlkIGJsYWNrIj4KICAgICAgICAgICAgPGEgaHJlZj0iJHt1cmx9IiBkb3dubG9hZD0iJHtvdXRwdXROYW1lfS5mbHYiPuS/neWtmOWQiOW5tuWQjkZMVjwvYT4gCiAgICAgICAgICAgIDxhIGhyZWY9IiR7YXdhaXQgbW9ua2V5LmFzc30iIGRvd25sb2FkPSIke291dHB1dE5hbWV9LmFzcyI+5by55bmVQVNTPC9hPiAKICAgICAgICAgICAg6K6w5b6X5riF55CG5YiG5q6157yT5a2Y5ZOmfgogICAgICAgIDwvdGQ+CiAgICAgICAgYDsKICAgICAgICByZXR1cm4gdXJsOwogICAgfQoKICAgIHN0YXRpYyBhc3luYyBkb3dubG9hZEZMVihhLCBtb25rZXksIGluZGV4LCBiYXIgPSB7fSkgewogICAgICAgIGxldCBoYW5kbGVyID0gZSA9PiBVSS5iZWZvcmVVbmxvYWRIYW5kbGVyKGUpOwogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCBoYW5kbGVyKTsKCiAgICAgICAgYS50ZXh0Q29udGVudCA9ICflj5bmtognOwogICAgICAgIGEub25jbGljayA9ICgpID0+IHsKICAgICAgICAgICAgYS5vbmNsaWNrID0gbnVsbDsKICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGhhbmRsZXIpOwogICAgICAgICAgICBhLnRleHRDb250ZW50ID0gJ+W3suWPlua2iCc7CiAgICAgICAgICAgIG1vbmtleS5hYm9ydEZMVihpbmRleCk7CiAgICAgICAgfTsKCiAgICAgICAgbGV0IHVybDsKICAgICAgICB0cnkgewogICAgICAgICAgICB1cmwgPSBhd2FpdCBtb25rZXkuZ2V0RkxWKGluZGV4LCAobG9hZGVkLCB0b3RhbCkgPT4gewogICAgICAgICAgICAgICAgYmFyLnZhbHVlID0gbG9hZGVkOwogICAgICAgICAgICAgICAgYmFyLm1heCA9IHRvdGFsOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTCh1cmwpOwogICAgICAgICAgICBpZiAoYmFyLnZhbHVlID09IDApIGJhci52YWx1ZSA9IGJhci5tYXggPSAxOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgYS5vbmNsaWNrID0gbnVsbDsKICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGhhbmRsZXIpOwogICAgICAgICAgICBhLnRleHRDb250ZW50ID0gJ+mUmeivryc7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQoKICAgICAgICBhLm9uY2xpY2sgPSBudWxsOwogICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCBoYW5kbGVyKTsKICAgICAgICBhLnRleHRDb250ZW50ID0gJ+WPpuWtmOS4uic7CiAgICAgICAgYS5kb3dubG9hZCA9IG1vbmtleS5mbHZzW2luZGV4XS5tYXRjaCgvXGQrLVxkKy5mbHYvKVswXTsKICAgICAgICBhLmhyZWYgPSB1cmw7CiAgICAgICAgcmV0dXJuIHVybDsKICAgIH0KCiAgICBzdGF0aWMgYXN5bmMgbWVyZ2VGTFZGaWxlcyhmaWxlcykgewogICAgICAgIGxldCBtZXJnZWQgPSBhd2FpdCBGTFYubWVyZ2VCbG9icyhmaWxlcykKICAgICAgICByZXR1cm4gVVJMLmNyZWF0ZU9iamVjdFVSTChtZXJnZWQpOwogICAgfQoKICAgIHN0YXRpYyBhc3luYyBjbGVhckNhY2hlREIoY2FjaGUpIHsKICAgICAgICBpZiAoY2FjaGUpIHJldHVybiBjYWNoZS5kZWxldGVFbnRpcmVEQigpOwogICAgfQoKICAgIHN0YXRpYyBhc3luYyBkaXNwbGF5UXVvdGEodHIpIHsKICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgIGxldCB0ZW1wb3JhcnlTdG9yYWdlID0gd2luZG93Lm5hdmlnYXRvci50ZW1wb3JhcnlTdG9yYWdlCiAgICAgICAgICAgICAgICB8fCB3aW5kb3cubmF2aWdhdG9yLndlYmtpdFRlbXBvcmFyeVN0b3JhZ2UKICAgICAgICAgICAgICAgIHx8IHdpbmRvdy5uYXZpZ2F0b3IubW96VGVtcG9yYXJ5U3RvcmFnZQogICAgICAgICAgICAgICAgfHwgd2luZG93Lm5hdmlnYXRvci5tc1RlbXBvcmFyeVN0b3JhZ2U7CiAgICAgICAgICAgIGlmICghdGVtcG9yYXJ5U3RvcmFnZSkgcmV0dXJuIHJlc29sdmUodHIuaW5uZXJIVE1MID0gYDx0ZCBjb2xzcGFuPSIzIj7ov5nkuKrmtY/op4jlmajkuI3mlK/mjIHnvJPlrZjlkaJ+5YWz5o6J5qCH562+6aG15ZCO77yM57yT5a2Y6ams5LiK5bCx5Lya5raI5aSx5ZOmPC90ZD5gKTsKICAgICAgICAgICAgdGVtcG9yYXJ5U3RvcmFnZS5xdWVyeVVzYWdlQW5kUXVvdGEoKHVzYWdlLCBxdW90YSkgPT4KICAgICAgICAgICAgICAgIHJlc29sdmUodHIuaW5uZXJIVE1MID0gYDx0ZCBjb2xzcGFuPSIzIj7nvJPlrZjlt7LnlKjnqbrpl7TvvJoke01hdGgucm91bmQodXNhZ2UgLyAxMDQ4NTc2KX1NQiAvICR7TWF0aC5yb3VuZChxdW90YSAvIDEwNDg1NzYpfU1CIOS5n+WMheaLrOS6hkLnq5nmnKzmnaXnmoTnvJPlrZg8L3RkPmApCiAgICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9CgogICAgLy8gTWVudSBBcHBlbmQKICAgIHN0YXRpYyBtZW51QXBwZW5kKHBsYXllcldpbiwgeyBtb25rZXksIG1vbmtleVRpdGxlLCBwb2x5ZmlsbCwgZGlzcGxheVBvbHlmaWxsRGF0YURpdiwgb3B0aW9uRGl2IH0pIHsKICAgICAgICBsZXQgbW9ua2V5TWVudSA9IFVJLmdlbk1vbmtleU1lbnUocGxheWVyV2luLCB7IG1vbmtleSwgbW9ua2V5VGl0bGUsIG9wdGlvbkRpdiB9KTsKICAgICAgICBsZXQgcG9seWZpbGxNZW51ID0gVUkuZ2VuUG9seWZpbGxNZW51KHBsYXllcldpbiwgeyBwb2x5ZmlsbCwgZGlzcGxheVBvbHlmaWxsRGF0YURpdiwgb3B0aW9uRGl2IH0pOwogICAgICAgIGxldCB1bCA9IHBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiaWxpYmlsaS1wbGF5ZXItY29udGV4dC1tZW51LWNvbnRhaW5lciBibGFjaycpWzBdLmNoaWxkcmVuWzBdOwogICAgICAgIHVsLmFwcGVuZENoaWxkKG1vbmtleU1lbnUpOwogICAgICAgIHVsLmFwcGVuZENoaWxkKHBvbHlmaWxsTWVudSk7CgogICAgICAgIGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHJlY29yZCA9PiB7CiAgICAgICAgICAgIGlmICh1bC5jaGlsZHJlbi5sZW5ndGggPiAyICYmIHVsLmNoaWxkcmVuW3VsLmNoaWxkcmVuLmxlbmd0aCAtIDJdID09IG1vbmtleU1lbnUgJiYgdWwuY2hpbGRyZW5bdWwuY2hpbGRyZW4ubGVuZ3RoIC0gMV0gPT0gcG9seWZpbGxNZW51KSB7CiAgICAgICAgICAgICAgICB1bC5pbnNlcnRCZWZvcmUocG9seWZpbGxNZW51LCB1bC5maXJzdENoaWxkKTsKICAgICAgICAgICAgICAgIHVsLmluc2VydEJlZm9yZShtb25rZXlNZW51LCB1bC5maXJzdENoaWxkKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodWwuY2hpbGRyZW4ubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIG9ic2VydmVyLm9ic2VydmUocGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JpbGliaWxpLXBsYXllci1jb250ZXh0LW1lbnUtY29udGFpbmVyIGJsYWNrJylbMF0sIHsgYXR0cmlidXRlczogdHJ1ZSB9KTsKICAgIH0KCiAgICBzdGF0aWMgZ2VuTW9ua2V5TWVudShwbGF5ZXJXaW4sIHsgbW9ua2V5LCBtb25rZXlUaXRsZSwgb3B0aW9uRGl2IH0pIHsKICAgICAgICBsZXQgbGkgPSBwbGF5ZXJXaW4uZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBsaS5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LW1lbnUgYmlsaXR3aW4nOwogICAgICAgIGxpLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgPGEgY2xhc3M9ImNvbnRleHQtbWVudS1hIj4KICAgICAgICAgICAgICAgIEJpbGlNb25rZXkKICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJicHVpLWljb24gYnB1aS1pY29uLWFycm93LWRvd24iIHN0eWxlPSJ0cmFuc2Zvcm06cm90YXRlKC05MGRlZyk7bWFyZ2luLXRvcDozcHg7Ij48L3NwYW4+CiAgICAgICAgICAgIDwvYT4KICAgICAgICAgICAgPHVsPgogICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJjb250ZXh0LW1lbnUtZnVuY3Rpb24iPgogICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJjb250ZXh0LW1lbnUtYSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ2aWRlby1jb250ZXh0bWVudS1pY29uIj48L3NwYW4+IOS4i+i9vUZMVgogICAgICAgICAgICAgICAgICAgIDwvYT4KICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICA8bGkgY2xhc3M9ImNvbnRleHQtbWVudS1mdW5jdGlvbiI+CiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9ImNvbnRleHQtbWVudS1hIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InZpZGVvLWNvbnRleHRtZW51LWljb24iPjwvc3Bhbj4g5LiL6L29TVA0CiAgICAgICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0iY29udGV4dC1tZW51LWZ1bmN0aW9uIj4KICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz0iY29udGV4dC1tZW51LWEiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idmlkZW8tY29udGV4dG1lbnUtaWNvbiI+PC9zcGFuPiDkuIvovb1BU1MKICAgICAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJjb250ZXh0LW1lbnUtZnVuY3Rpb24iPgogICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJjb250ZXh0LW1lbnUtYSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ2aWRlby1jb250ZXh0bWVudS1pY29uIj48L3NwYW4+IOiuvue9ri/luK7liqkv5YWz5LqOCiAgICAgICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0iY29udGV4dC1tZW51LWZ1bmN0aW9uIj4KICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz0iY29udGV4dC1tZW51LWEiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idmlkZW8tY29udGV4dG1lbnUtaWNvbiI+PC9zcGFuPiAo5rWLKei9veWFpee8k+WtmEZMVgogICAgICAgICAgICAgICAgICAgIDwvYT4KICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICA8bGkgY2xhc3M9ImNvbnRleHQtbWVudS1mdW5jdGlvbiI+CiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9ImNvbnRleHQtbWVudS1hIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InZpZGVvLWNvbnRleHRtZW51LWljb24iPjwvc3Bhbj4gKOa1iynlvLrliLbliLfmlrAKICAgICAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJjb250ZXh0LW1lbnUtZnVuY3Rpb24iPgogICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJjb250ZXh0LW1lbnUtYSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ2aWRlby1jb250ZXh0bWVudS1pY29uIj48L3NwYW4+ICjmtYsp6YeN5ZCv6ISa5pysCiAgICAgICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0iY29udGV4dC1tZW51LWZ1bmN0aW9uIj4KICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz0iY29udGV4dC1tZW51LWEiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idmlkZW8tY29udGV4dG1lbnUtaWNvbiI+PC9zcGFuPiAo5rWLKemUgOavgeaSreaUvuWZqAogICAgICAgICAgICAgICAgICAgIDwvYT4KICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgIGA7CiAgICAgICAgbGkub25jbGljayA9ICgpID0+IHBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiaWxpYmlsaS1wbGF5ZXItd2F0Y2hpbmctbnVtYmVyJylbMF0uY2xpY2soKTsKICAgICAgICBsZXQgdWwgPSBsaS5jaGlsZHJlblsxXTsKICAgICAgICB1bC5jaGlsZHJlblswXS5vbmNsaWNrID0gYXN5bmMgKCkgPT4geyBpZiAobW9ua2V5VGl0bGUuZmx2QS5vbm1vdXNlb3ZlcikgYXdhaXQgbW9ua2V5VGl0bGUuZmx2QS5vbm1vdXNlb3ZlcigpOyBtb25rZXlUaXRsZS5mbHZBLmNsaWNrKCk7IH07CiAgICAgICAgdWwuY2hpbGRyZW5bMV0ub25jbGljayA9IGFzeW5jICgpID0+IHsgaWYgKG1vbmtleVRpdGxlLm1wNEEub25tb3VzZW92ZXIpIGF3YWl0IG1vbmtleVRpdGxlLm1wNEEub25tb3VzZW92ZXIoKTsgbW9ua2V5VGl0bGUubXA0QS5jbGljaygpOyB9OwogICAgICAgIHVsLmNoaWxkcmVuWzJdLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7IGlmIChtb25rZXlUaXRsZS5hc3NBLm9ubW91c2VvdmVyKSBhd2FpdCBtb25rZXlUaXRsZS5hc3NBLm9ubW91c2VvdmVyKCk7IG1vbmtleVRpdGxlLmFzc0EuY2xpY2soKTsgfTsKICAgICAgICB1bC5jaGlsZHJlblszXS5vbmNsaWNrID0gKCkgPT4geyBvcHRpb25EaXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IH07CiAgICAgICAgdWwuY2hpbGRyZW5bNF0ub25jbGljayA9IGFzeW5jICgpID0+IHsKICAgICAgICAgICAgbW9ua2V5LnByb3h5ID0gdHJ1ZTsKICAgICAgICAgICAgbW9ua2V5LmZsdnMgPSBudWxsOwogICAgICAgICAgICBVSS5oaW50SW5mbygn6K+356iN5YCZ77yM5Y+v6IO96ZyA6KaBMTDnp5Lml7bpl7TigKbigKYnLCBwbGF5ZXJXaW4pOwogICAgICAgICAgICAvLyBZZXMsIEkgQU0gbGF6eS4KICAgICAgICAgICAgcGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLXF1YWxpdHkgPiBkaXYgPiB1bCA+IGxpOm50aC1jaGlsZCgxKScpLmNsaWNrKCk7CiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gcGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd2aWRlbycpWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2VtcHRpZWQnLCByKSk7CiAgICAgICAgICAgIHJldHVybiBtb25rZXkucXVlcnlJbmZvKCdmbHYnKTsKICAgICAgICB9OwogICAgICAgIHVsLmNoaWxkcmVuWzVdLm9uY2xpY2sgPSAoKSA9PiB7IHRvcC5sb2NhdGlvbi5yZWxvYWQodHJ1ZSk7IH07CiAgICAgICAgdWwuY2hpbGRyZW5bNl0ub25jbGljayA9ICgpID0+IHsgc2V0VGltZW91dChVSS5yZUluaXQsIDApOyB9OwogICAgICAgIHVsLmNoaWxkcmVuWzddLm9uY2xpY2sgPSAoKSA9PiB7IHBsYXllcldpbi5wbGF5ZXIgPyBwbGF5ZXJXaW4ucGxheWVyLmRlc3Ryb3koKSA6IHVuZGVmaW5lZDsgfTsKICAgICAgICByZXR1cm4gbGk7CiAgICB9CgogICAgc3RhdGljIGdlblBvbHlmaWxsTWVudShwbGF5ZXJXaW4sIHsgcG9seWZpbGwsIGRpc3BsYXlQb2x5ZmlsbERhdGFEaXYsIG9wdGlvbkRpdiB9KSB7CiAgICAgICAgbGV0IGxpID0gcGxheWVyV2luLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgbGkuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1tZW51IGJpbGl0d2luJzsKICAgICAgICBsaS5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgIDxhIGNsYXNzPSJjb250ZXh0LW1lbnUtYSI+CiAgICAgICAgICAgICAgICBCaWxpUG9seWZpbGwKICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJicHVpLWljb24gYnB1aS1pY29uLWFycm93LWRvd24iIHN0eWxlPSJ0cmFuc2Zvcm06cm90YXRlKC05MGRlZyk7bWFyZ2luLXRvcDozcHg7Ij48L3NwYW4+CiAgICAgICAgICAgIDwvYT4KICAgICAgICAgICAgPHVsPgogICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJjb250ZXh0LW1lbnUtZnVuY3Rpb24iPgogICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJjb250ZXh0LW1lbnUtYSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ2aWRlby1jb250ZXh0bWVudS1pY29uIj48L3NwYW4+IOWIh+eJhzo8c3Bhbj48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0iY29udGV4dC1tZW51LWZ1bmN0aW9uIj4KICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz0iY29udGV4dC1tZW51LWEiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idmlkZW8tY29udGV4dG1lbnUtaWNvbiI+PC9zcGFuPiDojrflj5blsIHpnaIKICAgICAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJjb250ZXh0LW1lbnUtbWVudSI+CiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9ImNvbnRleHQtbWVudS1hIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InZpZGVvLWNvbnRleHRtZW51LWljb24iPjwvc3Bhbj4g5pu05aSa5pKt5pS+6YCf5bqmCiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJicHVpLWljb24gYnB1aS1pY29uLWFycm93LWRvd24iIHN0eWxlPSJ0cmFuc2Zvcm06cm90YXRlKC05MGRlZyk7bWFyZ2luLXRvcDozcHg7Ij48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICAgICAgICAgIDx1bD4KICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJjb250ZXh0LW1lbnUtZnVuY3Rpb24iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9ImNvbnRleHQtbWVudS1hIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idmlkZW8tY29udGV4dG1lbnUtaWNvbiI+PC9zcGFuPiAwLjEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT4KICAgICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJjb250ZXh0LW1lbnUtZnVuY3Rpb24iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9ImNvbnRleHQtbWVudS1hIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idmlkZW8tY29udGV4dG1lbnUtaWNvbiI+PC9zcGFuPiAzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0iY29udGV4dC1tZW51LWZ1bmN0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJjb250ZXh0LW1lbnUtYSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InZpZGVvLWNvbnRleHRtZW51LWljb24iPjwvc3Bhbj4g54K55Ye756Gu6K6kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIHN0eWxlPSJ3aWR0aDogMzVweDsgaGVpZ2h0OiA3MCUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJjb250ZXh0LW1lbnUtbWVudSI+CiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9ImNvbnRleHQtbWVudS1hIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InZpZGVvLWNvbnRleHRtZW51LWljb24iPjwvc3Bhbj4g54mH5aS054mH5bC+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJicHVpLWljb24gYnB1aS1pY29uLWFycm93LWRvd24iIHN0eWxlPSJ0cmFuc2Zvcm06cm90YXRlKC05MGRlZyk7bWFyZ2luLXRvcDozcHg7Ij48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICAgICAgICAgIDx1bD4KICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJjb250ZXh0LW1lbnUtZnVuY3Rpb24iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9ImNvbnRleHQtbWVudS1hIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idmlkZW8tY29udGV4dG1lbnUtaWNvbiI+PC9zcGFuPiDmoIforrDniYflpLQ6PHNwYW4+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9ImNvbnRleHQtbWVudS1mdW5jdGlvbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz0iY29udGV4dC1tZW51LWEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ2aWRlby1jb250ZXh0bWVudS1pY29uIj48L3NwYW4+IOagh+iusOeJh+Wwvjo8c3Bhbj48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0iY29udGV4dC1tZW51LWZ1bmN0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJjb250ZXh0LW1lbnUtYSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InZpZGVvLWNvbnRleHRtZW51LWljb24iPjwvc3Bhbj4g5Y+W5raI5qCH6K6wCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0iY29udGV4dC1tZW51LWZ1bmN0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJjb250ZXh0LW1lbnUtYSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InZpZGVvLWNvbnRleHRtZW51LWljb24iPjwvc3Bhbj4g5qOA6KeG5pWw5o2uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICA8bGkgY2xhc3M9ImNvbnRleHQtbWVudS1tZW51Ij4KICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz0iY29udGV4dC1tZW51LWEiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idmlkZW8tY29udGV4dG1lbnUtaWNvbiI+PC9zcGFuPiDmib7kuIrkuIvpm4YKICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImJwdWktaWNvbiBicHVpLWljb24tYXJyb3ctZG93biIgc3R5bGU9InRyYW5zZm9ybTpyb3RhdGUoLTkwZGVnKTttYXJnaW4tdG9wOjNweDsiPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgICAgICAgICAgPHVsPgogICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9ImNvbnRleHQtbWVudS1mdW5jdGlvbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz0iY29udGV4dC1tZW51LWEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ2aWRlby1jb250ZXh0bWVudS1pY29uIj48L3NwYW4+IDxzcGFuPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT4KICAgICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJjb250ZXh0LW1lbnUtZnVuY3Rpb24iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9ImNvbnRleHQtbWVudS1hIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idmlkZW8tY29udGV4dG1lbnUtaWNvbiI+PC9zcGFuPiA8c3Bhbj48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICA8bGkgY2xhc3M9ImNvbnRleHQtbWVudS1mdW5jdGlvbiI+CiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9ImNvbnRleHQtbWVudS1hIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InZpZGVvLWNvbnRleHRtZW51LWljb24iPjwvc3Bhbj4g6K6+572uL+W4ruWKqS/lhbPkuo4KICAgICAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJjb250ZXh0LW1lbnUtZnVuY3Rpb24iPgogICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJjb250ZXh0LW1lbnUtYSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ2aWRlby1jb250ZXh0bWVudS1pY29uIj48L3NwYW4+ICjmtYsp56uL5Y2z5L+d5a2Y5pWw5o2uCiAgICAgICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0iY29udGV4dC1tZW51LWZ1bmN0aW9uIj4KICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz0iY29udGV4dC1tZW51LWEiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idmlkZW8tY29udGV4dG1lbnUtaWNvbiI+PC9zcGFuPiAo5rWLKeW8uuWItua4heepuuaVsOaNrgogICAgICAgICAgICAgICAgICAgIDwvYT4KICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgIGA7CiAgICAgICAgbGkub25jbGljayA9ICgpID0+IHBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiaWxpYmlsaS1wbGF5ZXItd2F0Y2hpbmctbnVtYmVyJylbMF0uY2xpY2soKTsKICAgICAgICBsZXQgdWwgPSBsaS5jaGlsZHJlblsxXTsKICAgICAgICB1bC5jaGlsZHJlblswXS5vbmNsaWNrID0gKCkgPT4geyBwb2x5ZmlsbC52aWRlby5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnZW5kZWQnKSk7IH07CiAgICAgICAgdWwuY2hpbGRyZW5bMV0ub25jbGljayA9ICgpID0+IHsgdG9wLndpbmRvdy5vcGVuKHBvbHlmaWxsLmdldENvdmVySW1hZ2UoKSwgJ19ibGFuaycpOyB9OwoKICAgICAgICB1bC5jaGlsZHJlblsyXS5jaGlsZHJlblsxXS5jaGlsZHJlblswXS5vbmNsaWNrID0gKCkgPT4geyBwb2x5ZmlsbC5zZXRWaWRlb1NwZWVkKDAuMSk7IH07CiAgICAgICAgdWwuY2hpbGRyZW5bMl0uY2hpbGRyZW5bMV0uY2hpbGRyZW5bMV0ub25jbGljayA9ICgpID0+IHsgcG9seWZpbGwuc2V0VmlkZW9TcGVlZCgzKTsgfTsKICAgICAgICB1bC5jaGlsZHJlblsyXS5jaGlsZHJlblsxXS5jaGlsZHJlblsyXS5vbmNsaWNrID0gKCkgPT4geyBwb2x5ZmlsbC5zZXRWaWRlb1NwZWVkKHVsLmNoaWxkcmVuWzJdLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzJdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpWzBdLnZhbHVlKTsgfTsKICAgICAgICB1bC5jaGlsZHJlblsyXS5jaGlsZHJlblsxXS5jaGlsZHJlblsyXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKVswXS5vbmNsaWNrID0gZSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpOwoKICAgICAgICB1bC5jaGlsZHJlblszXS5jaGlsZHJlblsxXS5jaGlsZHJlblswXS5vbmNsaWNrID0gKCkgPT4geyBwb2x5ZmlsbC5tYXJrT1BQb3NpdGlvbigpOyB9OwogICAgICAgIHVsLmNoaWxkcmVuWzNdLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzFdLm9uY2xpY2sgPSAoKSA9PiB7IHBvbHlmaWxsLm1hcmtFRFBvc3Rpb24oMyk7IH07CiAgICAgICAgdWwuY2hpbGRyZW5bM10uY2hpbGRyZW5bMV0uY2hpbGRyZW5bMl0ub25jbGljayA9ICgpID0+IHsgcG9seWZpbGwuY2xlYXJPUEVEUG9zaXRpb24oKTsgfTsKICAgICAgICB1bC5jaGlsZHJlblszXS5jaGlsZHJlblsxXS5jaGlsZHJlblszXS5vbmNsaWNrID0gKCkgPT4geyBkaXNwbGF5UG9seWZpbGxEYXRhRGl2KHBvbHlmaWxsKTsgfTsKCiAgICAgICAgdWwuY2hpbGRyZW5bNF0uY2hpbGRyZW5bMV0uY2hpbGRyZW5bMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2EnKVswXS5zdHlsZS53aWR0aCA9ICdpbml0aWFsJzsKICAgICAgICB1bC5jaGlsZHJlbls0XS5jaGlsZHJlblsxXS5jaGlsZHJlblsxXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYScpWzBdLnN0eWxlLndpZHRoID0gJ2luaXRpYWwnOwoKICAgICAgICB1bC5jaGlsZHJlbls1XS5vbmNsaWNrID0gKCkgPT4geyBvcHRpb25EaXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IH07CiAgICAgICAgdWwuY2hpbGRyZW5bNl0ub25jbGljayA9ICgpID0+IHsgcG9seWZpbGwuc2F2ZVVzZXJkYXRhKCkgfTsKICAgICAgICB1bC5jaGlsZHJlbls3XS5vbmNsaWNrID0gKCkgPT4gewogICAgICAgICAgICBCaWxpUG9seWZpbGwuY2xlYXJBbGxVc2VyZGF0YShwbGF5ZXJXaW4pOwogICAgICAgICAgICBwb2x5ZmlsbC5yZXRyaXZlVXNlcmRhdGEoKTsKICAgICAgICB9OwoKICAgICAgICBsaS5vbm1vdXNlZW50ZXIgPSAoKSA9PiB7CiAgICAgICAgICAgIGxldCB1bCA9IGxpLmNoaWxkcmVuWzFdOwogICAgICAgICAgICB1bC5jaGlsZHJlblswXS5jaGlsZHJlblswXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3BhbicpWzFdLnRleHRDb250ZW50ID0gcG9seWZpbGwuYXV0b05leHREZXN0aW5hdGlvbjsKCiAgICAgICAgICAgIHVsLmNoaWxkcmVuWzJdLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzJdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpWzBdLnZhbHVlID0gcG9seWZpbGwudmlkZW8ucGxheWJhY2tSYXRlOwoKICAgICAgICAgICAgdWwuY2hpbGRyZW5bNF0uY2hpbGRyZW5bMV0uY2hpbGRyZW5bMF0ub25jbGljayA9ICgpID0+IHsgaWYgKHBvbHlmaWxsLnNlcmllc1swXSkgdG9wLndpbmRvdy5vcGVuKGBodHRwczovL3d3dy5iaWxpYmlsaS5jb20vdmlkZW8vYXYke3BvbHlmaWxsLnNlcmllc1swXS5haWR9YCwgJ19ibGFuaycpOyB9OwogICAgICAgICAgICB1bC5jaGlsZHJlbls0XS5jaGlsZHJlblsxXS5jaGlsZHJlblsxXS5vbmNsaWNrID0gKCkgPT4geyBpZiAocG9seWZpbGwuc2VyaWVzWzFdKSB0b3Aud2luZG93Lm9wZW4oYGh0dHBzOi8vd3d3LmJpbGliaWxpLmNvbS92aWRlby9hdiR7cG9seWZpbGwuc2VyaWVzWzFdLmFpZH1gLCAnX2JsYW5rJyk7IH07CiAgICAgICAgICAgIHVsLmNoaWxkcmVuWzRdLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzcGFuJylbMV0udGV4dENvbnRlbnQgPSBwb2x5ZmlsbC5zZXJpZXNbMF0gPyBwb2x5ZmlsbC5zZXJpZXNbMF0udGl0bGUgOiAn5om+5LiN5YiwJzsKICAgICAgICAgICAgdWwuY2hpbGRyZW5bNF0uY2hpbGRyZW5bMV0uY2hpbGRyZW5bMV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NwYW4nKVsxXS50ZXh0Q29udGVudCA9IHBvbHlmaWxsLnNlcmllc1sxXSA/IHBvbHlmaWxsLnNlcmllc1sxXS50aXRsZSA6ICfmib7kuI3liLAnOwoKICAgICAgICAgICAgbGV0IG9wZWQgPSBwb2x5ZmlsbC51c2VyZGF0YS5vcGVkW3BvbHlmaWxsLmdldENvbGxlY3Rpb25JZCgpXSB8fCBbXTsKICAgICAgICAgICAgdWwuY2hpbGRyZW5bM10uY2hpbGRyZW5bMV0uY2hpbGRyZW5bMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NwYW4nKVsxXS50ZXh0Q29udGVudCA9IG9wZWRbMF0gPyBCaWxpUG9seWZpbGwuc2Vjb25kVG9SZWFkYWJsZShvcGVkWzBdKSA6ICfml6AnOwogICAgICAgICAgICB1bC5jaGlsZHJlblszXS5jaGlsZHJlblsxXS5jaGlsZHJlblsxXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3BhbicpWzFdLnRleHRDb250ZW50ID0gb3BlZFsxXSA/IEJpbGlQb2x5ZmlsbC5zZWNvbmRUb1JlYWRhYmxlKG9wZWRbMV0pIDogJ+aXoCc7CiAgICAgICAgfQogICAgICAgIHJldHVybiBsaTsKICAgIH0KCiAgICBzdGF0aWMgZ2VuT3B0aW9uRGl2KG9wdGlvbikgewogICAgICAgIGxldCBkaXYgPSBVSS5nZW5EaXYoKTsKCiAgICAgICAgZGl2LmFwcGVuZENoaWxkKFVJLmdlbk1vbmtleU9wdGlvblRhYmxlKG9wdGlvbikpOwogICAgICAgIGRpdi5hcHBlbmRDaGlsZChVSS5nZW5Qb2x5ZmlsbE9wdGlvblRhYmxlKG9wdGlvbikpOwogICAgICAgIGxldCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7CiAgICAgICAgdGFibGUuc3R5bGUgPSAnd2lkdGg6IDEwMCU7IGxpbmUtaGVpZ2h0OiAyZW07JzsKICAgICAgICB0YWJsZS5pbnNlcnRSb3coLTEpLmlubmVySFRNTCA9ICc8dGQ+6K6+572u6Ieq5Yqo5L+d5a2Y77yM5Yi35paw5ZCO55Sf5pWI44CCPC90ZD4nOwogICAgICAgIHRhYmxlLmluc2VydFJvdygtMSkuaW5uZXJIVE1MID0gJzx0ZD7op4bpopHkuIvovb3nu4Tku7bnmoTnvJPlrZjlip/og73lj6rlnKhXaW5kb3dzK0Nocm9tZea1i+ivlei/h++8jOWmguaenOWHuueOsOmXrumimO+8jOivt+WFs+mXree8k+WtmOOAgjwvdGQ+JzsKICAgICAgICB0YWJsZS5pbnNlcnRSb3coLTEpLmlubmVySFRNTCA9ICc8dGQ+5Yqf6IO95aKe5by657uE5Lu25bC96YeP5L+d6K+B5LqG5YW85a655oCn44CC5L2G5aaC5p6c5pyJ5ZCM5Yqf6IO96ISa5pysL+aPkuS7tu+8jOivt+WFs+mXreacrOaPkuS7tueahOWvueW6lOWKn+iDveOAgjwvdGQ+JzsKICAgICAgICB0YWJsZS5pbnNlcnRSb3coLTEpLmlubmVySFRNTCA9ICc8dGQ+6L+Z5Liq6ISa5pys5LmD4oCc5oyJ5Y6f5qC34oCd5o+Q5L6b77yM5LiN6ZmE5bim5Lu75L2V5piO56S677yM5pqX56S65oiW5rOV5a6a55qE5L+d6K+B77yM5YyF5ous5L2G5LiN6ZmQ5LqO5YW25rKh5pyJ57y66Zm377yM6YCC5ZCI54m55a6a55uu55qE5oiW6Z2e5L615p2D44CCPC90ZD4nOwogICAgICAgIHRhYmxlLmluc2VydFJvdygtMSkuaW5uZXJIVE1MID0gJzx0ZD48YSBocmVmPSJodHRwczovL2dyZWFzeWZvcmsub3JnL3poLUNOL3NjcmlwdHMvMjc4MTkiIHRhcmdldD0iX2JsYW5rIj7mm7TmlrAv6K6o6K66PC9hPiA8YSBocmVmPSJodHRwczovL2dpdGh1Yi5jb20vbGlxaTA4MTYvYmlsaXR3aW4vIiB0YXJnZXQ9Il9ibGFuayI+R2l0SHViPC9hPiBBdXRob3I6IHFsaTUuIENvcHlyaWdodDogcWxpNSwgMjAxNCssIOeUsOeUnywgZ3JlcG11c2ljPC90ZD4nOwogICAgICAgIGRpdi5hcHBlbmRDaGlsZCh0YWJsZSk7CgogICAgICAgIGxldCBidXR0b25zID0gW107CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIGJ1dHRvbnMucHVzaChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKSk7CiAgICAgICAgYnV0dG9ucy5tYXAoYnRuID0+IGJ0bi5zdHlsZS5wYWRkaW5nID0gJzAuNWVtJyk7CiAgICAgICAgYnV0dG9ucy5tYXAoYnRuID0+IGJ0bi5zdHlsZS5tYXJnaW4gPSAnMC4yZW0nKTsKICAgICAgICBidXR0b25zWzBdLnRleHRDb250ZW50ID0gJ+S/neWtmOW5tuWFs+mXrSc7CiAgICAgICAgYnV0dG9uc1swXS5vbmNsaWNrID0gKCkgPT4gewogICAgICAgICAgICBkaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJzs7CiAgICAgICAgfQogICAgICAgIGJ1dHRvbnNbMV0udGV4dENvbnRlbnQgPSAn5L+d5a2Y5bm25Yi35pawJzsKICAgICAgICBidXR0b25zWzFdLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgICAgIHRvcC5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9CiAgICAgICAgYnV0dG9uc1syXS50ZXh0Q29udGVudCA9ICfph43nva7lubbliLfmlrAnOwogICAgICAgIGJ1dHRvbnNbMl0ub25jbGljayA9ICgpID0+IHsKICAgICAgICAgICAgVUkuc2F2ZU9wdGlvbih7IHNldFN0b3JhZ2U6IG9wdGlvbi5zZXRTdG9yYWdlIH0pOwogICAgICAgICAgICB0b3AubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgfQogICAgICAgIGJ1dHRvbnMubWFwKGJ0biA9PiBkaXYuYXBwZW5kQ2hpbGQoYnRuKSk7CgogICAgICAgIHJldHVybiBkaXY7CiAgICB9CgogICAgc3RhdGljIGdlbk1vbmtleU9wdGlvblRhYmxlKG9wdGlvbiA9IHt9KSB7CiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBbCiAgICAgICAgICAgIFsnYXV0b0RlZmF1bHQnLCAn5bCd6K+V6Ieq5Yqo5oqT5Y+W77ya5LiN5Lya5ouW5oWi6aG16Z2i77yM5oqT5Y+W6buY6K6k5riF5pmw5bqm77yM5L2G5Y+v6IO95oqT5LiN5Yiw44CCJ10sCiAgICAgICAgICAgIFsnYXV0b0ZMVicsICflvLrliLboh6rliqjmipPlj5ZGTFbvvJrkvJrmi5bmhaLpobXpnaLvvIzlpoLmnpzpu5jorqTmuIXmmbDluqbkuZ/mmK/otoXmuIXkvJrmm7TmhaLvvIzkvYbkv53or4HmipPliLDjgIInXSwKICAgICAgICAgICAgWydhdXRvTVA0JywgJ+W8uuWItuiHquWKqOaKk+WPlk1QNO+8muS8muaLluaFoumhtemdou+8jOWmguaenOm7mOiupOa4heaZsOW6puS5n+aYr+mrmOa4heS8muabtOaFou+8jOS9huS/neivgeaKk+WIsOOAgiddLAogICAgICAgICAgICBbJ2NhY2hlJywgJ+WFs+agh+etvumhteS4jea4hee8k+WtmO+8muS/neeVmeWujOWFqOS4i+i9veWlveeahOWIhuauteWIsOe8k+WtmO+8jOW/mOiusOWPpuWtmOS4uuS5n+ayoeWFs+ezu+OAgiddLAogICAgICAgICAgICBbJ3BhcnRpYWwnLCAn5pat54K557ut5Lyg77ya54K55Ye74oCc5Y+W5raI4oCd5L+d55WZ6YOo5YiG5LiL6L2955qE5YiG5q615Yiw57yT5a2Y77yM5b+Y6K6w54K55Ye75Lya5by556qX56Gu6K6k44CCJ10sCiAgICAgICAgICAgIFsncHJveHknLCAn55So57yT5a2Y5Yqg6YCf5pKt5pS+5Zmo77ya5aaC5p6c57yT5a2Y6YeM5pyJ5a6M5YWo5LiL6L295aW955qE5YiG5q6177yM55u05o6l5ZaC57uZ572R6aG15pKt5pS+5Zmo77yM5LiN6YeN5paw6K6/6Zeu572R57uc44CC5bCP5rC0566h5Yip5Zmo77yM5pKt5pS+5Y+q6ZyANTAwa+a1gemHj+OAguWmguaenOWunuWcqOaQnuS4jea4heaAjuS5iOaSreaUvkFTU+W8ueW5le+8jOS5n+WPr+S7peWwsei/meagt+eUqOOAgiddLAogICAgICAgICAgICBbJ2Jsb2NrZXInLCAn5by55bmV6L+H5ruk77ya5Zyo572R6aG15pKt5pS+5Zmo6YeM6K6+572u55qE5bGP6JS96K+N5Lmf5a+55LiL6L2955qE5by55bmV55Sf5pWI44CCJ10sCiAgICAgICAgXTsKCiAgICAgICAgbGV0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTsKICAgICAgICB0YWJsZS5zdHlsZS53aWR0aCA9ICcxMDAlJzsKICAgICAgICB0YWJsZS5zdHlsZS5saW5lSGVpZ2h0ID0gJzJlbSc7CgogICAgICAgIHRhYmxlLmluc2VydFJvdygtMSkuaW5uZXJIVE1MID0gJzx0ZCBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXIiPkJpbGlNb25rZXnvvIjop4bpopHmipPlj5bnu4Tku7bvvIk8L3RkPic7CiAgICAgICAgdGFibGUuaW5zZXJ0Um93KC0xKS5pbm5lckhUTUwgPSAnPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlciI+5Zug5Li65L2c6ICF5YG35oeS5LqG77yM57yT5a2Y55qE5LiJ5Liq6YCJ6aG55pyA5aW96KaB5LmI5YWo5byA77yM6KaB5LmI5YWo5YWz44CC5pyA5aW944CCPC90ZD4nOwogICAgICAgIGZvciAobGV0IGQgb2YgZGVzY3JpcHRpb24pIHsKICAgICAgICAgICAgbGV0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgICAgICAgY2hlY2tib3gudHlwZSA9ICdjaGVja2JveCc7CiAgICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSBvcHRpb25bZFswXV07CiAgICAgICAgICAgIGNoZWNrYm94Lm9uY2hhbmdlID0gKCkgPT4geyBvcHRpb25bZFswXV0gPSBjaGVja2JveC5jaGVja2VkOyBVSS5zYXZlT3B0aW9uKG9wdGlvbik7IH07CiAgICAgICAgICAgIGxldCB0ZCA9IHRhYmxlLmluc2VydFJvdygtMSkuaW5zZXJ0Q2VsbCgwKTsKICAgICAgICAgICAgdGQuYXBwZW5kQ2hpbGQoY2hlY2tib3gpOwogICAgICAgICAgICB0ZC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkWzFdKSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGFibGU7CiAgICB9CgogICAgc3RhdGljIGdlblBvbHlmaWxsT3B0aW9uVGFibGUob3B0aW9uID0ge30pIHsKICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IFsKICAgICAgICAgICAgWydiZXRhYmV0YScsICflop7lvLrnu4Tku7bmgLvlvIDlhbMgPC0tLS0tLS0tLeabtOWKoOaHkuW+l+a1i+ivleS6hu+8jOWPjeato+S7peWQjkLnq5nkuZ/kvJroh6rlt7Hmj5Dkvpvov5nkupvlip/og73jgILkuZ/orrjlkKfjgIInXSwgLy9iZXRhYmV0YQogICAgICAgICAgICBbJ2RibGNsaWNrJywgJ+WPjOWHu+WFqOWxjyddLAogICAgICAgICAgICBbJ3Njcm9sbCcsICfoh6rliqjmu5rliqjliLDmkq3mlL7lmagnXSwKICAgICAgICAgICAgWydyZWNvbW1lbmQnLCAn5by55bmV5YiX6KGo5o2i5oiQ55u45YWz6KeG6aKRJ10sCiAgICAgICAgICAgIFsnYXV0b05leHQnLCAnMuenkuaNolAnXSwKICAgICAgICAgICAgLy9bJ2F1dG9OZXh0VGltZW91dCcsICflv6vpgJ/mjaJQ562J5b6F5pe26Ze0KOavq+enkiknXSwKICAgICAgICAgICAgWydsaWZ0JywgJ+iHquWKqOmYsuaMoeWtl+W5lSddLAogICAgICAgICAgICBbJ2F1dG9SZXN1bWUnLCAn6Ieq5Yqo6Lez6L2s5LiK5qyh55yL5YiwJ10sCiAgICAgICAgICAgIFsnYXV0b1BsYXknLCAn6Ieq5Yqo5pKt5pS+J10sCiAgICAgICAgICAgIFsnYXV0b0Z1bGxTY3JlZW4nLCAn6Ieq5Yqo5YWo5bGPJ10sCiAgICAgICAgICAgIFsnb3BlZCcsICfmoIforrDlkI7oh6rliqjot7NPUC9FRCddLAogICAgICAgICAgICBbJ3NwZWVjaCcsICco5rWLKSjpnIDlopnlpJYp5Lu75oSP5LiJ5Ye76byg5qCH5bem6ZSu5byA5ZCv6K+t6Z+z6K+G5YirJ10sCiAgICAgICAgICAgIFsnc2VyaWVzJywgJyjmtYsp5bCd6K+V6Ieq5Yqo5om+5LiK5LiL6ZuGJ10sCiAgICAgICAgXTsKCiAgICAgICAgbGV0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTsKICAgICAgICB0YWJsZS5zdHlsZS53aWR0aCA9ICcxMDAlJzsKICAgICAgICB0YWJsZS5zdHlsZS5saW5lSGVpZ2h0ID0gJzJlbSc7CgogICAgICAgIHRhYmxlLmluc2VydFJvdygtMSkuaW5uZXJIVE1MID0gJzx0ZCBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXIiPkJpbGlQb2x5ZmlsbO+8iOWKn+iDveWinuW8uue7hOS7tu+8iTwvdGQ+JzsKICAgICAgICB0YWJsZS5pbnNlcnRSb3coLTEpLmlubmVySFRNTCA9ICc8dGQgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyIj7mh5LprLzkvZzogIXov5jlnKjmtYvor5XnmoTml7blgJnvvIxC56uZ5bey57uP5LiK57q/5LqG5Y6f55Sf55qE56iN5ZCO5YaN55yLKOC5keKAosyA44WC4oCizIEp2YjinKc8L3RkPic7CiAgICAgICAgZm9yIChsZXQgZCBvZiBkZXNjcmlwdGlvbikgewogICAgICAgICAgICBsZXQgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICAgICAgICBjaGVja2JveC50eXBlID0gJ2NoZWNrYm94JzsKICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IG9wdGlvbltkWzBdXTsKICAgICAgICAgICAgY2hlY2tib3gub25jaGFuZ2UgPSAoKSA9PiB7IG9wdGlvbltkWzBdXSA9IGNoZWNrYm94LmNoZWNrZWQ7IFVJLnNhdmVPcHRpb24ob3B0aW9uKTsgfTsKICAgICAgICAgICAgbGV0IHRkID0gdGFibGUuaW5zZXJ0Um93KC0xKS5pbnNlcnRDZWxsKDApOwogICAgICAgICAgICB0ZC5hcHBlbmRDaGlsZChjaGVja2JveCk7CiAgICAgICAgICAgIHRkLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGRbMV0pKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0YWJsZTsKICAgIH0KCiAgICBzdGF0aWMgZGlzcGxheVBvbHlmaWxsRGF0YURpdihwb2x5ZmlsbCkgewogICAgICAgIGxldCBkaXYgPSBVSS5nZW5EaXYoKTsKICAgICAgICBsZXQgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTsKICAgICAgICBwLnRleHRDb250ZW50ID0gJ+i/memHjOaYr+iEmuacrOWCqOWtmOeahOaVsOaNruOAguaJgOacieaVsOaNrumDveWPquWtmOWcqOa1j+iniOWZqOmHjO+8jOWIq+S6uuS4jeefpemBk++8jELnq5nkuZ/kuI3nn6XpgZPvvIzohJrmnKzkvZzogIXmm7TkuI3nn6XpgZMo6L+Z5Liq5a625LyZ6L+e5pyN5Yqh5Zmo6YO956ef5LiN6LW3IOaRlCc7CiAgICAgICAgcC5zdHlsZS5tYXJnaW4gPSAnMC4zZW0nOwogICAgICAgIGRpdi5hcHBlbmRDaGlsZChwKTsKCiAgICAgICAgbGV0IHRleHRhcmVhcyA9IFtdOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKSB0ZXh0YXJlYXMucHVzaChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpKTsKICAgICAgICB0ZXh0YXJlYXMuZm9yRWFjaCh0YSA9PiB0YS5zdHlsZSA9ICdyZXNpemU6dmVydGljYWw7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDIwMHB4Jyk7CgogICAgICAgIHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7CiAgICAgICAgcC50ZXh0Q29udGVudCA9ICdC56uZ5bey5LiK57q/5Y6f55Sf55qE56iN5ZCO6KeC55yL5Yqf6IO944CCJzsKICAgICAgICBwLnN0eWxlLm1hcmdpbiA9ICcwLjNlbSc7CiAgICAgICAgZGl2LmFwcGVuZENoaWxkKHApOwogICAgICAgIC8vdGV4dGFyZWFzWzBdLnRleHRDb250ZW50ID0gSlNPTi5zdHJpbmdpZnkocG9seWZpbGwudXNlcmRhdGEud2F0Y2hMYXRlcikucmVwbGFjZSgvXFsvLCAnW1xuJykucmVwbGFjZSgvXF0vLCAnXG5dJykucmVwbGFjZSgvLC9nLCAnLFxuJyk7CiAgICAgICAgLy9kaXYuYXBwZW5kQ2hpbGQodGV4dGFyZWFzWzBdKTsKCiAgICAgICAgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTsKICAgICAgICBwLnRleHRDb250ZW50ID0gJ+i/memHjOaYr+eJh+WktOeJh+WwvuOAguagvOW8j+aYr++8jGF25Y+35oiW55Wq5Ymn5Y+3OlvniYflpLQs54mH5bC+XeOAgm51bGzku6PooajmsqHmnInniYflpLTjgIInOwogICAgICAgIHAuc3R5bGUubWFyZ2luID0gJzAuM2VtJzsKICAgICAgICBkaXYuYXBwZW5kQ2hpbGQocCk7CiAgICAgICAgdGV4dGFyZWFzWzFdLnRleHRDb250ZW50ID0gSlNPTi5zdHJpbmdpZnkocG9seWZpbGwudXNlcmRhdGEub3BlZCkucmVwbGFjZSgvey8sICd7XG4nKS5yZXBsYWNlKC99LywgJ1xufScpLnJlcGxhY2UoL10sL2csICddLFxuJyk7CiAgICAgICAgZGl2LmFwcGVuZENoaWxkKHRleHRhcmVhc1sxXSk7CgogICAgICAgIHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7CiAgICAgICAgcC50ZXh0Q29udGVudCA9ICflvZPnhLblj6/ku6Xnm7TmjqXmuIXnqbrllabjgILlj6rliKDpmaTlhbbkuK3nmoTkuIDkupvooYznmoTor53vvIzkuIDlrpropoHorrDlvpfliKDmjonlpJrkvZnnmoTpgJflj7fjgIInOwogICAgICAgIHAuc3R5bGUubWFyZ2luID0gJzAuM2VtJzsKICAgICAgICBkaXYuYXBwZW5kQ2hpbGQocCk7CgogICAgICAgIGxldCBidXR0b25zID0gW107CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIGJ1dHRvbnMucHVzaChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKSk7CiAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ0biA9PiBidG4uc3R5bGUucGFkZGluZyA9ICcwLjVlbScpOwogICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidG4gPT4gYnRuLnN0eWxlLm1hcmdpbiA9ICcwLjJlbScpOwogICAgICAgIGJ1dHRvbnNbMF0udGV4dENvbnRlbnQgPSAn5YWz6ZetJzsKICAgICAgICBidXR0b25zWzBdLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgICAgIGRpdi5yZW1vdmUoKTsKICAgICAgICB9CiAgICAgICAgYnV0dG9uc1sxXS50ZXh0Q29udGVudCA9ICfpqozor4HmoLzlvI8nOwogICAgICAgIGJ1dHRvbnNbMV0ub25jbGljayA9ICgpID0+IHsKICAgICAgICAgICAgaWYgKCF0ZXh0YXJlYXNbMF0udmFsdWUpIHRleHRhcmVhc1swXS52YWx1ZSA9ICd7XG5cbn0nOwogICAgICAgICAgICB0ZXh0YXJlYXNbMF0udmFsdWUgPSB0ZXh0YXJlYXNbMF0udmFsdWUucmVwbGFjZSgvLChcc3xcbikqfS8sICdcbn0nKS5yZXBsYWNlKC8sKFxzfFxuKSwvZywgJyxcbicpOwogICAgICAgICAgICBpZiAoIXRleHRhcmVhc1sxXS52YWx1ZSkgdGV4dGFyZWFzWzFdLnZhbHVlID0gJ3tcblxufSc7CiAgICAgICAgICAgIHRleHRhcmVhc1sxXS52YWx1ZSA9IHRleHRhcmVhc1sxXS52YWx1ZS5yZXBsYWNlKC8sKFxzfFxuKSp9LywgJ1xufScpLnJlcGxhY2UoLywoXHN8XG4pLC9nLCAnLFxuJykucmVwbGFjZSgvLChcc3xcbikqXS9nLCAnXScpOwogICAgICAgICAgICBsZXQgdXNlcmRhdGEgPSB7fTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIC8vdXNlcmRhdGEud2F0Y2hMYXRlciA9IEpTT04ucGFyc2UodGV4dGFyZWFzWzBdLnZhbHVlKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBhbGVydCgn56iN5ZCO6KeC55yL5YiX6KGoOiAnICsgZSk7IHRocm93IGU7IH0KICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHVzZXJkYXRhLm9wZWQgPSBKU09OLnBhcnNlKHRleHRhcmVhc1sxXS52YWx1ZSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgYWxlcnQoJ+eJh+WktOeJh+WwvjogJyArIGUpOyB0aHJvdyBlOyB9CiAgICAgICAgICAgIGJ1dHRvbnNbMV0udGV4dENvbnRlbnQgPSAoJ+agvOW8j+ayoeaciemXrumimO+8gScpOwogICAgICAgICAgICByZXR1cm4gdXNlcmRhdGE7CiAgICAgICAgfQogICAgICAgIGJ1dHRvbnNbMl0udGV4dENvbnRlbnQgPSAn5bCd6K+V5L+d5a2YJzsKICAgICAgICBidXR0b25zWzJdLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgICAgIHBvbHlmaWxsLnVzZXJkYXRhID0gYnV0dG9uc1sxXS5vbmNsaWNrKCk7CiAgICAgICAgICAgIHBvbHlmaWxsLnNhdmVVc2VyZGF0YSgpOwogICAgICAgICAgICBidXR0b25zWzJdLnRleHRDb250ZW50ID0gKCfkv53lrZjmiJDlip8nKTsKICAgICAgICB9CiAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ0biA9PiBkaXYuYXBwZW5kQ2hpbGQoYnRuKSk7CgogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTsKICAgICAgICBkaXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICB9CgogICAgLy8gQ29tbW9uCiAgICBzdGF0aWMgZ2VuRGl2KCkgewogICAgICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBkaXYuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOwogICAgICAgIGRpdi5zdHlsZS56SW5kZXggPSAnMTAwMzYnOwogICAgICAgIGRpdi5zdHlsZS50b3AgPSAnNTAlJzsKICAgICAgICBkaXYuc3R5bGUubWFyZ2luVG9wID0gJy0yMDBweCc7CiAgICAgICAgZGl2LnN0eWxlLmxlZnQgPSAnNTAlJzsKICAgICAgICBkaXYuc3R5bGUubWFyZ2luTGVmdCA9ICctMzIwcHgnOwogICAgICAgIGRpdi5zdHlsZS53aWR0aCA9ICc1NDBweCc7CiAgICAgICAgZGl2LnN0eWxlLm1heEhlaWdodCA9ICc0MDBweCc7CiAgICAgICAgZGl2LnN0eWxlLm92ZXJmbG93WSA9ICdhdXRvJzsKICAgICAgICBkaXYuc3R5bGUucGFkZGluZyA9ICczMHB4IDUwcHgnOwogICAgICAgIGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnd2hpdGUnOwogICAgICAgIGRpdi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNnB4JzsKICAgICAgICBkaXYuc3R5bGUuYm94U2hhZG93ID0gJ3JnYmEoMCwgMCwgMCwgMC42KSAxcHggMXB4IDQwcHggMHB4JzsKICAgICAgICBkaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICBkaXYuY2xhc3NOYW1lID0gJ2JpbGl0d2luJzsKICAgICAgICByZXR1cm4gZGl2OwogICAgfQoKICAgIHN0YXRpYyByZXF1ZXN0SDVQbGF5ZXIoKSB7CiAgICAgICAgbGV0IGggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYudG1pbmZvJyk7CiAgICAgICAgaC5pbnNlcnRCZWZvcmUoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1tb6ISa5pys6ZyA6KaBSFRNTDXmkq3mlL7lmago5by55bmV5YiX6KGo5Y+z5LiK6KeS5LiJ5Liq54K555qE5oyJ6ZKu5YiH5o2iKV1dICcpLCBoLmZpcnN0Q2hpbGQpOwogICAgfQoKICAgIHN0YXRpYyBjb3B5VG9DbGlwYm9hcmQodGV4dCkgewogICAgICAgIGxldCB0ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0YXJlYSk7CiAgICAgICAgdGV4dGFyZWEudmFsdWUgPSB0ZXh0OwogICAgICAgIHRleHRhcmVhLnNlbGVjdCgpOwogICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5Jyk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZXh0YXJlYSk7CiAgICB9CgogICAgc3RhdGljIGFsbG93RHJhZyhlKSB7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB9CgogICAgc3RhdGljIGJlZm9yZVVubG9hZEhhbmRsZXIoZSkgewogICAgICAgIHJldHVybiBlLnJldHVyblZhbHVlID0gJ+iEmuacrOi/mOayoeWBmuWujOW3peS9nO+8jOecn+eahOimgemAgOWHuuWQl++8nyc7CiAgICB9CgogICAgc3RhdGljIGhpbnRJbmZvKHRleHQsIHBsYXllcldpbikgewogICAgICAgIGxldCBpbmZvRGl2ID0gcGxheWVyV2luLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGluZm9EaXYuY2xhc3NOYW1lID0gJ2JpbGliaWxpLXBsYXllci12aWRlby10b2FzdC1ib3R0b20nOwogICAgICAgIGluZm9EaXYuaW5uZXJIVE1MID0gYAogICAgICAgIDxkaXYgY2xhc3M9ImJpbGliaWxpLXBsYXllci12aWRlby10b2FzdC1pdGVtIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmlsaWJpbGktcGxheWVyLXZpZGVvLXRvYXN0LWl0ZW0tdGV4dCI+CiAgICAgICAgICAgICAgICA8c3Bhbj4ke3RleHR9PC9zcGFuPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICBgOwogICAgICAgIHBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiaWxpYmlsaS1wbGF5ZXItdmlkZW8tdG9hc3Qtd3JwJylbMF0uYXBwZW5kQ2hpbGQoaW5mb0Rpdik7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBpbmZvRGl2LnJlbW92ZSgpLCAzMDAwKTsKICAgIH0KCiAgICBzdGF0aWMgZ2V0T3B0aW9uKHBsYXllcldpbikgewogICAgICAgIGxldCByYXdPcHRpb24gPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICh3aW5kb3cuR01fZ2V0VmFsdWUpIHsKICAgICAgICAgICAgICAgIHJhd09wdGlvbiA9IEpTT04ucGFyc2UoR01fZ2V0VmFsdWUoJ0JpbGlUd2luJykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmF3T3B0aW9uID0gSlNPTi5wYXJzZShwbGF5ZXJXaW4ubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0JpbGlUd2luJykpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7IH0KICAgICAgICBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKCFyYXdPcHRpb24pIHJhd09wdGlvbiA9IHt9OwogICAgICAgICAgICBpZiAod2luZG93LkdNX3NldFZhbHVlKSB7CiAgICAgICAgICAgICAgICByYXdPcHRpb24uc2V0U3RvcmFnZSA9IChuLCBpKSA9PiBHTV9zZXRWYWx1ZShuLCBpKTsKICAgICAgICAgICAgICAgIHJhd09wdGlvbi5nZXRTdG9yYWdlID0gbiA9PiBHTV9nZXRWYWx1ZShuKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJhd09wdGlvbi5zZXRTdG9yYWdlID0gKG4sIGkpID0+IHBsYXllcldpbi5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShuLCBpKTsKICAgICAgICAgICAgICAgIHJhd09wdGlvbi5nZXRTdG9yYWdlID0gbiA9PiBwbGF5ZXJXaW4ubG9jYWxTdG9yYWdlLmdldEl0ZW0obik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgZGVmYXVsdE9wdGlvbiA9IHsKICAgICAgICAgICAgICAgIGF1dG9EZWZhdWx0OiB0cnVlLAogICAgICAgICAgICAgICAgYXV0b0ZMVjogZmFsc2UsCiAgICAgICAgICAgICAgICBhdXRvTVA0OiBmYWxzZSwKICAgICAgICAgICAgICAgIGNhY2hlOiB0cnVlLAogICAgICAgICAgICAgICAgcGFydGlhbDogdHJ1ZSwKICAgICAgICAgICAgICAgIHByb3h5OiB0cnVlLAogICAgICAgICAgICAgICAgYmxvY2tlcjogdHJ1ZSwKICAgICAgICAgICAgICAgIGRibGNsaWNrOiB0cnVlLAogICAgICAgICAgICAgICAgc2Nyb2xsOiB0cnVlLAogICAgICAgICAgICAgICAgcmVjb21tZW5kOiB0cnVlLAogICAgICAgICAgICAgICAgYXV0b05leHQ6IHRydWUsCiAgICAgICAgICAgICAgICBhdXRvTmV4dFRpbWVvdXQ6IDIwMDAsCiAgICAgICAgICAgICAgICBsaWZ0OiB0cnVlLAogICAgICAgICAgICAgICAgYXV0b1Jlc3VtZTogdHJ1ZSwKICAgICAgICAgICAgICAgIGF1dG9QbGF5OiBmYWxzZSwKICAgICAgICAgICAgICAgIGF1dG9GdWxsU2NyZWVuOiBmYWxzZSwKICAgICAgICAgICAgICAgIG9wZWQ6IHRydWUsCiAgICAgICAgICAgICAgICBzcGVlY2g6IGZhbHNlLAogICAgICAgICAgICAgICAgc2VyaWVzOiB0cnVlLAogICAgICAgICAgICAgICAgYmV0YWJldGE6IGZhbHNlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9uLCByYXdPcHRpb24sIGRlYnVnT3B0aW9uKTsKICAgICAgICB9CiAgICB9CgogICAgc3RhdGljIHNhdmVPcHRpb24ob3B0aW9uKSB7CiAgICAgICAgcmV0dXJuIG9wdGlvbi5zZXRTdG9yYWdlKCdCaWxpVHdpbicsIEpTT04uc3RyaW5naWZ5KG9wdGlvbikpOwogICAgfQoKICAgIHN0YXRpYyBvdXRkYXRlZEVuZ2luZUNsZWFyYW5jZSgpIHsKICAgICAgICBpZiAoIVByb21pc2UpIHsKICAgICAgICAgICAgYWxlcnQoJ+i/meS4qua1j+iniOWZqOWunuWcqOWkquiAgeS6hu+8jOiEmuacrOWGs+Wumue9ouW3peOAgicpOwogICAgICAgICAgICB0aHJvdyAnQmlsaVR3aW46IGJyb3dzZXIgb3V0ZGF0ZWQ6IFByb21pc2UgdW5zdXBwb3J0ZWQnOwogICAgICAgIH0KICAgIH0KCiAgICBzdGF0aWMgZmlyZWZveENsZWFyYW5jZSgpIHsKICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgIT0gLTEpIHsKICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZGl2JykubGVuZ3RoKSB0aHJvdyAnQmlsaVR3aW46IEZpcmUgSW4gdGhlIEZveCBFUlJPUjogU2NyaXB0IHJlY2VpdmVkIGFuIGVtcHR5IGRvY3VtZW50JzsKICAgICAgICAgICAgaWYgKEdNX2luZm8gJiYgR01faW5mby5zY3JpcHRIYW5kbGVyICE9ICdUYW1wZXJtb25rZXknKSB7CiAgICAgICAgICAgICAgICBsZXQgZGl2ID0gVUkuZ2VuRGl2KCk7CiAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPHA+5oKo5Zyo5L2/55SoR3JlYXN5TW9ua2V55ZCX77yfPC9wPgogICAgICAgICAgICAgICAgPHA+5LiN55+l6YGT5Li65LuA5LmI4oCU4oCUR3JlYXN5TW9ua2V55LiN5pSv5oyBQmlsaVR3aW7ohJrmnKzjgII8L3A+CiAgICAgICAgICAgICAgICA8cD7mgqjlj6/ku6UKICAgICAgICAgICAgICAgICAgICA8b2w+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT4xLiDnlKg8YSBocmVmPSJodHRwczovL2FkZG9ucy5tb3ppbGxhLm9yZy9maXJlZm94L2FkZG9uL3RhbXBlcm1vbmtleSI+VGFtcGVyTW9ua2V5PC9hPuWuieijheiEmuacrOOAguWIq+aLheW/g++8jOWug+WSjEdyZWFzeU1vbmtleeWPr+S7peWFseWtmOOAgjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT4yLiDmiorov5nkuKrkuabnrb7lsI/nqIvluo88YSBocmVmPSJqYXZhc2NyaXB0OihmdW5jdGlvbigpe2Y9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7Zi5zZXRBdHRyaWJ1dGUoJ3NyYycsJ2h0dHBzOi8vbGlxaTA4MTYuZ2l0aHViLmlvL2JpbGl0d2luL2JpbGlUd2luLnVzZXIuanMnKTtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGYpfSkoKSI+VHdpbjwvYT7mi5bliqjliLDkuabnrb7moI/jgILov57lronoo4Xpg73kuI3pnIDopoHvvIzngrnkuIDkuIvlsLHog73ov5DooYzohJrmnKzjgII8L2xpPgogICAgICAgICAgICAgICAgICAgICAgICA8bGk+My4g5YiwPGEgaHJlZj0iaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1DTi9zY3JpcHRzLzI3ODE5Ij5HcmVhc3lGb3JrPC9hPuS4iuiuqOiuuui/meS4qumXrumimOOAgjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT40LiA8YSBocmVmPSJodHRwczovL2dpdGh1Yi5jb20vbGlxaTA4MTYvYmlsaXR3aW4vIj5Gb3JrIFlvdSE8L2E+PC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjUuIDxhIG9uY2xpY2s9InRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlKCkiPuWFiOivleivleeci+OAgjwvYT48L2xpPgogICAgICAgICAgICAgICAgICAgIDxvbD4KICAgICAgICAgICAgICAgIDwvcD4KICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICBkaXYuc3R5bGUubGluZUhlaWdodCA9ICcyZW0nOwogICAgICAgICAgICAgICAgZGl2LnN0eWxlLmRpc3BsYXkgPSAnJzsKICAgICAgICAgICAgICAgIHVuc2FmZVdpbmRvdy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGVidWdPcHRpb24ucHJveHkgPSBmYWxzZTsKICAgICAgICAgICAgaWYgKCF3aW5kb3cubmF2aWdhdG9yLnRlbXBvcmFyeVN0b3JhZ2UgJiYgIXdpbmRvdy5uYXZpZ2F0b3IubW96VGVtcG9yYXJ5U3RvcmFnZSkgd2luZG93Lm5hdmlnYXRvci50ZW1wb3JhcnlTdG9yYWdlID0geyBxdWVyeVVzYWdlQW5kUXVvdGE6IGZ1bmMgPT4gZnVuYygtMTA0ODU3NiwgMTA0ODQ3MTE0MjQpIH07CiAgICAgICAgICAgIGlmICh0b3AudW5zYWZlV2luZG93KSBPYmplY3QuZGVmaW5lUHJvcGVydHkodG9wLnVuc2FmZVdpbmRvdywgJ2JpbGlUd2luSW5zdGFuY2VDb3VudCcsIHsgdmFsdWU6IG5ldyBOdW1iZXIoMSkgfSk7CiAgICAgICAgfQogICAgfQoKICAgIHN0YXRpYyB4cGNXcmFwcGVyQ2xlYXJhbmNlKCkgewogICAgICAgIGlmICh0b3AudW5zYWZlV2luZG93KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdjaWQnLCB7CiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IFN0cmluZyh1bnNhZmVXaW5kb3cuY2lkKQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ3BhZ2VubycsIHsKICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgIGdldDogKCkgPT4gU3RyaW5nKHVuc2FmZVdpbmRvdy5wYWdlbm8pCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAncGxheWVyJywgewogICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiB7IHJldHVybiB7IG5leHQ6IHVuc2FmZVdpbmRvdy5wbGF5ZXIubmV4dCwgZGVzdHJveTogdW5zYWZlV2luZG93LnBsYXllci5kZXN0cm95LCByZWxvYWRBY2Nlc3M6IHVuc2FmZVdpbmRvdy5wbGF5ZXIucmVsb2FkQWNjZXNzIH0gfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2ZldGNoJywgewogICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiB1bnNhZmVXaW5kb3cuZmV0Y2guYmluZCh1bnNhZmVXaW5kb3cpLAogICAgICAgICAgICAgICAgc2V0OiBfZmV0Y2ggPT4gdW5zYWZlV2luZG93LmZldGNoID0gX2ZldGNoLmJpbmQodW5zYWZlV2luZG93KQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLyoKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJyQnLCB7CiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHVuc2FmZVdpbmRvd1snJCddCiAgICAgICAgICAgIH0pOyovCiAgICAgICAgfQogICAgfQoKICAgIHN0YXRpYyBjbGVhblVJKCkgewogICAgICAgIEFycmF5LmZyb20oZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYmlsaXR3aW4nKSkKICAgICAgICAgICAgLmZpbHRlcihlID0+IGUudGV4dENvbnRlbnQuaW5kZXhPZignRkxW5YiG5q61JykgIT0gLTEpCiAgICAgICAgICAgIC5mb3JFYWNoKGUgPT4gQXJyYXkuZnJvbShlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhJykpLmZvckVhY2goCiAgICAgICAgICAgICAgICBlID0+IGUudGV4dENvbnRlbnQgPT0gJ+WPlua2iCcgPyBlLmNsaWNrKCkgOiB1bmRlZmluZWQKICAgICAgICAgICAgKSk7CiAgICAgICAgQXJyYXkuZnJvbShkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiaWxpdHdpbicpKS5mb3JFYWNoKGUgPT4gZS5yZW1vdmUoKSk7CiAgICB9CgogICAgc3RhdGljIHJlSW5pdCgpIHsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9mcWkgPiBpZnJhbWUnKSA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNib2ZxaSA+IGlmcmFtZScpLnJlbW92ZSgpIDogdW5kZWZpbmVkOwogICAgICAgIFVJLmNsZWFuVUkoKTsKICAgICAgICBVSS5pbml0KCk7CiAgICB9CgogICAgc3RhdGljIGFzeW5jIGluaXQoKSB7CiAgICAgICAgVUkub3V0ZGF0ZWRFbmdpbmVDbGVhcmFuY2UoKTsKICAgICAgICBVSS54cGNXcmFwcGVyQ2xlYXJhbmNlKCk7CiAgICAgICAgVUkuZmlyZWZveENsZWFyYW5jZSgpOwoKICAgICAgICBsZXQgcGxheWVyV2luOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHBsYXllcldpbiA9IGF3YWl0IFVJLmdldFBsYXllcldpbigpOwogICAgICAgICAgICBpZiAodG9wLmxvY2F0aW9uLmhvc3RuYW1lID09ICdiYW5ndW1pLmJpbGliaWxpLmNvbScpIHBsYXllcldpbi5hZGRFdmVudExpc3RlbmVyKCd1bmxvYWQnLCAoKSA9PiBVSS5yZUluaXQoKSk7CiAgICAgICAgICAgIGVsc2UgcGxheWVyV2luLmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCAoKSA9PiBVSS5yZUluaXQoKSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBpZiAoZSA9PSAnTmVlZCBINSBQbGF5ZXInKSBVSS5yZXF1ZXN0SDVQbGF5ZXIoKTsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICAgICAgbGV0IG9wdGlvbiA9IFVJLmdldE9wdGlvbihwbGF5ZXJXaW4pOwogICAgICAgIGxldCBvcHRpb25EaXYgPSBVSS5nZW5PcHRpb25EaXYob3B0aW9uKTsvL3NpZGVBcHBlbmQob3B0aW9uKTsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG9wdGlvbkRpdik7CgogICAgICAgIGxldCBtb25rZXlUaXRsZTsKICAgICAgICBsZXQgZGlzcGxheVBvbHlmaWxsRGF0YURpdiA9IHBvbHlmaWxsID0+IFVJLmRpc3BsYXlQb2x5ZmlsbERhdGFEaXYocG9seWZpbGwpOwogICAgICAgIGxldCBbbW9ua2V5LCBwb2x5ZmlsbF0gPSBhd2FpdCBQcm9taXNlLmFsbChbCiAgICAgICAgICAgIChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgbW9ua2V5ID0gbmV3IEJpbGlNb25rZXkocGxheWVyV2luLCBvcHRpb24pOwogICAgICAgICAgICAgICAgYXdhaXQgbW9ua2V5LmV4ZWNPcHRpb25zKCk7CiAgICAgICAgICAgICAgICBtb25rZXlUaXRsZSA9IFVJLnRpdGxlQXBwZW5kKG1vbmtleSk7CiAgICAgICAgICAgICAgICByZXR1cm4gbW9ua2V5OwogICAgICAgICAgICB9KSgpLAogICAgICAgICAgICAoYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgbGV0IHBvbHlmaWxsID0gbmV3IEJpbGlQb2x5ZmlsbChwbGF5ZXJXaW4sIG9wdGlvbiwgdCA9PiBVSS5oaW50SW5mbyh0LCBwbGF5ZXJXaW4pKTsKICAgICAgICAgICAgICAgIGF3YWl0IHBvbHlmaWxsLnNldEZ1bmN0aW9ucygpOwogICAgICAgICAgICAgICAgLy9VSS5zaWRlUG9seWZpbGxBcHBlbmQocG9seWZpbGwpOwogICAgICAgICAgICAgICAgcmV0dXJuIHBvbHlmaWxsOwogICAgICAgICAgICB9KSgpCiAgICAgICAgXSk7CgogICAgICAgIFVJLm1lbnVBcHBlbmQocGxheWVyV2luLCB7IG1vbmtleSwgbW9ua2V5VGl0bGUsIHBvbHlmaWxsLCBkaXNwbGF5UG9seWZpbGxEYXRhRGl2LCBvcHRpb25EaXYgfSk7CgogICAgICAgIGlmIChkZWJ1Z09wdGlvbi5kZWJ1ZyAmJiB0b3AuY29uc29sZSkgdG9wLmNvbnNvbGUuY2xlYXIoKTsKICAgICAgICBpZiAoZGVidWdPcHRpb24uZGVidWcpIChbKHRvcC51bnNhZmVXaW5kb3cgfHwgdG9wKS5tLCAodG9wLnVuc2FmZVdpbmRvdyB8fCB0b3ApLnBdID0gW21vbmtleSwgcG9seWZpbGxdKTsKICAgICAgICByZXR1cm4gW21vbmtleSwgcG9seWZpbGxdOwogICAgfQp9CgpVSS5pbml0KCk7Cg=="},{"name":"giveaway.su","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["steamcommunity.com"],"orig_excludes":[],"orig_includes":[],"orig_matches":["https://giveaway.su/giveaway/view/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1502855478271,"data":{}},"enabled":true,"position":26,"file_url":"https://gist.githubusercontent.com/kaoyusu/ecda3826c7e1a696b785f729715a5e22/raw/giveaway_su.user.js","uuid":"7a456377-335f-4378-b2df-a4ac85deb52d","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBnaXZlYXdheS5zdQovLyBAdmVyc2lvbiAgICAgIDAuNi4yCi8vIEBhdXRob3IgICAgICAgS2FveXUKLy8gQHJlcXVpcmUgICAgICBodHRwczovL2Nkbi5ib290Y3NzLmNvbS9qcXVlcnkvMy4yLjEvanF1ZXJ5Lm1pbi5qcwovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vY2RuLmJvb3Rjc3MuY29tL2JsdWVpbXAtbWQ1LzIuNy4wL2pzL21kNS5taW4uanMKLy8gQG1hdGNoICAgICAgICBodHRwczovL2dpdmVhd2F5LnN1L2dpdmVhd2F5L3ZpZXcvKgovLyBAZG93bmxvYWRVUkwgIGh0dHBzOi8vZ2lzdC5naXRodWJ1c2VyY29udGVudC5jb20va2FveXVzdS9lY2RhMzgyNmM3ZTFhNjk2Yjc4NWY3Mjk3MTVhNWUyMi9yYXcvZ2l2ZWF3YXlfc3UudXNlci5qcwovLyBAdXBkYXRlVVJMICAgIGh0dHBzOi8vZ2lzdC5naXRodWJ1c2VyY29udGVudC5jb20va2FveXVzdS9lY2RhMzgyNmM3ZTFhNjk2Yjc4NWY3Mjk3MTVhNWUyMi9yYXcvZ2l2ZWF3YXlfc3UudXNlci5qcwovLyBAY29ubmVjdCAgICAgIHN0ZWFtY29tbXVuaXR5LmNvbQovLyBAZ3JhbnQgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vID09L1VzZXJTY3JpcHQ9PQoKLy8g6L+Z6YeM5L+u5pS55omp5bGV5a+55bqU54mI5pys5Y+3CnZhciBleHRlbnNpb25WZXJzaW9uID0gIjMuNC45IjsKCnZhciBjaGVja3MgPSBbXTsKdmFyIGNoZWNrR3JvdXAgPSBmdW5jdGlvbihidXR0b24sIGlzT3BlbikgewogICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgIG1ldGhvZDogIkdFVCIsCiAgICAgICAgdXJsOiAiaHR0cDovL3N0ZWFtY29tbXVuaXR5LmNvbS9wcm9maWxlcy8iKyQoImFzaWRlW2RhdGEtc3RlYW0taWRdIikuZGF0YSgic3RlYW0taWQiKSsiL2dyb3Vwcy8iLAogICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIHZhciByZWdleHAgPSBuZXcgUmVnRXhwKCJocmVmPVwiamF2YXNjcmlwdDpsZWF2ZUdyb3VwUHJvbXB0XFwoJyIrJChidXR0b24pLmRhdGEoImNoZWNrIikrIicsIiwgImciKTsKICAgICAgICAgICAgaWYgKHJlZ2V4cC50ZXN0KHJlc3BvbnNlLnJlc3BvbnNlVGV4dCkpIHsKICAgICAgICAgICAgICAgICQoYnV0dG9uKS50b2dnbGVDbGFzcygiYnRuLWRlZmF1bHQgYnRuLXN1Y2Nlc3MiKS5wcm9wKCJkaXNhYmxlZCIsICJkaXNhYmxlZCIpLmZpbmQoImkuZ2x5cGhpY29uLXJlZnJlc2giKS50b2dnbGVDbGFzcygiZ2x5cGhpY29uLXJlZnJlc2ggZ2x5cGhpY29uLW9rIik7CiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBjaGVja3MuaW5kZXhPZihidXR0b24pOwogICAgICAgICAgICAgICAgaWYoaW5kZXggPiAtMSkKICAgICAgICAgICAgICAgICAgICBjaGVja3Muc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNoZWNrcy5wdXNoKGJ1dHRvbik7CiAgICAgICAgICAgICAgICBpZihpc09wZW4pCiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oImh0dHBzOi8vc3RlYW1jb21tdW5pdHkuY29tL2dpZC8iKyQoYnV0dG9uKS5kYXRhKCJjaGVjayIpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwp9Owp2YXIgY2hlY2tHcmVlbmxpZ2h0ID0gZnVuY3Rpb24oYnV0dG9uLCBpc09wZW4pewogICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgIG1ldGhvZDogIkdFVCIsCiAgICAgICAgdXJsOiAiaHR0cHM6Ly9zdGVhbWNvbW11bml0eS5jb20vc2hhcmVkZmlsZXMvZmlsZWRldGFpbHMvP2lkPSIrJCh0aGlzKS5kYXRhKCJjaGVjayIpLAogICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIGlmICgoL3RvZ2dsZWQiIGlkPSJWb3RlVXBCdG4iIG9uY2xpY2s9IlZvdGVVcFwoLykudGVzdChyZXNwb25zZS5yZXNwb25zZVRleHQpKSB7CiAgICAgICAgICAgICAgICAkKGJ1dHRvbikudG9nZ2xlQ2xhc3MoImJ0bi1kZWZhdWx0IGJ0bi1zdWNjZXNzIikucHJvcCgiZGlzYWJsZWQiLCAiZGlzYWJsZWQiKS5maW5kKCJpLmdseXBoaWNvbi1yZWZyZXNoIikudG9nZ2xlQ2xhc3MoImdseXBoaWNvbi1yZWZyZXNoIGdseXBoaWNvbi1vayIpOwogICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gY2hlY2tzLmluZGV4T2YoYnV0dG9uKTsKICAgICAgICAgICAgICAgIGlmKGluZGV4ID4gLTEpCiAgICAgICAgICAgICAgICAgICAgY2hlY2tzLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjaGVja3MucHVzaChidXR0b24pOwogICAgICAgICAgICAgICAgaWYoaXNPcGVuKQogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKCJodHRwczovL3N0ZWFtY29tbXVuaXR5LmNvbS9zaGFyZWRmaWxlcy9maWxlZGV0YWlscy8/aWQ9IiskKGJ1dHRvbikuZGF0YSgiY2hlY2siKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKfTsKaWYgKCQoImFydGljbGUgLmV4dGVuc2lvbiIpLmxlbmd0aCkgewogICAgJCgiYXJ0aWNsZSAuZXh0ZW5zaW9uIikuYWRkQ2xhc3MoImluc3RhbGxlZCIpOwogICAgdmFyIHRpbWVzdGFtcCA9ICQoImFydGljbGUgLmV4dGVuc2lvbiIpLmRhdGEoInRpbWVzdGFtcCIpOwogICAgdmFyIGNzcmYgPSAkKCJhcnRpY2xlIC5leHRlbnNpb24iKS5kYXRhKCJjc3JmIik7CiAgICB2YXIgZXh0ZW5zaW9uID0gbWQ1KHRpbWVzdGFtcCsiIitjc3JmKTsKICAgIHZhciBzZWNyZXQgPSAkKCJhcnRpY2xlIC5leHRlbnNpb24iKS5kYXRhKCJzZWNyZXQiKTsKICAgICQuZ2V0KHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSsiP2V4dGVuc2lvbj0iK2V4dGVuc2lvbisiJnRpbWVzdGFtcD0iK3RpbWVzdGFtcCsiJmNzcmY9Iitjc3JmKyhzZWNyZXQgPyAiJnNlY3JldD0iK3NlY3JldCA6ICIiKSwgZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAkKHdpbmRvdykuZm9jdXMoZnVuY3Rpb24oKXsKICAgICAgICAgICAgdmFyIHRtcEFycmF5ID0gY2hlY2tzLnNsaWNlKCk7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG1wQXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBidXR0b24gPSB0bXBBcnJheVtpXTsKICAgICAgICAgICAgICAgIHZhciB0eXBlID0gJChidXR0b24pLmRhdGEoInR5cGUiKTsKICAgICAgICAgICAgICAgIGlmKHR5cGUgPT0gInN0ZWFtLmdyb3VwIikKICAgICAgICAgICAgICAgICAgICBjaGVja0dyb3VwKGJ1dHRvbik7CiAgICAgICAgICAgICAgICBlbHNlIGlmKHR5cGUgPT0gInN0ZWFtLmdyZWVubGlnaHQiKQogICAgICAgICAgICAgICAgICAgIGNoZWNrR3JlZW5saWdodChidXR0b24pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgJCgiYXJ0aWNsZSIpLnJlcGxhY2VXaXRoKHJlc3BvbnNlKTsKICAgICAgICAkKCJhcnRpY2xlIikuYXR0cigiZXh0ZW5zaW9uLXZlcnNpb24iLCAiY2hyb21lLSIrZXh0ZW5zaW9uVmVyc2lvbik7CiAgICAgICAgJCgiYVtocmVmKj0nYWN0aW9uL3JlZGlyZWN0J10iKS5lYWNoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBpZigkKHRoaXMpLmRhdGEoInR5cGUiKSA9PSAidHJpZ2dlciIpIHsKICAgICAgICAgICAgICAgIHZhciBidXR0b24gPSAkKHRoaXMpLmNsb3Nlc3QoInRyIikuZmluZCgiYnV0dG9uLmJ0bi1kZWZhdWx0W2RhdGEtdHlwZT0nbGluayddIik7CiAgICAgICAgICAgICAgICBidXR0b24uYXBwZW5kKCLpk77mjqUiKTsKICAgICAgICAgICAgICAgICQuZ2V0KHRoaXMuaHJlZikuYWx3YXlzKGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgJChidXR0b24pLnRvZ2dsZUNsYXNzKCJidG4tZGVmYXVsdCBidG4tc3VjY2VzcyIpLnByb3AoImRpc2FibGVkIiwgImRpc2FibGVkIikuZmluZCgiaS5nbHlwaGljb24tcmVmcmVzaCIpLnRvZ2dsZUNsYXNzKCJnbHlwaGljb24tcmVmcmVzaCBnbHlwaGljb24tb2siKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYoJCh0aGlzKS5kYXRhKCJ0eXBlIikgPT0gInZrLmNsdWIiKSB7CiAgICAgICAgICAgICAgICB2YXIgYnV0dG9uID0gJCh0aGlzKS5jbG9zZXN0KCJ0ciIpLmZpbmQoImJ1dHRvbi5idG4tZGVmYXVsdFtkYXRhLXR5cGU9J3ZrLmNsdWInXSIpOwogICAgICAgICAgICAgICAgYnV0dG9uLmFwcGVuZCgiVksiKTsKICAgICAgICAgICAgICAgICQuZ2V0KHRoaXMuaHJlZikuYWx3YXlzKGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgJChidXR0b24pLnRvZ2dsZUNsYXNzKCJidG4tZGVmYXVsdCBidG4tc3VjY2VzcyIpLnByb3AoImRpc2FibGVkIiwgImRpc2FibGVkIikuZmluZCgiaS5nbHlwaGljb24tcmVmcmVzaCIpLnRvZ2dsZUNsYXNzKCJnbHlwaGljb24tcmVmcmVzaCBnbHlwaGljb24tb2siKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgICQuZ2V0KHRoaXMuaHJlZikuYWx3YXlzKGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgJCgiYnV0dG9uW2RhdGEtdHlwZT0nc3RlYW0uZ3JlZW5saWdodCddIikuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhpcy5hcHBlbmQoIue7v+WFiSIpOwogICAgICAgICAgICBjaGVja0dyZWVubGlnaHQodGhpcyk7CiAgICAgICAgICAgICQodGhpcykuY2xpY2soZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgY2hlY2tHcmVlbmxpZ2h0KHRoaXMsIHRydWUpOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICAkKCJidXR0b25bZGF0YS10eXBlPSdzdGVhbS5ncm91cCddIikuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhpcy5hcHBlbmQoIue7hCIpOwogICAgICAgICAgICBjaGVja0dyb3VwKHRoaXMpOwogICAgICAgICAgICAkKHRoaXMpLmNsaWNrKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIGNoZWNrR3JvdXAodGhpcywgdHJ1ZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHZhciBidXR0b24gPSAkKCIjZ2V0S2V5IGEiKTsKICAgICAgICB2YXIgYWN0aW9ucyA9IDA7CiAgICAgICAgJCgiI2FjdGlvbnMgW2RhdGEtYWN0aW9uLWlkXSIpLmVhY2goZnVuY3Rpb24oaSxlbCl7CiAgICAgICAgICAgIGFjdGlvbnMgKz0gcGFyc2VJbnQoJChlbCkuZGF0YSgiYWN0aW9uLWlkIikpOwogICAgICAgIH0pOwogICAgICAgICQoYnV0dG9uKS5hdHRyKCJocmVmIiwgJChidXR0b24pLmF0dHIoImhyZWYiKSsiJmFjdGlvbnM9IittZDUoYWN0aW9ucykpLnJlbW92ZUNsYXNzKCJkaXNhYmxlZCIpOwogICAgfSk7Cn0="}]}