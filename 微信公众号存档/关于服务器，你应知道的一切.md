# 关于服务器，你应知道的一切

标题所说的服务器，就是我们平时所说的 虚拟主机、VPS、云主机、独立服务器这一类的总称了，怕标题太长统一称之为服务器，那么它们到底有什么区别么？

关于 App Engine 上次已经说了，真要说的话，它和虚拟主机比较像吧，也仅仅是像，~~或许是虚拟主机的降维版本吧~~

## 基础

也就是原理，实现过程，当然这些是服务商该操心的事，这些概念在 App Engine  中也提到过，如果你想自己搞一个那可以尝试深入了解...

![upload successful](https://blog.gavinzh.com/images/pasted-38.png)

`IaaS`就是提供基础服务器资源，`PaaS`提供能运行你程序代码的环境，而`SaaS`提供的是具体的应用功能和数据存储服务。

## 什么是VPS

VPS（**Virtual Private Server**）即指**虚拟专用服务器**，是将一个（物理）服务器分区成多个虚拟独立专享服务器的技术。

每个使用 VPS 技术的虚拟独立服务器拥有各自独立的公网 IP 地址、操作系统、硬盘空间、内存空间、CPU资源等，还可以进行安装程序、重启服务器等操作，与运行一台独立服务器完全相同。

也就是说**通过软件层面**，对一台服务器进行虚拟划分，虚拟出来多台服务器，这样就能让只需要一点点计算能力用户享用到大型服务器的计算资源。

---

**优点：**价格便宜

**缺点：**性能低，高可用性低（除了其所在的物理机出问题了会收到影响，虚拟化技术出问题也会收到影响）

**总结：**性价比很好，对于中小型的企业，VPS 主机受到用户的青睐是必然的。作为个人买家，推荐 VPS，VPS 最重要的优势在于`价格低廉`。

## 什么是云主机

目前市面上各大厂商都推出了自己的云主机，但是他们给自己的云主机起了个别名。

例如阿里云叫做`云主机ECS`，腾讯云叫做`云主机CVM`，微软 Azure 云叫做`虚拟机`。所以市面上的各种提供计算能力的机器不管叫什么名字，他们都是云主机。

从广义上讲，云主机就是 VPS，只不过云主机是**在所有基础服务器或者虚拟机上（集群）虚拟化所有基础资源**，例如内存带宽等等。而狭义的 VPS 仅在单台服务器上做虚拟化。

云主机的优势在于它可以分布式存储数据，动态扩展基础资源。安全性和扩展性较强。

---

**优点：**价格适中，使用灵活，高可用性（单个或多个物理离线不会对整个服务造成太大的影响）

**缺点：**性能相对较低

**总结：**可以提高虚拟主机的安全性和稳定性，具有更高的灵活性，用户可以自主定义服务器配置，扩展性极好，深受大企业用户的欢迎。互联网公司可以选择

## 什么是虚拟主机

即共享主机，是利用虚拟技术把一台完整的服务器分成若干个主机，拥有多个网站，共享这台服务器的硬件和带宽的资源。可以托管简单的静态和动态的网站，满足客户最基本的网络托管需求。（不就相当于买了一个空间嘛）

它和 VPS 的区别很明显。**虚拟主机只能放置你的网页程序代码，不能管理这台机器**。

也就是说 VPS 和云服务器是同一级别的概念，属于 IaaS。而虚拟主机是在前者级别之上，属于 PaaS。

国内有很多小厂，**故意混淆两者概念**，很容易上当，大家请务必注意这点。

---

**优点：**价格低，使用方便

**缺点：**一般来说只能做网站，或应用后端服务器，市场杂乱比较难选购

**总结：** 个人用来做个小网站还是不错的选择

## 什么是独立服务器

独立服务器，顾名思义，就是一个躺在机房的实实在在的物理服务器，也可理解为你的游戏主机一样。

**优点：**性能高

**缺点：**价格高，高可用性低（比如断电，硬盘坏了......）

## 综合比较

### 部署时间

【虚拟主机】  从购买到安装这个过程有些费时。

【VPS主机】  无需安装操作系统，可即时使用。

【云主机】    一键部署或自己安装操作系统，即可使用。

### 安全可靠性

【虚拟主机】  相比较安全性较差，防范能力差，文件和数据库的备份需要手动操作。

【VPS主机】  一般，防范能力弱，同一台服务器上其他的VPS主机发生故障时，自己使用的VPS会受到影响。

【云主机】   较强，具有防攻击的能力，内置APP防范，内置HA，可使数据备份快速恢复。

### 性能及扩展

【虚拟主机】  性能差，无扩展性，是共享主机，受到诸多的限制。

【VPS主机】  性能较好，弹性大，扩容性大，但易受同台服务器上其他VPS的挤压，适合中小型企业。

【云主机】 性能极好，有保障，可按需扩展，是大型企业的首选。

### 成本及价格

【虚拟主机】 共享主机，成本低，但是维护租用服务器会导致整体的成本提高。 

【VPS主机】  配置低时，自身的成本较低，但是安全性和扩展性也随之降低，在运营过程中难控制增加其成本。

【云主机】 云主机购买时价格较高，从发展的长远来看，综合成本偏低，性价比较高。

### 操作及管理性

【虚拟主机】  需要远程控制，不易控制。

【VPS主机】 可以单独的启用服务器，和自行安装，但是无root权限，不能重装和升级，管理的灵活性受制于管理界面。

【云主机】 完全拥有root权限，内置KVM、用户通过服务器可以集中统一管理。性能好，性价比颇高，是大型企业的必然之选。

---

或者可以直接认为是：云主机可以虚拟出多个 VPS，然后 VPS 上装些软件就能再虚拟出一些虚拟主机

## 技术分类

### OpenVZ

`OpenVZ`是一个开源软件，它是操作系统级服务器虚拟化的解决方案。由于它的解决方案太过强大，可以在有限的机器上虚拟出几乎无限的VPS，但是由于内存CPU还是那么少，所以分到每个VPS的资源（例如内存CPU）就极其有限，有时候虚拟化带来的开销甚至比用户正常使用的开销还大。

**优势**:VPS 中性价比最高。

**劣势**:超卖，不能开VPN。

### KVM

`KVM`是 Kernel-based Virtual Machine 的简称，它也是开源的系统虚拟化模块。由于它是基于硬件的虚拟化，导致它虚拟化的所有VPS的总内存只可能比真实服务器所拥有的内存小。

**优势**:可以开VPN，独享内存。

**劣势**:价格感人。

### XEN

`XEN`是一个开放源代码虚拟机监视器，它对服务器硬件要求不高，可以有限的支持不同的操作系统（需要对操作系统源码做修改）。

**优势**:同样的虚拟化，比上述两种效率要高。

**劣势**:需要修改操作系统源码，维护不方便。

### VMware的ESX

是 VMware 公司的闭源产品，主要应用在大型企业内部。

---

至于那些服务商如何选择，无非就是免费的东西，大规模部署他们才不会花钱搞。

Hyper-V 母机要购买 Windows 授权，不用。

Vmware 也要花钱买，不用。

也就剩下 Xenserver 和 KVM了。

OVZ我就不懂了。。。

常见的，阿里是 xen，腾讯是 kvm

## 参考

https://blog.gavinzh.com/2017/07/05/VPS-learn/

https://www.zhihu.com/question/21442353