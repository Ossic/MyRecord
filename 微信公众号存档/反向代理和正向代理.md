# 反向代理和正向代理

## 什么是反向代理

**反向代理**（Reverse Proxy）方式是指用代理服务器来接受 internet 上的连接**请求**，然后将请求转发给**内部网络上的**服务器，并将从服务器上得到的结果返回给 internet 上**请求连接的客户端**，此时代理服务器对外就表现为一个反向代理服务器。

举个例子，一个用户访问 [http://www.example.com/readme](http://www.example.com/readme)，但是 [www.example.com](http://www.example.com/) 上并不存在 readme 页面，它是**偷偷**从另外一台服务器上取回来，然后作为自己的内容返回给用户。但是**用户并不知情这个过程**。对用户来说，就像是直接从 [www.example.com](http://www.example.com/) 获取 readme 页面一样。这里所提到的 [www.example.com](http://www.example.com/) 这个域名对应的服务器就设置了反向代理功能。

反向代理服务器，对于客户端而言它就像是原始服务器，并且客户端不需要进行任何特别的设置。客户端向反向代理的命名空间(name-space)中的内容发送普通请求，接着反向代理将判断向何处(原始服务器)转交请求，并将获得的内容返回给客户端，就像这些内容原本就是它自己的一样。如下图所示：



## 反向代理典型应用场景

反向代理的典型用途是将防火墙后面的服务器提供给 Internet 用户访问，**加强安全防护**。反向代理还可以为后端的多台服务器提供**负载均衡**，或为后端较慢的服务器提供 **缓冲** 服务。另外，反向代理还可以启用高级 URL 策略和管理技术，从而使处于不同 web 服务器系统的 web 页面同时存在于同一个 URL 空间下。

Nginx 的其中一个用途是做 HTTP 反向代理！

## 正向代理

既然有反向代理，自然也有正向代理。简单来说，正向代理就像一个跳板，例如一个用户访问不了某网站（例如 `www.google.com`），但是他能访问一个代理服务器，这个代理服务器能访问 `www.google.com`，于是用户可以先连上代理服务器，告诉它需要访问的内容，代理服务器去取回来返回给用户。例如一些常见的翻墙工具、游戏代理就是利用正向代理的原理工作的，我们需要在这些正向代理工具上配置服务器的 IP 地址等信息。

**这个过程服务器认为请求的是跳板，并不能辨别真正的请求者**

## 更好的理解正向和反向

>   我们常说的代理也就是只正向代理，正向代理的过程，**它隐藏了真实的请求客户端**，服务端不知道真实的客户端是谁，客户端请求的服务都被代理服务器代替来请求，某些科学上网工具扮演的就是典型的正向代理角色。
>
>   反向代理**隐藏了真实的服务端**，当我们请求ww.baidu.com 的时候，就像拨打10086一样，背后可能有成千上万台服务器为我们服务，但具体是哪一台，你不知道，也不需要知道，你只需要知道反向代理服务器是谁就好了, ww.baidu.com 就是我们的反向代理服务器，反向代理服务器会帮我们把请求转发到真实的服务器那里去。Nginx就是性能非常好的反向代理服务器，用来做负载均衡。
>
>   原文：https://www.zhihu.com/question/24723688