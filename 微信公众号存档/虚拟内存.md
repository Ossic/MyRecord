# 虚拟内存

## 什么是虚拟内存？

>   **虚拟内存**是计算机系统内存管理的一种技术。它使得应用程序**认为它拥有连续的可用的内存**（一个连续完整的地址空间），而实际上，它通常是被分隔成多个物理内存碎片，**还有部分暂时存储在外部磁盘存储器上**，在需要时进行数据交换。与没有使用虚拟内存技术的系统相比，使用这种技术的系统**使得大型程序的编写变得更容易**，对真正的[物理内存](https://zh.wikipedia.org/wiki/%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98)（例如[RAM](https://zh.wikipedia.org/wiki/%E9%9A%A8%E6%A9%9F%E5%AD%98%E5%8F%96%E8%A8%98%E6%86%B6%E9%AB%94)）的使用也更有效率。
>
>   对虚拟内存的定义是基于对[地址空间](https://zh.wikipedia.org/wiki/%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4)的重定义的，即把地址空间定义为“连续的虚拟内存地址”，**以借此“欺骗”程序**，使它们以为自己正在使用一大块的“连续”地址。

## 虚拟内存的作用

而虚拟内存，顾名思义就是**把不是内存的东西当内存用**。实际上就是把外存当内存用。
但是一个很严重的问题就是外存的速度相对于内存要缓慢的多，所以**虚拟内存虽然在一定程度上增加了可用内存但是在总体上降低了内存响应速度。**

### 为什么要用虚拟内存？

内存的大小直接决定我们的电脑可运行程序的多少，当运行的程序超过内存大小时系统会变卡。而虚拟内存的出现就在一定程度上扩展了内存的大小，让电脑能运行更多的程序。

## 虚拟内存设置多少合适？

首先我们必须要了解的一个问题：

### 虚拟内存越大越好？

当然不是，最起码在windows下不是。虚拟内存虽然干内存的活但是毕竟是外存，所以响应速度很糟糕。而另一个问题就出现在windows系统上。**windows系统的内存和虚拟内存的分配原则是等同对待数据随机写入。**也就是说内存和虚拟内存在windows系统下是平等的，当输入需要写入内存时会随机的写入内存或者虚拟内存。那么虚拟内存越大数据被写入虚拟内存的概率也就越大，这样的结果就是**系统平均响应速度会下降。**所以虚拟内存不要设定的太大，尤其是硬盘性能不太好的时候。当然也有很多极端弄得办法，对于大内存用户完全可以禁用虚拟内存，速度会有所提升。

### 应该设置多少？

有很多人推荐是物理内存的1.5倍，至于这个，我认为的是首先看你物理内存多少，然后结合你在平时用电脑时内存的占用情况，像我现在加了根内存条8G内存，虚拟内存就设了个1G，以避免内存溢出，一般情况下我是足够了，设多了反而影响性能。

还有就是硬盘的的速度也会影响虚拟内存的大小最佳值。对于固态硬盘或者1万转速的硬盘来说虚拟内存可以略微大点，而对于我们这种7200普通转速硬盘最好适中点，而采用5200转硬盘的同学尽量小点吧……

### 关于U盘？

**虚拟内存设定到u盘上速度回略微快点**。这个原因是u盘作为外存虽然读写速度比不上硬盘但是随机读写速度却比硬盘要快多了。**而随机读写速度就是影响虚拟内存性能的关键指标**，所以用u盘当虚拟内存确实可以加速系统，但是实话实说，很有限，而且会降低u盘的寿命，所以要慎重哦。

## 最后

上面大部分所说适用于win，至于Linux的交换分区，下次再说http://mtoou.info/xunineicun-jieshi/