# localhost与127.0.0.1的区别

首先 **localhost** 是一个域名，在过去它指向 `127.0.0.1` 这个IP地址。在操作系统支持 ipv6 后，它同时还指向 ipv6 的地址 `[::1]`

在 Windows 中，这个域名是预定义的，从 hosts 文件中可以看出：

```
# localhost name resolution is handled within DNS itself.
#	127.0.0.1       localhost
#	::1             localhost
```

而在 Linux 中，其定义位于 **/etc/hosts** 中：
`127.0.0.1    localhost`
注意这个值是可修改的

## localhost

**localhost 是个域名**，而不是一个ip地址。之所以我们经常把 localhost 与 127.0.0.1 认为是同一个是因为我们使用的大多数电脑上都讲 localhost 默认指向了127.0.0.1这个地址。 

不过网络上很多都说：

>   **localhot（local）是不经网卡传输！这点很重要，它不受网络防火墙和网卡相关的的限制。**
>   127.0.0.1是通过网卡传输，依赖网卡，并受到网络防火墙和网卡相关的限制。

我认为，这样是**完全错误**的，可能是受 PHP 中的 mysql 介绍影响，见最下面的 例外

localhost 是个域名，只有把域名解析为 127.0.0.1 才能传输。上层是无法控制下层如何完成工作的，只能告诉下层工作的目的

>   当然，有时会产生两者有区别的错觉在于使用域名请求服务器和使用IP地址请求服务器是不同的。
>   特别对于 HTTP 服务器而言，服务器会根据你请求的具体域名来决定给你什么服务。这个机制是用来允许一台 HTTP 服务器在同一个端口上服务多个网站设计的。
>   如果配置为只服务 localhost，不服务127.0.0.1，或者防火墙上做了类似的配置，就可能产生误解。许多其他服务也有类似的配置能力，例如FTP。
>
>   有时网络栈的错误配置可能导致localhost不被解析，也是可能的原因
>
>   原文链接：https://www.zhihu.com/question/26521339/answer/33080707

比如在 Linux 中，127.0.0.1 是内核设备 loop，**不走网卡，几乎无性能损失**。

至于 windows 下不太清楚，就算禁用了所有网卡(最好是把网卡拆了)，localhost 和 127 依然 ping 的通的，当然这样禁用没啥意义，应该会有个虚拟网卡的，专门为 127 来服务
看到 CSDN 一个人做过实验，应该是不走网卡的，它们两个只会走协议通道

## 127.0.0.1

127.0.0.1 这个**地址**通常分配给 **loop back** 接口。属于回环地址，它就是个特殊的IP地址。

loopback 是一个特殊的网络接口(可理解成虚拟网卡)，用于本机中各个应用之间的网络交互。只要操作系统的网络组件是正常的，loopback 就能工作。Windows 中看不到这个接口，Linux中这个接口叫 lo：可以通过 **ifconfig** 命令来查看

127.0.0.1 属于 {127,} 集合中的一个，而**所有网络号为127的地址都被称之为回环地址**，所以`回环地址 != 127.0.0.1`,它们是包含关系，即`回环地址包含127.0.0.1`。 
回环地址：所有发往该类地址的数据包都应该被 loop back，就是说数据包不会出网卡，网络设备也不会对其进行路由
用途: 

* 回环测试,通过使用 ping 127.0.0.1 测试某台机器上的网络设备，操作系统或者 TCP/IP 实现是否工作正常。 
* DDos攻击防御：网站收到 DDos 攻击之后，将域名A记录到 127.0.0.1，即让攻击者自己攻击自己。 
* 大部分Web容器测试的时候绑定的本机地址。

## 0.0.0.0

-   IPV4 中
    0.0.0.0 地址被用于表示一个无效的，未知的或者不可用的目标。 
-   在服务器中
    0.0.0.0 指的是本机上的所有 IPV4 地址，如果一个主机有两个IP地址，192.168.1.1 和 10.1.2.1，并且该主机上的一个服务监听的地址是 0.0.0.0,那么通过两个ip地址都能够访问该服务。 
-   在路由中
    0.0.0.0 表示的是默认路由，即当路由表中没有找到完全匹配的路由的时候所对应的路由。

用途总结：

-   当一台主机还没有被分配一个IP地址的时候，用于表示主机本身。（DHCP分配IP地址的时候）
-   用作默认路由，表示”任意IPV4主机”。
-   用来表示目标机器不可用。
-   用作服务端，表示本机上的任意IPV4地址。

注意：

**127.0.0.1 是一个回环地址。并不表示“本机”。0.0.0.0 才是真正表示“本网络中的本机”。** 

## 例外

但是有个有意思的例外就是 mysql , 在 Linux 上， 当你使用 localhost 来连接数据库的时候， Mysql 会使用 Unix domain socket 来传输数据， **这种方式会快一些**， 因为这是一种进程内通信(IPC)机制， 不走网络协议栈， 不需要打包拆包， 计算校验和，维护序号等操作。

当你使用127.0.0.1的时候， mysql 还是会使用 TCP/IP 协议栈来进行数据传输。